define("DS/TopBar/model/MainMenuBar",["UWA/Core","UWA/Utils/InterCom","UWA/Utils","DS/TopBarProxy/Menu","DS/TopBarProxy/MenuBarItem"],function(d,i,e,b,h){var f,g,a;g={};a=["away","active","busy","offline"];function c(o,l,k){var j,n,m;if(!d.is(o,"object")){return o}m=Object.keys(o);for(j=0,n=m.length;j<n;j++){l.call(k,o[m[j]],m[j],o)}return o}f=b.singleton({model:h,uwaClassName:"DS/TopBar/model/MainMenuBar",uninitializedCalls:"throw",alwaysActiveMenuProvidersIds:[],activeMenuProvidersIds:[],_activeProxiesIds:[],setStaticMenuProviders:function(j){this.alwaysActiveMenuProvidersIds=e.splat(j);this.setActiveMenuProviders(this.activeMenuProvidersIds)},setActiveMenuProviders:function(j){this.activeMenuProvidersIds=this.alwaysActiveMenuProvidersIds.concat(e.splat(j));this._computeActiveProxiesIds();this._setActiveProxiesIdsOnTopMenuItems()},_computeActiveProxiesIds:function(){this._activeProxiesIds=[];this.activeMenuProvidersIds.forEach(function(j){c(g[j],function(l,k){if(true===l){this._activeProxiesIds.push(k)}},this)},this)},_setActiveProxiesIdsOnTopMenuItems:function(){this.forEach(function(j){j.setActiveProxyIds(this._activeProxiesIds)},this)},getActiveMenuProviders:function(){return this.activeMenuProvidersIds},init:function(j){this._parent(null,j)},setup:function(p,j){var k,n=[],m=this,o;this._server=new i.Server("MainMenuBar",{isPublic:false});c({activate:"_activateProxy",deactivate:"_deactivateProxy",die:"_unregisterProxy",subscribeToChannel:"_registerProxy",setContent:"setContent",onSubMenuReady:"fireOnSubMenuReady"},function(r,q){this._server.addListener(q,function(s,t){m[r].call(m,t.origin.socket,s)})},this);["onExecute","onSubMenuDisplayed"].forEach(function(q){this.addEvent(q,function(r,s){this._server.dispatchEvent(q,s,null,e.splat(r))},this)},this);o=["profile","notification","add","share","content","social","home","help"];k=j&&j.topMenus;function l(q,r){q[r]&&n.push({id:r,value:q[r]})}if(k){o.forEach(function(q){return l(k,q)})}else{n=[{id:"profile"},{id:"add"},{id:"share"},{id:"home"},{id:"help"}]}n.push({id:"search"});this.add(n.map(function(q){var r={id:q.id,label:q.id.ucfirst(),submenu:[],onExecute:d.is(q.value,"function")?q.value:undefined};if(q.id==="profile"){r.userName=j.userName}return r}),{silent:true});this.setActiveMenuProviders([])},setContent:function(l,m){var j,k=m.onSubMenuDisplayed||{};this.forEach(function(o){var p,n;p=o.id;n=m[p];if(n){o.get("submenu").setItems(l,n);if(k[p]){j=o.get("onSubMenuDisplayed")||{};j[l]=true;o.set("onSubMenuDisplayed",j)}}},this)},fireOnSubMenuReady:function(j,l){var k=this.get(l);k&&k.dispatchEvent("onSubMenuReady",[j])},_setProxyActivateStatus:function(m,n,j){var o,l,k=g[n];if(d.is(k,"object")){l=k[m]}if(d.is(l,"boolean")){if(j!==l){k[m]=j;if(-1<this.activeMenuProvidersIds.indexOf(n)){if(true===j){this._computeActiveProxiesIds()}else{o=this._activeProxiesIds.indexOf(m);if(-1<o){this._activeProxiesIds.splice(o,1)}}this._setActiveProxiesIdsOnTopMenuItems()}}}else{throw new Error("{0}: Failed to {1}activate unknown Proxy {2} (channel:{3})".format(this.uwaClassName,false===j?"de":"",m,n))}},_deactivateProxy:function(j,k){return this._setProxyActivateStatus(j,k,false)},_activateProxy:function(j,k){return this._setProxyActivateStatus(j,k,true)},_unregisterProxy:function(k,l){var j;this.setContent(k,{profile:[],add:[],share:[],home:[],help:[],notification:[],social:[],content:[]});this._deactivateProxy(k,l);j=g[l];delete j[k];this._server.unsubscribeSocket(k)},_registerProxy:function(k,l){var j=g[l];if(!j){j=g[l]={}}if(d.is(j[k],"boolean")){throw new Error("Proxy {0} is already registered on channel {1}".format(k,l))}else{j[k]=false;this._activateProxy(k,l)}},_removeProvider:function(l){var k=this,j=g[l];if(j){c(j,function(n,m){k._unregisterProxy(m,l)});delete g[l]}},setStatus:function(j){var k=this.get({id:"profile"});if(k){k.set("status",a.indexOf(j)>=0?j:"")}else{d.log("MainMenuBar: Could not change status")}},setBadge:function(l,k){var j=this.get({id:l});if(j){j.set("countBadge",k)}},toJSON:function(j){var k={};this.forEach(function(l){k[l.id]=l.toJSON(j)},this);return k},dump:function(j){j||(j=" ");d.log("Dumping MenuBar: ");this.invoke("dump",j);d.log("JSON value: ");d.log(this.toJSON())}});return f});define("TopBar/model/MainMenuBar",["DS/TopBar/model/MainMenuBar"],function(a){return a});define("DS/TopBar/utils/Utils",["UWA/Core"],function(c){var b;var a=(function(){function d(e){if(e==null){throw new TypeError("assign cannot be called with null or undefined")}return Object(e)}return Object.assign?Object.assign:function(k){var g,e,m,h,f,l=d(k);if(arguments.length===1){return l}for(g=1;g<arguments.length;g++){e=arguments[g];if(e===null||e===undefined){continue}m=d(e);h=Object.keys(m);for(f=0;f<h.length;f++){l[h[f]]=m[h[f]]}}return l}}());b={throttle:function(i,k){var g,f,j,d,h=0;function e(){h=Date.now();j=null;d=i.apply(g,f)}return function(){var l=Date.now(),m=k-(l-h);g=this;f=arguments;if(m<=0){clearTimeout(j);j=null;h=l;d=i.apply(g,f)}else{if(!j){j=setTimeout(e,m)}}return d}},result:function(d,f){var e;if(!d){return null}e=d[f];if((c.typeOf(e))==="function"){return e.call(d)}return e},pick:function(f){var d,g,e;g={};e=c.is;d=a.apply(null,Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1)).map(function(h){var i;if(e(h,"string")){i={};i[h]=h}else{if(e(h,"plain")){i=h}}return i}));Object.keys(d).forEach(function(h){var j,i;if(h in f){j=f[h];if(null!==j&&undefined!==j&&""!==j){i=d[h];if(e(i,"string")){g[i]=f[h]}}}});return g},renderInitials:function(j,l){var e,g,f,h,i,k,d=["#42A2DA","#57B847","#EA4F37","#00B8DE","#E87B00","#9B2C98","#00AA86","#F564A3","#FF8A2E","#6D2815"],l=c.merge(l||{},{className:"",seed:0});e=c.createElement("div",{"class":"initials-view "+l.className});g=(j||"").trim().split(" ");if(g.length<2){return e}i=g[0].substr(0,1);k=g[1].substr(0,1);f=(i+k).toUpperCase();h=Math.ceil((i.charCodeAt(0)+k.charCodeAt(0)+l.seed)%d.length);e.setStyles({"background-color":l.backgroundColor?l.backgroundColor:d[h]});e.setText(f);return e}};return b});define("DS/TopBar/views/MenuItemView",["UWA/Core","UWA/Event","UWA/Element","UWA/Class/View","require"],function(f,b,c,e,d){var g,a;g=e.extend({tagName:"li",className:"menu-item",setup:function(){var h;this.listenTo(this.model,{onChange:this.update,"onChange:label":this.updateLabel,"onChange:checked":this.updateChecked,"onChange:className":this._updateClassName,onBadgeSumChange:this._updateCountBadge,onRemove:this.remove});h=this.model.get("className");if(h&&h.length){this.container.addClassName(h)}},destroy:function(){this.stopListening();this._parent()},getContent:function(){var l=this,h=this.model.get("submenu"),m=f.is(h),i=this.model.get("onExecute"),n=this.model.get("group")&&m,k=this.model.get("separator"),j,p,o;if(this.container.firstChild){return this.container}if(k){this.container.addClassName("separator");return this.container}if(n){this.container.addClassName("menu-item-group")}else{this.container.addContent({tag:"div","class":"header",html:[{tag:"span","class":"menu-item-icon menu-item-icon-before"},{tag:"span","class":"menu-item-text",text:this.model.get("label")},{tag:"span","class":"menu-item-badge"}]});if(this.model.get("checked")){this.container.getElement(".menu-item-icon-before").addClassName("checked")}this.$countBadge=this.container.getElement(".menu-item-badge");if(this.model.get("type")==="checkbox"){this.container.getElement(".menu-item-icon-before").addClassName("menu-checkbox")}else{if(this.model.get("icon")){this.container.getElement(".menu-item-icon-before").addClassName("fonticon fonticon-"+this.model.get("icon"))}}if(this.model.get("icon-after")){this.container.getElement(".header").addContent({tag:"span","class":"menu-item-icon menu-item-icon-after fonticon fonticon-"+this.model.get("icon-after")})}}if(m){if(!a){a=d("DS/TopBar/views/MenuView").extend({className:"sub-menu"})}p=new a({model:h});if(!n){o=function(q){l.toggleSubMenu();b.stop(q)};if(i){this.container.addClassName("executable");this.container.addContent({tag:"span","class":"menu-item-submenu-icon",events:{click:o}});this.container.getElement(".header").addEvent("click",function(q){if(!l.container.hasClassName("executable")){o(q)}})}else{this.container.getElement(".header").addContent({tag:"span","class":"menu-item-submenu-icon"});this.container.addEvent("click",o)}j=f.createElement("div",{"class":"menu-item-submenu"});this.container.addContent(j)}else{j=this.container}p.inject(j)}if(this.model.get("onExecute")){this.container.addEvent("click",function(q){l.model.execute();b.stop(q)})}else{if(!m){this.container.addEvent("click",function(q){b.stop(q)})}}return this.container},onPostInject:function(){if(this.$countBadge){this._updateCountBadge()}},update:function(h){if(h.hasChanged("label")||h.hasChanged("checked")||h.hasChanged("_countBadgeSum")){return}},updateChecked:function(){this.container.getElement(".menu-item-icon-before").toggleClassName("checked")},updateLabel:function(j,i){var h=this.container.getElement(".menu-item-text");h.setText(i)},remove:function(){this.toggleSubMenu(false);this.destroy()},toggleSubMenu:function(i){var h=null;if(!f.is(this.model.get("submenu"))){return}this.container.toggleClassName("expanded",i);if(this.model.get("onExecute")){this.container.toggleClassName("executable",f.is(i)?!i:undefined)}h=this.container.getClosest(".menu");if(f.is(h)){h.toggleClassName("sub-menu-expanded",i)}},_updateCountBadge:function(){var h=this.model._getCountsSum();if(this.$countBadge){if(h){this.$countBadge.setText(h>99?"99+":h)}this.container.toggleClassName("badge",h)}},_updateClassName:function(i,h){var j=this.model.previous("className");if(j){this.container.removeClassName(j)}if(h){this.container.addClassName(h)}}});return g});define("DS/TopBar/utils/Debuggable",["UWA/Core","UWA/Class/Debug"],function(c,a){var b;b=a.extend({log:function(d){return this._parent(String.prototype.format.apply("{0}: {1}".format(c.is(this.uwaClassName,"string")?this.uwaClassName:"[UNKNOWN]",d),[].slice.call(arguments,1)))}});return b});define("DS/TopBar/views/Menu",["UWA/Core","UWA/Element","UWA/Event","UWA/Utils","UWA/Controls/Abstract"],function(h,b,a,e,g){var c=(function(){var i=/^(header|divider)$/;return function(k){if(!k){return false}var l=k.split(" ");for(var j=0;j<l.length;j++){if(i.test(l[j])){return true}}return false}}());function f(i){return/\.(gif|jpg|jpeg|tiff|png)$/i.test(i)}var d={name:"",templateClassname:"",items:null,isVisible:false,keyboardIndex:-1,defaultOptions:{multiSelect:false,attributes:{}},init:function(i){i=i||{};if(i.kb===undefined){i.kb=true}this._parent(i);this.items=[];this.buildSkeleton();if(i.items){i.items.forEach(function(j){this.addItem(j)},this)}},buildSkeleton:function(){var i=h.createElement,j=this.elements;if(j.container){return}j.container=i("div",{"class":this.getClassNames(),styles:{display:"none","z-index":26}});Object.keys(this.options.attributes).forEach(function(k){j.container.setAttribute(k,this.options.attributes[k])},this);j.wrapper=i("ul",{"class":this.name+"-wrap",tabindex:"1"});this.options.multiSelect&&j.wrapper.addClassName("dropdown-multiselect");j.wrapper.inject(j.container)},hide:function(){if(this.isVisible){this.isVisible=false;this.getContent().setStyle("display","none");this.dispatchEvent("onHide")}return this},show:function(){if(!this.isVisible){this.isVisible=true;this.getContent().setStyle("display","");this.focusIt();this.dispatchEvent("onShow")}return this},focusIt:function(){this.options.kb&&this.elements.wrapper.focus()},addItem:function(i){var j=this;e.splat(i).forEach(function(k){j._addItem(k)});return this},_addItem:function(j){var n=this.elements,i=j.className||"",m={},k,l=this;m.id=j.id||"itm-"+e.getUUID().substr(0,6);if(!j.name){m.name=j.text}if(j.disabled){i+=" disabled"}if(j.selected){j.selectable=true}if(j.selectable){i+=" selectable";m.toggleSelection=function(){l.toggleSelection(m)}}m.elements={};m.elements.container=h.createElement("li",{"class":"item "+i,id:m.id,title:j.title||""});Object.keys(j.attributes||{}).forEach(function(o){m.elements.container.setAttribute(o,j.attributes[o])});if(j.name){m.elements.container.set("name",j.name)}if(j.template){m.elements.content=h.createElement("div",{"class":"item "+this.templateClassname,id:m.id,html:j.template}).inject(m.elements.container)}else{if(j.text){m.elements.content=h.createElement("span",{"class":"item-text",text:j.text||""}).inject(m.elements.container)}}if(c(j.className)){m.elements.container.removeClassName("item")}else{if(j.fonticon){m.elements.icon=h.createElement("span",{"class":"fonticon fonticon-"+j.fonticon}).inject(m.elements.container,"top");n.wrapper.addClassName(this.name+"-icons")}if(!j.fonticon&&j.icon){if(f(j.icon)){m.elements.icon=h.createElement("img",{src:j.icon,"class":"item-icon"})}else{m.elements.icon=h.createElement("span",{"class":j.icon})}m.elements.icon.inject(m.elements.container,"top");n.wrapper.addClassName(this.name+"-icons")}}if(j.handler&&h.is(j.handler,"function")){m.handler=j.handler}if(j.index&&j.index!==this.items.length+1){k=this.items[j.index-1];m.elements.container.inject(k.elements.container,"before");this.items.splice(j.index-1,0,h.merge(m,j))}else{m.elements.container.inject(n.wrapper);this.items.push(h.merge(m,j))}if(j.selected){this.select(m)}return m},removeItem:function(i){var j=this;e.splat(i).forEach(function(k){j._removeItem(k)});return this},_removeItem:function(j){var i=this.getItem(j);if(i){i.elements.container.destroy();this.items.splice(this.items.indexOf(i),1)}},updateItem:function(i){var j=this;e.splat(i).forEach(function(k){j._updateItem(k)});return this},_updateItem:function(k){var m=this.getItem(k.id),j;function i(n){n.elements.icon&&n.elements.icon.destroy();n.elements.icon=h.createElement("span",{"class":n.icon}).inject(n.elements.container,"top")}function l(n){n.elements.icon&&n.elements.icon.destroy();n.elements.icon=h.createElement("span",{"class":"fonticon fonticon-"+n.fonticon}).inject(n.elements.container,"top")}if(m){if(h.is(k.text)&&m.text!==k.text){m.text=k.text;m.elements.container.getElement(".item-text").setText(k.text)}j=m.elements.container.getElement("."+this.templateClassname);if(h.is(k.template)&&j){j.setHTML(k.template)}if(h.is(k.name)&&m.name!==k.name){m.name=k.name}if(h.is(k.title)&&m.title!==k.title){m.title=k.title;m.elements.container.title=k.title}if(h.is(k.fonticon)&&m.fonticon!==k.fonticon){m.fonticon=k.fonticon;l(m)}else{if(h.is(k.icon)&&m.icon!==k.icon){m.icon=k.icon;i(m)}}if(h.is(k.disabled)){m.elements.container.toggleClassName("disabled",k.disabled)}if(h.is(k.className)&&m.className!==k.className){m.elements.container.removeClassName(m.className);m.elements.container.addClassName(k.className);m.className=k.className;if(c(k.className)){m.elements.container.removeClassName("item")}else{m.elements.container.addClassName("item")}}if(h.is(k.handler)){m.handler=k.handler}}},enableItem:function(j){var i=this.getItem(j);i&&i.elements.container.removeClassName("disabled");return this},disableItem:function(j){var i=this.getItem(j);i&&i.elements.container.addClassName("disabled");return this},getItem:function(o){var m,j,k,n=false;for(m=0,j=this.items.length;m<j;m+=1){n=this.items[m];if(o&&o.nodeType){k=o.hasClassName("item")?o:o.getParent();if(n.id===k.id){break}}else{if(m===o||n.id===o||n.name===o){break}}n=false}return n},_hoverItem:function(k,i){var j=this.getItem(k);if(j){i=(i===undefined)?(true):i;if(i){j.elements.container.addClassName("js-selected");this.options.kb&&j.elements.container.focus()}else{j.elements.container.removeClassName("js-selected")}}},_updateKeyboardIndex:function(l,i){var n=i||this.keyboardIndex,j=this.keyboardIndex,k=false,m;if(n===-1&&l!=="reset"){n=0;k=true}else{if(l==="down"&&n<this.items.length-1){n=n+1;k=true}else{if(l==="up"&&n>0){n=n-1;k=true}else{if(l==="reset"){this._hoverItem(n,false);n=-1}}}}m=this.getItem(n);if(m&&c(m.elements.container.className)){k=false;if(l==="down"||l==="up"){this._updateKeyboardIndex(l,n)}}if(k&&n>=0){this._hoverItem(j,false);this._hoverItem(n);this.keyboardIndex=n}},toggleSelection:function(i){this.select(i,!i.selected)},select:(function(){var i=function(k,j){k.selected=j;k.elements.container[j?"addClassName":"removeClassName"]("selected")};return function(l,k){var m,j=!this.options.multiSelect;if(k===undefined||k===true){if(j){m=this.items.filter(function(n){return n.selected});m[0]&&i(m[0],false)}i(l,true)}else{if(j&&l.selected){return}i(l,false)}}}())};return g.extend(d)});define("DS/TopBar/views/DropdownMenu",["UWA/Core","UWA/Element","UWA/Event","UWA/Utils","DS/UIKIT/Dropdown","DS/UIKIT/Menu"],function(g,c,n,k,m,j){var i="dropdown-menu",b="item",l="item-submenu",o="item-template",h=j.extend({name:i,templateClassname:o});function f(s,r,q,p){if(r.addEventListener){r.addEventListener(s,q,p)}else{if(r.attachEvent){r.attachEvent("on"+s,q,p)}}}function d(q,r,p){Object.keys(q).forEach(function(s){f(s,r,q[s],p)})}var e=(function(){var p=/^(header|divider|disabled)$/;return function(r){if(!r){return false}var s=r.split(" ");for(var q=0;q<s.length;q++){if(p.test(s[q])){return true}}return false}}());var a={name:i,items:null,menus:null,activeMenu:null,defaultOptions:{subMenuMaxDepth:20},init:function(p){this.menus=[];this.items=[];p=p||{};if(p.kb==null){p.kb=true}this.setupTemplates(p);this._parent(p);this.menus.reverse()},buildSkeleton:function(){var r=this.elements,q=this.options,p;if(r.container){return}p=this.addMenu(q.items,0,null,q.multiSelect);r.container=p.elements.container;r.container.className=this.getClassNames();this._handleEvents()},addMenu:function(q,v,p,u){var s=[],r=[],t;q.forEach(function(x,w){if(x.items&&v<this.options.subMenuMaxDepth){s.push(this.addMenu(x.items,v+1,x.position,x.multiSelect));r.push(w)}},this);t=new h({kb:this.options.kb,multiSelect:u,items:q,attributes:this.options.attributes});t.position=p||"bottom right";this.menus.push(t);this.items=this.items.concat(t.items);if(s.length){s.forEach(function(y,w){var x=t.getItem(r[w]),z;y.inject(x.elements.container);x.elements.container.addClassName(l);z=g.createElement("div",{"class":"next-icon"});z.inject(x.elements.container);g.createElement("span",{"class":"fonticon fonticon-right-open"}).inject(z);y.parentItem=x})}return t},setupTemplates:function(p){this.template={};this.template.getItem=function(q){var r;if(q.hasClassName(b)){return q}else{r=q.getParent("."+b);return r}};g.extend(this.template,p.template)},addItem:function(p){var q=this;k.splat(p).forEach(function(r){q._addItem(r)});return this},_addItem:function(r){var v=this,u,s,p;function q(x){var w=v.getItem(x);return w&&v._getMenuFromParentItem(w.id)}function t(y,x,z){var w=v.addMenu(x,0,null,z),A;w.inject(v.elements.container);y.elements.container.addClassName(l);A=g.createElement("div",{"class":"next-icon"});A.inject(y.elements.container);g.createElement("span",{"class":"fonticon fonticon-right-open"}).inject(A);w.parentItem=y;v.updatePosition();return w}if(r.parentItemId){s=q(r.parentItemId);if(s){if(r.items){if(r.text||r.name){u=s._addItem(r);u&&this.items.push(u);u&&t(u,r.items,r.multiSelect)}else{r.items.forEach(function(w){v.items.push(s._addItem(w))})}}else{this.items.push(s._addItem(r))}}else{p=this.getItem(r.parentItemId);if(!p){return}if(r.items&&(r.text||r.name)){s=t(p,[r],r.multiSelect)}else{t(p,r.items||[r],r.multiSelect)}}}else{s=this.menus[0];if(r.items){p=s._addItem(r);p&&this.items.push(p);p&&t(p,r.items,r.multiSelect)}else{this.items.push(s._addItem(r))}}},removeItem:function(q){var p=this;k.splat(q).forEach(function(r){p._removeItem(r)});return this},_removeItem:function(s){var q=this,p=this.getItem(s),r;if(!p){return}r=this._getMenuFromParentItem(p.id);if(r){this.items=this.items.filter(function(u){var t=q._getMenuFromItem(u.id);if(t&&((!t.parentItem)||t.parentItem&&t.parentItem.id!==s)){return true}else{r.removeItem(u);return false}});this.menus.splice(this.menus.indexOf(r),1);r.destroy()}r=this._getMenuFromItem(p.id);r&&r.removeItem(s);this.items.splice(this.items.indexOf(p),1)},updateItem:function(p){var q=this;k.splat(p).forEach(function(r){q._updateItem(r)});return this},_updateItem:function(p){var r,q;q=this.getItem(p.id);if(q){r=this._getMenuFromItem(q.id);p.id=q.id;r&&r.updateItem(p)}},enableItem:function(q){var p=this.getItem(q);p&&p.elements.container.removeClassName("disabled");return this},disableItem:function(q){var p=this.getItem(q);p&&p.elements.container.addClassName("disabled");return this},getItem:function(t){var r,p,q,s=false;for(r=0,p=this.items.length;r<p;r++){s=this.items[r];if(t&&t.nodeType){q=t.hasClassName(b)?t:t.getParent();if(s.id===q.id){break}}else{if(r===t||s.id===t||s.name===t){break}}s=false}return s},updatePosition:function(t){var s=this;this._parent(t);if(!this.isVisible||this.menus.length<=1){return}function q(C){var u="right",D="bottom",w=D+"-"+u,v=C.getContent(),A=v.getSize(),B,z;if(C._position){v.removeClassName(C._position)}v.addClassName(w);B=v.getPosition(s.getContent());z=v.getPosition();if(s._position.offsets.x+B.x+A.width>s._position.viewportWidth||(C.position&&C.position.indexOf("left")>-1)&&s._position.offsets.x+B.x-z.x-A.width>0){u="left"}if(s._position.offsets.y+B.y+A.height>s._position.viewportHeight+s._position.scrollTop||(C.position&&C.position.indexOf("top")>-1)&&s._position.offsets.y+B.y-z.y-A.height>s._position.scrollTop){D="top"}C._position=D+"-"+u;if(w!==C._position){v.removeClassName(w);v.addClassName(C._position)}}this.getContent().addClassName("js-visible");for(var r=1,p=this.menus.length;r<p;r++){q(this.menus[r])}this.getContent().removeClassName("js-visible")},show:function(q,r){var p;if(this.items.length){p=this._parent(q,r);this.activeMenu=this.menus[0];this.activeMenu.keyboardIndex=-1;this.activeMenu.focusIt();this.usingKeyboard=false;return p}},hide:function(p){this._hideSubmenus();return this._parent(p)},_getMenu:function(s){var q,p,r=false;for(q=0,p=this.menus.length;q<p;q++){r=this.menus[q];if(s&&s.nodeType&&r.elements.container===s){break}else{if(q===s||r.id===s||r.name===s){break}}r=false}return r},_getMenuFromItem:function(p){return this.menus.filter(function(q){return q.getItem(p)})[0]},_getMenuFromParentItem:function(p){return this.menus.filter(function(q){return(q.parentItem&&(q.parentItem.id===p||q.parentItem.name===p||q.parentItem.value===p))})[0]},_hideSubmenus:function(v){var s=this,u,r;function t(w){if(!w){return}w.items.forEach(function(x){x=x.elements&&x.elements.container;if(x&&x.hasClassName(l)){u=s._getMenuFromParentItem(x.id);x.removeClassName("js-selected");u&&u._updateKeyboardIndex("reset");u&&u.hide();t(u)}})}if(this.menus.length<=1){this.menus[0].items.forEach(function(w){w=w.elements&&w.elements.container;w.removeClassName("js-selected")});return}if(v){t(s._getMenuFromItem(v))}else{for(var q=1,p=this.menus.length;q<p;q++){u=this.menus[q];u.hide();r=u.parentItem&&this.getItem(u.parentItem.id);r&&r.elements.container.removeClassName("js-selected")}}},_handleItemSelection:function(p){var q;this.timeoutId&&clearTimeout(this.timeoutId);if(p.hasClassName(l)||p.hasClassName(o)){q=this._getMenuFromParentItem(p.id);if(q&&!q.isVisible){this._hideSubmenus(p.id);q=this._getMenuFromParentItem(p.id);p.addClassName("js-selected");q&&q.show();this.activeMenu=q}}else{if(p.hasClassName(b)){this._hideSubmenus(p.id)}}},_handleItemClick:function(s,r){var t=n.getElement(s),p=g.Utils.Client.Features.touchEvents,q=false;if(!r){r=this.template.getItem(t);if(!r){return}r=this.getItem(r.id?r.id:r)}if(r&&!e(r.elements.container.className)){if(r.selectable){r.toggleSelection()}if(p){this._handleItemSelection(r.elements.container);q=r.elements.container.hasClassName(l)}this.dispatchEvent("onClick",[s,r,q],this);if(g.is(r.handler,"function")){r.handler.call(this,s)}}},_handleEvents:function(){var q=this,p=this.options;this.events.container={click:function(r){q._handleItemClick(r)},mouseleave:this.dispatchEvent.bind(this,"onMouseLeave"),mouseover:function(r){!q.usingKeyboard&&q._handleItemSelection(n.getElement(r))},mouseout:function(){if(!q.usingKeyboard){q.timeoutId=setTimeout(q._hideSubmenus.bind(q),500)}}};if(p.kb){this.events.container.keydown=function(v){var w,u,t;q.usingKeyboard=true;function r(){q.activeMenu.hide();u=q._getMenuFromItem(q.activeMenu.parentItem.id);if(u){q.activeMenu=u;q.activeMenu.focusIt()}}function s(){w=q._getActiveItem();if(w){w=w.elements.container;q._handleItemSelection(w)}q.activeMenu._updateKeyboardIndex()}switch(v.which){case 13:w=q._getActiveItem();if(w){q._handleItemClick(v,q._getActiveItem())}if(q.options.closeOnClick){q.hide();p.target.focus()}g.Event.preventDefault(v);break;case 27:q.hide();p.target.focus();g.Event.preventDefault(v);break;case 37:t=q.activeMenu.elements.container;w=q._getActiveItem();if(t.hasClassName("bottom-left")||t.hasClassName("top-left")){w&&w.elements.container.hasClassName("item-submenu")&&s()}else{r()}g.Event.preventDefault(v);break;case 38:q.activeMenu._updateKeyboardIndex("up");g.Event.preventDefault(v);break;case 39:t=q.activeMenu.elements.container;w=q._getActiveItem();if(t.hasClassName("bottom-left")||t.hasClassName("top-left")){r()}else{w&&w.elements.container.hasClassName("item-submenu")&&s()}g.Event.preventDefault(v);break;case 40:q.activeMenu._updateKeyboardIndex("down");g.Event.preventDefault(v);break;default:g.Event.preventDefault(v);break}}}this.elements.container.addEvents(this.events.container);if(p.contextual){this.events.target={mousedown:function(r){var t=n.getElement(r),s=g.Event.whichButton(r)===2;if(!t.isInjected(this.elements.container)&&t!==this.elements.container){if(s&&this.isVisible){this.updatePosition(r)}}}.bind(this),contextmenu:function(r){this.show(true,r);n.stop(r)}.bind(this)};d(this.events.target,p.target,true)}else{if(p.bound){this.events.target={click:this.toggle.bind(this)};d(this.events.target,p.target,true)}}},_getActiveItem:function(){var p=this.activeMenu.keyboardIndex;if(this.activeMenu&&p>=0){return this.activeMenu.getItem(p)}else{return false}},getSelectedItems:function(){var p=[];if(this.items){p=this.items.filter(function(q){return q.selected})}return p},isSelected:function(q){var p=this.getItem(q);return p&&p.selected},toggleSelection:function(p){p&&p.selectable&&p.toggleSelection()}};return m.extend(a)});define("DS/TopBar/views/ResponsiveDropdownMenu",["UWA/Core","UWA/Element","UWA/Event","DS/TopBar/views/DropdownMenu","DS/TopBar/views/Menu"],function(a,q,v,o,h){function k(x,w,A){A=A||5;var y=x.parentNode,z=0;if(w){while(z<A&&y&&y.nodeType===1&&!q.match.call(y,w)){y=y.parentNode;z++}}if(y&&y.nodeType!==1||z===A){y=null}return y?a.extendElement(y):null}var i=(function(){var w=/^(header|divider|disabled)$/;return function(y){if(!y){return false}var z=y.split(" ");for(var x=0;x<z.length;x++){if(w.test(z[x])){return true}}return false}}());var t=639,c=400,l="responsive",e="dropdown-menu",n="item",d="item-submenu",m="item-template",b="conceal",p="active",s="current",j="item-back",r="responsive-dropdown-menu-root",u="topbar-end-edge",g=h.extend({name:e,templateClassname:m,show:function(){var A=this,y=A._parent,x=arguments,B=this.elements.container,C;function w(){B.removeClassName(b)}function z(){clearTimeout(C);B.addClassName(p);B.addClassName(s);y.apply(A,x);B.removeEvent("transitionEnd")}if(A.isVisible){return}if(t>=q.getSize.call(document.body).width){C=setTimeout(z,c);B.addEvent("transitionEnd",z);window.requestAnimationFrame(w)}else{y.apply(A,x);w()}A.isVisible=true},hide:function(y){y||(y={});var B=this,z=B._parent,x=arguments,C=B.elements.container,D;function w(){C.addClassName(b)}function A(){clearTimeout(D);C.removeClassName(p);C.removeClassName(s);z.apply(B,x);C.removeEvent("transitionEnd")}if(!B.isVisible){return}if(t>=q.getSize.call(document.body).width){D=setTimeout(A,c);C.addEvent("transitionEnd",A);window.requestAnimationFrame(w)}else{z.apply(B,x);w()}B.isVisible=false}});var f=o.extend({UI_BREAK:t,name:e,_mainMenu:null,buildSkeleton:function(){var y=this,z=y.elements,x=y.options,w;if(z.container){return}z.container=a.createElement("div");y._mainMenu=w=y.addMenu(x.items,0,x.position,x.multiSelect,null,y);w.elements.container.inject(z.container,"top");w.elements.container.className=y.getClassNames().replace(x.className,"");z.container.className=x.className+" "+l+"-dropdown-menu ";w.elements.container.setStyle("display","");y._handleEvents()},_isSmallScreen:function(){return q.getSize.call(document.body).width<=this.UI_BREAK},_handleEvents:function(){var y=this,w=y.elements.container,x;y._parent.apply(y,arguments);w.removeEvent("mouseover");w.removeEvent("mouseout");w.addEvent("mouseover",function(z){if(y._isSmallScreen()){return}x=v.getElement(z);if(!x.hasClassName(n)){x=k(x,n,2)||x}!y.usingKeyboard&&y._handleItemSelection(v.getElement(z),z)});w.addEvent("mouseout",function(){if(y._isSmallScreen()){return}!y.usingKeyboard&&(y.timeoutId=setTimeout(y._hideSubmenus.bind(y),500))})},_addMenu:function(G,D,E,B,y,C,z,F){var x,A,w;x=new g({kb:C.options.kb,multiSelect:B,items:G});x.elements.container.addClassName(l);x.elements.container.addClassName(b);x.position=E||"bottom right";if(y){A=x.getItem(0);A.parentItem=y;w=a.createElement("div",{"class":"back-icon"});w.inject(A.elements.container,"top");a.createElement("span",{"class":"fonticon fonticon-left-open"}).inject(w)}this.menus.push(x);C.items=C.items.concat(x.items);if(z&&z.length){z.forEach(function(J,H){var I=x.getItem(F[H]),K;J.inject(C.elements.container,"top");I.elements.container.addClassName(d);K=a.createElement("div",{"class":"next-icon"});K.inject(I.elements.container);a.createElement("span",{"class":"fonticon fonticon-right-open"}).inject(K);J.parentItem=I})}return x},addMenu:function(E,A,B,y,w,z){var D=arguments,x=[],C=[];if(w){E.splice(0,null,{text:w.text,className:j})}E.forEach(function(G,F){if(G.items&&A<this.options.subMenuMaxDepth){x.push(this.addMenu(G.items,A+1,G.position,G.multiSelect,G,z));C.push(F)}}.bind(this));z||(z=this);return this._addMenu(E,A,B,y,w,z,x,C)},_handleItemSelection:function(A){var z=this,w=z._getMenuFromItem(A.id),y,B,x;z.timeoutId&&clearTimeout(z.timeoutId);if(w){if(A.hasClassName(j)){x=z.getItem(A.id);y=z._getMenuFromItem(x.parentItem.id);y.elements.container.getElements(".js-selected").forEach(function(C){C&&C.removeClassName("js-selected")});window.requestAnimationFrame(function(){w.hide();y.elements.container.addClassName(s)})}else{if(A.hasClassName(d)||A.hasClassName(m)){if(z._isSmallScreen()){B=z._getMenuFromParentItem(A.id);B&&B.elements.container.setStyle("display","")}window.requestAnimationFrame(function(){w.elements.container.removeClassName(s)})}}}if(A.hasClassName(d)||A.hasClassName(m)){B=z._getMenuFromParentItem(A.id);if(B&&!B.isVisible){z._hideSubmenus(A.id,B);B=z._getMenuFromParentItem(A.id);A.addClassName("js-selected");B&&B.show();z.activeMenu=B}}else{if(A.hasClassName(n)){z._hideSubmenus(A.id)}}},_hideSubmenus:function(D){var A=this,y=arguments[arguments.length-1],C,z;function B(E){if(!E){return}E.items.forEach(function(F){F=F.elements&&F.elements.container;if(F&&F.hasClassName(d)){C=A._getMenuFromParentItem(F.id);F.removeClassName("js-selected");C&&C._updateKeyboardIndex("reset");C&&(C!==y)&&C.hide();B(C)}})}if(this.menus.length<=1){this.menus[0].items.forEach(function(E){E=E.elements&&E.elements.container;E.removeClassName("js-selected")});return}if(D){B(A._getMenuFromItem(D))}else{for(var x=1,w=this.menus.length;x<w;x++){C=this.menus[x];C.hide();z=C.parentItem&&this.getItem(C.parentItem.id);z&&z.elements.container.removeClassName("js-selected")}}},show:function(){var w=this._mainMenu.elements.container;w.addClassName(r);this._parent.apply(this,arguments);window.requestAnimationFrame(function(){w.addClassName(p);w.addClassName(s)})},hide:function(){var w=this._mainMenu.elements.container;this._parent.apply(this,arguments);window.requestAnimationFrame(function(){w.removeClassName(p);w.removeClassName(s)})},updatePosition:function(){this._parent.apply(this,arguments);if(this.options.position==="end-edge"){this.elements.container.addClassName(u)}},_handleItemClick:function(B,A){var z=this,C=v.getElement(B),y=a.Utils.Client.Features,w=y.touchEvents||y.pointerEvents,x=false;if(!A){A=z.template.getItem(C);if(!A){return}}if((A&&A.hasClassName(j))||(B.target.hasClassName(j))||(k(B.target,"."+j,3))){if(z._isSmallScreen()){z._handleItemSelection(A)}x=true;z.dispatchEvent("onClick",[B,z.getItem(A.id?A.id:A),x],z)}else{A=z.getItem(A.id?A.id:A);if(A&&!i(A.elements.container.className)){if(A.selectable){A.toggleSelection()}if(w||z._isSmallScreen()){z._handleItemSelection(A.elements.container);x=A.elements.container.hasClassName(d)}z.dispatchEvent("onClick",[B,A,x],z);if(a.is(A.handler,"function")){A.handler.call(z,B)}}}}});return f});define("DS/TopBar/views/ScrollableDropdownMenu",["UWA/Core","UWA/Element","UWA/Utils/Client","DS/UIKIT/Scroller","DS/TopBar/views/ResponsiveDropdownMenu"],function(f,d,e,b,c){var a=c.extend({name:"scrollable-dropdown-menu",_handleItemSelection:function(k){var j=this,h=j._parent.apply(j,arguments),i=f.Element.getSize.apply(document.body),g=i.width>=j.UI_BREAK;if(k.hasClassName("js-selected")){window.requestAnimationFrame(function(){var o=j.elements.container,n=o.getSize(),m=i&&i.height,q=k.getPosition(o),l=q&&q.y,p=j.activeMenu.elements.container,r=p&&p.getSize().height;p.setStyles({right:Math.ceil(n.width-q.x)});if(m<=r+l){p.setStyle("top",Math.ceil(m-r)-o.offsetTop)}else{p.setStyle("top",Math.ceil(Math.min(m-r,l)))}if(!e.Engine.firefox){j.elements.container.setStyles({overflow:""})}});if(j.activeMenu._scroller===j._scroller||g){j._adaptMenuSize(j.activeMenu,{doSyncResize:true})}else{if(!g){j._updateSmallMenuHeight()}else{if(e.Engine.firefox){j.activeMenu._scroller.elements.content.setStyles({"padding-bottom":0,"padding-right":0,"overflow-x":"hidden"})}}}}return h},_adaptMenuSize:function(m,k){k||(k={});var l=this,h=m||this.activeMenu,j,g;function i(){var n=f.extendElement(j.wrapper),u=n.getElements(".topbar-menu-dd-item"),s=n.getSize(),t=s.width,o=3,v={height:Math.ceil(s.height+o)},r=h._scroller.elements.xScrollbar,q,p;u.forEach(function(w){var x=d.getSize.call(w).width;t=(t>x)?t:x});if(e.Engine.firefox){v.width=t-6;h._scroller.elements.content.setStyles({bottom:-25,right:-25,"padding-bottom":0,"padding-right":0,"overflow-x":"hidden"})}else{v.width=Math.ceil(t)}g.setStyles(v);if(g.offsetWidth<=g.scrollWidth+2){if(r){r.hide()}else{q=g.offsetWidth;p=g.scrollWidth;Object.defineProperty(h._scroller.elements,"xScrollbar",{configurable:true,get:function(){return r},set:function(w){r=w;if(r&&g.offsetWidth===q&&g.scrollWidth===p){r.hide()}}})}}k.updatePosition&&l.elements.container&&l.updatePosition()}if(h){j=h.elements;g=j.container;if(k.doSyncResize){i()}else{window.requestAnimationFrame(i)}}},_updateSmallMenuHeight:function(){var l=this,g=4,i=l._getMenuFromItem(l.activeMenu.parentItem.id),m={root:l._mainMenu.elements.container.getSize().height,parent:i.elements.container.getSize().height,active:l.activeMenu.elements.wrapper.getSize().height},k=l._mainMenu.items.length>=g,h=m.parent>=m.active,j=k?"root":(h?"parent":"active");l.activeMenu.elements.container.setStyles({height:m[j]});setTimeout(function(){l.activeMenu._scroller.updateVisible()},200)},addMenu:function(i,l){var k=this,j=k._parent.apply(k,arguments),h=j.elements.container,g;g=new b({element:h,scrollbarsMargin:0});l===0&&(k._scroller=g);j._scroller=g;j.elements.container=g.elements.container;return j},addItem:function(){var h=this,g=h._parent.apply(h,arguments);h._adaptMenuSize();return g},removeItem:function(){var h=this,g=h._parent.apply(h,arguments);h._adaptMenuSize();return g},onPreInject:function(){var g=this;g._parent.apply(g,arguments);g._adaptMenuSize(g._getMenu(g.id),{updatePosition:true})}});return a});define("DS/TopBar/views/MenuView",["UWA/Core","UWA/Class/View","DS/TopBar/utils/Utils","DS/TopBar/views/ScrollableDropdownMenu","i18n!DS/TopBar/assets/nls/TopBar"],function(h,g,f,a,d){var e="id";function c(i){return i?i.get(e)||i[e]:null}var b=g.extend({className:"",_target:null,_itemMap:null,_dropdownMenu:null,_isDirty:true,_isActive:false,setup:function(j){var k=this,i;if(!k.model){throw new Error("Incorrect arguments")}k._target=j.target;i=k._mapItems(k.model,k._getItemConnections,k._onExecuteItem);k._itemMap=i.map;k._buildDdMenu({items:i.items.length>0?i.items:[{text:""}]});k._addCollectionListeners=k._addCollectionListeners.bind(k);k._initItem=k._initItem.bind(k);k._onExecuteItem=k._onExecuteItem.bind(k);k._onAdd=k._onAdd.bind(k);k._onRemove=k._onRemove.bind(k);k._onRefresh=k._onRefresh.bind(k);k._onUpdateItem=k._onUpdateItem.bind(k);k._bfsIterator(k.model,k._initItem,k._getItemConnections)},_buildDdMenu:function(o){var m=this,l=m.model.collection||"",t=l.indexOf(m.model),r=l.length&&l.length-t<=3,k=f.pick(m.options,["position","bound","closeOnClick","offset","events","renderTo","altPosition","multiSelect","subMenuMaxDepth","kb"]),j=m.rightMenuModel,p=j&&j.title,s=h.extend(k,{className:"topbar-menu-dd",items:o.items,target:m._target,events:{onShow:m._handleDropdownEvents.bind(m,"onShow"),onHide:m._handleDropdownEvents.bind(m,"onHide"),onClick:m._handleDropdownEvents.bind(m,"onClick"),onClickOutside:m._handleDropdownEvents.bind(m,"onClickOutside"),onMouseLeave:m._handleDropdownEvents.bind(m,"onMouseLeave")}}),n=s.items,q=document.body.getSize&&document.body.getSize(),i=q&&q.width;m._dropdownMenu&&m._dropdownMenu.destroy();if(j&&j.enable&&n&&n.length>0&&i<960){s.items.unshift({className:"topbar-menu-dd-item",disabled:false,handler:function(){j.target.click()},id:"right-menu-context",multiSelect:undefined,name:p,selectable:false,selected:false,items:[],template:'<span class="item-text">'+p+"</span></div>",text:p})}if(m.model.id){if(r){s.position="end-edge"}else{s.position="center"}}m._dropdownMenu=new a(s);m._dropdownMenu.elements.container.addClassName(c(m.model))},_handleDropdownEvents:function(l,i){var k=this,j=k.options.events;if(l==="onShow"){k._isActive=true;if(k._isDirty){k._onRefresh(k.model.get("submenu"),[],{force:true});k.show()}}if(l==="onHide"){k._isActive=false}j&&j[l]&&(j[l].apply(null,i))},_initItem:function(i,j){var k=this;if(!j){return}k._addCollectionListeners(j,{isRoot:(k.model===i)})},_onUpdateItem:function(k){var m=this,n=k.changedAttributes(),j=m._dropdownMenu,l,i;if(!m._isActive){m._isDirty=true;return}if(!n||!j){return}l=j.getItem(k.id);if(l){i={id:k.id,template:m._getItemTemplate(k),disabled:k.get("disabled"),selectable:k.get("checked")||k.get("type")==="checkbox"||k.get("selectable"),selected:k.get("checked")||k.get("selected"),multiSelect:k.get("multiSelect")};j.updateItem(i);(i.selected!==l.selected)&&l.toggleSelection&&(l.toggleSelection())}},_addCollectionListeners:function(k,i){i||(i={});var j=this;if(!k){return}j.listenTo(k,i.isRoot?{onAdd:j._onAdd,onRemove:j._onRemove,onChange:j._onUpdateItem,onChangeActivatedProxyIds:j._onRefresh}:{onAdd:j._onAdd,onRemove:j._onRemove})},_removeCollectionListeners:function(i){i&&this.stopListening(i)},getContent:function(){},toggle:function(){},_treeIterator:function(l,k,r,t){t||(t={});var m=[{model:l,parentModel:null,parentCollection:null}],j=!!t.dfs,p,s,o;function q(u){return{model:u,parentModel:p.model,parentCollection:p.connections}}function i(u){m.push(q(u))}function n(){if(j){p=m.pop();s=p.connections=r(p.model);if(s){for(var u=(s.length-1)||0;u>=0;u--){i(s.at?s.at(u):s[u])}}o=k(p.model,s,p.parentModel,p.parentCollection)}else{p=m.splice(0,1)[0];s=p.connections=r(p.model);s&&s.forEach(i);o=k(p.model,s,p.parentModel,p.parentCollection)}}while(m.length>0&&!(h.is(o)&&!o)){n()}},_bfsIterator:function(i,j,k){this._treeIterator.call(this,i,j,k)},_dfsIterator:function(i,j,k){this._treeIterator.call(this,i,j,k,{dfs:true})},_getItemConnections:function(j,i){i||(i={});return j.get("submenu")},_onAdd:function(k,p){var o=this,j=o._itemMap,i,n,l,m;if(!o._isActive){o._isDirty=true;return}if(j[c(k)]||(p.getActiveItems().indexOf(k)<0)){return}n=o._mapItem(k,o._onExecuteItem.bind(null,k));j[c(k)]=n;l=o._getParentModel(k,o._getItemConnections);i=o._mapItems(k,o._getItemConnections,o._onExecuteItem,{itemMap:j});h.extend(j,i.map);i.items.length>0?n.items=i.items:undefined;l&&(l!==o.model)&&(n.parentItemId=c(l));if(k.get("group")&&k.get("submenu")){m=[];k.get("submenu").forEach(function(r){var q=j[c(r)];q&&(m.push(q))});o._dropdownMenu.addItem(m)}else{o._dropdownMenu.addItem(n)}o._bfsIterator(k,o._initItem,o._getItemConnections);(o._isActive&&!o.isVisible())&&o.show()},_onRemove:function(i){var j=this;j._bfsIterator(i,function(l,k){j._removeCollectionListeners(k)},j._getItemConnections);j._dropdownMenu.removeItem(c(i));delete j._itemMap[c(i)]},_getParentModel:function(i,l){var j,k=this;k._bfsIterator(k.model,function(m,o,n){j=i===m?n:j;return !h.is(j)},l);return j},_onExecuteItem:function(i){i&&i.execute&&i.execute()},_onExecuteGroup:function(k,m,j){var l=this,i=l._dropdownMenu,n;if(!m.get("multiSelect")){n=l._getItemConnections(m)||[];n.forEach(function(p){var o=i.getItem(p.id);if((p!==k)&&o&&o.selected&&o.selectable){o.toggleSelection()}})}j(k)},_mapItems:function(n,o,q,s){s||(s={});var m=this,p=c(n),r=m.options,k=s.itemMap||Object.create(null);function l(t,u){return u.last?u.last()===t:u[u.length-1]===t}function j(t,u){return u.at?u.at(t):(u[t]||null)}function i(x,z,u,y){var A=c(x),t=k[c(u)],w=f.pick(r,["multiSelect"]),C;if(x.get("separator")){C=m._mapItem(null,null,{type:"separator"})}else{if(x.get("group")){if(x.get("label")||(y&&(j(0,y)!==x))){C=m._mapItem(x,null,{type:"group"})}}else{C=m._mapItem(x,q.bind(null,x),w)}}if(u){if(u.get("group")){var v=m._getParentModel(u,m._getItemConnections),B=k[c(v)];C.handler=m._onExecuteGroup.bind(m,x,u,q);B.items||(B.items=[]);B.items.push(C);if(l(x,y)&&u.collection&&!l(u,u.collection)){B.items.push(m._mapItem(null,null,{type:"group"}))}}else{t.items||(t.items=[]);C&&t.items.push(C)}}C&&(k[A]=C)}m._dfsIterator(n,i,o);return{items:k[p].items||[],map:k}},_mapItem:function(j,l,i){i||(i={});var m,k;switch(i.type){case"separator":case"group":if(j&&j.collection&&j.get("label")){m={className:"header",text:j.get("label")}}else{m={className:"divider"}}break;default:k=c(j);m={name:k,id:k,disabled:j.get("disabled"),text:j.get("label"),template:this._getItemTemplate(j),selectable:j.get("checked")||j.get("type")==="checkbox"||j.get("selectable"),selected:j.get("checked")||j.get("selected"),className:"topbar-menu-dd-item",multiSelect:j.get("multiSelect"),handler:j.get("onExecute")&&l?l:undefined}}return m},_getItemTemplate:function(m){var o="",p=m.get("id"),l=p&&d[p]||m.get("label")||"",i=m.get("fonticon")||"",n=m.get("icon")||"",j=m._getCountsSum?m._getCountsSum():0,k=m.get("disabled")?"disabled":"enabled";if(i){o+='<span class="fonticon fonticon-'+i.escapeHTML()+" item-icon "+k+'"></span>'}if(n){o+='<span class="item-icon item-image '+k+'" style="background-image: url(\''+n+"')\"></span>"}if(j){o+='<span class="item-badge">'+(j>99?"+99":j)+"</span>"}o+='<span class="item-text">'+l.escapeHTML()+"</span>";return o},_onRefresh:function(n,o,k){k||(k={});var m=this,j;function i(p,q){q&&m._removeCollectionListeners(q)}function l(p){m._bfsIterator(p,i,m._getItemConnections)}if(!m._isActive&&!k.force){m._isDirty=true;return}n.forEach(l);j=m._mapItems(m.model,function(p){var r=p.get("submenu"),q=null;if(r){q=r.getActiveItems?r.getActiveItems():r}return q},m._onExecuteItem);m._itemMap=j.map;m._buildDdMenu({items:j.items});m._bfsIterator(m.model,m._initItem,m._getItemConnections);m._isDirty=false;(m._isActive&&!m.isVisible())&&m.show()},show:function(i){var k=this,j=i&&i.refresh;k._isActive=true;k._isDirty=k._isDirty||!!j;if(k._isDirty){k._onRefresh(k.model.get("submenu"),[])}k._dropdownMenu&&k._dropdownMenu.show()},hide:function(){this._isActive=false;this._dropdownMenu&&this._dropdownMenu.hide()},isVisible:function(){return this._dropdownMenu&&this._dropdownMenu.isVisible},destroy:function(){var i=this;i._parent();i._dropdownMenu.destroy();i.container=null;i._target=null}});return b});define("DS/TopBar/views/SearchView",["text!DS/TopBar/assets/templates/SearchView.html","DS/TopBar/assets/nls/TopBar_temp","DS/Handlebars/Handlebars4","UWA/Core","UWA/Element","UWA/Event","UWA/Class/View","DS/TopBar/utils/Debuggable","DS/TopBar/utils/Utils","DS/TopBar/views/MenuView","DS/UIKIT/Tooltip","i18n!DS/TopBar/assets/nls/TopBar"],function(f,m,c,k,b,n,a,d,j,h,l,e){var i;function g(t,q,p){var o,s,r;if(!k.is(t,"object")){return t}r=Object.keys(t);for(o=0,s=r.length;o<s;o++){q.call(p,t[r[o]],r[o],t)}return t}i=a.extend(d,{uwaClassName:"SearchView",id:"global_ctn_search",className:"topbar-search",children:null,domEvents:{"click .topbar-search-cmd":"_onSearch","click .topbar-search-clear":"_onClearSearch","keyup .topbar-search-input":"_onSearchInputKeyUp","keydown .topbar-search-input":"_onSearchInputKeyDown"},template:c.compile(f),setup:function(o){var p=this;p.listenTo(this.model,{"onChange:searchOptionBox":p._updateSearchOptionName,"onChange:searchPlaceHolder":p._updateSearchPlaceHolder});p.debugMode=j.result(o,"debugMode");p.children={};p._filterInProgress=false},destroy:function(){var o=this;o.stopListening(o.children.searchOptions);g(o.children,function(r,p,q){r.destroy();q[p]=null});o.stopListening(o.model);o._parent();o.container=null},_updateSearchOptionName:function(o,p){this.$searchOptionName.setText(p||"")},_updateSearchPlaceHolder:function(o,p){this.$searchInput.placeholder=p||""},_onSearch:function(){var o="search",q=this.$searchInput.value,p=q==="";this._filterInProgress=!p;if(this.model.hasEvent(o)){this.model.dispatchEvent(o,{value:q})}},_onClearSearch:function(){var o=this;o.$searchInput.value="";o.$clearSearchButton.hide();if(o.model.hasEvent("clearSearch")){o.model.dispatchEvent("clearSearch")}},_onSearchInputKeyUp:function(o){var p=this;if(p.$searchInput.value){p.$clearSearchButton.setStyle("display","inline-block")}else{if(!p._filterInProgress){p.$clearSearchButton.hide()}}n.stopPropagation(o)},_onSearchInputKeyDown:function(o){if(n.whichKey(o)==="return"){this._onSearch()}n.stopPropagation(o)},render:function(){var p=this,o;p.model.set("tooltips",{search:e.search,clear:e.clear});o=p.template({model:p.model.toJSON(),nls:e});p.container.setContent(o);g({searchButton:".topbar-search-cmd",searchInput:"input.topbar-search-input",clearSearchButton:".topbar-search-clear"},function(q,r){p["$"+r]=p.getElement(q)},p);new l({position:"bottom",target:p.$searchButton,body:m.search});p.children.searchOptions=new h({target:p.$searchInput,renderTo:p.container,model:p.options.searchMenu,bound:true,altPosition:{x:-1,y:42},multiSelect:true,closeOnClick:false});return p}});return i});define("DS/TopBar/views/MenuBarItemView",["UWA/Core","UWA/Class/View","DS/TopBar/views/MenuView","DS/UIKIT/Tooltip","i18n!DS/TopBar/assets/nls/TopBar"],function(f,e,a,c,d){var b;b=e.extend({className:function(){var h=this,i=h.model.id,g=h.model.get("disabled")?"disabled":"enabled";return i+" topbar-menu-item topbar-cmd "+g+" fonticon fonticon-"+h.model.get("fonticon")},attributes:{html:[{tag:"span","class":"topbar-menu-item-badge"},{tag:"span","class":"topbar-floating-arrow"}]},domEvents:{click:"_onIconClick"},_getBadgeClassName:function(g){var h="fonticon fonticon-";switch(g){case"active":h+="check "+g;break;case"busy":h+="minus "+g;break;case"away":h+="cancel "+g;break;case"offline":h+="record "+g;break}return h},setup:function(){var g=this;g.className=g.className+" .btn_"+g.model.id;g.listenTo(g.model,{onBadgeSumChange:g._updateCountBadge,"onChange:activatedProxyIds":g._updateEnabled,"onChange:countBadge":g._updateCountBadge,"onChange:status":g._updateStatus,onSubMenuReady:g._onSubMenuReady});g.$countBadge=g.getElement(".topbar-menu-item-badge");g.$floatingArrow=g.getElement(".topbar-floating-arrow");g.deactivate=g.deactivate.bind(g);g.activate=g.activate.bind(g)},destroy:function(){this.subView&&this.subView.destroy();this.subView=null;this.stopListening();this._parent();this.container=null},activate:function(){var g=this;g.dispatchEvent("onActivate",[g,g.model]);g.container.addClassName("active");g.model.fireOnSubMenuReady();g.model.fireOnSubMenuDisplayed()},_onSubMenuReady:function(){var h=this,g=h.model.get("submenu");if(g&&g.length>0){h.$floatingArrow.show()}else{h.$floatingArrow.hide()}h.subView.show()},deactivate:function(){var g=this;g.container.removeClassName("active");g.dispatchEvent("onDeactivate",[g,g.model]);g.subView.hide();g.$floatingArrow.hide()},_onIconClick:function(){var i=this,g=i.model.get("submenu"),h;if(i.model.get("onExecute")){h=i.model.get("onExecute").call()}h=f.is(h)?h:(g)?!!g.getActiveItems().length:false;if(h){if(i.container.hasClassName("active")){i.deactivate()}else{i.activate()}}},_updateEnabled:function(){if(this.model.get("disabled")){this.container.removeClassName("enabled");this.container.addClassName("disabled")}else{this.container.addClassName("enabled");this.container.removeClassName("disabled")}this._updateCountBadge()},_updateCountBadge:function(){var g=this.model.get("submenu")._getCountsSum()+(this.model.get("countBadge")||0);if(g){this.$countBadge.setText(99<g?"+99":g)}if(!this.model.get("status")){this.$countBadge.setStyle("display",g?"inline":"none")}},_updateStatus:function(i,h){var j=this,k=j.$countBadge;function g(){k.removeClassName("fonticon");k.removeClassName("fonticon-check");k.removeClassName("active");k.removeClassName("fonticon-minus");k.removeClassName("busy");k.removeClassName("fonticon-cancel");k.removeClassName("away");k.removeClassName("fonticon-record");k.removeClassName("offline")}if(!k&&j.model.id!=="profile"){return}window.requestAnimationFrame(function(){if(!h){k.hide();g()}else{k.hide();k.setText("");g();k.addClassName(j._getBadgeClassName(h));k.show()}})},render:function(){var h=this,g=h.model.id==="profile"?h.model.get("userName"):d[h.model.id];h.subView=new a({kb:false,model:h.model,target:h.container,bound:false,closeOnClick:true,offset:{x:0,y:-1},subMenuMaxDepth:40,events:{onClickOutside:h.deactivate,onHide:h.deactivate}});if(g){new c({position:"bottom",target:h.container,body:g,closeOnClick:true})}h.subView.inject(h.container);return h.container}});return b});
/*!
  Script: MenuBarView.js

*/
define("DS/TopBar/views/MenuBarView",["UWA/Core","UWA/Class","UWA/Class/Timed","UWA/Element","UWA/Class/View","DS/TopBar/utils/Utils","DS/TopBar/views/MenuBarItemView"],function(h,c,e,b,g,f,a){var d=g.extend({className:"topbar-menu",subViews:null,_initialsEl:null,setup:function(){var i=this;i.subViews=[];i._onItemViewActivate=i._onItemViewActivate.bind(i)},render:function(){var o=this,p=o.subViews,n=o.collection,q=o.options.userName||"",l,m,r,k,j;if(!q){o.container.hide();return o.container}k=new (c.extend(e,{}))();j=h.createElement("div",{"class":"topbar-user"});o.userName=h.createElement("div",{"class":"topbar-username",text:q.trim()});o.userName.inject(j);o.container.addContent(j);for(l=0;l<n.length;l++){m=n.at(l);r=new a({model:m});r.render().inject(o.container);o._addSubViewListener(r);p.push(r)}o._handleRepositioning();return o.container},_setInitials:function(){var j=this,i=j.container.getElement(".profile"),k=j._initialsEl;if(!i){return}if(k){k.destroy()}j._initialsEl=f.renderInitials(j.options.userName,{className:"topbar-initials"}).inject(i)},updateUserName:function(i){var j=this;j.userName.setText(i)},updateProfilePicture:function(k){var i=this.container.getElement(".profile"),l,j;if(i){j=i.getElement(".profile-picture");if(j){j.setStyle("background-image",'url("'+k+'")')}else{i.removeClassName("fonticon-user-alt");i.addContent({tag:"div","class":"profile-picture",styles:{"background-image":'url("'+k+'")'}});j=i.getElement(".profile-picture")}l=this.subViews.filter(function(m){return m.model.id==="profile"})[0];if(l){l.subView._target=j;l.subView.options.offset={x:-10,y:9};l.subView._isDirty=true}}},_addSubViewListener:function(i){this.listenTo(i,"onActivate",this._onItemViewActivate)},_onItemViewActivate:function(i){if(!i){this.subViews.forEach(function(j){j.deactivate()})}else{this.subViews.forEach(function(j){if(i!==j){if(j.model.get("onExecute")){i.model.get("onExecute")&&j.deactivate()}else{j.deactivate()}}})}},_handleRepositioning:function(){var j=this,k=957;function i(m){var l;j.currentScreenWidth=m.target.innerWidth;l=(j.currentScreenWidth<=k&&j.previousScreenWidth>k);j.subViews.forEach(function(o){var n=o.subView;if(n&&n.isVisible()){if(l){n.hide()}else{n._dropdownMenu.updatePosition()}}j.previousScreenWidth=j.currentScreenWidth})}j.previousScreenWidth=document.body.getSize().width;b.addEvent.call(window,"resize",f.throttle(i,300))},toggleActivate:function(){},destroy:function(){var i=this;i.stopListening();i.subViews.forEach(function(j){j.destroy()});i._parent();i.container=null;i.subViews.length=0},});return d});define("DS/TopBar/views/TopBarView",["text!DS/TopBar/assets/templates/TopBarView.html","DS/Handlebars/Handlebars4","UWA/Core","UWA/Utils","UWA/Element","UWA/Class/View","DS/TopBar/utils/Debuggable","DS/TopBar/utils/Utils","DS/TopBar/views/MenuBarView","DS/TopBar/views/MenuView","DS/TopBar/model/MainMenuBar","DS/TopBarProxy/Menu","DS/UIKIT/Tooltip","i18n!DS/TopBar/assets/nls/TopBar"],function(l,e,a,d,m,o,c,b,i,t,k,g,p,j){var r=959,n=1487,s=44,f="@media only screen and (min-width : {{smallBreakpoint}}px) and (max-width : {{mediumBreakpoint}}px) {#topbar.topbar .topbar-center { right: {{right}}px; }}";function q(A,x,w){var v,z,y;if(!a.is(A,"object")){return A}y=Object.keys(A);for(v=0,z=y.length;v<z;v++){x.call(w,A[y[v]],y[v],A)}return A}function u(w,v){return w.replace(/\{([\w\-]+)\}/g,function(x,y){return v[y]!==undefined?v[y]:""})}var h=o.extend(c,{uwaClassName:"TopBarView",className:"topbar",id:"topbar",domEvents:{"click .topbar-logo":"_on3DSLogoActivate","click .btn_tag_nav":"_onTaggerActivate","click .topbar-cmd.menu":"_onMenuActivate","click .topbar-cmd.search":"_onSearchActivate","click .topbar-cmd.extrabtn":"_onExtrabtnClick","click .topbar-cmd.addin-close":"_onCloseAddinModeClick"},template:e.compile(l),searchAnimationTemplate:e.compile(f),setup:function(w){var x=this,v=x.model,y=v.get("userName");v.set("logoTitle",j.myAppsRoles);x.listenTo(v,{"onChange:userName":x._updateUserName,"onChange:brand":x._updateTitle,"onChange:application":x._updateTitle,"onChange:isShared":x._toggleSharedIcon,"onChange:picture":x._updateProfilePicture});x.debugMode=b.result(w,"debugMode");x.menuCollection=new g(k.filter(function(z){return(z.id!=="search")}));x.children={rightMenuBar:new i({userName:y,collection:x.menuCollection}),menuView:null};x._handleRepositioning()},destroy:function(){q(this.children,function(x,v,w){x.destroy();w[v]=null});this.stopListening(this.model);this.stopListening(k);this._parent();this.container=null},_updateUserName:function(w,v){this.children.rightMenuBar.updateUserName(v)},_updateProfilePicture:function(w,v){this.children.rightMenuBar.updateProfilePicture(v)},_updateTitle:function(){var x=this,w=x.model.get("application"),v=x.$appName;x.$brandName.setText(x.model.get("brand"));v.setText(w);v.setAttribute("title",w);if(x.addinCloseTooltip){x.addinCloseTooltip.setBody(u(j.closeApp,{appName:w}))}},_toggleSharedIcon:function(v,w){this.$appIcon.setStyle("display",w?"inline-block":"none")},_on3DSLogoActivate:function(){this.model.dispatchEvent("logo")},_onTaggerActivate:function(){this.model.dispatchEvent("tagger")},_onExtrabtnClick:function(){this.model.dispatchEvent("click-extrabtn")},_onCloseAddinModeClick:function(){this.model.dispatchEvent("click-close-addinmode")},_buildMenuView:function(w,v){var x=new t({model:v,target:w,offset:{x:0,y:-3},kb:false,bound:false,events:{onHide:this._onMenuActivate.bind(this,{force:"hide"})}});x.rightMenuModel=this.rightMenuModel;x.show();return x},_onSearchActivate:function(){var y=this,x="active",w=y.$searchCmd,v=y.$menuCmdCenter,z=w.hasClassName(x),A=z?"disable":"enable";y.container.toggleClassName("search-active");if(z){w.removeClassName(x)}else{w.addClassName(x);v&&v.removeClassName(x)}y.model.dispatchEvent("mobileSearchAction",{action:A})},_onMenuActivate:function(x){x||(x={});var A=this,z="active",w=A.$searchCmd,v=A.$menuCmdCenter,y=A.children;A.container.removeClassName("search-active");w.removeClassName(z);if(A.container.getSize().width<=r){y.menuView||(y.menuView=A._buildMenuView(v,A.model));if(v.hasClassName(z)||(x.force==="hide")){v.removeClassName(z);y.menuView.hide()}else{v.addClassName(z);y.menuView.show({refresh:true})}}A.model.dispatchEvent("mobileSearchAction",{action:"disable"})},_handleRepositioning:function(){var w=this,x=957;function v(B){var z,A=w.children,y=A&&A.menuView;w.currentScreenWidth=B.target.innerWidth;z=(w.currentScreenWidth>=x&&w.previousScreenWidth<x);if(y&&y.isVisible()){if(z){y.hide()}else{y._dropdownMenu.updatePosition()}w.previousScreenWidth=w.currentScreenWidth}}w.previousScreenWidth=a.extendElement(document.body).getSize().width;m.addEvent.call(window,"resize",b.throttle(v,300))},_onIconClick:function(v){this.subViews.forEach(function(w){(v!==w)&&(w.deactivate())})},render:function(){var w,x=this,v=x.model.toJSON(),y=v.picture||undefined;a.extendElement(document);a.extendElement(document.body);w=x.template(v);x.container.setContent(w);if(x.model.get("displayAccess")){x.container.addClassName("display-access")}q({brandName:".topbar-app-brand",appName:".topbar-app-name",appIcon:".topbar-app-icon",appMenuIcon:".topbar-app-menu",appTitle:".topbar-app-title",menuCmdCenter:".topbar-center .topbar-cmd.menu",menuCmdRight:".topbar-right .topbar-cmd.menu",searchCmd:".topbar-cmd.search",left:".topbar-left",center:".topbar-center",right:".topbar-right",rightLinks:".topbar-access",extrabtnWrapper:".topbar-extrabtn",extrabtn:".topbar-cmd.extrabtn",addinbtn:".topbar-addinbtn",addinClose:".topbar-cmd.addin-close",tagNav:".topbar-cmd.tagnav",},function(z,B){var A=this;A["$"+B]=A.getElement(z)},x);x.children.rightMenuBar.render().inject(x.$right);if(y){x.children.rightMenuBar.updateProfilePicture(y)}if(x.model.get("displayAccess")){x.$rightLinks.addContent([{tag:"a","class":"topbar-access-link",text:j.login,events:{click:x.onAccessLinkClick.bind(x,"login")}},{tag:"a","class":"topbar-access-link",text:j.signup,events:{click:x.onAccessLinkClick.bind(x,"signup")}}])}if(x.children.search){throw new Error("TopBarView unexpectedly rendered twice!")}require([x.options.activateNewSearch?"DS/SNSearchUX/SearchView":"DS/TopBar/views/SearchView"],function(z){x.children.search=new z({model:x.model,searchMenu:k.get({id:"search"})});x.children.search.render().inject(x.$center,"top")});if(x.options.showTaggerBtn===false){x.$tagNav.setStyle("display","none")}else{new p({position:"bottom",target:x.$tagNav,body:j.tagNav})}new p({position:"bottom",target:x.$searchCmd,body:j.search});x.$menuCmdCenter&&new p({position:"bottom",target:x.$menuCmdCenter,body:j.mainMenu});x.$menuCmdRight&&new p({position:"bottom",target:x.$menuCmdRight,body:j.mainMenu});x.extrabtnTooltip=new p({position:"bottom",target:x.$extrabtn,body:""});if(x.$addinbtn&&!x.options.lockedAppMode){x.addinCloseTooltip=new p({position:"bottom",target:x.$addinClose,body:j.close})}return x},onAccessLinkClick:function(v){window.location=this.model.get(v+"Url")},getTitleMenuElement:function(){return this.$appTitle},getTitleMenuIconElement:function(){return this.$appMenuIcon},getTitleName:function(){return this.model.get("application")},toggleExtraButton:function(){var v=this;v.$extrabtnWrapper.toggleClassName("topbar-extrabtn-hidden");["center","right"].forEach(function(w){["topbar-with-extrabtn","topbar-without-extrabtn"].forEach(function(x){v["$"+w].toggleClassName(x)})})},setExtraButtonOptions:function(v){if(v.tooltip){this.extrabtnTooltip.setBody(v.tooltip)}if(v.fonticon){this.$extrabtn.setAttribute("class","topbar-cmd extrabtn fonticon "+v.fonticon)}},toggleAddinModeButton:function(){var v=this;v.$addinbtn.toggleClassName("topbar-addinbtn-hidden");["center","right"].forEach(function(w){v["$"+w].toggleClassName("with-addinbtn")})},focusOnSearch:function(){var x=this,w="active",z=x.getElement(".topbar-search input"),v=x.$searchCmd,y=v.hasClassName(w);if(v&&!v.isHidden()&&!y){x._onSearchActivate()}if(z&&!z.isHidden()){z.click()}}});return h});define("DS/TopBar/TopBar",["UWA/Core","DS/TopBar/model/MainMenuBar","UWA/Class/Model","UWA/Class/Collection","DS/TopBar/views/TopBarView","DS/TopBar/assets/nls/TopBar_temp"],function(f,i,c,g,b,e){function d(j){var k={};if(!j){return k}if(Array.isArray(j.topMenus)){var l=Object.create(null);j.topMenus.forEach(function(m){(f.is(m,"string"))&&(l[m]=true)});k.topMenus=l}return f.extend(j,k)}var a=c.extend({set:function(k,n,j){var m=this;m._parent.apply(m,arguments);if(f.is(n)&&k==="picture"){var l=m.get("submenu").get({id:"profile"});l&&l.set("icon",n)}}});var h;h={init:function(l){var p=this,j=d(l),n,o,m,k;i.init(j);if(j.events){n=j.events;delete (j.events)}m=new g(i.filter(function(q){return["profile","home","share","add","help","content","notification","social"].indexOf(q.id)>=0}));p._model=k=new a(f.extend(j,{submenu:m}));k.set("displayAccess",!j.userName);k.set("addinMode",j.addinMode);k.set("lockedAppMode",j.lockedAppMode);for(o in n){p._model.addEvent(o,n[o])}p.rightMenuModel={enable:false,title:""};p.view=new b({model:p._model,activateNewSearch:j.activateNewSearch,showTaggerBtn:j.useTagger,addinMode:j.addinMode,lockedAppMode:j.lockedAppMode});p.getTitleMenuElement=p.view.getTitleMenuElement.bind(p.view);p.getTitleMenuIconElement=p.view.getTitleMenuIconElement.bind(p.view);p.getTitleName=p.view.getTitleName.bind(p.view);p.toggleExtraButton=p.view.toggleExtraButton.bind(p.view);p.setExtraButtonOptions=p.view.setExtraButtonOptions.bind(p.view);p.toggleAddinModeButton=p.view.toggleAddinModeButton.bind(p.view);e.init(j);p.view.render().inject(document.body,"top")},set:function(){this._model.set.apply(this._model,arguments)},addEvent:function(k,n,o){var m=this,j=m._model,l;if(!j){return}if(f.is(k,"object")&&k.events){for(l in k.events){j.addEvent(l,k.events[l],o)}}else{if(f.is(k,"string")){j.addEvent(k,n,o)}}},removeEvent:function(k,l,m){var j=this._model;j&&j.removeEvent(k,l,m)},setRightMenuContext:function(l){var m=this,j=m.view,k=j&&j.getElement(".topbar-user"),o=l&&l.title||"",p=j.getElement(".topbar-user-right-menu-wrapper"),n;if(!k){return}if(!m.rightMenuModel.enable){k.addClassName("topbar-user-right-menu");p=f.createElement("div",{"class":"font-3dsregular topbar-user-right-menu-wrapper"});n=f.createElement("span",{"class":"topbar-user-right-menu-title",html:o});n.inject(p);p.inject(k);m.rightMenuModel.enable=true;m.rightMenuModel.title=o;m.view.rightMenuModel=m.rightMenuModel}else{n=p.getElement(".topbar-user-right-menu-title")}m.rightMenuModel.target=p;return{setTitle:function(u){var r=m.view,t=r.children,q=t&&t.menuView,s=q&&q._dropdownMenu;if(!u){return}m.rightMenuModel.title=u;u&&n&&n.setText(u);s&&s.updateItem({id:"right-menu-context",name:u,text:u,template:'<span class="item-text">'+u+"</span>"})},getTarget:function(){return p}}},MainMenuBar:i};return h});define("TopBar",["TopBar/TopBar"],function(a){return a});define("TopBar/TopBar",["DS/TopBar/TopBar"],function(a){return a});