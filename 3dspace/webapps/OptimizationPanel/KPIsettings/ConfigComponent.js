define("DS/OptimizationPanel/KPIsettings/ConfigComponent",["DS/UIKIT/Iconbar","DS/CoreEvents/ModelEvents","css!DS/OptimizationPanel/KPIsettings/PanelKPI.css"],function(a,c){var b=function(d){this._parentModelEvents=d&&d.modelEvents?d.modelEvents:"other";this._parentIMe=d&&d.myME?d.myME:"nothing";this._name=d&&d.modelC0.defConfig[this._id]?d.modelC0.defConfig[this._id].name:d.name;this._idContent=d&&d.modelC0.defConfig[this._id]?d.modelC0.defConfig[this._id].id:"config"+d.name.substring(14,16);this._current=d&&(d.modelC0.current===this._id)?true:d.current;this._init(d)};b.prototype._init=function(d){this._initDom(d)};b.prototype._initDom=function(g){this._content=document.createElement("div");this._content.classList.add("config-content");this._content.id=this._idContent;this._confContent=document.createElement("div");this._confContent.classList.add("content-conf-active");this._nameConf=document.createElement("span");this._nameConf.classList.add("editable-config-content");this._nameConf.setAttribute("contenteditable",true);this._nameConf.setAttribute("min-length","1");this._nameConf.setAttribute("tabindex","0");this._nameConf.innerHTML=this._name;this._iconCheck=document.createElement("span");this._iconCheck.classList.add("wux-ui-3ds");this._iconCheck.classList.add("wux-ui-3ds-1x");this._iconCheck.classList.add("wux-ui-3ds-check");this._colorGraph=document.createElement("span");this._colorGraph.classList.add("circle-graph");this._confContent.appendChild(this._colorGraph);this._confContent.appendChild(this._iconCheck);this._confContent.appendChild(this._nameConf);if(this._current===true){var d=document.querySelectorAll(".wux-ui-3ds-check");for(var e=0;e<d.length;e++){d[e].removeAttribute("checked")}this._iconCheck.setAttribute("checked",true);this._parentModelEvents.publish({event:"config-current-change",data:this._content.id})}var f=this;this._nameConf.addEventListener("keypress",function(h){if(h.which===13){h.preventDefault()}});this._nameConf.addEventListener("click",function(){});this._nameConf.addEventListener("blur",function(){if(this.innerHTML.replace(/^[\s(&nbsp;)]+/g,"").replace(/[\s(&nbsp;)]+$/g,"")===""){alert(" you can't have an empty name");this.innerHTML="Default"}f._parentModelEvents.publish({event:"config-name-change",data:{id:f._content.id,name:this.innerHTML}});g.modelC0.defConfig[f._content.id].name=this.innerHTML});this._iconCheck.addEventListener("click",function(){var h=document.querySelectorAll(".wux-ui-3ds-check");for(var j=0;j<h.length;j++){h[j].removeAttribute("checked")}this.setAttribute("checked",true);g.modelC0.current=f._content.id;f._parentModelEvents.publish({event:"config-current-change",data:this.parentElement.parentElement.id})});this._content.appendChild(this._confContent);var f=this;this._iconbar=new a({renderTo:this._content,items:[{fonticon:"plus",text:"Next config",handler:function(){console.log("next conf of "+f._content.id);f._parentModelEvents.publish({event:"config-component-next",data:f._content.id})}},{fonticon:"refresh",text:"Re calculate config",handler:function(){console.log("Refresh "+f._content.id);f._parentModelEvents.publish({event:"config-component-refresh",data:f._content.id})}},{fonticon:"trash",text:"Delete config",handler:function(){console.log("suppres");f._parentIMe.publish({event:"delete-config",data:f._content.id})}}]})};b.prototype.inject=function(d){d.appendChild(this._content)};b.prototype.destroy=function(){this._content=null};return b});