define("DS/QualityManagerUI/GIVisualQualityCustomPresetDlg",["UWA/Core","DS/QualityManager/QMGIController","DS/WebappsUtils/WebappsUtils","DS/Controls/Button","DS/Windows/Dialog","DS/Controls/ButtonGroup","DS/Controls/Expander","DS/Controls/SpinBox","DS/Controls/Toggle","DS/Controls/ComboBox","DS/Controls/Slider","DS/QualityManagerUI/SliderSpinBox","DS/Controls/TooltipModel","DS/RuntimeView/NLSManager"],function(q,c,f,o,i,a,m,g,d,b,e,p,l,n){var h=false;var s=false;var k=false;var r=false;var j=function(t){this.options=t;this.init()};j.prototype.init=function(){var u=this.options.frameWindow;this._webGLV6Viewer=u.getViewer();this._immersiveFrame=u.getImmersiveFrame();if(!c.isInitialized){c.init()}n.DEFAULT_LANGUAGE=widget.lang?widget.lang:widget.getValue("lang");var t=this;n.loadResource({resourceFile:"QualityManagerUI/QualityManager"});n.onResourceLoaded({resourceFile:"QualityManagerUI/QualityManager"},function(){t.mbdResources=this});this.currentPresetMode=c.getCurrentPreset();this.currentPreset="Custom";this.properties=this.buildProperties();this.buildDialog();this.initializedUIfromDB()};j.prototype.GetResString=function(u){var t="";if(this.mbdResources){t=this.mbdResources.getKey({key:u})}return t};j.prototype.buildProperties=function(){var v={id:"Global"};var B={id:"Accumulation"};var C={id:"GlobalIllumination"};var w={id:"FinalGathering"};var D={id:"Caustics"};var y={id:"RayOffset"};var u={id:"Shadows"};var z={id:"Reflections"};var E={id:"Bloom"};var t={id:"DepthOfField"};var x={id:"Downsampling"};var A={Global:v,Accumulation:B,GlobalIllumination:C,FinalGathering:w,Caustics:D,RayOffset:y,Shadows:u,Reflections:z,Bloom:E,DepthOfField:t,Downsampling:x};return A};j.prototype.buildDialog=function(){var v=this;var t=UWA.createElement("div",{"class":"wux-control-inline-container",style:{"vertical-align":"top"}});v.buildViewContent().inject(t);var x=new o({});var w=new o({});var u=new o({});v.QualityManagerDialog=new i({title:"Raytracer Visual Quality",content:t,immersiveFrame:v._immersiveFrame,ResizableFlag:true,width:700,height:400,buttons:{Ok:x,Cancel:w},allowedDockAreas:WUXDockAreaEnum.TopDockArea|WUXDockAreaEnum.BottomDockArea|WUXDockAreaEnum.LeftDockArea|WUXDockAreaEnum.RightDockArea,resizableFlag:true})};j.prototype.buildViewContent=function(){var u=this;var t=q.createElement("div",{"class":"wux-container",style:{"vertical-align":"top"}});u.buildRenderModeView().inject(t);u.buildGlobalPresetButtonView().inject(t);u.buildAccumulationView().inject(t);u.buildGlobalIlluminationView().inject(t);u.buildFinalGatheringView().inject(t);u.buildCausticsView().inject(t);u.buildRayOffsetView().inject(t);u.buildShadowsView().inject(t);u.buildReflectionsView().inject(t);u.buildBloomView().inject(t);u.buildDepthOfFieldView().inject(t);u.buildDownsamplingView().inject(t);return t};j.prototype.buildRenderModeView=function(){var u=this;var v=new UWA.Element("div",{"class":"wux-control-inline-container",style:{"vertical-align":"top"}});var t=new UWA.Element("div",{"class":"wux-control-inline-container",text:"Render Mode:"}).inject(v);t.setStyles({width:"80px"});u.staticButton=new o({emphasize:"primary",label:"Static",value:"Static"}).inject(v);u.batchButton=new o({emphasize:"primary",label:"Batch",value:"Batch"}).inject(v);u.addEventListenerRenderMode(u.staticButton,this.properties);u.addEventListenerRenderMode(u.batchButton,this.properties);return v};j.prototype.addEventListenerRenderMode=function(t,v){var u=this;t.addEventListener("buttonclick",function(){u.currentPresetMode=t.label;c.setCurrentPreset(u.currentPresetMode);u.updateRenderButtonUI(u.currentPresetMode);u.updateGlobalPreset("Standard")})};j.prototype.buildGlobalPresetButtonView=function(){var v=this;var t=new UWA.Element("div",{"class":"wux-container"});t.setStyles({position:"relative",width:"450px",left:"250px"});var u=v.getPresetButtons().inject(t);new UWA.Element("br").inject(t);v.properties.Global.presetButtonGroup=u;u.addEventListener("buttonclick",function(x){var w=u.getButtonFromValue(x.dsModel.value.toString());v.currentPreset=w.recId;v.updateGlobalPreset(v.currentPreset)});return t};j.prototype.buildAccumulationView=function(){var L=this;var w=UWA.Element("div",{"class":"wux-container"});var A=new UWA.Element("div",{"class":"wux-container"});L.properties.Accumulation={};var H=new UWA.Element("div",{"class":"wux-control-inline-container",text:this.GetResString("MaxSamplePerPixelLabel")["Text"]}).inject(A);H.setStyles({width:"290px",display:"inline-block"});var D=new UWA.Element("div",{"class":"wux-control-inline-container"}).inject(A);var G=new p({minValue:1,maxValue:1048576,initialValue:0,sliderMinValue:0,sliderMaxValue:14,sliderSoftLimitMax:14,sliderHardLimitMax:20,sliderInitialValue:0,spinSoftLimitMax:16384,spinHardLimitMax:1048576,stepValue:1,decimals:0,isExponential:1,recId:"MaxSamples"}).inject(D);G.setTooltips(this.GetResString("MaxSamplePerPixelControl")["Tooltip"]);G.setHide("inline-block");var z=new UWA.Element("div",{"class":"wux-control-inline-container",text:this.GetResString("MinSamplePerPixelLabel")["Text"]}).inject(A);z.setStyles({width:"290px",display:"inline-block"});var D=new UWA.Element("div",{"class":"wux-control-inline-container"}).inject(A);var E=new p({minValue:1,maxValue:256,initialValue:0,sliderMinValue:0,sliderMaxValue:6,sliderSoftLimitMax:6,sliderHardLimitMax:8,sliderInitialValue:0,spinSoftLimitMax:64,spinHardLimitMax:256,stepValue:1,decimals:0,isExponential:1,recId:"MinSamples"}).inject(D);E.setTooltips(this.GetResString("MinSamplePerPixelControl")["Tooltip"]);E.setHide("inline-block");new UWA.Element("br").inject(A);var x=new UWA.Element("div",{"class":"wux-control-inline-container",text:this.GetResString("ClammpingMaxLumLabel")["Text"]}).inject(A);x.setStyles({width:"290px"});var D=new UWA.Element("div",{"class":"wux-control-inline-container"}).inject(A);var K=new p({minValue:0.1,maxValue:100,sliderMinValue:0,sliderMaxValue:100,sliderInitialValue:0,initialValue:0.1,stepValue:1,decimals:2,isLogarithmic:1,recId:"Clamping"}).inject(D);K.setTooltips(this.GetResString("ClammpingMaxLumControl")["Tooltip"]);new UWA.Element("br").inject(A);var t=new UWA.Element("div",{"class":"wux-control-inline-container",text:this.GetResString("GaussFilterLabel")["Text"]}).inject(A);t.setStyles({width:"300px"});var F=new UWA.Element("div",{"class":"wux-control-inline-container"}).inject(A);var u=new d({label:"",recId:"GaussFilter"}).inject(F);u.tooltipInfos=new l({shortHelp:this.GetResString("GaussFilterControl")["Tooltip"]});new UWA.Element("br").inject(A);new UWA.Element("br").inject(A);var v=new UWA.Element("div",{"class":"wux-control-inline-container",text:this.GetResString("SizeLabel")["Text"]}).inject(A);v.setStyles({width:"290px"});var D=new UWA.Element("div",{"class":"wux-control-inline-container"}).inject(A);var C=new p({minValue:1,maxValue:6,initialValue:1,stepValue:0.1,decimals:1,recId:"Size"}).inject(D);C.setTooltips(this.GetResString("SizeControl")["Tooltip"]);var J=new UWA.Element("div",{"class":"wux-control-inline-container",text:this.GetResString("CenterWeightLabel")["Text"]}).inject(A);J.setStyles({width:"290px"});var D=new UWA.Element("div",{"class":"wux-control-inline-container"}).inject(A);var B=new p({minValue:0.1,maxValue:3,initialValue:0,stepValue:0.1,decimals:1,recId:"CenterWeight"}).inject(D);B.setTooltips(this.GetResString("CenterWeightControl")["Tooltip"]);var I=new UWA.Element("div",{"class":"wux-control-inline-container"}).inject(w);I.setStyle("Width","600px");var y=new m({style:"filled-group",header:"Accumulation",body:A}).inject(I);L.properties.Accumulation.minSamplesSliderSpinBox=E;L.properties.Accumulation.MinSamplesLabel=z;L.properties.Accumulation.clampingSliderSpinBox=K;L.properties.Accumulation.clampingLabel=x;L.properties.Accumulation.accumulationToggle=u;L.properties.Accumulation.SizeSliderSpinBox=C;L.properties.Accumulation.CenterSliderSpinBox=B;L.properties.Accumulation.gaussFilterLabel=t;L.properties.Accumulation.sizeLabel=v;L.properties.Accumulation.centerWeightLabel=J;L.properties.Accumulation.maxSamplesSliderSpinBox=G;L.properties.Accumulation.MaxSamplesLabel=H;L.addEventListenerSliderSpinBox("Accumulation",G);L.addEventListenerSliderSpinBox("Accumulation",E);L.addEventListenerSliderSpinBox("Accumulation",K);L.addEventListenerSliderSpinBox("Accumulation",C);L.addEventListenerSliderSpinBox("Accumulation",B);L.addEventListenerToggle("Accumulation",u);return w};j.prototype.buildGlobalIlluminationView=function(){var V=this;var E=UWA.Element("div",{"class":"wux-container"});var N=new UWA.Element("div",{"class":"wux-container"});var v=new UWA.Element("div",{"class":"wux-control-inline-container",text:this.GetResString("MaxTraceDepthLabel")["Text"]}).inject(N);v.setStyles({width:"290px"});var P=new UWA.Element("div",{"class":"wux-control-inline-container"}).inject(N);var D=new p({minValue:1,maxValue:1000,sliderMinValue:0,sliderMaxValue:100,sliderInitialValue:0,spinSoftLimitMax:100,spinHardLimitMax:1000,initialValue:1,stepValue:1,decimals:0,isLinear:1,recId:"MaxTraceDepth"}).inject(P);D.setTooltips(this.GetResString("MaxTraceDepthControl")["Tooltip"]);var H=new UWA.Element("div",{"class":"wux-control-inline-container",text:this.GetResString("GlossyThresholdLabel")["Text"]}).inject(N);H.setStyles({width:"290px"});var P=new UWA.Element("div",{"class":"wux-control-inline-container"}).inject(N);var M=new p({minValue:0,maxValue:1,initialValue:0,stepValue:0.01,decimals:2,recId:"GlossyThreshold"}).inject(P);M.setTooltips(this.GetResString("GlossyThresholdControl")["Tooltip"]);var T=new UWA.Element("div",{"class":"wux-control-inline-container",text:this.GetResString("RenderRefractiveShadowsLabel")["Text"]}).inject(N);T.setStyles({width:"300px"});var Q=new UWA.Element("div",{"class":"wux-control-inline-container"});var X=new d({label:"",recId:"RenderRefractiveShadow"}).inject(Q);X.tooltipInfos=new l({shortHelp:this.GetResString("RenderRefractiveShadowsControl")["Tooltip"]});Q.inject(N);var K=new UWA.Element("div",{"class":"wux-container"});var L=new UWA.Element("div",{"class":"wux-control-inline-container"}).inject(N);L.setStyle("Width","580px");var J=new m({style:"filled-group",header:"Advanced",body:K}).inject(L);var U=new UWA.Element("div",{"class":"wux-control-inline-container",text:this.GetResString("LocationBasedImportanceSamplingLabel")["Text"]}).inject(K);U.setStyles({width:"285px"});var Q=new UWA.Element("div",{"class":"wux-control-inline-container"}).inject(K);var S=new d({label:"",recId:"LocationBasedSampling"}).inject(Q);S.tooltipInfos=new l({shortHelp:this.GetResString("LocationBasedImportanceSamplingControl")["Tooltip"]});new UWA.Element("br").inject(K);new UWA.Element("br").inject(K);var y=new UWA.Element("div",{"class":"wux-control-inline-container",text:this.GetResString("EmissiveObjectsImportanceSamplingLabel")["Text"]}).inject(K);new UWA.Element("br").inject(y);new UWA.Element("br").inject(y);var I=new UWA.Element("div",{"class":"wux-container"}).inject(y);var G=new UWA.Element("div",{"class":"wux-control-inline-container",text:this.GetResString("ImportanceDistributionMethodLabel")["Text"]}).inject(I);G.setStyles({width:"280px"});var Y=["Equal","Propertional to Power"];var t=["Equal","Propertional to Power"];var w=[];for(var A=0;A<Y.length;A++){w[A]={labelItem:Y[A],valueItem:t[A]}}var C=new b({elementsList:w,selectedIndex:1,recId:"Distribution",enableSearchFlag:false}).inject(I);C.getContent().style.width="130px";C.tooltipInfos=new l({shortHelp:this.GetResString("ImportanceDistributionMethodControl")["Tooltip"]});var z=new UWA.Element("div",{"class":"wux-control-inline-container",text:this.GetResString("ImportanceSamplingFactorLabel")["Text"]}).inject(I);z.setStyles({width:"275px"});var P=new UWA.Element("div",{"class":"wux-control-inline-container"}).inject(I);var W=new p({minValue:0,maxValue:1000,sliderMinValue:0,sliderMaxValue:100,sliderInitialValue:0,initialValue:0,spinSoftLimitMax:20,spinHardLimitMax:1000,stepValue:1,decimals:2,isLogarithmic:1,recId:"Factor"}).inject(P);W.setTooltips(this.GetResString("ImportanceSamplingFactorControl")["Tooltip"]);var x=new UWA.Element("div",{"class":"wux-control-inline-container",text:this.GetResString("PathTerminationStartDepthLabel")["Text"]}).inject(K);x.setStyles({width:"280px"});var P=new UWA.Element("div",{"class":"wux-control-inline-container"}).inject(K);var O=new p({minValue:0,maxValue:1000,sliderMinValue:0,sliderMaxValue:100,sliderInitialValue:0,spinSoftLimitMax:32,spinHardLimitMax:1000,initialValue:0,stepValue:1,decimals:0,isLogarithmic:1,recId:"PathTerminationDepth"}).inject(P);O.setTooltips(this.GetResString("PathTerminationStartDepthControl")["Tooltip"]);var F=new UWA.Element("div",{"class":"wux-control-inline-container",text:this.GetResString("PhotonMapVisualizationModeLabel")["Text"]}).inject(K);F.setStyles({width:"285px"});var Y=["None","Final Gathering","Caustics"];var t=["None","Final Gathering","Caustics"];var B=[];for(var A=0;A<Y.length;A++){B[A]={labelItem:Y[A],valueItem:t[A]}}var P=new UWA.Element("div",{"class":"wux-control-inline-container"}).inject(K);var u=new b({elementsList:B,selectedIndex:2,recId:"VisualizationMode",enableSearchFlag:false}).inject(P);u.getContent().style.width="130px";u.tooltipInfos=new l({shortHelp:this.GetResString("PhotonMapVisualizationModeControl")["Tooltip"]});var R=new UWA.Element("div",{"class":"wux-control-inline-container"}).inject(E);R.setStyle("Width","600px");var J=new m({style:"filled-group",header:"Global Illumination",body:N}).inject(R);V.properties.GlobalIllumination={};V.properties.GlobalIllumination.traceDepthSliderSpinBox=D;V.properties.GlobalIllumination.glossyThresholdSliderSpinBox=M;V.properties.GlobalIllumination.refractiveShadowsToggle=X;V.properties.GlobalIllumination.samplingToggle=S;V.properties.GlobalIllumination.distributionComboBox=C;V.properties.GlobalIllumination.factorSliderSpinBox=W;V.properties.GlobalIllumination.pathTerminationSliderSpinBox=O;V.properties.GlobalIllumination.visualizationModeComboBox=u;V.properties.GlobalIllumination.visualizationModeLabel=F;V.properties.GlobalIllumination.maxTraceLabel=v;V.properties.GlobalIllumination.glossyLabel=H;V.properties.GlobalIllumination.refractiveLabel=T;V.properties.GlobalIllumination.samplingLabel=U;V.properties.GlobalIllumination.distributionLabel=G;V.properties.GlobalIllumination.factorLabel=z;V.properties.GlobalIllumination.pathTerminationLabel=x;V.addEventListenerSliderSpinBox("GlobalIllumination",D);V.addEventListenerSliderSpinBox("GlobalIllumination",M);V.addEventListenerToggle("GlobalIllumination",X);V.addEventListenerToggle("GlobalIllumination",S);V.addEventListenerComboBox("GlobalIllumination",C);V.addEventListenerSliderSpinBox("GlobalIllumination",W);V.addEventListenerSliderSpinBox("GlobalIllumination",O);V.addEventListenerComboBox("GlobalIllumination",u);return E};j.prototype.buildFinalGatheringView=function(){var K=this;var y=UWA.Element("div",{"class":"wux-container"});var F=new UWA.Element("div",{"class":"wux-container"});var B=new UWA.Element("div",{"class":"wux-control-inline-container",text:this.GetResString("EnableFinalGatheringLabel")["Text"]}).inject(F);B.setStyles({width:"300px"});var J=new UWA.Element("div",{"class":"wux-control-inline-container"}).inject(F);var E=new d({label:"",recId:"EnableFinalGathering"}).inject(J);E.tooltipInfos=new l({shortHelp:this.GetResString("EnableFinalGatheringControl")["Tooltip"]});var C=new UWA.Element("div",{"class":"wux-control-inline-container",text:this.GetResString("PhotonNumberLabel")["Text"]}).inject(F);C.setStyles({width:"290px"});var G=new UWA.Element("div",{"class":"wux-control-inline-container"}).inject(F);var L=new p({minValue:1000,maxValue:100000000,sliderMinValue:0,sliderMaxValue:100,sliderInitialValue:0,initialValue:1,spinSoftLimitMax:10000000,spinHardLimitMax:100000000,stepValue:1,decimals:0,isLogarithmic:1,recId:"NoOfPhotons"}).inject(G);L.setTooltips(this.GetResString("PhotonNumberControl")["Tooltip"]);var D=new UWA.Element("div",{"class":"wux-control-inline-container",text:this.GetResString("PathDepthLabel")["Text"]}).inject(F);D.setStyles({width:"290px"});var G=new UWA.Element("div",{"class":"wux-control-inline-container"}).inject(F);var x=new p({minValue:1,maxValue:1000,sliderMinValue:0,sliderMaxValue:100,sliderInitialValue:0,initialValue:1,spinSoftLimitMax:32,spinHardLimitMax:1000,stepValue:1,decimals:0,isLogarithmic:1,recId:"PathDepth"}).inject(G);x.setTooltips(this.GetResString("PathDepthControl")["Tooltip"]);var H=new UWA.Element("div",{"class":"wux-control-inline-container",text:this.GetResString("PhotonRadiusLabel")["Text"]}).inject(F);H.setStyles({width:"290px"});var G=new UWA.Element("div",{"class":"wux-control-inline-container"}).inject(F);var t=new p({minValue:1,maxValue:1000000,sliderMinValue:0,sliderMaxValue:100,sliderInitialValue:0,initialValue:1,spinSoftLimitMax:1000,spinHardLimitMax:1000000,stepValue:1,decimals:1,isLogarithmic:1,recId:"PhotonRadius"}).inject(G);t.setTooltips(this.GetResString("PhotonRadiusControl")["Tooltip"]);var z=new UWA.Element("div",{"class":"wux-control-inline-container",text:this.GetResString("RefineFinalGatheringMapLabel")["Text"]}).inject(F);z.setStyles({width:"300px"});var J=new UWA.Element("div",{"class":"wux-control-inline-container"}).inject(F);var w=new d({label:"",recId:"RefineMap"}).inject(J);w.tooltipInfos=new l({shortHelp:this.GetResString("RefineFinalGatheringMapControl")["Tooltip"]});new UWA.Element("br").inject(F);new UWA.Element("br").inject(F);var u=new UWA.Element("div",{"class":"wux-control-inline-container",text:this.GetResString("PrecalculateIrradianceLabel")["Text"]}).inject(F);u.setStyles({width:"300px"});var J=new UWA.Element("div",{"class":"wux-control-inline-container"}).inject(F);var v=new d({label:"",recId:"PrecalculateIrradiance"}).inject(J);v.tooltipInfos=new l({shortHelp:this.GetResString("PrecalculateIrradianceControl")["Tooltip"]});var I=new UWA.Element("div",{"class":"wux-control-inline-container"}).inject(y);I.setStyle("Width","600px");var A=new m({style:"filled-group",header:"Final Gathering",body:F}).inject(I);K.properties.FinalGathering={};K.properties.FinalGathering.EnableFinalGatheringToggle=E;K.properties.FinalGathering.photonNoSliderSpinBox=L;K.properties.FinalGathering.pathDepthSliderSpinBox=x;K.properties.FinalGathering.photonRadiusSliderSpinBox=t;K.properties.FinalGathering.irradianceToggle=v;K.properties.FinalGathering.refineFinalGatheringToggle=w;K.properties.FinalGathering.EnableFinalGatheringLabel=B;K.properties.FinalGathering.photonNoLabel=C;K.properties.FinalGathering.pathDepthLabel=D;K.properties.FinalGathering.photonRadiusLabel=H;K.properties.FinalGathering.refineFinalGatheringLabel=z;K.properties.FinalGathering.irradianceLabel=u;K.addEventListenerToggle("FinalGathering",E);K.addEventListenerSliderSpinBox("FinalGathering",L);K.addEventListenerSliderSpinBox("FinalGathering",x);K.addEventListenerSliderSpinBox("FinalGathering",t);K.addEventListenerToggle("FinalGathering",v);K.addEventListenerToggle("FinalGathering",w);return y};j.prototype.buildCausticsView=function(){var K=this;var y=UWA.Element("div",{"class":"wux-container"});var C=new UWA.Element("div",{"class":"wux-container"});var J=new UWA.Element("div",{"class":"wux-control-inline-container",text:this.GetResString("CausticsLabel")["Text"]}).inject(C);J.setStyles({width:"300px"});var N=["None","Pathtracer","Caustics Photons"];var t=["None","Pathtracer","Caustics Photons"];var v=[];for(var w=0;w<N.length;w++){v[w]={labelItem:N[w],valueItem:t[w]}}var I=new b({elementsList:v,selectedIndex:1,recId:"Caustics",enableSearchFlag:false}).inject(C);I.getContent().style.width="130px";I.tooltipInfos=new l({shortHelp:this.GetResString("CausticsControl")["Tooltip"]});var A=new UWA.Element("div",{"class":"wux-control-inline-container",text:this.GetResString("CausticPhotonNumberLabel")["Text"]}).inject(C);A.setStyles({width:"290px"});var D=new UWA.Element("div",{"class":"wux-control-inline-container"}).inject(C);var M=new p({minValue:1000,maxValue:100000000,sliderMinValue:0,sliderMaxValue:100,sliderInitialValue:0,initialValue:1,spinSoftLimitMax:10000000,spinHardLimitMax:100000000,stepValue:1,decimals:0,isLogarithmic:1,recId:"PhotonNumber"}).inject(D);M.setTooltips(this.GetResString("CausticPhotonNumberControl")["Tooltip"]);var B=new UWA.Element("div",{"class":"wux-control-inline-container",text:this.GetResString("CausticPathDepthLabel")["Text"]}).inject(C);B.setStyles({width:"290px"});var D=new UWA.Element("div",{"class":"wux-control-inline-container"}).inject(C);var x=new p({minValue:1,maxValue:1000,sliderMinValue:0,sliderMaxValue:100,sliderInitialValue:0,initialValue:1,spinSoftLimitMax:32,spinHardLimitMax:1000,stepValue:1,decimals:0,isLogarithmic:1,recId:"PathDepth"}).inject(D);x.setTooltips(this.GetResString("CausticPathDepthControl")["Tooltip"]);var E=new UWA.Element("div",{"class":"wux-control-inline-container",text:this.GetResString("CausticRadiusLabel")["Text"]}).inject(C);E.setStyles({width:"290px"});var D=new UWA.Element("div",{"class":"wux-control-inline-container"}).inject(C);var u=new p({minValue:0.1,maxValue:100000,sliderMinValue:0,sliderMaxValue:100,sliderInitialValue:0,initialValue:1,spinSoftLimitMax:1000,spinHardLimitMax:1000000,stepValue:1,decimals:1,isLogarithmic:1,recId:"CausticRadius"}).inject(D);u.setTooltips(this.GetResString("CausticRadiusControl")["Tooltip"]);var G=new UWA.Element("div",{"class":"wux-control-inline-container",text:this.GetResString("RefineCausticMapLabel")["Text"]}).inject(C);G.setStyles({width:"300px"});var F=new UWA.Element("div",{"class":"wux-control-inline-container"}).inject(C);var L=new d({label:"",recId:"refinePhotonMap"}).inject(F);L.tooltipInfos=new l({shortHelp:this.GetResString("RefineCausticMapControl")["Tooltip"]});var H=new UWA.Element("div",{"class":"wux-control-inline-container"}).inject(y);H.setStyle("Width","600px");var z=new m({style:"filled-group",header:"Caustics",body:C}).inject(H);K.properties.Caustics={};K.properties.Caustics.causticsComboBox=I;K.properties.Caustics.photonNoSliderSpinBox=M;K.properties.Caustics.pathDepthSliderSpinBox=x;K.properties.Caustics.photonRadiusSliderSpinBox=u;K.properties.Caustics.refineCausticToggle=L;K.properties.Caustics.causticsLabel=J;K.properties.Caustics.photonNoLabel=A;K.properties.Caustics.pathDepthLabel=B;K.properties.Caustics.photonRadiusLabel=E;K.properties.Caustics.refineCausticLabel=G;K.addEventListenerComboBox("Caustics",I);K.addEventListenerSliderSpinBox("Caustics",M);K.addEventListenerSliderSpinBox("Caustics",x);K.addEventListenerSliderSpinBox("Caustics",u);K.addEventListenerToggle("Caustics",L);return y};j.prototype.buildRayOffsetView=function(){var z=this;var t=UWA.Element("div",{"class":"wux-container"});var v=new UWA.Element("div",{"class":"wux-container"});var w=new UWA.Element("div",{"class":"wux-control-inline-container",text:this.GetResString("RayOffsetLabel")["Text"]}).inject(v);w.setStyles({width:"290px"});var x=new UWA.Element("div",{"class":"wux-control-inline-container"}).inject(v);var u=new p({minValue:0.001,maxValue:10000,sliderMinValue:0,sliderMaxValue:100,initialValue:0.01,spinSoftLimitMax:1000,spinSoftLimitMin:0.01,spinHardLimitMax:10000,spinHardLimitMin:0.001,stepValue:1,decimals:3,isLogarithmic:1,recId:"RayOffset"}).inject(x);u.setTooltips(this.GetResString("RayOffsetControl")["Tooltip"]);var y=new UWA.Element("div",{"class":"wux-control-inline-container"}).inject(t);y.setStyle("Width","600px");var A=new m({style:"filled-group",header:"Ray Offset",body:v}).inject(y);z.properties.RayOffset={};z.properties.RayOffset.rayOffsetSliderSpinBox=u;z.properties.RayOffset.expander=A;z.addEventListenerSliderSpinBox("RayOffset",u);return t};j.prototype.buildShadowsView=function(){var y=this;var t=UWA.Element("div",{"class":"wux-container"});var v=new UWA.Element("div",{"class":"wux-container"});var z=new UWA.Element("div",{"class":"wux-control-inline-container",text:this.GetResString("GIAllowGroundShadowLabel")["Text"]}).inject(v);z.setStyles({width:"300px"});var u=new UWA.Element("div",{"class":"wux-control-inline-container"}).inject(v);var x=new d({label:"",recId:"AllowGroundShadows"}).inject(u);x.tooltipInfos=new l({shortHelp:this.GetResString("GIAllowGroundShadowControl")["Tooltip"]});var w=new UWA.Element("div",{"class":"wux-control-inline-container"}).inject(t);w.setStyle("Width","600px");var A=new m({style:"filled-group",header:"Shadows",body:v}).inject(w);y.properties.Shadows={};y.properties.Shadows.shadowsToggle=x;y.properties.Shadows.expander=A;y.addEventListenerToggle("Shadows",x);return t};j.prototype.buildReflectionsView=function(){var z=this;var u=UWA.Element("div",{"class":"wux-container"});var x=new UWA.Element("div",{"class":"wux-container"});var w=new UWA.Element("div",{"class":"wux-control-inline-container",text:this.GetResString("GIAllowGroundReflLabel")["Text"]}).inject(x);w.setStyles({width:"300px"});var v=new UWA.Element("div",{"class":"wux-control-inline-container"}).inject(x);var t=new d({label:"",recId:"AllowReflectionsOnGround"}).inject(v);t.tooltipInfos=new l({shortHelp:this.GetResString("GIAllowGroundReflControl")["Tooltip"]});var y=new UWA.Element("div",{"class":"wux-control-inline-container"}).inject(u);y.setStyle("Width","600px");var A=new m({style:"filled-group",header:"Reflections",body:x}).inject(y);z.properties.Reflections={};z.properties.Reflections.reflectionsToggle=t;z.properties.Reflections.expander=A;z.addEventListenerToggle("Reflections",t);return u};j.prototype.buildBloomView=function(){var y=this;var t=UWA.Element("div",{"class":"wux-container"});var v=new UWA.Element("div",{"class":"wux-container"});var w=new UWA.Element("div",{"class":"wux-control-inline-container",text:this.GetResString("GIAllowBloomLabel")["Text"]}).inject(v);w.setStyles({width:"300px"});var u=new UWA.Element("div",{"class":"wux-control-inline-container"}).inject(v);var z=new d({label:"",recId:"AllowBloom"}).inject(u);z.tooltipInfos=new l({shortHelp:this.GetResString("GIAllowBloomControl")["Tooltip"]});var x=new UWA.Element("div",{"class":"wux-control-inline-container"}).inject(t);x.setStyle("Width","600px");var A=new m({style:"filled-group",header:"Bloom",body:v}).inject(x);y.properties.Bloom={};y.properties.Bloom.bloomToggle=z;y.properties.Bloom.expander=A;y.addEventListenerToggle("Bloom",z);return t};j.prototype.buildDepthOfFieldView=function(){var y=this;var t=UWA.Element("div",{"class":"wux-container"});var v=new UWA.Element("div",{"class":"wux-container"});var z=new UWA.Element("div",{"class":"wux-control-inline-container",text:this.GetResString("GIAllowDoFLabel")["Text"]}).inject(v);z.setStyles({width:"300px"});var u=new UWA.Element("div",{"class":"wux-control-inline-container"}).inject(v);var w=new d({label:"",recId:"AllowDepthOfField"}).inject(u);w.tooltipInfos=new l({shortHelp:this.GetResString("GIAllowDoFControl")["Tooltip"]});var x=new UWA.Element("div",{"class":"wux-control-inline-container"}).inject(t);x.setStyle("Width","600px");var A=new m({style:"filled-group",header:"Depth Of Field",body:v}).inject(x);y.properties.DepthOfField={};y.properties.DepthOfField.depthToggle=w;y.properties.DepthOfField.expander=A;y.addEventListenerToggle("DepthOfField",w);return t};j.prototype.buildDownsamplingView=function(){var z=this;var t=UWA.Element("div",{"class":"wux-container"});var w=new UWA.Element("div",{"class":"wux-container"});var v=new UWA.Element("div",{"class":"wux-control-inline-container",text:this.GetResString("GIDownsamplingFactorLabel")["Text"]}).inject(w);v.setStyles({width:"290px"});var x=new UWA.Element("div",{"class":"wux-control-inline-container"}).inject(w);var u=new p({minValue:0.4,maxValue:1,initialValue:0.4,stepValue:0.1,decimals:1,recId:"DownsamplingFctor"}).inject(x);u.setTooltips(this.GetResString("GIDownsamplingFactorControl")["Tooltip"]);var y=new UWA.Element("div",{"class":"wux-control-inline-container"}).inject(t);y.setStyle("Width","600px");var A=new m({style:"filled-group",header:"Downsampling",body:w}).inject(y);z.properties.Downsampling={};z.properties.Downsampling.downsamplingSliderSpinBox=u;z.properties.Downsampling.expander=A;z.addEventListenerSliderSpinBox("Downsampling",u);return t};j.prototype.getPresetButtons=function(){var u=new a();u.addChild(new o({checkFlag:false,value:"Standard",displayStyle:"lite-borders",emphasize:"primary",icon:f.getWebappsBaseUrl()+"QualityManagerUI/assets/icons/32/CATRdgStellarConfig1.png",recId:"Standard"}));u.addChild(new o({checkFlag:false,value:"OptimizeInterior",emphasize:"primary",displayStyle:"lite-borders",icon:f.getWebappsBaseUrl()+"QualityManagerUI/assets/icons/32/CATRdgStellarConfig2.png",recId:"OptimizeInterior"}));u.addChild(new o({checkFlag:false,value:"OptimizeCaustics",emphasize:"primary",displayStyle:"lite-borders",icon:f.getWebappsBaseUrl()+"QualityManagerUI/assets/icons/32/CATRdgStellarConfig3.png",recId:"OptimizeCaustics"}));var w=u._getButtonList();for(var v=0;v<w.length;v++){var t=w[v].getContent();t.tooltipInfos=new l({shortHelp:w[v].recId})}return u};j.prototype.DoUpdatePropertyCombo=function(){var t=false;if(!s&&!k&&!h){t=true}return t};j.prototype.addEventListenerComboBox=function(u,t){var v=this;t.addEventListener("change",function(){var x=t.recId;var w=t.currentValue;if(v.DoUpdatePropertyCombo()){r=true;v.updateAttribute(u,x,w);r=false}if(x=="Caustics"){if(w=="None"||w=="Pathtracer"){v.properties.Caustics.photonNoSliderSpinBox.setDisabled(true);v.properties.Caustics.pathDepthSliderSpinBox.setDisabled(true);v.properties.Caustics.photonRadiusSliderSpinBox.setDisabled(true);v.properties.Caustics.refineCausticToggle.disabled=true}else{v.properties.Caustics.photonNoSliderSpinBox.setDisabled(false);v.properties.Caustics.pathDepthSliderSpinBox.setDisabled(false);v.properties.Caustics.photonRadiusSliderSpinBox.setDisabled(false);v.properties.Caustics.refineCausticToggle.disabled=false}}})};j.prototype.addEventListenerSliderSpinBox=function(t,v){var u=this;v.elements.slider.addEventListener("change",function(w){v._createEvents()});v.elements.spinBox.addEventListener("change",function(w){v._createEvents();var y=v.options.recId;var x=v.elements.spinBox.value;if(u.DoUpdatePropertyCombo()){r=true;u.updateAttribute(t,y,x);r=false}})};j.prototype.addEventListenerToggle=function(t,v){var u=this;v.addEventListener("change",function(){var x=v.recId;var w=v.checkFlag;if(u.DoUpdatePropertyCombo()){r=true;u.updateAttribute(t,x,w);r=false}switch(x){case"GaussFilter":if(!w){u.properties.Accumulation.SizeSliderSpinBox.setDisabled(true);u.properties.Accumulation.CenterSliderSpinBox.setDisabled(true)}else{u.properties.Accumulation.SizeSliderSpinBox.setDisabled(false);u.properties.Accumulation.CenterSliderSpinBox.setDisabled(false)}break;case"EnableFinalGathering":if(!w){u.properties.FinalGathering.photonNoSliderSpinBox.setDisabled(true);u.properties.FinalGathering.photonRadiusSliderSpinBox.setDisabled(true);u.properties.FinalGathering.pathDepthSliderSpinBox.setDisabled(true);u.properties.FinalGathering.refineFinalGatheringToggle.disabled=true;u.properties.FinalGathering.irradianceToggle.disabled=true}else{u.properties.FinalGathering.photonNoSliderSpinBox.setDisabled(false);u.properties.FinalGathering.photonRadiusSliderSpinBox.setDisabled(false);u.properties.FinalGathering.pathDepthSliderSpinBox.setDisabled(false);u.properties.FinalGathering.refineFinalGatheringToggle.disabled=false;u.properties.FinalGathering.irradianceToggle.disabled=false}break}})};j.prototype.initializedUIfromDB=function(){var u=this;h=true;u.updateRenderButtonUI(this.currentPresetMode);var t=c.getCurrentGlobalPreset(this.currentPresetMode);k=true;for(var v in u.properties){if(v=="Global"){continue}u.updatePropertyUI(v,"Custom")}u.updateParameterDependencies();k=false;h=false};j.prototype.updateParameterDependencies=function(){var t=this;if(!t.properties.Accumulation.accumulationToggle.checkFlag){t.properties.Accumulation.SizeSliderSpinBox.setDisabled(true);t.properties.Accumulation.CenterSliderSpinBox.setDisabled(true)}else{t.properties.Accumulation.SizeSliderSpinBox.setDisabled(false);t.properties.Accumulation.CenterSliderSpinBox.setDisabled(false)}if(!t.properties.FinalGathering.EnableFinalGatheringToggle.checkFlag){t.properties.FinalGathering.photonNoSliderSpinBox.setDisabled(true);t.properties.FinalGathering.photonRadiusSliderSpinBox.setDisabled(true);t.properties.FinalGathering.pathDepthSliderSpinBox.setDisabled(true);t.properties.FinalGathering.refineFinalGatheringToggle.disabled=true;t.properties.FinalGathering.irradianceToggle.disabled=true}else{t.properties.FinalGathering.photonNoSliderSpinBox.setDisabled(false);t.properties.FinalGathering.photonRadiusSliderSpinBox.setDisabled(false);t.properties.FinalGathering.pathDepthSliderSpinBox.setDisabled(false);t.properties.FinalGathering.refineFinalGatheringToggle.disabled=false;t.properties.FinalGathering.irradianceToggle.disabled=false}if(t.properties.Caustics.causticsComboBox.currentValue=="None"||t.properties.Caustics.causticsComboBox.currentValue=="Pathtracer"){t.properties.Caustics.photonNoSliderSpinBox.setDisabled(true);t.properties.Caustics.pathDepthSliderSpinBox.setDisabled(true);t.properties.Caustics.photonRadiusSliderSpinBox.setDisabled(true);t.properties.Caustics.refineCausticToggle.disabled=true}else{t.properties.Caustics.photonNoSliderSpinBox.setDisabled(false);t.properties.Caustics.pathDepthSliderSpinBox.setDisabled(false);t.properties.Caustics.photonRadiusSliderSpinBox.setDisabled(false);t.properties.Caustics.refineCausticToggle.disabled=false}};j.prototype.updateGlobalPreset=function(t){c.setGlobalPreset(this.currentPresetMode,t,true);this.updatePropertyUI("Accumulation",t);this.updatePropertyUI("GlobalIllumination",t);this.updatePropertyUI("FinalGathering",t);this.updatePropertyUI("Caustics",t);this.updatePropertyUI("RayOffset",t);this.updatePropertyUI("Shadows",t);this.updatePropertyUI("Reflections",t);this.updatePropertyUI("Bloom",t);this.updatePropertyUI("DepthOfField",t);this.updatePropertyUI("Downsampling",t)};j.prototype.updatePropertyUI=function(u,w){var v=c.getPresetValue(this.currentPresetMode,w);if(!q.is(v)){return false}var t=v[u];if(!q.is(t)){return false}this.updatePropertyPresetButtonUI(u,w);switch(u){case"Accumulation":this.properties[u].maxSamplesSliderSpinBox.setValue(t.MaxSamples);this.properties[u].minSamplesSliderSpinBox.setValue(t.MinSamples);this.properties[u].clampingSliderSpinBox.setValue(t.Clamping);this.properties[u].accumulationToggle.checkFlag=t.GaussFilter;this.properties[u].SizeSliderSpinBox.setValue(t.Size);this.properties[u].CenterSliderSpinBox.setValue(t.CenterWeight);break;case"GlobalIllumination":this.properties[u].traceDepthSliderSpinBox.setValue(t.MaxTraceDepth);this.properties[u].glossyThresholdSliderSpinBox.setValue(t.GlossyThreshold);this.properties[u].refractiveShadowsToggle.checkFlag=t.RenderRefractiveShadow;this.properties[u].samplingToggle.checkFlag=t.LocationBasedSampling;this.properties[u].distributionComboBox.currentValue=t.Distribution;this.properties[u].factorSliderSpinBox.setValue(t.Factor);this.properties[u].pathTerminationSliderSpinBox.setValue(t.PathTerminationDepth);this.properties[u].visualizationModeComboBox.currentValue=t.VisualizationMode;break;case"FinalGathering":this.properties[u].EnableFinalGatheringToggle.checkFlag=t.EnableFinalGathering;this.properties[u].photonNoSliderSpinBox.setValue(t.NoOfPhotons);this.properties[u].pathDepthSliderSpinBox.setValue(t.PathDepth);this.properties[u].photonRadiusSliderSpinBox.setValue(t.PhotonRadius);this.properties[u].irradianceToggle.checkFlag=t.PrecalculateIrradiance;this.properties[u].refineFinalGatheringToggle.checkFlag=t.RefineMap;break;case"Caustics":this.properties[u].causticsComboBox.currentValue=t.Caustics;this.properties[u].photonNoSliderSpinBox.setValue(t.PhotonNumber);this.properties[u].pathDepthSliderSpinBox.setValue(t.PathDepth);this.properties[u].photonRadiusSliderSpinBox.setValue(t.CausticRadius);this.properties[u].refineCausticToggle.checkFlag=t.refinePhotonMap;break;case"RayOffset":this.properties[u].rayOffsetSliderSpinBox.setValue(t.RayOffset);break;case"Shadows":this.properties[u].shadowsToggle.checkFlag=t.AllowGroundShadows;break;case"Reflections":this.properties[u].reflectionsToggle.checkFlag=t.AllowReflectionsOnGround;break;case"Bloom":this.properties[u].bloomToggle.checkFlag=t.AllowBloom;break;case"DepthOfField":this.properties[u].depthToggle.checkFlag=t.AllowDepthOfField;break;case"Downsampling":this.properties[u].downsamplingSliderSpinBox.setValue(t.DownsamplingFctor);break}};j.prototype.updateRenderButtonUI=function(t){if(t=="Static"){this.staticButton.checkFlag=true;this.batchButton.checkFlag=false}else{this.staticButton.checkFlag=false;this.batchButton.checkFlag=true}for(var u in c._QMSettings){this.updateUI(u,t)}};j.prototype.updateUI=function(u,t){var v="inline-block";if(u=="RayOffset"||u=="AllowGroundShadows"||u=="AllowReflectionsOnGround"||u=="AllowBloom"||u=="AllowDepthOfField"||u=="DownsamplingFctor"){v="block"}if(!c.getQMsetting(u,t)){v="none"}switch(u){case"MaxSamples":this.properties.Accumulation.MaxSamplesLabel.setStyles({display:v});this.properties.Accumulation.maxSamplesSliderSpinBox.setHide(v);break;case"MinSamples":this.properties.Accumulation.MinSamplesLabel.setStyles({display:v});this.properties.Accumulation.minSamplesSliderSpinBox.setHide(v);break;case"Clamping":this.properties.Accumulation.clampingLabel.setStyles({display:v});this.properties.Accumulation.clampingSliderSpinBox.setHide(v);break;case"GaussFilter":this.properties.Accumulation.gaussFilterLabel.setStyles({display:v});this.properties.Accumulation.accumulationToggle.getContent().style.display=v;break;case"Size":this.properties.Accumulation.sizeLabel.setStyles({display:v});this.properties.Accumulation.SizeSliderSpinBox.setHide(v);break;case"CenterWeight":this.properties.Accumulation.centerWeightLabel.setStyles({display:v});this.properties.Accumulation.CenterSliderSpinBox.setHide(v);break;case"MAxTraceDepth":this.properties.GlobalIllumination.maxTraceLabel.setStyles({display:v});this.properties.GlobalIllumination.traceDepthSliderSpinBox.setHide(v);break;case"GlossyThreshold":this.properties.GlobalIllumination.glossyLabel.setStyles({display:v});this.properties.GlobalIllumination.glossyThresholdSliderSpinBox.setHide(v);break;case"RenderRefractiveShadow":this.properties.GlobalIllumination.refractiveLabel.setStyles({display:v});this.properties.GlobalIllumination.refractiveShadowsToggle.getContent().style.display=v;break;case"LocationBasedSampling":this.properties.GlobalIllumination.samplingLabel.setStyles({display:v});this.properties.GlobalIllumination.samplingToggle.getContent().style.display=v;break;case"Distribution":this.properties.GlobalIllumination.distributionLabel.setStyles({display:v});this.properties.GlobalIllumination.distributionComboBox.getContent().style.display=v;break;case"Factor":this.properties.GlobalIllumination.factorLabel.setStyles({display:v});this.properties.GlobalIllumination.factorSliderSpinBox.setHide(v);break;case"PathTerminationDepth":this.properties.GlobalIllumination.pathTerminationLabel.setStyles({display:v});this.properties.GlobalIllumination.pathTerminationSliderSpinBox.setHide(v);break;case"VisualizationMode":this.properties.GlobalIllumination.visualizationModeLabel.setStyles({display:v});this.properties.GlobalIllumination.visualizationModeComboBox.getContent().style.display=v;break;case"EnableFinalGathering":this.properties.FinalGathering.EnableFinalGatheringLabel.setStyles({display:v});this.properties.FinalGathering.EnableFinalGatheringToggle.getContent().style.display=v;break;case"NoOfPhotons":this.properties.FinalGathering.photonNoLabel.setStyles({display:v});this.properties.FinalGathering.photonNoSliderSpinBox.setHide(v);break;case"PathDepth":this.properties.FinalGathering.pathDepthLabel.setStyles({display:v});this.properties.FinalGathering.pathDepthSliderSpinBox.setHide(v);break;case"PhotonRadius":this.properties.FinalGathering.photonRadiusLabel.setStyles({display:v});this.properties.FinalGathering.photonRadiusSliderSpinBox.setHide(v);break;case"RefineMap":this.properties.FinalGathering.refineFinalGatheringLabel.setStyles({display:v});this.properties.FinalGathering.refineFinalGatheringToggle.getContent().style.display=v;break;case"PrecalculateIrradiance":this.properties.FinalGathering.irradianceLabel.setStyles({display:v});this.properties.FinalGathering.irradianceToggle.getContent().style.display=v;break;case"Caustics":this.properties.Caustics.causticsLabel.setStyles({display:v});this.properties.Caustics.causticsComboBox.getContent().style.display=v;break;case"CausticsPhotonNumber":this.properties.Caustics.photonNoLabel.setStyles({display:v});this.properties.Caustics.photonNoSliderSpinBox.setHide(v);break;case"CausticsPathDepth":this.properties.Caustics.pathDepthLabel.setStyles({display:v});this.properties.Caustics.pathDepthSliderSpinBox.setHide(v);break;case"CausticRadius":this.properties.Caustics.photonRadiusLabel.setStyles({display:v});this.properties.Caustics.photonRadiusSliderSpinBox.setHide(v);break;case"CausticRefinePhotonMap":this.properties.Caustics.refineCausticLabel.setStyles({display:v});this.properties.Caustics.refineCausticToggle.getContent().style.display=v;break;case"RayOffset":this.properties.RayOffset.expander.getContent().style.display=v;break;case"AllowGroundShadows":this.properties.Shadows.expander.getContent().style.display=v;break;case"AllowReflectionsOnGround":this.properties.Reflections.expander.getContent().style.display=v;break;case"AllowBloom":this.properties.Bloom.expander.getContent().style.display=v;break;case"AllowDepthOfField":this.properties.DepthOfField.expander.getContent().style.display=v;break;case"DownsamplingFctor":this.properties.Downsampling.expander.getContent().style.display=v;break}};j.prototype.updatePropertyPresetButtonUI=function(u,v){var w=this.properties[u];if(q.is(w)){var x=this.properties.Global.presetButtonGroup;if(q.is(x)){if(v=="Custom"){for(var t=0;t<x.getButtonCount();t++){x.getButton(t).checkFlag=false}}else{x.getButtonFromValue(v).checkFlag=true}}}};j.prototype.updateAttribute=function(t,v,u){c.setAttribute(this.currentPresetMode,"Custom",t,v,u);this.updatePropertyPresetButtonUI(t,"Custom")};return j});define("DS/QualityManagerUI/GIVisualQualityUIDlg",["UWA/Core","DS/QualityManager/QMGIController","DS/WebappsUtils/WebappsUtils","DS/QualityManagerUI/GIVisualQualityCustomPresetDlg","DS/Controls/Button","DS/Windows/Dialog","DS/Controls/ComboBox","DS/Controls/TooltipModel","DS/RuntimeView/NLSManager"],function(e,f,b,a,h,k,i,g,j){var c=false;var d=function(l){this.options=l;this.init()};d.prototype.init=function(){var m=this.options.frameWindow;this._webGLV6Viewer=m.getViewer();this._immersiveFrame=m.getImmersiveFrame();if(!f.isInitialized){f.init()}this.currentPresetMode=f.getCurrentPreset();j.DEFAULT_LANGUAGE=widget.lang?widget.lang:widget.getValue("lang");var l=this;j.loadResource({resourceFile:"QualityManagerUI/QualityManager"});j.onResourceLoaded({resourceFile:"QualityManagerUI/QualityManager"},function(){l.mbdResources=this});this.properties={};this.buildDialog();this.initializedUIfromDB()};d.prototype.initializedUIfromDB=function(){var m=this;c=true;var l=f.getCurrentGlobalPreset("Static");this.properties.Static.staticComboBox.currentValue=l;l=f.getCurrentGlobalPreset("Batch");this.properties.Batch.batchComboBox.currentValue=l;c=false};d.prototype.buildDialog=function(){var m=this;var l=UWA.createElement("div",{"class":"wux-control-inline-container",style:{"vertical-align":"top"}});m.buildViewContent().inject(l);m.GIVisualQualityUIDlg=new k({title:"Raytracer Visual Quality",content:l,immersiveFrame:m._immersiveFrame,ResizableFlag:true,width:270,height:80,allowedDockAreas:WUXDockAreaEnum.TopDockArea|WUXDockAreaEnum.BottomDockArea|WUXDockAreaEnum.LeftDockArea|WUXDockAreaEnum.RightDockArea});m.GIVisualQualityUIDlg.addEventListener("close",function(){f.commitToDB()})};d.prototype.buildViewContent=function(){var o=this;var l=UWA.createElement("div",{"class":"wux-container"});var q=["Standard","Optimize Interior","Optimize Caustics","Custom"];var m=["Standard","OptimizeInterior","OptimizeCaustics","Custom"];var p=[];for(var n=0;n<q.length;n++){p[n]={labelItem:q[n],valueItem:m[n]}}o.buildStaticView(p).inject(l);o.buildBatchView(p).inject(l);o.buildCustomizeButtonView().inject(l);return l};d.prototype.buildStaticView=function(n){var l=new UWA.Element("div",{"class":"wux-container"});l.setStyles({width:"200px"});var m=new UWA.Element("div",{"class":"wux-control-inline-container",text:"Static:"}).inject(l);m.setStyles({width:"40px"});var o=new i({elementsList:n,selectedIndex:1,recId:"Static",enableSearchFlag:false}).inject(l);o.getContent().style.width="70%";this.properties.Static={};this.properties.Static.staticComboBox=o;this.addEventListenerComboBox(o);return l};d.prototype.buildBatchView=function(o){var m=new UWA.Element("div",{"class":"wux-container"});m.setStyles({width:"200px"});var n=new UWA.Element("div",{"class":"wux-control-inline-container",text:"Batch:"}).inject(m);n.setStyles({width:"40px"});var l=new i({elementsList:o,selectedIndex:1,recId:"Batch",enableSearchFlag:false}).inject(m);l.getContent().style.width="70%";this.properties.Batch={};this.properties.Batch.batchComboBox=l;this.addEventListenerComboBox(l);return m};d.prototype.buildCustomizeButtonView=function(){var p=this;var o=UWA.createElement("div",{"class":"wux-container"});o.setStyles({position:"absolute",width:"0px",left:"225px",top:"20px"});var n=new h({recId:"customizeButton",displayStyle:"lite",icon:b.getWebappsBaseUrl()+"QualityManagerUI/assets/icons/32/I_QEditorSettings.png"}).inject(o);var m=this.options;var l=n.getContent();l.tooltipInfos=new g({shortHelp:"Customize"});n.addEventListener("buttonclick",function(){p.GIVisualQualityUIDlg.hide();var q=new a(m);q.currentPreset="Custom";q.QualityManagerDialog.addEventListener("close",function(){f.restoreFromDB();q.QualityManagerDialog.close();p.GIVisualQualityUIDlg.show()});q.QualityManagerDialog.buttons.Ok.addEventListener("click",function(){if(this.currentPresetMode=="Linked"){f.setGlobalPresetOnDB("Static","Custom",false);f.setGlobalPresetOnDB("Dynamic","Custom",false);p.properties.Static.staticComboBox.currentValue="Custom";p.properties.Dynamic.dynamicComboBox.currentValue="Custom"}else{p.currentPresetMode=q.currentPresetMode;f.setGlobalPresetOnDB(p.currentPresetMode,"Custom",false);if(p.currentPresetMode=="Static"){p.properties.Static.staticComboBox.currentValue="Custom"}else{p.properties.Batch.batchComboBox.currentValue="Custom"}}f.commitToDB();q.QualityManagerDialog.close();p.GIVisualQualityUIDlg.show()});q.QualityManagerDialog.buttons.Cancel.addEventListener("click",function(){f.restoreFromDB();q.QualityManagerDialog.close();p.GIVisualQualityUIDlg.show()})});return o};d.prototype.addEventListenerComboBox=function(l){var m=this;l.addEventListener("change",function(){if(!c){var n=l.recId;f.setCurrentPreset(n);m.currentPresetMode=n;var o=l.currentValue;m.updateGlobalPreset(n,o)}})};d.prototype.updateGlobalPreset=function(l,m){f.setGlobalPreset(l,m,false)};return d});define("DS/QualityManagerUI/QMUICustomPresetEditDlg",["UWA/Core","DS/QualityManager/QMController","DS/WebappsUtils/WebappsUtils","DS/Controls/Button","DS/Windows/Dialog","DS/Controls/ButtonGroup","DS/Controls/Expander","DS/Controls/SpinBox","DS/Controls/Toggle","DS/Controls/ComboBox","DS/QualityManagerUI/SliderSpinBox","DS/Controls/TooltipModel","DS/RuntimeView/NLSManager"],function(p,c,e,n,h,a,k,f,d,b,o,j,m){var g=false;var r=false;var i=false;var q=false;var l=function(s){this.options=s;this.init();var t=e.getWebappsBaseUrl();if(window.widget){var v=window.widget.getUrl();var u=window.widget.getValue("title")}};l.prototype.init=function(){var t=this.options.frameWindow;this._webGLV6Viewer=t.getViewer();this._immersiveFrame=t.getImmersiveFrame();if(!c.isInitialized){c.init(this._webGLV6Viewer)}m.DEFAULT_LANGUAGE=widget.lang?widget.lang:widget.getValue("lang");var s=this;m.loadResource({resourceFile:"QualityManagerUI/QualityManager"});m.onResourceLoaded({resourceFile:"QualityManagerUI/QualityManager"},function(){s.mbdResources=this});this.currentPresetMode=c.getCurrentRenderMode();this.properties=this.buildProperties();this.buildDialog();this.initializedUIfromDB()};l.prototype.buildProperties=function(){var s={Global:{id:"Global"},AntiAliasing:{id:"AntiAliasing"},PixelCulling:{id:"PixelCulling"},Transparency:{id:"Transparency"},Shadows:{id:"Shadows"},Reflections:{id:"Reflections"},AmbientOcclusion:{id:"AmbientOcclusion"},OutlineViewMode:{id:"OutlineViewMode"},Bloom:{id:"Bloom"},DepthOfField:{id:"DepthOfField"}};return s};l.prototype.buildDialog=function(){var u=this;var s=UWA.createElement("div",{"class":"wux-control-inline-container",style:{"vertical-align":"top"}});u.buildViewContent().inject(s);var w=new n({recId:"OKButton"});var v=new n({recId:"CancelButton"});var t=new n({});u.QualityManagerDialog=new h({title:"Rasterizer Visual Quality",content:s,immersiveFrame:u._immersiveFrame,ResizableFlag:true,width:750,height:450,recId:"Visual Quality",buttons:{Ok:w,Cancel:v},allowedDockAreas:WUXDockAreaEnum.TopDockArea|WUXDockAreaEnum.BottomDockArea|WUXDockAreaEnum.LeftDockArea|WUXDockAreaEnum.RightDockArea,resizableFlag:true})};l.prototype.buildViewContent=function(){var t=this;var s=UWA.createElement("div",{"class":"wux-container",style:{"vertical-align":"top"}});t.buildRenderModeView().inject(s);t.buildGlobalPresetButtonView().inject(s);t.buildAntiAliasingView().inject(s);t.buildOutlineViewModeView().inject(s);t.buildPixelcullingView().inject(s);t.buildTransparencyView().inject(s);t.buildShadowView().inject(s);t.buildReflectionsView().inject(s);t.buildAmbientOcclusionView().inject(s);t.buildBloomView().inject(s);t.buildDepthOfFieldView().inject(s);return s};l.prototype.GetResString=function(t){var s="";if(this.mbdResources){s=this.mbdResources.getKey({key:t})}return s};l.prototype.buildRenderModeView=function(){var u=this;var t=e.getWebappsBaseUrl();var v=new UWA.Element("div",{"class":"wux-control-inline-container",style:{"vertical-align":"top"}});var s=new UWA.Element("div",{"class":"wux-control-inline-container",text:"Render Mode:"}).inject(v);s.setStyles({width:"80px"});u.staticButton=new n({emphasize:"primary",label:"Static",value:"Static"}).inject(v);u.linkButton=new n({displayStyle:"lite",icon:t+"QualityManagerUI/assets/icons/32/I_QEditorUnlinked.png"}).inject(v);u.dynamicButton=new n({emphasize:"primary",label:"Dynamic",value:"Dynamic"}).inject(v);u.addEventListenerRenderModeButton(u.staticButton);u.addEventListenerRenderModeButton(u.dynamicButton);u.addEventListenerLinkButton(u.linkButton,u.dynamicButton);u.linkButton.getContent().tooltipInfos=new j({shortHelp:"Link/Unlink"});return v};l.prototype.addEventListenerRenderModeButton=function(s){var t=this;s.addEventListener("buttonclick",function(){t.currentPresetMode=s.label;c.setCurrentRenderMode(t.currentPresetMode);t.updateRenderButtonUI(t.currentPresetMode);i=true;g=true;for(var u in t.properties){if(u=="Global"){continue}t.updatePropertyUI(u,"Custom")}i=false;g=false})};l.prototype.updateRenderButtonUI=function(s){if(s=="Static"){this.staticButton.checkFlag=true;this.dynamicButton.checkFlag=false}else{if(s=="Dynamic"){this.staticButton.checkFlag=false;this.dynamicButton.checkFlag=true}else{this.staticButton.checkFlag=true}}var t="inline-block";if(s=="Dynamic"){t="none"}this.properties.AntiAliasing.iterativeAAContLabel.setStyles({display:t});this.properties.AntiAliasing.iterativeAAToggle.getContent().style.display=t};l.prototype.addEventListenerLinkButton=function(u,s){var t=this;u.addEventListener("buttonclick",function(){if(s.disabled){c.setLinkedPresetStatus(false);c.setCurrentRenderMode("Static");t.currentPresetMode="Static";t.updateRenderButtonUI(t.currentPresetMode);u.icon=e.getWebappsBaseUrl()+"QualityManagerUI/assets/icons/32/I_QEditorUnlinked.png";s.disabled=false}else{c.setLinkedPresetStatus(true);u.icon=e.getWebappsBaseUrl()+"QualityManagerUI/assets/icons/32/I_QEditorLinked.png";s.disabled=true;t.staticButton.checkFlag=true}})};l.prototype.buildGlobalPresetButtonView=function(){var v=this;var s=new UWA.Element("div",{"class":"wux-container"});s.setStyles({position:"relative",width:"450px",left:"250px"});var u=v.getPresetButtons().inject(s);v.properties.Global.presetButtonGroup=u;u.addEventListener("change",function t(w){var x=w.dsModel.value.toString();if(!q&&!i&&!g){r=true;v.updateGlobalPreset(x);r=false;u.getButtonFromValue(x).checkFlag=false}});return s};l.prototype.buildAntiAliasingView=function(){var C=this;var s=UWA.Element("div",{"class":"wux-container"});var F=UWA.Element("div",{"class":"wux-container"});var E=C.getPresetButtons();E.inject(F);var D=new UWA.Element("div",{"class":"wux-container"});var x=["NoAA","FXAA","SMAA"];var t=["NoAA","FXAA","SMAA"];var u=new UWA.Element("div",{"class":"wux-container"}).inject(D);var B=new UWA.Element("div",{"class":"wux-control-inline-container",text:this.GetResString("PostProcessAALabel")["Text"]}).inject(u);B.setStyles({width:"232px"});var A=[];for(var z=0;z<x.length;z++){A[z]={labelItem:x[z],valueItem:t[z]}}var I=new b({elementsList:A,selectedIndex:1,recId:"AntiAliasing",enableSearchFlag:false}).inject(u);I.getContent().style.width="25%";I.tooltipInfos=new j({shortHelp:this.GetResString("PostProcessAAControl")["Tooltip"]});var H=new UWA.Element("div",{"class":"wux-container"}).inject(D);var y=new UWA.Element("div",{"class":"wux-control-inline-container",text:this.GetResString("AASettingLabel")["Text"]}).inject(H);y.setStyles({width:"232px"});var w=new d({label:"",recId:"IterativeAntiAliasing"}).inject(H);w.getContent().style.width="25%";w.tooltipInfos=new j({shortHelp:this.GetResString("AASettingControl")["Tooltip"]});var v=new UWA.Element("div",{"class":"wux-control-inline-container"}).inject(s);v.setStyle("Width","600px");var G=new k({style:"filled-group",header:"Anti-aliasing",body:D,recId:"Anti-aliasing",customHeader:F}).inject(v);C.properties.AntiAliasing={};C.properties.AntiAliasing.presetButtonGroup=E;C.properties.AntiAliasing.postProcCombo=I;C.properties.AntiAliasing.iterativeAAToggle=w;C.properties.AntiAliasing.iterativeAAContLabel=y;C.properties.AntiAliasing.expander=G;C.addEventListenerComboBox("AntiAliasing",I);C.addEventListenerToggle("AntiAliasing",w);C.addEventListenerButtonGroup("AntiAliasing",E);C.addEventListenerExpander("AntiAliasing",G);return s};l.prototype.buildOutlineViewModeView=function(){var y=this;var s=UWA.Element("div",{"class":"wux-container"});var B=UWA.createElement("div",{"class":"wux-container",style:{"vertical-align":"top"}});var v=y.getPresetButtons();v.inject(B);var t=new UWA.Element("div",{"class":"wux-container"});var x=new UWA.Element("div",{"class":"wux-control-inline-container",text:this.GetResString("AllowOutlineLabel")["Text"]}).inject(t);x.setStyles({width:"240px",});var w=new UWA.Element("div",{"class":"wux-control-inline-container"});var u=new d({label:"",recId:"AllowOutline"}).inject(w);w.inject(t);u.tooltipInfos=new j({shortHelp:this.GetResString("AllowOutlineControl")["Tooltip"]});var A=new UWA.Element("div",{"class":"wux-control-inline-container"}).inject(s);A.setStyle("Width","600px");var z=new k({style:"filled-group",header:"Allow outline viewmode",body:t,recId:"Allow outline viewmode",customHeader:B}).inject(A);y.properties.OutlineViewMode={};y.properties.OutlineViewMode.presetButtonGroup=v;y.properties.OutlineViewMode.viewmodeToggle=u;y.properties.OutlineViewMode.expander=z;y.addEventListenerToggle("OutlineViewMode",u);y.addEventListenerButtonGroup("OutlineViewMode",v);return s};l.prototype.buildPixelcullingView=function(){var x=this;var t=UWA.Element("div",{"class":"wux-container"});var y=UWA.createElement("div",{"class":"wux-container",style:{"vertical-align":"top"}});var s=x.getPresetButtons();s.inject(y);var u=new UWA.Element("div",{"class":"wux-container"});var w=new UWA.Element("div",{"class":"wux-control-inline-container",text:this.GetResString("CullMinPixelSizeLabel")["Text"]}).inject(u);w.setStyles({width:"232px"});var v=new UWA.Element("div",{"class":"wux-control-inline-container"}).inject(u);var B=new o({minValue:0,maxValue:400,stepValue:1,initialValue:8,recId:"PixelCulling"}).inject(v);B.setTooltips(this.GetResString("CullMinPixelSizeControl")["Tooltip"]);var A=new UWA.Element("div",{"class":"wux-control-inline-container"}).inject(t);A.setStyle("Width","600px");var z=new k({style:"filled-group",header:"Pixel culling",body:u,recId:"Pixel culling",customHeader:y}).inject(A);x.properties.PixelCulling={};x.properties.PixelCulling.presetButtonGroup=s;x.properties.PixelCulling.pixelCullingSpinBox=B;x.properties.PixelCulling.expander=z;x.addEventListenerSpinBox("PixelCulling",B);x.addEventListenerButtonGroup("PixelCulling",s);return t};l.prototype.buildTransparencyView=function(){var A=this;var t=UWA.Element("div",{"class":"wux-container"});var u=UWA.createElement("div",{"class":"wux-container",style:{"vertical-align":"top"}});var B=A.getPresetButtons();B.inject(u);var v=["Alpha Blending","Weighted Average"];var C=["AlphaBlending","WeightedAverage"];var w=new UWA.Element("div",{"class":"wux-container"});var z=new UWA.Element("div",{"class":"wux-control-inline-container",text:this.GetResString("TranspModeLabel")["Text"]}).inject(w);z.setStyles({width:"232px",});var x=[];for(var y=0;y<v.length;y++){x[y]={labelItem:v[y],valueItem:C[y]}}var s=new b({elementsList:x,selectedIndex:1,recId:"Transparency",enableSearchFlag:false}).inject(w);s.getContent().style.width="25%";s.tooltipInfos=new j({shortHelp:this.GetResString("TranspModeControl")["Tooltip"]});var E=new UWA.Element("div",{"class":"wux-control-inline-container"}).inject(t);E.setStyle("Width","600px");var D=new k({style:"filled-group",header:"Transparency",body:w,recId:"Transparency",customHeader:u}).inject(E);A.properties.Transparency={};A.properties.Transparency.presetButtonGroup=B;A.properties.Transparency.transparencyCombo=s;A.properties.Transparency.expander=D;A.addEventListenerComboBox("Transparency",s);A.addEventListenerButtonGroup("Transparency",B);return t};l.prototype.buildShadowView=function(){var O=this;var w=new UWA.Element("div",{"class":"wux-container"});var s=UWA.createElement("div",{"class":"wux-container",style:{"vertical-align":"top"}});var F=O.getPresetButtons();F.inject(s);var E=new UWA.Element("div",{"class":"wux-container"});var Q=new UWA.Element("div",{"class":"wux-container"}).inject(E);var L=new UWA.Element("div",{"class":"wux-control-inline-container",text:this.GetResString("AllowGroundShadowLabel")["Text"]}).inject(Q);L.setStyles({width:"232px"});var B=new UWA.Element("div",{"class":"wux-control-inline-container"}).inject(Q);var C=new d({label:"",recId:"AllowGroundShadows"}).inject(B);C.tooltipInfos=new j({shortHelp:this.GetResString("AllowGroundShadowControl")["Tooltip"]});var K=new UWA.Element("div",{"class":"wux-container"}).inject(E);var L=new UWA.Element("div",{"class":"wux-control-inline-container",text:this.GetResString("AllowInterObjShadowLabel")["Text"]}).inject(K);L.setStyles({width:"232px"});var G=new UWA.Element("div",{"class":"wux-control-inline-container"}).inject(K);var J=new d({label:"",recId:"AllowInterObjectShadows"}).inject(G);J.tooltipInfos=new j({shortHelp:this.GetResString("AllowInterObjShadowControl")["Tooltip"]});var R=["PCFOptimized","ESM","poisson"];var t=["PCFOptimized","ESM","poisson"];var H=new UWA.Element("div",{"class":"wux-container"}).inject(E);var L=new UWA.Element("div",{"class":"wux-control-inline-container",text:this.GetResString("ShadowFilteringLabel")["Text"]}).inject(H);L.setStyles({width:"232px",});var x=[];for(var z=0;z<R.length;z++){x[z]={labelItem:R[z],valueItem:t[z]}}var M=new b({elementsList:x,selectedIndex:2,recId:"ShadowFilter",enableSearchFlag:false}).inject(H);M.getContent().style.width="25%";M.tooltipInfos=new j({shortHelp:this.GetResString("ShadowFilteringControl")["Tooltip"]});var N=["Low","Medium","High"];var u=["Low","Medium","High"];var v=new UWA.Element("div",{"class":"wux-container"}).inject(E);var I=new UWA.Element("div",{"class":"wux-control-inline-container",text:this.GetResString("ShadowFilteringQualityLabel")["Text"]}).inject(v);I.setStyles({width:"232px",});var A=[];for(var z=0;z<N.length;z++){A[z]={labelItem:N[z],valueItem:u[z]}}var P=new b({elementsList:A,selectedIndex:2,recId:"ShadowQuality",enableSearchFlag:false}).inject(v);P.getContent().style.width="25%";P.tooltipInfos=new j({shortHelp:this.GetResString("ShadowFilteringQualityControl")["Tooltip"]});var y=new UWA.Element("div",{"class":"wux-control-inline-container"}).inject(w);y.setStyle("Width","600px");var D=new k({style:"filled-group",header:"Shadows",recId:"Shadows",body:E,customHeader:s}).inject(y);O.properties.Shadows={};O.properties.Shadows.presetButtonGroup=F;O.properties.Shadows.filteringTypeCombo=M;O.properties.Shadows.filteringQualityCombo=P;O.properties.Shadows.groundShadowsToggle=C;O.properties.Shadows.interObjectShadowsToggle=J;O.properties.Shadows.expander=D;O.addEventListenerToggle("Shadows",C);O.addEventListenerToggle("Shadows",J);O.addEventListenerComboBox("Shadows",P);O.addEventListenerComboBox("Shadows",M);O.addEventListenerButtonGroup("Shadows",F);return w};l.prototype.buildReflectionsView=function(){var I=this;var y=UWA.Element("div",{"class":"wux-container"});var s=UWA.createElement("div",{"class":"wux-container",style:{"vertical-align":"top"}});var x=I.getPresetButtons();x.inject(s);var D=new UWA.Element("div",{"class":"wux-container"});var G=new UWA.Element("div",{"class":"wux-container"}).inject(D);var F=new UWA.Element("div",{"class":"wux-control-inline-container",text:this.GetResString("GroundReflModeLabel")["Text"]}).inject(G);F.setStyles({width:"232px"});var B=new UWA.Element("div",{"class":"wux-control-inline-container"}).inject(G);var C=new d({label:"",recId:"AllowGroundReflection"}).inject(B);C.tooltipInfos=new j({shortHelp:this.GetResString("GroundReflModeControl")["Tooltip"]});var J=["None","Mirror"];var t=[1,2];var A=new UWA.Element("div",{"class":"wux-container"}).inject(D);var H=new UWA.Element("div",{"class":"wux-control-inline-container",text:this.GetResString("ReflectionsLabel")["Text"]}).inject(A);H.setStyles({width:"232px",});var u=[];for(var w=0;w<J.length;w++){u[w]={labelItem:J[w],valueItem:t[w]}}var E=new b({elementsList:u,selectedIndex:1,recId:"ReflectionsOnGround",enableSearchFlag:false}).inject(A);E.getContent().style.width="25%";E.tooltipInfos=new j({shortHelp:this.GetResString("ReflectionsLabel")["Tooltip"]});var v=new UWA.Element("div",{"class":"wux-control-inline-container"}).inject(y);v.setStyle("Width","600px");var z=new k({style:"filled-group",header:"Reflections",body:D,recId:"Reflections",customHeader:s}).inject(v);I.properties.Reflections={};I.properties.Reflections.presetButtonGroup=x;I.properties.Reflections.reflectionsCombo=E;I.properties.Reflections.reflectionToggle=C;I.properties.Reflections.expander=z;I.addEventListenerComboBox("Reflections",E);I.addEventListenerToggle("Reflections",C);I.addEventListenerButtonGroup("Reflections",x);return y};l.prototype.buildAmbientOcclusionView=function(){var x=this;var s=UWA.Element("div",{"class":"wux-container"});var z=UWA.createElement("div",{"class":"wux-container",style:{"vertical-align":"top"}});var t=x.getPresetButtons();t.inject(z);var u=new UWA.Element("div",{"class":"wux-container"});var v=new UWA.Element("div",{"class":"wux-control-inline-container",text:this.GetResString("AllowAOLabel")["Text"]}).inject(u);v.setStyles({width:"232px"});var w=new UWA.Element("div",{"class":"wux-control-inline-container"});var A=new d({label:"",recId:"AllowSSAO"}).inject(w);w.inject(u);A.tooltipInfos=new j({shortHelp:this.GetResString("AllowAOControl")["Tooltip"]});var y=new UWA.Element("div",{"class":"wux-control-inline-container"}).inject(s);y.setStyle("Width","600px");var B=new k({style:"filled-group",header:"Ambient Occlusion",body:u,recId:"Ambient Occlusion",customHeader:z}).inject(y);x.properties.AmbientOcclusion={};x.properties.AmbientOcclusion.presetButtonGroup=t;x.properties.AmbientOcclusion.AOToggle=A;x.properties.AmbientOcclusion.expander=B;x.addEventListenerToggle("AmbientOcclusion",A);x.addEventListenerButtonGroup("AmbientOcclusion",t);return s};l.prototype.buildBloomView=function(){var z=this;var t=UWA.Element("div",{"class":"wux-container"});var w=UWA.createElement("div",{"class":"wux-container",style:{"vertical-align":"top"}});var v=z.getPresetButtons();v.inject(w);var x=new UWA.Element("div",{"class":"wux-container"});var y=new UWA.Element("div",{"class":"wux-control-inline-container",text:this.GetResString("AllowBloomLabel")["Text"]}).inject(x);y.setStyles({width:"232px"});var A=new UWA.Element("div",{"class":"wux-control-inline-container"});var u=new d({label:"",recId:"AllowBloom"}).inject(A);A.inject(x);u.tooltipInfos=new j({shortHelp:this.GetResString("AllowBloomControl")["Tooltip"]});var s=new UWA.Element("div",{"class":"wux-control-inline-container"}).inject(t);s.setStyle("Width","600px");var B=new k({style:"filled-group",header:"Bloom",body:x,recId:"Bloom",customHeader:w}).inject(s);z.properties.Bloom={};z.properties.Bloom.presetButtonGroup=v;z.properties.Bloom.bloomToggle=u;z.properties.Bloom.expander=B;z.addEventListenerToggle("Bloom",u);z.addEventListenerButtonGroup("Bloom",v);return t};l.prototype.buildDepthOfFieldView=function(){var y=this;var s=UWA.Element("div",{"class":"wux-container"});var w=UWA.createElement("div",{"class":"wux-container",style:{"vertical-align":"top"}});var v=y.getPresetButtons();v.inject(w);var u=new UWA.Element("div",{"class":"wux-container"});var x=new UWA.Element("div",{"class":"wux-control-inline-container",text:this.GetResString("AllowDoFLabel")["Text"]}).inject(u);x.setStyles({width:"232px"});var B=new UWA.Element("div",{"class":"wux-control-inline-container"});var t=new d({label:"",recId:"AllowDepthOfField"}).inject(B);B.inject(u);t.tooltipInfos=new j({shortHelp:this.GetResString("AllowDoFControl")["Tooltip"]});var z=new UWA.Element("div",{"class":"wux-control-inline-container"}).inject(s);z.setStyle("Width","600px");var A=new k({style:"filled-group",header:"Depth of field",body:u,recId:"Depth of field",customHeader:w}).inject(z);y.properties.DepthOfField={};y.properties.DepthOfField.presetButtonGroup=v;y.properties.DepthOfField.depthToggle=t;y.properties.DepthOfField.expander=A;y.addEventListenerToggle("DepthOfField",t);y.addEventListenerButtonGroup("DepthOfField",v);return s};l.prototype.getPresetButtons=function(){var s=new a();s.addChild(new n({recId:"Low",type:"radio",label:"Low",value:"Low"}));s.addChild(new n({recId:"Medium",type:"radio",label:"Medium",value:"Medium"}));s.addChild(new n({recId:"High",type:"radio",label:"High",value:"High"}));s.addChild(new n({recId:"Ultra",type:"radio",label:"Ultra",value:"Ultra"}));s.addChild(new n({recId:"Default",type:"radio",label:"Default",value:"Default"}));return s};l.prototype.DoUpdatePropertyCombo=function(){var s=false;if(!r&&!i&&!g){s=true}return s};l.prototype.DoUpdatePresetButtonGroup=function(){var s=false;if(!q&&!r&&!g){s=true}return s};l.prototype.addEventListenerComboBox=function(t,s){var u=this;s.addEventListener("change",function(){var w=s.recId;var v=s.currentValue;if(u.DoUpdatePropertyCombo()){q=true;u.updateAttribute(t,w,v);q=false}})};l.prototype.addEventListenerSpinBox=function(s,u){var t=this;u.elements.slider.addEventListener("change",function(v){u._createEvents()});u.elements.spinBox.addEventListener("change",function(v){u._createEvents();var x=u.options.recId;var w=u.elements.spinBox.value;if(t.DoUpdatePropertyCombo()){q=true;t.updateAttribute(s,x,w);q=false}})};l.prototype.addEventListenerToggle=function(s,u){var t=this;u.addEventListener("change",function(){var w=u.recId;var v=u.checkFlag;switch(w){case"AllowInterObjectShadows":if(!v){t.properties.Shadows.filteringTypeCombo.disabled=true;t.properties.Shadows.filteringQualityCombo.disabled=true}else{t.properties.Shadows.filteringTypeCombo.disabled=false;t.properties.Shadows.filteringQualityCombo.disabled=false}break;case"AllowGroundReflection":if(!v){t.properties.Reflections.reflectionsCombo.disabled=true}else{t.properties.Reflections.reflectionsCombo.disabled=false}break}if(t.DoUpdatePropertyCombo()){q=true;t.updateAttribute(s,w,v);q=false}})};l.prototype.addEventListenerButtonGroup=function(u,s){var v=this;s.addEventListener("change",function t(w){var x=w.dsModel.value.toString();if(v.DoUpdatePresetButtonGroup()){i=true;v.updateProperty(u,x);v.UpdateExpanderUI(u,false);i=false}})};l.prototype.addEventListenerExpander=function(s,t){var u=this;t.addEventListener("expand",function(){if(u.DoUpdatePropertyCombo()){}})};l.prototype.initializedUIfromDB=function(){var t=this;g=true;var s=c.getCurrentGlobalPreset(this.currentPresetMode);t.updateRenderButtonUI(this.currentPresetMode);t.updateGlobalPresetButtonUI(s);i=true;for(var u in t.properties){if(u=="Global"){continue}t.updatePropertyUI(u,"Custom")}i=false;g=false;this.updateParameterDependencies()};l.prototype.updateGlobalPreset=function(s){c.setGlobalPreset(this.currentPresetMode,s,true);this.updatePropertyUI("AntiAliasing",s);this.updatePropertyUI("PixelCulling",s);this.updatePropertyUI("Transparency",s);this.updatePropertyUI("Shadows",s);this.updatePropertyUI("Reflections",s);this.updatePropertyUI("AmbientOcclusion",s);this.updatePropertyUI("OutlineViewMode",s);this.updatePropertyUI("Bloom",s);this.updatePropertyUI("DepthOfField",s)};l.prototype.updateParameterDependencies=function(){var s=this;if(!s.properties.Shadows.interObjectShadowsToggle.checkFlag){s.properties.Shadows.filteringTypeCombo.disabled=true;s.properties.Shadows.filteringQualityCombo.disabled=true}else{s.properties.Shadows.filteringTypeCombo.disabled=false;s.properties.Shadows.filteringQualityCombo.disabled=false}if(!s.properties.Reflections.reflectionToggle.checkFlag){s.properties.Reflections.reflectionsCombo.disabled=true}else{s.properties.Reflections.reflectionsCombo.disabled=false}};l.prototype.updateProperty=function(s,t){c.setProperty(this.currentPresetMode,t,s);this.updatePropertyUI(s,t)};l.prototype.updatePropertyUI=function(t,s){if(c.getLinkedPresetStatus()){var D=c.getPresetValue("Static",s)}else{var D=c.getPresetValue(this.currentPresetMode,s)}if(!p.is(D)){return false}var F=D[t];if(!p.is(F)){return false}if(s=="Custom"){s=F.Preset}this.updatePropertyPresetButtonUI(t,s);switch(t){case"AntiAliasing":var A=this.properties[t].postProcCombo;var E=this.properties[t].iterativeAAToggle;A.currentValue=F.AntiAliasing;E.checkFlag=F.IterativeAntiAliasing;break;case"PixelCulling":this.properties[t].pixelCullingSpinBox.setValue(F.PixelCulling);break;case"Transparency":var H=this.properties[t].transparencyCombo;H.currentValue=F.Transparency;break;case"Shadows":var y=this.properties[t].filteringTypeCombo;var B=this.properties[t].filteringQualityCombo;var I=this.properties[t].groundShadowsToggle;var u=this.properties[t].interObjectShadowsToggle;y.currentValue=F.ShadowFilter;B.currentValue=F.ShadowQuality;I.checkFlag=F.AllowGroundShadows;u.checkFlag=F.AllowInterObjectShadows;break;case"Reflections":var C=this.properties[t].reflectionsCombo;var x=this.properties[t].reflectionToggle;C.currentValue=F.ReflectionsOnGround;x.checkFlag=F.AllowGroundReflection;break;case"AmbientOcclusion":var G=this.properties[t].AOToggle;G.checkFlag=F.AllowSSAO;break;case"OutlineViewMode":var w=this.properties[t].viewmodeToggle;w.checkFlag=F.AllowOutline;break;case"Bloom":var z=this.properties[t].bloomToggle;z.checkFlag=F.AllowBloom;break;case"DepthOfField":var v=this.properties[t].depthToggle;v.checkFlag=F.AllowDepthOfField;break}};l.prototype.updateGlobalPresetButtonUI=function(t){var s=this.properties.Global.presetButtonGroup};l.prototype.updatePropertyPresetButtonUI=function(t,u){var v=this.properties[t];if(p.is(v)){var w=v.presetButtonGroup;if(p.is(w)){if(u=="Custom"){for(var s=0;s<w.getButtonCount();s++){w.getButton(s).checkFlag=false}}else{w.getButtonFromValue(u).checkFlag=true}}}};l.prototype.updateAttribute=function(s,u,t){if(c.getLinkedPresetStatus()){c.setAttribute("Static","Custom",s,u,t);c.setAttribute("Dynamic","Custom",s,u,t)}else{c.setAttribute(this.currentPresetMode,"Custom",s,u,t)}this.updatePropertyPresetButtonUI(s,"Custom")};l.prototype.UpdateExpanderUI=function(t,s){this.properties[t].expander.expandedFlag=s};return l});define("DS/QualityManagerUI/QMUIPresetSelectionDlg",["UWA/Core","DS/QualityManager/QMController","DS/QualityManagerUI/QMUICustomPresetEditDlg","DS/WebappsUtils/WebappsUtils","DS/Controls/Button","DS/Windows/Dialog","DS/Controls/ComboBox","DS/Controls/TooltipModel","DS/RuntimeView/NLSManager"],function(d,e,c,a,h,k,i,f,j){var b=false;var g=function(l){this.options=l;this.init()};g.prototype.init=function(){var m=this.options.frameWindow;this._webGLV6Viewer=m.getViewer();this._immersiveFrame=m.getImmersiveFrame();if(!e.isInitialized){e.init(this._webGLV6Viewer)}j.DEFAULT_LANGUAGE=widget.lang?widget.lang:widget.getValue("lang");var l=this;j.loadResource({resourceFile:"QualityManagerUI/QualityManager"});j.onResourceLoaded({resourceFile:"QualityManagerUI/QualityManager"},function(){l.mbdResources=this});this.currentPresetMode=e.getCurrentRenderMode();this.properties={};this.buildDialog();this.initializedUIfromDB()};g.prototype.buildDialog=function(){var m=this;var l=UWA.createElement("div",{"class":"wux-control-inline-container",style:{"vertical-align":"top"}});m.buildViewContent().inject(l);m.QMUIPresetSelectionDlg=new k({title:"Rasterizer Visual Quality",content:l,immersiveFrame:m._immersiveFrame,ResizableFlag:true,width:250,height:100,recId:"Rasterizer Visual Quality",allowedDockAreas:WUXDockAreaEnum.TopDockArea|WUXDockAreaEnum.BottomDockArea|WUXDockAreaEnum.LeftDockArea|WUXDockAreaEnum.RightDockArea});m.QMUIPresetSelectionDlg.addEventListener("close",function(){e.commitToDB()})};g.prototype.buildViewContent=function(){var o=this;var l=UWA.createElement("div",{"class":"wux-container"});var q=["Low","Medium","High","Ultra","GPU Default","Custom"];var m=["Low","Medium","High ","Ultra","Default","Custom"];var p=[];for(var n=0;n<q.length;n++){p[n]={labelItem:q[n],valueItem:m[n]}}o.buildStaticView(p).inject(l);o.buildDynamicView(p).inject(l);o.buildCustomizeButtonView().inject(l);o.buildLinkButtonView().inject(l);return l};g.prototype.buildLinkButtonView=function(){var n=this;var l=UWA.createElement("div",{"class":"wux-container"});var o=new UWA.Element("div",{"class":"wux-control-inline-container"}).inject(l);o.setStyles({position:"absolute",width:"0px",left:"165px",top:"11px"});var p=new h({disabled:false,displayStyle:"lite",icon:a.getWebappsBaseUrl()+"QualityManagerUI/assets/icons/32/I_QEditorLinkLines.png"}).inject(o);var m=new UWA.Element("div",{"class":"wux-control-inline-container"}).inject(l);m.setStyles({position:"absolute",width:"0px",left:"165px",top:"20px"});n.linkButton=new h({disabled:false,displayStyle:"lite",recId:"Link",icon:a.getWebappsBaseUrl()+"QualityManagerUI/assets/icons/32/I_QEditorUnlinked.png"}).inject(m);var q=this.properties.Dynamic.dynamicComboBox;n.linkButton.addEventListener("buttonclick",function(){if(q.disabled){e.setLinkedPresetStatus(false);n.linkButton.icon=a.getWebappsBaseUrl()+"QualityManagerUI/assets/icons/32/I_QEditorUnlinked.png";q.disabled=false}else{e.setLinkedPresetStatus(true);n.linkButton.icon=a.getWebappsBaseUrl()+"QualityManagerUI/assets/icons/32/I_QEditorLinked.png";q.disabled=true;n.properties.Dynamic.dynamicComboBox.currentValue=n.properties.Static.staticComboBox.currentValue}n.updateGlobalPreset(n.currentPresetMode,n.properties.Static.staticComboBox.currentValue)});return l};g.prototype.buildCustomizeButtonView=function(){var o=this;var n=UWA.createElement("div",{"class":"wux-container"});n.setStyles({position:"absolute",width:"0px",left:"200px",top:"20px"});var m=new h({displayStyle:"lite",icon:a.getWebappsBaseUrl()+"QualityManagerUI/assets/icons/32/I_QEditorSettings.png"}).inject(n);m.getContent().tooltipInfos=new f({shortHelp:"Customize"});var l=this.options;var p=this.properties.Dynamic.dynamicComboBox;m.addEventListener("click",function(){o.QMUIPresetSelectionDlg.hide();var q=new c(l);if(p.disabled){q.dynamicButton.disabled=true;q.linkButton.icon=a.getWebappsBaseUrl()+"QualityManagerUI/assets/icons/32/I_QEditorLinked.png"}else{q.dynamicButton.disabled=false;q.linkButton.icon=a.getWebappsBaseUrl()+"QualityManagerUI/assets/icons/32/I_QEditorUnlinked.png"}q.QualityManagerDialog.addEventListener("close",function(){e.restoreFromDB()});q.QualityManagerDialog.buttons.Ok.addEventListener("click",function(){this.currentPresetMode=e.getCurrentRenderMode();if(e.getLinkedPresetStatus()){var v=e.getPresetValue("Static","Custom");for(var t in v){var s=v[t];for(var u in s){var w=s[u];e.setAttributeOnDynamicMode("Dynamic","Custom",t,u,w)}}var r=e.getPresetValue("Dynamic","Custom")}e.setGlobalPresetOnDB("Static","Custom",false);e.setGlobalPresetOnDB("Dynamic","Custom",false);o.properties.Static.staticComboBox.currentValue="Custom";o.properties.Dynamic.dynamicComboBox.currentValue="Custom";if(q.dynamicButton.disabled){p.disabled=true;o.linkButton.icon=a.getWebappsBaseUrl()+"QualityManagerUI/assets/icons/32/I_QEditorLinked.png"}else{p.disabled=false;o.linkButton.icon=a.getWebappsBaseUrl()+"QualityManagerUI/assets/icons/32/I_QEditorUnlinked.png"}e.commitToDB();q.QualityManagerDialog.close();o.QMUIPresetSelectionDlg.show()});o.QMUIPresetSelectionDlg.hide();q.QualityManagerDialog.buttons.Cancel.addEventListener("click",function(){e.restoreFromDB();q.QualityManagerDialog.close();o.QMUIPresetSelectionDlg.show()})});return n};g.prototype.buildStaticView=function(n){var l=new UWA.Element("div",{"class":"wux-container"});l.setStyles({width:"200px"});var m=new UWA.Element("div",{"class":"wux-control-inline-container",text:"Static:"}).inject(l);m.setStyles({width:"52px"});var o=new i({elementsList:n,selectedIndex:4,recId:"Static",enableSearchFlag:false}).inject(l);o.getContent().style.width="52%";this.properties.Static={};this.properties.Static.staticComboBox=o;this.addEventListenerComboBox(o);return l};g.prototype.buildDynamicView=function(o){var l=new UWA.Element("div",{"class":"wux-container"});l.setStyles({width:"200px"});var n=new UWA.Element("div",{"class":"wux-control-inline-container",text:"Dynamic:"}).inject(l);n.setStyles({width:"52px"});var m=new i({elementsList:o,selectedIndex:4,recId:"Dynamic",enableSearchFlag:false,disabled:false}).inject(l);m.getContent().style.width="52%";this.properties.Dynamic={};this.properties.Dynamic.dynamicComboBox=m;this.addEventListenerComboBox(m);return l};g.prototype.addEventListenerComboBox=function(l){var m=this;l.addEventListener("change",function(){if(!b){var n=l.recId;m.currentPresetMode=n;e.setCurrentRenderMode(m.currentPresetMode);var o=l.currentValue;m.updateGlobalPreset(m.currentPresetMode,o);if(e.getLinkedPresetStatus()){m.properties.Dynamic.dynamicComboBox.currentValue=o}}})};g.prototype.updateGlobalPreset=function(l,m){if(e.getLinkedPresetStatus()){e.setGlobalPreset("Static",m,false);e.setGlobalPreset("Dynamic",m,false)}else{e.setGlobalPreset(l,m,false)}};g.prototype.initializedUIfromDB=function(){var n=this;b=true;var l=e.getCurrentGlobalPreset("Static");this.properties.Static.staticComboBox.currentValue=l;var m=e.getCurrentGlobalPreset("Dynamic");this.properties.Dynamic.dynamicComboBox.currentValue=m;var o=this.properties.Dynamic.dynamicComboBox;if(e.getLinkedPresetStatus()){o.disabled=true;n.linkButton.icon=a.getWebappsBaseUrl()+"QualityManagerUI/assets/icons/32/I_QEditorLinked.png"}b=false};return g});define("DS/QualityManagerUI/SliderSpinBox",["UWA/Core","DS/Controls/Slider","DS/Controls/SpinBox","DS/Controls/TooltipModel","UWA/Controls/Abstract"],function(d,b,c,a){return d.Controls.Abstract.extend({init:function(e){this._parent(e);this.recId=e.recId||null;this.isExponential=e.isExponential||false;this.isLogarithmic=e.isLogarithmic||false;this.isLinear=e.isLinear||false;this.minValue=e.minValue;this.spinBoxMaxValue=e.maxValue;this.sliderMaxValue=this.spinBoxMaxValue;this.initialValue=e.initialValue;this.spinBoxStepValue=e.stepValue;this.sliderStepValue=this.spinBoxStepValue;this._value=this.initialValue;this.sliderMinValue=this.minValue;this.sliderInitialValue=this.initialValue;this.decimals=e.decimals;if(this.isLogarithmic||this.isExponential||this.isLinear){this.sliderMaxValue=e.sliderMaxValue;this.sliderMinValue=e.sliderMinValue;this.sliderInitialValue=e.sliderInitialValue}this.spinSoftLimitMax=e.spinSoftLimitMax||this.spinBoxMaxValue;this.spinSoftLimitMin=e.spinSoftLimitMin||this.minValue;this.spinHardLimitMax=e.spinHardLimitMax||this.spinBoxMaxValue;this.spinHardLimitMin=e.spinHardLimitMin||this.minValue;this.sliderSoftLimitMax=e.sliderSoftLimitMax||null;this.sliderSoftLimitMin=e.sliderSoftLimitMin||null;this.sliderHardLimitMax=e.sliderHardLimitMax||null;this.sliderHardLimitMin=e.sliderHardLimitMin||null;this.minv=this.spinSoftLimitMin;this.maxv=this.spinSoftLimitMax;this.scale=(Math.log(this.spinSoftLimitMax)-Math.log(this.spinSoftLimitMax))/(this.sliderMaxValue-this.sliderMinValue);this.step=(this.spinSoftLimitMax-this.spinSoftLimitMin)/(this.sliderMaxValue-this.sliderMinValue);this.iPixels=100;this.b=this._optimizeBVal(this.spinSoftLimitMin,this.spinSoftLimitMax,this.spinBoxStepValue,this.iPixels);this.UserEdited=false;this._createLayout()},setValue:function(h){if(typeof h==="undefined"){return}if(h<this.minValue||h>this.spinBoxMaxValue){return}this._value=h;if(this.isExponential||this.isLogarithmic||this.isLinear){this.elements.spinBox.value=h;if(this.isExponential){var e=Math.round(Math.log2(h));this.value=Math.pow(2,e);this.elements.slider.value=e}else{if(this.isLogarithmic){var g=Math.round(this.iPixels*((Math.log(h+this.b)-Math.log(this.minv+this.b))/(Math.log(this.maxv+this.b)-Math.log(this.minv+this.b))));this.value=h;this.elements.slider.value=g;this.elements.spinBox.value=h}else{if(this.isLinear){var f=Math.round(this.sliderMinValue+(h-this.minValue)/this.step);this.value=(((f-this.sliderMinValue)*this.step)+this.minValue);this.elements.slider.value=f;this.elements.spinBox.value=h}}}}else{this.elements.spinBox.value=h;this.elements.slider.value=h}},getValue:function(){return this._value},setDisabled:function(e){this.elements.spinBox.disabled=e;this.elements.slider.disabled=e},setTooltips:function(f){var e=new a({shortHelp:f});this.elements.spinBox.tooltipInfos=e},setHide:function(e){this.elements.spinBox.getContent().style.display=e;this.elements.slider.getContent().style.display=e;this.elements.slider.getContent().style.height="10px"},_createLayout:function(){this.elements.container=d.createElement("div",{Class:"dx-slider-spinbox-container"});var e=d.Element("div",{"class":"wux-container"});var f=new d.Element("div",{"class":"wux-control-inline-container"}).inject(e);this.elements.slider=new b({minValue:this.sliderMinValue,maxValue:this.sliderMaxValue,stepValue:this.sliderStepValue,value:this.sliderInitialValue}).inject(f);this.elements.slider.getContent().style.width="100px";this.elements.slider.getContent().style.height="10px";this.slider=this.elements.slider;var g=new d.Element("div",{"class":"wux-control-inline-container"}).inject(e);this.elements.spinBox=new c({minValue:this.minValue,maxValue:this.spinBoxMaxValue,stepValue:this.spinBoxStepValue,value:this.initialValue,decimals:this.decimals}).inject(g);this.elements.spinBox.getContent().style.width="100px";e.inject(this.elements.container)},_createEvents:function(){var e=this;e.elements.slider.addEventListener("change",function(f){var g=f.dsModel.value;if(e.options.isExponential){g=Math.pow(2,g);if(e.value===g){return}}else{if(e.options.isLogarithmic){if(g>=0&&g<1&&e.recId=="PathTerminationDepth"){e.elements.slider.value=0;e.elements.spinBox.value=0;return}if(g==1&&e.recId=="PathTerminationDepth"){e.elements.slider.value=1;e.elements.spinBox.value=1;return}g=Math.exp(((Math.log(e.maxv+e.b)-Math.log(e.minv+e.b))*g*0.01)+Math.log(e.minv+e.b))-e.b;if(e.value===g.toFixed()){return}}else{if(e.options.isLinear){g=(((f.dsModel.value-e.sliderMinValue)*e.step)+e.minValue);if(e.value===g){return}}}}if(e.value===g){return}e.value=g;e.setSpinBox=true;e.elements.spinBox.value=g});e.elements.spinBox.addEventListener("change",function(i){var k=i.dsModel.value;var f=Math.round(Math.log2(k));if(e.options.isExponential){if(e.value===k){return}if(k<e.spinHardLimitMax&&k>e.spinSoftLimitMax){e.elements.slider.maxValue=e.sliderHardLimitMax}else{e.elements.slider.maxValue=e.sliderSoftLimitMax}if(k!=i.dsModel.valueToCommit){if(k>=i.dsModel.valueToCommit){f=Math.ceil(Math.log2(k))}else{f=Math.floor(Math.log2(k))}k=Math.pow(2,f);e.value=k;e.elements.spinBox.value=k}else{f=Math.round(Math.log2(k));k=Math.pow(2,f);e.value=k;e.elements.spinBox.value=k}e.elements.slider.value=e._actualValueToSliderValue(f)}else{if(e.options.isLogarithmic){if(k>=0&&k<1&&e.recId=="PathTerminationDepth"){e.elements.spinBox.value=0;e.elements.slider.value=0;return}if(k!=i.dsModel.valueToCommit){e.UserEdited=false}else{e.UserEdited=true}var h=k.toFixed();if(e.UserEdited){if(h<=e.spinHardLimitMax&&h>e.spinSoftLimitMax||k>=e.spinHardLimitMin&&k<e.spinSoftLimitMin){e.minv=e.spinHardLimitMin;e.b=e._optimizeBVal(e.spinHardLimitMin,e.spinHardLimitMax,e.spinBoxStepValue,e.iPixels);e.maxv=e.spinHardLimitMax}else{e.minv=e.spinSoftLimitMin;e.b=e._optimizeBVal(e.spinSoftLimitMin,e.spinSoftLimitMax,e.spinBoxStepValue,e.iPixels);e.maxv=e.spinSoftLimitMax}}else{e.UserEdited=false}var j=Math.round(e.iPixels*((Math.log(k+e.b)-Math.log(e.minv+e.b))/(Math.log(e.maxv+e.b)-Math.log(e.minv+e.b))));e.value=Math.exp(((Math.log(e.maxv+e.b)-Math.log(e.minv+e.b))*j*0.01)+Math.log(e.minv+e.b))-e.b;if(e.value===k){return}e.elements.slider.value=j}else{if(e.options.isLinear){if(k!=i.dsModel.valueToCommit){e.UserEdited=false}else{e.UserEdited=true}if(e.UserEdited){if(k<=e.spinHardLimitMax&&k>e.spinSoftLimitMax||k>=e.spinHardLimitMin&&k<e.spinSoftLimitMin){e.minValue=e.spinHardLimitMin;e.step=(e.spinHardLimitMax-e.spinHardLimitMin)/(e.sliderMaxValue-e.sliderMinValue)}else{e.minValue=e.spinSoftLimitMin;e.step=(e.spinSoftLimitMax-e.spinSoftLimitMin)/(e.sliderMaxValue-e.sliderMinValue)}}var g=Math.round(e.sliderMinValue+(i.dsModel.valueToCommit-e.minValue)/e.step);e.value=(((g-e.sliderMinValue)*e.step)+e.minValue);if(e.value===k){return}e.elements.slider.value=g}else{e.value=k;if(e.value===k){return}e.elements.slider.value=e._actualValueToSliderValue(e.value)}}}})},_optimizeBVal:function(e,h,l,k){var g=e;var o=h;var p=0.5*(g+o);var f=k*(Math.log(e+l+g)-Math.log(e+g))/(Math.log(h+g)-Math.log(e+g));var n=k*(Math.log(e+l+o)-Math.log(e+o))/(Math.log(h+o)-Math.log(e+o));var m=k*(Math.log(e+l+p)-Math.log(e+p))/(Math.log(h+p)-Math.log(e+p));for(var j=0;j<20;j++){if(m<1){o=p;n=m}else{g=p;f=m}p=0.5*(g+o);m=k*(Math.log(g+l+p)-Math.log(g+p))/(Math.log(o+p)-Math.log(g+p))}return p},_sliderValueToActualValue:function(e){return e},_actualValueToSliderValue:function(e){return e}})});