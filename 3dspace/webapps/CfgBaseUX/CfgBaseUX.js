define("DS/CfgBaseUX/scripts/CfgSliderView",["DS/UIKIT/Spinner","UWA/Class/View","DS/Handlebars/Handlebars","text!DS/CfgBaseUX/scripts/CfgSliderViewTemplate.html","css!DS/CfgBaseUX/styles/CfgSliderView.css"],function(c,e,d,b){var a=d.compile(b);var f=e.extend({_rightPanel:null,_leftPanel:null,init:function(g){this._parent(g)},render:function(){this.container.setHTML(a(this.options));this._rightPanel=this.container.getElement(".lPanel");this._leftPanel=this.container.getElement(".rPanel");this._rightResizer=this.container.getElement(".layout-resizer");this._currentRight="0";this._resizeEventRegister();this.initialiseButtons();this.disableRightLayout();this.disableLeftLayout();this.adjustFooter();if(this.options.isReadOnlyMode==true){this.adjustReadOnlyMode();this._rightResizer.hide()}this.container.inject(widget.body);this.addEventListeners();this.addHeaderControl();this.addHeaderText();if(document.querySelector(".xnav_component")){document.querySelector(".xnav_component").setStyle("display","none")}this._expandCollapseDockedPanel();return this},_resizeEventRegister:function(){var k=this;var n=false;var o=null;var i=null;var h=null;var g=function(p){if(p.stopPropagation){p.stopPropagation()}if(p.preventDefault){p.preventDefault()}p.cancelBubble=true;p.returnValue=false;return false};var l=function(p){o=k._currentRight;i=p.clientX?p.clientX:(p.touches&&p.touches[0])?p.touches[0].clientX:0;n=true;if(p.type==="touchstart"){document.addEventListener("touchmove",j);document.addEventListener("touchend",m)}else{if(p.type==="mousedown"){document.addEventListener("mousemove",j);document.addEventListener("mouseup",m)}}};var j=function(q){var p=q.clientX?q.clientX:(q.touches&&q.touches[0])?q.touches[0].clientX:0;if(n){k._currentRight=+o+ +(i-p);k._resizePanels()}};var m=function(p){n=false;o=k._currentRight;if(p.type==="touchend"){document.removeEventListener("touchmove",j);document.removeEventListener("touchend",m)}else{if(p.type==="mouseup"){document.removeEventListener("mousemove",j);document.removeEventListener("mouseup",m)}}};k._rightResizer.addEventListener("mousedown",l);k._rightResizer.addEventListener("touchstart",l)},_resizePanels:function(){if(this._currentRight>1000||this._currentRight<100){return}this._rightResizer.setStyle("right",this._currentRight);this._rightPanel.setStyle("width",this._currentRight);var g="calc( 100% - "+this._currentRight+"px )";this._leftPanel.setStyle("width",g)},addHeaderText:function(){if(this.options.headerText!=null){this._leftPanel.getElement(".headerControl").appendText(this.options.headerText)}},addHeaderControl:function(){this.options.headerControl.inject(this._leftPanel.getElement(".headerControl"))},disableRightLayout:function(){this._rightSpinner=new c({className:"Spinner-large rightSpinner"}).inject(this._rightPanel.getElement(".gridViewContainer"));this._rightSpinner.spin();this._rightSpinner.show()},disableLeftLayout:function(){this._leftSpinner=new c({className:"Spinner-large leftSpinner"}).inject(this._leftPanel.getElement(".gridViewContainer"));this._leftSpinner.spin();this._leftSpinner.show()},initialiseButtons:function(){this._leftPanel._crossButton=this._leftPanel.getElement(".fonticon-cancel");this._leftPanel._plusButton=this._leftPanel.getElement(".Cfgbtn-Book");this._leftPanel._editButton=this._leftPanel.getElement(".Cfgbtn-Edit");this._leftPanel._touchButton=this._leftPanel.getElement(".Cfgbtn-Touch");this._leftPanel._applyButton=this._leftPanel.getElement(".Cfgbtn-Apply");this._leftPanel._verifyButton=this._leftPanel.getElement(".Cfgbtn-Verify");this._leftPanel._cancelButton=this._leftPanel.getElement(".Cfgbtn-Cancel");this._rightPanel._crossButton=this._rightPanel.getElement(".fonticon-cancel");this._rightPanel._applyButton=this._rightPanel.getElement(".Cfgbtn-Apply");this._rightPanel._cancelButton=this._rightPanel.getElement(".Cfgbtn-Cancel")},adjustReadOnlyMode:function(){this._rightPanel.setStyle("width","0px");this._leftPanel.setStyle("width","100%");this._leftPanel._plusButton.hide()},clearRightLayout:function(){this._rightPanel.getElement(".gridViewContainer").setHTML("")},clearLeftLayout:function(){this._leftPanel.getElement(".gridViewContainer").setHTML("")},setRightView:function(g,h){if(h!==undefined&&h!==null){h.elements.container.addClassName("toolbarPadding");h.inject(this._rightPanel.getElement(".gridViewContainer"))}g.inject(this._rightPanel.getElement(".gridViewContainer"))},setLeftView:function(g,h){if(h!==undefined&&h!==null){h.elements.container.addClassName("toolbarPadding");h.inject(this._leftPanel.getElement(".gridViewContainer"))}g.inject(this._leftPanel.getElement(".gridViewContainer"))},addEventListeners:function(){var g=this;this._leftPanel._crossButton.addEvent("click",function(h){h.buttonId="leftCross";g.options.onButtonClickCB(h);g.destroyLayout()});this._leftPanel._plusButton.addEvent("click",function(h){g._expandCollapseDockedPanel(h)});if(this._leftPanel._applyButton){this._leftPanel._applyButton.addEvent("click",function(h){h.buttonId="leftApply";g.disableButtons();g.options.onButtonClickCB(h)})}if(this._leftPanel._verifyButton){this._leftPanel._verifyButton.addEvent("click",function(h){h.buttonId="leftVerify";g.disableButtons();g.options.onButtonClickCB(h)})}if(this._leftPanel._cancelButton){this._leftPanel._cancelButton.addEvent("click",function(h){h.buttonId="leftCancel";g.options.onButtonClickCB(h);g.destroyLayout()})}this._rightPanel._crossButton.addEvent("click",function(h){g._expandCollapseDockedPanel(h)});if(this._rightPanel._applyButton){this._rightPanel._applyButton.addEvent("click",function(h){h.buttonId="rightApply";g.options.onButtonClickCB(h);g._expandCollapseDockedPanel(h)})}if(this._rightPanel._cancelButton){this._rightPanel._cancelButton.addEvent("click",function(h){h.buttonId="rightCancel";g.options.onButtonClickCB(h);g._expandCollapseDockedPanel(h)})}if(this._leftPanel._touchButton){this._leftPanel._touchButton.addEvent("click",function(h){h.buttonId="touch";g.options.onButtonClickCB(h)})}},disableButtons:function(){this._leftPanel._applyButton.setAttribute("disabled","");this._leftPanel._verifyButton.setAttribute("disabled","");this._leftPanel._cancelButton.setAttribute("disabled","");this._leftPanel._crossButton.setStyles({"pointer-events":"none"})},enableButtons:function(){this._leftPanel._applyButton.removeAttribute("disabled");this._leftPanel._verifyButton.removeAttribute("disabled");this._leftPanel._cancelButton.removeAttribute("disabled");this._leftPanel._crossButton.setStyles({"pointer-events":"All"});if(this._rightSpinner!=undefined){this._rightSpinner.hide()}if(this._leftSpinner!=undefined){this._leftSpinner.hide()}},adjustFooter:function(){if(this.options.isRightFooter==false){this._rightPanel.getElement(".modalBody").addClassName("modalBodyWithoutFooter");this._rightPanel.getElement(".modalBody").removeClassName("modalBody");this._rightPanel.getElement(".modal-footer").remove();this._rightPanel._applyButton=null;this._rightPanel._cancelButton=null}if(this.options.isLeftFooter==false){this._leftPanel.getElement(".modalBody").addClassName("modalBodyWithoutFooter");this._leftPanel.getElement(".modalBody").removeClassName("modalBody");this._leftPanel.getElement(".modal-footer").remove();this._leftPanel._applyButton=null;this._leftPanel._cancelButton=null}},destroyLayout:function(){if(document.querySelector(".xnav_component")){document.querySelector(".xnav_component").setStyle("display","")}this.destroy()},_expandCollapseDockedPanel:function(){if(this._rightPanel.isHidden()==true){this._leftPanel.removeClassName("leftPanelReset");this._rightPanel.removeClassName("rightPanelReset");this._leftPanel.addClassName("leftPanelExpand");this._rightPanel.addClassName("rightPanelExpand");this._rightResizer.setStyle("right","450px");this._currentRight="450";this._rightPanel.setStyle("width","");this._rightResizer.show();this._rightPanel.show()}else{this._rightPanel.hide();this._leftPanel.removeClassName("leftPanelExpand");this._rightPanel.removeClassName("rightPanelExpand");this._rightPanel.addClassName("rightPanelReset");this._leftPanel.addClassName("leftPanelReset");this._leftPanel.setStyle("width","");this._rightResizer.hide()}}});return f});define("DS/CfgBaseUX/scripts/CfgData",[],function(){var b=null;function a(){this.Data={};this.Data.Models=[];this.Data.dictionaryBank=[];this.Data.clear=function(){this.dictionaryBank=[]};this.Data.renderTo=null;this.Data.addDictionaryByCriteria=function(g,d,e){var f=this.getDictionary(g);if(f===null){f={image:null,features:null,rvds:null,name:"Test",builds:null,rules:null,id:null,manufacturingPlans:null,type:"Model",milestones:null,products:null};this.dictionaryBank.push({id:g,dictionary:f})}if(e=="features"){f.features=d.features;f.name=d.name;f.displayValue=d.displayValue}else{if(e=="products"){f.products=d.products}else{if(e=="milestones"){f.milestones=d.milestones}else{if(e=="manufacturingPlans"){f.manufacturingPlans=d.manufacturingPlans}else{if(e=="builds"){f.builds=d.builds}}}}}};this.Data.getDictionaryByCriteria=function(g,f){var d={};for(var e=0;e<this.dictionaryBank.length;e++){if(g==this.dictionaryBank[e].id){if(f=="features"){d.features=this.dictionaryBank[e].dictionary.features;d.name=this.dictionaryBank[e].dictionary.name;d.displayValue=this.dictionaryBank[e].dictionary.displayValue}else{if(f=="products"){d.products=this.dictionaryBank[e].dictionary.products}else{if(f=="milestones"){d.milestones=this.dictionaryBank[e].dictionary.milestones}else{if(f=="manufacturingPlans"){d.manufacturingPlans=this.dictionaryBank[e].dictionary.manufacturingPlans}else{if(f=="builds"){d.builds=this.dictionaryBank[e].dictionary.builds}}}}}return d}}d[f]=null;return d};this.Data.addDictionary=function(e,d){if(this.getDictionary(e)===null){this.dictionaryBank.push({id:e,dictionary:d})}};this.Data.getDictionary=function(e){for(var d=0;d<this.dictionaryBank.length;d++){if(e==this.dictionaryBank[d].id){return this.dictionaryBank[d].dictionary}}return null};return this.Data}function c(){if(b==null){b=new a()}return b}return c()});define("DS/CfgBaseUX/scripts/CfgEvolutionRange",["UWA/Drivers/Alone","DS/Core/Core"],function(c,a){var b={getRange:function(h,g,f,d){var e={start:{name:h,revision:g,displayname:f,isRoot:d},end:[]};e.addLeaves=function(l,j,k,i){this.end.push({name:l,revision:j,displayname:k,IsExcluded:i})};e.buildXML=function(l){if(this.start.isRoot==true){var k='<Tree><Root Name = "'+this.start.name+'" Revision = "'+this.start.revision+'" DescId = "'+window.DescriptionCount+'" IsExcluded="false"/>';var j='<TreeSeries DescId = "'+window.DescriptionCount+'" Revision = "'+this.start.revision+'" DisplayName="'+this.start.displayname+'"></TreeSeries>';l.iDescriptionTag.push(j);window.DescriptionCount++;if(this.end.length>0){for(var m=0;m<this.end.length;m++){k=k+'<Leaf Name="'+this.end[m].name+'" Revision="'+this.end[m].revision+'" DescId = "'+window.DescriptionCount+'" IsExcluded="'+this.end[m].IsExcluded+'" />';j='<TreeSeries DescId = "'+window.DescriptionCount+'" Revision = "'+this.end[m].revision+'" DisplayName="'+this.end[m].displayname+'"></TreeSeries>';l.iDescriptionTag.push(j);window.DescriptionCount++}}k=k+"</Tree>";return k}else{var i='<TreeSeries DescId = "'+window.DescriptionCount+'" Revision = "'+this.start.revision+'" DisplayName="'+this.start.displayname+'"/>';l.iDescriptionTag.push(i);var n='<Single Name = "'+this.start.name+'" Revision = "'+this.start.revision+'" DescId = "'+window.DescriptionCount+'"/>';window.DescriptionCount++;return n}};e.buildMilestoneXML=function(){if(this.start.isRoot==true){var i='<Tree><Root Name = "'+this.start.name+'" IsExcluded="false"/>';if(this.end.length>0){for(var j=0;j<this.end.length;j++){i=i+'<Leaf Name="'+this.end[j].name+'" IsExcluded="'+this.end[j].IsExcluded+'" />'}}i=i+"</Tree>";return i}else{return'<Single Name = "'+this.start.name+'"/>'}};return e}};return b});define("DS/CfgBaseUX/scripts/CfgModelEvents",["DS/Core/ModelEvents"],function(d){var b=null;function c(){this.ModelEvents=new d();return this.ModelEvents}function a(){if(b==null){b=new c()}return b}return a()});define("DS/CfgBaseUX/scripts/CfgDialog",["UWA/Class/View","DS/UIKIT/Input/Button","DS/ENOFloatingPanel/ENOFloatingPanel","css!DS/CfgBaseUX/styles/CfgDialog.css"],function(c,a,b){var d=c.extend({buttons:[],className:"target-container",id:"target-container",setup:function(){},init:function(e){this._parent(e)},closeDialog:function(){this.CfgFloatingPanel.destroy()},render:function(){this.buttons=null;var e=this;this.container.setStyles({height:"100%"});if(this.options.dialogue.buttonArray!=null){this.buttons=[];this.options.dialogue.buttonArray.forEach(function(g){var f=new a({value:g.label,className:g.className,events:{onClick:function(){g.handler()}}});e.buttons.push(f)})}this.CfgFloatingPanel=new b({className:"Cfg"+this.options.mode+"Dialog",title:this.options.dialogue.header,body:this,overlay:true,closable:true,animate:false,resizable:true,footer:this.buttons,appNamePosition:0,events:{onResizeFloating:function(){e.resizeDialog()},onClose:function(){if(e.options.dialogue.postCrossHandler!=null&&e.options.dialogue.postCrossHandler!="undefined"){e.options.dialogue.postCrossHandler()}else{e.closeDialog()}},onHide:function(){if(e.options.dialogue.postCloseHandler!=null&&e.options.dialogue.postCloseHandler!="undefined"){e.options.dialogue.postCloseHandler()}}}});this.CfgFloatingPanel.inject(this.options.dialogue.target);this.CfgFloatingPanel.show();this.CfgFloatingPanel.centerIt();widget.addEvent("onResize",function(){e.CfgFloatingPanel.centerIt()})},resizeDialog:function(){var e=this.CfgFloatingPanel.getModalBodySize().width;if(e<750){this.responsiveHandler("small")}else{if(e>=750){this.responsiveHandler("desktop")}}},responsiveHandler:function(f){var i=null;var g=null;var e=null;var h=null;if(f==="small"){i="none !important;";g="5px";e="30px";h="10px"}else{if(f==="desktop"){i="block !important;";g="230px";e="30px";h="0px"}}this.container.getElements(".CfgCustomModelTile-header").forEach(function(j){j.setAttribute("style","display:"+i)});this.container.getElements(".CfgCustomModelTile-subtitle").forEach(function(j){j.setAttribute("style","display:"+i)});this.container.getElements(".CfgCustomModelTile-content").forEach(function(j){j.setAttribute("style","display:"+i)});this.container.getElements(".CfgCustomModelTile-expression-container").forEach(function(j){j.setStyles({left:g,right:e,top:h})});this.container.getElements(".CfgCustomModelTile-expression").forEach(function(j){if(f==="small"){j.setStyles({border:"none","padding-left":"0px"})}else{if(f==="desktop"){j.setStyles({"border-left":"1px solid lightgrey","padding-left":"10px"})}}})}});return d});define("DS/CfgBaseUX/scripts/CfgContainerView",["UWA/Class/View","DS/Handlebars/Handlebars","text!DS/CfgBaseUX/scripts/CfgContainerViewTemplate.html",],function(d,c,e){var b=c.compile(e);var a=d.extend({className:"CfgContainerView",init:function(f){this._parent(f)},render:function(){this.container.setHTML(b(this.options));this._header=this.container.getElement(".cfgContainerHeader");this._body=this.container.getElement(".cfgContainerBody");if(this.options.isHeader==false){this._header.hide();this._body.setStyles({height:"calc(100% - 68px)"})}this._firstButton=this.container.getElement(".btn-primary");this._secoundButton=this.container.getElement(".btn-default");this.container.setStyles({height:"100%",width:"100%"});this.registerCallbackEvents();return this},registerCallbackEvents:function(){var f=this;this._firstButton.addEvent("click",function(g){g.buttonId="firstButton";f.options.onButtonClickCB(g)});this._secoundButton.addEvent("click",function(g){g.buttonId="secondButton";f.options.onButtonClickCB(g)})}});return a});define("DS/CfgBaseUX/scripts/CfgSearchConfiguration",["UWA/Core","UWA/Utils/InterCom","UWA/Class/Model"],function(d,b,c){var a=function(e){this.multiSelectVal=e;this.socketName="search_socket_"+(new Date()).getTime();this.socket=new b.Socket(this.socketName,{dispatchRetryInterval:5});this.socket.subscribeServer("SearchComServer");this.listener=this.objectsSelected.bind(this);this.socket.addListener("Selected_Objects_search",this.listener);var f=this.options();this.socket.dispatchEvent("RegisterContext",f)};a.prototype.destroy=function(){var e={};e.widget_id="1234";this.socket.dispatchEvent("unregisterSearchContext",e);this.socket.unsubscribeServer("SearchComServer");this.socket.removeListener("Selected_Objects_search",this.listener);this.socket.disconnect()};a.prototype.options=function(k,h,m,g,e){var j={};j.title=k;j.multiSel=this.multiSelectVal;j.mode="furtive";j.app_socket_id=this.socketName;j.widget_id="1234";j.default_with_precond=true;j.show_precond=false;j.idcard_activated=false;j.role=m;j.tenant=enoviaServerFilterWidget.tenant;if(h){j.precond="(";j.precond+='flattenedtaxonomies:"types/'+h+'"';j.precond+=")";var l="";for(var f=0;f<e.length;f++){l=l+"NOT (physicalid:"+e[f]+")"}if(e!=""){j.precond+=l}}if(g){j.default_search_criteria=g}return(j)};a.prototype.activate=function(i,h,k,j,g,e){var f=this.options(i,h,k,g,e);this.callback=j;this.socket.dispatchEvent("InContextSearch",f)};a.prototype.isAvailable=function(){return(d.is(this.socket))};a.prototype.objectsSelected=function(h){var e=[];if(this.callback){for(var g=0;g<h.length;g++){var f=new c(h[g]);e.push(f)}this.callback(e)}};return(a)});define("DS/CfgBaseUX/scripts/CfgToggle",["UWA/Class/View","DS/UIKIT/Input/Toggle","DS/UIKIT/Tooltip","css!DS/CfgBaseUX/styles/CfgToggle.css"],function(c,d,a){var b=c.extend({cfgToggle:null,toggleComponentHolder:null,init:function(e){this._parent(e)},setup:function(e){},render:function(){var f=this;this.toggleComponentHolder=UWA.createElement("div",{"class":"cfgToggleComponentHolder",styles:{width:f.options.width?f.options.width+"px":"200px"}});var h=UWA.createElement("div",{"class":"cfgToggleLabel",text:f.options.toggleLabel,styles:{maxWidth:f.options.width?(f.options.width-50)+"px":"150px"}});h.inject(this.toggleComponentHolder);var g=UWA.createElement("div",{"class":"cfgToggleHolder",styles:{width:"50px"}});this.cfgToggle=new d({className:"cfgToggle",type:"switch",id:f.options.toggleID?f.options.toggleID:"cfgToggleID",checked:false,value:"option2",label:""}).inject(g);g.inject(this.toggleComponentHolder);var e=new a({className:"cfgToggleTooltip",target:g,body:f.options.toggleTooltip,position:"bottom"});return this.toggleComponentHolder},setToggleState:function(e){if(e&&e==true){this.cfgToggle.check(true)}else{this.cfgToggle.check(false)}},getToggleState:function(){if(this.cfgToggle){return this.cfgToggle.isChecked()}else{return null}}});return b});define("DS/CfgBaseUX/scripts/CfgModelTileView",["UWA/Core","UWA/Utils","DS/W3DXComponents/Views/Item/TileView",],function(d,c,b){var a=b.extend({name:"CfgCustomModelTile",template:function(){return'                                        <div class="'+this.getClassNames("-check")+' {{#unless withMultisel}}hidden{{/unless}}">                                            <div class="toggle toggle-primary">                                                <input type="checkbox" name="radios" value="" id="checkbox-{{cid}}">                                                <label class="control-label" for="checkbox-{{cid}}"></label>                                            </div>                                        </div>                                        <div class="'+this.getClassNames("-sub-container")+'" draggable="true">                                            <div class="'+this.getClassNames("-header")+'">                                                {{#if image}}<img src="{{#unless lazyLoading}}{{image}}{{/unless}}" {{getImgAttrs imgAttrs}} class="'+this.getClassNames("-image")+'" draggable="false"/>{{/if}}                                            </div>                                            <div class="'+this.getClassNames("-body")+'">                                                {{#if icon}}<img src="{{icon}}" class="'+this.getClassNames("-icon")+'" draggable="false"/>{{/if}}	                                                <div class="'+this.getClassNames("-title")+'" title="{{marketingName}}" style="white-space: nowrap;">{{{title}}}</div>                                                <div class="'+this.getClassNames("-subtitle")+'">{{{subtitle}}}</div>                                                <div class="'+this.getClassNames("-content")+'" title="{{owner}}">{{{content}}}</div>                                            <progress max="100" value="10" class="'+this.getClassNames("-progress")+'"></progress>                                            </div><div class="'+this.getClassNames("-expression-container")+'">                                                                <div class="'+this.getClassNames("-expression")+'" title="{{displayexpression}}">{{{expression}}}</div>											</div>                                            <div class="'+this.getClassNames("-actions")+'">                                                <div class="actions-inline-container">                                                    <div class="action-container single-action hidden">                                                        <div class="action-icon-wrapper"><span class="fonticon fonticon-2x"></span></div>                                                    </div>                                                    <div class="action-container actions-inline-dotted hidden">                                                        <div class="action-icon-wrapper"><span class="fonticon fonticon-2x fonticon-down-open"></span></div>                                                    </div>                                                </div>                                            </div>                                        </div>                                    '}});return a});define("DS/CfgBaseUX/scripts/ConfigurationFeatureCriteria",["UWA/Data","DS/WebappsUtils/WebappsUtils","i18n!DS/CfgBaseUX/assets/nls/CfgBaseUX","DS/EffectivityWebExternalJS/scripts/CriteriaLibs","DS/EffectivityWebExternalJS/scripts/tags","DS/EffectivityWebExternalJS/scripts/jQuery","css!DS/UIKIT/UIKIT.css","css!DS/CfgBaseUX/styles/Criteria"],function(e,d,b){var c={init:function(m,l,g,h){this.showOptions=h;this.ImageBank={defaultImgUrl:d.getWebappsAssetUrl("CfgBaseUX","icons/DefaultImage.png"),exclaimationmarkImgUrl:d.getWebappsAssetUrl("CfgBaseUX","icons/ExclamationMark.png"),chosenbyuserImgUrl:d.getWebappsAssetUrl("CfgBaseUX","icons/ChosenByUser.png"),availableImgUrl:d.getWebappsAssetUrl("CfgBaseUX","icons/Available.png"),checkImgUrl:d.getWebappsAssetUrl("CfgBaseUX","icons/CheckIcon.png"),rejectImgUrl:d.getWebappsAssetUrl("CfgBaseUX","icons/RejectIcon.png"),radioavailableImgUrl:d.getWebappsAssetUrl("CfgBaseUX","icons/RadioAvailable.png"),radioselectedImgUrl:d.getWebappsAssetUrl("CfgBaseUX","icons/RadioSelected.png"),radiodismissedImgUrl:d.getWebappsAssetUrl("CfgBaseUX","icons/RadioDismissed.png")};this.ColorBank={selectedColor:"aliceblue",unselectedcolor:"white"};this.iModelName=l.replace(" ","");this.parentDiv=$("[id = '"+m+"']");this.tooltipTimeout=null;this.tags={};this.component={};this.data=g;var n=location.pathname.substring(0,location.pathname.indexOf("/",1));var j=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");var i=j.concat(n);var f=i+"/resources/dictionary/class/Configuration Feature/getAttributes?inherited=true ";var k=this;k.nlsAttributesList={};k.nlsAttributesList.Attributes=[];e.request(f,{method:"GET",type:"application/ds-json",async:true,timeout:60000,processData:false,onComplete:function(o){var p=JSON.parse(o);k.nlsAttributesList=p},onFailure:function(o){}});this.initialiseComponent()},showHideFeatureOptionImages:function(f){if(f==true){$(".FeatureImg").each(function(){$(this).parent().show()})}else{if(f==false){$(".FeatureImg").each(function(){$(this).parent().hide()})}}},addTooltip:function a(f){var o=f.data.iModelName;if(f.type=="mouseenter"){var l=$('[elementid ~= "'+o+'_maindiv"]').scrollTop();var k=$(this).position();var r="";var s=$("#"+o+"_tooltip");s.css("top",k.top+10);s.css("left",k.left+10);var r="";var g=$(this).attr("elementid");g=g.replace("questionmark","featuretable");var j=$('[elementid ~= "'+g+'"]');if(j.length!=0){for(var m=0;m<f.data.data.features.length;m++){if(g==o+"_featuretable_"+f.data.data.features[m].id){for(var p in f.data.data.features[m].attributes){if(p=="toJSONString"||p=="find"){continue}var n=f.data.data.features[m].attributes[p];if(n==null){n=""}var q="";for(var h=0;h<f.data.nlsAttributesList.Attributes.length;h++){var i=f.data.nlsAttributesList.Attributes[h].Name.replace(/\s/g,"");i=i.replace("-","");if(i==p){q=f.data.nlsAttributesList.Attributes[h].NLS;break}}if(q==""){q=p}r+='<font font-family="calibri" color="lightyellow">'+q+"</font> : ";if(n=="Preliminary"){n=b.CF_Preliminary}if(n=="Review"){n=b.CF_Review}if(n=="Release"){n=b.CF_Release}if(n=="Obsolete"){n=b.CF_Obsolete}if(n=="Single"){n=b.CF_Single}if(n=="Multiple"){n=b.CF_Multiple}if(n=="Blank"){n=b.CF_Blank}r+='<font style="color:white;">'+n+"</font><br>"}break}}}else{g=g.replace("featuretable","optiontable");for(var m=0;m<f.data.data.features.length;m++){for(var h=0;h<f.data.data.features[m].options.length;h++){if(g==o+"_optiontable_"+f.data.data.features[m].options[h].id){for(var p in f.data.data.features[m].options[h].attributes){if(p=="toJSONString"||p=="find"){continue}var n=f.data.data.features[m].options[h].attributes[p];if(n==null){n=""}r+='<font font-family="calibri" color="lightyellow">'+p+"</font> : ";r+='<font style="color:white;">'+n+"</font><br>"}break}}}}s.html('<font color="lightyellow">'+r+"</font>");clearTimeout(f.data.data.tooltipTimeout);f.data.data.tooltipTimeout=setTimeout(function(){s.show()},1000)}if(f.type=="mouseleave"||f.type=="mouseover"){var s=$("#"+o+"_tooltip");clearTimeout(f.data.data.tooltipTimeout);s.hide()}},resetSelection:function(){var f=this.iModelName;$('[elementid ^= "'+f+'_featuretable_"]').css("background-color",this.ColorBank.unselectedcolor);$('[elementid ^= "'+f+'_featuretable_"]').find("td").css("background-color",this.ColorBank.unselectedcolor);$('[id *= "'+f+'_tag_"]').css("background-color",this.ColorBank.unselectedcolor);$('[id *= "'+f+'_tagsinput"]').css("background-color",this.ColorBank.unselectedcolor);$('[id *= "'+f+'_addTag"]').css("background-color",this.ColorBank.unselectedcolor)},setSelection:function(h){var g=this.iModelName;$('[elementid ~= "'+h+'"]').css("background-color",this.ColorBank.selectedColor);$('[elementid ~= "'+h+'"]').find("td").css("background-color",this.ColorBank.selectedColor);h=h.replace("featuretable_","tag_");var f=h+"_tagsinput";$('[id ~= "'+h+'_tag"]').css("background-color",this.ColorBank.selectedColor);h=h+"_addTag";$('[id *= "'+h+'"]').css("background-color",this.ColorBank.selectedColor);$('[id ~= "'+f+'"]').css("background-color",this.ColorBank.selectedColor)},collapseAllOptionPanels:function(){$('[elementid ^= "'+this.iModelName+'_optiondiv_"]').hide()},expandAllOptionPanels:function(){$('[elementid ^= "'+this.iModelName+'_optiondiv_"]').show()},featureNodeClicked:function(i){var j=$(this).attr("elementid");i.data.resetSelection();if($(this).parent().attr("draggable")=="false"){return}i.data.setSelection(j);var h=j.replace("featuretable_","optiondiv_");if($('[elementid ~= "'+h+'"]').is(":visible")){$('[elementid ~= "'+h+'"]').hide()}else{$('[elementid ~= "'+h+'"]').show()}var f=$('[elementid ~= "'+h+'"]');var g=f.find(".optiontablenode");g.show()},questionmarkHandler:function(f){f.stopPropagation()},onMaindivClicked:function(){$(".autocomplete-suggestions").hide()},onMaindivScrolled:function(){$(".autocomplete-suggestions").hide()},addEvents:function(){var f=this.iModelName;$('[elementid ^= "'+f+'_featuretable_"]').on("click",this,this.featureNodeClicked);$('[elementid ^= "'+f+'_questionmark_"]').on("click",this,this.questionmarkHandler);$('[elementid ^= "'+f+'_questionmark_"]').on("mouseenter mouseleave",this,this.addTooltip);$('[elementid ~= "'+f+'_maindiv"]').on("click",this.onMaindivClicked);$('[elementid ~= "'+f+'_maindiv"]').on("scroll",this.onMaindivScrolled)},buildAttributesNodes:function(i,f){var h="";for(var g in i.attributes){if(g=="toJSONString"||g=="find"||g=="layoutData"){continue}var j=i.attributes[g];if(j==null){j=""}if(j=="Preliminary"){j=b.CF_Preliminary}if(j=="Review"){j=b.CF_Review}if(j=="Release"){j=b.CF_Release}if(j=="Obsolete"){j=b.CF_Obsolete}if(j=="Single"){j=b.CF_Single}if(j=="Multiple"){j=b.CF_Multiple}if(j=="Blank"){j=b.CF_Blank}h+='<div class="attribute" attributename="'+g+'">'+j+"</div>"}$(h).appendTo($(f))},buildFeatureNodes:function(n,f){var o="";var x=this.iModelName;var g=document.createElement("div");g.setAttribute("elementid",x+"_featurediv_"+n.id);g.setAttribute("idFeature",n.id);g.setAttribute("featureName",n.name);g.setAttribute("container","noContainer");g.setAttribute("draggable","true");g.setAttribute("logicalid",n.logicalid);var y=n.attributes.Current;if(y==="undefined"){y=""}if(y=="Obsolete"){g.setAttribute("draggable","false");g.style.opacity=0.4;g.className="featureName"}else{g.className="featureName draggableitem"}f.appendChild(g);var r=document.createElement("table");r.className="FeatureNode";r.setAttribute("elementid",x+"_featuretable_"+n.id);var C=document.createElement("tr");r.appendChild(C);var h=document.createElement("td");h.style.width="16px";h.style.verticalAlign="middle";h.setAttribute("rowspan","2");var D=document.createElement("img");D.setAttribute("src",this.ImageBank.exclaimationmarkImgUrl);D.setAttribute("elementid",x+"_exclamationmark_"+n.id);D.className="ExclamationMarkImg";if(n.selectionCriteria=="Must"){D.style.display="block"}else{D.style.display="none"}h.appendChild(D);C.appendChild(h);var q=document.createElement("td");q.style.width="52px";q.style.verticalAlign="52px";q.setAttribute("rowspan","2");var w=document.createElement("img");if(n.image==""||n.image==null){w.setAttribute("src",this.ImageBank.defaultImgUrl)}else{w.setAttribute("src",n.image)}w.className="FeatureImg";w.setAttribute("elementid",x+"_featureimg_"+n.id);q.appendChild(w);C.appendChild(q);var s=document.createElement("td");s.style.verticalAlign="top";s.setAttribute("colspan","4");var t=document.createElement("div");t.setAttribute("name",n.name);t.setAttribute("elementid",x+"_name_"+n.id);t.className="FeatureNames";var z=document.createElement("div");z.style.cssFloat="left";z.style.overflow="hidden";z.style.textOverflow="ellipsis";z.style.maxWidth="90%";z.innerHTML=n.displayValue;var A=document.createElement("div");A.setAttribute("elementid",x+"_questionmark_"+n.id);A.className="QuestionMarkIcon fonticon fonticon-help-circled";A.style.marginTop="-5px";A.style.fontSize="small";A.style.cursor="help";A.style.verticalAlign="middle";A.style.color="lightblue";t.appendChild(z);t.appendChild(A);s.appendChild(t);C.appendChild(s);this.buildAttributesNodes(n,s);var F=document.createElement("tr");var l=document.createElement("td");l.setAttribute("colspan","4");F.appendChild(l);r.appendChild(F);var B=document.createElement("table");var E=document.createElement("tr");var m=document.createElement("td");m.style.verticalAlign="top";m.style.paddingLeft="10px";var v=document.createElement("input");v.className="tagsInputText";v.setAttribute("id",x+"_input_"+n.id);v.setAttribute("type","text");v.setAttribute("selectiontype",n.selectionType);v.setAttribute("placeholder","Enter Options..");var k=document.createElement("td");k.style.width="auto";var u=document.createElement("input");u.setAttribute("id",x+"_tag_"+n.id);u.setAttribute("type","text");u.className="tags";l.appendChild(B);B.appendChild(E);E.appendChild(m);m.appendChild(v);E.appendChild(k);k.appendChild(u);var j=document.createElement("div");j.setAttribute("elementid",x+"_optiondiv_"+n.id);var p=document.createElement("div");p.setAttribute("elementid","optiontable");p.style.overflowY="auto";p.style.overflowX="hidden";p.style.width="100%";j.appendChild(p);g.appendChild(r);g.appendChild(j);var i="";if(this.showOptions==true){this.buildOptionNodes(n,p)}},buildOptionNodes:function(k,q){var j="";var o=this.ImageBank.availableImgUrl;if(k.selectionType=="Single"){o=this.ImageBank.radioavailableImgUrl}var r=this.iModelName;for(var l=0;l<k.options.length;l++){var v=document.createElement("table");v.setAttribute("elementid",r+"_optiontable_"+k.options[l].id);v.className="optiontablenode";v.style.width="99%";var f=document.createElement("tr");var h=document.createElement("td");h.style.width="32px";var i=document.createElement("td");i.style.width="16px";var m=document.createElement("img");m.setAttribute("elementid",r+"_userimg_"+k.options[l].id);m.className="ExclamationMarkImg";m.style.display="none";var g=document.createElement("td");g.style.width="16px";var s=document.createElement("img");s.setAttribute("elementid",r+"_checkimg_"+k.options[l].id);s.className="ExclamationMarkImg";s.setAttribute("type",k.selectionType);s.setAttribute("parentname",k.name);s.setAttribute("parentid",k.id);s.setAttribute("src",o);var n=document.createElement("td");n.style.width="52px";var x=document.createElement("img");x.setAttribute("elementid",r+"_img_"+k.options[l].id);if(k.options[l].image==""||k.options[l].image==null){x.setAttribute("src",this.ImageBank.defaultImgUrl)}else{x.setAttribute("src",k.options[l].image)}x.className="FeatureImg";var w=document.createElement("td");w.style.verticalAlign="top";var p=document.createElement("div");p.setAttribute("elementid",r+"_name_"+k.options[l].id);p.setAttribute("name",k.options[l].name);p.className="FeatureNames";var t=document.createElement("div");t.style.cssFloat="left";t.innerHTML=k.options[l].displayValue;var u=document.createElement("div");u.setAttribute("elementid",r+"_questionmark_"+k.options[l].id);u.className="QuestionMarkIcon fonticon fonticon-help-circled";u.style.marginTop="-5px";u.style.fontSize="small";u.style.cursor="help";u.style.verticalAlign="middle";u.style.color="lightblue";p.appendChild(t);p.appendChild(u);w.appendChild(p);n.appendChild(x);g.appendChild(s);i.appendChild(m);f.appendChild(h);f.appendChild(i);f.appendChild(g);f.appendChild(n);f.appendChild(w);v.appendChild(f);q.appendChild(v);this.buildAttributesNodes(k.options[l],w)}},buildSearchComponent:function(q){var o=this.iModelName;var j=document.createElement("div");j.style.cssFloat="right";var s=document.createElement("table");var i=document.createElement("tbody");var k=document.createElement("tr");var p=document.createElement("td");p.style.width="130px";var l=document.createElement("select");l.setAttribute("elementid",o+"_general_Attributes_List_Combo");l.className="selectionattribute";l.style.width="0px";p.appendChild(l);var f=document.createElement("td");f.style.width="130px";var g=document.createElement("input");g.setAttribute("elementid",o+"_general_Searchinput");g.className="searchText";g.setAttribute("placeholder",b.CF_search);g.setAttribute("type","text");f.appendChild(g);var r=document.createElement("td");r.style.width="24px";this.clearspan=document.createElement("span");this.clearspan.setAttribute("elementid",o+"_general_clearButton");this.clearspan.className="fonticon fonticon-cancel-circled clearButton";r.appendChild(this.clearspan);var h=document.createElement("td");var n=document.createElement("div");n.className="fonttransition";n.style.width="32px";n.style.height="32px";n.style.borderRadius="4px";n.style.marginLeft="-5px";var m=document.createElement("span");m.setAttribute("elementid",o+"_general_Searchinput_Img");m.className="fonticon fonticon-search searchButton";h.appendChild(n);n.appendChild(m);k.appendChild(p);k.appendChild(f);k.appendChild(r);k.appendChild(h);i.appendChild(k);s.appendChild(i);j.appendChild(s);q.appendChild(j)},getAttributesList:function(){var f=[];for(var i=0;i<this.data.features.length;i++){var h=this.data.features[i];for(var g in h.attributes){if(g=="toJSONString"||g=="find"||g=="layoutData"){continue}f.push({text:g,value:g})}if(this.showOptions==true){for(var g in h.options[0].attributes){if(g=="toJSONString"||g=="find"||g=="layoutData"){continue}var j=0;for(var i=0;i<f.length;i++){if(g==f[i].text){j=1;break}}if(j==0){f.push({text:g,value:g})}}break}}var j=0;for(var i=0;i<f.length;i++){if("displayValue"==f[i].text){j=1}}if(j==0){f.push({text:"displayValue",value:"displayValue"})}return f},buildComponent:function(){var g="";var o=this.iModelName;var i=document.createElement("table");i.style.width="100%";var l=document.createElement("tr");var j=document.createElement("td");j.style.paddingRight="5px";j.style.paddingLeft="5px";j.style.paddingTop="5px";j.style.paddingBottom="5px";l.appendChild(j);this.buildSearchComponent(j);var k=document.createElement("tr");var h=document.createElement("td");var f=document.createElement("div");f.style.width="100%";f.style.overflowY="auto";f.style.overflowX="hidden";f.setAttribute("elementid",o+"_maindiv");var n=document.createElement("div");n.className="tooltipEC";n.setAttribute("id",o+"_tooltip");h.appendChild(f);f.appendChild(n);for(var m=0;m<this.data.features.length;m++){var p=this.data.features[m];if(p.options.length>0){this.buildFeatureNodes(p,f)}}k.appendChild(h);i.appendChild(l);i.appendChild(k);return i},initialiseGenericSearchComponent:function(){var j=this.iModelName;$(this.clearspan).hide();function k(){if($('[elementid ~= "'+j+'_general_Searchinput"]').is(":visible")==false){$('[elementid ~= "'+j+'_general_Searchinput"]').show()}else{$('[elementid ~= "'+j+'_general_Searchinput"]').hide()}}$('[elementid ^= "'+j+'_general_Searchinput_Img"]').on("click",k);$('[elementid ~= "'+j+'_general_Attributes_List_Combo"]').hide();$('[elementid ~= "'+j+'_general_Searchinput"]').hide();$('[elementid ~= "'+j+'_general_clearButton"]').hide();var f=this.getAttributesList();$.each(f,function(m,n){var l=$('[elementid ~= "'+j+'_general_Attributes_List_Combo"]');l.append(new Option(n.text,n.value))});$('[elementid ~= "'+j+'_general_Attributes_List_Combo"]').val("displayValue");$('[elementid ~= "'+j+'_general_Attributes_List_Combo"]').hide();$('[elementid ~= "'+j+'_general_clearButton"]').on("click",g);var h=this;function g(){$(h.clearspan).hide();$('[elementid ~= "'+j+'_general_Searchinput"]').val("");h.collapseAllOptionPanels();var l=$('[elementid ^= "'+j+'_featurediv_"]');l.show();l.each(function(){var n=$(this).find('[elementid ^= "'+j+'_featuretable_"]').find(".attribute");n.each(function(){$(this).removeClass("attributebold")})});var m=$('[elementid ^= "'+j+'_optiondiv_"]');m.each(function(){var n=$(this).find(".optiontablenode");n.show()});m.each(function(){var n=$(this).find(".optiontablenode");var o=$(this);n.each(function(){var p=$(this).find(".attribute");p.each(function(){$(this).removeClass("attributebold")})})})}function i(m){var l=$(this).val();l=l.toUpperCase();if(l==""){$(h.clearspan).hide()}else{$(h.clearspan).show()}h.collapseAllOptionPanels();var n=$('[elementid ^= "'+j+'_featurediv_"]');n.show();var o=$('[elementid ^= "'+j+'_optiondiv_"]');o.each(function(){var p=$(this).find(".optiontablenode");p.show()});n.each(function(){var r="";var q=$(this).find('[elementid ^= "'+j+'_featuretable_"]').find(".attribute");var p=0;q.each(function(){var s=$(this).text();$(this).removeClass("attributebold");s=s.toUpperCase();if(s.indexOf(l)!=-1){p=1;if(l!=""){$(this).addClass("attributebold")}}});if(p==0){var r=$(this).find('[elementid ^= "'+j+'_featuretable_"]').find(".FeatureNames").text();r=r.toUpperCase();if(r.indexOf(l)!=-1){p=1}}if(p==0){$(this).hide()}});var o=$('[elementid ^= "'+j+'_optiondiv_"]');o.each(function(){var p=$(this).find(".optiontablenode");var q=$(this);p.each(function(){var t="";var s=$(this).find(".attribute");var r=0;s.each(function(){var u=$(this).text();$(this).removeClass("attributebold");u=u.toUpperCase();if(u.indexOf(l)!=-1){r=1;if(l!=""){$(this).addClass("attributebold")}}});if(r==0){var t=$(this).find(".FeatureNames").text();t=t.toUpperCase();if(t.indexOf(l)!=-1){r=1}}if(r==0){$(this).hide()}else{$(this).parent().parent().parent().show();if(l!=""){q.show()}}})})}$('[elementid ~= "'+j+'_general_Searchinput"]').on("input",i)},initialiseComponent:function(){var f=this.buildComponent();var i=this.iModelName;component=$(f).appendTo(this.parentDiv);var g=$('[id ^= "'+i+'_tag_"]');var j=$('[id ^= "'+i+'_input_"]');if(this.showOptions==false){g.hide();j.hide()}else{g.tagsInput({width:"auto",iModelName:this.iModelName,iJson:this.data,iImageBank:this.ImageBank})}this.addEvents();this.collapseAllOptionPanels();var h=$("#"+i+"_tooltip");h.hide();this.initialiseGenericSearchComponent()}};return c});define("DS/CfgBaseUX/scripts/CfgFeatureOptionsView",["UWA/Class/View","DS/DataGridView/DataGridView","text!DS/CfgBaseUX/assets/CfgFeatureOptionToolbar.json","i18n!DS/CfgBaseUX/assets/nls/CfgBaseUX","DS/Core/PointerEvents","DS/Controls/Toggle","DS/CfgBaseUX/scripts/CfgDialog"],function(c,b,h,a,g,i,e){var f=true;var j=c.extend({isUpdatedbyMe:false,init:function(k){this._parent(k)},render:function(){this.featureOptionGridView=new b({treeDocument:this.options.treeDocument,columns:this.createDictionaryColumn(),defaultColumnDef:{width:"auto",typeRepresentation:"string",editableFlag:true,editionPolicy:""}});h=JSON.parse(h);h.entries[0].dataElements.tooltip=a.CFG_Search_Features;h=JSON.stringify(h);if(window.__karma__===undefined){this.toolbar=this.featureOptionGridView.setToolbar(h)}this.registerToolbarEvents();j.onFeatureOptionSelectionChange=this.options.onFeatureOptionSelectionChange;this.featureOptionGridView.showEditableFeedbackFlag=false;this.featureOptionGridView.layout.rowsHeader=false;this.featureOptionGridView.onContextualEvent=function(k){return null};return this},createDictionaryColumn:function(){var k=[{text:a.CFG_Names,dataIndex:"tree",typeRepresentation:"string",alwaysVisibleFlag:"true",width:"270",minWidth:"270",pinned:"left",},{text:a.CFG_Type,dataIndex:"type",typeRepresentation:"string",alwaysVisibleFlag:"true",minWidth:"270"},{text:a.CFG_Selection,dataIndex:"checkbx",typeRepresentation:"boolean",alwaysVisibleFlag:"true",setCellValue:this.setCellValue,allowResetToUndefinedByUIFlag:false,editionPolicy:"EditionInPlace",width:"70",minWidth:"50",pinned:"right",resizableFlag:"false",}];return k},setCellValue:function(l){var k=true;if(l.nodeModel._options.grid.checkbx===true){if(f==true){d(l);return}l.nodeModel.setAttribute("checkbx",false);j.onFeatureOptionSelectionChange(l.nodeModel._options.data,true);k=false}else{l.nodeModel.setAttribute("checkbx",true);j.onFeatureOptionSelectionChange(l.nodeModel._options.data,false)}var n=l.nodeModel.getAllDescendants();if(n.length!=0){n.forEach(function(o){o.setAttribute("checkbx",k)})}else{var n=l.nodeModel.getParent().getAllDescendants();if(n.length!=0){var m=true;n.forEach(function(o){if(o._options.grid.checkbx===true){m=false}})}if(m===true){l.nodeModel.getParent().setAttribute("checkbx",false)}else{l.nodeModel.getParent().setAttribute("checkbx",true)}}},selectColumns:function(l){this.isUpdatedbyMe=true;this.options.treeDocument.prepareUpdate();var n=this.options.treeDocument.getAllDescendants();var k={};for(var m=0;m<l.length;m++){k[l[m].dataIndex]=true;for(childrenCount=0;l[m].children!=undefined&&childrenCount<l[m].children.length;childrenCount++){k[l[m].children[childrenCount].dataIndex]=true}}for(var m=0;m<n.length;m++){n[m].setAttribute("checkbx",false);if(k[n[m].options.data.self.physicalID]===true){n[m].setAttribute("checkbx",true)}}this.options.treeDocument.pushUpdate();this.isUpdatedbyMe=false},cssAdjustmentsForLayout:function(k){if(k===false){this.featureOptionGridView.getContent(".wux-layouts-collectionview").setStyle("top","33px")}else{this.featureOptionGridView.getContent(".wux-layouts-collectionview").setStyle("top","48px")}},registerToolbarEvents:function(){if(this.toolbar===undefined){return}var k=this;this.toolbar.addEventListener("liveChange",function(s){if(s.dsModel._properties.value.dirty==true){k.options.treeDocument.prepareUpdate();k.options.treeDocument.getAllDescendants().forEach(function(t){t.show()});k.options.treeDocument.getRoots().forEach(function(t){t.expandAll()});var o=s.dsModel._properties.value.value;if(o==""){k.options.treeDocument.pushUpdate();return}var q=k.options.treeDocument.getRoots();for(var n=0;n<q.length;n++){var p=q[n];var m=p.getAllDescendants();if(p._options.grid.name.toUpperCase().indexOf(o.toUpperCase())!=-1){continue}var l=0;for(var r=0;r<m.length;r++){if(m[r]._options.grid.name.toUpperCase().indexOf(o.toUpperCase())===-1){m[r].hide();l++}}if(l==m.length){p.hide()}}}k.options.treeDocument.pushUpdate()})}});function d(p){var m=function(){p.nodeModel.setAttribute("checkbx",false);j.onFeatureOptionSelectionChange(p.nodeModel._options.data,true);_value=false;var r=p.nodeModel.getAllDescendants();if(r.length!=0){r.forEach(function(s){s.setAttribute("checkbx",_value)})}else{var r=p.nodeModel.getParent().getAllDescendants();if(r.length!=0){var q=true;r.forEach(function(s){if(s._options.grid.checkbx===true){q=false}})}if(q===true){p.nodeModel.getParent().setAttribute("checkbx",false)}else{p.nodeModel.getParent().setAttribute("checkbx",true)}}l.closeDialog()}.bind(p);var o=function(){p.nodeModel.setAttribute("checkbx",true);l.closeDialog()}.bind(p);var n={dialogue:{header:a.CFG_Remove_Column_Heading,buttonArray:[{label:a.Ok,handler:m,className:"primary"},{label:a.Cancel,handler:o,className:"default"}],target:widget.body,object:null,postCrossHandler:o}};var l=new e(n);l.render();l.container.setStyle("overflow","auto");l.container.setHTML(a.CFG_Remove_Column_Warning+"<br><br>"+a.CFG_Remove_Column_Question+"<br>");var k=new i({label:a.CFG_Remove_Column_Preference_Warning});k.addEventListener("change",function(q){if(q.dsModel.checkFlag==true){f=false}else{f=true}});k.inject(l.container)}return j});define("DS/CfgBaseUX/scripts/CfgUtility",["DS/WAFData/WAFData","DS/i3DXCompassServices/i3DXCompassServices","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/CfgBaseUX/scripts/CfgData","DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen","DS/PlatformAPI/PlatformAPI","i18n!DS/CfgBaseUX/assets/nls/CfgBaseUX"],function(f,a,b,e,c,d,h,g){var i={checkProperties:function(j){var k=new Promise(function(q,p){var n=function(s){p(s)};var r=function(s){q(s)};var m="/resources/modeler/configuration/definitionServices/checkProperties";var l={version:"1.0",types:j};var o=JSON.stringify(l);i.makeWSCall(m,"POST","enovia","application/json",o,r,n,true)});return k},isChangeControlled:function(j){var k=new Promise(function(s,t){var m=function(u){t(u)};var r=function(u){if(u&&u.objectListChangeControlled[0]){s(u.objectListChangeControlled[0].changeControlValue)}};var o="pid:"+j;var q=[];q.push(o);var p={ObjectsListForGetChangeControl:q};var n=JSON.stringify(p);var l="/resources/modeler/change/changecontrol";i.makeWSCall(l,"POST","enovia","application/json",n,r,m,true)});return k},sendNotificationWebInWin:function(j){if(enoviaServerFilterWidget.mode=="powerBy"){h.publish("webinwin:web:notification",JSON.stringify(j))}if(enoviaServerFilterWidget.mode=="Native"){var k=j.eventName;var l=JSON.stringify(j);if(typeof dscef!=="undefined"){dscef.sendString(k+"="+l)}else{if(typeof CATCefSendString!=="undefined"){CATCefSendString(k+"="+l)}}}},unsetEffectivity:function(j){var k=new Promise(function(q,p){var m=function(s){p(s)};var r=function(s){q(s)};var n={version:"1.0",pid:j.instanceID,unset:[j.domain],};var l="/resources/modeler/configuration/authoringServices/unsetFilterableObjectInfo";var o=JSON.stringify(n);i.makeWSCall(l,"POST","enovia","json",o,r,m,true,j.wsOptions)});return k},setMultipleFilterableObjectInfo:function(j){var k=new Promise(function(q,p){var m=function(s){p(s)};var r=function(s){q(s)};var n={version:j.version,expression:{output:{withDescription:"YES",domains:j.domain,view:j.view},contentFormat:"XML",expressionList:j.expressionList,dictionary:{version:"0.1",idList:[{pid:"pid1"},{pid:"pid2"}],format:"xml",content:"< dictionary content for the effectivity definitions>"}}};var l="/resources/modeler/configuration/authoringServices/setMultipleFilterableObjectInfo?traces=0&perfo=0 HTTP/1.1";var o=JSON.stringify(n);i.makeWSCall(l,"POST","enovia","application/json",o,r,m,true,j.wsOptions)});return k},pasteFilterableObjectInfo:function(j){var k=new Promise(function(q,p){var m=function(s){p(s)};var r=function(s){q(s)};var n={version:j.version,expression:{output:{domains:j.domain,view:j.view,withDescription:j.withDescription,targetFormat:j.targetFormat},contentFormat:"XML",expressionList:j.expressionList,dictionary:{version:"0.1",idList:[{pid:"pid1"},{pid:"pid2"}],format:"xml",content:"< dictionary content for the effectivity definitions>"}}};if(j.version=="1.0"){n.expression.instanceIdList=j.instanceIdList}var l="/resources/modeler/configuration/authoringServices/pasteFilterableObjectInfo?traces=0&perfo=0 HTTP/1.1";var o=JSON.stringify(n);i.makeWSCall(l,"POST","enovia","application/json",o,r,m,true,j.wsOptions)});return k},refreshEffectvity:function(l,p,j){var n=this;var o=[];for(var m=0;m<l.length;m++){o.push(l[m].options.relationid)}var k={version:"1.0",targetFormat:"TXT",withDescription:"YES",view:j,domains:p,pidList:"["+o+"]"};this.getMultipleFilterableObjectInfo(k).then(function(s){for(var r=0;r<l.length;r++){var w=l[r].options.relationid;var u=" ";var t=" ";var q=" ";var v=" ";if(s.expressions[w].status=="SUCCESS"){l[r].prepareUpdate();if(s.expressions[w].hasEffectivity=="NO"){t=g.CFG_EFFECTIVITY_NO;l[r].updateOptions({grid:{VariantEffectivity:u,CurrentEvolutionEffectivity:q,ProjectedEvolutionEffectivity:v}})}else{if(s.expressions[w].hasEffectivity=="YES"){t=g.CFG_EFFECTIVITY_YES}}l[r].updateOptions({grid:{Effectivity:t}});if(s.expressions[w].content!==null&&s.expressions[w].content!==undefined){if(p==="Variant"){if(s.expressions[w].content.Variant!==null&&s.expressions[w].content.Variant!==undefined){u=s.expressions[w].content.Variant;u=u==null||""?" ":u.replace(/[\r\n]+/g," ")}l[r].updateOptions({grid:{VariantEffectivity:u}})}else{if(p==="Evolution"&&s.expressions[w].content.Evolution!==null&&s.expressions[w].content.Evolution!==undefined){if(j==="Current"){q=s.expressions[w].content.Evolution.Current;q=q==null||""?" ":q.replace(/[\r\n]+/g," ");l[r].updateOptions({grid:{CurrentEvolutionEffectivity:q}})}else{if(j==="Projected"){v=s.expressions[w].content.Evolution.Projected;v=v==null||""?" ":v.replace(/[\r\n]+/g," ");l[r].updateOptions({grid:{ProjectedEvolutionEffectivity:v}})}else{if(j==="All"){v=s.expressions[w].content.Evolution.Projected;q=s.expressions[w].content.Evolution.Current;v=v==null||""?" ":v.replace(/[\r\n]+/g," ");q=q==null||""?" ":q.replace(/[\r\n]+/g," ");l[r].updateOptions({grid:{ProjectedEvolutionEffectivity:v,CurrentEvolutionEffectivity:q}})}}}}}}}}l.forEach(function(x){x.pushUpdate()})},function(q){return Promise.reject(q)})},getMultipleFilterableObjectInfo:function(j){var k=new Promise(function(q,p){var n=function(s){console.log(s);p(s)};var r=function(s){q(s)};var m="/resources/modeler/configuration/navigationServices/getMultipleFilterableObjectInfo";var l={version:j.version,output:{targetFormat:j.targetFormat,withDescription:j.withDescription,view:j.view,domains:j.domains},pidList:"["+j.pidList+"]"};var o=JSON.stringify(l);i.makeWSCall(m,"POST","enovia","application/json",o,r,n,true,null)});return k},getConfiguredObjectInfo:function(j){var k=new Promise(function(o,n){var m=function(q){console.log(q);n(q)};var p=function(q){o(q)};var l="/resources/modeler/configuration/navigationServices/getConfiguredObjectInfo/pid:"+j.parentID+"?cfgCtxt=1&enabledCriteria=1";i.makeWSCall(l,"GET","enovia","application/ds-json","",p,m,true)});return k},checkMilestoneActivation:function(){var k=this;var j=new Promise(function(q,p){var m=function(s){p(s)};var r=function(s){var t="Enabled";s.settings.forEach(function(u){if(u.settingName=="milestoneActivation"&&u.value=="disabled"){t="Disabled"}});q(t)};var o={version:"1.0",settings:["milestoneActivation"]};var n=JSON.stringify(o);var l="/resources/modeler/configuration/settingsServices/getConfigurationSettings?traces=0&perfo=0";k.makeWSCall(l,"POST","enovia","application/json",n,r,m,true)});return j},checkDecouplingActivation:function(){var j=this;var k=new Promise(function(q,p){var m=function(s){p(s)};var r=function(t){var s={decoupling:true,unit:true,contextualDate:true,};t.settings.forEach(function(u){if(u.settingName=="decoupleVariantEvolution"&&u.value=="disabled"){s.decoupling=false}if(u.settingName=="unitActivation"&&u.value=="disabled"){s.unit=false}if(u.settingName=="contextualDateActivation"&&u.value=="disabled"){s.contextualDate=false}});q(s)};var o={version:"1.0",settings:["DecoupleVariantEvolution","unitActivation","contextualDateActivation"]};var l="/resources/modeler/configuration/settingsServices/getConfigurationSettings?traces=0&perfo=0";var n=JSON.stringify(o);j.makeWSCall(l,"POST","enovia","application/json",n,r,m,true)});return k},onSCCallBack:function(j){response=j.SecurityContext;if(!response||response==null){CAUtility.error(CA_NLS.ECM_CA_Use_Preferences)}else{if(j!=null&&j!=""&&j.hasOwnProperty("SecurityContext")){var k="";if(j.SecurityContext.indexOf("ctx::")!=0){k="ctx::"}response=k+j.SecurityContext}console.log("Setting security Context: "+response);enoviaServerFilterWidget.mySecurityContext=response;response=response.replace("ctx::","");enoviaServerFilterWidget.myRole=response.substring(0,response.indexOf("."));enoviaServerFilterWidget.collabspace=response.substring(response.lastIndexOf(".")+1,response.length)}},populateChangeActionAccess:function(j){var k=this;var l=new Promise(function(q,p){var n="/resources/modeler/change/access/pid:"+j;var o="";var m=function(r){e.ChangeAccessDetails=r;q(r)};k.makeWSCall(n,"GET","enovia","application/json",o,m,p,true)});return l},populateSecurityContext:function(){var j=this;var k=new Promise(function(p,o){var m="/resources/pno/person/getsecuritycontext";var n="";var l=function(q){j.onSCCallBack(q);p(q)};j.makeWSCall(m,"GET","enovia","application/json",n,l,o,true)});return k},populateDisplayExpressionXSLT:function(){var j=this;var k=new Promise(function(p,o){var m="/resources/modeler/configuration/navigationServices/getConfiguredExpressionXSLT";var n="";var l=function(q){e.displayExpressionXSLT=q.xslt.content;p(q)};j.makeWSCall(m,"GET","enovia","application/json",n,l,o,true)});return k},showwarning:function(k,j){window.notifs=c;d.setNotificationManager(window.notifs);var l={level:j,title:"",subtitle:k,message:"",sticky:false};window.notifs.addNotif(l)},getDisplayExpressionUsingXSLT:function(n){var l=null;var m=null;n=n.replace(/&(?!amp;)/g,"&amp;");if("ActiveXObject" in window){var q=new ActiveXObject("Msxml2.DOMDocument.3.0");q.async=false;q.resolveExternals=false;q.loadXML(n);var j=new ActiveXObject("Msxml2.XSLTemplate");var k=new ActiveXObject("Msxml2.FreeThreadedDOMDocument");k.async=false;k.loadXML(e.displayExpressionXSLT);j.stylesheet=k;l=j.createProcessor();l.input=q;l.transform();m=l.output;return m}else{var p=new DOMParser();var o=p.parseFromString(e.displayExpressionXSLT,"text/xml");var r=p.parseFromString(n,"text/xml");l=new XSLTProcessor();l.setParameter(null,"CompactView","true");l.importStylesheet(o);m=l.transformToFragment(r,document);return m.textContent}},getChangeUrl:function(m,j){var l={"Change Action":"/resources/modeler/change/changeaction/pid:"+m+"?applicability=1&changeOrder=1",Decision:"/resources/ecm/modeler/decision/pid:"+m+"/getapplicability","Change Order":"/resources/ecm/modeler/changeorder/pid:"+m+"/getapplicability"};var k={"Change Action":"/resources/modeler/change/changeaction/pid:"+m+"?applicability=1",Decision:"/resources/ecm/modeler/decision/pid:"+m+"/setapplicability","Change Order":"/resources/ecm/modeler/changeorder/pid:"+m+"/setapplicability"};if(j=="GET"){return l[e.type]}else{if(j=="PUT"){return k[e.type]}}},populate3DSpaceURL:function(){var j=new Promise(function(n,m){var o="";wMode=enoviaServerFilterWidget.mode;if(wMode=="3DSpace"){if(window.__karma__===undefined){var k=top;while(k&&k.x3DPlatformServices==undefined){if(k.opener){k=k.opener.top}}var l="";if(k&&k.x3DPlatformServices){l=k.x3DPlatformServices;o=k.x3DPlatformServices[0]["3DCompass"]}}}else{o=""}b.getPlatformServices({config:{myAppsBaseUrl:o,userId:"userId",lang:"lang"},onComplete:function(p){for(count=0;count<p.length;count++){if(enoviaServerFilterWidget.tenant==p[count]["platformId"]){enoviaServerFilterWidget.baseURL=p[count]["3DSpace"];enoviaServerFilterWidget.federatedURL=p[count]["3DSearch"]}}n()},onFailure:m})});return j},fillVariantDictionaryWithDisplayName:function(n,r){var s=n;for(var m=0;m<s.Combinations.length;m++){for(var k=0;k<s.Combinations[m].Combination.length;k++){var q=s.Combinations[m].Combination[k].Feature.DescId;var j=this.getDisplayNameOfFeatureOrOption(q,r);if(j!=null){s.Combinations[m].Combination[k].Feature.label=j}for(var o=0;o<s.Combinations[m].Combination[k].Options.length;o++){var p=s.Combinations[m].Combination[k].Options[o].Option.DescId;var l=this.getDisplayNameOfFeatureOrOption(p,r);if(l!=null){s.Combinations[m].Combination[k].Options[o].Option.label=l}}}}return s},getDisplayNameOfFeatureOrOption:function(k,l){for(var j=0;j<l.length;j++){if(l[j].DescId==k){return l[j].DisplayName}}return null},getAttributeValue:function(j,l){var m="";for(var k=0;k<j.length;k++){if(j[k].name==l){m=j[k].value;if(m==null||m=="undefined"){m=""}break}}return m},makeWSCall:function(w,l,u,o,s,r,y,p,z,n){z=z||null;var k=o;if(o&&o=="application/x-www-form-urlencoded"){k="*/*"}var q=enoviaServerFilterWidget.mode;var j="";if(z!=null&&z.isfederated!=undefined){j=enoviaServerFilterWidget.federatedURL+w}else{j=enoviaServerFilterWidget.computeUrl(w)}var t=new Date().getTime();if(j.indexOf("?")==-1){j=j+"?tenant="+enoviaServerFilterWidget.tenant+"&timestamp="+t}else{j=j+"&tenant="+enoviaServerFilterWidget.tenant+"&timestamp="+t}p=typeof p!=="undefined"?p:true;var x=enoviaServerFilterWidget.getSecurityContext();var m="";var v={};v.method=l;v.async=p;v.timeout=600000;if(n!=null||n!=undefined){v.timeout=n}v.type="json";if(q=="Native"||q=="3DSpace"){if(x){v.headers={Accept:"application/json","Content-Type":o,SecurityContext:x}}else{v.headers={Accept:k,"Content-Type":o}}}else{if(u){v.auth={passport_target:u}}v.proxy=enoviaServerFilterWidget.proxy;if(x){v.headers={Accept:k,"Content-Type":o,SecurityContext:x}}else{v.headers={Accept:k,"Content-Type":o}}}if(s=="productstates"){v.headers=""}else{v.data=s}v.onComplete=r;v.onFailure=y;v.onTimeout=function(){console.log("Timedout for url: "+j)};if(z!=null&&z.operationheader!=undefined){v.headers[z.operationheader.key]=z.operationheader.value}if(z!=null&&z.isfederated!=undefined){delete v.headers.SecurityContext}f.authenticatedRequest(j,v)},onSearchOK:function(j){console.log(j)},getLegacyCfgDico:function(j,k){var l=new Promise(function(p,o){var n="/resources/modeler/browsing/browseservice/pid:"+j+"/configurationdictionary?";var q=function(r){p(r)};var m=function(r){o(r)};require(["text!DS/CfgBaseUX/assets/CfgUXEnvVariables.json"],function(r){var s=JSON.parse(r);if(s.isEvoFilterAvailable=="false"){k="";urlParams="cloudView=1&features=1"}else{urlParams="cloudView=1&features=1&version=1.0"}n+=urlParams;i.makeWSCall(n,"POST","enovia","application/x-www-form-urlencoded",k,q,m,true)})});return l},getDictionaryFromServer:function(j,l,k){var m=new Promise(function(q,p){var o="/resources/modeler/browsing/browseservice/pid:"+j+"/configurationdictionary?"+l+"=1";if(k!=null||k!=undefined){o+="&attributes="+k}var r=function(s){q(s)};var n=function(s){};i.makeWSCall(o,"POST","enovia","application/ds-json","productstates",r,n,true)});return m},getAvailableDemainDetails:function(m,j){var k=this;var l=new Promise(function(r,q){var s=function(x){var u=j.get().getPADTreeDocument().getSelectedNodes();var v,z=u.length;var B=[];var w=[];var E=[];var C=[];var D=[];var y=[];for(v=0;v<z;v++){var A=u[v].options.relationid;if(x[A]!=undefined&&x[A].length==1&&(x[A].toString()=="NoEff")){B.push(A)}if(x[A]!=undefined&&x[A].length==1&&(x[A].toString()=="ConfigChange"||x[A].toString()=="UnsupportedType")){E.push(A)}if(x[A]!=undefined&&x[A].length==1&&(x[A].toString()=="Variant")){C.push(A)}if(x[A]!=undefined&&x[A].length==1&&(x[A].toString()=="Evolution")){D.push(A)}if(x[A]!=undefined&&x[A].length==2){y.push(A)}}var F={};F.emptyEffectivity=B;F.configChageList=E;F.availableVariantList=C;F.availableVariantAndEvolutionList=y;F.availableEvolutionList=D;r(F)};var o=function(u){q(u)};var p=" ";p={version:"1.0",pidList:m};var n="/resources/modeler/configuration/expressionServices/getAvailableDomains";var t=JSON.stringify(p);i.makeWSCall(n,"POST","enovia","json",t,s,o,true)});return l},getpcImage:function(j){var k=new Promise(function(q,p){var m=function(s){p(s)};var l="/cvservlet/fetch/v2";var o={physicalid:j,label:"test"};var n=JSON.stringify(o);var r=function(s){q(s)};i.makeWSCall(l,"POST","enovia","application/json",n,r,m,true)});return k},rolesAvailable:function(k){var l={isCFGRoleAvail:false,isCHGRoleAvail:false,isCSVRoleAvail:false};var j=function(o){var p=["CAP","CHG","COR","DAR","FCD","FME","FRA","FTM","GLS","PDA","PDE","PDM","PPE","QUC","SPM","TRM","UWE","UXG","ENO_ECM_TP","InternalDS"];var n=["CDN","CFG","CH2","CH5","CMM","COD","COX","CTP","DPM","EEW","GLR","MBO","PDA","PDM","QUM","REM","SAZ","SDZ","SMZ","SPJ","SPM","SPV","TRM","UWE","UWU","UXG","InternalDS"];var m=["CSV","InternalDS"];o.forEach(function(q){if(p.indexOf(q.id)>=0){l.isCHGRoleAvail=true}if(n.indexOf(q.id)>=0){l.isCFGRoleAvail=true}if(m.indexOf(q.id)>=0){l.isCSVRoleAvail=true}});k(l)};b.getGrantedRoles(j)}};return i});define("DS/CfgBaseUX/scripts/CfgController",["DS/CfgBaseUX/scripts/CfgUtility","DS/PlatformAPI/PlatformAPI"],function(c,b){var a={init:function(g,d,j){var k="";runYourApp="";myAppsUrl=b.getApplicationConfiguration("app.urls.myapps"),proxy=(window.UWA.Data.proxies.passport?"passport":"ajax"),k=k.substring(0,k.indexOf("/webapps"));if(!myAppsUrl||runYourApp){myAppsUrl=k}var f=new Date();var h=f.getTimezoneOffset();window.enoviaServerFilterWidget={sRealURL:k,baseURL:"",serviceName:"3DSpace",InterCom:UWA.Utils.InterCom,compassSocket:null,prefIntercomServer:null,compassSocketName:"",prefSocketName:"",arrOid:[],storageUrl:myAppsUrl,timezone:h,wsCallTimeout:30000,mySecurityContext:"",proxy:proxy,myRole:"",contextUser:"",isNative:false,fromIDCard:false,referentialsSearchType:"",contextSearchType:"",proposedSearchType:"",datamodel:"new",project_space:"",mode:j,InstanceId:"",contextID:d,_getUrl:function(){return this.baseURL},computeUrl:function(l){return this._getUrl()+l},getSecurityContext:function(){return this.mySecurityContext},getRole:function(){return this.myRole},tenant:"",collabspace:null};var i=null;if(i!=null){var e="ctx::"+i;enoviaServerFilterWidget.mySecurityContext=e;e=e.replace("ctx::","");enoviaServerFilterWidget.myRole=e.substring(0,e.indexOf("."));enoviaServerFilterWidget.collabspace=e.substring(e.lastIndexOf(".")+1,e.length)}}};return a});define("DS/CfgBaseUX/scripts/CfgModelSelector",["DS/CfgBaseUX/scripts/CfgSearchConfiguration","DS/CfgBaseUX/scripts/CfgUtility","UWA/Class/View","text!DS/CfgBaseUX/scripts/CfgModelSelectorTemplate.html","DS/Handlebars/Handlebars","DS/UIKIT/Autocomplete","DS/CfgBaseUX/scripts/CfgModelEvents","i18n!DS/CfgBaseUX/assets/nls/CfgBaseUX","DS/UIKIT/Iconbar"],function(f,j,c,b,d,h,k,a,e){var g=d.compile(b);var i=c.extend({autocomplete:null,toolbar:null,setup:function(){},init:function(l){this._parent(l)},render:function(){var q=this;this.container.setHTML(g());this.autocomplete=new h({multiSelect:false,showSuggestsOnFocus:false,placeholder:a.Auto_Place_Holder,disabled:false,allowFreeInput:true,events:{onSelect:function(x,w){q.autocomplete.onUnselect(x.value);q.layout.addModel({label:x.label,value:x.value})},onUnselect:function(x,w){}}});var q=this;var t=[];t.push({fonticon:"plus",text:a.Add_Model,handler:function(x,w){q.toggleSelector()}});if(q.layout.showimportCOButton!=undefined&&q.layout.showimportCOButton==true){t.push({fonticon:"import ",text:a.Import_Change_Order_Applicability,handler:function(x,w){if(q.layout!=undefined&&q.layout!=null&&q.layout.enableImportButton!=undefined&&q.layout.enableImportButton==false){return}q.importCOApplicability();q.layout.enableImportButton=false;q.toolBar.menu.items[1].elements.container.addClassName("disableButton")}})}this.toolBar=new e({renderTo:this.container.getElement(".toolbar-model-selector"),items:t});var o=UWA.createElement("div");o.setStyles({position:"relative",marginRight:"15px",width:"100%"});o.style.display="inline-block";this.autocomplete.inject(o);o.inject(this.container.getElement(".model-selector-container"));var s=UWA.createElement("span",{"class":"fonticon fonticon-1x fonticon-search"});var m=UWA.createElement("div",{"class":"imgSearchContainer1",id:"searchIconCont"});this.autocomplete.elements.clear.setStyle("margin-right","11px");s.setStyle("cursor","pointer");m.style.opacity="0.5";m.style["float"]="right";m.style.marginTop="-27px";m.addClassName("imgFocusIdenty");m.addContent(s);s.inject(m);window.addEventListener("storage",function(y){if(y.storageArea===sessionStorage){if(sessionStorage.searchList!=undefined&&sessionStorage.searchList!=""){var z=sessionStorage.searchList.split(",");for(var w=0;w<z.length;w++){var x={};x.value=z[w];x.label="";q.layout.addModel(x)}}else{console.log("inside EVENT ******************************************")}}});m.addEventListener("click",function(){if(q.options.environment=="Dashboard"){var C="";var B="Model";var y=enoviaServerFilterWidget.myRole;var D=null;var F="";var G=new f(true);var E=function(I){if(I.length>0){for(var H=0;H<I.length;H++){var J={};J.value=I[H].get("id");J.label="";q.layout.addModel(J)}}};var x=q.layout.collection.getselectedModelsIDs();G.activate(C,B,y,E,D,x)}else{if(q.options.environment=="3DSpace"){sessionStorage.removeItem("searchList");var x=q.layout.collection.getselectedModelsIDs();x=x.join();var A="";if(enoviaServerFilterWidget.fixForSearchInOpener==undefined){A="../../common/emxFullSearch.jsp?field=TYPES=type_Model:CURRENT!=policy_Model.state_Inactive&table=AEFGeneralSearchResults&selection=multiple&formName=BCform&submitAction=refreshCaller&hideHeader=true&HelpMarker=emxhelpfullsearch&submitURL=../effectivity/ModelSearch.jsp?fromOperation=search&txtExcludeOIDs="+x}else{if(enoviaServerFilterWidget.fixForSearchInOpener==true){A="../common/emxFullSearch.jsp?field=TYPES=type_Model:CURRENT!=policy_Model.state_Inactive&table=AEFGeneralSearchResults&selection=multiple&formName=BCform&submitAction=refreshCaller&hideHeader=true&HelpMarker=emxhelpfullsearch&submitURL=../effectivity/ModelSearch.jsp?fromOperation=search&txtExcludeOIDs="+x}}showChooser(A,850,630)}else{if(q.options.environment=="Native"){var x=q.layout.collection.getselectedModelsIDs();var w="";for(var z=0;z<=x.length;z++){w+="NOT (physicalid:"+x[z]+")"}CATCefSendString("Add_Models="+w)}}}});m.inject(o);var l=[];if(q.options!=null&&q.options!=undefined&&q.options.Models!=null&&q.options.Models!=undefined){for(var r=0;r<q.options.Models.length;r++){var p="";var v="";q.options.Models[r].attributes.forEach(function(w){if(w.name=="ds6wg:marketing_Name"||w.name=="ds6w:label"){p=w.value}if(w.name=="ds6w:what/ds6w:status"){v=w.value}});var u="";if(v=="Model.Inactive"){continue}l.push({label:p,value:q.options.Models[r].attributes[0].value,subLabel:u})}var n={};n.name="Objects";n.items=l;q.autocomplete.addDataset(n);q.autocomplete.getItems().forEach(function(w){q.autocomplete.enableItem(w.value)})}return this},toggleSelector:function(){var l=this.container.getElement(".model-selector-container");if(l.isHidden()==true){l.show()}else{l.hide()}},importCOApplicability:function(){this.layout.importCOApplicability()},disableSelection:function(m){var l=this;l.autocomplete.getItems().forEach(function(n){l.autocomplete.enableItem(n.value);if(m.indexOf(n.value)>-1){l.autocomplete.disableItem(n.value)}})},AddModelsFromNative:function(l){console.log(l)},enableDisableIcons:function(){if(this.toolBar.menu.items[1]!=undefined&&this.toolBar.menu.items[1].elements.container!=undefined){if(this.layout.enableImportButton!=undefined&&this.layout.enableImportButton==true){this.toolBar.menu.items[1].elements.container.removeClassName("disableButton")}else{if(this.layout.enableImportButton!=undefined&&this.layout.enableImportButton==false){this.toolBar.menu.items[1].elements.container.addClassName("disableButton")}}}}});return i});define("DS/CfgBaseUX/scripts/CfgXMLServices",["DS/CfgBaseUX/scripts/CfgData","DS/CfgBaseUX/scripts/CfgUtility","UWA/Drivers/Alone","DS/Core/Core","DS/CfgBaseUX/scripts/CfgEvolutionRange"],function(d,b,f,c,e){var a={buildRoot:function(g,h){return'<Root Name = "'+g+'" Revision = "'+h+'"/>'},buildLeaf:function(g,i,h){return'<Leaf Name = "'+g+'" Revision = "'+i+'" IsExcluded = "'+h+'"/>'},buildSingle:function(g,h){return'<Single Name = "'+g+'" Revision = "'+h+'"/>'},buildTree:function(g){return"<Tree>"+g+"</Tree>"},buildTreeSeries:function(h,g,i){return'<TreeSeries Type = "'+h+'" Name = "'+g+'">'+i+"</TreeSeries>"},startFilterXML:function(i,h){if(h==null||h==undefined||h==""){h="Strict"}var g='<FilterSelection SelectionMode = "'+h+'">';if(i!=null&&i!=undefined&&i!=""){g='<FilterSelection SelectionMode="'+h+'" SelectionView="'+i+'">'}return'<CfgFilterExpression xs:schemaLocation = "urn:com:dassault_systemes:config CfgFilterExpression.xsd" xmlns:xs = "http://www.w3.org/2001/XMLSchema-instance" xmlns = "urn:com:dassault_systemes:config">'+g},endFilterXML:function(){return"</FilterSelection></CfgFilterExpression>"},startChangeXML:function(){return'<CfgChangeExpression xmlns="urn:com:dassault_systemes:config" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:com:dassault_systemes:config CfgChangeExpression.xsd"><Expression>'},endChangeXML:function(){return"</Expression></CfgChangeExpression>"},startEvolutionXML:function(){return'<CfgEffectivityExpression  xmlns="urn:com:dassault_systemes:config" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:com:dassault_systemes:config CfgEffectivityExpression.xsd"><Expression>'},endEvolutionXML:function(){return"</Expression></CfgEffectivityExpression>"},startSessionXML:function(){return'<CfgEffectivityExpression xmlns="urn:com:dassault_systemes:config" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:com:dassault_systemes:config CfgEffectivityExpression.xsd"><Expression>'},endSessionXML:function(){return"</Expression></CfgEffectivityExpression>"},buildContext:function(i,n){var g="";if(n.xmlExpression!=""&&n.xmlExpression.indexOf("TreeSeries")==-1){g=this.buildTreeSeries("ProductState",n.name,n.xmlExpression)}else{g=n.xmlExpression}var l="";if(n.impXml!=""&&n.impXml.indexOf("TreeSeries")==-1){l=this.buildTreeSeries("ManufPlan",n.name,n.impXml)}else{l=n.impXml}var m="";if(n.milestoneXml!=""&&n.milestoneXml.indexOf("MilestonesTrack")==-1){m=this.buildmilestonetrack(n.milestoneXml)}else{m=n.milestoneXml}var h=0;if(g==""){h++}if(n.iDateXml==""){h++}if(l==""){h++}if(n.iUnitXml==""){h++}if(n.milestoneXml==""){h++}var j="<AND>";var k="</AND>";if(h>=4){k=j=""}if(h==5){return""}return'<Context HolderType="Model" HolderName="'+i+'" DescId="'+window.DescriptionCount+'">'+j+g+n.iDateXml+l+n.iUnitXml+m+k+"</Context>"},buildmilestonetrack:function(g){return'<MilestonesTrack Discipline = "Engineering">'+g+"</MilestonesTrack>"},buildSingleDateValue:function(g){return'<Interval><From Value = "'+g+'T00:00:00"/><To Value = "'+g+'T23:59:59"/></Interval>'},buildSingleValue:function(g){return'<SingleValue Value = "'+g+'"/>'},buildFromDate:function(g){return'<From Value = "'+g+'T00:00:00"/>'},buildFrom:function(g){return'<From Value = "'+g+'"/>'},buildToDate:function(g){return'<To Value = "'+g+'T23:59:59"/>'},buildTo:function(g){return'<To Value = "'+g+'"/>'},buildRange:function(k,j){var i=new DOMParser();var h=i.parseFromString(j,"text/xml");var g=h.childNodes[0].getAttribute("Value");if(g==""){return"<Interval>"+k+"</Interval>"}else{return"<Interval>"+k+j+"</Interval>"}},buildFeature:function(g,h){return'<Feature Type="ConfigFeature" Name="'+g+'">'+h+"</Feature>"},buildOption:function(g){return'<Feature Type="ConfigFeature" Name="'+g+'"/>'},buildSeries:function(h,g,i){return'<Series Type = "'+h+'" Name = "'+g+'">'+i+" </Series>"},buildDate:function(g){return"<Date>"+g+"</Date>"},buildInterval:function(g){return"<Interval>"+g+"</Interval>"},EvolutionXMLtoJSONforFilterVariant:function(n){var g=new DOMParser();if(n===null||n===undefined){n=""}var m=g.parseFromString(n,"text/xml");var k={contextsFilterXML:[]};var h='<?xml version="1.0" encoding="UTF-8"?><CfgFilterExpression xmlns="urn:com:dassault_systemes:config" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:com:dassault_systemes:config CfgFilterExpression.xsd"><FilterSelection SelectionMode="Strict">';var j="</FilterSelection></CfgFilterExpression>";var o=m.getElementsByTagName("Context");for(var l=0;l<o.length;l++){if(o[l].attributes.HolderName){if(o[l].childNodes.length==1&&o[l].childNodes[0].tagName==="Boolean"){continue}var i={name:o[l].attributes.HolderName.value,expression:""};i.expression=h+(o[l].outerHTML||new XMLSerializer().serializeToString(o[l]))+j;k.contextsFilterXML.push(i)}}return k},EvolutionXMLtoJSONConvertor:function(m){var Z=new DOMParser();var r=Z.parseFromString(m,"text/xml");var aC=[];var af=[];var ar=r.getElementsByTagName("Description");if(window.DescriptionCount==undefined){window.DescriptionCount=1}if(ar.length>0){var N=ar[0].getElementsByTagName("TreeSeries");for(var p=0;p<N.length;p++){var ay=N[p].attributes.DescId.value;var aB=N[p].attributes.Revision.value;var j=N[p].attributes.DisplayName.value;var n={descid:ay,revision:aB,displayName:j};aC.push(n);window.DescriptionCount++}var aj=ar[0].getElementsByTagName("Context");for(var p=0;p<aj.length;p++){var ay=aj[p].attributes.DescId.value;var j=aj[p].attributes.DisplayName.value;var n={descid:ay,displayName:j};af.push(n);window.DescriptionCount++}}var g=[];var P=r.getElementsByTagName("Expression");if(P.length>0){var x=P[0].getElementsByTagName("Context");for(var p=0;p<x.length;p++){if(x[p].attributes.HolderName){var am={};var aj=x[p];var ac=[];if(aj.getElementsByTagName("AND").length==0){ac=aj.childNodes}else{ac=aj.getElementsByTagName("AND")[0].childNodes}var ah=[];var an=[];var aA=[];var o=[];var au="";var F="";var k="";var W="";var D=[];var u="";var aa=[];var ag=[];for(var ab=0;ab<ac.length;ab++){if(ac[ab].nodeName=="TreeSeries"){var t=ac[ab].getElementsByTagName("Tree");var O=ac[ab].getElementsByTagName("Single");var w=[];var ai=ac[ab].attributes.Type.value;for(var M=0;M<t.length;M++){var av=t[M].getElementsByTagName("Root");var S=av[0].attributes.Name.value;var h=av[0].attributes.Revision.value;var ay=0;if(av[0].attributes.DescId!=undefined){ay=av[0].attributes.DescId.value;var Y=aC.filter(function(aF){return aF.descid==ay})[0];var aw=S;if(Y!=undefined){aw=Y.displayName;w.push(Y)}}else{if(ai=="ProductState"){av[0].setAttribute("DescId","products"+S+"_"+h)}else{av[0].setAttribute("DescId","manufacturingPlans"+S+"_"+h)}}var ap=false;if(av[0].attributes.IsExcluded!=undefined){var ap=av[0].attributes.IsExcluded.value}var E=e.getRange(S,h,aw,true);var l=t[M].getElementsByTagName("Leaf");for(var J=0;J<l.length;J++){var ad=l[J].attributes.Name.value;var aB=l[J].attributes.Revision.value;if(l[J].attributes.DescId!=undefined){ay=l[J].attributes.DescId.value;Y=aC.filter(function(aF){return aF.descid==ay})[0];aw=ad;if(Y!=undefined){aw=Y.displayName;w.push(Y)}}else{if(ai=="ProductState"){l[J].setAttribute("DescId","products"+ad+"_"+aB)}else{l[J].setAttribute("DescId","manufacturingPlans"+ad+"_"+aB)}}var ax=true;if(l[J].attributes.IsExcluded!=undefined){ax=l[J].attributes.IsExcluded.value}E.addLeaves(ad,aB,aw,ax)}for(var U=0;U<w.length;U++){var s='<TreeSeries DescId = "'+w[U].descid+'" Revision = "'+w[U].revision+'" DisplayName="'+w[U].displayName+'"></TreeSeries>';if(ac[ab].attributes.Type.value=="ProductState"){aa.push(s)}else{ag.push(s)}}if(ac[ab].attributes.Type.value=="ProductState"){aA.push(E)}else{o.push(E)}}for(var B=0;B<O.length;B++){var I=O[B].attributes.Name.value;var L=O[B].attributes.Revision.value;var ay=0;if(O[B].attributes.DescId!=undefined){ay=O[B].attributes.DescId.value;var Y=aC.filter(function(aF){return aF.descid==ay})[0];var aw=I;if(Y!=undefined){aw=Y.displayName;w.push(Y)}}else{if(ai=="ProductState"){O[B].setAttribute("DescId","products"+I+"_"+L)}else{O[B].setAttribute("DescId","manufacturingPlans"+I+"_"+L)}}var A=true;if(O[B].attributes.IsExcluded!=undefined){A=O[B].attributes.IsExcluded.value}var E=e.getRange(I,L,aw,false);for(var U=0;U<w.length;U++){var s='<TreeSeries DescId = "'+w[U].descid+'" Revision = "'+w[U].revision+'" DisplayName="'+w[U].displayName+'"></TreeSeries>';if(ac[ab].attributes.Type.value=="ProductState"){aa.push(s)}else{ag.push(s)}}if(ac[ab].attributes.Type.value=="ProductState"){aA.push(E)}else{o.push(E)}}var z=new XMLSerializer();if(ac[ab].attributes.Type.value=="ProductState"){au=z.serializeToString(ac[ab])}else{F=z.serializeToString(ac[ab])}}else{if(ac[ab].nodeName=="Series"){var aE=ac[ab].getElementsByTagName("Interval");var O=ac[ab].getElementsByTagName("SingleValue");for(var T=0;T<aE.length;T++){var R=aE[T].getElementsByTagName("From");var K=aE[T].getElementsByTagName("To");var X=R[0].attributes.Value.value;var V="INF";if(K.length>0){V=K[0].attributes.Value.value}var G={start:{buildOrder:X},end:{buildOrder:V}};an.push(G)}for(var B=0;B<O.length;B++){var H=O[B].attributes.Value.value;var al={start:{buildOrder:H},end:null};an.push(al)}var z=new XMLSerializer();W=z.serializeToString(ac[ab])}else{if(ac[ab].nodeName=="MilestonesTrack"){var t=ac[ab].getElementsByTagName("Tree");var O=ac[ab].getElementsByTagName("Single");for(var M=0;M<t.length;M++){var av=t[M].getElementsByTagName("Root");var S=av[0].attributes.Name.value;var h=av[0].attributes.Name.value;var ap=false;if(av[0].attributes.IsExcluded!=undefined){var ap=av[0].attributes.IsExcluded.value}var E=e.getRange(S,h,S,true);var l=t[M].getElementsByTagName("Leaf");for(var J=0;J<l.length;J++){var ad=l[J].attributes.Name.value;var aB=l[J].attributes.Name.value;var ax=true;if(l[J].attributes.IsExcluded!=undefined){ax=l[J].attributes.IsExcluded.value}E.addLeaves(ad,aB,ad,ax)}D.push(E)}for(var B=0;B<O.length;B++){var I=O[B].attributes.Name.value;var L=O[B].attributes.Name.value;var A=true;if(O[B].attributes.IsExcluded!=undefined){A=O[B].attributes.IsExcluded.value}var E=e.getRange(I,L,I,false);D.push(E)}var z=new XMLSerializer();var z=new XMLSerializer();u=z.serializeToString(ac[ab])}else{if(ac[ab].nodeName=="Date"){var aE=ac[ab].getElementsByTagName("Interval");var O=ac[ab].getElementsByTagName("SingleValue");for(var T=0;T<aE.length;T++){var R=aE[T].getElementsByTagName("From");var K=aE[T].getElementsByTagName("To");var X="-INF";if(R[0]!=null&&R[0]!=undefined){var ae=R[0].attributes.Value.value;X=new Date(ae).toDateString()}var V="INF";if(K[0]!=null&&K[0]!=undefined){var at=K[0].attributes.Value.value;V=new Date(at).toDateString()}var Q="";if(X!=null&&X!="undefined"&&X!="-INF"){Q=new Date(X).getTime()}else{X="-INF";Q="null"}var az="";if(V!=null&&V!="undefined"&&V!="INF"){az=new Date(V).getTime()}else{V="INF";az="null"}var G={Start:X,millisecStart:Q,End:V,millisecEnd:az};ah.push(G)}for(var B=0;B<O.length;B++){var H=O[B].attributes.Value.value;var C=new Date(H).getTime();var al={Start:H,millisecStart:C,End:"null",millisecEnd:""};ah.push(al)}var z=new XMLSerializer();k=z.serializeToString(ac[ab])}}}}}an=JSON.stringify({builds:an});var i='<?xml version="1.0" encoding="UTF-8"?>';i+=a.startEvolutionXML();var ao=0;if(au==""){ao++}if(k==""){ao++}if(F==""){ao++}if(W==""){ao++}if(u==""){ao++}var aD="<AND>";var ak="</AND>";if(ao>=4){ak=aD=""}if(aj.attributes.DescId!=undefined){i+='<Context HolderType="Model" HolderName="'+aj.attributes.HolderName.value+'" DescId="'+aj.attributes.DescId.value+'">'+aD+au+k+F+W+u+ak+"</Context>"}else{i+='<Context HolderType="Model" HolderName="'+aj.attributes.HolderName.value+'">'+aD+au+k+F+W+u+ak+"</Context>"}if(aC.length==0){i+=a.endEvolutionXML()}else{var q="";for(var aq=0;aq<aC.length;aq++){q+='<TreeSeries DescId = "'+aC[aq].descid+'" Revision = "'+aC[aq].revision+'" DisplayName="'+aC[aq].displayName+'"></TreeSeries>'}for(var aq=0;aq<af.length;aq++){q+='<Context DescId = "'+af[aq].descid+'" DisplayName="'+af[aq].displayName+'"></Context>'}i+="</Expression><Description>"+q+"</Description></CfgEffectivityExpression>"}var v="";var v=b.getDisplayExpressionUsingXSLT(i);if(au+k+W+F+u==""){v=""}var y={};var am={name:aj.attributes.HolderName.value,modelId:"",psJson:aA,mpJson:o,viewJson:null,milestoneJson:D,milestoneXml:u,iDateJson:{DateRanges:ah},iUnitJson:an,xmlExpression:au,psXmlDesc:aa,iDateXml:k,iUnitXml:W,impXml:F,mpXmlDesc:ag,productstatecheckbox:true,unitcheckbox:true,datestatecheckbox:true,manufacturingplanstatecheckbox:true,milestoneCheckbox:true,displayexpression:v};y.expression=am;y.displayexpression=v;g.push(y)}}}return g},VariantJSONtoXMLConverter:function(r){var C="";var k=[];var n=[];var j=false;for(var m=0;m<r.effectivity.length;m++){var o=r.effectivity[m];if(o.Combinations.length==0){continue}C+='<Context HolderType = "Model" HolderName = "'+o.name.replace(/&(?!amp;)/g,"&amp;")+'">';var x="";var q=0;var D=0;while(D<=(o.Combinations.length-1)){var y="";var s=0;n=[];for(var A=0;A<o.Combinations[D].Combination.length;A++){if(o.Combinations[D].Combination[A].Options.length==0){continue}k=[];j=false;var g=o.Combinations[D].Combination[A].Options[0].Option.parentSelectionType;var i=o.Combinations[D].Combination[A].Feature.value.replace(/&(?!amp;)/g,"&amp;");for(var l=0;l<=(o.Combinations[D].Combination[A].Options.length-1);l++){var B=o.Combinations[D].Combination[A].Options[l].Option.selection;var v=o.Combinations[D].Combination[A].Options[l].Option.value.replace(/&(?!amp;)/g,"&amp;");var u=a.buildOption(v);if(B=="R"){j=true}k.push({isNOT:j,xml:u});j=false}if(g=="Multiple"){for(var w=0;w<k.length;w++){var z=a.buildFeature(i,k[w].xml);if(k[w].isNOT==true){z="<NOT>"+z+"</NOT>"}n.push(z);s++}}else{var h="";var j=false;for(var t=0;t<k.length;t++){h=h+k[t].xml;j=k[t].isNOT}var z=a.buildFeature(i,h);if(j==true){z="<NOT>"+z+"</NOT>"}n.push(z);s++}for(var p=0;p<n.length;p++){y+=n[p]}if(y!=""&&s>1){y="<AND>"+y+"</AND>"}}x+=y;if(y!=""){q++}D++}if(q==0){C=""}else{if(q>=2){C+="<OR>"+x+"</OR></Context>"}else{C+=x;C+="</Context>"}}}if(C!=""){C='<CfgEffectivityExpression xs:schemaLocation = "urn:com:dassault_systemes:config CfgEffectivityExpression.xsd" xmlns:xs = "http://www.w3.org/2001/XMLSchema-instance" xmlns = "urn:com:dassault_systemes:config"><Expression>'+C+"</Expression></CfgEffectivityExpression>"}return C},VariantXMLToJSONConverter:function(J){var k=new DOMParser();var r=k.parseFromString(J,"text/xml");var z=r.getElementsByTagName("Context");var I=new Array();for(var A=0;A<z.length;A++){if(z[A].attributes.HolderName){var D='{ "name" : "", "Combinations" : [] }';var K=JSON.parse(D);K.name=z[A].attributes.HolderName.value;if(z[A].childNodes.length==1&&z[A].childNodes[0].tagName==="Boolean"){}else{var B=0;var y=z[A].getElementsByTagName("OR");if(y!=null&&(y.length==undefined||y.length==0)){y=new Array();y[0]=z[A]}var h=[];var E=[];for(var F=0;F<y[0].childNodes.length;F++){if(y[0].childNodes[F].tagName=="Feature"){h=[];E=[];var g=y[0].childNodes[F];var l=g.getElementsByTagName("Feature").length;if(l>0){for(var C=0;C<l;C++){var q={};q.value=y[0].childNodes[F].childNodes[C].getAttribute("Name");q.label="NOT_SET";q.DescId=y[0].childNodes[F].childNodes[C].getAttribute("DescId");q.selection="S";E.push({Option:q})}var x={};x.value=g.getAttribute("Name");x.label="NOT_SET";x.DescId=g.getAttribute("DescId");h.push({Feature:x,Options:E})}K.Combinations.push({Id:B,Combination:h})}else{var G=[];var h=[];var p=[];var H=y[0].childNodes[F];var L=H.childNodes.length;for(var u=0;u<H.childNodes.length;u++){var t=[];var g=H.childNodes[u];if(H.tagName=="NOT"){g=H.childNodes[u];var l=g.getElementsByTagName("Feature").length;if(l>0){for(var C=0;C<l;C++){var m={};m.value=g.childNodes[C].getAttribute("Name");m.label="NOT_SET";m.DescId=g.childNodes[C].getAttribute("DescId");m.selection="R";t.push({Option:m})}var s={};s.value=g.getAttribute("Name");s.label="NOT_SET";s.DescId=g.getAttribute("DescId");G.push({Feature:s,Options:t})}}else{if(H.childNodes[u].tagName=="NOT"){g=H.childNodes[u].childNodes[0];var l=g.getElementsByTagName("Feature").length;if(l>0){for(var C=0;C<l;C++){var n={};n.value=g.childNodes[C].getAttribute("Name");n.label="NOT_SET";n.DescId=g.childNodes[C].getAttribute("DescId");n.selection="R";t.push({Option:n})}var v={};v.value=g.getAttribute("Name");v.label="NOT_SET";v.DescId=g.getAttribute("DescId");G.push({Feature:v,Options:t})}}else{var l=g.getElementsByTagName("Feature").length;if(l>0){for(var C=0;C<l;C++){var o={};o.value=g.childNodes[C].getAttribute("Name");o.label="NOT_SET";o.DescId=g.childNodes[C].getAttribute("DescId");o.selection="S";t.push({Option:o})}var w={};w.value=g.getAttribute("Name");w.label="NOT_SET";w.DescId=g.getAttribute("DescId");G.push({Feature:w,Options:t})}}}}K.Combinations.push({Id:B,Combination:G})}B++}}I.push(JSON.stringify(K))}}return I},VariantDescXMLtoJSONConverter:function(k){var g=new DOMParser();var r=g.parseFromString(k,"text/xml");var n=r.getElementsByTagName("Description");var h=[];for(var l=0;l<n.length;l++){var o=n[l].getElementsByTagName("Feature");for(var p=0;p<o.length;p++){var m={DescId:"",DisplayName:""};m.DescId=o[p].attributes.DescId.value;m.DisplayName=o[p].attributes.DisplayName.value;h.push(m)}var q=n[l].getElementsByTagName("Option");for(var j=0;j<q.length;j++){var i={DescId:"",DisplayName:""};i.DescId=q[j].attributes.DescId.value;i.DisplayName=q[j].attributes.DisplayName.value;h.push(i)}}return h}};return a});define("DS/CfgBaseUX/scripts/CfgModel",["UWA/Core","UWA/Class/Model","DS/CfgBaseUX/scripts/CfgXMLServices"],function(c,b,a){return b.extend({defaults:function(){return{marketingName:"",name:"",image:"",icon:"",id:"",state:"",owner:"",expression:"",displayexpression:""}},getContextSessionExpression:function(){var h=[];var g='<?xml version="1.0" encoding="UTF-8"?>';g+=a.startSessionXML();var i=this.get("expression");var e=this.get("name");var d=this.get("marketingName");if(window.DescriptionCount==undefined){window.DescriptionCount=1}window.DescriptionCount++;if(i.psXmlDesc!=undefined&&i.psXmlDesc.length>0){h.push(i.psXmlDesc)}if(i.mpXmlDesc!=undefined&&i.mpXmlDesc.length>0){h.push(i.mpXmlDesc)}g+=a.buildContext(e,i);var f='<Context DescId = "'+window.DescriptionCount+'" DisplayName="'+e+'"></Context>';if(d!=undefined&&d!=" "){f='<Context DescId = "'+window.DescriptionCount+'" DisplayName="'+d+'"></Context>'}h.push(f);if(h.length==0){g+=a.endSessionXML()}else{g+="</Expression><Description>"+h+"</Description></CfgEffectivityExpression>"}return g},getContextEvolutionExpression:function(){var g=[];var h='<?xml version="1.0" encoding="UTF-8"?>';h+=a.startEvolutionXML();var i=this.get("expression");var e=this.get("name");var d=this.get("marketingName");if(window.DescriptionCount==undefined){window.DescriptionCount=1}window.DescriptionCount++;if(i.psXmlDesc!=undefined&&i.psXmlDesc.length>0){g.push(i.psXmlDesc)}if(i.mpXmlDesc!=undefined&&i.mpXmlDesc.length>0){g.push(i.mpXmlDesc)}h+=a.buildContext(e,i);var f='<Context DescId = "'+window.DescriptionCount+'" DisplayName="'+e+'"></Context>';if(d!=undefined&&d!=" "){f='<Context DescId = "'+window.DescriptionCount+'" DisplayName="'+d+'"></Context>'}g.push(f);if(g.length==0){h+=a.endEvolutionXML()}else{h+="</Expression><Description>"+g+"</Description></CfgEffectivityExpression>"}return h},clearExpression:function(d){var f=this.get("expression");var e=[];e=JSON.stringify({builds:e});f.psJson=[];f.mpJson=[];f.iDateJson={DateRanges:[]};f.iUnitJson=e;f.xmlExpression="";f.iDateXml="";f.iUnitXml="";f.impXml="";f.milestoneJson=[];f.milestoneXml="";f.psXmlDesc=[];f.mpXmlDesc=[];f.displayexpression=d;this.set("displayexpression",f.displayexpression);this.set("expression",f)}})});define("DS/CfgBaseUX/scripts/CfgCollection",["UWA/Core","UWA/Class/Collection","DS/CfgBaseUX/scripts/CfgModel","DS/CfgBaseUX/scripts/CfgXMLServices","DS/CfgBaseUX/scripts/CfgUtility","i18n!DS/CfgBaseUX/assets/nls/CfgBaseUX"],function(g,d,c,a,b,f){var e=d.extend({model:c,init:function(h){this._parent(h);this._options=h;this.imgUrlModelMed=enoviaServerFilterWidget.baseURL+"/common/images/I_Model_Thumbnail.png";this.imgUrlModelLarge=enoviaServerFilterWidget.baseURL+"/common/images/I_Model_Thumbnail.png";this.imgUrlModelSmall=enoviaServerFilterWidget.baseURL+"/common/images/iconSmallModel.png"},initialising:function(){for(var m=0;m<this._options.expressionArray.length;m++){var l=this._options.expressionArray[m];var k="";var n=this.imgUrlModelLarge;var h=this.imgUrlModelSmall;if(l.image!=null&&l.image!="undefined"&&l.image!=""){n=l.image}if(l.icon!=null&&l.icon!="undefined"&&l.icon!=""){h=l.icon}if(l.displayexpression==null||l.displayexpression==undefined||l.displayexpression==""){k=this._options.emptyContextText}else{k=l.displayexpression}var j={marketingName:l.marketingName,name:l.name,image:n,icon:h,id:l.id,state:l.state,owner:l.owner,expression:l.expression,displayexpression:k};this.addModel(j)}},initialisingForEvolution:function(){for(var m=0;m<this._options.expressionArray.length;m++){var l=this._options.expressionArray[m];var k="";var o=this.imgUrlModelLarge;var h=this.imgUrlModelSmall;if(l.image!=null&&l.image!="undefined"&&l.image!=""){o=l.image}if(l.icon!=null&&l.icon!="undefined"&&l.icon!=""){h=l.icon}if(l.displayexpression==null||l.displayexpression==undefined||l.displayexpression==""){k=this._options.emptyContextText}else{k=l.displayexpression}var n=this.get(l.id);var j={marketingName:l.marketingName,name:l.name,image:o,icon:h,id:l.id,state:l.state,owner:l.owner,expression:l.expression,displayexpression:k};if(n==null||n==undefined){this.addModel(j)}else{n.setAttributes(j)}}},addModel:function(i){var k="";if(i.displayexpression==null||i.displayexpression==undefined||i.displayexpression==""){k=this._options.emptyContextText}else{k=i.displayexpression}var m=this.imgUrlModelLarge;var h=this.imgUrlModelSmall;if(i.image!=null&&i.image!="undefined"&&i.image!=""){m=i.image}if(i.icon!=null&&i.icon!="undefined"&&i.icon!=""){h=i.icon}var j={marketingName:i.marketingName,name:i.name,image:m,icon:h,id:i.id,state:i.state,owner:i.owner,expression:i.expression,displayexpression:k};var l=this.get(i.id);if(l==null||l==undefined){this.push(j)}else{if(this._options.environment!="Dashboard"){b.showwarning(i.marketingName+" "+f.Model_Exist,"error")}}},removeModel:function(h){this.remove(h.get("id"))},getselectedModelsIDs:function(){var k=[];for(var j=0;j<this.length;j++){var h=this.at(j);k.push(h.get("id"))}return k},getGlobalChangeExpression:function(){var k='<?xml version="1.0" encoding="UTF-8"?>';k+=a.startChangeXML();if(this.length>1){k+="<MultiContextView>"}var l="";for(var j=0;j<this.length;j++){window.DescriptionCount++;var h=this.at(j);var m=a.buildContext(h.get("name"),h.get("expression"));if(m==""){m+='<Context HolderType = "Model" HolderName = "'+h.get("name")+'">';m+="<Boolean>false</Boolean>";m=m+"</Context>"}l+=m}k+=l;if(this.length>1){k+="</MultiContextView>"}k+=a.endChangeXML();if(l==""){k=""}return k},getGlobalEvolutionExpression:function(){var m='<?xml version="1.0" encoding="UTF-8"?>';m+=a.startEvolutionXML();if(this.length>1){m+="<MultiContextView>"}var k="";for(var j=0;j<this.length;j++){window.DescriptionCount++;var h=this.at(j);var l=a.buildContext(h.get("name"),h.get("expression"));if(l==""){}k+=l}m+=k;if(this.length>1){m+="</MultiContextView>"}m+=a.endEvolutionXML();if(k==""){m=""}return m},getGlobalSessionExpression:function(){var q='<?xml version="1.0" encoding="UTF-8"?>';q+=a.startSessionXML();var r=[];var m=[];if(this.length>1){q+="<MultiContextView>"}var l="";for(var j=0;j<this.length;j++){window.DescriptionCount++;var k=this.at(j);var n=k.get("expression");var h=k.get("name");var p=k.get("marketingName");l+=a.buildContext(h,n);if(n.psXmlDesc!=undefined&&n.psXmlDesc.length>0){r.push(n.psXmlDesc)}if(n.mpXmlDesc!=undefined&&n.mpXmlDesc.length>0){r.push(n.mpXmlDesc)}var o='<Context DescId = "'+window.DescriptionCount+'" DisplayName="'+p+'"></Context>';m.push(o)}q+=l;if(this.length>1){q+="</MultiContextView>"}if(r.length==0){q+=a.endSessionXML()}else{q+="</Expression><Description>"+r+m+"</Description></CfgEffectivityExpression>"}if(l==""){q=""}return q},getGlobalSessiondata:function(){var k=[];if(this._models!="undefined"){for(var j=0;j<this._models.length;j++){k.push(this._models[j].id)}}var l=this.getGlobalSessionExpression();l=l.replace(/&(?!amp;)/g,"&amp;");var h={"Dictionary Contexts":k,"Evolution Expression":l};return h},updatedisplayExpressionsAsPerDisplayNames:function(){for(var l=0;l<this.length;l++){var k=this.at(l);var h=k.getContextEvolutionExpression();var j=b.getDisplayExpressionUsingXSLT(h);k.set("displayexpression",j)}},getEffectivityModelsIDs:function(){var k=[];for(var j=0;j<this.length;j++){var h=this.at(j);if(h.get("displayexpression")!=f.emptyContextText_Evo_Effectivity){k.push(h.get("id"))}}return k}});return e});define("DS/CfgBaseUX/scripts/CfgModelView",["UWA/Class/View","DS/W3DXComponents/Views/Item/SetView","DS/W3DXComponents/Views/Item/TileView","DS/W3DXComponents/Views/Layout/GridScrollView","DS/W3DXComponents/Collections/ActionsCollection","DS/W3DXComponents/Views/EmptyView","DS/WebappsUtils/WebappsUtils","DS/PlatformAPI/PlatformAPI","DS/UIKIT/Tooltip","DS/CfgBaseUX/scripts/CfgModelTileView","DS/CfgBaseUX/scripts/CfgModel","DS/CfgBaseUX/scripts/CfgCollection","DS/CfgBaseUX/scripts/CfgXMLServices","DS/CfgBaseUX/scripts/CfgUtility","i18n!DS/CfgBaseUX/assets/nls/CfgBaseUX","css!DS/CfgBaseUX/styles/CfgModelView.css"],function(c,o,h,p,i,f,e,l,j,n,b,d,k,m,a){var g=c.extend({collection:null,modelSetView:null,modelSetViewDiv:null,imgUrlModelLarge:null,imgUrlModelMed:null,imgUrlModelSmall:null,contextualMenuActions:null,setup:function(r){this._parent(r);this.imgUrlModelMed=enoviaServerFilterWidget.baseURL+"/common/images/I_Model_Thumbnail.png";var s=this;var u={id:"Edit",text:this.options.editActionLabel,fonticon:"pencil",icon:"",handler:function(v){s.options.editActionCallback(v.model)}};var q={id:"Clear",text:this.options.clearActionLabel,fonticon:"clear",icon:"",handler:function(v){v.model.clearExpression(s.options.emptyContextText)}};var t={id:"Remove",text:this.options.removeActionLabel,fonticon:"trash",icon:"",handler:function(v){s.options.removeModelCallback(v.model)}};this.contextualMenuActions=new Array();this.contextualMenuActions.push(u);if(this.options.mode!=="EditEvolution"){this.contextualMenuActions.push(t)}},render:function(q){this.collection=q;var r=this;this.modelSetView=new o({collection:r.collection,contents:{withMultisel:false,useInfiniteScroll:false,usePullToRefresh:false,itemViewOptions:{className:"item-view",mapping:{title:function(){var s=new UWA.Element("div",{id:"title",html:"<span class=type>"+this.model.get("marketingName")+"</span>",styles:{"white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}});return s.innerHTML},image:function(){return this.model.get("image")},subtitle:function(){var s=new UWA.Element("div",{id:"subtitle",html:"<span title="+this.model.get("name")+" class=type>"+this.model.get("name")+"</span>",styles:{"white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}});return s.innerHTML},content:function(){var v=this.model.get("state");if(v=="Preliminary"){v=a.Preliminary}else{if(v=="Marketing"){v=a.Marketing}else{if(v=="Review"){v=a.Review}else{if(v=="Active"){v=a.Active}else{if(v=="Inactive"){v=a.Inactive}}}}}var t=new UWA.Element("div",{id:"pcStatus",html:"<span title="+a.Maturity+" class=type>"+a.Maturity+":"+v+"</span>"});var u=new UWA.Element("div",{id:"pcDesc",html:"<span class=type>"+a.Owner+":"+this.model.get("owner")+"</span>",styles:{"white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}});var s=new UWA.Element("div",{id:"pcCont"});s.appendChild(t);s.appendChild(u);return s.innerHTML},icon:function(){return this.model.get("icon")},expression:function(){var s="";var u=this.model.get("displayexpression");if(u===r.options.emptyContextText){s+='<span style="color:orange;" class="fonticon fonticon-attention"></span>'}s+=u;s+="";s=s.replace(/\n/ig,"<br/>");var t=new UWA.Element("div",{id:"expressionContent",html:s,styles:{}});return t.innerHTML}},contextualActions:r.contextualMenuActions},views:[{id:"tile",title:a.Model_Tile_Title,view:p,itemView:n,defaultView:true}],emptyView:f.extend({defaultOptions:{title:'<div><div><img src="'+r.imgUrlModelMed+'"/></div><div class="noModelsErrorMessage">'+r.options.noModelsErrorMessage+"</div></div>"}}),events:{onItemViewClick:function(t,s){r.options.editActionCallback(r.collection.get(s.model.id))}}}});this.modelSetViewDiv=this.modelSetView.render();this.modelSetViewDiv.inject(this.options.parentElement);this.adjustTileStyles();this.adjustTileFlexStyles()},adjustTileStyles:function(){var q="calc(100% - 1px)";if((navigator.userAgent.indexOf("MSIE")!=-1)||(!!document.documentMode==true)){q="calc(100% - 10px)"}else{q="calc(100% - 1px)"}this.modelSetViewDiv.getElement(".set-header").setStyles({display:"none"});if(this.options.mode==="EditEvolution"){this.modelSetViewDiv.getElement(".set-contents").setStyles({height:"100%"});this.modelSetViewDiv.getElement(".grid-container").setStyles({width:q})}else{if(this.options.mode==="SessionEffectivity"){this.modelSetViewDiv.getElement(".set-contents").setStyles({height:"calc(100% - 50px)"});this.modelSetViewDiv.getElement(".grid-container").setStyles({width:q})}else{if(this.options.mode==="Applicability"){this.modelSetViewDiv.getElement(".set-contents").setStyles({height:"calc(100% - 50px)"});this.modelSetViewDiv.getElement(".grid-container").setStyles({width:"calc(100% - 10px)"})}}}if(this.options.Access.SetApplicability=="false"||this.options.Access.SetSessionEffectvity=="false"||this.options.Access.SetEvolutionEffectvity=="false"){this.modelSetViewDiv.getElements(".CfgCustomModelTile-actions").forEach(function(r){r.setStyles({display:"none"})})}},adjustTileFlexStyles:function(){var q=this.modelSetViewDiv.getElements(".CfgCustomModelTile-container");for(var r=0;r<q.length;r++){q[r].setStyles({flex:"0 0 100%"});q[r].setStyles({outline:"none"})}}});return g});