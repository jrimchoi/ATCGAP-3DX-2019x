define("DS/FCSAdmUI/Util/FCSUtils",["UWA/Class","i18n!DS/FCSAdmUI/assets/nls/FCSAdm"],function(b,d){var c=b.extend({countcallback:function(e){return e.toLocaleString()+" "+d.files},sizecallback:function(e){var f=["","K","M","G","T","P","E","Z","Y"];var g=0;while(e>=1000){e=Math.floor(e);e=e/1000;g++}return e.toLocaleString()+" "+f[g]+d.byteSuffix},filespeedcallback:function(f,e){return d.speed+" "+f+" "+d.files+"/s, "+d.remaining+" "+e},sizespeedcallback:function(f,e){return d.speed+" "+a.sizecallback(f)+"/s, "+d.remaining+" "+e},});var a=c.singleton({});return a});define("DS/FCSAdmUI/Model/StoreDetailsModel",["UWA/Core","UWA/Class/Model",],function(d,c){var b="passport",a="json";return c.extend({defaults:{name:"",path:"",description:"",url:"",locations:[],},setup:function(){if(this.get("path")){this.set("path",this.get("path").replace(/\\/g,"/"))}},getName:function(){return this.get("name")},sync:function(g,f,e){e.timeout=15000;if(g==="read"){e.type=a}e.proxy=b;e.cache=-1;return this._parent(g,f,e)}})});"use strict";define("DS/FCSAdmUI/FCSTableView",["UWA/Core","UWA/Class/View","DS/UIKIT/Alert",],function(c,b,a){return b.extend({render:function(){this.container.addContent({tag:"table",id:"fcs-root-table",html:[this.siteList.elements.container,this.storeList.elements.container]});return this.container},setup:function(d){this.container=c.createElement("div");var e=new a({className:"fcs-alert",closable:true,visible:true,autoHide:true,renderTo:this.container,messageClassName:"error"});e.elements.container.setStyle("visibility","visible");this.siteList=d.siteList;this.storeList=d.storeList;this.storeList.alert=e},})});define("DS/FCSAdmUI/Util/SpeedCalculator",["UWA/Class","i18n!DS/FCSAdmUI/assets/nls/FCSAdm"],function(b,f){var d=30;var a=5;var e=5000;var c=function(g){if(!g.ready()){return}var l=g.values[(g.index+1)%g.count];var h=l[0];var k=l[1];var l=g.values[(g.index)];var j=l[0];var i=l[1];g.speed=(i-k)/(j-h);g.remaining=(g.maxValue-i)/g.speed;g.calculated=true};return b.extend({init:function(g){this.calculated=false;this.speed=0;this.remaining=0;this.index=0;this.count=0;this.values=[[new Date().getTime(),0]];this.maxValue=g.maxValue},addTick:function(g){this.index=(this.index+1)%d;this.values[this.index]=[new Date().getTime(),g];this.calculated=false;if(this.count<d){this.count++}},ready:function(){return this.count>=a},getSpeed:function(){if(!this.calculated){c(this)}return Math.floor(this.speed*1000)},getRemaining:function(){if(!this.calculated){c(this)}return Math.floor(this.remaining)},getEstimatedRemaining:function(){if(!this.calculated){c(this)}var k=Math.floor(this.remaining);var k=k-k%e;var i=new Date(k);var h="";var j=i.getUTCFullYear()-1970;if(j>0){h=j+" "+f.years}if(i.getUTCMonth()>0){h+=" "+i.getUTCMonth()+" "+f.months}var g=i.getUTCDate()-1;if(g>0){h+=" "+g+" "+f.days}if(i.getUTCHours()>0){h+=" "+i.getUTCHours()+" "+f.hours}if(i.getUTCMinutes()>0){h+=" "+i.getUTCMinutes()+" "+f.minutes}h+=" "+i.getUTCSeconds()+" "+f.secondes;return h},})});define("DS/FCSAdmUI/Details/FCSItemDetails",["UWA/Class/View","UWA/Core","UWA/Utils","DS/UIKIT/Alert","DS/UIKIT/Input/Button","DS/UIKIT/Mask","DS/UIKIT/Modal","DS/UIKIT/SuperModal","DS/W3DXComponents/IdCard","i18n!DS/FCSAdmUI/assets/nls/FCSAdm"],function(a,f,d,g,h,c,i,b,e,j){return a.extend({init:function(k){this._parent(k);this.model=k.model;this.newtitle=this.model.get("name");this.url=k.options.url;this.inEditMode=false,this.header=f.createElement("div",{"class":"header"});this.idCard=this.buildHeader();this.header.setContent(this.idCard);this.body=f.createElement("div",{"class":"body"});this.footer=f.createElement("div",{"class":"footer",styles:{"text-align":"right"}});this.elements.container=f.createElement("div",{"class":"detailed",styles:{"min-height":"30px"},html:[this.header,this.body,this.footer]});this.alert=new g({className:"fcs-alert",closable:true,renderTo:this.elements.container,visible:true,autoHide:true,messageClassName:"error"});this.alert.elements.container.setStyle("visibility","visible");this.idCard.selectFacet(0);this.mask()},render:function(){this.setBody(this.getFacet(this.idCard.getSelectedFacet()));this.setFooter(this.getButtons());this.unmask();return this.elements.container},setBody:function(k){this.body.setContent([k,{styles:{clear:"both"}}])},setFooter:function(k){this.footer.setContent(k)},buildHeader:function(){var l=this;var m=this.buildFacets();var n=[];n.push({text:j.editProperties,icon:"pencil",handler:function(){if(!l.options.isAdmin){l.alert.add(j.notAdmin);return}l.inEditMode=true;this.selectFacet(0);l.refresh();this.switchToEditMode()}});n.push({text:j.deleteElem,icon:"trash",handler:function(){if(!l.options.isAdmin){l.alert.add(j.notAdmin);return}l.validateDelete()},});var k=new e({model:this.model,attributesMapping:{title:function(){return this.getName()},description:function(){return this.get("description")}},actions:n,facets:function(){return m}});this.listenTo(k,{});return k},endDelete:function(o){var n=this;var k=this.model.get("name");var m=this.getSuperModal();if(o){return this.alert.add(o)}var p=j.confirmDelete.format(this.kind,k);var l=function(){n.model.destroy({onComplete:function(){n.options.options.reload();n.options.options.setTableView()},onFailure:function(){m.destroy();n.alert.add(j.unableDelete.format(n.kind,k))}})};m.confirm(p,j.confirmDeleteTitle,function(q){if(q){l()}})},getSuperModal:function(){return new b({closable:false})},getButtons:function(){var l=this,k=[];if(!this.inEditMode){return}k.push(new h({value:j.save,events:{onClick:function(){l.save()}}}));k.push(new h({value:j.cancel,events:{onClick:function(){l.inEditMode=false;l.refresh();l.idCard.switchToViewMode()}}}));this.elements.container.buttons=k;return k},save:function(){this.mask();var n=this;var k={};var o=this.validate(k);if(!o){this.unmask();return}var l=this.getBody().getElement(".name");l=l.value;var m=this.getBody().getElement(".description");m=m.value;if(!l){this.alert.add(j.cannotBeEmpty.format(j.name));this.unmask();return}k.name=l;k.description=m;n.model.save(k,{onComplete:function(q,p){n.endSave()},onFailure:function(q,p){n.unmask();console.log(p);n.alert.add(j.unableToEdit.format(n.kind,l))},silent:true,wait:true})},endSave:function(){this.inEditMode=false;this.idCard.switchToViewMode();this.setFooter();this.model.dispatchEvent("onChange:id",[this.model]);this.model.dispatchEvent("onChange",[this.model]);this.reload()},refresh:function(){this.mask();this.render()},reload:function(){var k=this;this.mask();delete this.cache;this.model.fetch({onComplete:function(){k.refresh()},onFailure:function(l){k.unmask();console.log(l);k.alert.add(j.unableToRetrieve.format(k.model.get("name")))}})},destroy:function(){this.idCard.destroy()},getBody:function(){if(!this.content){this.content=this.elements.container}return this.content},mask:function(){if(!this.loader){c.mask(this.getBody());this.loader=true}},unmask:function(){if(this.loader){c.unmask(this.getBody())}this.loader=null}})});define("DS/FCSAdmUI/Model/SiteDetailsModel",["UWA/Core","UWA/Class/Model",],function(d,c){var b="passport",a="json";return c.extend({defaults:{name:"",description:"",locations:[]},setup:function(){},getName:function(){return this.get("name")},sync:function(g,f,e){e.timeout=15000;if(g==="read"){e.type=a}e.proxy=b;e.cache=-1;return this._parent(g,f,e)}})});define("DS/FCSAdmUI/Collection/FCSItemCollection",["UWA/Core","UWA/Class/Collection"],function(d,c){var b="passport",a="json";return c.extend({options:{timeout:15000,type:a,proxy:b,cache:-1},sync:function(g,f,e){e=this.mergeOptions(e);return this._parent(g,f,e)},parse:function(e){this.setMaxLimit(e.count);this.isAdmin=e.admin==="TRUE";return e.result},getMaxLimit:function(){return this.maxlimit},setMaxLimit:function(e){this.maxlimit=e},mergeOptions:function(e){var f=this.merge(e.data||{},this.options.data);e=this.merge(e||{},this.options);e.data=f;return e},merge:function(g,e){var h,f=Object.prototype.hasOwnProperty;for(h in e){if(f.call(e,h)){if(g[h]===undefined){g[h]=e[h]}}}return g},})});define("DS/FCSAdmUI/Details/StatView",["UWA/Class/View","DS/UIKIT/Mask","DS/WAFData/WAFData","i18n!DS/FCSAdmUI/assets/nls/FCSAdm"],function(d,c,a,b){return d.extend({tagName:"div",className:"facet-stat",init:function(e){this.parent=e.parent;this.model=e.model},render:function(){var e={tag:"table","class":"fcs-definition",html:[{tag:"tbody",html:this.buildDefinitions()}]};return{html:[e,{styles:{clear:"both"}}]}},buildDefinitionElem:function(e,f,g){return{tag:"tr",styles:{height:"81px"},html:[{tag:"td",styles:{width:"50%"},text:e},{tag:"td",styles:{width:"50%"},html:this.buildField(f,g)}]}},buildField:function(f,i){var h="";var g=this;var e=UWA.createElement("span",{"class":"fcs-definition-value",text:h});c.mask(e);a.authenticatedRequest(this.model.collection.url+"/"+this.model.getName()+"/"+f,{onComplete:function(j){if(i){j=i(j)}e.innerHTML=j;c.unmask(e)},onFailure:function(j){g.parent.alert.add(j);c.unmask(e)}});return e},})});"use strict";define("DS/FCSAdmUI/FCSDetailsView",["UWA/Core","UWA/Class/View","DS/UIKIT/Input/Button","i18n!DS/FCSAdmUI/assets/nls/FCSAdm",],function(d,c,a,b){return c.extend({render:function(){return this.container},setup:function(e){this.detailViewContent=d.createElement("div");this.container=d.createElement("div",{id:"fcs-root-detail",html:[new a({value:b.backToTable,events:{onClick:e.setTableView}}),this.detailViewContent]})},setElem:function(e){this.detailViewContent.setContent(e)}})});"use strict";define("DS/FCSAdmUI/List/FCSItemList",["UWA/Class/View","UWA/Controls/Pager","DS/WAFData/WAFData","DS/UIKIT/Input/Button","DS/UIKIT/Tooltip","DS/UIKIT/Touch","DS/UIKIT/Mask","DS/W3DXComponents/Collections/ActionsCollection","i18n!DS/FCSAdmUI/assets/nls/FCSAdm"],function(b,a,h,f,g,c,d,e,j){var i="fcs-list-wrapper";return b.extend({setup:function(k){this._parent(k);this.loaded=false;this.url="";this.elements.container=UWA.createElement("tbody",{"class":i});this.elements.container.setContent({"class":"empty-body"});this.mask()},load:function(k){this.setOptions(k);this.url=k.platform.url;this.collection=this.getNewCollection();this.reload()},render:function(){this.getBody().setContent(this.buildContent());this.unmask()},getPersistedData:function(){var k=this;this.collection.fetch({onComplete:function(){k.loaded=true;k.render()},onFailure:function(){k.unmask();var l=j.unableToRetrieve.format(k.kind);k.addalert(l)}})},reload:function(){this.mask();this.loaded=false;if(this.options.platform&&this.options.platform!==null){this.getPersistedData()}},buildTile:function(p,y){var s=this;var l;var A;var m=p.get("name");if(p.get("pingurl")){var l=UWA.createElement("div",{"class":"circle circleUnknown",});var t=new g({target:l,body:j.statuschecking,position:"bottom",delay:{show:200}});var z=UWA.createElement("div",{"class":"circlewrapper",html:[l,t]});h.request(p.get("pingurl"),{onComplete:function(){l.className="circle circleOK";t.setBody(j.statusOK)},onFailure:function(){l.className="circle circleKO";t.setBody(j.statusKO)}})}var k;if(y){var r=UWA.createElement("span",{tag:"span","class":"fonticon fonticon-2x fonticon-attention"});var o=new g({target:r,body:y,position:"bottom",delay:{show:200}});k=[r,o]}A={"class":"fcsinnercell",text:m};var x;var n;if(p.isDummy===true){x="fonticon-plus";n=this.nlsadd}else{x="fonticon-info";n=j.details}var w=UWA.createElement("span",{"class":"fonticon fonticon-fonticon "+x});var v=UWA.createElement("div",{"class":"fcs-edit",events:{click:function(B){B.stopPropagation();s.displayInfo(p)}}});var q=new g({target:v,body:n,position:"bottom",closeOnClick:true,delay:{show:200}});v.setContent([w,q]);var u={"class":"fcscell",html:[A,z,k,v,]};return u},buildInnerTitle:function(){var m=this;var k=this.nlsadd;var l=UWA.createElement("span",{"class":"fonticon fonticon-fonticon fonticon-plus"});var o=UWA.createElement("div",{"class":"fcs-edit",events:{click:function(p){p.stopPropagation();m.displayInfo(m.model)}}});var n=new g({target:o,body:k,position:"bottom",closeOnClick:true,delay:{show:200}});o.setContent([l,n]);return[{styles:{position:"relative"},html:[{"class":"fcstitle",html:[{tag:"span","class":"fonticon "+this.fonticon},{tag:"span",text:UWA.i18n("{0}").format(this.kind)}]},o]}]},getBody:function(){if(!this.content){this.content=this.elements.container}return this.content},mask:function(){if(!this.isMasked()){d.mask(this.getBody());this.masked=true}},unmask:function(){if(this.isMasked()){d.unmask(this.getBody());this.masked=false}},isMasked:function(){return this.masked}})});define("DS/FCSAdmUI/Model/LocationDetailsModel",["UWA/Core","UWA/Class/Model",],function(d,c){var b="passport",a="json";return c.extend({defaults:{name:"",path:"",description:"",url:"",},setup:function(){if(this.get("path")){this.set("path",this.get("path").replace(/\\/g,"/"))}},getName:function(){return this.get("name")},sync:function(g,f,e){e.timeout=15000;if(g==="read"){e.type=a}e.proxy=b;e.cache=-1;return this._parent(g,f,e)}})});define("DS/FCSAdmUI/DetailsCreate/FCSItemDetailsCreate",["UWA/Class/View","UWA/Core","UWA/Utils","DS/UIKIT/Alert","DS/UIKIT/Input/Button","DS/UIKIT/Mask","DS/UIKIT/Modal","DS/W3DXComponents/IdCard","i18n!DS/FCSAdmUI/assets/nls/FCSAdm"],function(a,d,c,f,g,b,h,e,i){return a.extend({init:function(j){this._parent(j);this.options=j.options;var k=this.getContent();this.buildContainer(k);this.elements.container.inject(document.body).show();this.elements.container.setFooter(this.getButtons(this.elements.container));this.alert=new f({className:"fcs-alert",closable:true,visible:true,autoHide:true,messageClassName:"error"}).inject(this.elements.container.getBody())},buildContainer:function(j){this.elements.container=new h({closable:true,className:"fcs-root big-modal "+this.kind+"-details",header:"<h3>"+this.nlsCreationTitle+"</h3>",body:j,footer:"",events:{onHide:function(){this.destroy()}}})},getContent:function(){return{"class":this.kind+"-details-information",html:this.buildView()}},buildView:function(){var j=[this.buildDefinitionElem(i.name,"name"),this.buildDefinitionElem(i.description,"description")];j=j.concat(this.buildDefinitions());return{tag:"div",html:[{tag:"table","class":"fcs-definition",html:[{tag:"tbody",html:j}]}]}},getButtons:function(l){var k=this,j=[];j.push(new g({value:i.save,events:{onClick:function(){k.save()}}}));j.push(new g({value:i.cancel,events:{onClick:function(){l.hide()}}}));this.elements.container.buttons=j;return j},save:function(){this.mask();var l=this;var m=this.validate();if(!m){this.unmask();return}var j=this.getBody().getElement(".name").value;var k=this.getBody().getElement(".description").value;if(!j){this.alert.add(i.cannotBeEmpty.format(i.name));this.unmask();return}this.model.set("name",j,{silent:true});this.model.set("description",k,{silent:true});this.model.save({},{onComplete:function(){l.endSave()},onFailure:function(o,n){l.unmask();console.log(n);l.alert.add(i.unableToCreate.format(l.kind,j))},silent:true})},endSave:function(){this.collection.add(this.model);this.options.reload();delete this.model.url;delete this.model.isDummy;this.elements.container.destroy();this.print()},getBody:function(){if(!this.content){this.content=this.elements.container.elements.body}return this.content},buildField:function(j,l,k){return{tag:"input","class":l,type:"text",styles:k,placeholder:j,maxlength:128}},buildDefinitionElem:function(j,k){return{tag:"tr",html:[{tag:"td",text:j},{tag:"td",html:this.buildField(j,k)}]}},mask:function(){b.mask(this.getBody())},unmask:function(){b.unmask(this.getBody())}})});define("DS/FCSAdmUI/Details/ActionView",["UWA/Class/View","DS/Controls/ProgressBar","DS/UIKIT/Input/Button","DS/UIKIT/Mask","DS/WAFData/WAFData","DS/FCSAdmUI/Util/SpeedCalculator","DS/FCSAdmUI/Util/FCSUtils","i18n!DS/FCSAdmUI/assets/nls/FCSAdm"],function(a,m,g,e,h,l,i,k){var d="succeeded";var b="aborted";var j="nothing";var c="failed";var f=function(n){if(n==b){return k.aborted}if(n==c){return k.failed}if(n==d){return k.success}};return a.extend({tagName:"div",className:"facet-action",integritycallback:{speedprint:i.filespeedcallback,count:k.missingfilesnumber,size:k.nbfiles,withcountunit:function(n){return n},withsizeunit:function(n){return n}},purgecallback:{speedprint:i.filespeedcallback,count:k.nbfiles,size:k.sizefiles,withcountunit:function(n){return n},withsizeunit:function(n){return i.sizecallback(n)}},synccallback:{speedprint:i.sizespeedcallback,count:k.nbfiles,size:k.sizefiles,withcountunit:function(n){return n},withsizeunit:function(n){return i.sizecallback(n)}},init:function(n){this._parent(n);this.model=n.model;this.parent=n.parent},render:function(){var n={tag:"table","class":"fcs-definition",html:[{tag:"tbody",html:this.buildDefinitions()}]};return{html:[n,{styles:{clear:"both"}}]}},buildDefinitionElem:function(o,p,n,r){var q=UWA.createElement("div",{"class":"fcs-previous-value",});e.mask(q);return{tag:"tr",styles:{height:"81px"},html:[{tag:"td",styles:{width:"200px"},text:o},{tag:"td",styles:{width:"initial"},html:this.buildField(p,n,r,q)},{tag:"td",styles:{width:"300px"},html:q}]}},buildField:function(p,y,A,v){var t=this;var x="";var u=UWA.createElement("div",{"class":"fcs-definition-value",text:x});e.mask(u);var r=new m({value:0});var q=null;var w=UWA.createElement("div");var C=UWA.createElement("div",{styles:{width:"80%","float":"left"},html:[r,w]});var z=new g({value:k.abort,events:{onClick:function(){h.authenticatedRequest(t.model.collection.url+"/"+t.model.getName()+"/"+p+"/abort/"+y)}}});var s=UWA.createElement("div",{html:[C,z]});var o=0;var n=false;var B=function(){if(!u.isInjected()){return}h.authenticatedRequest(t.model.collection.url+"/"+t.model.getName()+"/"+p+"/status/"+y,{responseType:"json",type:"json",onComplete:function(D){t.buildPreviousStatusField(v,D.previous,p,y,A);if(D.current.result===j&&n){n=false;if(D.previous.result===d){r.value=100}else{if(D.previous.result===c){t.parent.alert.add(k.failure)}}setTimeout(B,1000);return}else{if(D.current.result===j){u.setContent(new g({value:k.startPurge,events:{onClick:function(){e.mask(u);h.authenticatedRequest(t.model.collection.url+"/"+t.model.getName()+"/"+p+"/run/"+y,{onComplete:function(){q=null;w.innerHTML="";r.value=0;B()},onFailure:function(){e.unmask(u);t.parent.alert.add(k.failedtostart)}})}}}))}else{if(!n){n=true;u.setContent(s)}if(!q&&D.current.totalSize!=0){q=new l({maxValue:D.current.totalSize})}if(q){q.addTick(D.current.curSize);if(q.ready()){w.innerHTML=A.speedprint(q.getSpeed(),q.getEstimatedRemaining())}else{w.innerHTML=k.calculating}}e.unmask(u);delete t.parent.cache;r.value=D.current.totalSize==0?0:100*D.current.curSize/D.current.totalSize;setTimeout(B,2000)}}},onFailure:function(){t.parent.alert.add(k.failedToRetrieveStatus)}})};setTimeout(B,0);return u},buildPreviousStatusField:function(t,n,r,o,u){if(n.result==j){t.setContent({text:k.nopreviousresult});return}var p;if(n.hasreport=="true"&&n.count>0){var s=this;p={styles:{"text-align":"right"},html:new g({value:k.downloadreport,events:{onClick:function(){h.authenticatedRequest(s.model.collection.url+"/"+s.model.getName()+"/"+r+"/getreport/"+o,{onComplete:function(v){window.location.assign(v)},onFailure:function(){s.parent.alert.add(k.failedtodownloadreport)}})}}})}}var q=[{text:k.previousresult},{tag:"dl",html:[this.generatepreviousresultfield(k.result,f(n.result)),this.generatepreviousresultfield(k.start,new Date(parseInt(n.start)).toLocaleString()),this.generatepreviousresultfield(k.end,new Date(parseInt(n.end)).toLocaleString()),this.generatepreviousresultfield(u.size,u.withsizeunit(n.size)),this.generatepreviousresultfield(u.count,u.withcountunit(n.count)),{styles:{clear:"both"}}]},p];t.setContent(q)},generatepreviousresultfield:function(n,o){if(!n){return{}}return{styles:{clear:"both"},html:[{tag:"dt",text:n},{tag:"dd",text:o}]}},})});define("DS/FCSAdmUI/Collection/SiteCollection",["DS/FCSAdmUI/Collection/FCSItemCollection","DS/FCSAdmUI/Model/SiteDetailsModel"],function(b,a){return b.extend({model:a})});define("DS/FCSAdmUI/Details/SiteStatView",["DS/FCSAdmUI/Details/StatView","DS/FCSAdmUI/Util/FCSUtils","i18n!DS/FCSAdmUI/assets/nls/FCSAdm"],function(b,a,c){return b.extend({init:function(d){this._parent(d)},buildDefinitions:function(){return[this.buildDefinitionElem(c.size,"size",a.sizecallback),this.buildDefinitionElem(c.count,"count",a.countcallback),]}})});define("DS/FCSAdmUI/Details/SiteDetails",["UWA/Class/View","DS/FCSAdmUI/Details/FCSItemDetails","DS/FCSAdmUI/Details/SiteStatView","i18n!DS/FCSAdmUI/assets/nls/FCSAdm"],function(b,i,d,h){var f=0;var e=1;var g=2;var a=b.extend({tagName:"div",className:"facet-def",init:function(j){this.parent=j.parent;this.model=j.model},buildField:function(k,l){var j;var m=this.model.get(l)===null?"":this.model.get(l);j={"class":"fcs-definition-value "+l,tag:"input",type:"text",value:m,placeholder:k,maxlength:128};return j},render:function(){var j=this;return{html:[this.buildDefinitions(),{styles:{clear:"both"}}]}},buildDefinitions:function(){var l=this;var k=[];if(!this.parent.inEditMode){var j=this.model.get("locations");j.forEach(function(n){var m=l.parent.options.options.locationList.collection.get(n);if(!m){return}k.push({styles:{"float":"left",margin:"10px"},"class":"maintable",html:l.parent.options.options.locationList.buildTile(m)})});return{html:[{tag:"h3",text:h.Locations},k]}}else{k.push(this.buildDefinitionElem(h.name,"name"));k.push(this.buildDefinitionElem(h.description,"description"));return{tag:"table","class":"fcs-definition",html:[{tag:"tbody",html:k}]}}},buildDefinitionElem:function(j,k){return{tag:"tr",html:[{tag:"td",text:j},{tag:"td",html:this.buildField(j,k)}]}},});var c=b.extend({render:function(){return{}},});return i.extend({kind:h.Site,kindService:"sites",init:function(j){this._parent(j)},buildFacets:function(k){var j=this;var l=[];l.push({text:h.properties,icon:"doc-text",handler:function(){j.setBody(j.getFacet(f))}});l.push({text:h.analitics,icon:"chart-bar",handler:function(){j.setBody(j.getFacet(e))}});if(this.options.isAdmin){l.push({text:h.action,icon:"cog",handler:function(){j.setBody(j.getFacet(g))}})}return l},getFacet:function(j){if(j==e&&UWA.is(this.cache)){return this.cache}switch(j){case f:return new a({model:this.model,parent:this,}).render();break;case e:this.cache=new d({model:this.model,parent:this,}).render();return this.cache;break;case g:return new c({model:this.model,parent:this,}).render();break}},validate:function(){return true},validateDelete:function(){var j=this.model.get("locations");if(j.length!=0){this.endDelete(h.cannotDeleteSiteWithLocations);return}this.endDelete()}})});define("DS/FCSAdmUI/Details/LocationActionView",["DS/FCSAdmUI/Details/ActionView","DS/FCSAdmUI/Util/FCSUtils","i18n!DS/FCSAdmUI/assets/nls/FCSAdm"],function(b,a,c){return b.extend({init:function(d){this._parent(d)},buildDefinitions:function(){return[this.buildDefinitionElem(c.purge,"purge",this.model.get("store"),this.purgecallback),this.buildDefinitionElem(c.synchronize,"sync",this.model.get("store"),this.synccallback),this.buildDefinitionElem(c.validatefileexist,"integritycheck",this.model.get("store"),this.integritycallback)]}})});define("DS/FCSAdmUI/Collection/StoreCollection",["DS/FCSAdmUI/Collection/FCSItemCollection","DS/FCSAdmUI/Model/StoreDetailsModel"],function(b,a){return b.extend({model:a})});define("DS/FCSAdmUI/Details/StoreActionView",["DS/FCSAdmUI/Details/ActionView","DS/FCSAdmUI/Util/FCSUtils","i18n!DS/FCSAdmUI/assets/nls/FCSAdm"],function(b,a,c){return b.extend({init:function(d){this._parent(d)},buildDefinitions:function(){var f=this;var d=this.model.get("locations");var e=[];d.forEach(function(g){e.push(f.buildDefinitionElem(c.synchronizefromlocation.format(g),"sync",g,f.synccallback))});e.push(this.buildDefinitionElem(c.validatefileexist,"integritycheck",this.model.getName(),this.integritycallback));return e}})});define("DS/FCSAdmUI/Details/LocationStatView",["DS/FCSAdmUI/Details/StatView","DS/FCSAdmUI/Util/FCSUtils","i18n!DS/FCSAdmUI/assets/nls/FCSAdm"],function(b,a,c){return b.extend({init:function(d){this._parent(d)},buildDefinitions:function(){var d=[];d.push(this.buildDefinitionElem(c.size,"size",a.sizecallback));d.push(this.buildDefinitionElem(c.count,"count",a.countcallback));if(this.parent.options.isAdmin){d.push(this.buildDefinitionElem(c.sizeToReplicateToLocation,"validateTo/"+this.model.get("store"),a.sizecallback));d.push(this.buildDefinitionElem(c.sizeToReplicateToStore,"validateFrom/"+this.model.get("store"),a.sizecallback))}return d}})});define("DS/FCSAdmUI/Details/LocationDetails",["UWA/Class/View","DS/WAFData/WAFData","DS/FCSAdmUI/Details/FCSItemDetails","DS/FCSAdmUI/Details/LocationActionView","DS/FCSAdmUI/Details/LocationStatView","DS/FCSAdmUI/Util/FCSUtils","i18n!DS/FCSAdmUI/assets/nls/FCSAdm"],function(b,h,m,e,d,j,l){var i=0;var g=1;var k=2;var f=2;var c={};var a=b.extend({tagName:"div",className:"facet-def",init:function(n){this.parent=n.parent;this.model=n.model},buildField:function(o,p){var n;var q=this.model.get(p)===null?"":this.model.get(p);if(this.parent.inEditMode){n={"class":"fcs-definition-value "+p,tag:"input",type:"text",value:q,placeholder:o,maxlength:128}}else{n={"class":"fcs-definition-value",tag:"span",text:q}}return n},render:function(){var n=this;return{html:[this.buildDefinitions(),{styles:{clear:"both"}}]}},buildDefinitions:function(){var n=[];if(this.parent.inEditMode){n.push(this.buildDefinitionElem(l.name,"name"));n.push(this.buildDefinitionElem(l.description,"description"))}n.push(this.buildDefinitionElem(l.path,"path"));n.push(this.buildDefinitionElem(l.url,"url"));if(!this.parent.inEditMode){n.push(this.buildDefinitionStore());n.push(this.buildDefinitionSite())}return{tag:"table","class":"fcs-definition",html:[{tag:"tbody",html:n}]}},buildDefinitionElem:function(n,o){return{tag:"tr",html:[{tag:"td",text:n},{tag:"td",html:this.buildField(n,o)}]}},buildDefinitionStore:function(){var p=this.model.get("store");var n=this.parent.options.options.storeList.collection.get(p);var o={};if(n){o={styles:{"float":"right"},html:this.parent.options.options.storeList.buildTile(n)}}return{tag:"tr",html:[{tag:"td",text:l.Store},{tag:"td",html:o}]}},buildDefinitionSite:function(){var n=this.model.get("site");var o=this.parent.options.options.siteList.collection.get(n);var p={};if(o){p={styles:{"float":"right"},html:this.parent.options.options.siteList.buildTile(o)}}return{tag:"tr",html:[{tag:"td",text:l.Site},{tag:"td",html:p}]}}});return m.extend({kind:l.Location,kindService:"locations",init:function(n){this._parent(n)},buildFacets:function(){var n=this;var o=[];o.push({text:l.properties,icon:"doc-text",handler:function(){n.setBody(n.getFacet(i))}});o.push({text:l.analitics,icon:"chart-bar",handler:function(){n.setBody(n.getFacet(g))}});if(this.options.isAdmin){o.push({text:l.action,icon:"cog",handler:function(){n.setBody(n.getFacet(k))}})}return o},getFacet:function(n){if(n==g&&UWA.is(this.cache)){return this.cache}switch(n){case i:return new a({model:this.model,parent:this,}).render();break;case g:this.cache=new d({model:this.model,parent:this,}).render();return this.cache;break;case k:return new e({model:this.model,parent:this,}).render();break}},validate:function(n){var o=this.getBody().getElement(".url");o=o.value;var p=this.getBody().getElement(".path");p=p.value;if(!p){this.alert.add(l.cannotBeEmpty.format(l.path));return false}if(!o){this.alert.add(l.cannotBeEmpty.format(l.url));return false}if(!o.startsWith("https://")){this.alert.add(l.urlnotHttps);return false}n.url=o;n.path=p;return true},validateDelete:function(){var n=this;h.authenticatedRequest(this.model.collection.url+"/"+this.model.getName()+"/count",{onComplete:function(o){if(o!=0){return n.endDelete(l.locationNotEmpty)}n.endDelete()},onFailure:function(o){console.log(o);n.endDelete(l.locationNotEmpty)}})}})});define("DS/FCSAdmUI/Details/StoreStatView",["DS/FCSAdmUI/Details/StatView","DS/FCSAdmUI/Util/FCSUtils","i18n!DS/FCSAdmUI/assets/nls/FCSAdm"],function(b,a,c){return b.extend({init:function(d){this._parent(d)},buildDefinitions:function(){return[this.buildDefinitionElem(c.size,"size",a.sizecallback),this.buildDefinitionElem(c.count,"count",a.countcallback),]}})});define("DS/FCSAdmUI/Details/StoreDetails",["UWA/Class/View","DS/WAFData/WAFData","DS/FCSAdmUI/Details/FCSItemDetails","DS/FCSAdmUI/Details/StoreActionView","DS/FCSAdmUI/Details/StoreStatView","i18n!DS/FCSAdmUI/assets/nls/FCSAdm"],function(c,f,j,a,d,i){var g=0;var e=1;var h=2;var b=c.extend({tagName:"div",className:"facet-def",init:function(k){this.parent=k.parent;this.model=k.model},buildField:function(l,m){var k;var n=this.model.get(m)===null?"":this.model.get(m);if(this.parent.inEditMode){k={"class":"fcs-definition-value "+m,tag:"input",type:"text",value:n,placeholder:l,maxlength:128}}else{k={"class":"fcs-definition-value",tag:"span",text:n}}return k},render:function(){var k=this;return{html:[this.buildDefinitions(),{styles:{clear:"both"}}]}},buildDefinitions:function(){var m=this;var o={};var l=[];if(this.parent.inEditMode){l.push(this.buildDefinitionElem(i.name,"name"));l.push(this.buildDefinitionElem(i.description,"description"))}else{var n=[];var k=this.model.get("locations");k.forEach(function(q){var p=m.parent.options.options.locationList.collection.get(q);if(!p){return}n.push({styles:{"float":"left",margin:"10px"},"class":"maintable",html:m.parent.options.options.locationList.buildTile(p)})});o={html:[{tag:"h3",text:i.Locations},n]}}l.push(this.buildDefinitionElem(i.path,"path"));l.push(this.buildDefinitionElem(i.url,"url"));return{html:[{tag:"table","class":"fcs-definition",html:[{tag:"tbody",html:l}]},o]}},buildDefinitionElem:function(k,l){return{tag:"tr",html:[{tag:"td",text:k},{tag:"td",html:this.buildField(k,l)}]}}});return j.extend({kind:i.Store,kindService:"stores",init:function(k){this._parent(k)},buildFacets:function(l){var k=this;var m=[];m.push({text:i.properties,icon:"doc-text",handler:function(){k.setBody(k.getFacet(g))}});m.push({text:i.analitics,icon:"chart-bar",handler:function(){k.setBody(k.getFacet(e))}});if(this.options.isAdmin){m.push({text:i.action,icon:"cog",handler:function(){k.setBody(k.getFacet(h))}})}return m},getFacet:function(k){if(k==e&&UWA.is(this.cache)){return this.cache}switch(k){case g:return new b({model:this.model,parent:this,}).render();break;case e:this.cache=new d({model:this.model,parent:this,}).render();return this.cache;break;case h:return new a({model:this.model,parent:this,}).render();break}},validate:function(k){var l=this.getBody().getElement(".url").value;var m=this.getBody().getElement(".path").value;if(!m){this.alert.add(i.cannotBeEmpty.format(i.path));return false}if(!l){this.alert.add(i.cannotBeEmpty.format(i.url));return false}if(!l.startsWith("https://")){this.alert.add(i.urlnotHttps);return false}k.url=l;k.path=m;return true},validateDelete:function(){var k=this.model.get("locations");if(k.length!=0){return this.endDelete(i.cannotDeleteStoreWithLocations)}var l=this;f.authenticatedRequest(this.model.collection.url+"/"+this.model.getName()+"/count",{onComplete:function(m){if(m!=0){return l.endDelete(i.storeNotEmpty)}l.endDelete()},onFailure:function(m){l.endDelete(m)}})}})});define("DS/FCSAdmUI/DetailsCreate/SiteDetailsCreate",["DS/FCSAdmUI/DetailsCreate/FCSItemDetailsCreate","DS/FCSAdmUI/Details/SiteDetails","i18n!DS/FCSAdmUI/assets/nls/FCSAdm"],function(a,b,c){return a.extend({kind:c.Site,nlsCreationTitle:c.SiteCreationTitle,buildDefinitions:function(){return[]},validate:function(){return true},print:function(){this.options.setDetailView(new b({model:this.model,collection:this.collection,options:this.options,isAdmin:true}))}})});define("DS/FCSAdmUI/DetailsCreate/StoreDetailsCreate",["DS/FCSAdmUI/DetailsCreate/FCSItemDetailsCreate","DS/FCSAdmUI/Details/StoreDetails","i18n!DS/FCSAdmUI/assets/nls/FCSAdm"],function(a,b,c){return a.extend({kind:c.Store,nlsCreationTitle:c.StoreCreationTitle,buildDefinitions:function(){return[this.buildDefinitionElem(c.path,"path"),this.buildDefinitionElem(c.url,"url")]},validate:function(){var d=this.getBody().getElement(".url");d=d.value;var e=this.getBody().getElement(".path");e=e.value;if(!e){this.alert.add(c.cannotBeEmpty.format(c.path));return false}if(!d){this.alert.add(c.cannotBeEmpty.format(c.url));return false}if(!d.startsWith("https://")){this.alert.add(c.urlnotHttps);return false}this.model.set("url",d,{silent:true});this.model.set("path",e,{silent:true});return true},print:function(){this.options.setDetailView(new b({model:this.model,collection:this.collection,options:this.options,isAdmin:true}))}})});define("DS/FCSAdmUI/Collection/LocationCollection",["DS/FCSAdmUI/Collection/FCSItemCollection","DS/FCSAdmUI/Model/LocationDetailsModel"],function(b,a){return b.extend({model:a})});"use strict";define("DS/FCSAdmUI/List/SiteList",["DS/FCSAdmUI/List/FCSItemList","DS/FCSAdmUI/DetailsCreate/SiteDetailsCreate","DS/FCSAdmUI/Details/SiteDetails","DS/FCSAdmUI/Collection/SiteCollection","DS/FCSAdmUI/Model/SiteDetailsModel","i18n!DS/FCSAdmUI/assets/nls/FCSAdm"],function(b,e,c,a,d,f){return b.extend({getNewCollection:function(){return new a({},{url:this.url+"/resources/fcsservices/sites"})},kind:f.Site,nlsadd:f.addSite,kindService:"sites",fonticon:"fonticon-globe",displayInfo:function(g){var h=this;if(!g){if(!this.isAdmin()){this.addalert(f.notAdmin);return}g=new d();g.url=this.url+"/resources/fcsservices/sites";new e({model:g,collection:this.collection,options:this.options})}else{this.options.setDetailView(new c({model:g,collection:this.collection,options:this.options,isAdmin:this.isAdmin()}))}},buildContent:function(){var g=this;this.options.storeList.render();return[{tag:"tr",html:[this.buildTitle()]},{tag:"tr",html:[this.buildTiles()]}]},buildTitle:function(){var g=this.collection.getMaxLimit();if(this.options.advancedMode.status){g++}return[this.options.storeList.buildTitle(),{tag:"th","class":"maintable",colspan:g,html:this.buildInnerTitle()}]},buildTiles:function(){var g=[];var h=this;if(h.options.advancedMode.status){g.push({tag:"th","class":"maintable",})}this.collection.forEach(function(i){g.push({tag:"th","class":"maintable",html:h.buildTile(i)})});return g},isAdmin:function(){return this.options.storeList.collection.isAdmin},addalert:function(g){return this.options.storeList.alert.add(g)},})});"use strict";define("DS/FCSAdmUI/List/StoreList",["DS/UIKIT/Mask","DS/FCSAdmUI/List/FCSItemList","DS/FCSAdmUI/DetailsCreate/StoreDetailsCreate","DS/FCSAdmUI/Details/StoreDetails","DS/FCSAdmUI/Collection/StoreCollection","DS/FCSAdmUI/Model/StoreDetailsModel","DS/FCSAdmUI/Model/LocationDetailsModel","i18n!DS/FCSAdmUI/assets/nls/FCSAdm"],function(h,d,f,b,e,c,a,g){return d.extend({storesSitesMap:null,getNewCollection:function(i){return new e({},{url:this.url+"/resources/fcsservices/stores"})},kind:g.Store,nlsadd:g.addStore,kindService:"stores",fonticon:"fonticon-folder",displayInfo:function(i){var j=this;if(!i){if(!this.isAdmin()){this.addalert(g.notAdmin);return}i=new c();i.url=this.url+"/resources/fcsservices/stores";new f({model:i,collection:this.collection,options:this.options})}else{this.options.setDetailView(new b({model:i,collection:this.collection,options:this.options,isAdmin:this.isAdmin()}))}},buildContent:function(){if(!this.loaded||!this.options.siteList.loaded||!this.options.locationList.loaded){return}var i=[];if(this.options.advancedMode.status){this.options.locationList.collection.forEach(function(m){i.push(m.get("name"))})}var l=new Map();this.options.siteList.collection.forEach(function(n){var m=n.get("locations");m.forEach(function(p){var o=l.get(p);if(!o){o=[];l.set(p,o)}o.push(n.getName())})});var k=this;k.storesSitesMap=new Map();this.collection.forEach(function(n){var o=new Map();k.storesSitesMap.set(n.getName(),o);var m=n.get("locations");m.forEach(function(p){var r=l.get(p);if(!r){r=["None"]}r.forEach(function(t){var s=o.get(t);if(!s){s=[];o.set(t,s)}s.push(k.options.locationList.collection.get(p))});var q=i.indexOf(p);if(q>-1){i.splice(q,1)}})});if(this.options.advancedMode.status){var j=new Map();k.storesSitesMap.set("None",j);i.forEach(function(m){var n=l.get(m);if(!n){n=["None"]}n.forEach(function(p){var o=j.get(p);if(!o){o=[];j.set(p,o)}o.push(k.options.locationList.collection.get(m))})})}return this.buildTiles()},buildTiles:function(k){var i=[];var j=this;if(this.options.advancedMode.status){i.push({tag:"tr",html:this.buildNoneRow()})}this.collection.forEach(function(l){i.push({tag:"tr",html:j.buildRow(l,k)})});return i},buildNoneRow:function(){var i=[];i.push({tag:"th","class":"maintable"});i.push(this.buildNone());return i},buildRow:function(i,k){var j=[];j.push({tag:"th","class":"maintable",html:this.buildTile(i)});j.push(this.buildLocations(i,k));return j},buildNone:function(){var l=[];var n=this;var o=this.options.locationList;var j=n.storesSitesMap;var p=[];var r;var k;var q;if(j){j=j.get("None")}if(j){j=j.get("None")}if(!j){l.push({tag:"td","class":"maintable",})}else{p=j.sort();var i=[];var m=true;p.forEach(function(s){if(!m){i.push({"class":"divider"})}m=false;i.push({html:o.buildTile(s)})});l.push({tag:"td","class":"maintable",html:i})}this.options.siteList.collection.forEach(function(w){var y=n.storesSitesMap;var t=[];var s;var v;var x;if(y){y=y.get("None")}if(y){y=y.get(w.getName())}if(!y){l.push({tag:"td","class":"maintable",});return}t=y.sort();var u=[];var z=true;t.forEach(function(A){if(!z){u.push({"class":"divider"})}z=false;A.set("site",w.getName());u.push({html:o.buildTile(A)})});l.push({tag:"td","class":"maintable",html:u})});return l},buildLocations:function(n){var l=[];var o=this;var p=this.options.locationList;if(o.options.advancedMode.status){var j=o.storesSitesMap;var q=[];var s;var k;var r;if(j){j=j.get(n.getName())}if(j){j=j.get("None")}if(!j){l.push({tag:"td","class":"maintable",})}else{q=j.sort();var i=[];var m=true;q.forEach(function(t){if(!m){i.push({"class":"divider"})}m=false;t.set("store",n.getName());i.push({html:p.buildTile(t)})});l.push({tag:"td","class":"maintable",html:i})}}this.options.siteList.collection.forEach(function(w){var t=o.storesSitesMap;var y=[];var B;var u;var z;if(t){t=t.get(n.getName())}if(t){t=t.get(w.getName())}if(!t){var A=new a();A.set("name",g.notReplicated);A.isDummy=true;y.push(A)}else{y=t.sort()}if(o.options.advancedMode.status){var v=[];var x=true;y.forEach(function(C){if(!x){v.push({"class":"divider"})}x=false;C.set("store",n.getName());C.set("site",w.getName());v.push({html:p.buildTile(C)})});l.push({tag:"td","class":"maintable",html:v})}else{if(y.length>1){z=g.multipleEntriesStoreSite}y[0].set("store",n.getName());y[0].set("site",w.getName());l.push({tag:"td","class":"maintable",html:p.buildTile(y[0],z)})}});return l},buildTitle:function(){return{tag:"th","class":"maintable",rowspan:2,html:this.buildInnerTitle()}},isAdmin:function(){return this.collection.isAdmin},addalert:function(i){return this.alert.add(i)},})});define("DS/FCSAdmUI/DetailsCreate/LocationDetailsCreate",["DS/FCSAdmUI/DetailsCreate/FCSItemDetailsCreate","DS/FCSAdmUI/Details/LocationDetails","i18n!DS/FCSAdmUI/assets/nls/FCSAdm"],function(a,b,c){return a.extend({kind:c.Location,nlsCreationTitle:c.LocationCreationTitle,buildDefinitions:function(){return[this.buildDefinitionElem(c.path,"path"),this.buildDefinitionElem(c.url,"url")]},validate:function(){var d=this.getBody().getElement(".url");d=d.value;var e=this.getBody().getElement(".path");e=e.value;if(!e){this.alert.add(c.cannotBeEmpty.format(c.path));return false}if(!d){this.alert.add(c.cannotBeEmpty.format(c.url));return false}if(!d.startsWith("https://")){this.alert.add(c.urlnotHttps);return false}this.model.set("url",d,{silent:true});this.model.set("path",e,{silent:true});return true},print:function(){this.options.setDetailView(new b({model:this.model,collection:this.collection,options:this.options,isAdmin:true}))}})});"use strict";define("DS/FCSAdmUI/List/LocationList",["DS/FCSAdmUI/List/FCSItemList","DS/FCSAdmUI/DetailsCreate/LocationDetailsCreate","DS/FCSAdmUI/Details/LocationDetails","DS/FCSAdmUI/Collection/LocationCollection","DS/FCSAdmUI/Model/LocationDetailsModel","i18n!DS/FCSAdmUI/assets/nls/FCSAdm"],function(b,e,d,c,a,f){return b.extend({storesSitesMap:null,sitesStoresMap:null,loaded:false,setup:function(g){this._parent(g)},load:function(g){this.setOptions(g);this.url=g.platform.url;this.collection=this.getNewCollection();this.reload()},getNewCollection:function(){return new c({},{url:this.url+"/resources/fcsservices/locations"})},kind:f.Location,nlsadd:f.addLocation,kindService:"locations",fonticon:"fonticon-network",displayInfo:function(g){var h=this;if(g.isDummy===true){if(!this.isAdmin()){this.addalert(f.notAdmin);return}g.url=this.url+"/resources/fcsservices/locations";new e({model:g,collection:this.collection,options:this.options})}else{this.options.setDetailView(new d({model:g,collection:this.collection,options:this.options,isAdmin:this.isAdmin()}))}},render:function(){this.options.storeList.render()},isAdmin:function(){return this.options.storeList.collection.isAdmin},addalert:function(g){return this.options.storeList.alert.add(g)},})});"use strict";define("DS/FCSAdmUI/FCSApp",["UWA/Core","UWA/Controls/Abstract","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/UIKIT/Scroller","DS/FCSAdmUI/FCSTableView","DS/FCSAdmUI/FCSDetailsView","DS/FCSAdmUI/List/StoreList","DS/FCSAdmUI/List/LocationList","DS/FCSAdmUI/List/SiteList","i18n!DS/FCSAdmUI/assets/nls/FCSAdm","css!DS/UIKIT/UIKIT"],function(e,g,b,c,a,d,f,h,i,j){var k=g.extend({defaultOptions:{widget:null},init:function(l){this._parent(l);this.elements.container="<div></div>"},isInit:false,platformId:null,tableView:null,detailView:null,detailViewContent:null,detailViewElem:null,advancedMode:{},onLoad:function(o){var q=this;console.log("onLoad");if(!this.isInit){console.log("isInit");this.isInit=true;o.body.style.padding=0;o.body.classList.add("fcs-root");this.locationList=new h();this.siteList=new i();this.storeList=new f();this.locationList.options.storeList=this.storeList;this.locationList.options.siteList=this.siteList;this.siteList.options.storeList=this.storeList;this.siteList.options.locationList=this.locationList;this.storeList.options.siteList=this.siteList;this.storeList.options.locationList=this.locationList;this.locationList.options.advancedMode=this.advancedMode;this.siteList.options.advancedMode=this.advancedMode;this.storeList.options.advancedMode=this.advancedMode;var n=e.createElement("div",{styles:{height:"100%"}});o.setBody(n);var p=function(){q.storeList.reload();q.locationList.reload();q.siteList.reload()};this.tableView=new a({siteList:this.siteList,storeList:this.storeList});var s=new c({element:this.tableView.render(),});s.getContent().setStyle("height","100%");var l=function(){q.detailViewElem.destroy();q.detailViewElem=null;p();n.removeChild(n.firstChild);s.inject(n)};this.detailView=new d({setTableView:l});var r=new c({element:this.detailView.render(),});r.getContent().setStyle("height","100%");var m=function(t){q.detailViewElem=t;q.detailView.setElem(t.render());n.removeChild(n.firstChild);r.inject(n)};this.locationList.options.setDetailView=m;this.siteList.options.setDetailView=m;this.storeList.options.setDetailView=m;this.locationList.options.reload=p;this.siteList.options.reload=p;this.storeList.options.reload=p;this.locationList.options.setTableView=l;this.siteList.options.setTableView=l;this.storeList.options.setTableView=l;s.inject(n)}},FCSLoading:function(l){var m=this;this.onLoad(l);b.getServiceUrl({serviceName:"3DSpace",onComplete:function(o){o.forEach(function(p){});m.advancedMode.status=l.getBool("advancedMode");var n=o[0];m.storeList.load({platform:n});m.locationList.load({platform:n});m.siteList.load({platform:n})}})},reload:function(l){this.advancedMode.status=l.getBool("advancedMode");if(this.detailViewElem){this.detailViewElem.reload()}else{this.storeList.reload();this.locationList.reload();this.siteList.reload()}}});return k});