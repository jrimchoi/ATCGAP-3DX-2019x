if(typeof define==="undefined"){define=function(e,d,f){ErrorReport=f(EK);define=undefined}}define("DS/CSICommandBinder/CSIErrorReport",["DS/ExperienceKernel/ExperienceKernel"],function(d){var c=function(i){if(d!==undefined&&typeof d.window==="object"){return d.window.console.error(i)}else{if(typeof csiLog==="function"){csiLog(i)}}};var g=function(i){if(d!==undefined&&typeof d.window==="object"){return d.window.console.warn(i)}else{if(typeof csiLog==="function"){csiLog(i)}}};var h=0;var b=100;var a=function(i){if(h>b){return false}if(h===b){g("CSI: too many warnings. No more warnings will be emitted")}else{g(i)}h++;return false};var f=function(i){this.context_=[];this.errors_="";this.contextChange_=false;this.lastContextDisplayed_=-1;this.warningMode_=i};f.prototype.tab_="  ";f.prototype.addTabs=function(l){var k="";for(var j=0;j<l;++j){k+=this.tab_}return k};f.prototype.pushContext=function(i){if(i.length>0){this.context_.push(i);this.contextChange_=true}};f.prototype.popContext=function(){this.context_.pop();this.contextChange_=true};f.prototype.pushMessage=function(i){if(!i.length){return false}if(this.errors_.length){this.errors_+="\n"}else{if(this.warningMode_){this.errors_="CSI Warning(s):\n"}else{this.errors_="CSI Error(s):\n"}}this.errors_+=this.getFullContext()+this.addTabs(this.context_.length)+i;return false};f.prototype.flush=function(){if(this.errors_.length){if(this.warningMode_){a(this.errors_)}else{c(this.errors_)}}this.clear()};f.prototype.clear=function(){this.errors_="";this.context_=[];this.contextChange_=false;this.lastContextDisplayed_=-1};f.prototype.getContext=function(i){return this.addTabs(i)+"in : <"+this.context_[i]+" >\n"};f.prototype.getFullContext=function(){var k="";if(this.contextChange_){if(this.context_.length>0){if(this.lastContextDisplayed_!==this.context_.length-1){if(this.lastContextDisplayed_+1>this.context_.length){k+=this.getContext(this.context_.length-1)}else{for(var j=this.lastContextDisplayed_+1;j<this.context_.length;++j){k+=this.getContext(j)}}}this.lastContextDisplayed_=this.context_.length-1}this.contextChange_=false}return k};var e={errors_:new f(),warnings_:new f(1)};e.errorNoPrefix=function(i){c(i);return false};e.error=function(i){c("CSI Error: "+i);return false};e.errorU=function(i){c("CSI Error: "+i);return undefined};e.warning=function(i){return a("CSI Warning: "+i)};e.deprecated=function(j){var i=a("CSI DEPRECATED: "+j);return i};e.pushContext=function(i){this.errors_.pushContext(i);this.warnings_.pushContext(i)};e.popContext=function(){this.errors_.popContext();this.warnings_.popContext()};e.pushError=function(i){return this.errors_.pushMessage(i)};e.pushWarning=function(i){return this.warnings_.pushMessage(i)};e.flush=function(){this.errors_.flush();this.warnings_.flush()};e.clear=function(){this.errors_.clear();this.warnings_.clear()};return e});