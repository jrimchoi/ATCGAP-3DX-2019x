define("UWA/Storage/Adapter/IndexDb",["UWA/Core","UWA/Storage/Adapter/Abstract","UWA/Utils/Client"],function(d,c,b){var a=c.extend({type:"IndexDb",limit:1024*200,connect:function(g){var e,f=this;f.indexedDB=b.getVendorProperty(window,"indexedDB");f.IDBTransaction=b.getVendorProperty(window,"IDBTransaction");f.IDBKeyRange=b.getVendorProperty(window,"IDBKeyRange");f.database=g;f.db=e=f.indexedDB.open("uwa-data-storage-"+f.database,1);e.onerror=function(){};e.onsuccess=function(){};this.updateCache()},updateCache:function(){this.storage.isReady=true},isAvailable:function(){return window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.msIndexedDB},get:function(e){this.interruptAccess();return this.data[e]||undefined},set:function(e,f){this.data[e]=f;this.updateCache();return f},rem:function(e){this.interruptAccess();var f=this.get(e);delete this.data[e];this.updateCache();return f}});return d.namespace("Storage/Adapter/IndexDb",a,d)});