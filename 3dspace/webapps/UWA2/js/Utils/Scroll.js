define("UWA/Utils/Scroll",["vendors/webcomponents/WeakMap","UWA/Core","UWA/Element","UWA/Fx","UWA/Event"],function(q,g,c,h,p){function i(s,r){var t=c.getStyle.call(s,r?"overflow-"+r:"overflow");return b(s)||t==="scroll"||t==="auto"}function e(s,r){while(s&&s.nodeType===1){if(i(s,r)){break}s=s.parentNode}return s}function o(s,r){return e(s&&s.parentNode,r)}function b(r){return c.getTagName.call(r)==="body"}function f(s){if(b(s)){s=c.getWindow.call(s)}var r=c.getScrolls.call(s);if(g.owns(r,"x")){r.left=r.x;r.top=r.y}return r}function k(t,s){if(b(t)){t=c.getWindow.call(t)}var r=f(t);if(!g.is(s.left)){s.left=r.left}if(!g.is(s.top)){s.top=r.top}if(g.is(t,"window")){t.scrollTo(s.left,s.top)}else{t.scrollTop=s.top;t.scrollLeft=s.left}}var d=h.extend({setSteps:function(s){var t,v={},u={};var r=f(this.element);for(t in s){if(Array.isArray(s[t])){v[t]=s[t][0];u[t]=s[t][1]}else{v[t]=r[t];u[t]=s[t]}}this.from=v;this.to=u},onAnimate:function(t,v,u){var r={};var s;for(s in v){r[s]=this.compute(v[s],u[s])}k(t,r)}});var n=new q();function j(u,s,t){t=g.extend({onComplete:null},t);var r=n.get(u);if(r){r.stop();r.dispatchEvent("onComplete")}r=new d(u,{transition:"sineOut",duration:r?100:200,events:{onComplete:function(){n["delete"](u);if(t.onComplete){t.onComplete()}}}});n.set(u,r);r.start(s)}function m(t,z){z=g.extend({top:false,bottom:false,margin:0,scrollable:null,smooth:false,onComplete:null},z);var w=z.scrollable||o(t);if(!w){return}var u=b(w);var s=c.getSize.call(u?c.getWindow.call(t):w);var y=c.getSize.call(t);var v=c.getOffsets.call(t);var r={top:v.y,left:v.x,bottom:0,right:0};var x=f(w);[0,1].forEach(function(E){var F=E?"top":"left";var B=E?"bottom":"right";var C=E?"height":"width";if(u){r[F]-=x[F]}else{r[F]-=c.getOffsets.call(w)[E?"y":"x"]}r[F]-=z.margin;r[B]=s[C]-r[F]-y[C]-2*z.margin;var D=r[F]<0||(r[B]<0&&r[B]<-r[F]);var A=r[B]<0;if(!z[B]&&(D||z[F])){x[F]+=r[F]}else{if(z[B]||A){x[F]-=r[B]}}});if(z.smooth){j(w,x,{onComplete:z.onComplete})}else{k(w,x);if(z.onComplete){z.onComplete()}}}function l(B,t){var u=e(p.getElement(t));var v=false;if(!this.isInjected(u)){var A=u.scrollHeight;var z=u.clientHeight;var w=u.scrollTop;var y=p.wheelDelta(t);var r=z!==A||(B&&B.onlyScrollable===false);var s=w>0;var x=w+z<A;if(r&&((y<0&&!x)||(y>0&&!s))){v=true}}else{v=true}if(v){p.stop(t)}}function a(u,t){var s=l.bind(u,t);c.addEvent.call(u,"mousewheel",s);return function r(){c.removeEvent.call(u,"mousewheel",s)}}return g.namespace("Utils/Scroll",{scrollToElement:m,smoothScroll:j,preventParentScroll:a,getClosestScrollable:e,getParentScrollable:o},g)});