define("UWA/Internal/Polyfill/Promise",["UWA/Internal/Immediate"],function(f){var a=new Function("return this")();var m;if(typeof a.Promise==="function"){return}function j(p){return p!==null&&p!==undefined&&Object(p)===p}function b(p){return typeof p==="function"&&Object.prototype.toString.call(p)==="[object Function]"}function i(p){return p instanceof m}function e(p){if(Array.isArray(p)){return p}if(typeof p.length!=="number"){throw new TypeError("bad iterable")}return Array.prototype.slice.call(p)}function l(q){if(!q){q=m}else{if(!b(q)){throw new TypeError("bad promise constructor")}}var r,p=this,s=function(u,t){p.resolve=u;p.reject=t};p.promise=Object.create(q.prototype||null);r=q.call(p.promise,s);if(!(b(p.resolve)&&b(p.reject))){throw new TypeError("bad promise constructor")}if(j(r)&&r!==p.promise){throw new TypeError("bad promise constructor")}}function k(p,q){if(!j(p)){return false}try{var s=p.then;if(!b(s)){return false}s.call(p,q.resolve,q.reject)}catch(r){q.reject(r)}return true}function d(r,q,p){return function(s){if(s===r){return p(new TypeError("self resolution"))}var t=new l(),u=k(s,t);if(u){return t.promise.then(q,p)}else{return q(s)}}}function c(s,q,r,t){var p=false;return function(u){if(p){return}p=true;q[s]=u;if((--t.count)===0){var v=r.resolve;v(q)}}}function h(t,s){var y,q,v=s.handler,p=s.capability,u=p.resolve,w=p.reject;try{y=v(t);if(y===p.promise){throw new TypeError("self resolution")}q=k(y,p);if(!q){u(y)}}catch(r){w(r)}}function g(q,p){q.forEach(function(r){f.set(h.bind(null,p,r))})}function n(r,q,p){f.clear(r._updateStatus);r._status=p;r._updateStatus=f.set(function(){r._resolveReactions=undefined;r._rejectReactions=undefined;g(q,r._result)})}m=a.Promise=function(u){var r,q,p,t=this;if(!t||typeof t!=="object"){throw new TypeError("bad promise")}if(t._status!==undefined){throw new TypeError("promise already initialized")}if(!b(u)){throw new TypeError("not a valid resolver")}t._status="unresolved";t._resolveReactions=[];t._rejectReactions=[];r=function(v){if(t._status==="unresolved"){p=t._resolveReactions;t._result=v;n(t,p,"has-resolution")}};q=function(v){if(t._status==="unresolved"){p=t._rejectReactions;t._result=v;n(t,p,"has-rejection")}};try{u(r,q)}catch(s){q(s)}return t};m.prototype={constructor:m,"catch":function(p){return this.then(undefined,p)},then:function(u,t){var s,r,q,p,v=this;if(!i(v)){throw new TypeError("not a promise")}s=new l();if(!b(t)){t=function(w){throw w}}if(!b(u)){u=function(w){return w}}r=d(v,u,t);q={capability:s,handler:r};p={capability:s,handler:t};switch(v._status){case"unresolved":v._resolveReactions.push(q);v._rejectReactions.push(p);break;case"has-resolution":g([q],v._result);break;case"has-rejection":g([p],v._result);break;default:throw new TypeError("unexpected")}return s.promise}};function o(p){return e(p).map(function(q){return q instanceof m?q:m.resolve(q)})}m.all=function(u){var q=new l(),t=q.resolve,s=q.reject,p=[],r={count:1};try{o(u).forEach(function(A,z){var x,B,w=A._result,y=A._status;if(y==="has-resolution"){x=m.resolve(w)}else{if(y==="has-rejection"){x=m.reject(w)}else{x=A}}if(x){B=c(z,p,q,r);r.count++;x.then(B,q.reject)}});if((--r.count)===0){t(p)}}catch(v){s(v)}return q.promise};m.race=function(s){var u,p=new l(),r=p.resolve,q=p.reject;try{o(s).forEach(function(y){var w,v=y._result,x=y._status;if(x==="has-resolution"&&u!=="has-rejection"){w=r(v)}else{if(x==="has-rejection"&&u!=="has-resolution"&&u!=="has-rejection"){w=q(v)}else{w=y}}u=x;if(w){w.then(r,q)}})}catch(t){q(t)}return p.promise};m.reject=function(r){var p=new l(),q=p.reject;q(r);return p.promise};m.resolve=function(r){if(r instanceof m){return r}var p=new l(),q=p.resolve;q(r);return p.promise}});