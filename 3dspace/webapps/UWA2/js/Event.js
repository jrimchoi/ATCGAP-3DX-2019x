define("UWA/Event",["UWA/Core"],function(b){var a={onDomReady:function(n,c){c=c||window;var f=false,l=true,k=window.document,m=k.documentElement,i=!!(k.addEventListener),e=i?"addEventListener":"attachEvent",d=i?"removeEventListener":"detachEvent",g=i?"":"on";function o(q){var p=q.type;if(p!=="readystatechange"&&k.readyState==="complete"){(p==="load"?window:k)[d](g+p,o,false);if(!f){f=true;n.call(c,p||q)}}}function h(){try{m.doScroll("left");o("poll")}catch(p){setTimeout(h,50)}}if(k.readyState==="complete"){setTimeout(n.bind(c,"lazy"),1)}else{if(k.createEventObject&&m.doScroll){try{l=!window.frameElement}catch(j){}if(l){h()}}k[e](g+"DOMContentLoaded",o,false);k[e](g+"readystatechange",o,false);window[e](g+"load",o,false)}},dispatchEvent:function(f,d,l){var c,i,k,j=f.nodeType===9?f:(f.ownerDocument||f.document),g=(j.defaultView||j.parentWindow),e={canBubble:true,cancelable:true,view:g,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,detail:0,screenX:0,screenY:0,clientX:0,clientY:0,button:0,relatedTarget:null,keyCode:null,charCode:null,touches:null,targetTouches:null,changedTouches:null,scale:1,rotation:0};l=b.merge(l||{},e);if(j.createEvent){if(d==="click"||d==="dblclick"||d==="contextmenu"||d.indexOf("mouse")===0){i="MouseEvent";k=[d,l.canBubble,l.cancelable,l.view,l.detail,l.screenX,l.screenY,l.clientX,l.clientY,l.ctrlKey,l.altKey,l.shiftKey,l.metaKey,l.button,l.relatedTarget]}else{if(d.indexOf("touch")===0){i="TouchEvent";k=[d,l.canBubble,l.cancelable,l.view,l.detail,l.screenX,l.screenY,l.clientX,l.clientY,l.ctrlKey,l.altKey,l.shiftKey,l.metaKey,l.touches,l.targetTouches,l.changedTouches,l.scale,l.rotation]}else{if(d.indexOf("key")===0){i="KeyboardEvent";k=[d,l.canBubble,l.cancelable,l.view,l.ctrlKey,l.altKey,l.shiftKey,l.metaKey,l.keyCode,l.charCode]}else{i="HTMLEvents";k=[d,l.canBubble,l.cancelable]}}}c=j.createEvent(i);if(i==="KeyboardEvent"&&typeof c.initKeyEvent==="function"){i="KeyEvent"}else{if(i==="HTMLEvents"&&typeof c.initHTMLEvents!=="function"){i="Event"}}if(typeof c["init"+i]==="function"){c["init"+i].apply(c,k)}else{throw new Error("Unsuported Event type "+i)}f.dispatchEvent(c)}else{if(j.createEventObject){c=j.createEventObject();b.extend(c,l);try{f.fireEvent("on"+d,c)}catch(h){throw new Error("Unsuported Event type "+d)}}}return c},getElement:function(c){var d=c._uwaTarget||c.target||c.srcElement;if(c.type!=="DOMCharacterDataModified"&&d&&(d.nodeType===3||d.nodeType===4)){d=d.parentNode}return b.extendElement(d)},findElement:function(d,c){return a.getElement(d).getClosest(c)},getPosition:function(h,k){var g,e,d,f=h.target||h.srcElement,c=f.nodeType===9?f:(f.ownerDocument||f.document),j=h.changedTouches||h.touches;if(j){if(k!==undefined&&j[k]){d={x:j[k].pageX,y:j[k].pageY}}else{d={x:0,y:0};for(g=0,e=j.length;g<e;g++){d.x+=j[g].pageX;d.y+=j[g].pageY}d.x/=e;d.y/=e}}else{d={x:h.clientX+(c.documentElement.scrollLeft||c.body.scrollLeft),y:h.clientY+(c.documentElement.scrollTop||c.body.scrollTop)}}return d},stopPropagation:function(c){if(c.stopPropagation){c.stopPropagation()}c.cancelBubble=true},preventDefault:function(c){if(c.preventDefault){c.preventDefault()}c.returnValue=false;if((c.cancelable===undefined||c.cancelable===true)&&c.defaultPrevented===undefined){c.defaultPrevented=true}},stop:function(c){a.preventDefault(c);a.stopPropagation(c)},isDefaultPrevented:function(c){return c.defaultPrevented||(c.returnValue!==true&&c.returnValue!==undefined)},whichButton:function(d){var c=d.button,e=d.which;if(!e&&b.is(c)){e=[0,1,3,1,2][c]||0}return e-1},whichKey:(function(){var c=["alt","ctrl","meta","shift"],d={8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta"};return function(h){var g,e,k,m=h.which||h.keyCode,j=h.type!=="keypress"&&d[m],f=[];for(g=0,e=c.length;g<e;g++){k=c[g];if(h[k+"Key"]&&j!==k){f.push(k)}}if(j){f.push(j)}else{if(m&&h.type.indexOf("key")===0){f.push(String.fromCharCode(m).toLowerCase())}}return f.join("+")}}()),wheelDelta:function(c){return c.wheelDelta?c.wheelDelta/120:-(c.detail||0)/3}};return b.namespace("Event",a,b)});