define("UWA/Element",["UWA/Core","UWA/String","UWA/Array","UWA/Utils","UWA/Utils/Client","UWA/Dispatcher","UWA/Json","UWA/Event","vendors/qwery","vendors/webcomponents/MutationObserver"],function(f,a,p,c,o,m,b,s,l,g){var n,e,d,i=o.getVendorProperty,r=document.documentElement;e=(function(){var t=document.createElement("div"),u=/(^|,)/g,v=/(?:^|,)\s*[>+~]/;return function(C,y,z,A){var w,x,D,E,B=A||v.test(y);if(B){if(!z){w="* ";D=z}else{D=z.parentNode;x=z.id;z.id=w=x||"XXXSELECTORID";w="#"+w+" ";if(!A&&!D){D=f.extendElement(t).grab(z)}}y=y.replace(u,"$1"+w)}else{D=z}if(A){E=(n[C]||A[C]).call(A,y)}else{E=(n[C]||D[C]).call(D,y)}if(z&&B){if(!x){z.removeAttribute("id")}else{z.id=x}if(D===t){D.removeChild(z)}}return E}}());function k(v){var u=v?v.indexOf(" "):-1,t;if(u<0){t={name:v}}else{t={name:v.slice(0,u),selector:v.slice(u+1)}}return t}d=m.extend({Binding:m.Binding.extend({delegates:null,direct:false,element:null,init:function(){this._parent.apply(this,arguments);this.delegates=[]},addDelegate:function(t){if(t){this.delegates.push(t)}else{this.direct=true}},removeDelegate:function(t){if(t){this.delegates=this.delegates.filter(function(u){return u!==t})}else{this.direct=false}if(!this.direct&&!this.delegates.length){this.detach()}},execute:function(y,v){var u,w,x,t;if(this.active){if(this.delegates.length){u=this.delegates.join(",");w=y[0];x=s.getElement(w);while(x&&x!==this.element&&t!==false){if(n.match.call(x,u,this.element)){w._uwaTarget=x;t=this._parent(y,v);w._uwaTarget=null}x=x.parentNode}}if(this.direct&&t!==false){t=this._parent(y,v)}}return t},destroy:function(){this._parent();delete this.element}}),init:function(t){this._parent();this.element=t},addDelegation:function(w,t,v,u){var x=this.add(w,v,u);x.addDelegate(t);x.element=this.element;return x},removeDelegation:function(u,t){if(u){var v=this.bindings[this.indexOfListener(u)];if(v){v.removeDelegate(t)}}else{p.invoke(this.bindings.slice(),"removeDelegate",t)}},dispose:function(){this._parent();delete this.element}});function h(t){return typeof t.className==="string"?t.className:t.getAttribute("class")}function q(u,t){if(typeof u.className==="string"){u.className=t}else{u.setAttribute("class",t)}}n=(function(){function t(v,u){var x,w;if(v==="iframe"&&u&&u.name!==undefined){x=document.createElement("div");x.innerHTML="<"+v+' name="'+u.name+'"/>';w=x.firstChild;delete u.name}else{if(v==="object"&&u&&u.classid!==undefined){if(u.html){w=document.createElement("div");n.setHTML.call(w,u.html);w=n.getHTML.call(w)}else{w=""}x=document.createElement("div");x.innerHTML="<"+v+' classid="'+u.classid+'">'+w+"</"+v+">";w=x.firstChild;delete u.html;delete u.classid}else{w=document.createElement(v)}}return w}return function(v,u){var w=t(v,u);f.extendElement(w);if(f.is(u,"object")){n.set.call(w,u)}return w}}());f.extend(n,{set:(function(){var t;return function(u,x){var w,y,v=this;if(!t){t={html:n.setHTML,events:n.addEvents,id:function(z){this.id=z},"class":function(z){this.className=z},value:function(z){this.value=z}};["compact","nowrap","ismap","declare","noshade","checked","disabled","readOnly","multiple","selected","noresize","defer","defaultChecked","autofocus","controls","autoplay","loop"].forEach(function(z){t[z.toLowerCase()]=function(A){this[z]=Boolean(A)}})}if(f.is(u,"object")){for(w in u){if(u.hasOwnProperty(w)){n.set.call(v,w,u[w])}}}else{y=n["set"+a.capitalize(u)];if(f.is(y,"function")){y.apply(v,Array.prototype.slice.call(arguments,1))}else{if(!t.hasOwnProperty(u)||t[u].call(v,x)===false){v.setAttribute(u,x)}}}return v}}()),setAttributes:function(t){var u=this,v;for(v in t){if(t.hasOwnProperty(v)){u.setAttribute(v,t[v])}}return u},getTagName:function(){var u=this,t=(u.tagName||u.nodeName);return t?t.toLowerCase():""},setText:function(u){var t=this;n.empty.call(t);return n.appendText.call(t,u)},appendText:function(v){var u=this,t=n.getDocument.call(u);u.appendChild(t.createTextNode(v));return u},getText:function(){var t=this;return t.textContent||t.innerText||a.stripTags(t.innerHTML)},setContent:function(){var t=this;n.empty.call(t);return n.addContent.apply(t,arguments)},addContent:(function(){function t(x,u,w){var z,v,y,A;if(f.is(x,"nodelist")){x=[].slice.call(x)}for(z=0,v=x.length;z<v;z++){A=x[z];if(A){if(A.nodeType){w.appendChild(A)}else{if(typeof A==="string"||typeof A==="number"){if(/<|&#?\w+;/.test(A)){y=u.createElement("div");n.setHTML.call(y,A);while(y.firstChild){w.appendChild(y.firstChild)}}else{w.appendChild(u.createTextNode(A))}}else{if(typeof A.inject==="function"&&!Array.isArray(A)){A.inject(w)}else{if(typeof A.length==="number"){t(A,u,w)}else{if(typeof A==="object"){y=A.tag||"div";delete A.tag;w.appendChild(f.createElement(y,A));A.tag=y}else{w.appendChild(u.createTextNode(A))}}}}}}}}return function(){var w=this,u=n.getDocument.call(w),v=u.createDocumentFragment();t(arguments,u,v);w.appendChild(v);return w}}()),setHTML:function(w){var x,v=this;if(typeof w!=="string"){n.setContent.call(v,w)}else{try{x=a.escapeHTMLEntities(w).replace('<?xml version="1.0" encoding="UTF-8"?>',"").replace(/&(?!#?[a-z0-9]+;)/gi,"&#38;");v.innerHTML=x}catch(t){f.log("UWA.Element.setHTML error cause: "+t+' with HTML value "'+w+'"');try{v.innerHTML=a.stripTags(String(w))}catch(u){n.setText.call(v,w)}}}return v},getHTML:function(){var t=this.innerHTML;if(o.Engine.ie){t=t.replace(/< *(\/ *)?(\w+)/g,function(u){return u.toLowerCase()})}return t},inject:function(w,u){var x,v=this,t=n.getDocument.call(v);u=u||"bottom";if(u==="bottom"){w.appendChild(v)}else{if(u==="top"){w.insertBefore(v,w.firstChild)}else{x=w.parentNode;if(!x&&w.nodeType!==11){x=t.createDocumentFragment();x.appendChild(w)}if(x){if(u==="after"){if(x.lastChild===w){x.appendChild(v)}else{x.insertBefore(v,w.nextSibling)}}else{if(u==="before"){x.insertBefore(v,w)}}}}}return v},grab:function(u,t){n.inject.call(u,this,t);return this},isInjected:(function(){var t;if(r.contains){t=function(v){var u=this;v=v||u.ownerDocument.documentElement;return v!==u&&(v.contains?v.contains(u):true)}}else{if(r.compareDocumentPosition){t=function(v){var u=this;v=v||u.ownerDocument.documentElement;return Boolean(v.compareDocumentPosition(u)&16)}}else{t=function(v){var u=this;v=v||u.ownerDocument.documentElement;do{u=u.parentNode}while(u&&u.parentNode);return u===v}}}return t}()),empty:function(u){var v,t=this;while(t.firstChild){v=t.firstChild;if(u){n.destroy.call(v)}else{t.removeChild(v)}}return t},remove:function(){var u=this,t=n.getParent.call(u);if(t){t.removeChild(u)}return u},destroy:function(){var u,z,v,y=this,t=n.remove,x=n.destroy,w=n.getChildren.call(y);for(z=0,v=w.length;z<v;z+=1){if(w[z].destroy){x.call(w[z])}}n.removeEvents.call(y);u=n.getDocument.call(y);if(y!==u&&y!==u.documentElement&&y!==u.body&&y!==n.getWindow.call(y)){t.call(y)}},getParent:function(t){var u=this.parentNode;if(t){while(u&&u.nodeType===1&&!n.match.call(u,t)){u=u.parentNode}}if(u&&u.nodeType!==1){u=null}return u?f.extendElement(u):null},getParents:function(u){var t=[];var w=this;while(true){var v=w.getParent(u);if(v){t.push(v);w=v}else{return t}}},getClosest:function(t){var u=this;return n.match.call(u,t)?u:n.getParent.call(u,t)},getChildren:function(){return Array.prototype.filter.call(this.childNodes,function(t){return t.nodeType===1}).map(f.extendElement)},getDocument:function(){var t=this;return t.nodeType===9?t:(t.ownerDocument||t.document)},getWindow:function(){var t=n.getDocument.call(this);return t&&(t.defaultView||t.parentWindow)},getOffsetParent:(function(){var u;function w(){var y=document.createElement("div"),z=document.createElement("div");y.style.height="0";y.appendChild(z);u=(z.offsetParent===y)}function t(y){return(/^(?:body|html)$/i).test(y.tagName)}function x(y){return y&&(n.getStyle.call(y,"position")!=="static"||t(y))}function v(y){return x(y)||(/^(?:table|td|th)$/i).test(y.tagName)}return function(){var C,z=this,y=n.getDocument.call(z),B=z.offsetParent||(y&&y.body),A=n.getStyle.call(z,"position");if(!t(z)&&A!=="fixed"){if(u===undefined){w()}if(u){C=(A==="static")?v:x;while((z=z.parentNode)!==undefined){if(C(z)){B=z;break}}}else{try{B=z.offsetParent}catch(D){}}}if(B){B=f.extendElement(B)}return B}}()),getElements:function(t){return Array.prototype.map.call(e("querySelectorAll",t,this),f.extendElement,f)},getElement:function(t){return f.extendElement(e("querySelector",t,this))},match:function(t,u){return e("matchesSelector",t,u,this)},hasClassName:function(t){var u=h(this);return Boolean(u&&a.contains(u,t," "))},addClassName:function(u){var t=this;if(!n.hasClassName.call(t,u)){q(this,(h(this).trim()+" "+u).trim())}return t},removeClassName:function(u){var t=this;q(this,h(this).replace(new RegExp("(^|\\s)"+u+"(?:\\s|$)"),"$1").trim());return t},toggleClassName:function(u,v){var t=this,w=f.is(v)?v:!n.hasClassName.call(t,u);return f.Element[w?"addClassName":"removeClassName"].call(t,u)},setStyle:function(v,u){var t={};t[v]=u;return n.setStyles.call(this,t)},setStyles:(function(){var t={},y={none:"",firefox:"-moz-",opera:"-o-",trident:"-ms-",webkit:"-webkit-"},v={columnCount:1,flex:1,flexGrow:1,flexShrink:1,fontWeight:1,lineClamp:1,lineHeight:1,opacity:1,order:1,orphans:1,widows:1,zIndex:1,zoom:1,fillOpacity:1,strokeOpacity:1};function x(z){var A=[],B=z.replace(/[\'\"]/g,"").split(",");B.forEach(function(C){A.push('"'+C.trim()+'"')});return A.join(", ")}function u(z,H){var A,F,D,G,C,B,E=z+H;if(t[E]){A=t[E]}else{A=false;C=document.createElement("div");B=C.style;for(F in y){D=y[F];G=D+H;B[z]=G;if(B[z]===G&&(G!==""&&!o.Engine.ie)){A=G;break}}t[E]=A}return A}function w(A){var z=u("cursor",A);if(z!==false){A=z}else{if(o.Engine.opera){A="move"}else{A="url("+f.hosts.uwa+f.paths.css+"/base/cursor/"+(A==="grabbing"?"closedhand":"openhand")+".cur)"+(o.Engine.ie?"":" 4 4")+", move"}}return A}return function(H){var A,z,F,G,B=this,D=B.style,E=[];for(G in H){if(H.hasOwnProperty(G)){F=H[G];G=a.camelCase(G);if(G==="opacity"){n.setOpacity.call(B,F)}else{if(F!==""&&F!==null&&isFinite(F)&&v[G]===undefined){F+="px"}else{if(F==="none"&&G==="userSelect"&&D.MozUserSelect!==undefined){F="-moz-none"}else{if(G==="fontFamily"){F=x(F)}else{if(G==="cursor"){if("grabbing"===F||"grab"===F){F=w(F,D)}}}}}E.push({name:n.getStyleName.call(B,G),value:F})}}}for(A=0,z=E.length;A<z;A++){G=E[A].name;F=E[A].value;try{D[G]=F||F===0?F:""}catch(C){f.log('Unable to set style "'+G+'" with value "'+F+'"')}}return B}}()),getStyle:function(v,u){var t=n.getStyles.call(this,[v],u);return t[v]},getStyles:(function(){var t,v,y,w=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,z=/^margin/;function x(){var A=document.createElement("div");A.style.margin="1%";document.body.appendChild(A);v=(window.getComputedStyle(A,null)||{marginTop:0}).marginTop==="1%";document.body.removeChild(A)}if(document.defaultView&&document.defaultView.getComputedStyle){t=function(D,H,L){var E,C,B,K,J,F,M=D.ownerDocument,G=M.defaultView,I=n.getWindow.call(D).getComputedStyle(D,null),A=D.style;if(G&&I){for(E=0,C=H.length;E<C;E++){K=H[E];F=n.getStyleName.call(D,K);J=I[F];if((J===""||J==="auto")&&!n.isInjected.call(D,M.documentElement)){J=A[F]}if(v===undefined){x()}if(v&&z.test(F)&&w.test(J)){B=A.width;A.width=J;J=I.width;A.width=B}L[K]=J!==undefined?J:(A[K]||"")}}return L}}else{if(document.documentElement.currentStyle){t=function(E,I,M){var F,D,C,L,K,H,G,B=E.currentStyle,J=E.runtimeStyle,A=E.style;for(F=0,D=I.length;F<D;F++){L=I[F];G=n.getStyleName.call(E,L);K=B&&B[G];if(w.test(K)){C=A.left;H=J&&J.left;if(H){J.left=B.left}A.left=G==="fontSize"?"1em":(K||0);K=A.pixelLeft+"px";A.left=C;if(H){J.left=H}}M[L]=K!==undefined?K:(E.style[L]||"")}return M}}}function u(E,D,B){var C,A,G,F=E.style;for(C=0,A=D.length;C<A;C++){G=D[C];B[G]=F[G]||""}return B}return function(C,D){var A={},B=this;if(C.indexOf("opacity")!==-1&&!y){y=true;A.opacity=n.getOpacity.call(B,D);C.splice(C.indexOf("opacity"),1);y=false}if(D===false){A=u(B,C,A)}else{A=t(B,C,A)}return A}}()),getStyleName:(function(){function v(x){return x.join(".")}var u=o.Engine,w=u.name,t=["box-sizing","box-shadow","transform","transform-style","transition","transition-timing-function","transition-duration","transition-delay","transition-property","border-image","border-radius","text-stroke","font-smoothing","text-fillcolor","text-shadow","perspective","appearance","touch-callout","overflow-scrolling","mask","user-select"];return c.memoize(function(C,y){var x,A,z,D=[],B={firefox:"-moz",opera:"-o",ie:(y?"-ms":"ms"),chrome:"-webkit",safari:"-webkit"};if(typeof C==="string"){C=a.unCamelCase(C);if(C==="float"){x=u.ie?"style-float":"css-float"}else{if(t.indexOf(C)!==-1){if(B[w]){z=B[w];x=z+"-"+C;D.push(x)}else{for(A in B){if(B.hasOwnProperty(A)){z=B[A];x=(z+"-"+C);if(D.indexOf(x)===-1){D.push(x)}}}}D=D.filter(function(E){return r.style[a.camelCase(E)]!==undefined});if(D.length===0){x=C}else{x=D.shift()}}else{x=C}}if(!y){x=a.camelCase(x)}}else{x=C}return x},v)}()),getOpacity:(function(){var w=function(){},v=o.Features.opacityCSS,t=o.Features.filterCSS,u=/alpha\(opacity=([\d.]+)\)/i;if(t&&!v){w=function(z,A){var y,x=1;y=n.getStyle.call(z,"filter",A).replace(/ /g,"").match(u);if(y){x=y[1]/100}return x}}else{if(v){w=function(z,B){var y=1,A=z.style,x=n.getStyle;if(A.opacity!==undefined){y=x.call(z,"opacity",B)}else{if(A.MozOpacity!==undefined){y=x.call(z,"MozOpacity",B)}}return parseFloat(Math.round(y*100)/100,10)}}}return function(x){return w(this,x)}}()),setOpacity:(function(){var v=function(){},u=o.Features.opacityCSS,t=o.Features.filterCSS;if(t&&!u){v=function(y,z,w){var x;z.zoom=1;w=w===1?"":"alpha(opacity="+w*100+")";z.MsFilter=w;z.filter=w;x=z.display;z.display="none";y.offsetHeight;z.display=x}}else{if(u){v=function(x,y,w){if(y.opacity!==undefined){y.opacity=w}else{if(y.MozOpacity!==undefined){y.MozOpacity=w}}}}}return function(w){var x=this,y=x.style;if(w!==null){w=parseFloat(w,10);w=w>1?1:(w<0.00001?0:w)}v(x,y,w);return x}}()),hide:function(){return n.setStyle.call(this,"display","none")},show:(function(){var v,w,u;function t(x){return n.getStyle.call(x,"display")}u=c.memoize(function(B){var A,z=document,x=z.body,y=z.createElement(B);x.appendChild(y);A=t(y);x.removeChild(y);if(A==="none"||A===""){if(!v){v=z.createElement("iframe");v.frameBorder=v.width=v.height=0}x.appendChild(v);if(!w||!v.createElement){w=(v.contentWindow||v.contentDocument).document;w.write((z.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>");w.close()}y=w.createElement(B);w.body.appendChild(y);A=t(y);x.removeChild(v)}return A});return function(){var y,x=this;if(x.style){y=x.style.display;if(y==="none"){y=x.style.display=""}if(y===""){x.style.display=(t(x)==="none"&&u(x.nodeName))||""}}return x}}()),toggle:function(v){var u=this,t=f.is(v)?v:n.isHidden.call(u);return f.Element[t?"show":"hide"].call(u)},isHidden:function(){return n.getStyle.call(this,"display")==="none"},setTranslate:(function(){var t=(function(){var u;if(o.Features.transitionsCSS){if(o.Features.matrixCSS){u=function(w,v){return{transform:"translate3d("+v+"px,"+w+"px, 0)"}}}else{u=function(w,v){return{transform:"translate("+v+"px,"+w+"px)"}}}}else{u=function(w,v){return{top:w,left:v}}}return u}());return function(z,u){var w,v=this;z=z||0;u=u||0;w=t(z,u);n.setStyles.call(v,w);return v}}()),getComputedSize:(function(){var t={borderWidth:["borderLeftWidth","borderRightWidth"],borderHeight:["borderBottomWidth","borderTopWidth"],paddingWidth:["paddingLeft","paddingRight"],paddingHeight:["paddingTop","paddingBottom"],marginWidth:["marginLeft","marginRight"],marginHeight:["marginTop","marginBottom"],innerWidth:["borderWidth","paddingWidth"],innerHeight:["borderHeight","paddingHeight"],outerWidth:["marginWidth"],outerHeight:["marginHeight"]};return function(){var z,v,A,w,y=this,x=c.toArray(arguments),u=0;for(z=0;z<x.length;z++){A=a.camelCase(x[z]);if(t[A]){x.splice(z,1);x=x.concat(t[A]);z--}else{x.splice(z,1,A)}}w=n.getStyles.call(y,x);for(z=0,v=x.length;z<v;z++){A=x[z];u+=parseFloat(w[A],10)||0}return u}}()),getScrolls:(function(){var t;function u(){var w=document.createElement("div"),v=document.createElement("div");v.style.visibility="hidden";v.style.overflow="hidden";v.style.width="1px";w.style.overflow="visible";w.innerHTML="x";v.appendChild(w);r.appendChild(v);t=w.scrollWidth===1;r.removeChild(v)}return function(){var x,w,y,v=this;if(f.is(v,["window","document"])){w=o.getScrolls()}else{y=v.style;w={width:v.scrollWidth,height:v.scrollHeight,top:v.scrollTop,left:v.scrollLeft};if(t===undefined){u()}if(t&&["","visible"].indexOf(n.getStyle.call(v,"overflow"))!==-1){x=y.overflow;y.overflow="hidden";w.width=v.scrollWidth;y.overflow=x}}return w}}()),getOffsets:(function(){var D,C=/^t(?:able|d|h)$/i,y,z,u,A,x;function t(E){var F=E.ownerDocument.defaultView;return F?F.getComputedStyle(E,null):E.currentStyle}function w(E,F){return n.getStyle.call(E,F)}function B(){var G,J,F,I=document.body,K=parseInt(w(I,"marginTop"),10),H=document.createElement("div"),E="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";H.innerHTML=E;I.insertBefore(H,I.firstChild);G=H.firstChild;J=G.firstChild;F=G.nextSibling.firstChild.firstChild;y=(J.offsetTop!==5);z=(F.offsetTop===5);J.style.position="fixed";J.style.top="20px";u=(J.offsetTop===20||J.offsetTop===15);J.style.position=J.style.top="";G.style.overflow="hidden";G.style.position="relative";A=(J.offsetTop===-5);x=(I.offsetTop!==K);I.removeChild(H)}function v(F){var G=F.offsetTop,E=F.offsetLeft;if(y===undefined){B()}if(x){G+=parseFloat(w(F,"marginTop"))||0;E+=parseFloat(w(F,"marginLeft"))||0}return{x:E,y:G}}if(document.documentElement.getBoundingClientRect!==undefined){D=function(){if(this===this.ownerDocument.body){return v(this)}var P,M,E,L,H,G,K,O,F=this,J=n.getWindow.call(F),N=J.webkitConvertPointFromNodeToPage;if(F.getBoundingClientRect){L=n.getDocument.call(F);H=L.body;G=r.clientTop||H.clientTop||0;K=r.clientLeft||H.clientLeft||0;O=o.getScrolls();try{E=F.getBoundingClientRect()}catch(I){}if(!E||!n.isInjected.call(F,r)){P=E?E.left:0;M=E?E.top:0}else{P=E.left+O.x-G;M=E.top+O.y-K}}else{if(N){E=N(F,new J.WebKitPoint(0,0));P=E.x;M=E.y}}return{x:P,y:M}}}else{D=function(){if(this===this.ownerDocument.body){return v(this)}var G,H=this,K=H.offsetParent,F=n.getDocument.call(H),J=F.body,I=t(H),L=H.offsetTop,E=H.offsetLeft;if(y===undefined){B()}H=H.parentNode;while(H&&H!==J&&H!==r&&H.nodeType!==11){if(u&&I.position==="fixed"){break}G=t(H);E-=H.scrollLeft;L-=H.scrollTop;if(H===K){E+=H.offsetLeft;L+=H.offsetTop;if(y&&!(z&&C.test(H.nodeName))){E+=parseFloat(G.borderLeftWidth)||0;L+=parseFloat(G.borderTopWidth)||0}K=H.offsetParent}if(A&&G.overflow!=="visible"){E+=parseFloat(G.borderLeftWidth)||0;L+=parseFloat(G.borderTopWidth)||0}I=G;H=H.parentNode}if(I.position==="relative"||I.position==="static"){E+=J.offsetLeft;L+=J.offsetTop}if(u&&I.position==="fixed"){E+=Math.max(r.scrollLeft,J.scrollLeft);L+=Math.max(r.scrollTop,J.scrollTop)}return{x:E,y:L}}}return D}()),getPosition:function(v,A){var u,J,z,w,x,E,B,D=/^(?:body|html)$/i,y=this,C=n.getOffsetParent,I=n.getOffsets,F=n.getComputedSize,H=n.getSize,t=n.isInjected,G={x:0,y:0};v=v||C.call(y);if(!v||!t.call(y)){return G}B=I.call(y);if(v!==n.getDocument.call(y)){u=D.test(v.nodeName)?G:I.call(v);B.x-=parseFloat(F.call(y,"marginLeft"))||0;B.y-=parseFloat(F.call(y,"marginTop"))||0;u.x+=parseFloat(F.call(v,"borderLeftWidth"))||0;u.y+=parseFloat(F.call(v,"borderTopWidth"))||0;B.x-=u.x;B.y-=u.y;E=f.typeOf(A);if(E){if(E==="string"){A={x:A,y:A}}J=H.call(y);for(z=0;z<2;z+=1){w=z?"x":"y";x=z?"width":"height";if(A[w]==="center"){B[w]+=J[x]/2}else{if((z===1&&A[w]==="right")||(z===0&&A[w]==="bottom")){B[w]+=J[x]}}}}}return B},setPosition:(function(){function u(z,w,y,B,A){var x,v;switch(f.typeOf(B)){case false:break;case"object":v={x:B.x+y.x,y:B.y+y.y,width:B.width,height:B.height};break;case"element":x=B;break;default:x=n.getOffsetParent.call(z);while(x&&x!==w&&x.nodeType===1){if(n.getStyle.call(x,"overflow")!=="visible"){break}x=x.parentNode}if(!x||x.nodeType!==1){x=w}}if(x){if(x===w){v=f.merge(o.getScrolls(),o.getSize())}else{v=n.getOffsets.call(x);v.width=x.offsetWidth;v.height=x.offsetHeight}}if(v){v.x+=A;v.y+=A;v.width-=2*A;v.height-=2*A}return v}var t={full:function(y,w){var v=n.getSize.call(this);var z=y.x+y.width-w.x-v.width;var x=y.y+y.height-w.y-v.height;if(z<0){w.x=Math.max(0,w.x+z)}if(x<0){w.y+=x}},"resize-max":function(w,v){n.setStyles.call(this,{maxWidth:w.x+w.width-v.x,maxHeight:w.y+w.height-v.y})},none:function(){}};return function(z,D){D=D||{};var B,C,y=this,A=n.getDocument.call(y).body,v=n.getOffsetParent.call(y)||A,w=n.getOffsets.call(v),x=n.getOffsets.call(D.relative||v);B=u(y,A,x,D.boundary,D.boundaryMargin||0);if(typeof z.length==="number"){C=n.getSize.call(y);c.splat(z).forEach(function(F){var E=x.x+F.x,G=x.y+F.y;F.score=(Math.min(B.x+B.width,E+C.width)-Math.max(B.x,E))*(Math.min(B.y+B.height,G+C.height)-Math.max(B.y,G))});z.sort(function(F,E){return E.score-F.score});z=z[0]}z={x:z.x+x.x,y:z.y+x.y};if(B){if(!D.fit){D.fit=t.full}else{if(typeof D.fit==="string"&&f.owns(t,D.fit)){D.fit=t[D.fit]}}z.x=Math.max(B.x,Math.min(z.x,B.x+B.width));z.y=Math.max(B.y,Math.min(z.y,B.y+B.height));D.fit.call(this,B,z)}n.setStyles.call(y,{top:z.y-w.y,left:z.x-w.x});return y}}()),getSize:function(){var A,x,z,y,u,t,w,v=this;if(f.is(v,["window","document"])){w=o.getSize()}else{t=n.getStyle.bind(v);z=v.style;y=v.offsetWidth;u=v.offsetHeight;if(t("display")==="none"&&y===0&&u===0){x=z.display;A=z.visibility;z.visibility="visible";z.display="block";y=v.offsetWidth;u=v.offsetHeight;z.display=x;z.visibility=A}w={width:y,height:u}}return w},getDimensions:function(){var x,v=this,u=n.getSize.call(v),w=u.width,t=u.height,y=n.getStyles.call(v,["maxWidth","maxHeight","minWidth","minHeight","borderLeftWidth","borderRightWidth","paddingLeft","paddingRight","borderBottomWidth","borderTopWidth","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom"]);for(x in y){y[x]=parseFloat(y[x],10)||0}return{width:w,height:t,maxWidth:y.maxWidth||-1,maxHeight:y.maxHeight||-1,minWidth:y.minWidth||-1,minHeight:y.minHeight||-1,innerWidth:w-(y.borderLeftWidth+y.borderRightWidth+y.paddingLeft+y.paddingRight),innerHeight:t-(y.borderBottomWidth+y.borderTopWidth+y.paddingTop+y.paddingBottom),outerWidth:w+y.marginLeft+y.marginRight,outerHeight:t+y.marginTop+y.marginBottom}},isInViewport:function(N,M,L,y){var w=this,F=n.getOffsets,G=F.call(N),E=F.call(w),z=N.offsetHeight,K=N.offsetWidth,J=w.offsetWidth,I=w.offsetHeight,H=E.y,C=E.x,D=H+w.offsetHeight,O=C+w.offsetWidth,x,B,v,u,t,A;if(M){u=C<(G.x+K)&&(C+J)>G.x;t=H<(G.y+z)&&(H+I)>G.y}else{u=C>=G.x&&(C+J)<=(G.x+K);t=H>=G.y&&(H+I)<=(G.y+z)}A=(y==="x")?u:(y==="y")?t:u&&t;if(L){x=o.getScrolls();B=o.getSize();v={top:x.y,bottom:x.y+B.height,right:x.x+B.width,left:x.x};A=A&&(H<v.bottom&&C<v.right&&D>v.top&&O>v.left)}return A},setData:function(v,x){var y,u=this,t=f.typeOf(x),w=f.typeOf(v);if(w==="string"&&t){x=b.encode(x);if(u.dataset){u.dataset[a.camelCase(v)]=x}else{v="data-"+a.unCamelCase(v);if(u.setAttribute){u.setAttribute(v,x)}else{u[v]=x}}}else{if(w==="object"&&!t){for(y in v){if(v.hasOwnProperty(y)){n.setData.call(u,y,v[y])}}}}return u},getData:function(u){var v,t=this;if(f.is(u,"string")){if(t.dataset){v=t.dataset[a.camelCase(u)]}else{u="data-"+a.unCamelCase(u);if(t.getAttribute){v=t.getAttribute(u,v)}else{v=t[u]=v}}}return f.is(v)?b.decode(v):undefined},removeData:function(u){var t=this;if(f.is(u,"string")){if(t.dataset){if(t.dataset.hasOwnProperty(a.camelCase(u))){delete t.dataset[a.camelCase(u)]}}else{u="data-"+a.unCamelCase(u);if(t.removeAttribute){t.removeAttribute(u)}else{t[u]=null}}}return t},handleExternalLinks:function(u){var t=this;n.addEvent.call(t,"click",function(x){if(!s.isDefaultPrevented(x)&&!s.whichKey(x)){var v,w=s.getElement(x),y=String(window.location).split("#")[0];while(w&&!v){v=(n.getTagName.call(w)==="a"&&w.getAttribute("href"))||n.getData.call(w,"href");w=n.getParent.call(w)}if(v&&v.indexOf(y+"#")!==0&&v.indexOf("#")!==0&&v.indexOf("javascript")!==0){u(v);s.stop(x)}}});return t},addEvent:(function(){function t(w,u,B,v){var y,D,C=w._events||{},z=!B?n.Events[u]:false,x=z?u+"Custom":u,A=C[x];if(!A){D=new d(w);C[x]=A={dispatcher:D,handleEvent:function(F){if(f.driver==="Mootools"){var E=window.DOMEvent||window.Event;F=new E(F);["offsetY","offsetX","relatedTarget","button","metaKey","altKey","shiftKey","ctrlKey","clientY","clientX","screenY","screenX","which","pageY","pageX","layerY","layerX","charCode","keyCode","timeStamp","cancelable","bubbles","target","type","detail","wheelDelta","touches","changedTouches"].forEach(function(G){if(!f.owns(F,G)){F[G]=F.event[G]}})}if(F.timeStamp===undefined){F.timeStamp=Date.now()}D.dispatch([F])},events:{},bindings:[],timers:[]};y=A.handleEvent;w._events=C;if(z){z(A,w,{target:w,type:u})}else{if(w.addEventListener){w.addEventListener(u,y,v||false)}else{w.attachEvent("on"+u,y);window.attachEvent("onunload",function(){w.detachEvent("on"+u,y)})}}}return A}return function(z,A,y,w,u){z=k(z);var v=this,x=(A&&typeof A.handleEvent==="function")?A:v,B=t(this,z.name,y,u);B.dispatcher.addDelegation(A,z.selector,x,w);if(z.name==="load"&&v.tagName&&v.tagName.toLowerCase()==="img"&&v.complete&&v.width>0){B.dispatcher.dispatch()}return v}}()),addEvents:function(w,y,v,t){var x,u=this;for(x in w){if(w.hasOwnProperty(x)){n.addEvent.call(u,x,w[x],y,v,t)}}return u},triggerEvent:function(t){var v=this,u=v._events||{},w=u[t],x={target:v,timeStamp:Date.now(),type:t};if(w){w.handleEvent(x)}return v},removeEvent:function(t,v,u){if(!f.is(t)){return n.removeEvents.call(this)}t=k(t);var z,x,C,E,D,y=this,w=(y._events&&y._events[t.name+"Custom"]),A=w?t.name+"Custom":t.name,B=y._events&&y._events[A];if(B){E=B.dispatcher;if(!v&&!t.selector){E.removeAll()}else{E.removeDelegation(v,t.selector)}if(E.getNumListeners()===0){delete y._events[A];D=B.events;for(C in D){if(D.hasOwnProperty(C)){n.removeEvent.call(y,C,D[C])}}if(B.timers){for(z=0,x=B.timers.length;z<x;z++){clearTimeout(B.timers[z])}}if(B.bindings){for(z=0,x=B.bindings.length;z<x;z++){B.bindings[z].dispose()}}if(!w){if(y.removeEventListener){y.removeEventListener(A,B.handleEvent,u)}else{y.detachEvent("on"+A,B.handleEvent)}}E.dispose()}}return y},removeEvents:function(w,t){var x,v=this,u=typeof w!=="undefined",y=u?w:v._events;for(x in y){if(y.hasOwnProperty(x)){n.removeEvent.call(v,x,u?w[x]:null,t)}}return v},fillParent:function(z,t){z=z||"height";var u=this,w=t||n.getParent.call(u),y=n.setStyle.bind(u),x=a.ucfirst(z),v=10000;if(w){y("height",v+"px");y("height",(w["offset"+x]-w["scroll"+x]+v)+"px")}return u},setSelectable:(function(){function t(u){s.preventDefault(u)}return function(u){var v=this;v.setAttribute("unselectable",u?"off":"on");n.setStyles.call(v,{userSelect:u?"":"none",touchCallout:u?"":"none"});n[u?"removeEvent":"addEvent"].call(v,"selectstart",t);return v}}()),requestFullscreen:(function(){var t=i(r,"requestFullscreen")||i(r,"requestFullScreen");return t?function(){return t.call(this,1)}:function(){throw new Error("Element#requestFullscreen is not available in this platform")}}())});function j(t,u){if(typeof u==="function"){u=u()}else{if(u===undefined){u=i(r,"on{}"+t,true);if(u){u=u.slice(2)}}}if(t===u){return}n.Events[t]=function(v,w){if(!u){throw new Error("The event "+t+" is not supported on this platform")}n.addEvent.call(w,u,v.handleEvent,true);v.events[u]=v.handleEvent}}n.Events={mouseleave:(function(){function t(v,w){var u=false;if(v!==w){while(w&&w!==v){w=w.parentNode}u=v===w}return u}return function(u,w,x){var v=u.handleEvent;if(w.addEventListener){u.handleEvent=function(z){var y=z.relatedTarget;if(this!==y&&!t(this,y)){v.call(this,x)}};n.addEvent.call(w,"mouseout",u.handleEvent);u.events.mouseout=u.handleEvent}else{n.addEvent.call(w,"mouseleave",v,true);u.events.onmouseleave=v}}}()),mouseenter:(function(){function t(v,w){var u=false;if(v!==w){while(w&&w!==v){w=w.parentNode}u=v===w}return u}return function(u,w,x){var v=u.handleEvent;if(w.addEventListener){u.handleEvent=function(z){var y=z.relatedTarget;if(this!==y&&!t(this,y)){v.call(this,x)}};n.addEvent.call(w,"mouseover",u.handleEvent);u.events.mouseover=u.handleEvent}else{n.addEvent.call(w,"mouseenter",v,true);u.events.mouseenter=v}}}()),mousewheel:function(t,w){var v=t.handleEvent,u=o.Engine.firefox?"DOMMouseScroll":"mousewheel";t.handleEvent=function(x){x=x||window.event;x.wheel=(x.wheelDelta)?x.wheelDelta/120:-(x.detail||0)/3;v(x)};n.addEvent.call(w,u,t.handleEvent,true);t.events[u]=t.handleEvent},update:function(t,v,w){var u=new g(function(y){var x=y[0];t.handleEvent(Object.assign(w,{record:x}))});u.observe(v,{childList:true,subtree:true})},resize:(function(){var x,u=new m(),t=200;function w(z){var y;if(f.is(z,["window","document"])){y=o.getSize();y=[y.width,y.height]}else{y=[z.scrollWidth,z.scrollHeight,z.offsetWidth,z.offsetHeight]}return y.join("x")}function v(){clearTimeout(x);u.dispatch();if(u.getNumListeners()>0){x=setTimeout(v,t)}}return function(z,C,E){var y,B=220,A=w(C),D="orientationchange";if(z.bindings.length>0){return}z.timers=[y];if(window===C&&f.is(window[D])){n.addEvent.call(C,D,v);z.events[D]=v}z.bindings=[u.add(function(){var F=w(C),G=A==="0x0"||f.is(C,["window","document"])?false:!n.isInjected.call(C),H=F==="0x0";if(A!==F&&!H){A=F;if(!G){clearTimeout(y);y=setTimeout(function(){z.handleEvent(E)},B)}}})];v()}}())};j("fullscreenchange");j("fullscreenerror");j("transitionEnd",function(){var v,t=document.createElement("fakeelement"),u={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",msTransition:"MSTransitionEnd",OTransition:"oTransitionEnd",transition:"transitionEnd"};for(v in u){if(u.hasOwnProperty(v)&&f.is(t.style[v])){return u[v]}}});(function(y){var v=y.querySelectorAll,w=y.querySelector,u=y.getElementsByClassName,t=true;l.configure({useNativeQSA:false});try{v.call(y,"a:not(.foo)")}catch(x){t=false}if(!y.matchesSelector){n.matchesSelector=i(y,"matchesSelector")||function(z,A){return l.is(this,z,A&&A.parentNode)}}if(!v||!t){n.querySelectorAll=function(z){return l(z,this)}}if(!w||!t){n.querySelector=function(){return n.querySelectorAll.apply(this,arguments)[0]}}if(!u){n.getElementsByClassName=function(z){return l("."+z,this)}}}(r));document.exitFullscreen=i(document,"exitFullscreen")||i(document,"cancelFullScreen")||function(){throw new Error("Element#requestFullscreen is not available in this platform")};if(!("fullscreenEnabled" in document)){document.fullscreenEnabled=i(document,"fullscreenEnabled")}(function(){var v="fullscreenElement",t=i(document,v,true)||i(document,"fullScreenElement",true)||i(document,"currentFullScreenElement",true);if(t&&t!==v){try{n.addEvent.call(document,"fullscreenchange",function(){document[v]=document[t]});document[v]=document[t]}catch(u){}}}());return f.namespace("Element",n,f,true)});