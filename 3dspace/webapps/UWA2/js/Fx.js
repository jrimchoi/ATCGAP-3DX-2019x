define("UWA/Fx",["UWA/Core","UWA/String","UWA/Class","UWA/Class/Options","UWA/Class/Events","UWA/Class/Timed","UWA/Element","UWA/Color"],function(e,d,a,i,j,g,c,b){function h(l){return["borderColor","backgroundColor","color"].indexOf(d.camelCase(l))!==-1}function k(m){var l=Number(m);if(isNaN(l)){l=parseInt(m,10)}return isNaN(l)?0:l}var f=a.extend(i,g,j,{defaultOptions:{transition:"linear",duration:500,unit:"px",wait:false},element:null,from:null,to:null,current:null,init:function(m,l){var n=this;n.element=m;n.from={};n.to={};n.queue=[];n.setOptions(l)},tween:function(l,o,n){var m={};m[l]=[o,n];return this.start(m)},fade:function(l){l=l!==undefined?l:"toggle";var m="opacity",o=c.getOpacity.call(this.element),n={};n[m]=[];switch(l){case"in":n[m]=[o,1];break;case"out":n[m]=[o,0];break;case"show":n[m]=[1,1];break;case"hide":n[m]=[0,0];break;case"toggle":if(o<1){n[m]=[o,1]}else{n[m]=[o,0]}break;default:n[m]=[o,l]}return this.start(n)},start:function(l){var m=this;if(!m.options.wait||!m.hasAnimate("fx")){m.stop();m.setSteps(l);m.dispatchEvent("onStart");m.startTime=Date.now();m.current={};m.animate()}else{m.queue.push(l)}return m},pause:function(){var l=this;l.clearAnimate("fx");return l},stop:function(){var l=this;l.pause();l.from={};l.to={};return l},setSteps:function(m){var p,o=this,r={},q={};for(p in m){if(m.hasOwnProperty(p)){p=d.camelCase(p);if(Array.isArray(m[p])){r[p]=m[p][0];q[p]=m[p][1]}else{r[p]=c.getStyle.call(o.element,p);q[p]=m[p]}if(h(p)){var n=b.parse(r[p]).toObject();var l=b.parse(q[p]).toObject();r[p]=[n.r,n.g,n.b,n.alpha];q[p]=[l.r,l.g,l.b,l.alpha]}else{r[p]=k(r[p]);q[p]=k(q[p])}}}o.from=r;o.to=q},compute:function(r,q){var m,l=this.options,p=l.transition,o=l.duration,n=e.typeOf(p);if(n==="string"){if(!e.is(f.Transitions[p],"function")){throw new Error("Invalid UWA.FX transition option value.")}else{p=f.Transitions[p]}}else{if(n==="array"){p=f.Transitions.cubicBezier.apply(null,p)}else{if(n!=="function"){throw new Error("Invalid UWA.FX transition option value.")}}}if(o>0&&r!==q){m=p(this.currentTime,r,q-r,o)}else{m=q}if(isNaN(m)){throw new Error(d.format('Invalid UWA.FX transition computation value with from "{0}" to "{1}".',r,q))}return m},animate:function(){var p,m=this,o=Date.now(),n=m.options.duration,l=m.startTime;if(o<l+n){m.currentTime=o-l}else{m.currentTime=n;p=true}m.dispatchEvent("onAnimate",[m.element,m.from,m.to]);if(p){m.stop();m.dispatchEvent("onComplete");if(m.queue.length>0){m.start(m.queue.shift())}m.lastTime=null}else{m.setAnimate("fx",m.animate)}m.fps=1000/(o-(m.lastTime||o));m.lastTime=o},onAnimate:function(l,r,q){var m,p,o=this,n={};for(m in r){if(r.hasOwnProperty(m)){if(h(m)){p="rgba("+Math.round(o.compute(r[m][0],q[m][0]))+","+Math.round(o.compute(r[m][1],q[m][1]))+","+Math.round(o.compute(r[m][2],q[m][2]))+","+o.compute(r[m][3],q[m][3])+")"}else{p=o.compute(r[m],q[m])}if(o.current[m]!==p){n[m]=p}}}o.current=n;c.setStyles.call(l,n)}});f.Transitions={linear:function(m,l,o,n){return o*m/n+l},quadIn:function(m,l,o,n){return o*(m/=n)*m+l},quadOut:function(m,l,o,n){return -o*(m/=n)*(m-2)+l},quadInOut:function(m,l,o,n){return((m/=n/2)<1)?(o/2*m*m+l):(-o/2*((--m)*(m-2)-1)+l)},cubicIn:function(m,l,o,n){return o*(m/=n)*m*m+l},cubicOut:function(m,l,o,n){return o*((m=m/n-1)*m*m+1)+l},cubicInOut:function(m,l,o,n){return((m/=n/2)<1)?(o/2*m*m*m+l):(o/2*((m-=2)*m*m+2)+l)},quartIn:function(m,l,o,n){return o*(m/=n)*m*m*m+l},quartOut:function(m,l,o,n){return -o*((m=m/n-1)*m*m*m-1)+l},quartInOut:function(m,l,o,n){return((m/=n/2)<1)?(o/2*m*m*m*m+l):(-o/2*((m-=2)*m*m*m-2)+l)},quintIn:function(m,l,o,n){return o*(m/=n)*m*m*m*m+l},quintOut:function(m,l,o,n){return o*((m=m/n-1)*m*m*m*m+1)+l},quintInOut:function(m,l,o,n){return((m/=n/2)<1)?(o/2*m*m*m*m*m+l):(o/2*((m-=2)*m*m*m*m+2)+l)},sineIn:function(m,l,o,n){return -o*Math.cos(m/n*(Math.PI/2))+o+l},sineOut:function(m,l,o,n){return o*Math.sin(m/n*(Math.PI/2))+l},sineInOut:function(m,l,o,n){return -o/2*(Math.cos(Math.PI*m/n)-1)+l},expoIn:function(m,l,o,n){return(m===0)?l:(o*Math.pow(2,10*(m/n-1))+l)},expoOut:function(m,l,o,n){return(m===n)?(l+o):(o*(-Math.pow(2,-10*m/n)+1)+l)},expoInOut:function(m,l,o,n){if(m===0){return l}if(m===n){return l+o}return((m/=n/2)<1)?(o/2*Math.pow(2,10*(m-1))+l):(o/2*(-Math.pow(2,-10*--m)+2)+l)},circIn:function(m,l,o,n){return -o*(Math.sqrt(1-(m/=n)*m)-1)+l},circOut:function(m,l,o,n){return o*Math.sqrt(1-(m=m/n-1)*m)+l},circInOut:function(m,l,o,n){return((m/=n/2)<1)?(-o/2*(Math.sqrt(1-m*m)-1)+l):(o/2*(Math.sqrt(1-(m-=2)*m)+1)+l)},backIn:function(m,l,p,o,n){n=(!n?1.70158:n);return p*(m/=o)*m*((n+1)*m-n)+l},backOut:function(m,l,p,o,n){n=(!n?1.70158:n);return p*((m=m/o-1)*m*((n+1)*m+n)+1)+l},backInOut:function(m,l,p,o,n){n=(!n?1.70158:n);return((m/=o/2)<1)?(p/2*(m*m*(((n*=(1.525))+1)*m-n))+l):(p/2*((m-=2)*m*(((n*=(1.525))+1)*m+n)+2)+l)},elasticIn:function(n,l,u,r,m,q){var o;if(n===0){return l}if((n/=r)===1){return l+u}q=(!q?r*0.3:q);m=(!m?1:m);if(m<Math.abs(u)){m=u;o=q/4}else{o=q/(2*Math.PI)*Math.asin(u/m)}return -(m*Math.pow(2,10*(n-=1))*Math.sin((n*r-o)*(2*Math.PI)/q))+l},elasticOut:function(n,l,u,r,m,q){var o;if(n===0){return l}if((n/=r)===1){return l+u}q=(!q?r*0.3:q);m=(!m?1:m);if(m<Math.abs(u)){m=u;o=q/4}else{o=q/(2*Math.PI)*Math.asin(u/m)}return m*Math.pow(2,-10*n)*Math.sin((n*r-o)*(2*Math.PI)/q)+u+l},elasticInOut:function(n,l,v,u,m,r){var o,q;if(n===0){q=l}else{if((n/=u/2)===2){q=l+v}else{r=(!r?u*(0.3*1.5):r);m=(!m?1:m);if(m<Math.abs(v)){m=v;o=r/4}else{o=r/(2*Math.PI)*Math.asin(v/m)}if(n<1){q=(-0.5*(m*Math.pow(2,10*(n-=1))*Math.sin((n*u-o)*(2*Math.PI)/r))+l)}else{q=(m*Math.pow(2,-10*(n-=1))*Math.sin((n*u-o)*(2*Math.PI)/r)*0.5+v+l)}}}return q},bounceIn:function(m,l,o,n){return o-f.Transitions.bounceOut(n-m,0,o,n)+l},bounceOut:function(m,l,p,o){var n;if((m/=o)<(1/2.75)){n=p*(7.5625*m*m)+l}else{if(m<(2/2.75)){n=p*(7.5625*(m-=(1.5/2.75))*m+0.75)+l}else{if(m<(2.5/2.75)){n=p*(7.5625*(m-=(2.25/2.75))*m+0.9375)+l}else{n=p*(7.5625*(m-=(2.625/2.75))*m+0.984375)+l}}}return n},bounceInOut:function(m,l,p,n){var o=f.Transitions;return(m<n/2)?(o.bounceIn(m*2,0,p,n)*0.5+l):(o.bounceOut(m*2-n,0,p,n)*0.5+p*0.5+l)},quinticBezier:(function(){function l(r,q,p,o,n,m){var s=5*(q-r),t=10*(p-r)-4*s,u=10*(o-r)+30*(q-p),v=5*(n+r)-20*(o+q)+30*p,w=m-r-v-u-t-s;return{a:w,b:v,c:u,d:t,e:s}}return function(x,w,v,u,t,s){var q=x,p=s-x,o=(w-q)/p,n=(v-q)/p,m=(u-q)/p,y=(t-q)/p,r=l(q,o,n,m,y,p);return function(H,G,F,D){var E,C,B=(H/D),A=B*B,z=A*H;if(r.a||r.c){if(r.b||r.d){E=A;C=A*B}else{C=z}}else{if(r.b||r.d){E=z}}return G+F*((r.a*A)+(r.b*A)+(r.c*C)+(r.d*E)+(r.e*B))}}}()),cubicBezier:(function(){function p(y,x,w,u){var v=3*y,A=3*(w-y)-v,s=1-v-A,t=3*x,z=3*(u-x)-t,B=1-t-z;return{ax:s,bx:A,cx:v,ay:B,by:z,cy:t}}function l(s){return(1000/60/s)/4}function r(s,u){return((u.ax*s+u.bx)*s+u.cx)*s}function q(s,u){return((u.ay*s+u.by)*s+u.cy)*s}function m(s,u){return(3*u.ax*s+2*u.bx)*s+u.cx}function o(A,y,B){var u,z,w,v,t,s,C;for(v=A,u=0;u<8;u++){t=r(v,y)-A;if(Math.abs(t)<B){return v}s=m(v,y);if(Math.abs(s)<B){break}v=v-t/s}z=0;w=1;v=A;if(v<z){C=z}else{if(v>w){C=w}else{while(z<w){t=r(v,y);if(Math.abs(t-A)<B){return v}if(A>t){z=v}else{w=v}v=(w-z)*0.5+z}C=v}}return C}function n(s,t,u){return q(o(s,t,u),t)}return function(t,s,v,u){var w=p(t,s,v,u);return function(z,x,E,C){var A=(z/C),D=l(C),B=n(A,w,D),y=1-B;return(x*y)+((x+E)*B)}}}())};return e.namespace("Fx",f,e)});