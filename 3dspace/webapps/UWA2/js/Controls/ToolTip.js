define("UWA/Controls/ToolTip",["UWA/Core","UWA/Event","UWA/Controls/Abstract","UWA/Element","UWA/Class/Timed","UWA/Utils/Client","UWA/Controls/DropDown"],function(f,j,g,c,h,e,b){var k;var d=new b.Pointy({autoPosition:["below-start","right-start","left-start","above-start"],margin:20,positionOptions:{relative:document.querySelector("body")}});var a=new h();var i=g.extend({name:"uwa-tooltip",content:"",defaultOptions:{id:"uwa-tooltip",className:"",width:"auto",delay:800,showOver:true,root:null},mousePosition:{},init:function(m,n,l){this._parent(l);this.content=n||"";this._tooltipped=f.extendElement(m);this._attachEvents()},destroy:function(){this.hide();this._detachEvents();this._parent()},_attachEvents:function(){if(!this._events){var l=this._events={tooltipped:{},tooltippedOnShown:{},bodyOnShown:{}};if(this.options.showOver){l.tooltipped.mouseover=this.dispatchAsEventListener("onShowTooltip");l.tooltippedOnShown.mouseout=this.dispatchAsEventListener("onHideTooltip");l.tooltippedOnShown.click=this.dispatchAsEventListener("onHideTooltip");l.bodyOnShown.mousemove=this.dispatchAsEventListener("onMoveTooltip")}}this._tooltipped.addEvents(this._events.tooltipped)},_detachEvents:function(){if(this._events){this._tooltipped.removeEvents(this._events.tooltipped);this._tooltipped.removeEvents(this._events.tooltippedOnShown);c.removeEvents.call(document.querySelector("body"),this._events.bodyOnShown,true)}},buildSkeleton:function(){var q,p=this,n=p.options,l=c.getDocument.call(p._tooltipped),m=p.getRootNode(),r=c.getChildren.call(m),s=n.id,o=0;while(true){q=l.getElementById(n.id);if(!q||r.indexOf(q)>=0){break}else{n.id=s+"-"+o++}}if(!q){q=d.getContent();q.id=n.id;if(k===undefined){k=q.className}q.set("class",k+" "+this.getClassNames());q.setStyle("width",n.width);q.inject(m)}p._tooltip=q;return q},_tooltippedIsActive:function(){var o=this._tooltipped;function l(r){var s=r.getStyles(["visibility","opacity"]);return s.visibility!=="hidden"&&s.opacity>0.5}var q=l(o)&&o.getParents().every(l);var p=e.getScrolls();var m=document.elementFromPoint(this.mousePosition.x-p.x,this.mousePosition.y-p.y);var n=c.isInjected.call(m,o)||m===o;return q&&n},show:function(p,t){var n,m,l,r,u,s=this,o=f.is,v=s._tooltip,q=s._tooltipped;if(!p&&!this._tooltippedIsActive()){return}if(!v){v=s.buildSkeleton()}d.getInnerElement().setContent(s.content);v.show();if(!o(p)){p=s.mousePosition;r={relative:document.querySelector("body")}}else{if(o(p,"string")||(o(p,"object")&&o(p.x,"string")&&o(p.y,"string"))){p=q.getPosition(false,p);r={relative:this._tooltipped.getOffsetParent()};if(t){u=v.getDimensions();for(n=0;n<2;n+=1){m=n?"x":"y";l=n?"width":"height";p[m]=p[m]-(u[l]/2)}}}}v.addClassName("show");d.setPosition(p,r);s.visible=true;return s},hide:function(){var l=this,m=l._tooltip;if(l.visible){m.removeClassName("show");m.hide()}a.clearDelayed();l.visible=false;return l},toggle:function(){var l=this;if(l.visible){l.hide()}else{l.show()}},setDelay:function(){var n=this,m=n.options,l=m.delay;if(!n.visible){a.setDelayed("tooltip",function(){n.show()},l)}},onShowTooltip:function(m){var l=this;l.mousePosition=j.getPosition(m);this._tooltipped.addEvents(this._events.tooltippedOnShown);c.addEvents.call(document.querySelector("body"),this._events.bodyOnShown,null,null,true);if(this.options.delay){l.setDelay()}else{l.show()}},onMoveTooltip:function(o){var n=this,m=n.options,l=m.delay;n.mousePosition=j.getPosition(o);if(l>0){n.hide();n.setDelay()}else{d.setPosition(n.mousePosition)}},onHideTooltip:function(){this._tooltipped.removeEvents(this._events.tooltippedOnShown);c.removeEvents.call(document.querySelector("body"),this._events.bodyOnShown,true);this.hide()},getRootNode:function(){return this.options.root||this._tooltipped.getOffsetParent()}});j.onDomReady(function(){var l=e.Features.touchEvents;if(l){return}c.addEvent.call(document.querySelector("body"),"mouseover [uwa-tooltip]",function(p){var o=j.getElement(p);if(!o||!o.getAttribute("uwa-tooltip")){return}o.set("title","");var n=new i(o,o.getAttribute("uwa-tooltip"),{root:document.querySelector("body"),delay:Number(o.getAttribute("uwa-tooltip-delay"))||800,showOver:false});n.dispatchEvent("onShowTooltip",[p]);var m={"mousemove [uwa-tooltip]":function(q){n.dispatchEvent("onMoveTooltip",[q])},"mouseout [uwa-tooltip]":function(q){n.dispatchEvent("onHideTooltip",[q]);c.removeEvents.call(document.querySelector("body"),m)}};c.addEvents.call(document.querySelector("body"),m)})});return f.namespace("Controls/ToolTip",i,f)});