define("UWA/Controls/Notify",["UWA/Core","UWA/Controls/Abstract","UWA/Event","UWA/Fx"],function(e,d,a,c){var b=d.extend({defaultOptions:{className:"",showOnInject:true,closeOnClick:true,transition:"quadOut",duration:500,fx:true,from:"top",to:"bottom",max:0},messages:null,init:function(f){var g=this;g.messages=[];g._parent(f);if(g.options.messages){g.addMessage(g.options.messages)}g.buildSkeleton()},buildSkeleton:function(){var g=this,h=g.elements,f=g.options;h.container=e.createElement("div",{"class":"uwa-notify",events:{resize:g.dispatchAsEventListener("onResize")}});if(f.className){h.container.addClassName(f.className)}},showMessage:function(j){var i,h=this,f,g=h.messages;if(!j){f=g.shift()}else{f=g.indexOf(j);if(f>-1){f=g.splice(f,1)[0]}else{f=false}}if(f){i=h.injectItem(f)}return i},addMessage:function(f,g){this.messages.push(f);if(g){this.showMessage(f)}},addMessages:function(g){var f=this;g.forEach(function(h){f.messages.push(h)})},getItems:function(){return this.getContent().getElements(".uwa-notify-item")},injectItem:function(r){var j,k,f,q,m=this,s=m.options,h=m.getContent(),o=m.getItems(),g=h.getOffsetParent(),l=g.getDimensions(),i=0,p={},n={};q=e.createElement("div",{"class":"uwa-notify-item",html:{tag:"div","class":"uwa-notify-msg",html:[{tag:"div","class":"uwa-notify-header"},{tag:"a","class":"uwa-notify-close",text:"\u00D7",href:"#close"},{tag:"div","class":"uwa-notify-body",html:r},{tag:"div","class":"uwa-notify-footer"}]},styles:{visibility:"hidden",zIndex:String(100-o.length)}});q.addEvent("click",function(v){var u=a.getElement(v),t="onClick";if(u.hasClassName("uwa-notify-close")){t="onClose"}m.dispatchEvent(t,[v,q])});o.forEach(function(t){i+=t.getDimensions().outerHeight});q.inject(h);m.updateItems();k=q.getPosition();f=q.getDimensions();if(s.to==="top"){n.top=i+"px"}else{if(s.to==="bottom"){n.top=(l.innerHeight-f.outerHeight-i)+"px"}}if(s.from==="top"){p.top=(-f.outerHeight)+"px"}else{p.top=(f.outerHeight+l.outerHeight)+"px"}q.setStyles({left:((l.innerWidth/2)-(f.width/2))+"px",visibility:"visible"});if(s.fx){if(s.fade){p.opacity=0;n.opacity=1}q.setStyles(p);j=new c(q,{transition:s.transition,duration:s.duration,events:{onStart:function(){q.addClassName("moving")},onComplete:function(){q.removeClassName("moving")}}}).start(n)}else{q.setStyles(n)}return q},updateItems:function(){var k=this,i=k.options,g=k.getContent(),h=k.getItems(),j=g.getOffsetParent(),f=j.getDimensions(),l=0;h.forEach(function(o){var m,n=o.getDimensions();if(i.to==="top"){m=l}else{if(i.to==="bottom"){m=(f.innerHeight-n.outerHeight-l)}}l+=n.outerHeight;if(!o.hasClassName("moving")){o.setStyles({left:((f.innerWidth/2)-(n.width/2))+"px",top:m+"px"})}})},onPostInject:function(){if(this.options.showOnInject){this.showMessage()}},onResize:function(){this.updateItems()},onClose:function(i,h){var g,f=this;a.stop(i);if(!h.hasClassName("closing")){g=new c(h,{events:{onStart:function(){h.addClassName("closing")},onComplete:function(){h.destroy();f.updateItems()}}}).fade("out")}},onClick:function(i,h){var g=this,f=a.getElement(i);if(g.options.closeOnClick||f.hasClassName("uwa-notify-close")){g.dispatchEvent("onClose",[i,h])}}});return e.namespace("Controls/Notify",b,e)});