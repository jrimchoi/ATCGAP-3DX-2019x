define("UWA/Controls/FeedView/Channel",["UWA/Core","UWA/String","UWA/Controls/FeedView/Carousel","UWA/Controls/Pager","UWA/Event"],function(f,d,e,c,a){var b=e.extend({eltMargin:20,displayPager:false,viewName:"carousel channel",showItem:function(h){var g;this._parent(h);if(this.presentedItem){this.presentedItem.remove()}this.presentedItem=g;this.loadItemsImages()},buildItemImage:function(t,i){var m=this,h=m.options,l=h.images,u=t[i]||"",p=f.createElement("img"),s="",x=f.createElement("div",{"class":"hentry"}),g=f.createElement("div",{"class":"entry-image",html:p}),n=f.createElement("div",{"class":"entry-title",html:{tag:"span","class":"title",html:t.title?d.stripTags(t.title):""}}),k=f.createElement("div",{"class":"entry-share"}),q=f.createElement("div",{"class":"item-date",text:t.date?d.parseRelativeTime(t.date.toString()):""}),o=f.createElement("div",{"class":"item-dragAndFollow"}),v="",j=m.resizeItemImage.bind(m,x),w=125,r="no-image";s=t.description||t.content||"";if(!t[i]){k.addClassName(r);n.addClassName(r);s=d.stripTags(s);s=d.cut(s,w);v=f.createElement("span",{"class":"entry-description",text:s});n.appendChild(v)}if(h.enableShare){if(h.shareFunction){k.addEvent("click",this.share.bind(this))}g.appendChild(k)}x.appendChild(g);g.appendChild(n);x.appendChild(q);if(h.enableDragAndFollow){x.appendChild(o)}this.addItemImage({item:t,container:x,src:u,onLoad:function(){p.setAttribute("src",u);j()},onError:function(){p.destroy()},onLoading:function(){p.setAttribute("src",l.loader);j()}});return x},onResize:function(){this._parent();var h=this.elements.items.getChildren(),g=0;h.forEach(function(i){g+=i.offsetWidth+this.eltMargin},this);this.elements.items.setStyle("width",g+"px");this.refreshScroller();if(this.pager){this.refreshPager()}},buildPager:function(g){if(this.displayPager){var h=this,i=f.merge({_root:false,events:{onOffsetChange:function(k){var j=h.options.source.getItems();h.showItem(j[k])}}},h.options.pager);h.pager=new c(i);h.pager.inject(h.container,g)}},share:function(g){a.stopPropagation(g);this.options.shareFunction()}});return f.namespace("Controls/FeedView_Channel",b,f)});