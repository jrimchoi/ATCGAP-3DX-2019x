define("UWA/Controls/Picker",["UWA/Core","UWA/Utils","UWA/Event","UWA/Class/Timed","UWA/Controls/Input","UWA/Controls/DropDown","UWA/Element"],function(h,d,a,g,f,e,c){var b=f.extend(g,{name:"uwa-picker",options:{navigation:null,button:null,valueInput:"text",dropdownOptions:{global:true},dropdownContainer:null},buildSkeleton:function(){var i=this.options,j=this.elements;this._parent();if(i.valueInput&&i.button){j.content.addClassName(this.getClassNames("-split"))}else{if(i.button){j.container.addClassName("button-only")}else{if(i.valueInput){j.container.addClassName("value-only")}}}if(i.valueInput){j.content.setContent(j.value=h.createElement("div",{"class":this.getClassNames("-value")}));if(i.valueInput==="text"){j.value.addClassName(this.getClassNames("-text"))}}if(i.button){j.content.addContent(j.button=h.createElement("div",{"class":this.getClassNames("-button"),html:i.button}))}},buildContent:function(){},buildNavigation:function(i){return d.splat(i).map(function(j){return h.is(j,"element")?j:this.buildNavigationItem(j)},this)},buildNavigationItem:function(j){var i=this;return h.createElement("div",{text:j.label,"class":this.getClassNames("-navigationlink"),events:{click:function(k){i.dispatchEvent("onNavigationClick",[k,j])}}})},syncInput:function(){var i=this.elements.value;if(i!==this.elements.input){i.setText(this.getValue())}},isOpen:function(){return Boolean(this.elements.dropdown&&this.elements.dropdown.isOpen())},focus:function(k){var j=this,i=j._parent;setTimeout(function(){var l=document.activeElement,n=j.elements.dropdown;function m(){c.removeEvent.call(l,"blur",m);j.focus(false)}if(l&&n&&c.isInjected.call(l,n.getInnerElement())){c.addEvent.call(l,"blur",m)}else{i.call(j,k);if(k===false){j.toggle(k)}}},0)},open:function(){return this.toggle(true)},close:function(){return this.toggle(false)},toggle:function(l){var k=this.elements,i=this.options;if((l===true||l===undefined)&&!k.dropdown){var j=h.extend({target:k.button||k.content,autoPosition:["below-end","right-start","above-end","left-start"]},i.dropdownOptions);j._root=false;j.className=this.getClassNames("-dropdown")+" "+(j.className||"");k.dropdown=new e.Pointy(j).addEvents({onShow:this.dispatchEvent.bind(this,"onOpen"),onHide:this.dispatchEvent.bind(this,"onClose")});if(i.navigation){k.navigation=h.createElement("div",{"class":this.getClassNames("-navigation"),html:this.buildNavigation(this.options.navigation)})}k.dropdown.getInnerElement().addEvent("mousedown",a.stopPropagation).addEvent("click",a.stopPropagation).addContent({tag:"div","class":this.getClassNames("-selector"),html:this.buildContent()},k.navigation);k.dropdown.inject(i.dropdownContainer||k.container)}if(k.dropdown){k.dropdown.toggle(l)}},onClick:function(){this.setDelayed("debounced-toggle",this.toggle,1)},onOpen:function(){this.elements.container.addClassName("open")},onClose:function(){this.elements.container.removeClassName("open")},onNavigationClick:function(j,i){this.setValue(i.value)}});return h.namespace("Controls/Picker",b,h)});