define("UWA/Controls/Flash",["UWA/Core","UWA/Utils","UWA/Controls/Abstract"],function(d,a,c){var b=c.extend({id:null,defaultOptions:{url:"",width:320,height:240,className:"uwa-swf",pluginspage:"http://www.macromedia.com/go/getflashplayer",flashVars:"",scale:"exactfit",wmode:"opaque",quality:"hight",allowScriptAccess:"sameDomain",bgcolor:false,allowfullscreen:"true"},flashVersion:null,init:function(e){this._parent(e);e=this.options;this.id=e.id||a.random(10);this.flashVersion=this.detectFlashVersion();this.buildSkeleton()},buildSkeleton:function(){function j(o){return String(o).replace(/(&amp;)|(&)/g,"%26")}var l,g,f,i,k=window.navigator,e=this.elements,n=this.options,h=n.flashVars||"",m=j(n.url||"");this.container=e.container=d.createElement("div",{"class":n.className});if(!d.is(h,"string")){h=j(a.toQueryString(h))}if(k.plugins&&k.mimeTypes&&k.mimeTypes.length){e.flashTag=d.createElement("embed",{id:this.id,type:"application/x-shockwave-flash",src:m,width:n.width,height:n.height,pluginspage:n.pluginspage,flashvars:h,scale:n.scale,quality:n.quality,allowScriptAccess:n.allowScriptAccess,wmode:n.wmode,allowfullscreen:n.allowfullscreen})}else{i=[];l={movie:m,flashvars:h,quality:n.quality,allowScriptAccess:n.allowScriptAccess,wmode:n.wmode,allowfullscreen:n.allowfullscreen};for(g in l){if(l.hasOwnProperty(g)){i.push({tag:"param",name:g,value:l[g]})}}e.flashTag=d.createElement("object",{id:this.id,width:n.width,height:n.height,classid:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",html:i})}e.flashTag.inject(e.container);this.object=e.flashTag;if(this.flashVersion.major===0){f=d.createElement("p",{text:d.i18n("You need Adobe Flash to display this Content."),styles:{textAlign:"center"}});f.inject(e.container)}return this.container},getFlashContainer:function(){if(this.object===undefined){this.getContent()}return this.object},getFlashVersion:function(){return this.flashVersion},detectFlashVersion:function(){var j,i,g,f=[0,0,0];if(navigator.plugins&&navigator.mimeTypes.length){g=navigator.plugins["Shockwave Flash"];if(g&&g.description){f=g.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split(".")}}else{if(navigator.userAgent&&navigator.userAgent.indexOf("Windows CE")>=0){j=1;i=3;while(j){try{i++;j=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+i);f=[i,0,0]}catch(k){j=null}}}else{try{j=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7")}catch(e){try{j=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");f=[6,0,21];j.AllowScriptAccess="always"}catch(h){if(f.major===6){return f}}try{j=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(l){j=null}}if(j!==null){f=j.GetVariable("$version").split(" ")[1].split(",")}}}return{major:f[0],minor:f[1],rev:f[2]}}});return d.namespace("Controls/Flash",b,d)});