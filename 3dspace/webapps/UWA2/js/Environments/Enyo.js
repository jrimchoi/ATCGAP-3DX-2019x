define("UWA/Environments/Enyo",["UWA/Core","UWA/Internal/StringMap"],function(b,a){b.Data.allowCrossOriginRequest=false;b.Data.useOfflineCache=true;b.extend(b.Environment.prototype,{name:"enyo",init:function(c){var d=this;this.data=new a();enyo.kind({name:"EnyoApp",kind:enyo.Control,components:[{kind:"AppMenu",components:[{kind:"EditMenu"},{caption:"Preferences",onclick:"toggleEdit"},{caption:"Refresh",onclick:"onRefresh"}]}],openAppMenu:function(){this.$.appMenu.open()},toggleEdit:function(){d.dispatchEvent("toggleEdit")},onRefresh:function(){d.dispatchEvent("onRefresh")}});window.MyEnyoApp=new EnyoApp();this._parent(c)},onInit:function(){var c=b.extendElement(document.body),d=c.getElement.bind(c);this.html={wrapper:d(".module"),header:d(".moduleHeader"),title:d(".title"),icon:d(".icon"),refreshLink:d(".refresh"),editLink:d(".edit"),content:d(".moduleWrapper"),body:d(".moduleContent"),edit:d(".moduleEdit"),footer:d(".moduleFooter")};if(!this.scroller){this.scroller=new b.Controls.Scroller(this.html.content,{snap:false,bounce:true,lockDirection:true,momentum:true});this.onResize()}b.Element.addEvent.apply(window,["resize",this.dispatchEvent.bind(this,"onResize")])},onRegisterWidget:function(){this.html.wrapper.handleExternalLinks(this.widget.openURL.bind(this.widget))},onResize:function(){var d=this.html,c=b.Utils.Client.getSize().height;["header","footer"].forEach(function(e){c-=d[e]?d[e].offsetHeight:0});if(c!==this.prevHeight){this.prevHeight=c;if(this.scroller){this.scroller.setOptions({height:this.prevHeight});this.scroller.onRefresh()}}},onShowEdit:function(){if(this.scroller){this.scroller.setPosition(0,0,0,true)}this.handleSelect();this._parent()},onHideEdit:function(){if(this.scroller){this.scroller.setPosition(0,0,0,true)}this._parent()},onOpenURL:function(d){d=b.Utils.parseUrl(d);if(window.PalmServiceBridge&&!d.subprotocol){var c=new window.PalmServiceBridge();c.call("palm://com.palm.applicationManager/open",JSON.stringify({id:"com.palm.app.browser",params:{target:d.source}}));return false}},handleSelect:function(){var f=document.querySelectorAll("select"),g=function(j,r){var o,k,p,q,n=j.childNodes,m=[];for(o=0,k=n.length;o<k;o++){p=n[o];m.push({caption:p.innerHTML,value:p.value})}q=enyo.kind({kind:"HtmlContent",components:[{kind:"ListSelector",onChange:"onChangeValue",className:"listSelector",value:j.value,items:m}],onChangeValue:function(l,i){if(i!==j.value){j.value=i;if(typeof j.onchange==="function"){j.onchange.call()}}}});new q().renderInto(r);j.hide();j.inject(r)};if(f){for(var e=0,d=f.length;e<d;e++){var c=b.extendElement(f[e]);var h=c.getParent();g(c,h)}}}})});