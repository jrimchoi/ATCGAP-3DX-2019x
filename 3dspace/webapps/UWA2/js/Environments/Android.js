define("UWA/Environments/Android",["UWA/Core","UWA/String","UWA/Utils","UWA/Utils/Client","UWA/Element","UWA/Environment","UWA/Json","UWA/Data","UWA/Storage/Adapter/Android","UWA/Storage/Adapter/Object"],function(e,b,f,c,a,h,d,g){if(!e.is(window.jsProxy)){window.jsProxy={setData:function(){},getData:function(){},setPreferences:function(){},setTitle:function(){}}}else{g.allowCrossOriginRequest=true;e.log=function(j){window.jsProxy.log("UWA:"+j)}}g.useOfflineCache=true;var i=h.extend({name:"android",onInit:function(){var k=document.body,j=a.getElement.bind(k);this.android=window.jsProxy;this.html={viewport:window,wrapper:j(".module"),header:j(".moduleHeader"),content:j(".moduleWrapper"),body:j(".moduleContent"),edit:j(".moduleEdit"),footer:j(".moduleFooter"),counter:j(".counter"),title:j(".title"),icon:j(".icon"),shareAction:j(".share"),refreshAction:j(".refresh"),editAction:j(".edit")};this.html.scroller=e.createElement("div",{"class":"moduleScroller"}).inject(this.html.content,"before");this.html.content.inject(this.html.scroller);this.html.content.addEvent("resize",this.dispatchEvent.bind(this,"onResize"))},onResize:function(){var k=this.html,m=c.getSize(),n=k.content.getScrolls(),l=n.width,j=m.height,o=j+"x"+n.height;if(j>0&&o!==this.prevHeight){this.prevHeight=o;if(this.html.scroller){["header","footer"].forEach(function(p){j-=k[p]?k[p].offsetHeight:0});if(n.height>j){k.scroller.setStyle("height","auto");k.scroller.setStyle("min-height",j+"px")}else{k.scroller.setStyle("height",j+"px");k.scroller.setStyle("min-height","")}}}if(this.prevWidth!==l){this.prevWidth=l}else{return false}},onInitConfig:function(){var n,j,m,o=this,p=o.data.currentAdapter.database,q=[],k=o.widget.getPreferences();for(n=0,j=k.length;n<j;n++){m=k[n];m.name="uwa-"+p+"-"+m.name;q.push(m)}o.android.setPreferences(d.encode(q));o.widget.data={}},onUpdateTitle:function(j){this._parent(j);this.android.setTitle(b.stripTags(j))}});return e.namespace("Environments/Android",i,e)});