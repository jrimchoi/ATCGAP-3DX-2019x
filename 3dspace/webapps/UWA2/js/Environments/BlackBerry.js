define("UWA/Environments/BlackBerry",["UWA/Core","UWA/Utils","UWA/Element","UWA/Environment","UWA/Data","UWA/Storage/Adapter/Dom","UWA/Storage/Adapter/Cookies","UWA/Storage/Adapter/Object","UWA/Storage/Adapter/Html5"],function(f,e,a,c,b){if(f.is(window.blackberry)){b.useJsonpRequest=false;b.allowCrossOriginRequest=true}b.useOfflineCache=true;var d=c.extend({name:"blackberry",onInit:function(){var h=document.body,g=a.getElement.bind(h);this.html={viewport:window,wrapper:g(".module"),header:g(".moduleHeader"),content:g(".moduleWrapper"),body:g(".moduleContent"),edit:g(".moduleEdit"),footer:g(".moduleFooter"),counter:g(".counter"),title:g(".title"),icon:g(".icon"),shareAction:g(".share"),refreshAction:g(".refresh"),editAction:g(".edit")};this.html.scroller=f.createElement("div",{"class":"moduleScroller"}).inject(this.html.content,"before");this.html.content.inject(this.html.scroller);this.onResize()},initBlackBerryMenus:function(){if(f.is(window.blackberry)){var h=new blackberry.ui.menu.MenuItem(true,0),j=new blackberry.ui.menu.MenuItem(false,1,f.i18n("Edit"),this.dispatchEvent.bind(this,"toggleEdit")),i=new blackberry.ui.menu.MenuItem(false,2,f.i18n("Refresh"),this.dispatchEvent.bind(this,"onRefresh")),g=new blackberry.ui.menu.MenuItem(true,3);blackberry.ui.menu.clearMenuItems();blackberry.ui.menu.addMenuItem(h);blackberry.ui.menu.addMenuItem(j);blackberry.ui.menu.addMenuItem(i);blackberry.ui.menu.addMenuItem(g);blackberry.ui.menu.setDefaultMenuItem(j)}},onRegisterWidget:function(g){this._parent(g);this.initBlackBerryMenus()},onResize:function(){var h=this.html,l=window.screen,j=h.content.getDimensions(),i=j.width,g=l.height,k=g+"x"+j.height;if(g>0&&k!==this.prevHeight){this.prevHeight=k;if(this.html.scroller){["header","footer"].forEach(function(m){g-=h[m]?h[m].offsetHeight:0});if(j.height>g){h.scroller.setStyle("height","auto");h.scroller.setStyle("min-height",g+"px")}else{h.scroller.setStyle("height",g+"px");h.scroller.setStyle("min-height","")}}}if(this.prevWidth!==i){this.prevWidth=i}else{return false}},onOpenURL:function(h){h=e.parseUrl(h);if(f.is(window.blackberry)&&!h.subprotocol){var g=new blackberry.invoke.BrowserArguments(h.source);blackberry.invoke.invoke(blackberry.invoke.APP_BROWSER,g);return false}}});return f.namespace("Environments/BlackBerry",d,f)});