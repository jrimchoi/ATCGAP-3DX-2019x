define("UWA/Environments/Air",["UWA/Core","UWA/String","UWA/Utils","UWA/Element","UWA/Environment","UWA/Data","UWA/Storage/Adapter/Air","UWA/Storage/Adapter/Object"],function(g,f,e,b,d,c){if(g.is(window.air)){g.log=function(h){air.trace(h)};c.allowCrossOriginRequest=true;c.useJsonpRequest=false}c.useOfflineCache=true;var a=d.extend({name:"air",onInit:function(){var i=document.body,h=b.getElement.bind(i);this.html={wrapper:h(".module"),header:h(".moduleHeader"),content:h(".moduleWrapper"),body:h(".moduleContent"),edit:h(".moduleEdit"),footer:h(".moduleFooter"),counter:h(".counter"),title:h(".title"),icon:h(".icon"),shareAction:h(".share"),refreshAction:h(".refresh"),editAction:h(".edit")}},onResize:function(){var i=this.html.wrapper.getScrolls(),h=i.height;if(h>0&&h!==this.prevHeight){this.prevHeight=h;if(window.nativeWindow){if(air.Capabilities.os.match(/windows/)){h+=5}window.nativeWindow.height=h;window.nativeWindow.height=h+(window.nativeWindow.height-window.nativeWindow.stage.stageHeight)}}},onUpdateTitle:function(h){this._parent(h);if(window.nativeWindow){window.nativeWindow.title=f.stripTags(h)}},onClose:function(){if(window.nativeWindow){window.nativeWindow.close()}},onMinimize:function(){if(window.nativeWindow){window.nativeWindow.minimize()}},onMaximize:function(){if(window.nativeWindow){if(!this.maximized){window.nativeWindow.maximize();this.maximized=true}else{window.nativeWindow.restore()}}},onMove:function(){if(window.nativeWindow){window.nativeWindow.startMove()}},onOpenURL:function(h){h=e.parseUrl(h);if(g.is(window.air)&&!h.subprotocol){try{air.navigateToURL(new air.URLRequest(h.source));return false}catch(i){g.log('Error during openExternalURL with url "'+h.source+'": '+i)}}}});return g.namespace("Environments/Air",a,g)});