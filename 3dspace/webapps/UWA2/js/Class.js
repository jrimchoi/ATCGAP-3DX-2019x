define("UWA/Class",["UWA/Core"],function(e){var f=false,g=/xyz/.test(function(){e.xyz()}),c=g?/\b_parent\b/:/^/,a=g?/\b_previous\b/:/^/,j="__uwaPrivateConstructor",h=function(){},b=function(){};function i(l,q,o,m){if(o._original){o=o._original}var k,n=c.test(o),p=a.test(o);if(!n&&!p){return o}if(typeof q!=="function"){if(m){q=h}else{q=l||h}}if(typeof l!=="function"){l=p?h:q}k=function(){var r,t,v,s=this,u=s!==null&&s!==undefined;if(u){if(n){t=s._parent;s._parent=l}if(p){v=s._previous;s._previous=q}r=o.apply(s,arguments);if(n){s._parent=t}if(p){s._previous=v}}else{r=o.apply(s,arguments)}return r};k.displayName="(method wrapper)";k._original=o;return k}function d(k){return function(){this._previous.apply(this,arguments);k.apply(this,arguments)}}b.extend=function(){var l,m,k=this;f=true;l=new k();f=false;m=function(){if(!f&&this[j]){this[j].apply(this,arguments)}};l.constructor=m;e.extend(m,{prototype:l,parent:k,extend:b.extend,singleton:b.singleton,implement:b.implement});m.implement.apply(m,arguments);return m};b.implement=function(){var o,n,m,k,t,r,s,u=this,q=u.prototype||u;for(o=0,n=arguments.length;o<n;o+=1){m=arguments[o];t=e.typeOf(m);if(t==="class"||t==="function"){if(t==="function"){m.prototype[j]=d(m)}m=m.prototype}else{if(m.init){m[j]=m.init;delete m.init}}var p;if(m.name){p=m.name}else{if(q.name){if(e.owns(q,"name")){p=q.name}else{p="("+q.name+" inheritor)"}}else{p="(anonymous class)"}}for(k in m){if(k==="constructor"){continue}r=m[k];if(e.is(r,"function")){s=(t==="class"?arguments[o]:u).parent;r.displayName=p+"#"+(k===j?"init":k);q[k]=i(s&&s.prototype&&s.prototype[k],e.owns(q,k)&&q[k],r,t==="class")}else{if(e.is(r,"plain")){if(!e.owns(q,k)){q[k]=e.is(q[k],"plain")?e.clone(q[k]):{}}e.extend(q[k],r,true)}else{q[k]=r}}}}return u};b.singleton=function(){var q,l,m=this.extend.apply(this,arguments),n=m.prototype,p=false,o=[];function k(r){l[r]=function(){if(!p){if(l.uninitializedCalls==="throw"){throw new Error("Singleton called before being initialized")}else{if(l.uninitializedCalls==="ignore"){return}}l.init()}return l[r].apply(this,arguments)}}f=true;l=new m();f=false;for(q in n){if(typeof n[q]==="function"&&q!=="init"&&q!=="constructor"){o.push(q);k(q)}}l.init=function(){if(p){throw new Error("Singleton is already initialized")}p=true;var s,r;for(s=0,r=o.length;s<r;s++){delete l[o[s]]}m.apply(this,arguments);return this};return l};return e.namespace("Class",b,e)});