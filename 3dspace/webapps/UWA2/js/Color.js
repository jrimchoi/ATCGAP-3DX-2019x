define("UWA/Color",["UWA/Core","UWA/Class"],function(d,a){function f(j){if(j.charAt(0)==="#"){j=j.substring(1)}if(j.length===3){j=j[0]+j[0]+j[1]+j[1]+j[2]+j[2]}return{r:parseInt(j.substr(0,2),16),g:parseInt(j.substr(2,2),16),b:parseInt(j.substr(4,2),16)}}function c(l){l=d.clone(l);l.r/=255;l.g/=255;l.b/=255;var k={};var m=Math.min(l.r,l.g,l.b);var j=Math.max(l.r,l.g,l.b);var o=j-m;var n=(j+m)/2;k.l=n;if(j===m){k.h=0;k.s=0}else{k.h=n;k.s=n;k.s=k.l>0.5?o/(2-j-m):o/(j+m);if(j===l.r){k.h=(l.g-l.b)/o+(l.g<l.b?6:0)}else{if(j===l.g){k.h=(l.b-l.r)/o+2}else{if(j===l.b){k.h=(l.r-l.g)/o+4}}}k.h/=6}k.h=Math.round(k.h*360);k.s=Math.round(k.s*100);k.l=Math.round(k.l*100);return k}function e(n){var l={};var p=(1-Math.abs(n.l/50-1))*n.s/100,k=p*(1-Math.abs((n.h/60)%2-1)),o=Math.floor(n.h/60),j=n.l/100-p/2;switch(o){case 0:l.r=p;l.g=k;l.b=0;break;case 1:l.r=k;l.g=p;l.b=0;break;case 2:l.r=0;l.g=p;l.b=k;break;case 3:l.r=0;l.g=k;l.b=p;break;case 4:l.r=k;l.g=0;l.b=p;break;case 5:case 6:l.r=p;l.g=0;l.b=k;break}l.r=Math.round((l.r+j)*255);l.g=Math.round((l.g+j)*255);l.b=Math.round((l.b+j)*255);return l}function g(j,l){j=d.clone(j);var m=j.alpha;if(m>=1){return j}var k=["r","g","b"];k.forEach(function(n){j[n]=j[n]*m+l[n]*l.alpha*(1-m)});j.alpha=Math.round(m+l.alpha*(1-m));return j}function h(j){var k=[j.r,j.g,j.b,j.alpha].map(function(l){l/=255;return l<0.03928?l/12.92:Math.pow((l+0.055)/1.055,2.4)});return 0.2126*k[0]+0.7152*k[1]+0.0722*k[2]}function i(s,k){if(k.alpha>=1){if(s.alpha<1){s=g(s,k)}var j=h(k)+0.05;var u=h(s)+0.05;var q=j/u;if(u>j){q=1/q}return{ratio:Math.round(q),min:q,max:q}}var p={r:255,g:255,b:255,alpha:1};var l={r:0,g:0,b:0,alpha:1};var v=g(k,l);var o=g(k,p);var n=i(s,l).ratio;var r=i(s,p).ratio;var t=Math.max(n,r);var m=1;if(v.luminance>s.luminance){m=n}else{if(o.luminance<s.luminance){m=r}}return{ratio:Math.round((m+t)/2,2),min:m,max:t}}var b=a.extend({_color:null,init:function(j){this._color=d.clone(j)},toHexString:function(){var j=[this._color.r,this._color.g,this._color.b];var k=j.map(function(l){l=parseInt(l,10);l=l.toString(16);return l.length===1?"0"+l:l});return"#"+k.join("")},toRGBString:function(){var j=this._color;var k=j.alpha<1;return"rgb"+(k?"a":"")+"("+j.r+", "+j.g+", "+j.b+(k?(", "+j.alpha):"")+")"},toHSLString:function(){var j=this._color;var k=j.alpha<1;return"hsl"+(k?"a":"")+"("+j.h+", "+j.s+"%, "+j.l+(k?("%, "+j.alpha):"%")+")"},toObject:function(){return d.clone(this._color)},cloneWith:function(k){var j=Object.assign(this.toObject(),k);if(d.owns(k,"h")||d.owns(k,"s")||d.owns(k,"l")){return b.fromHSL(j.h,j.s,j.l,j.alpha)}if(d.owns(k,"r")||d.owns(k,"g")||d.owns(k,"b")){return b.fromRGB(j.r,j.g,j.b,j.alpha)}return new b(j)}});b.fromRGB=function(n,m,j,k){var l={r:parseInt(n,10),g:parseInt(m,10),b:parseInt(j,10),alpha:(k===undefined)?1:parseFloat(k,10)};Object.assign(l,c(l));return new b(l)};b.fromHSL=function(o,n,k,j){var m={h:parseInt(o,10),s:parseFloat(n,10),l:parseFloat(k,10),alpha:(j===undefined)?1:parseFloat(j,10)};Object.assign(m,e(m));return new b(m)};b.parse=function(j){if(j==="transparent"){j="rgba(0, 0, 0, 0)"}var o={};var r=/^(#?)((?:[A-Fa-f0-9]{3}){1,2})$/m;var n=/^(rgb|hsl)(a?)[(]\s*([\d.]+\s*%?)\s*,\s*([\d.]+\s*%?)\s*,\s*([\d.]+\s*%?)\s*(?:,\s*([\d.]+)\s*)?[)]$/m;var k=j.test(r);var q=j.match(n);if(k){o=f(j);o.alpha=1;Object.assign(o,c(o));return new b(o)}if(q&&q.length>0){q.shift();var m;var p=q[0];var l=q[5]?parseFloat(q[5],10):1;if(p==="rgb"){m=b.fromRGB}else{if(p==="hsl"){m=b.fromHSL}}return m(q[2],q[3],q[4],l)}};b.checkContrast=function(m,k){var l=i(m.toObject(),k.toObject());var j;if(l.max>=0&&l.min<3){j="fail"}else{if(l.max>=3&&l.min<4.5){j="aa-large"}else{if(l.max>=4.5&&l.min<7){j="aa"}else{if(l.max>=7&&l.min<22){j="aaa"}}}}return{ratio:l.ratio,status:j}};b.__test__={hexToRgb:f,rgbToHsl:c,hslToRgb:e,layerColors:g,getLuminance:h,getContrast:i};return d.namespace("Color",b,d)});