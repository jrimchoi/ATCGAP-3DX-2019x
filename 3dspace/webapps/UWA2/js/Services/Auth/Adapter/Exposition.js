define("UWA/Services/Auth/Adapter/Exposition",["UWA/Core","UWA/Utils","UWA/Json","UWA/Services/Auth/Adapter/Abstract","UWA/Controls/Popup"],function(f,c,a,e,b){var d=e.extend({defaultOptions:{},hasIdentity:function(i,g){function h(j){if(j){i()}else{g("No identity found.")}}this.request("hasidentity",h,g)},getIdentity:function(h,g){this.request("getidentity",h,g)},clearIdentity:function(g){this.request("clearidentity",g,g)},authenticate:function(j,g){var h=this;function i(k){if(k.type==="redirect"){new b({url:k.url,events:{onClose:function(){h.hasIdentity(j,g)},onBlocked:function(){if(f.is(g)){g("Unable to open popup due popup blocker.")}}}}).open()}}this.request("authenticate",i,g)},toQueryString:function(){var g=this.options;return f.Utils.toQueryString(f.merge({auth:g.provider},g.data))},getActionUrl:function(j){var h=this.options,i=f.clone(h.data||{}),g=f.hosts.exposition+"/services/auth/"+j+"/"+h.provider;g+=(g.indexOf("?")>-1?"&":"?")+c.toQueryString(i);return g},request:function(i,k,g){var h=this.getActionUrl(i);function j(l){if(f.is(l[i])){k(l[i])}else{g("Invalid Auth response.")}}a.request(h,{cache:-1,onFailure:g,onComplete:j})}});return f.namespace("Services/Auth/Adapter/Exposition",d,f)});