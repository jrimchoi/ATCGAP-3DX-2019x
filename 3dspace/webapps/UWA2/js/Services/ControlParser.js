define("UWA/Services/ControlParser",["UWA/Core","UWA/Element"],function(e,b){var i=Object.create(null),k;function j(n){var m=n.parentNode,l=n.nextSibling;if(m){m.removeChild(n)}return function(o){if(!o){o=n}if(o.inject){o.inject(l||m,l&&"before")}else{m.insertBefore(o,l)}}}function c(n,m){var l=n.getAttribute(m)||n.getAttribute("data-"+m);n.removeAttribute(m);n.removeAttribute("data-"+m);return l}function h(l,m){if(!m){m=l.prototype.name}i[m]=l}function g(o,n){o=o.split(" ");var m=o[0],l=o[1]?o[1].split("."):[];(window.require||window.curl)([m],function(p){l.forEach(function(q){p=p[q]});n(null,p)})}function a(l,m){var n=i[l];if(!e.owns(i,l)){m("Control "+l+" not found")}else{if(e.is(n,"string")){g(n,m)}else{m(null,n)}}}function f(n,l,m){a(l,function(q,o){var s,r=j(n);if(!q){if(e.is(o,"class")){var p={element:n};if(n.className){p.className=n.className;n.className=""}s=new o(p)}else{if(e.is(o,"function")){s=o(n)}}if(s){r(s)}else{q="Can't build the control "+l}}m(q,s)})}function d(s,p){if(!p){p={}}var r=b.getElements.call(s,"[uwa-control],[data-uwa-control]"),q=r.length,m={},o;function n(u,t){if(u.indexOf("[]",u.length-2)>-1){u=u.slice(0,-2);if(!m[u]){m[u]=[]}m[u].push(t)}else{m[u]=t}}function l(u,t,v,w){q--;if(v){o=v;if(p.onError){p.onError(v)}}else{n(t,w)}if(q===0){if(p.onComplete){p.onComplete(m,o)}if(!o&&p.onSuccess){p.onSuccess(m)}}}r.forEach(function(u,t){f(u,c(u,"uwa-control"),l.bind(null,t,c(u,"uwa-name")||"lostAndFound[]"))})}h("UWA/Controls/Tag","uwa-tag");h("UWA/Controls/Input Text","uwa-text");h("UWA/Controls/Input Button","uwa-button");h("UWA/Controls/Input File","uwa-file");h("UWA/Controls/Input Select","uwa-select");h("UWA/Controls/Input Checkbox","uwa-checkbox");h("UWA/Controls/Input Radio","uwa-radio");h("UWA/Controls/ColorPicker","uwa-colorpicker");h("UWA/Controls/DatePicker","uwa-datepicker");k={register:h,parse:d,_tests:{getControl:a}};return e.namespace("Services/ControlParser",k,e)});