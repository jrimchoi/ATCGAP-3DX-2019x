define("DS/UIKIT/UIKIT",[],function(){});define("DS/UIKIT/Toggler",["UWA/Core","UWA/Controls/Abstract"],function(c,d){function b(f,e){var g=f.matchesSelector||f.mozMatchesSelector||f.msMatchesSelector||f.oMatchesSelector||f.webkitMatchesSelector;return g.call(f,e)}var a=d.extend({defaultOptions:{activeClass:"active",ignored:["disabled"],selected:0,type:"radio"},init:function(){var e=!arguments[0].nodeType?arguments[0]:{};if(!e.container&&arguments[0].nodeType===1){e.container=arguments[0]}if(e.ignored&&e.ignored.indexOf("disabled")===-1){e.ignored.push("disabled")}if(e.bind&&e.bind.nodeType!==1){delete e.bind}this._parent(e);this.elements.container=this.options.container;delete this.options.container;delete e.container;this.handleEvents();this.options.type==="radio"&&this.toggle(this.options.selected)},handleEvents:function(){var f=this,g,e;this.events={};this.events.container={click:function(h){if(h.target.parentElement!==f.elements.container){e=true;g=h.target;while((g=g.parentElement)&&e){if(g.parentElement===f.elements.container){e=false;f.toggle(g)}}}else{f.toggle(h.target)}}};this.elements.container.addEventListener("click",this.events.container.click,false)},toggle:(function(){function e(h,f,g){if(this.options.type==="radio"){Array.prototype.forEach.call(h,function(i){i.classList[i===f?"add":"remove"](this.options.activeClass)},this)}else{if(g){f.classList.add(this.options.activeClass)}else{if(g===false){f.classList.remove(this.options.activeClass)}else{f.classList.toggle(this.options.activeClass)}}}}return function(){var i=this.elements.container.children,g=typeof arguments[0]==="number"?i[arguments[0]]:arguments[0],h=arguments[1],l,f,k,j;if(g.nodeType!==1){return}if(g.classList.contains(this.options.activeClass)&&this.options.type==="radio"){return}l=this.options.ignored.some(function(m){return g.classList.contains(m)||b(g,m)});if(l){return}f=Array.prototype.indexOf.call(i,g);e.call(this,i,g,h);this.activeElements=Array.prototype.filter.call(i,function(m){return m.classList.contains(this.options.activeClass)},this);if(this.options.bind){k=this.options.bind.children;j=k[f];if(j&&j.nodeType===1){e.call(this,k,j,h)}}this.dispatchEvent("onToggle",[g,f,g.classList.contains(this.options.activeClass)])}}()),getActiveElements:function(){return this.options.type==="radio"?this.activeElements[0]:this.activeElements},destroy:function(){this.elements.container.removeEventListener("click",this.events.container.click,false);if(this.activeElements instanceof Array){this.activeElements.length=0}else{delete this.activeElements}delete this.elements.container}});return a});define("DS/UIKIT/Dropdown",["UWA/Core","UWA/Element","UWA/Event","UWA/Utils/Scroll","UWA/Controls/Abstract"],function(c,a,i,f,e){function d(n,m,l,k){if(m.addEventListener){m.addEventListener(n,l,k)}else{if(m.attachEvent){m.attachEvent("on"+n,l,k)}}}function b(l,m,k){Object.keys(l).forEach(function(n){d(n,m,l[n],k)})}function g(n,m,l,k){if(m.removeEventListener){m.removeEventListener(n,l,k)}else{if(m.detachEvent){m.detachEvent("on"+n,l,k)}}}function j(l,m,k){Object.keys(l).forEach(function(n){g(n,m,l[n],k)})}var h={name:"dropdown",defaultOptions:{className:"",bound:true,position:"bottom left",closeOnClick:true,removeOnHide:true,contextual:false,offset:{x:0,y:0},attributes:{}},isVisible:false,enabled:true,init:function(k){this._parent(k);k=this.options;this.events={};this.events.document={click:function(l){var m=i.getElement(l);if(!m.isInjected(this.elements.container)&&m!==this.elements.container&&!this.isClickInSibling(m)){if(this.options.contextual||!this.options.target.contains(m)){this.hide();this.dispatchEvent("onClickOutside",[l])}}}.bind(this)};k.target=c.is(k.target,"element")?c.extendElement(k.target):k.contextual?c.extendElement(document):null;k.bound=(k.target&&k.bound)||k.contextual;k.closeOnClick=k.contextual?true:k.closeOnClick;k.removeOnHide=k.contextual?true:k.removeOnHide;this.buildSkeleton()},getBody:function(){return this.elements.container},setBody:function(k){this.elements.container&&this.elements.container.addContent(k);return this},buildSkeleton:function(){var l=this.elements,k=this.options;if(l.container){return}l.container=c.createElement("div",{"class":this.name+" "+k.className,html:k.body});Object.keys(this.options.attributes).forEach(function(m){l.container.setAttribute(m,k.attributes[m])});this.handleEvents()},handleEvents:function(){var l=this.elements,k=this.options;l.container.addEvents({click:this.dispatchEvent.bind(this,"onClick"),mouseleave:this.dispatchEvent.bind(this,"onMouseLeave")});if(k.contextual){this.events.target={mousedown:function(m){var o=i.getElement(m),n=c.Event.whichButton(m)===2;if(!o.isInjected(this.elements.container)&&o!==this.elements.container&&!this.isClickInSibling(o)&&n&&this.isVisible){this.updatePosition(m)}}.bind(this),contextmenu:function(m){this.show(false,m);i.stop(m)}.bind(this)};b(this.events.target,k.target,true)}else{if(k.bound){this.events.target={click:this.toggle.bind(this)};b(this.events.target,k.target,true)}}},onClick:function(){var k=arguments.length>2&&!!arguments[2];!k&&this.options.closeOnClick&&this.hide()},getDisplayContext:function(){var m={},n=this.options,l=document.documentElement;m.viewportWidth=l.clientWidth||window.innerWidth;m.viewportHeight=l.clientHeight||window.innerHeight;m.scrollTop=window.pageYOffset||document.body.scrollTop||l.scrollTop;if(n.renderTo&&n.renderTo!==document.body){var o=f.getClosestScrollable(n.target,"y");if(o){var k=o.getBoundingClientRect();m.scrollTop=o.scrollTop;m.viewportWidth=k.width;m.viewportHeight=k.height}}return m},setDropDirection:function(p,l,o,k){var n=this.options,m=this.elements.container;if(p+l>k.viewportHeight+k.scrollTop||(n.position.indexOf("top")>-1&&p-l-o.offsetHeight>0)){if(p-l-o.offsetHeight>0||n.position.indexOf("top")>-1){m.addClassName("dropup");p=p-l-o.offsetHeight}}else{m.removeClassName("dropup")}return p},updatePosition:function(l,p){var r=this;var v=r.options,k=r.elements,s=v.target,q=r._position,m,u,o,t;function n(w){return c.is(w,"function")?w():w}if(!r.isVisible){return}if(s&&!v.altPosition){if(!p){q=r.getDisplayContext();if(v.renderTo){q.offsets=s.getPosition(v.renderTo)}else{if(v.contextual&&l){q.offsets={x:l.pageX,y:l.pageY}}else{q.offsets=s.getOffsets()}}if(v.contextual){s={offsetWidth:0,offsetHeight:0}}else{q.offsets.y+=s.offsetHeight}q.initialOffsets=q.offsets}o=q.initialOffsets.x;t=q.initialOffsets.y;m=k.container.offsetWidth;u=k.container.offsetHeight;if(v.position.indexOf("center")>-1&&o-m+s.offsetWidth>0){o=o+(s.offsetWidth-m)/2}if(o+m>q.viewportWidth||(v.position.indexOf("right")>-1&&o-m+s.offsetWidth>0)){o=o-m+s.offsetWidth}if(o<0){o=0}t=r.setDropDirection(t,u,s,q);q.offsets={x:o+v.offset.x,y:t+v.offset.y};r._position=q;k.container.setStyles({left:q.offsets.x,top:q.offsets.y})}else{if(v.altPosition){q=n(v.altPosition);q.offsets={x:q.x+v.offset.x,y:q.y+v.offset.y};r._position=q;k.container.setStyles({left:q.offsets.x,top:q.offsets.y})}}},toggle:function(){return this[this.isVisible?"hide":"show"]()},show:function(k,m){var n=this.elements,l=this.options;if(!n.container||this.isVisible||!this.enabled){return this}this.isVisible=true;if(!n.container.isInjected()){var o=l.renderTo?l.renderTo:document.body;this.inject(o);if(n&&Object.keys(n).length>1){Object.keys(n).forEach(function(q){var p=n[q];if(q!=="container"&&!p.isInjected()){p.inject(o)}})}}n.container.setStyle("display","");if(this.hasEvent("onClickOutside")||l.bound){d("click",document,this.events.document.click,true)}this.updatePosition(m);!k&&this.dispatchEvent("onShow");return this},hide:function(k){var n=this.elements,l=this.options;if(!n.container||!this.isVisible||!this.enabled){return}this.isVisible=false;if(n.container.isInjected()){if(l.removeOnHide){n.container.remove();var m=Object.keys(n);if(m.length>1){m.forEach(function(p){var o=n[p];if(p!=="container"){o.remove()}})}}g("click",document,this.events.document.click,true)}n.container.setStyle("display","none");!k&&this.dispatchEvent("onHide");return this},enable:function(){if(!this.enabled){this.enabled=true}return this},disable:function(){if(this.enabled){this.hide();this.enabled=false}return this},destroy:function(){this.hide(true);this.options.bound&&j(this.events.target,this.options.target,true);this._parent()},isClickInSibling:function(m){var k=this.elements,l=false;if(k&&Object.keys(k).length>1){Object.keys(k).forEach(function(o){var n=k[o];if(o!=="container"){l=l||n.contains(m)}})}return l}};return e.extend(h)});define("DS/UIKIT/Spinner",["UWA/Core","UWA/Element","UWA/Event","UWA/Utils/Client","UWA/Controls/Abstract"],function(g,c,b,e,f){function a(m){var k,h,j;if(m){m=m.split(" ");for(k=0,h=m.length;k<h;k++){j=m[k].match(/(spinner-)?(small|large)$/);if(j&&!j[1]){if(j[0]==="small"){m[k]="spinner-sm"}else{if(j[0]==="large"){m[k]="spinner-lg"}}}}m=m.join(" ")}return m}var d={name:"spinner",defaultOptions:{className:"",hwaccel:true,visible:false,spin:true,animate:true},isVisible:false,init:function(h){h=h||{};this._parent(h);this.buildSkeleton();if(g.is(h.renderTo,"element")){this.inject(h.renderTo);delete this.options.renderTo}},onPostInject:function(){if(this.options.visible||this.isVisible){this.isVisible=false;this.show()}},buildSkeleton:function(){var h=this.options;this.elements.container=g.createElement("div",{"class":this.name+" "+a(h.className),html:[g.createElement("span",{"class":"spinner-bar"}),g.createElement("span",{"class":"spinner-bar spinner-bar1"}),g.createElement("span",{"class":"spinner-bar spinner-bar2"}),g.createElement("span",{"class":"spinner-bar spinner-bar3"})]});if(h.spin){this.spin()}if(h.animate){this.elements.container.addClassName("fade")}if(h.duration){h.visible=true}if(h.hwaccel){this.elements.container.setStyle("transform","translate3d(0,0,0)")}this.elements.container.setStyles({top:h.top,left:h.left})},spin:function(){var h=this.elements;if(!h.container.hasClassName("spinning")){h.container.addClassName("spinning");this.dispatchEvent("onSpin")}return this},stop:function(){var h=this.elements;if(h.container.hasClassName("spinning")){h.container.removeClassName("spinning");this.dispatchEvent("onSpinStop")}return this},toggle:function(){return this[this.isVisible?"hide":"show"]()},show:function(){var i=this,h=this.options,j=this.elements;if(!j){return}if(!this.isVisible){if(h.duration){this.timer=setTimeout(function(){i.stop();i.hide()},h.duration)}this.isVisible=true;j.container.setStyle("display","inline-block");if(h.animate){setTimeout(function(){if(i.elements&&i.isVisible){i.elements.container.addClassName("in");i.dispatchEvent("onShow")}},50)}else{i.dispatchEvent("onShow")}}return this},hide:function(){var j=this,i=this.options,k=this.elements;function h(){if(!j.isVisible){k&&k.container&&k.container.setStyle("display","");j.dispatchEvent("onHide")}if(j.timer){j.destroy()}}if(!k){return}if(this.isVisible){this.isVisible=false;if(i.animate){if(this.timer){clearTimeout(this.timer)}k.container.removeClassName("in");setTimeout(function(){h()},300)}else{h()}}return this},destroy:function(){if(this.options){this.options.animate=false}this.hide();this._parent();this.elements=null}};return f.extend(d)});define("DS/UIKIT/Image",["UWA/Core","UWA/Class","UWA/Class/Options","UWA/Class/Events"],function(f,d,c,b){function a(k){var j,g,h;if(!k){return}k=k.split(" ");for(j=0,g=k.length;j<g;j++){h=k[j].match(/(img-)?(rounded|circle|thumbnail|responsive)$/);if(h&&!h[1]){k[j]="img-"+k[j]}}return k.join(" ")}var e={defaultOptions:{className:"img",url:null,width:"100%",height:"100%"},init:function(g){this.setOptions(g);this.images=[];this.imageLoaded=0},load:function(){var j=this,i=this.options,g=a(i.className);function h(k){return function(){this.removeEvent("error");this.removeEvent("load");j.dispatchEvent(k,this);if(!--j.imageLoaded){j.handleCompletion()}}}[].slice.call(arguments).forEach(function(l){if(f.is(l,"string")){var k=f.createElement("img",{width:i.width,height:i.height,alt:l,"class":g});j.images.push(k);j.imageLoaded++}});this.images.forEach(function(k){k.src=k.alt;k.addEvents({error:h("onError"),load:h("onLoad")})})},handleCompletion:function(){this.dispatchEvent("onComplete",[this.images]);this.images=[];this.imageLoaded=0}};return d.extend(c,b,e)});define("DS/UIKIT/Input",["UWA/Core","UWA/Element","UWA/Event","UWA/Utils/Client","UWA/Controls/Abstract"],function(f,b,a,d,e){d.Features.inputPlaceholder=("placeholder" in document.createElement("input"));var c={defaultOptions:{className:"",attributes:{},value:"",name:"",disabled:false,commonClassName:"form-control"},nativeInput:true,init:function(g){if(this.constructor===c){throw new Error("Use a subclass of Input")}this._parent(g);this.events=null;this.getContent();if(f.owns(g,"name")){this.setName(g.name)}if(f.owns(g,"value")){this.setValue(g.value)}if(this.elements.container&&d.Platform.ios){this.elements.container.classList.add("prevent-ios-zoom-in")}},getContent:function(){if(!this.elements.container){this.buildSkeleton();this.syncInput()}return this.elements.container},buildSkeleton:function(){var h=this.elements,g=this.options;h.input=this.buildInput().set(g.attributes);if(g.id){h.input.id=g.id}if(!this.nativeInput){h.content=f.createElement("div",{"class":this.getClassNames("-content")});h.input.addClassName("hidden-input");h.container=f.createElement("div",{html:[h.input,h.content]})}else{h.content=h.container=h.input}h.container.addClassName(this.getClassNames());this.setDisabled(g.disabled)},buildInput:function(){return f.createElement("input",{type:"text"})},syncInput:function(){if(!this.nativeInput&&this.elements.content){this.elements.content.setText(this.getValue())}},handleEvents:function(){var h=this,i=this.elements;function g(j){return h.dispatchEvent.bind(h,j)}if(!this.events){this.events={container:{click:g("onClick"),mousedown:g("onMouseDown")},input:{change:g("onChange"),keydown:g("onKeyDown"),focus:this.setFocus.bind(this,true),blur:this.setFocus.bind(this,false)}};if(d.Engine.firefox){this.events.input.compositionend=function(j){this.dispatchEvent("onChange",[j])}.bind(this)}}if(this.isDisabled()){i.container.removeEvents(this.events.container);i.input.removeEvents(this.events.input)}else{i.container.addEvents(this.events.container);i.input.addEvents(this.events.input)}},setFocus:function(g){var h=this.elements;if(!this.nativeInput&&f.Utils.Client.Features.touchEvents){return this}if(typeof g==="undefined"){g=true}if(!this.nativeInput){h.container.toggleClassName("focus",g)}h.input[g?"focus":"blur"]();return this},focus:function(){return this.setFocus(true)},blur:function(){return this.setFocus(false)},setDisabled:function(g){var h=this.elements;if(typeof g==="undefined"){g=true}h.input.disabled=g;h.container.toggleClassName("disabled",g);this.handleEvents();return this},isDisabled:function(){return !!this.elements.input.disabled},enable:function(){return this.setDisabled(false)},disable:function(){return this.setDisabled()},setName:function(g){if(f.is(g,"string")){this.elements.input.name=g}return this},getName:function(){return this.elements.input.name},setId:function(g){if(f.is(g,"string")){this.elements.input.id=g}return this},getId:function(){return this.elements.input.id},setValue:function(i){var h=this.elements.input,g=h.getTagName();if(g==="input"||g==="textarea"){h.value=i}else{h.setText(i)}this.syncInput();return this},getValue:function(){var h=this.elements.input,g=h.getTagName();return g==="input"||g==="textarea"?h.value:h.getText()},onMouseDown:function(g){if(!this.nativeInput&&!this.isDisabled()){a.preventDefault(g);this.focus()}},onChange:function(g){this.syncInput();this.bubbleOnChange(g)},dispatchOnChange:function(){a.dispatchEvent(this.elements.input,"change")},bubbleOnChange:(function(){var h;function g(){if(h===undefined){h=false;var i=document.createElement("div"),j=document.createElement("input");j.type="text";i.appendChild(j);i.style.display="none";document.body.appendChild(i);b.addEvent.call(i,"change",function(k){h=true;a.stop(k)});a.dispatchEvent(j,"change");b.remove.call(i);b.removeEvents.call(i)}return h}return function(k){var j,i=this.elements.input.parentNode;if(!g()){while(i&&i.nodeType===1&&(k.event||k).returnValue!==false){j=i._events&&i._events.change;if(j){j.handleEvent(k)}i=i.parentNode}}}}())};return e.extend(c)});define("DS/UIKIT/Badge",["UWA/Core","UWA/Controls/Abstract","UWA/Event"],function(f,e){function a(k){var j,g,h;if(!k){return}k=k.split(" ");for(j=0,g=k.length;j<g;j++){h=k[j].match(/default|primary|info|warning|error|success$/);if(h&&!h[1]){k[j]="badge-"+k[j]}}return k.join(" ")}function b(j,i,h,g){if(i.addEventListener){i.addEventListener(j,h,g)}else{if(i.attachEvent){i.attachEvent("on"+j,h,g)}}}function d(i,h,g){if(h.removeEventListener){h.removeEventListener(i,g,false)}else{if(h.detachEvent){h.detachEvent("on"+i,g)}}}var c={name:"badge",defaultOptions:{className:"badge-default",closable:false,selectable:false,disabled:false},init:function(g){g=g||{};if(g.className){g.className=a(g.className)}this._parent(g);this.buildSkeleton()},buildSkeleton:function(){var h=this.elements,g=this.options;if(h.container){return}h.container=f.createElement("span",{"class":this.getClassNames()});if(g.id){h.container.id=g.id}if(g.name){h.container.name=g.name}this.setSelectable(g.selectable);this.setClosable(g.closable);h.content=f.createElement("span",{"class":this.name+"-content"}).inject(h.container);h.content.setText(g.content);h.cross=f.createElement("span",{"class":"fonticon fonticon-cancel"}).inject(h.container);g.icon&&this.setIcon(this.options.icon);this.setDisabled(g.disabled)},setIcon:function(h){var j=this.elements;h=h.split(" ");for(var g=0,i=h.length;g<i;g++){if(!h[g].match("fonticon-")){h[g]="fonticon-"+h[g]}}h=h.join(" ");if(!j.icon){j.icon=f.createElement("span",{"class":"fonticon "+h+" "+this.name+"-icon"}).inject(j.container,"top")}else{j.icon.className="fonticon "+h+" "+this.name+"-icon"}return this},removeIcon:function(){if(this.elements.icon){this.elements.icon.destroy()}return this},select:function(g){if(this.isDisabled()){return}if(!f.is(g)){g=true}if(g){this.elements.container.addClassName(this.name+"-selected")}else{this.elements.container.removeClassName(this.name+"-selected")}},isSelected:function(){return this.elements.container.hasClassName(this.name+"-selected")},setClassName:function(g){this.options.className=a(g);this.getContent().className=this.getClassNames();return this},setSelectable:function(g){if(typeof g==="undefined"){g=false}this.options.selectable=g;this.elements.container.toggleClassName(this.name+"-selectable",g);return this},setClosable:function(g){if(typeof g==="undefined"){g=false}this.options.closable=g;this.elements.container.toggleClassName(this.name+"-closable",g);return this},handleEvents:function(){var i=this.elements,g=this.options,h=this;if(!this.events){this.events={};this.events.container={click:function(j){var k=f.Event.getElement(j);if(!/fonticon-cancel/.test(k.className)){g.selectable&&!h.isDisabled()&&i.container.addClassName(h.name+"-selected");h.dispatchEvent("onClick",[j,h])}}};this.events.cross={click:function(j){g.closable&&h.dispatchEvent("onClose",[j,h])}};this.events.document={click:function(j){if(!f.Event.getElement(j).isInjected(h.elements.container)){g.selectable&&!h.isDisabled()&&i.container.removeClassName(h.name+"-selected");h.dispatchEvent("onClickOutside",[j,h])}}}}if(this.isDisabled()){i.container.removeEvents(this.events.container);i.cross.removeEvents(this.events.cross);d("click",document,this.events.document.click)}else{i.container.addEvents(this.events.container);i.cross.addEvents(this.events.cross);b("click",document,this.events.document.click,true)}},destroy:function(){this.options.selectable&&d("click",document,this.events.document.click,true);this._parent()},enable:function(){return this.setDisabled(false)},disable:function(){return this.setDisabled()},setDisabled:function(g){var h=this.elements;if(typeof g==="undefined"){g=true}h.container.disabled=g;h.container.toggleClassName("disabled",g);this.handleEvents();return this},isDisabled:function(){return this.elements.container.disabled}};return e.extend(c)});define("DS/UIKIT/Scroller",["UWA/Core","UWA/Utils","UWA/Utils/Client","UWA/Controls/Abstract","UWA/Controls/Drag","UWA/Class/Timed"],function(e,h,c,f,i,g){function d(p){if(p.event){p=p.event}var n=p.changedTouches||p.touches||[p];var k={x:0,y:0};var m=n.length;var o;for(o=0;o<m;o++){k.x+=n[o].clientX/m;k.y+=n[o].clientY/m}return k}var j={delta:0,coef:1,active:false,visible:false,scrollSize:0,scrollPosition:0,offsetSize:0};var a=i.extend({defaultOptions:{snap:0,delay:0},init:function(k,l){this._parent(l);this.scroller=k;this.direction=this.element.className.contains("scrollbar-y")?"y":"x";this.infos=k._infos[this.direction]},_getPosition:function(){var k=this.element.getBoundingClientRect()[this.direction==="y"?"top":"left"];return d(this.currentEvent)[this.direction]-k},start:function(k){this._parent(k);this.infos.active=true;this.scroller.update();this.position=this._getPosition()},move:function(k,l){this._parent(k,l);this.infos.delta=(this._getPosition()-this.position)*this.infos.coef;this.infos.active=true;this.scroller.updateVisible()},stop:function(){this._parent();this.scroller.updateActive(this.currentEvent)}});var b=f.extend(g,{name:"scroller",options:{element:null,scrollbars:"auto",scrollbarsMargin:10,scrollbarsMinSize:50},init:function(k){if(e.is(k)&&e.is(k.element)){e.extendElement(k.element)}this._parent(k);this._elementEvents={mousemove:this.updateActive.bind(this),mouseout:this.updateActive.bind(this)};this.build();this.initInfos()},initInfos:function(){this._infos={x:Object.create(j),y:Object.create(j)};this.setPeriodical("update",this.update,1000);this.updateShift();this.update()},destroy:function(){if(this.options.element){var k=this.elements.container;k.removeEvents(this._elementEvents).removeClassName(this.getClassNames()).setContent(this.elements.content.childNodes);var l=k.destroy;k.destroy=function(){};this._parent();k.destroy=l}else{this._parent()}},onPostInjected:function(){this.initInfos()},build:function(){var k=this.options.element||e.createElement("div");k.addClassName(this.getClassNames()).addEvents(this._elementEvents);var m=this.options.scrollbars==="native"?"native-scrollbars ":"no-native-scrollbars ";var l=e.createElement("div",{"class":m+this.getClassNames("-content"),events:{scroll:this.updateVisible.bind(this)},html:[].slice.call(k.childNodes)}).inject(k);this.setDelayed("hide-overflow",function(){k.setStyle("overflow","hidden")},0);this.elements.container=k;this.elements.content=l},getInnerElement:function(){return this.elements.content},getScrollbar:function(k,l){var m=this.elements[k+"Scrollbar"];if(!m&&l){m=this.elements[k+"Scrollbar"]=e.createElement("div",{"class":this.getClassNames("-scrollbar","-scrollbar-"+k)}).inject(this.elements.container);new a(this,{element:m,root:this.elements.container});m.clientHeight}return m},scrollToElement:function(l,k,o){var n,m;if(!l.nodeType){l=this.elements.container.getElement(l)}if(!l){return}n=l.offsetLeft;m=l.offsetTop;if(k==="center"){m=m-(this.elements.content.getDimensions().height/2)+(l.getDimensions().height/2)}if(k==="bottom"){m=m-this.elements.content.getDimensions().height+l.getDimensions().height}this.scrollTo(n,m,o)},scrollTo:function(v,u,q){var r=this,o,w,p,n,l,k,m,s,t=100;if(isNaN(v)||isNaN(u)){return}if(q&&!isNaN(q)&&q>0){w=u>r.elements.content.scrollTop;o=v>r.elements.content.scrollLeft;k=(w)?(u-r.elements.content.scrollTop):(r.elements.content.scrollTop-u);l=(o)?(v-r.elements.content.scrollLeft):(r.elements.content.scrollLeft-v);p=Math.ceil(l/t);n=Math.ceil(k/t);s=(n>0)&&setInterval(function(){if(k>0){r.elements.content.scrollTop+=(w)?(n):(-n);k-=n}else{if(w){r.elements.content.scrollTop+=k}else{r.elements.content.scrollTop-=k}clearInterval(s)}},q/t);m=(p>0)&&setInterval(function(){if(l>0){r.elements.content.scrollLeft+=(o)?(p):(-p);l-=p}else{if(o){r.elements.content.scrollLeft+=l}else{r.elements.content.scrollLeft-=l}clearInterval(m)}},q/t)}else{this.elements.content.scrollLeft=v;this.elements.content.scrollTop=u}},updateActive:function(n){this.updateShift();if(this.options.scrollbars!=="virtual"){return}function l(q,p,r){return q<p&&p<r}if(n.type==="mouseout"||n.type==="touchend"){this._infos.x.active=this._infos.y.active=false}else{var m=this.elements.container.getBoundingClientRect();var o=12;var k=d(n);["x","y"].forEach(function(q,r){var p=m[r?"right":"bottom"];this._infos[q].active=l(p-o,k[r?"x":"y"],p)&&l(m[r?"top":"left"],k[q],m[r?"bottom":"right"])},this)}this.updateVisible()},updateVisible:function(){this._infos.x.visible=this._infos.y.visible=true;this.setDelayed("scrollbars-visible",function(){this._infos.x.visible=this._infos.y.visible=false;this.update()},1000);this.update()},updateShift:function(){var m=this.elements.content;if(this._shift===undefined&&m.isInjected()){var l=this.options.scrollbars;if(l==="auto"){if(c.Platform.ios){l="native";m.removeClassName("no-native-scrollbars").addClassName("native-scrollbars")}else{l="virtual"}this.options.scrollbars=l}if(l==="virtual"){var k=m.offsetWidth-m.clientWidth;if(k>0&&k<30){this._shift=k;m.setStyles({right:-this._shift,bottom:-this._shift})}else{if(c.Engine.firefox){this._shift=16;m.setStyles({right:-this._shift,bottom:-this._shift,"padding-right":this._shift,"padding-bottom":this._shift})}}}else{this._shift=0}}},_read:function(m){var l=this._infos[m?"y":"x"];var k=this.elements.content;l.scrollSize=k[m?"scrollHeight":"scrollWidth"];l.scrollPosition=k[m?"scrollTop":"scrollLeft"]+l.delta;l.offsetSize=k[m?"offsetHeight":"offsetWidth"]-(this._shift||0);if(l.scrollPosition<0){l.scrollPosition=0}else{if(l.scrollPosition>l.scrollSize-l.offsetSize){l.scrollPosition=l.scrollSize-l.offsetSize}}},_write:function(r){var n=r?"y":"x",p=this._infos[n],m=this.options;if(p.delta){this.elements.content[r?"scrollTop":"scrollLeft"]=p.scrollPosition;p.delta=0}if(this.options.scrollbars==="virtual"){var k=p.scrollSize>(p.offsetSize+(c.Engine.firefox?this._shift:0));var q=this.getScrollbar(n,k);if(k&&p.scrollSize){var l=p.offsetSize-2*m.scrollbarsMargin;var o=(l*(p.offsetSize/p.scrollSize));if(o<m.scrollbarsMinSize){o=m.scrollbarsMinSize}p.coef=(p.scrollSize-p.offsetSize)/(l-o);q.style[r?"top":"left"]=(m.scrollbarsMargin+p.scrollPosition/p.coef)+"px";q.style[r?"height":"width"]=o+"px";q.toggleClassName("active",p.active).toggleClassName("visible",p.visible)}else{if(q){q.removeClassName("active").removeClassName("visible")}}}},update:function(){this.setAnimate("update",function(){this.updateShift();this._read(false);this._read(true);if(!e.equals(this._previousInfos,this._infos)){this._write(false);this._write(true);this._previousInfos=e.clone(this._infos)}})}});return f.extend(b)});define("DS/UIKIT/Carousel",["UWA/Core","UWA/Element","UWA/Event","UWA/Utils","UWA/Controls/Abstract"],function(g,b,a,d,f){function c(h){return g.extendElement(g.createElement("div").setContent(h).firstChild)}var e={name:"carousel",defaultOptions:{className:"",autoPlay:true,infinite:true,dots:true,arrows:true,pauseOnHover:false,animation:"slide",slideSelector:"> div",slideSpeed:200,autoPlaySpeed:5000,slideToShow:1,slidesToScroll:1},current:null,slides:null,init:function(h){h=h||{};if(!g.is(h,"object")){h={slides:h}}this._parent(h);this.slides=[];this.buildSkeleton();if(g.is(h.renderTo,"element")){this.inject(g.extendElement(h.renderTo));delete this.options.renderTo}if(this.options.autoPlay){this.play()}},buildSkeleton:function(){var m=this,i=this.options,l=g.is(i.slides,"element"),n=this.elements,k,j;function h(o,p){a.preventDefault(p);if(m.autoplayTimer){m.pause();m.addEventOnce("onSlide",m.play.bind(m))}m.slide(o)}if(n.container){return}n.container=g.createElement("div",{"class":this.name+" "+i.className});if(l){n.content=g.extendElement(i.slides);k=this.getSlides()}else{n.content=g.createElement("div");if(g.is(i.slides,"array")){k=i.slides}}n.content.addClassName(this.name+"-slides");if(i.dots){n.dots=g.createElement("ol",{"class":this.name+"-indicators"}).inject(n.container);n.dots.addEvent("mousedown",function(p){var o,q=a.getElement(p);if(q.hasClassName("indicator")){o=n.dots.getChildren().indexOf(q);h(o,p)}})}k&&this.add(k);if(l&&n.content.isInjected()){j=n.content.getParent();if(j){n.content.inject(n.container);n.container.inject(j)}}else{n.content.inject(n.container)}if(i.arrows){n.arrowLeft=g.createElement("a",{"class":"left "+this.name+"-control",html:'<span class ="fonticon fonticon-left-open"></span>'}).inject(n.container);n.arrowRight=g.createElement("a",{"class":"right "+this.name+"-control",html:'<span class ="fonticon fonticon-right-open"></span>'}).inject(n.container);n.arrowRight.addEvent("mousedown",function(o){h("right",o)});n.arrowLeft.addEvent("mousedown",function(o){h("left",o)})}delete i.slides},getSlides:function(){return this.elements.content.getElements(this.options.slideSelector)},add:function(h){var i=this;d.splat(h).forEach(function(j){i.addSlide(j)});if(!this.current){this.setActive(0)}return this},addSlide:function(i,h){var j=this.elements;i=g.is(i,"element")?i:c(i);i.addClassName("slide");if(g.is(h)){}else{if(!i.isInjected()){i.inject(j.content)}if(this.options.dots){g.createElement("li",{"class":"indicator"}).inject(j.dots)}this.slides.push(i);this.dispatchEvent("onAddSlide",i)}},remove:function(h){var i=this;d.splat(h).forEach(function(j){i.removeSlide(j)});if(!this.current){this.setActive(0)}return this},removeSlide:function(h){if(this.slides[h]){this.slides[h].remove();this.slides.splice(h,1);if(this.elements.dots){this.elements.dots.getChildren()[h].remove()}this.dispatchEvent("onRemoveSlide",this.slides[h])}},setActive:function(i){var h=this.slides[i],k=this.elements,j;if(h){h.addClassName("active");this.current=h;if(k.dots){j=k.dots.getChildren();j.forEach(function(l){l.removeClassName("active")});j[i].addClassName("active")}}},slide:function(i){var m=this,k=this.options,o="next",n="left",j=this.slides.indexOf(this.current),h=false;if(this.slides.length<2||/sliding|fade/.test(this.current.className)){return}if(!g.is(i)||g.is(i,"string")){if(i==="left"){n="right";o="prev";j--}else{j++}}else{if(g.is(i,"number")&&this.slides[i]&&j!==i){if(j>i){n="right";o="prev"}j=i}else{j=false}}if(j!==false){if(k.infinite&&!this.slides[j]){j=j===this.slides.length?0:this.slides.length-1;h=true}if(this.slides[j]){if(m.elements.dots){var l=m.elements.dots.getChildren();l.forEach(function(p){p.removeClassName("active")})}if(k.animation==="slide"){this.slides[j].addClassName("sliding "+o);this.current.addClassName("sliding");setTimeout(function(){m.slides[j].addClassName(n);m.current.addClassName(n);setTimeout(function(){m.current.removeClassName("sliding");m.current.removeClassName(n);m.slides[j].removeClassName("sliding");m.slides[j].removeClassName(o);m.slides[j].removeClassName(n);m.current.removeClassName("active");m.setActive(j);m.dispatchEvent("onSlide");h&&m.dispatchEvent("onLoop")},600)},50)}else{m.current.addClassName("fade in");m.slides[j].addClassName("fade "+o);setTimeout(function(){m.current.removeClassName("in");m.slides[j].addClassName("in");setTimeout(function(){m.current.removeClassName("fade");m.slides[j].removeClassName("fade");m.slides[j].removeClassName(o);m.slides[j].removeClassName("in");m.current.removeClassName("active");m.setActive(j);m.dispatchEvent("onSlide");h&&m.dispatchEvent("onLoop")},600)},50)}}}return this},play:function(i){var j=this,h=this.options;this.autoplayTimer&&this.pause();if(h.pauseOnHover&&!i){this.elements.container.addEvents({mouseover:function(){j.pause(true)},mouseout:function(){j.play(true)}})}this.autoplayTimer=setInterval(function(){window.requestAnimationFrame(j.slide.bind(j,"right"))},h.autoPlaySpeed);return this},pause:function(i){var h=this.options;if(this.autoplayTimer){if(h.pauseOnHover&&!i){this.elements.container.removeEvent("mouseover");this.elements.container.removeEvent("mouseout")}clearInterval(this.autoplayTimer);this.autoplayTimer=null}return this},destroy:function(){this.pause();this._parent();this.elements=null}};return f.extend(e)});if(typeof Hammer!=="undefined"){define("DS/VENHammer",function(){return Hammer})}else{if(require.toUrl("DS/VENHammer").indexOf("2.0.8/hammer")===-1){(function(){var a=require.toUrl("DS/VENHammer/2.0.8/hammer");if(a.indexOf("?")>-1){a=a.substring(0,a.indexOf("?"))}require.config({paths:{"DS/VENHammer":a},shim:{"DS/VENHammer":{exports:"Hammer"}}})}())}}define("DS/UIKIT/Touch",["DS/VENHammer"],function(a){a.defaults.touchAction="pan-y";return a});define("DS/UIKIT/DatePicker",["UWA/Core","UWA/Element","UWA/Event","UWA/Utils/Client","UWA/Utils/Scroll","UWA/Controls/Abstract","i18n!DS/UIKIT/assets/nls/UIKIT"],function(h,c,n,g,k,j,o){function i(p){return h.is(p,"date")&&!isNaN(p.getTime())}function b(p){return p%4===0&&p%100!==0||p%400===0}function f(p,q){return[31,b(p)?29:28,31,30,31,30,31,31,30,31,30,31][q]}function d(p){if(i(p)){p.setHours(0,0,0,0)}}function e(q,p){return q.getTime()===p.getTime()}function a(p){if(p.month<0){p.year-=Math.ceil(Math.abs(p.month)/12);p.month+=12}if(p.month>11){p.year+=Math.floor(Math.abs(p.month)/12);p.month-=12}return p}function m(q,p,s){var r;if(document.createEvent){r=document.createEvent("HTMLEvents");r.initEvent(p,true,false);r=h.extend(r,s);q.dispatchEvent(r)}else{if(document.createEventObject){r=document.createEventObject();r=h.extend(r,s);q.fireEvent("on"+p,r)}}}var l={name:"datepicker",defaultOptions:{field:null,bound:undefined,position:"bottom left",defaultDate:null,setDefaultDate:false,firstDay:0,minDate:null,maxDate:null,yearRange:20,showWeekNumber:false,isRTL:false,yearSuffix:"",showMonthAfterYear:false,numberOfMonths:1,mainCalendar:"left",renderTo:undefined,i18n:{previousMonth:o.previousMonth,nextMonth:o.nextMonth,months:[o.january,o.february,o.march,o.april,o.may,o.june,o.july,o.august,o.september,o.october,o.november,o.december],weekdays:[o.sunday,o.monday,o.tuesday,o.wednesday,o.thursday,o.friday,o.saturday],weekdaysShort:[o.sun,o.mon,o.tue,o.wed,o.thu,o.fri,o.sat]},minYear:0,maxYear:9999,minMonth:undefined,maxMonth:undefined},init:function(q){var p,r;this._parent(q);q=this.options;this.events={};q.isRTL=!!q.isRTL;q.field=(h.is(q.field,"element"))?q.field:null;q.bound=!!(h.is(q.bound)?q.field&&q.bound:q.field);q.trigger=(h.is(q.trigger,"element"))?q.trigger:q.field;p=parseInt(q.numberOfMonths,10)||1;q.numberOfMonths=p>4?4:p;q.minDate=i(q.minDate)?q.minDate:false;q.maxDate=i(q.maxDate)?q.maxDate:false;if((q.minDate&&q.maxDate)&&q.maxDate<q.minDate){q.maxDate=q.minDate=false}if(q.minDate){d(q.minDate);q.minYear=q.minDate.getFullYear();q.minMonth=q.minDate.getMonth()}if(q.maxDate){d(q.maxDate);q.maxYear=q.maxDate.getFullYear();q.maxMonth=q.maxDate.getMonth()}if(h.is(q.yearRange,"array")){r=new Date().getFullYear()-10;q.yearRange[0]=parseInt(q.yearRange[0],10)||r;q.yearRange[1]=parseInt(q.yearRange[1],10)||r}else{q.yearRange=Math.abs(parseInt(q.yearRange,10))||this.defaultOptions.yearRange;if(q.yearRange>100){q.yearRange=100}}this.buildSkeleton()},buildSkeleton:function(){var u=this.elements,s=this.options,r;u.container=h.createElement("div",{"class":this.name+(s.isRTL?" is-rtl":"")});u.container.addEvent("mousedown",this.onMouseDown.bind(this),false,0,true);u.container.addEvent("change",this.onChange.bind(this));if(s.field){if(s.renderTo){u.container.inject(s.renderTo)}else{if(s.bound){u.container.inject(document.body)}else{s.field.parentNode.insertBefore(u.container,s.field.nextSibling)}}this.events.onInputChange=this.onInputChange.bind(this);s.field.addEvent("change",this.events.onInputChange);if(!s.defaultDate){s.defaultDate=new Date(Date.parse(s.field.value));s.setDefaultDate=true}}r=s.defaultDate;if(i(r)){if(s.setDefaultDate){this.setDate(r,true)}else{this.gotoDate(r)}}else{var q=new Date(),t=s.minDate,p=s.maxDate;if(i(t)&&q<t){q=t}else{if(i(p)&&q>p){q=p}}this.gotoDate(q)}if(s.bound){this.hide();u.container.addClassName(" is-bound");this.events.onInputClick=this.onInputClick.bind(this);this.events.onInputFocus=this.onInputFocus.bind(this);this.events.onInputBlur=this.onInputBlur.bind(this);s.trigger.addEvents({click:this.events.onInputClick,focus:this.events.onInputFocus,blur:this.events.onInputBlur})}else{this.show()}},onMouseDown:function(r){var q=this,s=n.getElement(r),p=this.options;if(!this.visible||!s){return}if(!s.hasClassName("is-disabled")){if(s.hasClassName(this.name+"-button")&&!s.hasClassName("is-empty")){this.setDate(new Date(s.getAttribute("data-year"),s.getAttribute("data-month"),s.getAttribute("data-day")));if(p.bound){setTimeout(function(){q.hide();if(p.field){p.field.blur()}},100)}return}else{if(s.hasClassName(this.name+"-prev")){this.prevMonth()}else{if(s.hasClassName(this.name+"-next")){this.nextMonth()}}}}if(!s.hasClassName(this.name+"-select")){n.preventDefault(r)}else{this._c=true}},onChange:function(p){var q=n.getElement(p);if(!q){return}if(q.hasClassName(this.name+"-select-month")){this.gotoMonth(q.value)}else{if(q.hasClassName(this.name+"-select-year")){this.gotoYear(q.value)}}},onInputChange:function(q){var p;if(q.firedBy===this){return}p=new Date(Date.parse(this.options.field.value));this.setDate(i(p)?p:null)},onInputFocus:function(){this.show()},onInputClick:function(){this.show()},onInputBlur:function(){var p=this;if(!this._c){this._b=setTimeout(function(){p.hide()},50)}this._c=false},onClick:function(p){var q=n.getElement(p),r=q;if(!q){return}do{if(r.hasClassName(this.name)){return}}while((r=r.getParent()));if(this.visible&&q!==this.options.trigger){this.hide()}},toString:function(){var p,q;if(!i(this.day)){q=""}else{if(!h.is(o._lang)||!h.is(window.Intl)){q=this.day.toDateString()}else{p={weekday:"short",year:"numeric",month:"short",day:"2-digit"};q=new Intl.DateTimeFormat(o._lang,p).format(this.day)}}return q},getDate:function(){return i(this.day)?new Date(this.day.getTime()):null},setDate:function(s,q){var r=this.options,u=r.field,t,p;if(!s){this.day=null;if(u){u.value="";u.removeClassName("filled");!q&&m(u,"change",{firedBy:this})}return this.draw()}if(h.is(s,"string")){s=new Date(Date.parse(s))}if(!i(s)){return}t=r.minDate;p=r.maxDate;if(i(t)&&s<t){s=t}else{if(i(p)&&s>p){s=p}}this.day=new Date(s.getTime());d(this.day);this.gotoDate(this.day);if(u&&u.value!==this.toString()){u.addClassName("filled");u.value=this.toString();!u.disabled&&!q&&m(u,"change",{firedBy:this})}if(!q){this.dispatchEvent("onSelect",this.getDate())}},gotoDate:function(r){var q=true,t,p,s;if(!i(r)){return}if(this.calendars){t=new Date(this.calendars[0].year,this.calendars[0].month,1);p=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1);s=r.getTime();p.setMonth(p.getMonth()+1);p.setDate(p.getDate()-1);q=(s<t.getTime()||p.getTime()<s)}if(q){this.calendars=[{month:r.getMonth(),year:r.getFullYear()}];if(this.options.mainCalendar==="right"){this.calendars[0].month+=1-this.options.numberOfMonths}}this.adjustCalendars()},adjustCalendars:function(){this.calendars[0]=a(this.calendars[0]);for(var p=1;p<this.options.numberOfMonths;p++){this.calendars[p]=a({month:this.calendars[0].month+p,year:this.calendars[0].year})}this.draw()},gotoToday:function(){this.gotoDate(new Date())},gotoMonth:function(p){if(!isNaN(p)){this.calendars[0].month=parseInt(p,10);this.adjustCalendars()}},nextMonth:function(){this.calendars[0].month++;this.adjustCalendars()},prevMonth:function(){this.calendars[0].month--;this.adjustCalendars()},gotoYear:function(p){if(!isNaN(p)){this.calendars[0].year=parseInt(p,10);if(this.calendars[0].month>this.options.maxMonth&&this.calendars[0].year>=this.options.maxYear){this.gotoDate(this.options.maxDate)}else{if(this.calendars[0].month<this.options.minMonth&&this.calendars[0].year<=this.options.maxYear){this.gotoDate(this.options.minDate)}else{this.adjustCalendars()}}}},setMinDate:function(p){if(i(p)){d(p);this.options.minDate=p;this.options.minYear=this.options.minDate.getFullYear();this.options.minMonth=this.options.minDate.getMonth()}else{if(p===false){this.options.minDate=false;this.options.minYear=false;this.options.minMonth=false}}},setMaxDate:function(p){if(i(p)){d(p);this.options.maxDate=p;this.options.maxYear=this.options.maxDate.getFullYear();this.options.maxMonth=this.options.maxDate.getMonth()}else{if(p===false){this.options.maxDate=false;this.options.maxYear=false;this.options.maxMonth=false}}},clearDates:function(){this.setMinDate(false);this.setMaxDate(false)},draw:function(q){var v=this,z=this.options,p=this.elements,y=z.minYear,t=z.maxYear,u=z.minMonth,r=z.maxMonth,s="";function x(J,K,I,N){var E,D,H,C=K===z.minYear,M=K===z.maxYear,G='<div class="datepicker-title">',B,L,A=true,F=true;for(H=[],E=0;E<12;E++){H.push('<option value="'+(K===N?E-J:12+E-J)+'"'+(E===I?" selected":"")+((C&&E<z.minMonth)||(M&&E>z.maxMonth)?"disabled":"")+">"+z.i18n.months[E]+"</option>")}B='<div class="datepicker-label">'+z.i18n.months[I]+'<select class="datepicker-select datepicker-select-month">'+H.join("")+"</select></div>";if(h.is(z.yearRange,"array")){E=z.yearRange[0];D=z.yearRange[1]+1}else{E=K-z.yearRange;D=1+K+z.yearRange}for(H=[];E<D&&E<=z.maxYear;E++){if(E>=z.minYear){H.push('<option value="'+E+'"'+(E===K?" selected":"")+">"+(E)+"</option>")}}L='<div class="datepicker-label">'+K+z.yearSuffix+'<select class="datepicker-select datepicker-select-year">'+H.join("")+"</select></div>";if(z.showMonthAfterYear){G+=L+B}else{G+=B+L}if(C&&(I===0||z.minMonth>=I)){A=false}if(M&&(I===11||z.maxMonth<=I)){F=false}if(J===0){G+='<button class="datepicker-prev'+(A?"":" is-disabled")+'" type="button">'+z.i18n.previousMonth+"</button>"}if(J===(z.numberOfMonths-1)){G+='<button class="datepicker-next'+(F?"":" is-disabled")+'" type="button">'+z.i18n.nextMonth+"</button>"}G+="</div>";return G}if(!this.visible&&!q){return}if(this.year<=y){this.year=y;if(!isNaN(u)&&this.month<u){this.month=u}}if(this.year>=t){this.year=t;if(!isNaN(r)&&this.month>r){this.month=r}}for(var w=0;w<z.numberOfMonths;w++){s+='<div class="'+this.name+'-calendar">'+x(w,this.calendars[w].year,this.calendars[w].month,this.calendars[0].year)+this.render(this.calendars[w].year,this.calendars[w].month)+"</div>"}p.container.setHTML(s);if(z.bound){if(z.field.type!=="hidden"){setTimeout(function(){z.trigger.focus()},1)}}setTimeout(function(){v.dispatchEvent("onDraw")},0)},updatePosition:function(){var A=this.options,p=this.elements,y=A.trigger,q=p.container.offsetWidth,z=p.container.offsetHeight,t=y.getOffsets(),w=window.innerWidth||document.documentElement.clientWidth,u=window.innerHeight||document.documentElement.clientHeight,r,s,x;if(A.renderTo){var v=k.getClosestScrollable(A.renderTo,"y");r=v?v.scrollTop:0;x=y.getPosition(A.renderTo).y+y.getComputedSize("marginTop")}else{r=window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop;x=t.y}s=t.x;x+=y.offsetHeight;if(s+q>w||(A.position.indexOf("right")>-1&&s-q+y.offsetWidth>0)){s=s-q+y.offsetWidth}if(x+z>u+r||(A.position.indexOf("top")>-1&&x-z-y.offsetHeight>0)){x=x-z-y.offsetHeight}p.container.setStyles({position:"absolute",left:s,top:x})},render:function(B,L){var z=this,t=this.options,q=new Date(),v=f(B,L),D=new Date(B,L,1).getDay(),N=[],x=[],u,s;function G(r){return'<table cellpadding="0" cellspacing="0" class="'+z.name+'-table">'+K()+p(r)+"</table>"}function K(){var P,r=[];if(t.showWeekNumber){r.push("<th></th>")}for(P=0;P<7;P++){r.push('<th scope="col"><abbr title="'+M(P)+'">'+M(P,true)+"</abbr></th>")}return"<thead>"+(t.isRTL?r.reverse():r).join("")+"</thead>"}function p(r){return"<tbody>"+r.join("")+"</tbody>"}function y(R,r,S){var P=new Date(S,0,1),Q=Math.ceil((((new Date(S,r,R)-P)/86400000)+P.getDay()+1)/7);return'<td class="'+z.name+'-week">'+Q+"</td>"}function M(r,P){r+=t.firstDay;while(r>=7){r-=7}return P?t.i18n.weekdaysShort[r]:t.i18n.weekdays[r]}function J(U,P,V,R,S,Q,T){var r=[];if(T){return'<td class="is-empty"></td>'}if(Q){r.push("is-disabled")}if(S){r.push("is-today")}if(R){r.push("is-selected")}return'<td data-day="'+U+'" class="'+r.join(" ")+'"><button class="'+z.name+"-button "+z.name+'-day" type="button" data-year="'+V+'" data-month="'+P+'" data-day="'+U+'">'+U+"</button></td>"}function w(P,r){return"<tr>"+(r?P.reverse():P).join("")+"</tr>"}d(q);if(t.firstDay>0){D-=t.firstDay;if(D<0){D+=7}}u=v+D;s=u;while(s>7){s-=7}u+=7-s;for(var I=0,F=0;I<u;I++){var H=new Date(B,L,1+(I-D)),C=(t.minDate&&H<t.minDate)||(t.maxDate&&H>t.maxDate),A=i(this.day)?e(H,this.day):false,O=e(H,q),E=I<D||I>=(v+D);x.push(J(1+(I-D),L,B,A,O,C,E));if(++F===7){if(t.showWeekNumber){x.unshift(y(I-D,L,B))}N.push(w(x,t.isRTL));x=[];F=0}}return G(N)},isVisible:function(){return this.visible},show:function(){var p=this.options;if(!this.visible){this.elements.container.removeClassName("is-hidden");this.visible=true;this.draw();if(p.bound){this.events.onClickOutside=this.onClick.bind(this);c.addEvent.call(document,"click",this.events.onClickOutside);this.updatePosition()}this.dispatchEvent("onShow")}},hide:function(){var p=this.visible;if(p!==false){if(this.options.bound){c.removeEvent.call(document,"click",this.events.onClickOutside)}this.elements.container.style.cssText="";this.elements.container.addClassName("is-hidden");this.visible=false;if(h.is(p)){this.dispatchEvent("onHide")}}},destroy:function(){var p=this.options,q=this.elements;this.hide();if(p.field){p.field.removeEvent("change",this.events.onInputChange);if(p.bound){p.trigger.removeEvent("click",this.events.onInputClick);p.trigger.removeEvent("focus",this.events.onInputFocus);p.trigger.removeEvent("blur",this.events.onInputBlur)}}if(q.container.parentNode){q.container.parentNode.removeChild(this.elements.container)}this._parent()}};return j.extend(l)});define("DS/UIKIT/Tooltip",["UWA/Core","UWA/Element","UWA/Event","UWA/Utils/Client","UWA/Controls/Abstract"],function(g,b,a,e,f){var c="MutationObserver" in window;var d={_positions:["top","top right","right","bottom right","bottom","bottom left","left","top left"],name:"tooltip",defaultOptions:{className:"",animate:true,offset:{x:0,y:0},anchor:"target",position:"top",trigger:"hover focus",autoHide:true,autoHideOnClickOutside:true,closeOnClick:false},isVisible:false,shouldListenForScroll:false,init:function(i,h){i=i||{};if(g.is(i,"element")){i={target:i}}if(h){i.position=h}if(i.trigger==="touch"){i.trigger=this.defaultOptions.trigger+" touch"}var k=true;if(g.is(i.allowedPositions,"array")){var j=this;k=i.allowedPositions.some(function(l){return(j._positions.indexOf(l)===-1)})}this.positions=k?this._positions:i.allowedPositions;this._parent(i);this._mutationObserver=undefined;this.options.animate=e.Features.transitionsCSS&&this.options.animate;this.buildSkeleton()},getBody:function(){return this.elements&&this.elements.body},setBody:function(h){if(this.getBody()){this.elements.body.empty();this.elements.body.addContent(h)}this.isVisible&&this.updatePosition(this._lastValidPosition);return this},getPositionClasses:function(j){var i=j||this.options.position,h=i;if(i.split(" ").length>1){i=h.indexOf("top")>-1?["top"]:["bottom"];i.push(h.indexOf("left")>-1?"left":"right");i=i[0]+" "+i.join("-")}return i},buildSkeleton:function(){var j=g.createElement,k=this.elements,i=this.options,h=i.position;if(h.split(" ").length>1){h=i.position.indexOf("top")>-1?["top"]:["bottom"];h.push(i.position.indexOf("left")>-1?"left":"right");h=h[0]+" "+h.join("-")}if(k.container){return}k.container=j("div",{"class":this.getClassNames()+" "+h});j("div",{"class":this.name+"-arrow"}).inject(k.container);k.body=j("div",{"class":this.name+"-body",html:i.body||i.target.getAttribute("title")||"..."}).inject(k.container);i.target.setAttribute("title","");if(i.animate){k.container.addClassName("fade")}this.handleEvents();delete i.body},handleEvents:function(){var k=this,i=this.options,h=g.Utils.Client.Features.touchEvents,j=i.trigger.split(" ");function n(p,o){return function(r){if(k._shouldStopEventChain){if(r&&r.type==="click"){k._shouldStopEventChain=false}return}var q=(p===undefined)?!k.isVisible:p;if(q&&o){k._touchstart=b.addEvent.call(document.body,"touchstart",function(s){b.removeEvent.call(document.body,"touchstart",k._touchstart);if(k.elements.container.isInjected()&&a.getElement(s)!==i.target){n(false)()}})}if(i.delay){clearTimeout(k.timeout);k.timeout=setTimeout(function(){if(q&&k.options.target&&k.options.target.isInjected()){k.show()}else{if(!q){k.hide()}}},q?i.delay.show:i.delay.hide)}else{k[q?"show":"hide"]()}}}if(!this.events&&i.target){this.events={};if(i.autoHideOnClickOutside){var l=this.options.target;if("contains" in HTMLElement.prototype&&!("contains" in l)){var m=Object.getOwnPropertyDescriptor(HTMLElement.prototype,"contains");Object.defineProperty(l,"contains",m)}this._onClickOutside=function(o){var p=a.getElement(o);if(!p.isInjected(this.elements.container)&&p!==this.elements.container&&!this.options.target.contains(p)){this.hide();this.dispatchEvent("onClickOutside",[o])}}.bind(this)}if(h){this.events.touchstart=function(o){if(this.options.trigger.indexOf("touch")===-1){this._shouldStopEventChain=true;o.stopPropagation()}}.bind(this)}j.forEach(function(o){if(o==="hover"){this.events.mouseover=n(true);this.events.mouseout=n(false)}if(o==="focus"){if(h){this.events.click=n(undefined,h)}else{this.events.focus=n(true);this.events.blur=n(false)}}if(o==="click"){this.shouldListenForScroll=true;this.events.click=n()}},this);if(i.closeOnClick&&!this.events.click){this.events.click=n()}if(!i.target.addEvents){g.extendElement(i.target)}i.target.addEvents(this.events)}},resetPosition:function(){this.elements.container.setStyles({top:null,left:null});this.positions.map(this.getPositionClasses).join(" ").split(" ").forEach(function(h){this.elements.container.hasClassName(h)&&this.elements.container.removeClassName(h)},this)},setPlacementClasses:function(h){this.getPositionClasses(h).split(" ").forEach(function(i){!this.elements.container.hasClassName(i)&&this.elements.container.addClassName(i)},this)},setPosition:function(m,k,j,i){var h=k,l=this.getPositionClasses(m);if(isNaN(j.width)){j.width=0}if(isNaN(j.height)){j.height=0}if(/-right/.test(l)){h.x+=j.width-i.width}else{if(/(top|bottom)$/.test(l)){h.x+=(j.width/2)-(i.width/2)}}if(/bottom/.test(l)){h.y+=j.height}else{if(/^(left|right)$/.test(l)){h.x-=i.width;h.y+=(j.height/2)-(i.height/2);if(l==="right"){h.x+=j.width+i.width}}else{h.y-=i.height}}this.elements.container.setStyles({left:Math.round(h.x+this.options.offset.x+parseInt(this.options.target.getStyle("marginLeft"),10)),top:Math.round(h.y+this.options.offset.y+parseInt(this.options.target.getStyle("marginTop"),10))})},adjustPosition:function(m,j){var p=document.body.getBoundingClientRect(),k=this.elements.container.getBoundingClientRect(),o=Math.floor((5*p.width)/100),h=(p.width-k.right)<=o,i=k.left<o,l,n;if(h||i){l=this.options.target.getPosition(document.body);n=this.elements.container.getSize();this.setPosition(m,l,j,n)}},isNotFullyVisible:function(){return !this.elements.container.isInViewport(document.body)||!this.elements.container.isInViewport(document.body,true)},updatePosition:(function(){function h(j){var i=(this.positions.indexOf(j)+1)%this.positions.length;return this.positions[i]}return function(){var i=typeof arguments[1]==="number"?arguments[1]:0,k=this.positions.length,n,j,m,l;if(i>=k){return}j=this.options;n=arguments[0]||j.position;m=j.target.getPosition(document.body);l=j.target.getSize();this.resetPosition();this.setPlacementClasses(n);this.setPosition(n,m,l,this.elements.container.getSize());if(/^(top|bottom)$/.test(n)||this._needsPositionAdjusment){this.adjustPosition(n,l)}if(this.isNotFullyVisible()){this.updatePosition(h.call(this,n),i+1)}else{this._lastValidPosition=n}return this}}()),toggle:function(){return this[this.isVisible?"hide":"show"]()},_contentInsertionMutationCallback:function(h){var i=h.some(function(j){return j.addedNodes.length||j.removedNodes.length});i&&this.updatePosition(this._lastValidPosition)},_targetRemovalMutationCallback:function(h){var i=h.some(function(j){return Array.prototype.indexOf.call(j.removedNodes,this.options.target)!==-1},this);i&&this.hide()},show:function(){var i=this,h=this.options,k=this.elements;if(!k){return}if(c){if(!this._mutationObserver){this._mutationObserver=new MutationObserver(function(l){i._targetRemovalMutationCallback(l);i._contentInsertionMutationCallback(l)})}try{this._mutationObserver.observe(h.target.parentNode,{childList:true});this._mutationObserver.observe(this.elements.container,{childList:true,subtree:true})}catch(j){}}if(this.shouldListenForScroll&&h.autoHide){clearInterval(this._scrollInterval);this._initialTargetClientRect=h.target.getBoundingClientRect();this._scrollInterval=setInterval(function(){var l;try{l=i.options.target.getBoundingClientRect()}catch(m){l={bottom:0}}if(i._initialTargetClientRect.bottom!==l.bottom){try{i.options.target.blur&&i.options.target.blur()}catch(m){}i.hide()}},300)}if(!this.isVisible){this.isVisible=true;if(h.autoHideOnClickOutside){b.addEvent.call(document.body,"click",this._onClickOutside)}this.inject(document.body,"top");this.updatePosition(this._lastValidPosition);this.elements.container.addClassName("in");if(h.animate){setTimeout(function(){if(i.elements&&i.isVisible){i.dispatchEvent("onShow")}},150)}else{this.dispatchEvent("onShow")}}return this},hide:function(){var j=this,i=this.options,k=this.elements;function h(){if(!j.isVisible&&j.elements){j.elements.container.remove(document.body);j.dispatchEvent("onHide")}}if(!k){return}if(this.shouldListenForScroll){clearInterval(this._scrollInterval);this._initialTargetClientRect=undefined}if(c&&this._mutationObserver){this._mutationObserver.disconnect()}if(this.isVisible){this.isVisible=false;if(i.autoHideOnClickOutside){b.removeEvent.call(document.body,"click",this._onClickOutside)}k.container.removeClassName("in");if(i.animate){setTimeout(function(){h()},150)}else{h()}}return this},destroy:function(){if(this.options){this.options.animate=false;this.options.target&&this.options.target.removeEvents(this.events)}this.hide();this._touchstart&&b.removeEvent.call(document.body,"touchstart",this._touchstart);this._mutationObserver=null;this._parent();this.elements=null}};return f.extend(d)});define("DS/UIKIT/Core",[],function(){var b=true,c=Array.prototype.slice,a={log:function(){if(!b){return}if(window.console){if(typeof(console.log)==="function"){console.log.apply(console,c.call(arguments))}else{if(typeof(console.log)==="object"){console.log(c.call(arguments))}}}else{if(window.opera&&typeof(opera.postError)==="function"){opera.postError.apply(null,c.call(arguments))}}}};return a});define("DS/UIKIT/Mask",["UWA/Core","DS/UIKIT/Spinner","i18n!DS/UIKIT/assets/nls/UIKIT"],function(d,a,b){var c={mask:function(f,g){var e;if(this.isMasked(f)){this.unmask(f)}f.addClassName("masked");e=d.createElement("div",{"class":"mask"});g=d.is(g,"string")?g:b.loading;g=d.createElement("div",{"class":"mask-wrapper",html:{tag:"div","class":"mask-content",html:[new a({visible:true,animate:true,spin:true}),d.createElement("span",{"class":"text",text:g})]}}).inject(e);e.inject(f)},unmask:function(f){var e=f.getElement(" > .mask");if(e){e.destroy()}f.removeClassName("masked")},isMasked:function(e){return e.hasClassName("masked")}};return c});define("DS/UIKIT/Popover",["UWA/Core","UWA/Element","UWA/Event","UWA/Utils/Client","DS/UIKIT/Tooltip"],function(f,b,a,e,d){var c={_positions:["top","right","bottom","left"],name:"popover",defaultOptions:{position:"right",trigger:"click",autoHideOnClickOutside:true},init:function(g){this._parent(g);this._needsPositionAdjusment=true;this.shouldListenForScroll=true},buildSkeleton:function(){var h=f.createElement,i=this.elements,g=this.options;if(i.container){return}i.container=h("div",{"class":this.name+" "+g.className+" "+g.position});h("div",{"class":this.name+"-arrow"}).inject(i.container);if(g.title){this.setTitle(g.title)}i.body=h("div",{"class":this.name+"-body",html:g.body||""}).inject(i.container);if(g.animate){i.container.addClassName("fade")}this.handleEvents();g.body=null},getTitle:function(){var g=this.elements;if(!g.title){g.title=f.createElement("h3",{"class":this.name+"-title"}).inject(g.container)}return g.title},setTitle:function(g){this.getTitle().setText(g);this.isVisible&&this.updatePosition(this._lastValidPosition);return this}};return d.extend(c)});define("DS/UIKIT/Alert",["UWA/Core","UWA/Element","UWA/Event","UWA/Utils","UWA/Controls/Abstract","DS/UIKIT/Core"],function(f,b,a,d,e){var c={name:"alert",defaultOptions:{className:"",messageClassName:"alert-primary",animate:true,closable:true,visible:false,hideDelay:2000,autoHide:false,closeOnClick:true,icon:true,maximumVisibleMessages:5,fullWidth:false,attributes:{}},isVisible:false,messages:null,hidingIntervalId:null,init:function(g){var h=g||{};this._parent(h);this.messages=[];this.buildSkeleton();this.add(this.options.messages);if(h.renderTo){this.inject(h.renderTo);delete this.options.renderTo}},buildSkeleton:function(){var g=this.elements;if(g.container){return}g.container=f.createElement("div",{"class":this.getClassNames(),events:{click:this.eventHandler.bind(this)}});Object.keys(this.options.attributes).forEach(function(h){g.container.setAttribute(h,this.options.attributes[h])},this);if(this.options.fullWidth){g.container.addClassName(this.name+"-fullwidth")}},add:function(h){var g=this;h=d.splat(h);h.forEach(function(i){g.messages.push(i)});if(this.elements.container.isInjected()){this.showMessages()}return this},toggleAutoHide:function(g,h){var i=this;if(g&&h){this.hidingIntervalId=setTimeout(function(){i.remove(h)},i.options.hideDelay)}else{clearInterval(this.hidingIntervalId)}},createMessage:function(h){var n,p,o,k,q=this,r=100,g=this.elements,t=this.options,m=this.getMessages(),j=0,s=t.messageClassName||"";if(m.length>0){r=m[m.length-1].getStyle("z-index")-1}if(h&&h.className){s=h.className}s=s.split(" ");for(o=0,k=s.length;o<k;o++){p=s[o].match(/(alert-)?(primary|warning|error|success|default|info)$/);if(p&&!p[1]){if(s[o]==="default"||s[o]==="info"){s[o]="primary"}s[o]="alert-"+s[o];break}}s=s.join(" ");n=f.createElement("div",{"class":this.name+"-message "+s,html:h.message?h.message:h,styles:{zIndex:r}});if(typeof h.attributes==="object"){Object.keys(h.attributes).forEach(function(i){n.setAttribute(i,h.attributes[i])})}if(t.animate){n.addClassName("fade")}if(t.closable||true){n.addClassName(this.name+"-closable");f.createElement("span",{"class":"close fonticon fonticon-cancel"}).inject(n,"top")}if(t.icon){n.addClassName(this.name+"-has-icon");f.createElement("span",{"class":"icon fonticon"}).inject(n,"top")}m.forEach(function(i){j+=i.getDimensions().outerHeight});n.inject(g.container);setTimeout(function(){n.setStyle("top",Math.round(j));if(t.animate){n.addClassName("in")}if(t.autoHide){q.toggleAutoHide(true,n);n.addEvents({mouseover:q.toggleAutoHide.bind(q,false),mouseleave:q.toggleAutoHide.bind(q,true,n)})}},10);this.dispatchEvent("onShowMessage",n)},getMessages:function(){return this.getContent().getElements("."+this.name+"-message")},showMessages:function(){var g=this,h=this.getMessages().length;if(this.isVisible&&h<this.options.maximumVisibleMessages){this.messages=this.messages.filter(function(k,j){if(k){if(h+j+1>g.options.maximumVisibleMessages){return true}else{g.createMessage(k)}}})}},updateMessages:function(){var g=this.getMessages(),h=0;g.forEach(function(k){var i=h,j=k.getDimensions();h+=j.outerHeight;k.setStyles({top:Math.round(i)})});if(g.length<this.options.maximumVisibleMessages){this.showMessages()}},onPostInject:function(){this.showMessages();if(this.options.visible||this.isVisible){this.isVisible=false;this.show()}},remove:function(i){var h=this;function g(j){h.dispatchEvent("onRemoveMessage",j);j.destroy();h.updateMessages()}if(this.options&&this.options.animate){i.removeClassName("in");setTimeout(g.bind(this,i),500)}else{g(i)}return this},eventHandler:function(i){var j=a.getElement(i),g=this.name+"-message",h;h=j.hasClassName(g)?j:j.getClosest("."+g);if(h){if(this.options.closeOnClick){this.dispatchEvent("onClick",[i,h]);this.remove(h)}else{if(j.hasClassName("close")||j.getParent().hasClassName("close")){this.remove(h)}else{this.dispatchEvent("onClick",[i,h])}}}},toggle:function(){return this[this.isVisible?"hide":"show"]()},show:function(){var g=this.elements;if(!g){return}if(!this.isVisible){this.isVisible=true;if(g.container.isInjected()){g.container.setStyle("visibility","visible");this.showMessages();this.dispatchEvent("onShow")}}return this},hide:function(){var g=this.elements;if(!g){return}if(this.isVisible){this.isVisible=false;if(g.container.isInjected()){g.container.setStyle("visibility","");this.dispatchEvent("onHide")}}return this},destroy:function(){if(this.options){this.options.animate=false}this.hide();this._parent();this.elements=null}};return e.extend(c)});define("DS/UIKIT/Input/Text",["UWA/Core","UWA/Element","UWA/Event","UWA/Utils/Client","DS/UIKIT/Input"],function(g,c,b,f,e){function a(m){var k,h,j;if(!m){return}m=m.split(" ");for(k=0,h=m.length;k<h;k++){j=m[k].match(/xsmall|small|large$/);if(j&&!j[1]){if(j[0]==="small"){m[k]="input-sm"}else{if(j[0]==="large"){m[k]="input-lg"}else{if(j[0]==="xsmall"){m[k]="input-xs"}}}}}return m.join(" ")}var d={name:"form-control",defaultOptions:{className:"",multiline:false},init:function(h){h=h||{};if(h.className){h.className=a(h.className)}this._parent(h)},buildInput:function(){var h={},i=this.options,j=i.multiline?g.createElement("textarea"):g.createElement("input",{type:"text"});["placeholder","required","pattern","rows","maxlength"].forEach(function(k){if(i[k]){h[k]=i[k]}});j.set(h);return j},setFocus:function(h){this._parent(h);this.syncInput();return this},syncInput:function(){var j,i,h=this.elements.input,k=h.getAttribute("placeholder");if(k&&!f.Features.inputPlaceholder){j=this.getValue();i=h.getDocument().activeElement!==h&&!j;if(i!==h.hasClassName("placeholder")){h.toggleClassName("placeholder",i);h.set(h.getTagName()==="textarea"?"text":"value",i?k:j)}}},getValue:function(){if(this.elements.input.hasClassName("placeholder")){return""}return this._parent()},setClassName:function(h){this.options.className=a(h);this.getContent().className=this.getClassNames();return this}};return e.extend(d)});define("DS/UIKIT/Menu",["UWA/Core","UWA/Element","UWA/Event","UWA/Utils","UWA/Controls/Abstract","DS/UIKIT/Scroller"],function(e,a,i,h,f,c){var d=(function(){var j=/^(header|divider)$/;return function(l){if(!l){return false}var m=l.split(" ");for(var k=0;k<m.length;k++){if(j.test(m[k])){return true}}return false}}());function b(j){return/\.(gif|jpg|jpeg|tiff|png|svg)$/i.test(j)}var g={name:"",templateClassname:"",backItem:null,items:null,isVisible:false,keyboardIndex:-1,defaultOptions:{multiSelect:false,attributes:{}},init:function(j){j=j||{};if(j.kb===undefined){j.kb=true}this._parent(j);this.items=[];this.buildSkeleton();if(j.items){j.items.forEach(function(k){this.addItem(k)},this)}},buildSkeleton:function(){var j=e.createElement,k=this.elements;if(k.container){return}k.container=j("div",{"class":this.getClassNames(""),styles:{display:"none"}});if(this.options.zindex){k.container.setStyle("z-index",this.options.zindex)}Object.keys(this.options.attributes).forEach(function(l){k.container.setAttribute(l,this.options.attributes[l])},this);k.wrapper=j("ul",{"class":this.name+"-wrap",tabindex:"1"});this.options.multiSelect&&k.wrapper.addClassName("dropdown-multiselect");k.wrapper.inject(k.container);this.handleEvents()},hide:function(){if(this.isVisible){this.isVisible=false;this.getContent().setStyle("display","none");this.dispatchEvent("onHide")}return this},show:function(){if(!this.isVisible){this.isVisible=true;this.getContent().setStyle("display","");this.focusIt();this.dispatchEvent("onShow")}return this},focusIt:function(){this.options.kb&&this.elements.wrapper.focus()},addItem:function(j){var k=this;h.splat(j).forEach(function(l){k._addItem(l)});return this},addBackItem:function(j){j.isBackItem=true;this.backItem=this._addItem(j);return this.backItem},_addItem:function(k){var o=this.elements,j=k.className||"",n={},l,m=this;n.id=k.id||"itm-"+h.getUUID().substr(0,6);if(!k.name){n.name=k.text}if(k.disabled){j+=" disabled"}if(k.selected){k.selectable=true}if(k.selectable){j+=" selectable";n.toggleSelection=function(){m.toggleSelection(n)}}n.elements={};n.elements.container=e.createElement("li",{"class":"item "+j,id:n.id,title:k.title||""});Object.keys(k.attributes||{}).forEach(function(p){n.elements.container.setAttribute(p,k.attributes[p])});if(k.name){n.elements.container.set("name",k.name)}if(k.template){n.elements.content=e.createElement("div",{"class":"item "+this.templateClassname,id:n.id,html:k.template}).inject(n.elements.container)}else{if(k.text){n.elements.content=e.createElement("span",{"class":"item-text",text:k.text||""}).inject(n.elements.container)}}if(d(k.className)){n.elements.container.removeClassName("item")}else{if(k.fonticon){n.elements.icon=e.createElement("span",{"class":"fonticon fonticon-"+k.fonticon}).inject(n.elements.container,"top");o.wrapper.addClassName(this.name+"-icons")}if(!k.fonticon&&k.icon){if(b(k.icon)){n.elements.icon=e.createElement("img",{src:k.icon,"class":"item-icon"})}else{n.elements.icon=e.createElement("span",{"class":k.icon})}n.elements.icon.inject(n.elements.container,"top");o.wrapper.addClassName(this.name+"-icons")}}if(k.handler&&e.is(k.handler,"function")){n.handler=k.handler}if(k.index&&k.index!==this.items.length+1){l=this.items[k.index-1];n.elements.container.inject(l.elements.container,"before");if(!k.isBackItem){this.items.splice(k.index-1,0,e.merge(n,k))}}else{n.elements.container.inject(o.wrapper);this.items.push(e.merge(n,k))}if(k.selected){this.select(n)}return n},removeItem:function(j){var k=this;h.splat(j).forEach(function(l){k._removeItem(l)});return this},removeBackItem:function(){this.backItem&&this.backItem.elements.container.destroy();this.backItem=null;return this},_removeItem:function(k){var j=this.getItem(k);if(j){j.elements.container.destroy();this.items.splice(this.items.indexOf(j),1)}},updateItem:function(j){var k=this;h.splat(j).forEach(function(l){k._updateItem(l)});return this},_updateItem:function(l){var n=this.getItem(l.id),k;function j(o){o.elements.icon&&o.elements.icon.destroy();o.elements.icon=e.createElement("span",{"class":o.icon}).inject(o.elements.container,"top")}function m(o){o.elements.icon&&o.elements.icon.destroy();o.elements.icon=e.createElement("span",{"class":"fonticon fonticon-"+o.fonticon}).inject(o.elements.container,"top")}if(n){if(e.is(l.text)&&n.text!==l.text){n.text=l.text;n.elements.container.getElement(".item-text").setText(l.text)}k=n.elements.container.getElement("."+this.templateClassname);if(e.is(l.template)&&k){k.setHTML(l.template)}if(e.is(l.name)&&n.name!==l.name){n.name=l.name}if(e.is(l.title)&&n.title!==l.title){n.title=l.title;n.elements.container.title=l.title}if(e.is(l.fonticon)&&n.fonticon!==l.fonticon){n.fonticon=l.fonticon;m(n)}else{if(e.is(l.icon)&&n.icon!==l.icon){n.icon=l.icon;j(n)}}if(e.is(l.disabled)){n.elements.container.toggleClassName("disabled",l.disabled)}if(e.is(l.className)&&n.className!==l.className){n.elements.container.removeClassName(n.className);n.elements.container.addClassName(l.className);n.className=l.className;if(d(l.className)){n.elements.container.removeClassName("item")}else{n.elements.container.addClassName("item")}}if(e.is(l.handler)){n.handler=l.handler}}},enableItem:function(k){var j=this.getItem(k);j&&j.elements.container.removeClassName("disabled");if(j){j.disabled=false}return this},disableItem:function(k){var j=this.getItem(k);j&&j.elements.container.addClassName("disabled");if(j){j.disabled=true}return this},getItem:function(o){var m,j,k,n=false;for(m=0,j=this.items.length;m<j;m+=1){n=this.items[m];if(o&&o.nodeType){k=o.hasClassName("item")?o:o.getParent();if(n.id===k.id){break}}else{if(m===o||n.id===o||n.name===o){break}}n=false}return n},_hoverItem:function(l,j){var k=this.getItem(l);if(k){j=(j===undefined)?(true):j;if(j){k.elements.container.addClassName("js-selected");this.options.kb&&k.elements.container.focus()}else{k.elements.container.removeClassName("js-selected")}}},_updateKeyboardIndex:function(m,j){var o=j||this.keyboardIndex,k=this.keyboardIndex,l=false,n;if(o===-1&&m!=="reset"){o=0;l=true}else{if(m==="down"&&o<this.items.length-1){o=o+1;l=true}else{if(m==="up"&&o>0){o=o-1;l=true}else{if(m==="reset"){l=true;this._hoverItem(o,false);o=-1}else{if(!m){l=true}}}}}n=this.getItem(o);if(n&&d(n.elements.container.className)){l=false;if(m==="down"||m==="up"){this._updateKeyboardIndex(m,o)}}if(l&&o>=0){this._hoverItem(k,false);this._hoverItem(o);this.keyboardIndex=o}},toggleSelection:function(j){this.select(j,!j.selected)},select:(function(){var j=function(l,k){l.selected=k;l.elements.container[k?"addClassName":"removeClassName"]("selected")};return function(m,l){var n,k=!this.options.multiSelect;if(l===undefined||l===true){if(k){n=this.items.filter(function(o){return o.selected});n[0]&&j(n[0],false)}j(m,true)}else{if(k&&m.selected){return}j(m,false)}}}()),setHeight:function(j){var k=isNaN(j);this.elements.container.setStyle("height",k?"":j+"px");this.height=j;k?this.removeScroller():this.setScroller()},preserveWidth:function(k){var j;if(!k){j=this.elements.container.getSize().width}this.elements.container.setStyle("width",k?"":j+"px")},setScroller:function(){if(!this.scroller){this.scroller=new c({element:this.elements.container,scrollbarsMargin:0,})}},removeScroller:function(){if(this.scroller){this.scroller.destroy();delete this.scroller}},handleEvents:function(){if(!this.events){this.events={container:{mouseout:this.dispatchEvent.bind(this,"onMouseout"),mouseover:this.dispatchEvent.bind(this,"onMouseover"),click:this.dispatchEvent.bind(this,"onClick"),keydown:this.dispatchEvent.bind(this,"onKeydown"),},}}this.elements.container.addEvents(this.events.container)},destroy:function(j){this.removeScroller();this.elements.container.removeEvents(this.events.container);if(!j){this._parent()}else{this.removeEvents();delete this.options}},};return f.extend(g)});define("DS/UIKIT/DropdownMenu",["UWA/Core","UWA/Element","UWA/Event","UWA/Utils","DS/UIKIT/Dropdown","DS/UIKIT/Menu"],function(g,n,r,c,q,h){var e="dropdown-menu",a="dropdown-menu-hidden",l="item",d="item-back",b="item-submenu",k="item-template",i=h.extend({name:e,templateClassname:k});function p(v,u,t,s){if(u.addEventListener){u.addEventListener(v,t,s)}else{if(u.attachEvent){u.attachEvent("on"+v,t,s)}}}function o(t,u,s){Object.keys(t).forEach(function(v){p(v,u,t[v],s)})}function f(t,v,s){var u;return function(){var z=this,y=arguments,x,w=function(){u=null;if(!s){t.apply(z,y)}};x=s&&!u;clearTimeout(u);u=setTimeout(w,v);if(x){t.apply(z,y)}}}var j=(function(){var s=/^(header|divider|disabled)$/;return function(u){if(!u){return false}var v=u.split(" ");for(var t=0;t<v.length;t++){if(s.test(v[t])){return true}}return false}}());var m={name:e,items:null,menus:null,activeMenu:null,defaultOptions:{subMenuMaxDepth:20,maxItemsBeforeScroll:12,responsiveMode:true,scrollMode:true,zindex:1000,},init:function(s){this.menus=[];this.items=[];s=s||{};if(s.kb==null){s.kb=true}this.setupTemplates(s);this._parent(s)},buildSkeleton:function(){var t=this.elements,s=this.options;if(t.container){return}this.events.container={};this._mainMenu=this.addMenu(s.items,0,null,s.multiSelect);t.container=this._mainMenu.elements.container;t.container.className=this.getClassNames();this._handleEvents()},addMenu:function(B,x,y,v){var A=this;var t=[],z=[],s,D=this.options,w=D.scrollMode,C=D.renderTo;var u={kb:D.kb,multiSelect:v,items:B,attributes:D.attributes,};if(w){g.merge(u,{events:{onMouseover:this._onMouseover.bind(this),onMouseout:this._onMouseout.bind(this),onClick:this._onClick.bind(this),onKeydown:this._onKeyDown.bind(this),},zindex:(D.zindex+x)})}s=new i(u);s.position=y||"bottom right";this.menus.push(s);B.forEach(function(F,E){if(F.items&&x<D.subMenuMaxDepth){t.push(this.addMenu(F.items,x+1,F.position,F.multiSelect));z.push(E)}},this);this.items=this.items.concat(s.items);if(t.length){t.forEach(function(I,E){var H=s.getItem(z[E]),K,G;if(!w){I.inject(H.elements.container)}else{var F=I.elements.container;var J="menu-"+H.id;A.elements[J]=F;F.addClassName(J);if(A.elements.container&&A.elements.container.isInjected()){C=C||document.body;F.inject(C)}}H.elements.container.addClassName(b);G=g.createElement("span",{"class":"divider"});K=g.createElement("div",{"class":"next-icon"});K.inject(H.elements.container);G.inject(K);g.createElement("span",{"class":"fonticon fonticon-right-open"}).inject(K);I.parentItem=H})}s.childMenus=t;return s},_enforceMaxItemsBeforeScroll:function(w){var t=w.items.filter(function(x){return !x.elements.container.hasClassName("hidden")});if(t.length>this.options.maxItemsBeforeScroll){var u=t[this.options.maxItemsBeforeScroll];var v=w.items.filter(function(x){return x.id===u.id})[0];var s=v.elements.container.getPosition().y;w.preserveWidth();w.setHeight(s)}return w.getContent().getSize()},setupTemplates:function(s){this.template={};this.template.getItem=function(t){var u;if(t.hasClassName(l)){return t}else{u=t.getParent("."+l);return u}};g.extend(this.template,s.template)},addItem:function(s){var t=this;c.splat(s).forEach(function(u){t._addItem(u)});return this},_getSubmenuForItem:function(t){var s=this.getItem(t);return s&&this._getMenuFromParentItem(s.id)},_addBackItem:function(s){var t;if(s.parentItemId){t=this._getSubmenuForItem(s.parentItemId);t&&t.addBackItem(s)}},_addItem:function(A){var w=this,z,t,u,s=this.elements,v=this.options.scrollMode,x=this.options.renderTo;function y(J,H,C){var B=w.addMenu(H,0,null,C),F,I;if(!v){B.inject(J.elements.container)}else{var D=B.elements.container;var G="menu-"+J.id;s[G]=D;D.addClassName(G);var E=w._getMenuFromItem(J.id);E.childMenus.push(B);if(s.container.isInjected()){x=x||document.body;D.inject(x)}}J.elements.container.addClassName(b);F=g.createElement("span",{"class":"divider"});I=g.createElement("div",{"class":"next-icon"});I.inject(J.elements.container);F.inject(I);g.createElement("span",{"class":"fonticon fonticon-right-open"}).inject(I);B.parentItem=J;if(v){w.updatePosition(null,false,B)}else{w.updatePosition()}return B}if(A.parentItemId){t=w._getSubmenuForItem(A.parentItemId);if(t){if(A.items){if(A.text||A.name){z=t._addItem(A);z&&this.items.push(z);z&&y(z,A.items,A.multiSelect)}else{A.items.forEach(function(B){w.items.push(t._addItem(B))})}}else{this.items.push(t._addItem(A))}}else{u=this.getItem(A.parentItemId);if(!u){return}if(A.items&&(A.text||A.name)){t=y(u,[A],A.multiSelect)}else{y(u,A.items||[A],A.multiSelect)}}}else{t=this.menus[0];if(A.items){u=t._addItem(A);u&&this.items.push(u);u&&y(u,A.items,A.multiSelect)}else{this.items.push(t._addItem(A))}}},removeItem:function(t){var s=this;c.splat(t).forEach(function(u){s._removeItem(u)});return this},_removeItem:function(x){var v=this,u=this.getItem(x),w,t,s=v.options.scrollMode;if(!u){return}t=this._getMenuFromItem(u.id);w=this._getMenuFromParentItem(u.id);if(w){this.items=this.items.filter(function(z){var y=v._getMenuFromItem(z.id);if(y&&((!y.parentItem)||y.parentItem&&y.parentItem.id!==x)){return true}else{w.removeItem(z);return false}});this.menus.splice(this.menus.indexOf(w),1);if(s){t&&t.childMenus.splice(t.childMenus.indexOf(w));delete v.elements["menu-"+u.id]}w.destroy()}t&&t.removeItem(x);this.items.splice(this.items.indexOf(u),1)},updateItem:function(s){var t=this;c.splat(s).forEach(function(u){t._updateItem(u)});return this},_updateItem:function(s){var u,t;t=this.getItem(s.id);if(t){u=this._getMenuFromItem(t.id);s.id=t.id;u&&u.updateItem(s)}},enableItem:function(t){var s=this.getItem(t);s&&s.elements.container.removeClassName("disabled");return this},disableItem:function(t){var s=this.getItem(t);s&&s.elements.container.addClassName("disabled");return this},getItem:function(w){var u,s,t,v=false;for(u=0,s=this.items.length;u<s;u++){v=this.items[u];if(w&&w.nodeType){t=w.hasClassName(l)?w:w.getParent();if(v.id===t.id){break}}else{if(u===w||v.id===w||v.name===w){break}}v=false}return v},setDropDirection:function(A,C,y,x){var D=this.options,w=D.scrollMode,t=2;if(!w){return this._parent(A,C,y,x)}var s=this.elements.container;var v=(D.position.indexOf("top")>-1);var u=A+C>x.viewportHeight+x.scrollTop;var B=(A-C-y.offsetHeight>x.scrollTop);var z=(A-x.scrollTop-y.offsetHeight-t>x.viewportHeight+x.scrollTop-A);if((!v&&u&&z)||(v&&(!B||z))){A=A-C-y.offsetHeight-t;v=true}v?s.addClassName("dropup"):s.removeClassName("dropup");return A},updatePosition:(function(){var x,z,v,y;function t(A){A.removeScroller();A.setHeight(NaN);A.preserveWidth(true)}function u(D,I){var M="right",L="bottom",N=L+"-"+M,J,C=D.getContent(),E=D.parentItem.elements.container,H=x._getMenuFromItem(E.id),A=H.getContent(),F=A.getSize(),K,B,G={};x.options.responsiveMode&&x.setNonResponsiveMode(D);if(D._position){C.removeClassName(D._position)}C.addClassName(N);if(v){t(D);K=H._offsets||x._position.offsets||{x:0,y:0};C.addClassName("js-visible")}else{K=A.getPosition()}B=C.getSize();if(I){G=K}else{if(K.x+F.width+B.width>z.viewportWidth||(D.position&&D.position.indexOf("left")>-1)&&K.x-B.width>0){M="left";J=K.x-B.width}else{J=K.x+F.width}}if(x.options.responsiveMode&&((K.x+F.width+B.width>z.viewportWidth&&K.x-B.width<0)||I)){G=K;x.setResponsiveMode(D,I);if(!I){v&&C.removeClassName("js-visible");return true}}else{D._position=L+"-"+M;if(v){G.x=J;B=x._enforceMaxItemsBeforeScroll(D)}s(D,G,B,K,F,H,A,E)}if(v){D.getContent().setStyle("left",G.x+"px");D.getContent().setStyle("top",G.y+"px");D._offsets=G;C.removeClassName("js-visible")}if(N!==D._position){C.removeClassName(N);C.addClassName(D._position)}}function s(E,H,D,M,G,I,B,F){var K=0,J=0,C=0,A=0,N=0,L,O=true;if(v&&F&&I){N=y?F.getPosition(y).y:F.getOffsets().y;K=N-M.y;J=K+F.offsetHeight;C=parseInt(B.getStyle("marginTop"));A=parseInt(B.getStyle("borderTopWidth"));if(K<0){K=0}if(J>G.height){J=G.height}}O=!v||(M.y+J-z.scrollTop>z.viewportHeight+z.scrollTop-J-M.y);if((M.y+K+D.height-C>z.viewportHeight+z.scrollTop&&O)||(E.position&&E.position.indexOf("top")>-1)&&M.y+J-D.height>z.scrollTop){E._position=E._position.replace("bottom","top");L=M.y+J-D.height}else{L=M.y+K-C-A}if(v){H.y=L;w(E,D,H,C)}}function w(C,B,E,A){var H=(C!==x._mainMenu),D=x.options.contextual,G=x.options.target,F=x.options.altPosition,I;I=(!H?x.elements.container.hasClassName("dropup"):(C._position.indexOf("top")>-1));if(I){if(E.y<z.scrollTop){E.y=z.scrollTop-A;if((H||D||(!H&&F))&&E.y+B.height>z.viewportHeight+z.scrollTop){C.preserveWidth();C.setHeight(z.viewportHeight)}if(!H&&!D&&G&&!F){if(E.y+B.height>x._position.initialOffsets.y-G.offsetHeight){var J=x._position.initialOffsets.y-G.offsetHeight-E.y;C.preserveWidth();C.setHeight(J)}}}}else{if(E.y+B.height>z.viewportHeight+z.scrollTop){if(H||D){E.y=z.viewportHeight-B.height-A-z.scrollTop;if(E.y<z.scrollTop){E.y=z.scrollTop-A;if(B.height>z.viewportHeight){C.preserveWidth();C.setHeight(z.viewportHeight)}}}else{C.preserveWidth();C.setHeight(z.scrollTop+z.viewportHeight-E.y-A)}}}}return function(B,D,C){x=this;v=x.options.scrollMode;y=x.options.renderTo;var E,G=D||x.options.forceResponsive;if(!x.isVisible){return}z=x.getDisplayContext();if(!C){E=x.menus;if(!G&&v){t(x._mainMenu);var J=x._enforceMaxItemsBeforeScroll(x._mainMenu);x._parent(B,D);var I=x._position.offsets.y;w(x._mainMenu,J,x._position.offsets,2);if(I!==x._position.offsets.y){x.elements.container.setStyles({top:x._position.offsets.y})}}else{x._parent(B,D)}}else{if(G){return}E=C.childMenus;u(C,D)}if(E.length===0){return}if(!v){x.getContent().addClassName("js-visible")}for(var H=1,F=E.length;H<F;H++){var A=u(E[H],G);if(A){break}}if(!v){x.getContent().removeClassName("js-visible")}}}()),setNonResponsiveMode:function(u){var t=this.options.scrollMode;var s=u.parentItem&&this._getMenuFromItem(u.parentItem.id);u.removeBackItem();s&&s.getContent().removeClassName("responsive-menu");if(!t&&u.parentItem&&!u.parentItem.elements.container.getElement(".dropdown-menu")){s.elements.container.removeChild(u.elements.container);u.inject(u.parentItem.elements.container)}},setResponsiveMode:function(v,u){var t=this.options.scrollMode;var s=this._getMenuFromItem(v.parentItem.id);v._position="dropdown-menu-responsive-wrap responsive-menu";if(v._position==="dropdown-menu-responsive-wrap responsive-menu"){!s.getContent().hasClassName("responsive-menu")&&s.getContent().addClassName("responsive-menu")}if(!u){this.updatePosition(null,true)}else{s=this._getMenuFromItem(v.parentItem.id);if(!v.backItem){this._addBackItem({text:v.parentItem.text,fonticon:"left-open",className:d,index:1,parentItemId:v.parentItem.id})}if(!t&&v.parentItem.elements.container.getElement(".dropdown-menu")){v.parentItem.elements.container.removeChild(v.elements.container);v.inject(s.elements.container)}}},show:function(t,u){var s;if(this.items.length){s=this._parent(t,u);this.activeMenu=this.menus[0];this.activeMenu.keyboardIndex=-1;this.activeMenu.focusIt();this.usingKeyboard=false;return s}},hide:function(s){this._hideSubmenus();return this._parent(s)},_getMenu:function(v){var t,s,u=false;for(t=0,s=this.menus.length;t<s;t++){u=this.menus[t];if(v&&v.nodeType&&u.elements.container===v){break}else{if(t===v||u.id===v||u.name===v){break}}u=false}return u},_getMenuFromItem:function(s){return this.menus.filter(function(t){return t.getItem(s)})[0]},_getMenuFromBackItem:function(s){return this.menus.filter(function(t){return(t.backItem&&t.backItem.id===s)})[0]},_getMenuFromParentItem:function(s){return this.menus.filter(function(t){return(t.parentItem&&(t.parentItem.id===s||t.parentItem.name===s||t.parentItem.value===s))})[0]},_hideSubmenus:(function(){var t,w,s,u;function v(x){if(!x){return}x.items.forEach(function(y){y=y.elements&&y.elements.container;if(y&&y.hasClassName(b)){w=t._getMenuFromParentItem(y.id);y.removeClassName("js-selected");w&&w._updateKeyboardIndex("reset");w&&w.hide();v(w)}})}return function(z){t=this;if(!this.menus){return}if(this.menus.length<=1){this.menus[0].items.forEach(function(A){A=A.elements&&A.elements.container;A.removeClassName("js-selected")});return}if(z){v(t._getMenuFromItem(z))}else{this.menus[0].elements.container.removeClassName(a);for(var y=1,x=this.menus.length;y<x;y++){w=this.menus[y];s=w.parentItem&&this.getItem(w.parentItem.id);s&&s.elements.container.removeClassName("js-selected");u=w.backItem;if(u&&u.elements.container.hasClassName(d)){this._hideResponsiveMenu(w,this._getMenuFromItem(w.parentItem.id))}else{w.hide()}}}}}()),_handleItemSelection:function(w,y){var v=this,x,t,s=v.options.scrollMode;this.timeoutId&&clearTimeout(this.timeoutId);if(w.hasClassName(b)||w.hasClassName(k)){x=this._getMenuFromParentItem(w.id);if(v.isVisible&&x&&!x.isVisible){var u=false;if(x.elements.container.hasClassName("responsive-menu")){u=true}this._hideSubmenus(w.id);x=this._getMenuFromParentItem(w.id);!y&&w.addClassName("js-selected");t=this._getMenuFromItem(x.parentItem.id);if(s){v.updatePosition(null,u,x)}x&&x.show();if(u){t.elements.container.addClassName(a)}this.activeMenu=x}}else{if(w.hasClassName(d)){x=this._getMenuFromBackItem(w.id);t=this._getMenuFromItem(x.parentItem.id);this._hideResponsiveMenu(x,t)}else{if(w.hasClassName(l)){this._hideSubmenus(w.id)}}}},_hideResponsiveMenu:function(t,s){t&&t.hide();s&&s.elements.container.removeClassName(a);this.activeMenu=s},_handleItemClick:function(s,B){var x=r.getElement(s),v=g.Utils.Client.Features.touchEvents,z=false,w=x.classList.contains("next-icon")||x.parentElement.classList.contains("next-icon"),y,u,t,A;if(!B){B=this.template.getItem(x);if(!B){return}y=B.classList.contains(d);if(y){t=this._getMenuFromBackItem(B.id?B.id:B);B=t.backItem}else{B=this.getItem(B.id?B.id:B)}}if(B&&!j(B.elements.container.className)){if(!t){t=this._getMenuFromParentItem(B.id)||this._getMenuFromItem(B.id)}A=t&&t._position&&t._position.contains("dropdown-menu-responsive-wrap");u=t&&t.getContent().hasClassName("responsive-menu");if(B.selectable){if(u&&(!x.classList.contains("next-icon")&&!x.parentElement.classList.contains("next-icon"))||!u){B.toggleSelection()}}if(v||y||A){if((y&&x.classList.contains("fonticon"))||(u&&w)||(!y&&!u)){this._handleItemSelection(B.elements.container,w)}z=B.elements.container.hasClassName(b)&&!u||w||y}this.dispatchEvent("onClick",[s,B,z],this);if(g.is(B.handler,"function")){B.handler.call(this,s)}}},_handleEvents:function(){var t=this.options,s=this.options.scrollMode;if(!s){this.events.container={mouseout:this._onMouseout.bind(this),mouseover:this._onMouseover.bind(this),mouseleave:this.dispatchEvent.bind(this,"onMouseLeave"),click:this._onClick.bind(this),};if(t.kb){this.events.container.keydown=this._onKeyDown.bind(this)}this.elements.container.addEvents(this.events.container)}if(t.contextual){this.events.target={mousedown:function(u){var w=r.getElement(u),v=g.Event.whichButton(u)===2;if(!w.isInjected(this.elements.container)&&w!==this.elements.container){if(v&&this.isVisible){this.updatePosition(u)}}}.bind(this),contextmenu:function(u){this.show(true,u);r.stop(u)}.bind(this)};o(this.events.target,t.target,true)}else{if(t.bound){this.events.target={click:this.toggle.bind(this)};o(this.events.target,t.target,true)}}this.events.window={resize:f(this.resize,100).bind(this)};window.addEventListener("resize",this.events.window.resize)},_onClick:function(s){this._handleItemClick(s)},_onMouseover:function(u){var v=r.getElement(u),w=this._getMenuFromParentItem(v.id),s,t;if(!v.hasClassName(d)&&!(w&&w._position&&w._position.contains("dropdown-menu-responsive-wrap"))){this.timeoutId&&clearTimeout(this.timeoutId);!this.usingKeyboard&&this._handleItemSelection(v)}if(this.options.responsiveMode){t=v.parentElement.classList.contains("next-icon")?v.parentElement.parentElement:v.parentElement;w=this._getMenuFromItem(t.id);t=w&&w.getItem(t.id);s=w&&w.getContent().hasClassName("responsive-menu");if(t){if(s&&(v.classList.contains("next-icon")||v.parentElement.classList.contains("next-icon"))&&!t.elements.container.classList.contains("selected")){t.elements.container.addClassName("js-not-selectable");t.elements.container.removeClassName("js-selected")}}}},_onMouseout:function(u){var v=r.getElement(u),w=v&&this._getMenuFromParentItem(v.id),t,s;if(!this.usingKeyboard&&!v.hasClassName(d)&&!(w&&w._position&&w._position.contains("dropdown-menu-responsive-wrap"))&&!(this.elements.container.classList.contains("dropdown-menu-hidden"))){clearTimeout(this.timeoutId);this.timeoutId=setTimeout(this._hideSubmenus.bind(this),500)}if(this.options.responsiveMode){t=v.parentElement.classList.contains("next-icon")?v.parentElement.parentElement:v.parentElement;w=this._getMenuFromItem(t.id);t=w&&w.getItem(t.id);s=w&&w.getContent().hasClassName("responsive-menu");if(t){if(s&&(v.classList.contains("next-icon")||v.parentElement.classList.contains("next-icon"))){t.elements.container.removeClassName("js-not-selectable")}}}},_onKeyDown:function(y){var z,w,v,u,x=this;x.usingKeyboard=true;function s(){x.activeMenu.hide();u=x.activeMenu.getContent().hasClassName("dropdown-menu-responsive-wrap");w=x.activeMenu.parentItem&&x._getMenuFromItem(x.activeMenu.parentItem.id);if(w){if(u){x._hideResponsiveMenu(x.activeMenu,w)}x.activeMenu._updateKeyboardIndex();x.activeMenu=w;x.activeMenu.focusIt()}}function t(){z=x._getActiveItem();if(z){z=z.elements.container;x._handleItemSelection(z)}x.activeMenu._updateKeyboardIndex()}switch(y.which){case 13:z=x._getActiveItem();if(z){x._handleItemClick(y,x._getActiveItem())}if(x.options.closeOnClick){x.hide();x.options.target.focus()}g.Event.preventDefault(y);break;case 27:x.hide();x.options.target.focus();g.Event.preventDefault(y);break;case 37:v=x.activeMenu.elements.container;z=x._getActiveItem();if(v.hasClassName("bottom-left")||v.hasClassName("top-left")){z&&z.elements.container.hasClassName("item-submenu")&&t()}else{s()}g.Event.preventDefault(y);break;case 38:x.activeMenu._updateKeyboardIndex("up");g.Event.preventDefault(y);break;case 39:v=x.activeMenu.elements.container;z=x._getActiveItem();if(v.hasClassName("bottom-left")||v.hasClassName("top-left")){s()}else{z&&z.elements.container.hasClassName("item-submenu")&&t()}g.Event.preventDefault(y);break;case 40:x.activeMenu._updateKeyboardIndex("down");g.Event.preventDefault(y);break;default:g.Event.preventDefault(y);break}},_getActiveItem:function(){var s=this.activeMenu.keyboardIndex;if(this.activeMenu&&s>=0){return this.activeMenu.getItem(s)}else{return false}},getSelectedItems:function(){var s=[];if(this.items){s=this.items.filter(function(t){return t.selected})}return s},isSelected:function(t){var s=this.getItem(t);return s&&s.selected},toggleSelection:function(s){s&&s.selectable&&s.toggleSelection()},resize:function(){if(this.isVisible){this.updatePosition()}},destroy:function(){if(this.menus!==null){window.removeEventListener("resize",this.events.window.resize);for(var t=0,s=this.menus.length;t<s;t++){this.menus[t].destroy(true)}this._parent();delete this.menus;delete this.items;delete this._mainMenu;delete this.template}}};return q.extend(m)});define("DS/UIKIT/Native/Dropdown",["UWA/Event","UWA/Utils","DS/UIKIT/DropdownMenu","DS/CefCommunication/CefCommunication"],function(a,e,b,d){var c=["command","checkbox","radio","separator"],h=[];function g(i){return function(j){if(!j.menuId){return}d.dispatchEvent(i+"-"+j.menuId,j)}}if(!d.hasEvent("exitMenu")){d.addNativeEventListener("exitMenu",g("exitMenu"));d.addNativeEventListener("commandFacet",g("commandFacet"))}var f={id:"",defaultOptions:{bound:true,scrollMode:false,},init:function(i){i||(i={});this.id=i.id||"mnu-"+e.getUUID().substr(0,6);this._parent(i);this.options.contextual&&h.push(this)},show:function(i,j){if(this.options.contextual&&h.length>0){h.forEach(function(k){k.hide()})}this._parent(i,j);if(d.isAvailable()){this.elements.container.setStyle("display","none");d.dispatchEventToNative("displayMenu",this.getNativeModel())}},hide:function(i){this._parent(i);if(d.isAvailable()){this.elements.container.setStyle("display","")}},_handleEvents:function(){this._parent();function i(k){var l=a.getElement(k),j;if(!l&&k.menuId&&k.id){l=k.id}if(!l){return}j=this.getItem(l);if(j){this.dispatchEvent("onClick",[k,j],this);if(d.isAvailable()&&j.nativeHandler){j.nativeHandler.call(this,k)}else{if(typeof j.handler==="function"){j.handler.call(this,k)}}this.hide()}}this.elements.container.removeEvent("click",this.events.container.click);this.elements.container.addEvent("click",i.bind(this));if(d.isAvailable()){d.addNativeEventListener("exitMenu-"+this.id,this.hide.bind(this));d.addNativeEventListener("commandFacet-"+this.id,i.bind(this))}},getNativeModel:function(){if(!this.menus.length){return}var j={menuId:this.id,children:[]};function i(k,l){var m,n;k.forEach(function(o){m={};m.id=o.id;m.type=c.indexOf(o.type)!==-1?o.type:c[0];m.label=o.text;o.data&&(m.catcommand=o.data);o.icon&&(m.icon=o.icon);o.disabled!=null&&(m.disabled=o.disabled);o.title&&(m.title=o.title);if(o.items&&m.type==="command"){n=this._getMenuFromParentItem(o.id);m.children=[];i.call(this,n.items,m.children)}l.push(m)}.bind(this))}i.call(this,this.menus[0].items,j.children);return j},destroy:function(){d.removeNativeEventListener("exitMenu-"+this.id);d.removeNativeEventListener("commandFacet-"+this.id);if(this.options.contextual&&h.length>-1){this.options.contextual&&h.splice(h.indexOf(this),1)}this._parent()}};return b.extend(f)});define("DS/UIKIT/Iconbar",["UWA/Core","UWA/Event","UWA/Utils","UWA/Controls/Abstract","DS/UIKIT/Menu","DS/UIKIT/Tooltip","DS/UIKIT/DropdownMenu"],function(e,n,h,f,g,j,a){var d=e.Utils.Client.Features.touchEvents;function m(p,r,o){var q;return function(){var v=this,u=arguments,t,s=function(){q=null;if(!o){p.apply(v,u)}};t=o&&!q;clearTimeout(q);q=setTimeout(s,r);if(t){p.apply(v,u)}}}var l=(function(){var o=/^(divider)$/;return function(q){var r,p;if(!q){return false}r=q.split(" ");for(p=0;p<r.length;p++){if(o.test(r[p])){return true}}return false}}());function k(o,q,p){p=p||0;if(!Array.isArray(o)||o.length===0){return o}o=o.map(function(r){r.className=(q+" "+(r.className?r.className:"")).trim();if(r.items&&p<20){r.items=k(r.items,q,++p)}return r});return o}var c=g.extend({name:"iconbar-items"});var i=a.extend({show:function(){document.body.style.overflow="hidden";this._parent();document.body.style.overflow="auto"}});var b=f.extend({name:"iconbar",menu:null,TYPE_ICONDROPDOWN:"icondropdown",TYPE_DROPDOWN:"dropdown",TYPE_DROPDOWNMENU:"dropdownmenu",overflowMenu:null,overflowMenuTrigger:null,init:function(o){var p=this;this._parent(o);this.buildSkeleton();this.handleEvents();this.show();if(window.MutationObserver){this._injectionObserver=new MutationObserver(function(q){var r=q.some(function(s){return p.isInjected()||Array.prototype.indexOf.call(s.addedNodes,p.elements.container)!==-1});r&&p.show()});this._injectionObserver.observe(document.body,{childList:true,subtree:true})}},buildSkeleton:function(){var p=this.elements,o=this.options;if(p.container){return}this.menu=new c({});this.addItem(o.items);p.container=this.menu.elements.container;p.container.className=this.getClassNames();if(o.renderTo&&o.renderTo.nodeType===1){p.container.inject(o.renderTo);delete o.renderTo}},buildOverflowMenu:function(){var p=[],q,o;if(!this.overflowMenuTrigger){this.overflowMenuTrigger=e.createElement("li",{"class":this.name+"-overflow-menu-trigger item",html:{tag:"span","class":"fonticon fonticon-menu-dot"}})}this.overflowMenu&&this.overflowMenu.destroy();this.overflowMenu=null;this.menu.items.forEach(function(r){if(r.content&&r.content.type===this.TYPE_DROPDOWN){return}o=true;q={id:r.id,className:(r.id+" "+(r.className?r.className:"")).trim(),disabled:r.disabled,fonticon:r.fonticon,text:r.text,handler:r.handler,name:r.name};if(r.content&&r.content.options.items&&r.content.type!==this.TYPE_ICONDROPDOWN){q.items=k(r.content.options.items,r.id,0)}else{if(r.content&&r.content.type===this.TYPE_ICONDROPDOWN){o=false;r.content.options.items&&r.content.options.items.forEach(function(s){p.push({id:s.id,className:(r.id+" "+(s.className?s.className:"")).trim(),fonticon:s.fonticon,icon:s.icon,handler:s.handler,text:s.description})})}}o&&p.push(q)},this);this.overflowMenu=new i({items:p,target:this.overflowMenuTrigger})},getItem:function(s){var q,o,p,r=false;for(q=0,o=this.menu.items.length;q<o;q++){r=this.menu.items[q];if(s&&s.nodeType){p=s.hasClassName("item")?s:s.getParent();if(r.id===p.id){break}}else{if(q===s||r.id===s||r.name===s){break}}r=false}return r},handleEvents:function(){this.events={container:{click:function(o){var q=n.getElement(o),p=this.getItem(q);if(p){if(p.content){window.requestAnimationFrame?window.requestAnimationFrame(this.displayContent.bind(this,p)):this.displayContent(p)}if(p.tooltip&&p.tooltip.isVisible&&!d){p.tooltip.hide()}if(!p.disabled){this.dispatchEvent("onClick",[o,p],this);if(typeof p.handler==="function"){p.handler.call(this,o,p)}}}}.bind(this)}};this.elements.container.addEvents(this.events.container);this.events.window={resize:m(this.resize,100).bind(this)};window.addEventListener("resize",this.events.window.resize)},addItem:function(o){h.splat(o).forEach(function(p){this._addItem(p)},this);this.buildOverflowMenu();return this},_addItem:function(p){var q=this.menu._addItem(p);q.content=q.innerComponent||q.content;if(q.content&&q.content.type===this.TYPE_ICONDROPDOWN){var o=q.content.options.items;o.forEach(function(r){r.id=r.id||"itm-"+h.getUUID().substr(0,6)})}if(!l(p.className)&&q.text){q.tooltip=new j({target:q.elements.container,body:q.text,position:q.tooltipPosition||this.options.tooltipsPosition||"top",trigger:q.tooltipTrigger||this.options.tooltipsTrigger||"hover focus"});q.elements.container.getElement(".item-text").remove()}},enableItem:function(o){return this._setActiveState(o,true)},disableItem:function(o){return this._setActiveState(o,false)},_setActiveState:function(s,p){var q=this.menu.getItem(s);if(q){var r=p?"enable":"disable";var o=r+"Item";this.menu[o](s);if(q.content){if(q.content.created&&q.content.component){q.content.component[r]()}if(this.overflowMenu){if(q.content.type===this.TYPE_ICONDROPDOWN&&q.content.options&&q.content.options.items){q.content.options.items.forEach(function(t){this.overflowMenu[o](t.id)},this)}else{if(q.content.type===this.TYPE_DROPDOWNMENU){this.overflowMenu[o](s)}}}}else{this.overflowMenu&&this.overflowMenu[o](s)}}return this},getOverflowingItems:function(){var o=this._getBoundingClientRect();return this.menu.items.filter(function(q){var p=q.elements.container.getBoundingClientRect();return(p.top+p.height>o.bottom)||(p.left+p.width>o.right)})},isElementOverflowing:function(p){var o=this._getBoundingClientRect();var q=p.getBoundingClientRect();return(q.top+q.height>o.bottom)||(q.left+q.width>o.right)},_getBoundingClientRect:function(){var o=this.elements.container.getBoundingClientRect();if(h.Client.Engine.firefox){return e.extend(o,{left:Math.round(o.left),right:Math.round(o.right),width:Math.round(o.width),x:Math.round(o.x)})}return o},isInjected:function(){if(!this.elements){return}if(!this.elements.container){return}return this.elements.container.isInjected()},resize:(function(){function o(p){var q;this.overflowMenu.items.forEach(function(r){q=p.some(function(s){if(!r.className){return false}return r.className&&r.className.indexOf(s)!==-1});q?r.elements.container.removeClassName("hidden"):r.elements.container.addClassName("hidden")})}return function(){var p,q;this.overflowMenuTrigger&&this.overflowMenuTrigger.isInjected()&&this.overflowMenuTrigger.remove();if(this.overflowMenu.isVisible){this.overflowMenu.hide()}p=this.getOverflowingItems();if(this.elements.container&&!p){return}q=p.map(function(r){return r.id});o.call(this,q);if(p.length){this.menu.elements.wrapper.insertBefore(this.overflowMenuTrigger,p[0].elements.container);while(this.isElementOverflowing(this.overflowMenuTrigger)&&this.overflowMenuTrigger.previousSibling){this.menu.elements.wrapper.insertBefore(this.overflowMenuTrigger,this.overflowMenuTrigger.previousSibling);p.push(this.overflowMenuTrigger.nextSibling);this.overflowMenuTrigger.nextSibling.id&&q.push(this.overflowMenuTrigger.nextSibling.id);o.call(this,q)}}}}()),displayContent:function(p){var o=e.clone(p.content.options);o.target=p.elements.container;if(o.target.hasClassName("disabled")){return}if(!p.content.created){if(p.content.type===this.TYPE_DROPDOWN){require(["DS/UIKIT/Dropdown"],function(q){p.content.component=new q(o).show()})}else{if(p.content.type===this.TYPE_ICONDROPDOWN){require(["DS/UIKIT/IconDropdown"],function(q){p.content.component=new q(o).show()})}else{if(p.content.type===this.TYPE_DROPDOWNMENU){p.content.component=new a(o).show()}else{return}}}p.content.created=true}else{p.content.component&&p.content.component.show()}},select:function(){var o=arguments,r,q,s,p;if(o[0]===undefined||o[0]===null){return}q=(o[1]===undefined)?true:o[1];q&&Array.prototype.slice.call(this.elements.container.querySelectorAll(".item-active")).forEach(function(t){t.removeClassName&&t.removeClassName("item-active")});q&&this.overflowMenu.getSelectedItems().forEach(function(t){this.overflowMenu.menus[0].toggleSelection(t);t.elements.container.removeClassName("selectable")},this);r=this.getItem(o[0]);if(!r||r.elements.container.hasClassName("divider")){return}r.elements.container[q?"addClassName":"removeClassName"]("item-active");s=r.elements.container.id;p=this.overflowMenu.items.filter(function(t){return t.elements.container.hasClassName(s)});if(p.length===1){this.overflowMenu.menus[0].toggleSelection(p[0]);p[0].elements.container.addClassName("selectable")}},show:function(){if(!this.isInjected()){return}this._injectionObserver&&this._injectionObserver.disconnect();this._injectionObserver=null;this._parent();if(window.requestAnimationFrame){window.requestAnimationFrame(this.resize.bind(this))}else{this.resize()}},destroy:function(){window.removeEventListener("resize",this.events.window.resize);this.overflowMenu&&this.overflowMenu.destroy();this.overflowMenuTrigger&&this.overflowMenuTrigger.destroy();this.elements.container.removeEvents(this.events.container);this.menu.items.forEach(function(o){o.tooltip&&o.tooltip.destroy()});this._parent()}});return b});define("DS/UIKIT/IconDropdown",["UWA/Core","UWA/Event","DS/UIKIT/DropdownMenu","DS/UIKIT/Tooltip","DS/UIKIT/Menu"],function(d,j,a,i,g){var f=["parentItemId","position","items","title","text","selectable"];var c=(function(){var k=/^(header|divider|disabled)$/;return function(m){var n,l=0;if(!m){return false}n=m.split(" ");for(;l<n.length;l++){if(k.test(n[l])){return true}}return false}}());function e(n,m,l,k){if(m.addEventListener){m.addEventListener(n,l,k)}else{if(m.attachEvent){m.attachEvent("on"+n,l,k)}}}function b(l,m,k){Object.keys(l).forEach(function(n){e(n,m,l[n],k)})}var h={name:"icon-dropdown",_activeItem:null,defaultOptions:{scrollMode:false},init:function(k){this._parent(k)},buildSkeleton:function(){var l=this.elements,k=this.options,m;if(l.container){return}m=new g();m.position=k.position||"bottom right";this.menus.push(m);this.addItem(k.items);l.container=m.elements.wrapper;l.container.className=this.name;this.handleEvents()},handleEvents:function(){var l=this,k=this.options,m=this.elements;if(k.contextual){this.events.target={mousedown:function(n){var p=j.getElement(n),o=d.Event.whichButton(n)===2;if(!p.isInjected(this.elements.container)&&p!==this.elements.container&&o&&this.isVisible){this.updatePosition(n)}}.bind(this),contextmenu:function(n){this.show(false,n);j.stop(n)}.bind(this)};b(this.events.target,k.target,true)}else{if(k.bound){this.events.target={click:this.toggle.bind(this)};b(this.events.target,k.target,true)}}this.events.container={click:function(o){var p=j.getElement(o),n=l.getItem(p);if(n&&!c(n.elements.container.className)){if(n.tooltip&&n.tooltip.isVisible){n.tooltip.hide()}l._updateSelected(n);l.dispatchEvent("onClick",[o,n],l);if(typeof n.handler==="function"){n.handler.call(l,o,n)}}}};m.container.addEvents(this.events.container)},_addItem:function(k){var n=this,q=this.menus[0],m,p=d.clone(k),o,l;f.concat("selected").forEach(function(r){delete p[r]});m=q._addItem(p);o=m.elements.container.getElement(".item-text");o&&o.destroy();if(k.description){m.tooltip=new i({target:m.elements.container,body:m.description,position:"bottom"})}if(k.icon&&!k.fonticon){m.elements.iconActive=d.createElement("img",{src:k.iconActive?k.iconActive:k.icon,"class":"item-icon hidden"});m.elements.iconActive.inject(m.elements.container);l={mouseover:function(){if(!m.elements.container.hasClassName("selected")){n._toggleIcon(m,true)}},mouseleave:function(){if(!m.elements.container.hasClassName("selected")){n._toggleIcon(m)}}}}m.elements.container.addEvents(l);if(k.selected){this._updateSelected(m)}this.items.push(m)},_updateItem:function(k){var m=this.menus[0],l;l=this.getItem(k.id);if(l){f.concat("selected").forEach(function(n){delete k[n]});k.id=l.id;m&&m.updateItem(k);if(k.iconActive){l.iconActive=k.iconActive;l.elements.iconActive.setAttribute("src",k.iconActive)}if(k.description){if(l.tooltip){l.tooltip.setBody(k.description)}else{l.tooltip=new i({target:l.elements.container,body:l.description,position:"bottom"})}}}},_toggleIcon:function(l,k){if(!l||!l.elements.iconActive){return}if(k){l.elements.iconActive.removeClassName("hidden");l.elements.icon.addClassName("hidden")}else{l.elements.icon.removeClassName("hidden");l.elements.iconActive.addClassName("hidden")}},_updateSelected:function(k){if(this._activeItem===k){return}this._activeItem&&this._activeItem.elements.container.removeClassName("selected");this._toggleIcon(this._activeItem);this._activeItem=k;this._activeItem.elements.container.addClassName("selected")},getActiveItem:function(){return this._activeItem},setActiveItem:function(l){var k=this.getItem(l);if(k){this._updateSelected(k)}},updatePosition:function(n){this._parent(n);var k=this.options,o=this.elements,q,l,m,p;if(k.target&&!k.altPosition){q=k.target;l=q.offsetWidth;m=o.container.offsetWidth;p=this._position.offsets.x;o.container.setStyles({left:p+(l/2)-(m/2)+k.offset.x})}}};return a.extend(h)});define("DS/UIKIT/Input/Button",["UWA/Core","UWA/Event","DS/UIKIT/Input","DS/UIKIT/DropdownMenu","i18n!DS/UIKIT/assets/nls/UIKIT"],function(g,c,f,d,e){function a(m){var k,h,j;if(!m){return}m=m.split(" ");for(k=0,h=m.length;k<h;k++){j=m[k].match(/large-icon|xsmall|small|large|default|primary|info|warning|error|success|link|block$/);if(j&&!j[1]){if(j[0]==="small"){m[k]="btn-sm"}else{if(j[0]==="large-icon"){m[k]="large-icon-btn"}else{if(j[0]==="large"){m[k]="btn-lg"}else{if(j[0]==="xsmall"){m[k]="btn-xs"}else{m[k]="btn-"+m[k]}}}}}}return m.join(" ")}var b={name:"btn",defaultOptions:{className:"btn-default",dropdownCaret:true,active:false},dropdown:null,init:function(h){h=h||{};if(h.className){h.className=a(h.className)}this._parent(h);this.options.active&&this.setActive(this.options.active);this.options.icon&&this.setIcon(this.options.icon);if(!h.value||h.value===""){this.elements.container.addClassName("btn-without-label")}},buildInput:function(){return g.createElement("button",{type:"button"})},onPostInject:function(){this.options.dropdown&&this.setDropdown(this.options.dropdown)},setDropdown:function(j,n){var k=this,h;function i(o){return function(){k.dispatchEvent.call(k,o,arguments)}}function m(){k.setActive(k.dropdown.isVisible);k.dispatchEvent.call(k,"onDropdownClick",arguments)}function l(){var p=c.getElement(arguments[0]),o=k.getContent();if(p!==o&&p.getParent()!==o){k.setActive(k.dropdown.isVisible)}k.dispatchEvent.call(k,"onDropdownClickOutside",arguments)}if(!this.events.dropdown){this.events.dropdown={onShow:i("onDropdownShow"),onHide:i("onDropdownHide"),onClick:m,onClickOutside:l,onMouseLeave:i("onDropdownMouseLeave")};this.events.dropdownButton={click:function(){k.setActive(k.dropdown.isVisible)}}}h={events:this.events.dropdown,target:this.getContent()};if(this.dropdown){this.dropdown.destroy()}if(n||(!g.is(n)&&this.options.dropdownCaret)){this.elements.caret=g.createElement("span",{"class":"caret"}).inject(this.getContent());this.getContent().toggleClassName("dropdown-toggle",!this.getValue())}this.dropdown=new d(g.merge(j,h));this.getContent().addEvents(this.events.dropdownButton);return this},setIcon:function(k){var m=this.elements;k=k.split(" ");for(var j=0,h=k.length;j<h;j++){if(k[j]==="left"||k[j]==="right"){continue}if(!k[j].match("fonticon-")&&k[j]!=="caret"){k[j]="fonticon-"+k[j]}}k=k.join(" ");if(k==="left"||k==="left left"){k="fonticon-left"}else{if(k==="left right"||k==="right left"){k="fonticon-left right"}else{if(k==="right"){k="fonticon-right"}else{if(k==="right right"){k="fonticon-right right"}}}}if(!m.icon){m.icon=g.createElement("span",{"class":"fonticon "+k}).inject(m.input,"top")}else{m.icon.className="fonticon "+k}m.icon&&this.elements.container.addClassName("btn-with-icon");return this},removeIcon:function(){if(this.elements.icon){this.elements.icon.destroy()}this.elements.container.removeClassName("btn-with-icon");return this},setValue:function(i){var h=this.elements.input,j;if(this.elements.icon||this.elements.caret){j=this.getContent().firstChild;if(j===this.elements.caret){h.insertBefore(document.createTextNode(i),j)}else{j=j.nodeType===3?j:j.nextSibling;h.insertBefore(document.createTextNode(i),j);j&&j.nodeType===3&&h.removeChild(j)}}else{h.setText(i)}if(this.elements.caret){this.getContent().toggleClassName("dropdown-toggle",!this.getValue())}if(!i||i===""){this.elements.container.addClassName("btn-without-label")}return this},setActive:function(h){if(typeof h==="undefined"){h=true}this.getContent().toggleClassName("active",h);return this},toggleActive:function(){return this.setActive(!this.isActive())},isActive:function(){return this.getContent().hasClassName("active")},loading:function(){console.info("The method `Button.loading()` is deprecated. Please use `Button.load()` instead.");this.load.apply(this,arguments)},load:function(j,i){var h;if(typeof j==="undefined"){j=true}if(j&&!this.previousValue){this.previousValue=this.getValue()}h=j?i||e.loading:this.previousValue;h&&this.setValue(h);this.setDisabled(j);if(!j){delete this.previousValue}},setClassName:function(h){this.options.className=a(h);this.getContent().className=this.getClassNames();return this}};return f.extend(b)});define("DS/UIKIT/Accordion",["UWA/Core","UWA/Element","UWA/Event","UWA/Utils","UWA/Controls/Abstract","DS/UIKIT/Input/Button"],function(g,d,c,e,f,b){var a={name:"accordion",ITEM_CLASSNAME:"accordion-item",TITLE_CLASSNAME:"accordion-title",defaultOptions:{buttons:false,arrows:true,exclusive:true,animated:false,styled:false},items:null,subAccordions:null,selectedItems:null,unselectedItems:null,embeddedItems:0,init:function(k){var m,j=k.items.length,h,n,o;this._parent(k);this.items=[];this.subAccordions=[];this.selectedItems=[];this.unselectedItems=[];this.buildSkeleton();if(this.subAccordions[0]&&j){h=this.subAccordions[0].id;n=[];n.globalOptions=[];o=this.subAccordions[0].options;for(m=0;m<j;m++){n=k.items[m];n.accordionId=h;n.globalOptions=o;this.addItem(n)}}this.options.styled=this.elements.container.hasClassName("styled");if(this.options.styled&&this.embeddedItems===0){this.elements.container.removeClassName("styled")}},buildSkeleton:function(){var h=this.elements,i;if(h.container){return}this.options.className=this.getClassNames();i=this._addSubAccordion(this.options);h.container=i.container;this.handleEvents()},_addSubAccordion:function(i){var h=[];h.id=e.getUUID().substr(0,6);h.parentItemId=(i.parentItemId)?(i.parentItemId):(-1);h.options=g.merge(i,this.defaultOptions);if(h.parentItemId!==-1){h.options.className=i.className+" sub-accordion"}h.container=this._buildAccordion(h.options);this.subAccordions.push(h);return h},_getSubAccordion:function(k){var h=[],i,j;if(this.subAccordions){for(i=0,j=this.subAccordions.length;i<j;i+=1){h=this.subAccordions[i];if(h&&h.id&&h.id===k){return h}}}return false},_buildAccordion:function(i){var j=(i.className)?(i.className):(this.getClassNames());var h=g.createElement("div",{"class":j});if(i.animated){h.addClassName("animated")}return h},_buildAccordionItem:function(i,h,j){i.elements={container:g.createElement("div",{"class":this.ITEM_CLASSNAME+" "+j,id:i.id})};if(h.title){i.title=g.createElement("div",{"class":this.TITLE_CLASSNAME+" ",html:h.title||""});if((h.arrow!==false&&((h.globalOptions&&h.globalOptions.arrows)||(!h.globalOptions&&this.defaultOptions.arrows)))||h.arrow){g.createElement("i",{"class":"caret-left "}).inject(i.title,"top")}i.title.inject(i.elements.container);if((h.button!==false&&h.globalOptions&&h.globalOptions.buttons)||h.button){i.button=new b();i.button.setIcon("plus");i.button.inject(i.title)}this.embeddedItems++}i.elements.wrapper=g.createElement("div",{"class":"content-wrapper"});i.elements.content=g.createElement("div",{"class":"content "+j});h.content&&i.elements.content.setContent(h.content);h.globalOptions&&h.globalOptions.animated&&i.elements.content.toggleClassName("accordion-animated-content");i.elements.content.inject(i.elements.wrapper);i.elements.wrapper.inject(i.elements.container)},_isExclusive:function(i){var h=this._getSubAccordion(i);return h&&h.options.exclusive},selectItem:function(i){var j,h,k=[];if(i.name){j=i}else{j=this.getItem(i);if(!j){return}}if(!j.isSelected){j.isSelected=true;j.elements.container.addClassName("active");h=this._getSelectedItemPosition(j.accordionId,j.id);if(h===-1){k.id=j.id;k.accordionId=j.accordionId;this.selectedItems.push(k);this.dispatchEvent("onOpen",[j,this.selectedItems],this)}h=this._getUnselectedItemPosition(j.accordionId,j.id);if(h>-1){this.unselectedItems.splice(h,1)}if(j.button){j.button.setIcon("minus")}}},unselectItem:function(i){var j,h,k=[];if(i.name){j=i}else{j=this.getItem(i);if(!j){return}}if(j.isSelected){j.isSelected=false;j.elements.container.removeClassName("active");h=this._getSelectedItemPosition(j.accordionId,j.id);if(h>-1){this.selectedItems.splice(h,1)}h=this._getUnselectedItemPosition(j.accordionId,j.id);if(h===-1){k.id=j.id;k.accordionId=j.accordionId;this.dispatchEvent("onClose",[j,this.unselectedItems],this);this.unselectedItems.push(k)}if(j.button){j.button.setIcon("plus")}}},enableItem:function(i){var h=this.getItem(i);h&&h.elements.container.removeClassName("disabled");h.disabled=false;return this},disableItem:function(i){var h=this.getItem(i);h&&h.elements.container.addClassName("disabled");h.disabled=true;return this},unselectAll:function(){while(this.selectedItems.length>0){this.unselectItem(this.selectedItems[0].id)}},selectAll:function(){while(this.unselectedItems.length>0){this.selectItem(this.unselectedItems[0].id)}},toggleItem:function(i){var j=false,h;if(i.name){j=i}else{j=this.getItem(i)}if(!j){this.dispatchEvent("onClick",[j],this);return}if(!j.disabled){if(j.isSelected){this.unselectItem(j)}else{this.selectItem(j)}if(j.accordionId&&this._isExclusive(j.accordionId)){h=this._getSelectedItemsByAccordion(j.accordionId)[0];if(h&&h!==j.id){this.unselectItem(h)}}this.dispatchEvent("onChange",[j,this.selectedItems,this.unselectedItems],this);this.dispatchEvent("onClick",[j],this);if(this.options.styled&&this.embeddedItems===0){if(this.selectedItems.length===0){this.elements.container.removeClassName("styled")}else{this.elements.container.addClassName("styled")}}}},addItem:function(h){var i=this;e.splat(h).forEach(function(j){i._addItem(j,i.elements.container)});return this},_addItem:function(p){var h,n=p.className||"",l={},m=p.handler,o,k,j=this,i=[];if(p.accordionId){h=this._getSubAccordion(p.accordionId);h=(h)?(h):(this.subAccordions[0])}else{h=this.subAccordions[0]}if(!h||!h.container){return}l.accordionId=h.id;l.id=e.getUUID().substr(0,6);if(!p.name){l.name="item-"+l.id}else{l.name=p.name}if(p.disabled){n+=" disabled";l.disabled=true}else{l.disabled=false}if(p.trigger){p.trigger.addEvent("onClick",function(){j.toggleItem(l.id)})}l.isSelected=false;this._buildAccordionItem(l,p,n);if(m&&g.is(m,"function")){l.elements.container.addEvent("click",function(){m()})}if(p.accordion){p.accordion.parentItemId=l.id;p.accordion.className=(p.accordion.className)?(p.accordion.className+" "+this.name):(this.name);o=this._addSubAccordion(p.accordion);if(o&&o.container){k=o.container;if(p.accordion.items){p.accordion.items.forEach(function(q){q.accordionId=o.id;q.globalOptions=o.options;j._addItem(q)})}k.inject(l.elements.content)}}this.items.push(l);l.elements.container.inject(h.container);if(p.selected){this.toggleItem(l)}else{i.id=l.id;i.accordionId=l.accordionId;this.unselectedItems.push(i)}},removeItem:function(i){var j=false,h;if(i.name){j=i}else{j=this.getItem(i)}if(!j){return}j.elements.container.destroy();j.elements.container=null;h=this.items.indexOf(j);if(h>-1){this.items.splice(h,1)}h=this._getUnselectedItemPosition(j.accordionId,j.id);if(h>-1){this.unselectedItems.splice(h,1)}h=this._getSelectedItemPosition(j.accordionId,j.id);if(h>-1){this.selectedItems.splice(h,1)}},getItem:function(k){var h,i,j=false;for(h=0,i=this.items.length;h<i;h+=1){j=this.items[h];if(k&&k.nodeType&&(j.elements.container===k)){break}else{if(h===k||j.id===k||j.name===k){break}}j=false}return j},setContent:function(k,j){var h,i=this.getItem(k);if(i){h=i.elements.container.getElementsByClassName("content-wrapper")[0];h.destroy();i.elements.wrapper=g.createElement("div",{"class":"content-wrapper"});i.elements.content=g.createElement("div",{"class":"content",html:j||""});i.elements.content.inject(i.elements.wrapper);i.elements.wrapper.inject(i.elements.container)}},setTitle:function(k,j){var h,i=this.getItem(k);if(i){h=i.elements.container.getElementsByClassName(this.TITLE_CLASSNAME)[0];h.destroy();i.title=g.createElement("div",{"class":this.TITLE_CLASSNAME+" ",html:j||""});i.title.inject(i.elements.container,"top")}},isSelected:function(i){var h=this.getItem(i);return h&&h.isSelected},getSelectedItems:function(){return this.selectedItems},_getSelectedItemsByAccordion:function(i){var h=[];this.selectedItems.forEach(function(j){if(j.accordionId===i){h.push(j.id)}});return h},_getSelectedItemPosition:function(j,n){var k,h,m;for(k=0,h=this.selectedItems.length;k<h;k++){m=this.selectedItems[k];if(m.accordionId===j&&m.id===n){return k}}return -1},getUnselectedItems:function(){return this.unselectedItems},_getUnselectedItemPosition:function(j,n){var k,h,m;for(k=0,h=this.unselectedItems.length;k<h;k++){m=this.unselectedItems[k];if(m.accordionId===j&&m.id===n){return k}}return -1},show:function(){this.items&&this._parent()},eventHandler:function(k){var i=c.getElement(k),l=(i.hasClassName(this.TITLE_CLASSNAME)&&i)||i.getParent("."+this.TITLE_CLASSNAME),h=l&&l.getParent(),j;if(h&&h.id){j=this.getItem(h.id);if(!j.button||(j.button&&(i.hasClassName("btn")||i.getParent().hasClassName("btn")))){this.toggleItem(j)}}},handleEvents:function(){this.elements.container.addEvent("click",this.eventHandler.bind(this))}};return f.extend(a)});define("DS/UIKIT/Input/Select",["UWA/Core","UWA/Element","UWA/Event","UWA/Utils","DS/UIKIT/Input","DS/UIKIT/Scroller","DS/UIKIT/Tooltip","i18n!DS/UIKIT/assets/nls/UIKIT"],function(e,b,k,g,f,c,i,m){var d=e.Utils.Client.Platform.name.test("ios|android")&&g.Client.Features.touchEvents,h=e.Utils.Client.Platform.name.test("android");function j(o,q,n){var p;return function(){var u=this,t=arguments,s,r=function(){p=null;if(!n){o.apply(u,t)}};s=n&&!p;clearTimeout(p);p=setTimeout(r,q);if(s){o.apply(u,t)}}}function l(q){var p,n,o;if(!q){return}q=q.split(" ");for(p=0,n=q.length;p<n;p++){o=q[p].match(/small|large$/);if(o&&!o[1]){if(o[0]==="small"){q[p]="input-sm"}else{if(o[0]==="large"){q[p]="input-lg"}}}}return q.join(" ")}var a={defaultOptions:{placeholder:m.selectDefaultPlaceholder,options:[],maxHeight:240,tooltipPosition:"top"},init:function(n){n=n||{};if(n.className){n.className=l(n.className)}this.custom=n.nativeSelect!==true;this.custom=e.is(n.custom)?n.custom!==false:this.custom;if(this.custom){this.setupTemplates(n);if(n.showTooltips){this._tooltips=[]}}this._parent(n)},onPostInject:function(){if(this.options.showTooltips){this._updateTooltips()}},buildSkeleton:function(){var q=this.elements,o=this.options,p,n={};e.is(o.id)&&(n.id=o.id);o.required&&(n.required=o.required);o.multiple&&(n.multiple=o.multiple);e.is(o.size)&&(n.size=o.size);e.merge(o.attributes,n);q.container=e.createElement("div",{"class":"select "+o.className});q.input=e.createElement("select",{"class":"form-control",attributes:o.attributes}).inject(q.container);if(!this.custom){q.content=q.input;q.container.addClassName("select-native")}else{q.input.addClassName("select-hidden");q.choices=e.createElement("ul",{"class":"select-choices form-control"});q.dropdown=e.createElement("div",{"class":"select-dropdown"});q.dropdownScroll=e.createElement("div",{"class":"select-dropdown-scroll"});q.content=e.createElement("ul",{"class":"select-results"});q.choices.inject(q.container);q.content.inject(q.dropdownScroll);q.dropdownScroll.inject(q.dropdown);q.dropdown.inject(q.container);this.scroller=new c({element:q.dropdownScroll}).inject(q.dropdown);if(g.Client.Engine.firefox){q.content.getParent(".scroller-content").addClassName("scroller-shift")}o.showTooltips&&q.choices.addClassName("select-tooltips")}if(o.multiple){q.container.addClassName("select-multiple")}if(o.placeholder!==false){o.options.unshift({label:o.placeholder,value:""});this.getContent().addClassName("select-placeholder")}this.add(o.options);if(o.placeholder!==false){p=this.getSelection();if(!p.length){this.select(0,true,true)}this.ensureClassForPlaceholder()}this.setDisabled(o.disabled)},getOption:function(p,n,r,t){var o=this.getOptions(true,this.custom&&e.is(r)?!r:false),q=p,s;if(e.is(p,"element")){if(/optgroup|option/.test(p.getTagName())){if(!this.custom||this.custom&&!e.is(r)){return p}}else{if(!this.custom||!e.is(r)){return null}}}else{if(e.is(p.value)){q=p.value}}return o.some(function(v,u){s=v;if(v.value===q||(!t&&v.label===q)||u===q||v===q){if(!n||v.getTagName()===n){e.is(r)&&(s=this.getOptions(true,r)[u]);return true}}}.bind(this))?s:null},getOptions:function(q,p){var n,o;p=p===true;if(this.custom&&p){n=this.elements.content.getElements(".result-group, .result-option")}else{o=this.elements.input.getElementsByTagName("*");n=Array.prototype.map.call(o,function(r){return e.extendElement(r)})}if(this.options.placeholder!==false&&q===false){n.shift()}return n},remove:function(n){var o=this.getSelection();if(!e.is(n)){n=this.getOptions()}g.splat(n).forEach(function(p){this.removeOption(p)},this);if(!this.getSelection().equals(o)){this.dispatchOnChange()}return this},removeOption:function(o){o=this.getOption(o);if(o&&(this.options.placeholder===false||o!==this.elements.input.firstChild)){if(this.custom){var n=this.getOption(o,undefined,true);this.options.showTooltips&&this._removeTooltip(n);n&&n.remove()}o.remove()}return this},add:function(n){var o=this.getSelection();g.splat(n).forEach(function(p){this.addOption(p)},this);if(!this.getSelection().equals(o)){this.dispatchOnChange()}return this},addOption:function(s,n){var u=this.elements,r=u.input,q=u.content,p,o,t;if(e.is(s,"object")){e.is(s.value)||(s.value=s.label)}else{s=""+s}if(!e.is(s,"object")){s={value:s}}s.value=""+s.value;p=this.getOption(s,"option",undefined,true);t=!!p;if(!t){p=e.createElement("option");if(this.custom){o=e.createElement("li",{"class":"result-option"})}}if(s.group){r=this.getOption(s.group,"optgroup");if(!r){r=e.createElement("optgroup",{label:s.group}).inject(u.input);if(this.custom){q=e.createElement("li",{"class":"result-group",html:[{tag:"span","class":"result-group-label",text:s.group},{tag:"ul","class":"result-group-sub"}]}).inject(u.content).getElement("ul")}}else{if(this.custom){q=this.getOption(r,undefined,true).getElement("ul")}}}if(!e.is(s.label)&&!e.is(s.value)){return this}b.set.call(p,{text:e.is(s.label)?s.label:s.value,value:e.is(s.value)?s.value:s.label,selected:s.selected,disabled:s.disabled,attributes:s.attributes});if(this.custom){if(!o){o=this.getOption(p,undefined,true)}s.attributes&&Object.keys(s.attributes).forEach(function(v){o.setAttribute(v,s.attributes[v])});if(s.label===""||!s.value&&!s.label){this.template.setOption(o,"&nbsp;",true)}else{this.template.setOption(o,e.is(s.label)?s.label:s.value)}o.toggleClassName("result-option-disabled",!!s.disabled);if(!(t&&q===o.getParent())){o.inject(q,n)}this.visible&&this.options.showTooltips&&this._setTooltip(o,o.getText())}if(!(t&&r===p.getParent())){p.inject(r,n)}return this},setupTemplates:function(n){this.template={};this.template.setOption=(function(){var o=!!n.template;return function(p,r,q){var s={};s[(o||q)?"html":"text"]=r;b.set.call(p,s,r)}}());this.template.getOption=function(o){if(o.hasClassName("result-option")){return o}};this.template.setChoice=function(p,q,o){b.set.call(p,{text:q})};this.template.getText=function(o){return b.getText.call(o)};e.extend(this.template,n.template)},enable:function(n){if(e.is(n)){g.splat(n).forEach(function(o){this.setDisabled(false,o)},this)}else{this.setDisabled(false)}return this},disable:function(n){if(e.is(n)){g.splat(n).forEach(function(o){this.setDisabled(true,o)},this)}else{this.setDisabled(true)}return this},setDisabled:function(o,n){var p=this.elements;e.is(o)||(o=true);if(e.is(n)){n=this.getOption(n);if(!n){return this}n.disabled=o;this.custom&&this.getOption(n,undefined,true).toggleClassName("result-option-disabled",o)}else{p.container.toggleClassName("select-disabled",o);p.input.disabled=o;this.setFocus(false);this.custom&&this.toggleDropdown(false);this.handleEvents()}return this},setPlaceholder:function(p){var n=this.options,o=n.placeholder;if(p===false&&o!==false){n.placeholder=false;this.remove(o);this.getContent().removeClassName("select-placeholder");this.getContent().removeClassName("select-not-chosen")}else{if(p!==false){n.placeholder=p;if(o!==false){this.addOption({value:"",label:p});this.syncInput()}else{this.addOption({label:p,value:""},"top");this.getContent().addClassName("select-placeholder")}}}return this},getSelection:function(r){var p=this.options,q=this.getOptions(r),n=this.elements.input.selectedIndex,o=[];p.placeholder!==false&&r===false&&n--;o=q.filter(function(t,s){if(t.getTagName()!=="optgroup"){if(p.multiple&&t.selected||n===s){return true}}else{n++}});return o},clear:function(n){return this.select(this.getSelection(false),false,n)},select:function(r,p,o,n){var q=this.getSelection();n&&this.clear(true);g.splat(r).forEach(function(s){this.setSelection(s,p!==false)},this);if(!this.getSelection().equals(q)){if(o!==true){this.dispatchOnChange()}}this.syncInput();return this},setValue:function(n){return this.select(n,true,false,true)},getValue:function(){return this.getSelection().map(function(n){return n.value})},setClassName:function(n){this.options.className=l(n);this.getContent().className=this.getClassNames();return this},setSelection:function(o,n){o=this.getOption(o);if(!o){return this}if(o.getTagName()==="optgroup"){this.select(o.getChildren(),n)}else{o.selected=n}return this},syncInput:function(){var o=false,n=this.options,p=this.getSelection(),q;if(n.placeholder!==false){if(p.length===0){this.elements.input.firstChild.selected=true;p.push(this.elements.input.firstChild)}if(n.multiple&&p.length>1&&this.elements.input.firstChild.selected){this.elements.input.firstChild.selected=false;p.shift()}}this.ensureClassForPlaceholder();o=this.getContent().hasClassName("select-not-chosen");if(this.custom){p=this.getSelection();this.getOptions(true,true).forEach(function(r){r.removeClassName("result-option-selected")});this.elements.choices.empty();q=Array.prototype.slice.call(this.elements.content.querySelectorAll(".result-option"));p.forEach(function(v){var u,t,r,s;u=this.getOption(v,undefined,true);u.addClassName("result-option-selected");if(n.options instanceof Array){r=n.options[q.indexOf(u)]}t=e.createElement("li",{"class":"select-choice"});if(r){s=r.attributes||{};Object.keys(s).forEach(function(w){t.setAttribute(w,s[w])})}this.template.setChoice(t,v.getText(),o);if(o){t.className="select-choice-default"}else{if(n.multiple){e.createElement("span",{"class":"close",html:"&times;"}).inject(t)}}t.inject(this.elements.choices)},this);this.ensureSelectedInView()}},setFocus:function(n,p){var o=this.elements;e.is(n)||(n=n!==false);if(this._preventIEFocusLost){return this}o.container.toggleClassName("select-focus",n);if(d&&!h){return this}!p&&o.input[n?"focus":"blur"]();if(this.custom&&!n){this.toggleDropdown(false)}return this},toggleDropdown:function(o){var r,n,p,q,s=this.getContent().hasClassName("dropdown-visible");if(!e.is(o)){o=!s}if(o!==s){if(o){r=this.getContent().getOffsets().y;this.getContent().addClassName("dropdown-visible");n=Math.min(this.options.maxHeight,this.elements.content.getSize().height);this.elements.dropdown.setStyle("height",n+"px");p=window.innerHeight||document.documentElement.clientHeight;q=window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop;if(r+n>p+q){this.getContent().addClassName("dropup")}else{this.getContent().removeClassName("dropup")}}else{this.elements.dropdown.setStyle("height","0px");this.getContent().removeClassName("dropdown-visible")}this.options.showTooltips&&this._updateTooltips()}this.ensureSelectedInView()},ensureClassForPlaceholder:function(){if(this.options.placeholder!==false){var n=this.getSelection().length===1&&this.elements.input.firstChild.selected;this.getContent().toggleClassName("select-not-chosen",n)}},ensureSelectedInView:function(){var r=this.getSelection(),s=this.elements.content,q=this.elements.dropdownScroll,p,o,t,n;if(r.length>0){p=this.getOption(r[r.length-1],undefined,true);o=p.offsetTop-parseInt(s.getStyle("margin-top"),10);t=p.getBoundingClientRect();n=q.getBoundingClientRect();if(t.bottom>n.bottom||t.top<n.top){this.scroller.scrollTo(0,o)}}},_buildTooltip:function(q,o){var n=this.options.tooltipPosition,p=new i({target:q,body:o,trigger:"touch",position:n});this._tooltips.push(p)},_removeTooltip:function(o){var n=this._getTooltip(o);if(!n){return}n.destroy();this._tooltips.splice(this._tooltips.lastIndexOf(n),1)},_getTooltip:function(o){var n=this._tooltips.filter(function(p){if(o===p.options.target){return true}});if(n.length>0&&n[0]){return n[0]}},_setTooltip:function(p,n){var o=this._getTooltip(p);if(o&&o.getContent()!==n){o.setBody(n)}else{this._buildTooltip(p,n)}},_updateTooltips:function(){var r=function(s){if(s.scrollWidth>s.offsetWidth){this._setTooltip(s,this.template.getText(s))}else{this._removeTooltip(s)}}.bind(this);var o=this.elements,p=this.getContent().hasClassName("dropdown-visible"),n=o.choices.querySelector(".select-choice"),q=Array.prototype.slice.call(o.content.querySelectorAll("li.result-option"));if(p){n&&q.push(n);q&&q.forEach(function(s){r(s)},this)}else{n&&r(n);q&&q.forEach(function(s){this._removeTooltip(s)},this)}},handleEvents:function(){var n=this.elements;this._parent();if(!this.custom){return}if(!this.events.content){this.events.content={mouseover:function(){if(!this.options.multiple){this.getOptions(true,true).forEach(function(o){o.removeClassName("result-option-selected")})}}.bind(this)};if(this.options.showTooltips){this.events.container.resize=j(this._updateTooltips,100).bind(this)}}n.content[this.isDisabled()?"removeEvents":"addEvents"](this.events.content);n.container[this.isDisabled()?"removeEvents":"addEvents"](this.events.container)},onMouseDown:function(n){var o;if(this.custom){o=k.getElement(n);if(o===this.elements.content){this._preventIEFocusLost=true}k.preventDefault(n)}if(this.elements.input.disabled){this.setDisabled();this._dispatchers&&this._dispatchers.onMouseDown.halt();k.stop(n)}},onClick:function(t){if(!this.custom){return}var u=k.getElement(t),p=this.options,s=false,n=this.template.getOption(u),r,o,q;if(n){u=this.getOption(n,undefined,false);if(p.multiple&&p.placeholder!==false&&u===this.elements.input.firstChild){this.clear()}else{q=u.getParent();if(u.selected&&(u.disabled||q.disabled)){this.select(u,false)}else{if(q.disabled||u.disabled){s=true}else{this.select(u,p.multiple?!u.selected:true)}}}if(!p.multiple&&!s){this.toggleDropdown(false)}}else{if(u.hasClassName("close")){u=u.getParent();r=this.getSelection(true);o=this.elements.choices.getChildren().indexOf(u);this.select(r[o],false)}else{if(!u.hasClassName("result-group-label")&&(!p.multiple||p.multiple&&!u.hasClassName("select-choice"))){this.elements.input.focus();if(!d||h){this.toggleDropdown()}}}}this._preventIEFocusLost=false},onChange:function(n){this.syncInput();n&&this.bubbleOnChange(n)},dispatchOnChange:function(){if(!this.isDisabled()){k.dispatchEvent(this.elements.input,"change")}else{this.dispatchEvent("onChange")}},onKeyDown:function(p){var o=k.whichKey(p),n=true;if(this.custom){if(o==="space"){this.toggleDropdown(true)}else{if(o==="return"){this.toggleDropdown()}else{if(o==="esc"){this.toggleDropdown(false)}else{n=false}}}if(n){k.preventDefault(p)}}},destroy:function(){if(this.elements){if(this.custom){this.scroller.destroy();if(this.options.showTooltips){this._tooltips.forEach(function(n){n.destroy()},this);delete this._tooltips}this.template&&delete this.template}this._parent()}},};return f.extend(a)});define("DS/UIKIT/Input/Number",["UWA/Core","UWA/Element","UWA/Event","UWA/Utils","DS/UIKIT/Input","i18n!DS/UIKIT/assets/nls/UIKIT"],function(d,b,l,k,h,o){var e=[9,13,27,37,38,39,40];var a=["Home","End","Control","Shift","Meta"];var f=["Control","Meta"];var g=["v","V","c","C"];var c=["Delete","Del","Backspace"];var n=["0","1","2","3","4","5","6","7","8","9","-",".",","];var j=["fr","de","ru"];function m(p){return(typeof p=="undefined"||!p||p.length===0||p===""||!/[^\s]/.test(p)||/^\s*$/.test(p)||p.replace(/\s/g,"")==="")}var i={name:"number",defaultOptions:{min:0,max:10,step:1,value:0,nativeNumber:false,decimalPrecision:100000,decimalSeparator:null,},init:function(p){p=p||{};this._parent(p);if([",","."].indexOf(this.options.decimalSeparator)===-1){if(d.is(o._lang)){this.options.decimalSeparator=(j.indexOf(o._lang)>-1)?",":"."}else{this.options.decimalSeparator="."}}if(d.owns(this.options,"value")){this.setValue(this.options.value)}this.intMaxLength=Math.max((Math.abs(this.options.min).toFixed(0)+"").length,(Math.abs(this.options.max).toFixed(0)+"").length)+1;this.decimalMaxLength=(this.options.decimalPrecision+"").length-1},buildSkeleton:function(){var q=this.options,r=this.elements,p=q.attributes,s="input-"+this.name;q.id&&(p.id=q.id);q.required&&(p.required=q.required);p.min=q.min;p.max=q.max;p.step=q.step;q.placeholder&&(p.placeholder=q.placeholder);r.container=d.createElement("div",{"class":s+" "+q.className});r.input=d.createElement("input",{type:"text","class":"form-control",attributes:p}).inject(r.container);if(this.options.nativeNumber){this.getContent().removeClassName("input-"+this.name)}else{r.leftButton=d.createElement("button",{type:"button","class":s+"-button "+s+"-button-left btn btn-default"});r.rightButton=d.createElement("button",{type:"button","class":s+"-button "+s+"-button-right btn btn-default"});r.leftButton.inject(r.input,"before");r.rightButton.inject(r.input,"after")}this.setDisabled(q.disabled)},setValue:function(q){if(this.options.decimalSeparator===","){q=(q+"").replace(",",".")}var p=this.getValue();this._parent(q);if(p!==q){this.dispatchOnChange()}},add:function(){return this},remove:function(){return this},decrement:function(){var q=this.parseInput(this.elements.input.value),p=this.options.min,s=this.options.decimalPrecision,r;if(q<=p){return}if(q>p){r=(q*s-this.options.step*s)/s;r=(r<p)?p:r;this.setValue(r)}else{this.setValue(p)}},increment:function(){var q=this.parseInput(this.elements.input.value),p=this.options.max,s=this.options.decimalPrecision,r;if(q>=p){return}if(q<p){r=(q*s+this.options.step*s)/s;r=(r>p)?p:r;this.setValue(r)}else{this.setValue(p)}},syncInput:function(){if(!m(this.elements.input.value)){var q=this.options.decimalPrecision;var p=Math.round(this.parseInput(this.elements.input.value)*q)/q;if(p>this.options.max){return this.setValue(this.options.max)}else{if(p<this.options.min||isNaN(p)){return this.setValue(this.options.min)}}if(this.options.decimalSeparator===","){p=(p+"").replace(".",",")}this.elements.input.value=p}},onKeyDown:function(p){var w={start:this.elements.input.selectionStart,end:this.elements.input.selectionEnd,length:this.elements.input.selectionEnd-this.elements.input.selectionStart};var r=this.elements.input.value.split("");var x=p.which||p.keyCode;var v=p.key;var t=c.indexOf(v)>-1;if(v==="Decimal"){v=this.options.decimalSeparator}if(g.indexOf(v)>-1){this._commandPressed||l.preventDefault(p);return}if(e.indexOf(x)>-1||a.indexOf(v)>-1){this._commandPressed=(f.indexOf(v)>-1);return}if((!t&&n.indexOf(v)===-1)||(v==="-"&&(w.start!==0||this.options.min>=0))||((v===","||v===".")&&this.options.decimalPrecision===1)){l.preventDefault(p);return}if(t){if(v==="Backspace"&&w.start>0&&!w.length){w.start-=1}r.splice(w.start,w.length||1,"")}else{if(w.length){r.splice(w.start,w.length,"");r.splice(w.start,1,v)}else{r.splice(w.start,0,v)}}if(r.indexOf("-")>0){return}r=r.join("");var q=this.parseInput(r);var s=q-Math.floor(q);var u=(q+"").split(".").slice(-1)[0].length;if((s&&u>this.decimalMaxLength)||(Math.abs(q.toFixed(0))+"").length>this.intMaxLength&&r!==""){l.preventDefault(p);return}},onKeyRelease:function(p){if(!p||p.type==="blur"||f.indexOf(p.key)>-1){this._commandPressed=false}},onPaste:function(q){var p=q.clipboardData.getData("text/plain");if(!/^-?[0-9]+\.?,?[0-9]*/.test(p)){l.preventDefault(q)}},parseInput:function(p){if(p!==undefined&&p!==null){if(this.options.decimalSeparator===","){return parseFloat((p+"").replace(",","."))}else{return parseFloat(p)}}return NaN},setDisabled:function(){var q=this.elements,p=arguments[0]!==false;q.leftButton.toggleClassName(this.name+"-disabled",p);q.leftButton.disabled=p;q.input.disabled=p;q.rightButton.disabled=p;this.handleEvents();return this},handleEvents:function(){var p=this.elements;this._parent();if(this.options.nativeNumber){return}if(!this.events.buttons){this.events.buttons={leftButton:{click:this.decrement.bind(this)},rightButton:{click:this.increment.bind(this)}}}this.events.input.keyup=this.onKeyRelease.bind(this);this.events.input.blur=this.onKeyRelease.bind(this);this.events.input.keydown=this.onKeyDown.bind(this);this.events.input.paste=this.onPaste.bind(this);if(this.isDisabled()){p.leftButton.removeEvents(this.events.buttons.leftButton);p.rightButton.removeEvents(this.events.buttons.rightButton);p.input.removeEvents(this.events.input)}else{p.leftButton.addEvents(this.events.buttons.leftButton);p.rightButton.addEvents(this.events.buttons.rightButton);p.input.addEvents(this.events.input)}}};return h.extend(i)});define("DS/UIKIT/Input/Password",["UWA/Core","UWA/Element","UWA/Event","UWA/Utils/Client","DS/UIKIT/Input/Text"],function(f,b,a,e,d){var c={name:"",defaultOptions:{className:"",multiline:false},init:function(g){this._parent(g)},buildInput:function(){var g={},h=this.options,i=f.createElement("input",{type:"password"});["placeholder","required","pattern","maxlength"].forEach(function(j){if(h[j]){g[j]=h[j]}});i.set(g);return i}};return d.extend(c)});define("DS/UIKIT/Input/Toggle",["UWA/Core","UWA/Element","UWA/Event","UWA/Utils","DS/UIKIT/Input"],function(g,c,b,d,e){function a(m){var k,h,j;if(!m){return}m=m.split(" ");for(k=0,h=m.length;k<h;k++){j=m[k].match(/(toggle-)?(xsmall|small|large|default|primary|info|warning|error|success|switch|inline)$/);if(j&&!j[1]){if(j[0]==="small"){m[k]="toggle-sm"}else{if(j[0]==="large"){m[k]="toggle-lg"}else{if(j[0]==="xsmall"){m[k]="toggle-xs"}else{m[k]="toggle-"+m[k]}}}}}return m.join(" ")}var f={name:"toggle",defaultOptions:{type:"radio",className:"",checked:false,mixed:false,},init:function(h){h=h||{};if(!h.id){h.id="radio-"+d.getUUID().substring(0,6)}if(h.mixed&&h.type!=="checkbox"){h.mixed=false}this._parent(h);this.setClassName(h.className);h.mixed&&this.setMixed()},buildInput:function(){var h=g.createElement("input",{type:this.options.type==="radio"?"radio":"checkbox"});if(this.options.required){h.setAttribute("required",true)}return h},buildSkeleton:function(){var i=this.elements,h=this.options;i.content=i.input=this.buildInput().set(h.attributes);i.input.id=this.options.id;i.label=g.createElement("label",{text:h.label,"class":"control-label",attributes:{"for":this.options.id}});i.container=g.createElement("div",{html:[i.input,i.label]});i.container.addClassName(this.getClassNames());this.setCheck(h.checked);this.setDisabled(h.disabled)},handleEvents:function(){var j=this,k=this.elements;function i(l){return j.dispatchEvent.bind(j,l)}function h(l){return function(n){var m=b.getElement(n);if(m===this.elements.label&&l!=="onClick"){this.dispatchEvent(l,n)}else{if(m===this.elements.input){this.dispatchEvent(l,n)}}}.bind(j)}if(!this.events){this.events={container:{click:h("onClick"),mousedown:h("onMouseDown")},input:{change:i("onChange"),keydown:i("onKeyDown"),focus:this.setFocus.bind(this,true),blur:this.setFocus.bind(this,false)}}}if(this.isDisabled()){k.input.removeEvents(this.events.input);k.container.removeEvents(this.events.container)}else{k.container.addEvents(this.events.container);k.input.addEvents(this.events.input)}},setFocus:function(){this.syncInput();return this},isChecked:function(){return this.elements.input.checked},setCheck:function(h){this.elements.input.checked=h!==false;return this},setMixed:function(h){if(this.options.type==="checkbox"){this.elements.container[h!==false?"addClassName":"removeClassName"]("mixed")}return this},syncInput:function(){if(!g.is(this.options.label)){this.elements.label.setText(this.getValue())}},setLabel:function(h){this.options.label=h;this.elements.label.setText(h);return this},getLabel:function(){return this.elements.label.getText()},check:function(){return this.setCheck()},uncheck:function(){return this.setCheck(false)},setClassName:function(h){if(this.options.type==="switch"){h=h?h+" switch":"switch"}this.options.className=a(h);this.getContent().className=this.getClassNames();return this}};return e.extend(f)});define("DS/UIKIT/Input/ButtonGroup",["UWA/Core","UWA/Element","UWA/Event","UWA/Utils/Client","UWA/Controls/Abstract","DS/UIKIT/Input/Button"],function(h,d,c,f,g,b){function a(n){var m,j,k;if(n){n=n.split(" ");for(m=0,j=n.length;m<j;m++){k=n[m].match(/(btn-grp-)?(xsmall|small|large|vertical)$/);if(k&&!k[1]){if(k[0]==="small"){n[m]="btn-grp-sm"}else{if(k[0]==="large"){n[m]="btn-grp-lg"}else{if(k[0]==="xsmall"){n[m]="btn-grp-xs"}else{n[m]="btn-grp-"+n[m]}}}}}n=n.join(" ")}return n}var e={name:"btn-grp",defaultOptions:{className:"",disabled:false},buttons:null,init:function(i){if(i.className){i.className=a(i.className)}this._parent(i);this.events=null;this.buttons=[];this.getContent()},getContent:function(){if(!this.elements.container){this.buildSkeleton()}return this.elements.container},buildSkeleton:function(){var j=this,k=this.elements,i=this.options;k.container=h.createElement("div",{"class":this.getClassNames()});i.buttons.forEach(function(m){var l;if(m instanceof b===false){l=new b(h.clone(m))}else{l=m}l.inject(k.container);j.buttons.push(l)});this.setDisabled(i.disabled)},handleEvents:function(){var i=this;if(!this.events){this.events={click:function(k){var l=c.getElement(k),j=i.getButton(l)||i.getButton(l.getParent());if(j){if(!j.dropdown){i.toggleActive(j)}i.dispatchEvent.call(i,"onClick",[k,j])}}}}if(this.isDisabled()){this.elements.container.removeEvents(this.events)}else{this.elements.container.addEvents(this.events)}},setDisabled:function(i){if(typeof i==="undefined"){i=true}this.buttons.forEach(function(j){j.setDisabled(i)});this.elements.container.toggleClassName("disabled",i);this.handleEvents();return this},isDisabled:function(){return this.buttons.every(function(i){return i.isDisabled()})},getButton:function(n){var m,j,k=false;if(n instanceof b){k=n}else{for(m=0,j=this.buttons.length;m<j;m+=1){k=this.buttons[m];if(n&&n.nodeType&&k.getContent()===n){break}else{if(m===n){break}}k=false}}return k},setActive:function(k,j){var i=this.getButton(k);if(typeof j==="undefined"){j=true}if(this.options.type==="checkbox"){i.setActive(j)}else{if(this.options.type==="radio"){if(j){this.getActive().forEach(function(l){l.setActive(false)});i.setActive(true)}}}return this},getActive:function(){return this.buttons.filter(function(i){if(i.isActive()){return true}})},toggleActive:function(j){var i=this.getButton(j);if(i){this.setActive(i,!i.isActive())}return this},isActive:function(j){var i=this.getButton(j);if(i){return i.isActive()}},setClassName:function(i){this.options.className=a(i);this.getContent().className=this.getClassNames();return this}};return g.extend(e)});define("DS/UIKIT/Modal",["UWA/Core","UWA/Element","UWA/Event","UWA/Utils/Client","UWA/Controls/Abstract","DS/UIKIT/Tooltip","i18n!DS/UIKIT/assets/nls/UIKIT"],function(e,a,j,c,g,i,k){function f(){try{return window.self!==window.top}catch(l){return true}}function d(o,n,m,l){if(n.addEventListener){n.addEventListener(o,m,l)}else{if(n.attachEvent){n.attachEvent("on"+o,m,l)}}}function b(m,n,l){Object.keys(m).forEach(function(o){d(o,n,m[o],l)})}var h={name:"modal",defaultOptions:{className:"",animate:false,closable:true,overlay:true,visible:false,escapeToClose:true},isVisible:false,init:function(l){l=l||{};this._parent(l);this.options.animate=c.Features.transitionsCSS&&this.options.animate;this.buildSkeleton();this.handleEvents();if(l.renderTo){this.inject(l.renderTo)}},getHeader:function(){if(!this.elements.header){this.elements.header=e.createElement("div",{"class":this.name+"-header"}).inject(this.elements.content,"top")}return this.elements.header},getBody:function(){return this.elements&&this.elements.body},getFooter:function(){if(!this.elements.footer){this.elements.footer=e.createElement("div",{"class":this.name+"-footer"}).inject(this.elements.content)}return this.elements.footer},setHeader:function(n){var m=this,p=this.getHeader(),l=this.options,o=this.elements;p.empty();if(l.closable){o.close=e.createElement("span",{"class":"close fonticon fonticon-cancel",events:{click:function(){m.hide()}}}).inject(p,"top");o.closeTooltip=new i({position:"bottom",target:o.close,body:k.close})}if(n){p.addContent(n)}return this},setBody:function(l){if(this.elements.body){this.elements.body.empty();this.elements.body.addContent(l)}return this},setFooter:function(l){var m=this.getFooter();m.empty();if(l){m.addContent(l)}return this},buildSkeleton:function(){var m=e.createElement,n=this.elements,l=this.options;if(n.container){return}n.container=m("div",{"class":this.getClassNames()});n.wrapper=m("div",{"class":this.name+"-wrap"}).inject(n.container);n.content=m("div",{"class":this.name+"-content"}).inject(n.wrapper);if(e.is(l.header)){if(e.is(l.header,"string")&&!/<[\s\S]*>/i.test(l.header)){this.setHeader({tag:"h4",text:l.header})}else{this.setHeader(l.header)}}else{if(l.closable){this.setHeader()}}n.body=m("div",{"class":this.name+"-body",html:l.body}).inject(n.content);if(e.is(l.footer)){this.getFooter().addContent(l.footer)}if(l.overlay){n.overlay=m("div",{"class":this.name+"-overlay"})}if(l.animate){n.container.addClassName("fade");n.overlay&&n.overlay.addClassName("fade")}l.header=null;l.body=null;l.footer=null},onPostInject:function(l){this.options.renderTo=l;if(this.options.visible||this.isVisible){this.isVisible=false;this.show()}},toggle:function(){return this[this.isVisible?"hide":"show"]()},show:function(){var m=this,l=this.options,n=this.elements,o=50;if(!n.container){return}if(!this.isVisible){this.isVisible=true;if(n.container.isInjected()){!f()&&a.addClassName.call(document.body,this.name+"-open");n.overlay&&n.overlay.inject(l.renderTo||document.body);n.container.setStyle("display","block");if(l.animate){setTimeout(function(){if(m.elements.container&&m.isVisible){m.elements.container.addClassName("in");m.elements.overlay&&m.elements.overlay.addClassName("in");m.dispatchEvent("onShow")}},o)}else{m.elements.overlay&&m.elements.overlay.addClassName("in");m.dispatchEvent("onShow")}}}return this},hide:function(){var n=this,m=this.options,o=this.elements,p=150;function l(){if(!n.isVisible){if(n.elements.container){n.elements.container.setStyle("display","");n.elements.overlay&&n.elements.overlay.remove()}!f()&&a.removeClassName.call(document.body,n.name+"-open");n.dispatchEvent("onHide")}}if(!o.container){return}if(this.isVisible){this.isVisible=false;if(o.container.isInjected()){o.overlay&&o.overlay.removeClassName("in");if(m.animate){o.container.removeClassName("in");setTimeout(function(){l()},p)}else{l()}}}return this},handleEvents:function(){var m,l=27;if(!this.events){this.events={};if(this.options.escapeToClose){this.events.document={};this.events.document.keyup=function(n){m=n.keyCode?n.keyCode:n.which;if(this.isVisible&&m===l){this.hide()}}.bind(this);b(this.events.document,document,true)}}},destroy:function(){this.options&&(this.options.animate=false);this.hide();this._parent()}};return g.extend(h)});define("DS/UIKIT/Input/Date",["UWA/Core","UWA/Element","UWA/Event","UWA/Utils/Client","DS/UIKIT/Input/Text","DS/UIKIT/DatePicker"],function(h,e,c,g,f,d){var b=g.Platform.name.test("ios|android")&&g.Features.touchEvents;var a={name:"input-date",defaultOptions:{className:"",yearRange:20,firstDay:0,showClearIcon:false,},init:function(i){this._parent(i);var j=this.options;var k=j.showClearIcon?this.elements.input:this.elements.container;this.elements.picker=new d({field:k,trigger:k,renderTo:j.renderTo,firstDay:j.firstDay,minDate:j.min,maxDate:j.max,yearRange:j.yearRange})},buildSkeleton:function(){var j=this.elements,i=this.options;if(!i.showClearIcon){this._parent();return}j.input=this.buildInput().set(i.attributes).addClassName("form-control").addClassName(i.className);j.clear=h.createElement("span",{"class":this.name+"-reset fonticon fonticon-clear"});j.container=h.createElement("div",{html:[j.input,j.clear]});j.container.addClassName(this.name);if(b){j.container.addClassName("touch")}this.setDisabled(i.disabled)},buildInput:function(){var j=this.options,i={},k=h.createElement("input",{type:"text"});if(!this.options.disabled&&!this.options.allowTextEdition){k.readOnly=true}["placeholder","required"].forEach(function(l){if(j[l]){i[l]=j[l]}});k.set(i);return k},handleEvents:function(){var j=this;j._parent();if(!j.options.showClearIcon){return}var k=j.elements,i=j.isDisabled();e.removeEvent.call(k.container,"click",j.events.container.click);j.events.dateContainer={click:function(l){var n=c.getElement(l),m=/input-date-reset/.test(n.className);if(m){j.setDate(null,false)}j.dispatchEvent("onClick",[l])}};if(i){k.container.removeEvents(j.events.dateContainer)}else{k.container.addEvents(j.events.dateContainer)}},getDate:function(){return this.elements.picker.getDate()},setDate:function(i,j){return this.elements.picker.setDate(i,j)},setMinDate:function(i){return this.elements.picker.setMinDate(i)},setMaxDate:function(i){return this.elements.picker.setMaxDate(i)},clearDates:function(){return this.elements.picker.clearDates()}};return f.extend(a)});define("DS/UIKIT/Input/File",["UWA/Core","UWA/Utils","DS/UIKIT/Input","i18n!DS/UIKIT/assets/nls/UIKIT"],function(h,e,f,d){var g=["small","large","block","primary","success","default","info","warning","error"],c=new RegExp("^("+g.join("|")+")$");function a(k){if(!k){return""}var i=[],j=k.split(" ");j.forEach(function(l,n){var m=l.match(c);if(m){if(m[0]==="small"){i[n]="input-group-sm"}else{if(m[0]==="large"){i[n]="input-group-lg"}else{i[n]="btn-"+l}}}else{i[n]=l}});return i.join(" ")}var b={defaultOptions:{input:true,buttonBefore:true,buttonText:d.browse,placeholder:d.selectFile},init:function(i){i=i||{};i.className=a(i.className);i.buttonClassName=a(i.buttonClassName||"default");this._parent(i)},buildSkeleton:function(){var j=this.elements,i=this.options;j.container=h.createElement("div",{"class":"input-file input-group "+i.className});j.button=h.createElement("span",{"class":"btn btn-file "+i.buttonClassName,text:i.buttonText});j.input=h.createElement("input",{type:"file",id:i.id||"",attributes:i.attributes});j.input.multiple=!!i.multiple;j.buttonGroup=h.createElement("span",{"class":"input-group-btn"});j.button.inject(j.buttonGroup);j.buttonGroup.inject(j.container);j.input.inject(j.button);if(i.input){j.textfield=h.createElement("input",{type:"text","class":"form-control",placeholder:i.placeholder,required:i.required,attributes:{readonly:true}});i.inputAttributes&&j.textfield.set(i.inputAttributes);j.textfield.inject(j.container,i.buttonBefore?"":"top")}this.setDisabled(i.disabled)},handleEvents:function(){var i=this,j=this.elements;this._parent();if(!this.fileEvents){this.fileEvents={};if(e.Client.Engine.ie){this.fileEvents.textfield={focus:function(){i.elements.textfield.blur()}}}}if(this.isDisabled()){this.fileEvents.textfield&&j.textfield&&j.textfield.removeEvents(this.fileEvents.textfield)}else{this.fileEvents.textfield&&j.textfield&&j.textfield.addEvents(this.fileEvents.textfield)}},syncInput:function(){var k=this.elements,j=this.options,i;if(j.input){i=j.multiple&&k.input.files?k.input.files.length:1;k.textfield.value=i>1?i+" "+d.selectedFiles:this.getValue();if(this.getValue().length){this.elements.textfield.addClassName("files-uploaded")}else{this.elements.textfield.removeClassName("files-uploaded")}}},setValue:function(){this.elements.input.value="";this.syncInput()},setText:function(i){this.options.input&&this.elements.textfield.setText(i)},getValue:function(){var j;function i(k){return k.replace(/\\/g,"/").replace(/.*\//,"")||""}if(this.options.multiple){j=[].map.call(this.elements.input.files,function(k){return k.name}).join(";")}else{j=i(this.elements.input.value)}return j},setDisabled:function(i){this._parent(i);this.elements.button.toggleClassName("disabled",this.isDisabled());this.options.input&&(this.elements.textfield.disabled=this.isDisabled());return this},clear:function(){this.setValue();return this}};return f.extend(b)});define("DS/UIKIT/Autocomplete",["UWA/Core","UWA/Element","UWA/Event","UWA/Utils","UWA/Json","UWA/Controls/Abstract","UWA/Promise","UWA/Data","UWA/Utils/Client","DS/UIKIT/Spinner","DS/UIKIT/Scroller","DS/UIKIT/Badge","i18n!DS/UIKIT/assets/nls/UIKIT"],function(g,a,p,k,e,i,m,o,c,d,b,h,q){function f(u,t,s,r){if(t.addEventListener){t.addEventListener(u,s,r)}else{if(t.attachEvent){t.attachEvent("on"+u,s,r)}}}function l(t,s,r){if(s.removeEventListener){s.removeEventListener(t,r,false)}else{if(s.detachEvent){s.detachEvent("on"+t,r)}}}var j={8:"backspace",9:"tab",13:"enter",27:"escape",37:"left-arrow",38:"up-arrow",39:"right-arrow",40:"down-arrow",46:"del"};var n={name:"autocomplete",datasets:null,typeTimeout:null,selectedItems:null,badges:null,innerInputs:null,currentPosition:-1,currentBadge:null,currentSuggestions:[],keyboardIndex:-1,scroller:null,CLS_ITEM:"autocomplete-item",CLS_PARENT_ITEM:"autocomplete-parent-item",CLS_HOVERED_ITEM:"js-selected",CLS_FILLED:"autocomplete-filled",SUGGESTIONS_MAX_HEIGHT:200,suggestsDisplayed:false,defaultOptions:{className:"",placeholder:q.search,noResultsMessage:q.noResults,typeDelayBeforeSearch:500,minLengthBeforeSearch:1,showSuggestsOnFocus:false,maxSuggestsToDisplay:-1,multiSelect:false,itemMultiSelect:false,tokenSeparator:";",allowFreeInput:false,disabled:false,closableItems:true,floatingSuggestions:false,inputAutocompleteAttribute:"",},init:function(r){this.selectedItems=[];this.badges=[];this.datasets=[];this.innerInputs=[];this._parent(r);this.options.maxHeight=(r&&r.maxHeight)||this.SUGGESTIONS_MAX_HEIGHT;this.getSuggestion=(r&&r.getSuggestion)?r.getSuggestion:function(s){var t;if(s.hasClassName(this.CLS_ITEM)){return s}else{t=s.getParent("."+this.CLS_ITEM);return t}};this.buildSkeleton();r&&r.datasets&&this._addDatasets(r.datasets)},_buildInput:function(){var t=this.options,u=this.name,s={},r=g.createElement("input",{type:"text"});["placeholder","required","pattern","maxlength"].forEach(function(w){if(t[w]){s[w]=t[w]}});if(t.inputAutocompleteAttribute){var v=t.inputAutocompleteAttribute;v=(k.Client.Engine.chrome&&v==="chrome-randomize")?k.getUUID().substring(0,8):v;s.autocomplete=v}r.set(s);r.addClassName(u+"-input");!t.multiSelect&&r.addClassName(u+"-single-select");r.setAttribute("size",(r.getAttribute("placeholder")||"").length*((q._lang==="zh"||q._lang==="ja")?2:1));if(this.options.name){r.name=this.options.name}if(!this.options.multiSelect){r.setStyle("width","100%")}return r},_buildInnerInput:function(){var s=g.createElement("input",{type:"text"}),r;s.addClassName(this.name+"-inner-input");s.addEvent("keyup",function(){r=5+(s.value.length)*8;s.setStyle("width",r+"px")});s.addEvents(this.events.input);return s},buildSkeleton:function(){var t=this.elements,s=this.name,r=this.options;if(t.container){return}t.container=g.createElement("div",{"class":s+" "+r.className,});t.inputContainer=g.createElement("div",{"class":s+"-searchbox",tabindex:"1"}).inject(t.container);c.Platform.ios&&t.inputContainer.classList.add("prevent-ios-zoom-in");t.input=this._buildInput();t.input.inject(t.inputContainer);if(r.multiSelect===false){t.clear=g.createElement("span",{"class":s+"-reset fonticon fonticon-clear"}).inject(t.inputContainer)}t.suggestsContainer=g.createElement("div",{"class":s+"-suggests"}).inject(t.container);r.multiSelect&&r.floatingSuggestions&&t.suggestsContainer.addClassName(s+"-floating-suggests");t.suggestsScroll=g.createElement("div",{"class":s+"-suggests-scroll"}).inject(t.suggestsContainer);t.suggests=g.createElement("ul",{tabindex:"1"}).inject(t.suggestsScroll);if(k.Client.Engine.firefox){t.suggests.addClassName("scroller-shift")}this.scroller=new b({element:t.suggestsScroll}).inject(t.suggestsContainer);t.scrollerContent=this.scroller.elements.content;this.setDisabled(r.disabled)},_addDatasets:function(r){var s=this;k.splat(r).forEach(function(t){s.addDataset(t,t.configuration)});return this},addDataset:function(r,u){var s={items:[]},t=function(v,z,y){var x,w;v.addClassName("default-template");if(!y.parent){x=g.createElement("span",{"class":"item-label"});x.setText(y.label);if(y.parentReference){x.setStyle("padding-left",y.parentReference.level+"em");x.addClassName("sub-item")}x.inject(v);if(y.subLabel){v.addClassName("with-sub-label");w=g.createElement("span",{"class":"sub-label"});w.setText(y.subLabel);if(y.parentReference){w.setStyle("padding-left",y.parentReference.level+"em")}w.inject(v)}}else{x=g.createElement("span",{"class":"item-parent-label"});x.setText(y.label);if(y.parentReference){x.setStyle("margin-left",y.parentReference.level+"em");x.addClassName("sub-item")}x.inject(v)}};s.id=k.getUUID().substr(0,6);s.dataCache={};if(r.items){this.addItems(r.items,s)}u=u?u:r.configuration;if(u){["searchEngine","remoteSearchEngine","filterEngine","templateEngine","dataParser","onError","onTimeout","onGetResults","onNoResults"].forEach(function(v){if(g.is(u[v],"function")){s[v]=u[v]}})}s.templateEngine=s.templateEngine?s.templateEngine:t;this.datasets.push(g.merge(s,r));this.used&&this.getSuggestions(false,true)},addItems:function(r,t){var s=this;k.splat(r).forEach(function(u){if(r.parentItemId){u.parentItemId=r.parentItemId;u.level=r.level}s._addItem(u,t)})},_addItem:function(r,t){var s={};if((!r.value||!r.value.length)&&!r.items){return}s.id=k.getUUID().substr(0,6);s.datasetId=t.id;s.label=(r.label)?(r.label):(r.value);t.items.push(g.merge(s,r));if(r.items){s.parent=true;s.level=(!r.level)?(1):(r.level+1);r.items.level=s.level;r.items.parentItemId=s.id;this.addItems(r.items,t)}r.selected&&this.dispatchEvent("onSelect",[s])},enableItem:function(s,r){return this._setItemDisabled(s,false,r)},disableItem:function(s,r){return this._setItemDisabled(s,true,r)},_setItemDisabled:function(u,r,t){var s=this.getItem(u);if(!s){return}if(typeof r==="undefined"){r=true}s.disabled=r;if(t===true&&this.options.multiSelect){this._setBadgeDisabled(s.id,r)}return this},_setBadgeDisabled:function(u,t){var r=this.getSelectedItemPosition(u),s;if(r>=0){s=this.badges[r];s&&s.setDisabled(t)}return this},_removeItemFromCache:function(u,t){var r,v,s;if(u.dataCache){for(v in u.dataCache){if(u.dataCache.hasOwnProperty(v)){r=u.dataCache[v];s=r.indexOf(t);g.is(s)&&u.dataCache[v].splice(s,1)}}}},removeItem:function(s){var r=this;k.splat(s).forEach(function(t){r._removeItem(t)})},_removeItem:function(u){var s=this.getItem(u),t,r;if(s){this.onUnselect(s);t=this.getDataset(s.datasetId);r=t.items.indexOf(s);g.is(r)&&t.items.splice(r,1);this._removeItemFromCache(t,s);r=this.currentSuggestions.indexOf(s);g.is(r)&&this.currentSuggestions.splice(r,1)}},getId:function(){return this.elements.input.id},setId:function(r){if(g.is(r,"string")){this.elements.input.id=r}return this},getName:function(){return this.elements.input.name},toggleSelect:function(u,s,r,t){if(!u||u.disabled){return}if(r===true){this.dispatchEvent("onSelect",[u,s])}else{if(r===false){this.dispatchEvent("onUnselect",[u,s,t])}else{if(u.selected){this.dispatchEvent("onUnselect",[u,s,t])}else{this.dispatchEvent("onSelect",[u,s])}}}return u},onSelect:function(v,r){var y,t,x,w,s=this.options,u=this;if(!s.multiSelect){this.selectedItems[0]&&this.onUnselect(this.selectedItems[0]);this.elements.input.value=v.label;this.elements.container.toggleClassName(this.CLS_FILLED,true);this.dispatchEvent("onHideSuggests")}else{w=this._buildInnerInput();y={id:"selected-"+v.id,content:v.label,selectable:true,events:{onClose:function(B){var A=u.getBadgePosition(t.elements.container),z=(A===u.badges.length-1)?-1:A;u._handleBadgeDeletion(A,z);p.preventDefault(B)}}};if(s.closableItems){y.closable=true}t=new h(y);t.elements.container.setAttribute("tabindex","-1");t.elements.container.setStyle("outline","0");this._toggleBadgeSelection(this.currentPosition,false);if(r>=0){this.resetInput(r);if(this.badges[r-1]){t.inject(this.badges[r-1].elements.container,"after")}else{t.inject(this.elements.inputContainer.getChildren()[0],"before")}this.badges.splice(r,0,t);this.innerInputs.splice(r,0,w)}else{this.resetInput();t.inject(this.elements.input,"before");this.badges.push(t);this.innerInputs.push(w)}w.inject(t.elements.container,"before");this.dispatchEvent("onUpdateInputPosition",[r]);this._toggleBadgeSelection(this.currentPosition);if(!s.itemMultiSelect){x=this.elements.suggests.getElement("#"+this.CLS_ITEM+"-"+v.id);x&&x.addClassName("selected-item")}}v.selected=true;if(r>=0){this.selectedItems.splice(r,0,v)}else{this.selectedItems.push(v)}this.options.multiSelect&&this.options.itemMultiSelect&&this.options.showSuggestsOnFocus&&this.showAll();if(g.is(v.handler,"function")){v.handler.call(this)}this._updateSuggestsPosition()},onUnselect:function(w,r,v,x){var u,t,y,s=this.options;if(!s.multiSelect){(x!==false)&&this.resetInput();u=this.getSelectedItemPosition(w.id);g.is(u)&&u>-1&&this.selectedItems.splice(u,1);this.elements.container.toggleClassName(this.CLS_FILLED,false)}else{u=(this.options.itemMultiSelect&&r>=0)?r:this.getSelectedItemPosition(w.id);if(g.is(u)&&u>-1){this.resetInput(r);t=this.badges[u];if(!t){return}this._toggleBadgeSelection(u,false);t.destroy();this.innerInputs[u].destroy();this.badges.splice(u,1);this.selectedItems.splice(u,1);this.innerInputs.splice(u,1);(v>=0)&&this._updateBadgeFocus(v)}if(!s.itemMultiSelect){y=this.elements.suggests.getElement("#"+this.CLS_ITEM+"-"+w.id);y&&y.removeClassName("selected-item")}}w.selected=false;if(!s.multiSelect){this.dispatchEvent("onHideSuggests")}this._updateSuggestsPosition()},unselectAll:function(r){var s=this,t=[];t=t.concat(this.selectedItems);t.forEach(function(u){if(r===false){s.dispatchEvent("onUnselect",[u])}else{s.onUnselect(u)}})},showAll:function(){var r=[],s;this.datasets.forEach(function(t){s={};s.suggestions=[];if(t.items&&t.items.length){s=g.merge(s,t);s.suggestions=t.items;r.push(s)}});if(g.is(this.options.filterEngine,"function")){r=this.options.filterEngine.call(this,r)}if(r.length){this.dispatchEvent("onUpdateSuggests",[r])}},getItems:function(){var r=[];this.datasets&&this.datasets.forEach(function(s){if(s.items&&s.items.length){r=r.concat(s.items)}});return r},getItem:function(y){var w,u,r,s,x,t,v=false;for(w=0,u=this.datasets.length;w<u;w+=1){x=this.datasets[w];if(!x.items){v=false;continue}for(r=0,s=x.items.length;r<s;r+=1){v=x.items[r];if(y&&y.nodeType){t=y.hasClassName(this.CLS_ITEM)?y:y.getParent();if(this.CLS_ITEM+"-"+v.id===t.id){break}}else{if(r===y||v.id===y||v.name===y||v.value===y){break}}v=false}if(v){break}}return v},getItemByLabel:function(t){var w,u,r,s,x,v=false;for(w=0,u=this.datasets.length;w<u;w+=1){x=this.datasets[w];if(!x.items){v=false;break}for(r=0,s=x.items.length;r<s;r+=1){v=x.items[r];if(v.label.toLowerCase()===t.toLowerCase()){break}v=false}if(v){break}}return v},getItemFromSuggestion:function(r){var t=null,s=r.id&&r.id.replace(this.CLS_ITEM+"-","");if(!s){return}this.currentSuggestions.some(function(u){if((u.id+"")===s){t=u}return t});return t},getDataset:function(u){var s,r,t;for(s=0,r=this.datasets.length;s<r;s+=1){t=this.datasets[s];if(s===u||t.id===u||t.name===u){break}t=false}return t},cleanDataset:function(u){var t=this.getDataset(u),r,s=this;r=this.selectedItems.filter(function(v){return(v.datasetId===t.id)});r.forEach(function(v){s.onUnselect(v)});t.dataCache={};t.items=[]},removeDataset:function(w){var v=this.getDataset(w),s,r=[],u=this,t=false;if(v){s=this.datasets.indexOf(v);g.is(s)&&this.datasets.splice(v,1);r=this.selectedItems.filter(function(x){return(x.datasetId===v.id)});r.forEach(function(x){u.onUnselect(x)});t=this.currentSuggestions.some(function(x){return(x.datasetId===v.id)});t&&this.getSuggestions()}},_appendDatasetName:function(u,r){var s,t;if(u){s=g.createElement("li",{"class":"dataset-header"});t=g.createElement("span");t.setText(u);t.inject(s);s.inject(r)}},_appendItem:function(v,t,r){var s,u;if(t.parentItemId){u=this.getItem(t.parentItemId);if(u){t.parentReference=u;if(!r.getElement("#"+this.CLS_ITEM+"-"+t.parentItemId)){this._appendItem(v,u,r)}}}s=g.createElement("li",{"class":this.CLS_ITEM});s.id=this.CLS_ITEM+"-"+t.id;v.templateEngine.call(this,s,v,t);if(t.parent){s.addClassName(this.CLS_PARENT_ITEM);if(t.value&&!t.disabled){s.addClassName("clickable")}}t.selected&&!this.options.itemMultiSelect&&s.addClassName("selected-item");t.disabled&&s.addClassName("disabled");t.elements=[];t.elements.container=s;s.inject(r)},defaultSearchEngine:function(s,t){var r=[];s.items&&s.items.forEach(function(u){if(u.value&&u.label.toLowerCase().contains(t.toLowerCase())){r.push(u)}});return r},defaultRemoteSearchEngine:function(u,v){var r,t=this,s;return new m(function(x,w){if(u.searchUrl){r=u.searchUrl.replace("{text}",v);o.request(r,{method:"GET",type:"text",onComplete:function(y){s={};s.matchingItems=[];if(y){s.matchingItems=(g.is(u.dataParser,"function"))?(u.dataParser.call(t,u,y)):(t.defaultDataParser(y))}s.dataset=u;x(s)},onFailure:function(y){y.type="error";y.dataset=u;w(y)},onTimeout:function(y){y.type="timeout";y.dataset=u;w(y)}})}})},isSelected:function(t,s){var r=false;this.selectedItems.some(function(u){if(u.datasetId===t&&u.value===s){r=u}return r});return r},getFocusedItem:function(){var r=null;if(this.options.multiSelect&&this.currentPosition>=0){r=this.selectedItems[this.currentPosition]}return r},getFocusedBadge:function(){var r=null;if(this.options.multiSelect&&this.currentPosition>=0){r=this.badges[this.currentPosition]}return r},getSelectedItemPosition:function(s){var r=-1;this.selectedItems.some(function(u,t){if(u.id===s){r=t}return r>-1});return r},getBadgePosition:function(s){var r=-1;this.badges.some(function(t,u){if(t.elements.container===s){r=u}return r>-1});return r},getSuggestions:function(A,x){var r=[],B,y,w,u=this,v,t=true,s,z={success:function(C){B={};B.suggestions=C.matchingItems;v=C.dataset;y&&y.elements&&y.destroy();if(B.suggestions.length>0){if(g.is(v.onGetResults,"function")){v.onGetResults.call(u,v,A,B.suggestions)}B.suggestions.forEach(function(D){if(!D.datasetId){D.datasetId=v.id}s=u.isSelected(D.datasetId,D.value);if(s){D.selected=true;D.id=s.id}if(!D.id){D.id=k.getUUID().substr(0,6)}});if(g.is(v.filterEngine,"function")){B.suggestions=v.filterEngine.call(u,v,B.suggestions)}}else{if(g.is(v.onNoResults,"function")){v.onNoResults.call(u,v,A)}}if(B.suggestions&&B.suggestions.length){B=g.merge(B,v);B.id=v.id;r.push(B)}v.dataCache[A]=B.suggestions;if(g.is(u.options.filterEngine,"function")){r=u.options.filterEngine.call(u,r)}u.dispatchEvent("onUpdateSuggests",[r,x])},error:function(C){y&&y.elements&&y.destroy();v=C.dataset;if(C.type==="error"&&g.is(v.onError,"function")){v=C.dataset;v.onError.call(u,C||[],A)}if(C.type==="timeout"&&g.is(v.onTimeout,"function")){v.onTimeout.call(u,C||[],A)}u.dispatchEvent("onUpdateSuggests",[r,x])}};A=A||this.elements.input.value;this.elements.suggests.empty();this.datasets.forEach(function(C){B={};B.suggestions=[];if(C.dataCache[A]){B.suggestions=C.dataCache[A]}else{if(g.is(C.searchEngine,"function")){B.suggestions=C.searchEngine.call(u,C,A);if(g.is(C.filterEngine,"function")){B.suggestions=C.filterEngine.call(u,C,B.suggestions)}C.dataCache[A]=B.suggestions}else{if(g.is(C.remoteSearchEngine,"function")){t=false;if(!y){w=g.createElement("li",{"class":"message"});w.inject(u.elements.suggests,"top");y=new d();y.inject(w);y.show()}u.onShowSuggests();m.cast(C.remoteSearchEngine.call(u,C,A)).then(z.success,z.error)}else{if(C.searchUrl){t=false;if(!y){w=g.createElement("li",{"class":"message"});w.inject(u.elements.suggests,"top");y=new d();y.inject(w);y.show()}u.onShowSuggests();m.cast(u.defaultRemoteSearchEngine(C,A)).then(z.success,z.error)}else{B.suggestions=u.defaultSearchEngine(C,A)}if(g.is(C.filterEngine,"function")){B.suggestions=C.filterEngine.call(u,C,B.suggestions)}C.dataCache[A]=B.suggestions}}}if(B.suggestions&&B.suggestions.length){B=g.merge(B,C);B.id=C.id;r.push(B)}});if(t){if(g.is(this.options.filterEngine,"function")){r=this.options.filterEngine.call(u,r)}this.dispatchEvent("onUpdateSuggests",[r,x])}},_shouldDropUp:function(t){var v=t||(this.getContent().getOffsets().y+this.elements.inputContainer.getDimensions().height),r=this.elements.suggestsContainer.getSize().height,s=document.documentElement.clientHeight||window.innerHeight,u=window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop;return(v+r>s+u)},_shouldDropLeft:function(t){var u=t,s=this.elements.suggestsContainer.getSize().width,r=window.innerWidth||document.documentElement.clientWidth,v=window.pageXOffset||document.body.scrollLeft||document.documentElement.scrollLeft;return(u+s>r+v)},_updateSuggestsPosition:function(){var r=this.elements.container,v=this.elements.suggestsContainer,w=this.options.floatingSuggestions&&this.options.multiSelect,z,u=0,s=0,A=0,t,y,x;if(w){z=(this.innerInputs&&this.innerInputs[this.currentPosition])?this.innerInputs[this.currentPosition]:this.elements.input;u=z?z.getPosition().x:this.elements.input.x||0;s=z?z.getPosition().y:this.elements.input.y||0;A=z&&z.getDimensions().height||0;t=z.getOffsets().y+A+4;this.elements.suggestsContainer.setStyle("top","")}y=this._shouldDropUp(t);if(w){x=this._shouldDropLeft(z.getOffsets().x);if(x){v.setStyle("left",u-((z.getOffsets().x+v.getSize().width)-document.documentElement.clientWidth))}else{v.setStyle("left",u)}if(y){v.setStyle("top",s-v.getDimensions().height-8)}else{v.setStyle("top",s+A+4)}}if(y){r.addClassName("dropup")}else{r.removeClassName("dropup")}},onUpdateSuggests:function(s,w){var t,v=this,x=1,r=0,z=g.createElement("div"),y=this.options.noResultsMessage,u=false;this.elements.suggests.empty();this.currentSuggestions=[];this.keyboardIndex=-1;this.elements.suggestsContainer.setStyle("height",this.options.maxHeight+"px");if(s.length){this.scroller.scrollTo(0,0);this.elements.suggestsContainer.removeClassName("no-result");s.forEach(function(A){if(A.name&&A.displayName){v._appendDatasetName(A.name,z)}if(Array.isArray(A.suggestions)){v.currentSuggestions=v.currentSuggestions.concat(A.suggestions);A.suggestions.forEach(function(B){if((v.options.maxSuggestsToDisplay<0)||(v.options.maxSuggestsToDisplay>0&&x<=v.options.maxSuggestsToDisplay)){v._appendItem(A,B,z);x++}})}});this.elements.suggests.setHTML(z.getHTML())}else{if(y){t=g.createElement("li",{"class":"message"});t.setHTML(this.options.noResultsMessage);t.inject(this.elements.suggests);this.elements.suggestsContainer.addClassName("no-result")}else{u=true}}this.elements.container.addClassName(this.name+"-suggestsDisplayed");r=this.elements.suggests.offsetHeight;if((r>0)&&(r+20<=this.options.maxHeight)){this.elements.suggestsContainer.setStyle("height",(r+20)+"px");this.elements.suggestsScroll.setStyle("height",(r+20)+"px")}else{this.elements.suggestsScroll.setStyle("height",this.options.maxHeight+"px")}this.elements.container.removeClassName(this.name+"-suggestsDisplayed");if(!u&&!w){this.dispatchEvent("onShowSuggests")}else{this.dispatchEvent("onHideSuggests")}},onFocus:function(){var r=this.elements;if(r.input.value===this.options.placeholder){r.input.value=""}this.elements.inputContainer.addClassName("autocomplete-searchbox-focus");if(this.options.showSuggestsOnFocus&&!this.elements.input.value.length){this.showAll()}else{if(this.options.multiSelect&&this.elements.input.value.length&&this.currentSuggestions.length){this.onShowSuggests()}}},onKeyUp:function(v){var w=p.getElement(v),s=j[v.keyCode],r=(s==="up-arrow"),y=(s==="down-arrow"),x=(s==="enter"),u=(s==="escape"),t=(s==="tab");if(!r&&!y&&!x&&!u&&!t){if(w.value.length===0){this.onHideSuggests();this.options.showSuggestsOnFocus&&this.showAll();if(!this.options.multiSelect){this.selectedItems[0]&&this.onUnselect(this.selectedItems[0]);this.elements.container.toggleClassName(this.CLS_FILLED,false)}return}if(w.value.length>0){!this.options.multiSelect&&this.elements.container.toggleClassName(this.CLS_FILLED,true)}if(w.value.length>=this.options.minLengthBeforeSearch){clearTimeout(this.typeTimeout);this.typeTimeout=setTimeout(function(){this.getSuggestions(w.value)}.bind(this),this.options.typeDelayBeforeSearch)}}},onKeyDown:function(){this.used=true;this.elements.inputContainer.addClassName("autocomplete-searchbox-active");if(this.options.multiSelect&&this.elements.input&&this.elements.input.value){this.elements.input.setStyle("width",Math.max(this.elements.input.value.length,this.elements.input.size)*8+"px")}},onShowSuggests:function(){var r=this.elements.container;this._updateSuggestsPosition();r.addClassName(this.name+"-suggestsDisplayed");this.suggestsDisplayed=true;(this.keyboardIndex<0)&&this._updateKeyboardIndex("down")},onHideSuggests:function(){this.elements.container.removeClassName(this.name+"-suggestsDisplayed");this.suggestsDisplayed=false},onClickOutside:function(){if(this.elements.input.placeholder===""){this.elements.input.placeholder=this.options.placeholder}this.elements.inputContainer.removeClassName("autocomplete-searchbox-focus");this.elements.inputContainer.removeClassName("autocomplete-searchbox-active");this.dispatchEvent("onHideSuggests")},resetInput:function(r){var s;if(r>=0){s=this.innerInputs[r];s&&s.setStyle("width","5px")}else{s=this.elements.input;this.elements.input.placeholder=this.options.placeholder}if(s){s.value=""}!this.options.multiSelect&&this.elements.container.toggleClassName(this.CLS_FILLED,false)},reset:function(r){this.resetInput();this.unselectAll(r);this._updateBadgeFocus(-1)},resetCache:function(){this.datasets.forEach(function(r){r.dataCache={}})},isValid:function(){if(this.options.allowFreeInput){return true}else{if(!this.options.multiSelect){return(!this.selectedItems[0]||this.selectedItems[0]&&this.selectedItems[0].value&&this.elements.input.value===this.selectedItems[0].value)}else{return(!(this.elements.input.value!==""&&this.selectedItems.length===0))}}},isEmpty:function(){if(!this.options.multiSelect){return(!this.elements.input.value||this.elements.input.value==="")}else{return((!this.selectedItems||this.selectedItems.length===0)&&(!this.elements.input.value||this.elements.input.value===""))}},getValue:function(){var s="",r=this;this.selectedItems.forEach(function(t){if(t.value){s=s.concat(t.value+r.options.tokenSeparator)}});return s.substring(0,s.length-1)},getSelection:function(){var u,t=this.options.allowFreeInput,r=this.elements.input.value,s=[];if(!this.options.multiSelect){u=this.selectedItems[0];if(u){if(u.value&&u.value===r){return u}else{if(t){return(r)?(r):("")}else{return""}}}else{if(t){return(r)?(r):("")}else{return""}}}else{s=s.concat(this.selectedItems);if(t){r&&s.push(r)}return(s.length)?(s):("")}},getSelectionByDataset:function(t){var s=this.getDataset(t),r=[];if(!s){return}r=this.selectedItems.filter(function(u){return(u.datasetId===s.id)});return(r.length)?(r):("")},defaultDataParser:function(v){var w,s,u;if(e.isJson(v)){v=e.decode(v);u=true}else{v=e.xmlToJson(v);for(w in v){if(v.hasOwnProperty(w)){v=v[w];break}}}for(w in v){if(v.hasOwnProperty(w)){if(!s){s=w}if(Array.isArray(v[w])){v=v[w];u=true;break}}}if(!u&&s){v=[v[s]]}if(!Array.isArray(v)){var r=[];for(var t in v){if(v.hasOwnProperty(t)){r[t]=v[t]}}v=[];v.push(r)}return Array.isArray(v)?v:[]},getCurrentPosition:function(){return this.currentPosition},getNeighbourBadge:function(u,r){var t=-1,s=(r>=0)?r:this.currentPosition,v=u||"left";if(s>=0){t=(v==="left")?(s-1):(s+1)}else{t=(v==="left")?(this.badges.length-1):-1}return this.badges[t]||null},getNeighbourSelectedItem:function(u,r){var t=-1,s=(r>=0)?r:this.currentPosition,v=u||"left";if(s>=0){t=(v==="left")?(s-1):(s+1)}else{t=(v==="left")?(this.badges.length-1):-1}return this.selectedItems[t]||null},_updateBadgeFocus:function(r,s){this._toggleBadgeSelection(this.currentPosition,false);this.dispatchEvent("onUpdateInputPosition",[r]);!s&&this._toggleBadgeSelection(r,true,s)},_updateInnerInputFocus:function(r,s){var t=this.innerInputs[r];if(t){!s&&this.dispatchEvent("onUpdateInputPosition",[r]);t.focus()}},_toggleBadgeSelection:function(s,r,u){var t=this.badges[s];if(!t){return}if(typeof r==="undefined"){r=true}if(r){!this.options.closableItems&&t.setClosable(true);t.select();t.elements.container.focus();!u&&this.dispatchEvent("onSelectBadge",[this.selectedItems[s],t,this.getBadgePosition(t.elements.container)]);this.currentBadge=t}else{if(this.currentBadge){!this.options.closableItems&&t.setClosable(false);t.select(false);!u&&this.dispatchEvent("onUnselectBadge",[this.selectedItems[s],t,this.getBadgePosition(t.elements.container)]);this.currentBadge=null}}},onUpdateInputPosition:function(r){this.currentPosition=r},_updateKeyboardIndex:function(w){var v=this,z=this.keyboardIndex,s=this.keyboardIndex,t,u,x,r=function(C){var B=C;t=false;if(C===-1&&w!=="reset"){C=0;t=true}else{if(v.currentSuggestions&&w==="down"&&C<v.currentSuggestions.length-1){C=C+1;t=true}else{if(w==="up"&&C>0){C=C-1;t=true}else{if(w==="reset"){v._hoverItem(C,false);C=-1}}}}if(t){x=A(C);if(!x){if(C===v.currentSuggestions.length-1){x=u;C=B}else{return r(C)}}}return C},A=function(B){var C=null;if(v.currentSuggestions){C=v.currentSuggestions[B]}return(C&&(C.disabled||!C.value))?(false):(C)},y=function(J,F){var D=0,K,G,B,H,I,C,E;if(!J||!F){return}C=v.elements.suggestsContainer.getElement("#"+v.CLS_ITEM+"-"+J.id);E=v.elements.suggestsContainer.getElement("#"+v.CLS_ITEM+"-"+F.id);if(!C||!E){return}K=v.elements.suggestsContainer.getDimensions().height;G=C.offsetTop;B=E.offsetTop;H=Math.floor(G/K);I=Math.floor(B/K);if(H+1===I){D=1}else{if(H-1===I){D=2}}return D};u=A(s);if(typeof w==="number"){z=w;x=A(z);if(!x){return}u&&this._hoverItem(u,false);this._hoverItem(x,true)}else{z=r(z);if(t&&z>=0){u&&this._hoverItem(u,false);x&&this._hoverItem(x,true,(z===0)?(3):(y(u,x)))}}this.keyboardIndex=z},_hoverItem:function(u,t,v){var s,r;if(u){r=(t===undefined)?(true):t;s=this.elements.suggestsContainer.getElement("#"+this.CLS_ITEM+"-"+u.id);if(!s){return}if(r){s.addClassName(this.CLS_HOVERED_ITEM);s.focus();if(v===1){this.scroller.scrollToElement(s,"top")}if(v===2){this.scroller.scrollToElement(s,"bottom")}if(v===3){this.scroller.scrollTo(0,0)}}else{s.removeClassName(this.CLS_HOVERED_ITEM)}}},_getActiveItem:function(){var r=this.keyboardIndex;if(r>=0){return this.currentSuggestions[r]}else{return false}},enable:function(){return this.setDisabled(false)},disable:function(){return this.setDisabled()},isDisabled:function(){return this.elements.input.disabled},setDisabled:function(r){var s=this.elements;if(typeof r==="undefined"){r=true}s.input.disabled=r;s.inputContainer.toggleClassName("disabled",r);this.handleEvents();return this},_selectCurrentInput:function(s){var t=s>=0?this.innerInputs[s].value:this.elements.input.value,u,r=this.options.itemMultiSelect===true?true:null;if(!t){return}u=this.getItemByLabel(t);if(!u&&this.suggestsDisplayed&&this.currentSuggestions&&this.currentSuggestions.length===1){u=this.currentSuggestions[0]}if(!u&&this.options.allowFreeInput){u={};u.id=k.getUUID().substr(0,6);u.value=u.label=t}if(!u){return}return this.toggleSelect(u,s,r)},_handleBadgeDeletion:function(t,s){var r=this.badges[t];if(s===this.selectedItems.length){s=-1}if(r&&r.isDisabled()){return}this.elements.inputContainer.addClassName("autocomplete-searchbox-active");this.dispatchEvent("onUnselect",[this.selectedItems[t],t,s]);if(s===-1){this.elements.input.focus()}},handleEvents:function(){var r=this.options.itemMultiSelect===true?true:null;if(!this.events){this.events={};this.events.input={focus:function(t){var u=p.getElement(t),s=/inner-input/.test(u.className);if(s){this._updateBadgeFocus(this.getBadgePosition(u.nextSibling),true)}else{this._updateBadgeFocus(-1)}if(!/fonticon-cancel/.test(u.className)){this.dispatchEvent("onFocus",[t])}}.bind(this),blur:function(s){this.dispatchEvent("onBlur",[s])}.bind(this),keyup:function(s){this.dispatchEvent("onKeyUp",[s])}.bind(this),keydown:function(s){var E=j[s.keyCode],B=p.getElement(s),A=/inner-input/.test(B.className),y=this.innerInputs[this.currentPosition],w=A&&y&&y.value.length,v=/autocomplete-input/.test(B.className),D=v&&this.elements.input.value.length,x=(E==="up-arrow"),u=(E==="down-arrow"),C=(E==="enter"),t=(E==="tab"),F=(E==="escape");this.dispatchEvent("onKeyDown",[s]);if(x){this._updateKeyboardIndex("up");p.preventDefault(s)}if(u){this._updateKeyboardIndex("down");p.preventDefault(s)}if(C||t){var z=this._getActiveItem(),G=null;if(C&&z&&this.suggestsDisplayed){p.preventDefault(s);G=this.toggleSelect(z,this.currentPosition,r)}else{if(this.options.multiSelect&&(w||D)){G=this._selectCurrentInput(this.currentPosition);(C||G)&&p.preventDefault(s)}}if(A&&G){if(C){(this.innerInputs[this.currentPosition+1]||this.elements.input).focus()}else{this.elements.input.focus()}}else{if(!A&&t){this.elements.inputContainer.removeClassName("autocomplete-searchbox-focus");this.elements.inputContainer.removeClassName("autocomplete-searchbox-active")}}}if(t||F){this.dispatchEvent("onHideSuggests")}}.bind(this)};if(c.Engine.firefox){this.events.input.compositionupdate=function(s){this.dispatchEvent("onKeyUp",[s])}.bind(this)}this.events.inputContainer={click:function(w){var y=p.getElement(w),u=/badge/.test(y.className)&&!(/disabled/.test(y.className)||/disabled/.test(y.parentElement.className)),t=/badge-close/.test(y.className)&&!/disabled/.test(y.parentElement.className),s=/inner-input/.test(y.className),v=/fonticon-cancel/.test(y.className),x=/autocomplete-reset/.test(y.className);if(!u&&!s&&!v){this.elements.input.focus()}if(u&&!t){if(y.hasClassName("badge-content")){y=y.getParent()}this._updateBadgeFocus(this.getBadgePosition(y))}if(x&&this.options.multiSelect===false){this.elements.inputContainer.addClassName("autocomplete-searchbox-active");this.reset(false);this.options.showSuggestsOnFocus&&this.showAll()}}.bind(this),keydown:function(I){var N=j[I.keyCode],y,t,M=p.getElement(I),G=/badge/.test(M.className),F=G&&/disabled/.test(M.className),E=/inner-input/.test(M.className),D=this.innerInputs[this.currentPosition],w=E&&D&&D.value.length,x=D&&D.value==="",H=/autocomplete-input/.test(M.className),s=H&&this.elements.input.value.length,B=(N==="left-arrow"),C=(N==="right-arrow"),v=(N==="backspace"),A=(N==="del"),u=(N==="tab");if(B){y=-1;t=-1;if(!this.options.multiSelect||!this.selectedItems.length||w||s){return}if(this.currentPosition!=null&&this.currentPosition>=0){if(G){t=this.currentPosition}else{if(x){y=this.currentPosition-1}}}else{if(this.elements.input.value===""){y=this.selectedItems.length-1}}if(y>=0){this._updateBadgeFocus(y)}else{if(t>=0){this._updateInnerInputFocus(t)}}}if(C){y=-1;t=-1;if(!this.options.multiSelect||!this.selectedItems.length||w||s){return}if(this.currentPosition!=null&&this.currentPosition>=0){if(G){t=this.currentPosition+1}else{if(x){y=this.currentPosition}}}if(y>=0&&y<this.selectedItems.length){this._updateBadgeFocus(y)}else{if(t>=0&&t<this.selectedItems.length){this._toggleBadgeSelection(this.currentPosition,false);this._updateInnerInputFocus(t)}else{if(y===this.selectedItems.length||t===this.selectedItems.length){this._updateBadgeFocus(-1);this.elements.input.focus();this.onShowSuggests()}}}}if(v||A){var L,J,K,z;if(!this.options.multiSelect&&!this.options.allowFreeInput){J=this.getItem(M.value);K=M.value.substring(0,M.value.length-1);z=this.getItem(K);if(J&&!z){this.onUnselect(this.selectedItems[0],null,null,false)}}else{if(!this.selectedItems.length||w||s||F){return}if(v&&this.currentPosition<0&&H&&this.elements.input.value===""){L=this.selectedItems.length-1;y=-1}else{if(this.currentPosition>=0){if(v){L=E?this.currentPosition-1:this.currentPosition;y=E?this.currentPosition-2:this.currentPosition-1}else{L=this.currentPosition;y=(L===this.badges.length-1)?-1:L}}}L>=0&&this._handleBadgeDeletion(L,y);p.preventDefault(I)}}if(u&&G){this.elements.input.focus();p.preventDefault(I)}}.bind(this)};this.events.suggestsContainer={mouseover:function(w){var x=p.getElement(w),t=this.getSuggestion(x),z,u,s=-1,y,v;if(!t||!t.id){return}y=t.getElement(".item-label");if(y){if(y.offsetWidth<y.scrollWidth){v=y.textContent;v&&y.setAttribute("title",v)}else{y.setAttribute("title","")}}z=t.id.replace("autocomplete-item-","");for(u=0;u<this.currentSuggestions.length;u++){if(this.currentSuggestions[u].id===z){s=u;break}}s>-1&&this._updateKeyboardIndex(s)}.bind(this),click:function(u){var v=p.getElement(u),s=this.getSuggestion(v),t;this.elements.inputContainer.addClassName("autocomplete-searchbox-active");if(!s){return}if(!s.hasClassName(this.CLS_PARENT_ITEM)||(s.hasClassName(this.CLS_PARENT_ITEM)&&s.hasClassName("clickable"))){t=this.getItemFromSuggestion(s);if(!t||t.disabled){return}this.toggleSelect(t,this.currentPosition,r);if(this.options.multiSelect){if(this.currentPosition>-1){(this.innerInputs[this.currentPosition+1]||this.elements.input).focus()}else{this.elements.input.focus()}}}}.bind(this)};this.events.document={click:function(s){if(!p.getElement(s).isInjected(this.elements.container)&&s.target!==this.elements.container.suggestsContainer){this.dispatchEvent("onClickOutside",[s]);this._updateBadgeFocus(-1)}}.bind(this)};this.events.scrollerContent={scroll:function(){this.elements.inputContainer.addClassName("autocomplete-searchbox-active")}.bind(this)}}if(this.isDisabled()){l("click",document,this.events.document.click);this.elements.inputContainer.removeEvents(this.events.inputContainer);this.elements.input.removeEvents(this.events.input);this.elements.suggestsContainer.removeEvents(this.events.suggestsContainer);this.elements.scrollerContent.removeEvents(this.events.scrollerContent)}else{if(this.hasEvent("onClickOutside")){f("click",document,this.events.document.click,true)}this.elements.inputContainer.addEvents(this.events.inputContainer);this.elements.input.addEvents(this.events.input);this.elements.suggestsContainer.addEvents(this.events.suggestsContainer);this.elements.scrollerContent.addEvents(this.events.scrollerContent)}},destroy:function(){delete this.datasets;delete this.selectedItems;delete this.badges;delete this.innerInputs;delete this.currentSuggestions;this.scroller.destroy();l("click",document,this.events.document.click);this._parent()},};return i.extend(n)});define("DS/UIKIT/Form",["UWA/Core","UWA/Data","UWA/Element","UWA/Event","UWA/Utils","UWA/Controls/Abstract","DS/UIKIT/Input/Text","DS/UIKIT/Input/Password","DS/UIKIT/Input/Button","DS/UIKIT/Input/ButtonGroup","DS/UIKIT/Input/Number","DS/UIKIT/Input/Select","DS/UIKIT/Input/Date","DS/UIKIT/Input/Toggle","DS/UIKIT/Autocomplete","DS/UIKIT/Input/File"],function(h,g,q,t,c,r,s,a,j,p,f,m,d,n,o,e){function l(v){if("createEvent" in document){var u=document.createEvent("HTMLEvents");u.initEvent("change",false,true);v.dispatchEvent(u)}else{v.fireEvent("onchange")}}function k(x){var w,u,v;if(!x){return}x=x.split(" ");for(w=0,u=x.length;w<u;w++){v=x[w].match(/horizontal|inline|vertical$/);if(v&&!v[1]){if(v[0]==="horizontal"){x[w]="form-horizontal"}else{if(v[0]==="inline"){x[w]="form-inline"}else{if(v[0]==="vertical"){x[w]="form-vertical"}}}}}return x.join(" ")}var b={alpha:/^[a-zA-Z]+$/,alpha_numeric:/^[a-zA-Z0-9]+$/,integer:/^[-+]?\d+$/,number:/^[-+]?\d*(?:[\.\,]\d+)?$/,card:/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/,cvv:/^([0-9]){3,4}$/,email:/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,url:/^(https?|ftp|file|ssh):\/\/(((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/,domain:/^([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,6}$/,datetime:/^([0-2][0-9]{3})\-([0-1][0-9])\-([0-3][0-9])T([0-5][0-9])\:([0-5][0-9])\:([0-5][0-9])(Z|([\-\+]([0-1][0-9])\:00))$/,date:/(?:19|20)[0-9]{2}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-9])|(?:(?!02)(?:0[1-9]|1[0-2])-(?:30))|(?:(?:0[13578]|1[02])-31))$/,time:/^(0[0-9]|1[0-9]|2[0-3])(:[0-5][0-9]){2}$/,dateISO:/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/,month_day_year:/^(0[1-9]|1[012])[- \/.](0[1-9]|[12][0-9]|3[01])[- \/.]\d{4}$/,color:/^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/};var i={name:"form",texts:null,booleans:null,lists:null,dates:null,passwords:null,files:null,ranges:null,buttons:null,autocompletes:null,numbers:null,defaultOptions:{className:"form-vertical",fields:[],buttons:[],labelSuffix:"",grid:"2 10",autocomplete:false,method:"POST",encoding:"application/x-www-form-urlencoded"},init:function(u){u=u||{};this.texts=[];this.booleans=[];this.lists=[];this.dates=[];this.passwords=[];this.files=[];this.ranges=[];this.buttons=[];this.autocompletes=[];this.numbers=[];if(u.className){u.className=k(u.className)}this.id=c.getUUID().substring(0,6);this._parent(u);this.buildSkeleton()},buildSkeleton:function(){var A=this,z=this.options.fields,B=this.options.buttons,u=this.fields,v=[],y,w,C=[],x=function(G,E,D){var F;if(G.helperText&&E){F=h.createElement("span",{text:G.helperText,"class":"form-control-helper-text"}).inject(E,D||"after")}if(G.errorText&&E){h.createElement("span",{text:G.errorText,"class":"form-control-error-text"}).inject(D==="bottom"?F:E,D==="bottom"?"before":"after")}};w=h.createElement("form",{attributes:{novalidate:"novalidate",autocomplete:this.options.autocomplete?"on":"off"},"class":this.getClassNames(),events:{submit:function(D){t.stop(D);A.submit.call(A,false)},reset:function(D){t.stop(D);A.reset.call(A)}}});z.forEach(function(F){var E,G,D;if(F.type!=="hidden"){if(u[F.type]===undefined){F.type="text"}if(F.type==="radio"&&F.name){v.some(function(I){var H=I&&I.getElement("input");if(H&&H.type==="radio"&&H.name===F.name){E=I;return true}})}G=u[F.type](F,A,E);if(!E&&G){if(F.label&&F.required){h.createElement("span",{"class":"label-field-required",text:" *"}).inject(G.getElement("label"))}if(F.type==="file"){D=G.getElement(".input-file")}else{if(F.type==="autocomplete"){D=G.getElement(".autocomplete")}else{if(F.type==="radio"){C.push({field:F,helpersBase:G.firstChild})}else{if(F.type==="number"){D=G.getElement(".input-number")}else{D=G&&G.getElement(".form-control")}}}}D&&x(F,D)}if(F.label&&F.className&&F.className.contains("input-sm")){G.getElement("label").addClassName("label-sm")}v.push(G)}});C.forEach(function(D){x(D.field,D.helpersBase,"bottom")});B.sort(function(E,D){if((E.type==="submit"&&D.type!=="submit")||(E.type==="reset"&&!D.type)){return -1}if((E.type!=="submit"&&D.type==="submit")||(D.type==="reset"&&!E.type)){return 1}return 0}).forEach(function(E,D){if(!/submit|reset/.test(E.type)){E.type="button"}if(!D){y=u[E.type](E,A)}else{u[E.type](E,A,y)}});y&&y.addClassName("form-footer");v.push(y);w.addContent(v);this.elements.container=w},getFields:function(v){var u=this.elements.container,w="textarea, input, select";if(v){w+=", button"}return u.getElements(w)},getField:function(v){var x,u,w,y=this.getFields();for(x=0,u=y.length;x<u;x++){w=y[x];if(w.name===v||w.id===v){return w}}},_getInput:function(v,y){var x,u,w;for(x=0,u=y.length;x<u;x++){w=y[x];if(w.getName()===v){return w}}},getListInput:function(u){return this._getInput(u,this.lists)},getTextInput:function(u){return this._getInput(u,this.texts)},getBooleanInput:function(u){return this._getInput(u,this.booleans)},getDateInput:function(u){return this._getInput(u,this.dates)},getPasswordInput:function(u){return this._getInput(u,this.passwords)},getFileInput:function(u){return this._getInput(u,this.files)},getRangeInput:function(u){return this._getInput(u,this.ranges)},getNumberInput:function(u){return this._getInput(u,this.numbers)},getButtonInput:function(u){return this._getInput(u,this.buttons)},getAutocompleteInput:function(u){return this._getInput(u,this.autocompletes)},getInput:function(u){return this._getInput(u,this.getAllInputInstances())},unvalidate:function(){this.getContent().getElements(".has-error").forEach(function(u){u.removeClassName("has-error")});return this},validate:function(w,z){var v=[],u=this.getFields(),y,A,x=this;this.unvalidate();u.forEach(function(C){switch(C.type){case"button":case"submit":break;case"radio":var D,B;if(C.required&&!C.disabled){D=u.filter(function(E){if(E.name===C.name){return true}});if(v.every(function(E){return D.indexOf(E)===-1})){B=D.every(function(E){return !E.checked});if(B){v.push(C)}}}break;case"checkbox":if(C.required&&C.checked===false&&!C.disabled){v.push(C)}break;case"text":case"textarea":case"email":case"url":case"tel":if(C.name&&x.getAutocompleteInput(C.name)){break}y=C.pattern||C.getAttribute("pattern");y=y?y:/text(area)?/.test(C.type)?false:C.type;if(C.required&&C.value===""&&!C.disabled){v.push(C)}else{if(y&&!C.disabled){if(y==="tel"){y="alpha_numeric"}if(b.hasOwnProperty(y)&&y.length>0){y=b[y]}else{if(y.length>0){y=new RegExp(y)}}if(h.is(y,"regexp")&&C.value.length>0&&!y.test(C.value)){v.push(C)}}}break;default:if(C.required&&C.value===""&&!C.disabled){v.push(C)}break}});this.autocompletes.forEach(function(B){A=x.getField(B.getId());if(A.required&&!A.disabled){if(B.isEmpty()||!B.isValid()){v.push(A)}}else{if(!B.isValid()){v.push(A)}}});if(w!==true&&v.length>0){v.forEach(function(B){B.getParent(".form-group").addClassName("has-error")});!z&&v[0].focus()}this.dispatchEvent(v.length===0?"onValid":"onInvalid");return v.length===0},submit:function(w){var u=this.options,v;if(u.novalidate||(!u.novalidate&&this.validate())||w){this.dispatchEvent("onSubmit",this.getValues());if(u.url){this.getContent().setAttributes({method:u.method,action:u.url,target:"form_transfer_"+this.id,enctype:u.encoding});v=h.createElement("iframe",{name:"form_transfer_"+this.id,src:"javascript:false;",attributes:{tabindex:-1,frameborder:0},styles:{visibility:"hidden",width:0,height:0,border:0}}).inject(document.body);v.onload=function(){v.parentNode.removeChild(v)};this.autocompletes.forEach(function(x){if(x.options&&x.options.multiSelect===true){x.elements.input.value=x.getValue()}});this.getContent().submit();this.autocompletes.forEach(function(x){if(x.options&&x.options.multiSelect===true){x.elements.input.value=""}})}}return this},getAllInputInstances:function(){return[].concat(this.texts,this.booleans,this.lists,this.dates,this.passwords,this.files,this.ranges,this.buttons,this.autocompletes)},setDisabled:function(u){if(typeof u==="undefined"){u=true}this.getAllInputInstances().forEach(function(v){v.setDisabled(u)});return this},enable:function(){return this.setDisabled(false)},disable:function(){return this.setDisabled()},reset:function(){var u=this.getValues();Object.keys(u).forEach(function(v){u[v]=""});this.autocompletes.forEach(function(v){v.reset()});this.setValues(u);this.dispatchEvent("onReset");return this},getValues:function(){var x,u,w,v={},y=Array.prototype,z=this.getFields();for(x=0,u=z.length;x<u;x++){w=z[x];switch(w.type){case"button":case"submit":break;case"password":if(w.value!==""){v[w.name]=w.value}break;case"checkbox":v[w.name]=(!!w.checked);if(typeof w.value==="string"){v[w.name]=String(v[w.name])}break;case"radio":if(w.checked){v[w.name]=w.value}break;case"select-multiple":v[w.name]=y.filter.call(w.getElementsByTagName("*"),function(A){if(A.selected&&A.getTagName()!=="optgroup"&&A.value){return true}}).reduce(function(A,B){return(A?A+",":A)+B.value},"")||"";break;default:if(h.is(w.name)&&w.name.length){v[w.name]=w.value}break}}this.autocompletes.forEach(function(A){if(h.is(A.elements.input.name)&&A.elements.input.name.length){v[A.elements.input.name]=A.getValue()}});this.files.forEach(function(A){if(h.is(A.elements.input.name)&&A.elements.input.name.length){v[A.elements.input.name]=A.getValue()}});return v},getValue:function(u){return this.getValues()[u]},setValues:function(v){var x,u,w,z,y=this.getFields();for(x=0,u=y.length;x<u;x++){w=y[x];if(v.hasOwnProperty(w.name)){z=v[w.name];switch(w.type){case"password":case"button":case"reset":case"submit":break;case"checkbox":w.checked=(!!z);l(w);break;case"radio":if(w.checked&&String(w.value)===z){w.checked=(!!z);l(w)}break;default:w.value=z;l(w);break}}}return this},setValue:function(v,w){var u={};u[v]=w;return this.setValues(u)},createField:function(w,x,z,y){var u,v;if(this.options.className.indexOf("form-horizontal")>-1&&this.options.grid){v=this.options.grid.split(" ");if(!v||v.length<2){v=[2,10]}if(y){w.inject(y.getChildren()[0])}else{if(x){x.addClassName("col-sm-"+v[0]+" control-label");u=h.createElement("div",{"class":"form-group",html:[x,{tag:"div","class":"col-sm-"+v[1],html:w}]})}else{u=h.createElement("div",{"class":"form-group",html:{tag:"div","class":"col-sm-offset-"+v[0]+" col-sm-"+v[1],html:w}})}}}else{if(this.options.className.indexOf("form-inline")>-1){if(y){w.inject(y)}else{if(!x){u=h.createElement("div",{"class":"form-group",html:w})}else{x.addClassName("sr-only");u=h.createElement("div",{"class":"form-group",html:[x,w]})}}}else{if(y){w.inject(y)}else{if(!x){u=h.createElement("div",{"class":"form-group",html:w})}else{u=h.createElement("div",{"class":"form-group",html:[x,w]})}}}}if(z){u.hide()}return u},setClassName:function(u){this.options.className=k(u);this.getContent().className=this.getClassNames();return this},fields:{text:function(x,z){var v,w,y=z,u={attributes:{autocorrect:"off",autocapitalize:"off"},id:"input-"+c.getUUID().substring(0,6)};if(x.hasOwnProperty("autocomplete")){if(!x.attributes){x.attributes={}}x.attributes.autocomplete=x.autocomplete}else{u.attributes.autocomplete="off"}v=new s(h.extend(x,u,true));z.texts.push(v);v.addEvent("onChange",function(){y.dispatchEvent("onChange",[this.getName(),this.getValue(),x.onchange])});if(h.is(x.label)){w=h.createElement("label",{"for":v.getId(),text:h.i18n(x.label+y.options.labelSuffix)})}return y.createField.call(y,v,w)},textarea:function(u,v){return this.text(h.merge(u,{multiline:true}),v)},password:function(x,z){var v,w,y=z,u={attributes:{autocorrect:"off",autocapitalize:"off"},id:"input-"+c.getUUID().substring(0,6)};if(x.hasOwnProperty("autocomplete")){if(!x.attributes){x.attributes={}}x.attributes.autocomplete=x.autocomplete}else{u.attributes.autocomplete="off"}v=new a(h.extend(x,u,true));z.passwords.push(v);v.addEvent("onChange",function(){y.dispatchEvent("onChange",[this.getName(),this.getValue(),x.onchange])});if(h.is(x.label)||h.is(x.name)){w=h.createElement("label",{"for":v.getId(),text:h.i18n((x.label||x.name)+y.options.labelSuffix)})}return y.createField.call(y,v,w)},file:function(y,A){var w,x,z=A,u,v={id:"input-"+c.getUUID().substring(0,6)};w=new e(h.extend(y,v,true));A.files.push(w);w.addEvent("onChange",function(){z.dispatchEvent("onChange",[this.getName(),this.getValue(),y.onchange])});if(h.is(y.label)||h.is(y.name)){x=h.createElement("label",{"for":w.getId(),text:h.i18n((y.label||y.name)+z.options.labelSuffix)})}u=z.createField.call(z,w,x);w.elements.textfield.onfocus=function(){u.toggleClassName("focused",true)};w.elements.textfield.onblur=function(){u.toggleClassName("focused",false)};return u},autocomplete:function(y,A){var w,x,z=A,u,v={id:"input-"+c.getUUID().substring(0,6)};if(y.hasOwnProperty("autocomplete")){y.inputAutocompleteAttribute=y.autocomplete}w=new o(h.extend(y,v,true));w.setId(c.getUUID().substr(0,6));A.autocompletes.push(w);w.addEvent("onChange",function(){z.dispatchEvent("onChange",[this.getName(),this.getValue(),y.onchange])});if(h.is(y.label)||h.is(y.name)){x=h.createElement("label",{"for":w.getId(),text:h.i18n((y.label||y.name)+z.options.labelSuffix)})}u=z.createField.call(z,w,x);w.addEvent("onFocus",function(){u.toggleClassName("focused",true)});w.addEvent("onBlur",function(){u.toggleClassName("focused",false)});return u},list:function(x,A){var v,w,z=A,y=false,u={id:"input-"+c.getUUID().substring(0,6),placeholder:false,multiple:false,nativeSelect:false};v=new m(h.merge(x,u));A.lists.push(v);v.addEvent("onChange",function(){z.dispatchEvent("onChange",[this.getName(),this.getValue()[0],x.onchange])});if(h.is(x.label)||h.is(x.name)){w=h.createElement("label",{"for":v.getId(),text:h.i18n((x.label||x.name)+z.options.labelSuffix)})}if(v.getOptions().length===0){y=true}return z.createField.call(z,v,w,y)},select:function(u,v){return this.list(u,v)},range:function(x,A){var v,w,z=A,y=false,u={id:"input-"+c.getUUID().substring(0,6),placeholder:false};v=new f(h.merge(x,u));A.ranges.push(v);v.addEvent("onChange",function(){z.dispatchEvent("onChange",[this.getName(),this.getValue(),x.onchange])});if(h.is(x.label)){w=h.createElement("label",{"for":v.getId(),text:h.i18n((x.label||x.name)+z.options.labelSuffix)})}return z.createField.call(z,v,w,y)},number:function(y,B){var w,x,A=B,u,z=false,v={id:"input-"+c.getUUID().substring(0,6),placeholder:false};w=new f(h.merge(y,v));B.numbers.push(w);w.addEvent("onChange",function(){A.dispatchEvent("onChange",[this.getName(),this.getValue(),y.onchange])});if(h.is(y.label)){x=h.createElement("label",{"for":w.getId(),text:h.i18n((y.label||y.name)+A.options.labelSuffix)})}u=A.createField.call(A,w,x,z);w.elements.input.onfocus=function(){u.toggleClassName("focused",true)};w.elements.input.onblur=function(){u.toggleClassName("focused",false)};return u},"boolean":function(w,z,x){var v,y=z,u={id:"input-"+c.getUUID().substring(0,6),type:"checkbox",className:"primary"};if(!h.is(w.checked)&&h.is(w.value)){w.checked=w.value==="true"||w.value===true}v=new n(h.merge(w,u));z.booleans.push(v);v.addEvent("onChange",function(){y.dispatchEvent("onChange",[this.getName(),this.isChecked(),w.onchange])});return y.createField.call(y,v,false,false,x)},radio:function(u,w,v){return this["boolean"](h.extend(u,{type:"radio"}),w,v)},checkbox:function(u,v){return this["boolean"](h.extend(u,{type:"checkbox"}),v)},submit:function(w,z,x){var v,y=z,u={id:"input-"+c.getUUID().substring(0,6),value:"Submit",className:"primary",attributes:{type:"submit"}};if(w.action){w.events=w.events||{};w.events.onClick=w.action}v=new j(h.merge(w,u));z.buttons.push(v);return y.createField.call(y,v,false,false,x)},reset:function(w,z,x){var v,y=z,u={id:"input-"+c.getUUID().substring(0,6),value:"Reset",attributes:{type:"reset"}};if(w.action){w.events=w.events||{};w.events.onClick=w.action}v=new j(h.merge(w,u));z.buttons.push(v);return y.createField.call(y,v,false,false,x)},button:function(w,z,x){var v,y=z,u={id:"input-"+c.getUUID().substring(0,6)};if(w.action){w.events=w.events||{};w.events.onClick=w.action}v=new j(h.merge(w,u));z.buttons.push(v);return y.createField.call(y,v,false,false,x)},html:function(u){return h.createElement("div",{"class":"form-group",html:u.html})},help:function(u){return h.createElement("span",{"class":"help-block",text:u.text})},date:function(x,z){var v,w,y=z,u={attributes:{autocomplete:"off",autocorrect:"off",autocapitalize:"off"},id:"input-"+c.getUUID().substring(0,6)};v=new d(h.extend(x,u,true));z.dates.push(v);v.addEvent("onChange",function(){y.dispatchEvent("onChange",[this.getName(),this.getValue(),x.onchange])});if(h.is(x.label)){w=h.createElement("label",{"for":v.getId(),text:h.i18n(x.label+y.options.labelSuffix)})}return y.createField.call(y,v,w)},email:function(u,v){return this.text(h.merge(u,{attributes:{type:"email"}}),v)},tel:function(u,v){return this.text(h.merge(u,{attributes:{type:"tel"}}),v)},url:function(u,v){return this.text(h.merge(u,{attributes:{type:"url"}}),v)}}};return r.extend(i)});define("DS/UIKIT/SuperModal",["UWA/Core","UWA/Element","UWA/Event","UWA/Utils/Client","UWA/Controls/Abstract","DS/UIKIT/Modal","DS/UIKIT/Input/Button","DS/UIKIT/Input/Text","DS/UIKIT/Form","i18n!DS/UIKIT/assets/nls/UIKIT"],function(e,b,j,c,g,i,h,d,f,k){var a={defaultOptions:{className:"",animate:false,closable:true,overlay:true,okButtonText:k.ok,koButtonText:k.ko},modals:{current:null,queue:[]},init:function(l){this._parent(l)},alert:function(){var n=arguments,r=n[0],q=n[1],s=n[2],l=n[3],p,o,m=e.merge({visible:false},this.options);if(e.is(n[0],"object")){r=n[0].message;q=n[0].title;s=n[0].callback;l=n[0].okButtonText}m.closable=this.options.closable!==false;m.events={onHide:function(){if(e.is(s,"function")){s()}},onShow:function(){o.focus()}};p=this.modalFactory(m);if(e.is(r,"string")){p.elements.body.addContent({tag:"p",text:r})}if(e.is(q,"string")){p.setHeader({tag:"h4",text:q})}else{p.getHeader().hide();if(!s){s=q}}if(!e.is(s,"function")&&this.options.callback){s=this.options.callback}o=new h({value:l||m.okButtonText,className:"primary",events:{onClick:function(){p.hide()}}});p.setFooter(o);p.dispatchEvent("onShowModal")},confirm:function(){var o=arguments,m=o[0],q=o[1],s=o[2],u=o[3],n=o[4],r,p=[],t=e.merge({visible:false},this.options);function l(v){return function(){r.preventEvent=true;r.hide();if(e.is(s,"function")){s(v)}}}if(e.is(o[0],"object")){m=o[0].message;q=o[0].title;s=o[0].callback;u=o[0].okButtonText;n=o[0].koButtonText}t.closable=this.options.closable!==false;t.events={onHide:function(){if(!r.preventEvent&&e.is(s,"function")){s()}},onShow:function(){p[0].focus()}};r=this.modalFactory(t);if(e.is(m,"string")){r.elements.body.addContent({tag:"p",text:m})}if(e.is(q,"string")){r.setHeader({tag:"h4",text:q})}else{r.getHeader().hide();if(!s){s=q}}if(!e.is(s,"function")&&this.options.callback){s=this.options.callback}p.push(new h({value:u||t.okButtonText,className:"primary"}));p[0].addEvent("onClick",l(true));p.push(new h({value:n||t.koButtonText}));p[1].addEvent("onClick",l(false));r.setFooter(p);r.dispatchEvent("onShowModal")},prompt:function(){var r=arguments,o=r[0],t=r[1],x=r[2],z=r[3],p=r[4],v=r[5],q=r[6],u=r[7],n=Math.max(0,r[8])||false,w,s=[],y=e.merge({visible:false},this.options),m;function l(A){return function(){if(A){A=w.getContent().getElement("input").value}w.preventEvent=true;w.hide();if(e.is(x,"function")){x(A)}}}y.closable=this.options.closable!==false;if(e.is(r[0],"object")){o=r[0].message;t=r[0].title;x=r[0].callback;z=r[0].okButtonText;p=r[0].koButtonText;v=r[0].placeholder;q=r[0].required;u=r[0].value;n=Math.max(0,r[0].maxlength)||false}y.events={onHide:function(){if(!w.preventEvent&&e.is(x,"function")){x()}},onShow:function(){m.getField("input-confirm").focus()}};w=this.modalFactory(y);m=new f({fields:[{type:"text",required:q===true,value:u||"",placeholder:v||y.placeholder||k.response,name:"input-confirm",maxlength:n}],events:{onSubmit:l(true)}});if(e.is(o,"string")){w.elements.body.addContent({tag:"p",text:o},m)}else{w.elements.body.addContent(o,m)}if(e.is(t,"string")){w.setHeader({tag:"h4",text:t})}else{w.getHeader().hide();if(!x){x=t}}if(!e.is(x,"function")&&this.options.callback){x=this.options.callback}s.push(new h({value:z||y.okButtonText,className:"primary"}));s[0].addEvent("onClick",function(){m.submit()});s.push(new h({value:p||y.koButtonText}));s[1].addEvent("onClick",l(false));w.setFooter(s);w.dispatchEvent("onShowModal")},dialog:function(l){var p=e.merge({visible:false},this.options),o,n;p.closable=this.options.closable!==false;p.events={onHide:function(){},onShow:function(){}};o=this.modalFactory(p);function m(q){return function(){if(e.is(q,"function")){q(o)}}}if(e.is(l.title,"string")){o.setHeader({tag:"h4",text:l.title})}else{o.getHeader().hide()}if(l.body){o.elements.body.addContent(l.body)}if(l.buttons&&l.buttons.length>0){n=l.buttons.map(function(q){return new h(e.extend(q,{events:{onClick:m(q.action)}}))});n=n.sort(function(s,q){function r(t){return t.getContent().hasClassName("btn-primary")}if(r(s)&&!r(q)){return -1}if(!r(s)&&r(q)){return 1}return 0});o.addEvent("onShow",function(){n[0].focus()});o.setFooter(n)}else{if(p.closable){o.addEvent("onShow",function(){o.elements.close.focus()})}else{o.addEvent("onShow",function(){o.elements.content.setAttribute("tabindex","0");o.elements.content.focus()})}}o.dispatchEvent("onShowModal")},next:function(){if(this.modals.current){this.modals.current.hide()}},modalFactory:function(l){var n,m=this;n=new i(l);n.addEvents({onShowModal:function(){if(!m.modals.current){m.modals.current=this;m.lastFocus=document.activeElement;this.show()}else{m.modals.queue.push(this)}},onShow:function(){m.dispatchEvent("onShow")},onHide:function(){var o=m.modals.queue,p;m.dispatchEvent("onHide");this.destroy();if(o&&o.length>0){p=o.splice(0,1)[0];if(p.elements){p.show();m.modals.current=p}}else{m.modals.current=null;if(m.lastFocus&&e.is(m.lastFocus.focus,"function")){m.lastFocus.focus()}}}});n.inject(l.renderTo||document.body);return n}};return g.extend(a)});