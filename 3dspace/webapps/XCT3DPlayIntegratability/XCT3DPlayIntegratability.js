define("DS/XCT3DPlayIntegratability/XCTExtPlatformMediaHelpers",["DS/WAFData/WAFData"],function(a){var b={listStreams:function(g,f,d,e){var i=f.physicalid;var c=f.serverurl;var j=f.tenant;var h=c+"/resources/experience/medias/"+i+"/streams"+((j)?"/?tenant="+j:"");g=(f.contextid)?f.contextid:g;a.authenticatedRequest(h,{method:"GET",type:"json",headers:{"Content-Type":"application/json",SecurityContext:g},onComplete:function(k){if((d!==undefined)&&(null!==d)){d(k.results)}},onFailure:function(k){if((e!==undefined)&&(null!==e)){e(k)}}})}};return b});define("DS/XCT3DPlayIntegratability/ConfigMapping",[],function(){var a=Object.freeze({"default":"DS/CXP3DPlay/CXP3DPlayApp",sequence:"DS/XCT25DExperience/XCT25DPlayApp","25D_asset":"DS/XCT25DExperience/XCT25DPlayApp",dsxm:"DS/XCT25DExperience/XCT25DPlayApp"});return a});define("DS/XCT3DPlayIntegratability/XCT3DPlayIntegratability",["UWA/Core","DS/XCT3DPlayIntegratability/ConfigMapping","DS/XCT3DPlayIntegratability/XCTExtPlatformMediaHelpers","DS/3DPlayExperienceModule/PlayExperience3D","DS/XCTInfNotifications/XCTInfNotifications","DS/CoreEvents/Events","DS/WebSystem/Environment","i18n!DS/XCT3DPlayIntegratability/assets/nls/XCT3DPlayIntegratability"],function(c,d,i,b,e,a,g,h){var f=b.extend({init:function(k){var j=this;k=k||{};k.commandApplication=false;k.asset=k.input.asset;k.physicalId=k.input.asset.physicalid;k.experience=j;k.workbenchs=k.workbenchs||[];k.visu={multiViewer:true,multiViewerFix:true};this._parent(k)},onPostCreate:function(){this.autoReframe=false;this._parent();a.publish({event:"3DPlay:Ready"})},loadAssets:function(j,k){e.showInfo(h.error_loadingMultipleFiles_title);this.loadAsset({asset:j.asset[0]},k)},loadAsset:function(k,l){var j=this;this._experienceBase.webApplication.requestNewExperienceBase();this.asset=k.asset;if(c.is(l.env)&&c.is(l.IBL)){this.frmWindow._3dViewer.setEnvMap({envMap:l.env,IBLMap:l.IBL})}i.listStreams(k.asset.contextid,k.asset,function(m){j._callbackStreams(m,k)})},_callbackStreams:function(n,l){var k=this;var j=k._getFileType(n);var m=false;if(d[j]===undefined){j="default"}if(j==="default"&&!g.get("3DPlay.AllowExpLoad")){e.showWarning(h.warning_objectTypeNotSupported_title);return}if(j==="dsxm"){m=true}require([d[j]],function(o){k.player=new o(k,l,m)})},initExperienceBase:function(k,j){this._parent(k);this._experienceBase=k;if(j){j(0)}},_getFileType:function(m){var l="";var j="";for(var k=0;k<m.length;k++){j=m[k];if(j.persistencyname.indexOf(".json")!==-1){l=j.persistencyname.match(/[^.]*/i)[0]}if(j.persistencyname.indexOf(".dsxm")!==-1){l="dsxm"}}return l}});return f});