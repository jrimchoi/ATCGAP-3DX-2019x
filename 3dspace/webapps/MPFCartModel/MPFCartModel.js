define("DS/MPFCartModel/CartDataProxy",["UWA/Core","DS/MPFDataProxy/DataProxy","DS/MPFUrl/UrlUtils"],function(b,c,a){var d=c.extend({init:function(e){this._parent(e,"/mdcart/carts")},urlPatch:function(g,f){var e;e=this._parent(g,f);f||(f={});if(f.partialRefresh){e=new a(e).addParameter("noRefresh",f.partialRefresh).getUrl()}return e}});return d});define("DS/MPFCartModel/CartItemDataProxy",["UWA/Core","DS/MPFDataProxy/DataProxy"],function(a,c){var b=c.extend({init:function(d,e){this._parent(d,"/mdcart/carts/{0}/cart-items")},url:function(d){var e;e=a.String.format(this.resourcePath,d.parentResourceId);return this.connector.url(e)}});return b});define("DS/MPFCartModel/CartTimelineItemDataProxy",["UWA/Core","DS/MPFDataProxy/DataProxy"],function(a,b){var c=b.extend({init:function(d,e){this._parent(d,"/mdcart/carts/{0}/timeline-items")},url:function(d){return this.connector.url(a.String.format(this.resourcePath,d.parentResourceId))}});return c});define("DS/MPFCartModel/CartDataProxyv2",["UWA/Core","UWA/String","DS/MPFDataProxy/DataProxy","DS/MPFUrl/UrlUtils"],function(c,e,d,b){var a=d.extend({init:function(f,g){this._parent(f,"/mdcart/carts/{0}/v2",g)},urlPatch:function(g,f){var h;h=e.format(this.resourcePath,g.id);return this.connector.url(h,f)},urlPost:function(h,g){var f;var i="/mdcart/carts/v2";f=(new b(this.connector.url(i,g))).addParameter("contractingParty",h.contractingParty).getUrl();return f},urlGet:function(g,f){return this.delegate.urlGet(g,f)},_computeDefaultUrl:function(g,f){var h;h=e.format(this.resourcePath,g.id);return this.connector.url(h,f)}});return a});define("DS/MPFCartModel/MeCartDataProxy",["UWA/Core","DS/MPFDataProxy/DataProxy"],function(b,c){var a=c.extend({init:function(d){this._parent(d,"/me/carts")},doDelete:null,doPatch:null,doPut:null,urlDelete:null,urlPatch:null,urlPut:null});return a});define("DS/MPFCartModel/CartItemModel",["UWA/Core","DS/MPFModel/MPFModel","DS/MPFUtils/MPFUtils","i18n!DS/MPFCartModel/assets/nls/CartModel"],function(c,d,a,b){var e=21474836;var f={};var h={accepted:"ACCEPTED",deleted:"DELETED",delivered:"DELIVERED",draft:"DRAFT",pendingProcessing:"PENDING_PROCESSING",processing:"PROCESSING",ready:"READY",shipped:"SHIPPED",submited:"SUBMITTED",submitted:"SUBMITTED"};f.STATE="currentState";f.END_DATE="EndDate";f.LICENSING_SCHEME="LicensingScheme";f.PRODUCT_DISPLAY_NAME="ProductDisplayName";f.TOTAL_FEE_AMOUNT="TotalFeeAmount";f.TOTAL_GROSS_AMOUNT="TotalGrossAmount";f.TOTAL_NET_AMOUNT="TotalNetAmount";f.TOTAL_TAXES_AMOUNT="TotalTaxesAmount";f.UNIT_FEE_AMOUNT="UnitFeeAmount";f.UNIT_NET_AMOUNT="UnitNetAmount";f.UNIT_TAXES_AMOUNT="UnitTaxesAmount";var g=d.extend({defaults:{Created:"",currentState:"",History:"",id:"",IsTestItem:false,Modified:"",name:"",Quantity:0,TotalFeeAmount:0,TotalGrossAmount:0,TotalNetAmount:0,TotalTaxesAmount:0,type:null,UnitFeeAmount:0,UnitNetAmount:0,UnitTaxesAmount:0},setup:function(i,j){this._parent(i,j);this._type="CartItemModel"},renamedAttributes:function(){return{}},parse:function(k){var r=["IsTestItem","Invoice"];var l=["Created","Modified","OriginalCreationDate"];var t=["TotalCommissionBasisAmt","TotalCommissionBasisAmount","TotalFeeAmount","TotalGrossAmount","TotalNetAmount","TotalTaxesAmount","UnitCommissionBasisAmt","UnitCommissionBasisAmount","UnitFeeAmount","UnitNetAmount","UnitTaxesAmount"];var j=["currentState","Data","History","id","name","status","type","ProductTrigram","ProductDisplayName","EndDate"];var n={};var m=this.renamedAttributes();var p=Object.keys(k);for(var o=0;o<p.length;o++){var s=k[p[o]];var q=p[o].replace("MP_SoftwareRequest.MP_","").replace("MP3DP_PrintRequest.MP3DP_","").replace("MP_CartItem.MP_","").replace(/_/g,"");var i=q;if(m[i]){i=m[i]}if(r.indexOf(i)!==-1){n[i]=s.toLowerCase()==="true"}else{if(l.indexOf(i)!==-1){n[i]=s?new Date(s):""}else{if(t.indexOf(i)!==-1){n[i]=parseFloat(s)||0}else{if(j.indexOf(i)!==-1){n[i]=s}else{n[i]=s}}}}}return n},toJSON:function(v){var t=function(y){var x=y.replace("MP3DP_PrintRequest.MP3DP_","").replace("MP_CartItem.MP_","").replace(/_/g,"");return x};var u={};var q;var r=["IsTestItem","Invoice"];var m=["Created","Modified","MP_CartItem.MP_OriginalCreationDate"];var w=["MP_CartItem.MP_Total_Commission_Basis_Amt","TotalFeeAmount","TotalGrossAmount","TotalNetAmount","TotalTaxesAmount","MP_CartItem.MP_Unit_Commission_Basis_Amt","UnitFeeAmount","UnitNetAmount","UnitTaxesAmount"];var l=["currentState","Data","History","id","name","MP_CartItem.MP_status","type"];var n=this.renamedAttributes();var p=Object.keys(this.omit());for(var o=0;o<p.length;o++){var j=p[o];var s=this.get(j);if(r.map(t).indexOf(j)!==-1){u[r[r.map(t).indexOf(j)]]=s?"TRUE":"FALSE"}else{if(m.map(t).indexOf(j)!==-1){u[m[m.map(t).indexOf(j)]]=(s&&s!=="")?s.toISOString():s}else{if(w.map(t).indexOf(j)!==-1){u[w[w.map(t).indexOf(j)]]=(s)?s.toString():""}else{if(l.map(t).indexOf(j)!==-1){u[l[l.map(t).indexOf(j)]]=s}else{u[j]=s}}}}q=a.objectHasValue(n,j);if(q){delete u[j];var k=a.objectValues(n).indexOf(j);var i=Object.keys(n)[k];u[i]=s}}return u},validate:function(i,j){var m=[];var l;var k;l=i[f.UNIT_NET_AMOUNT];if(l&&l){m.push({field:f.UNIT_NET_AMOUNT,max:e,message:b.get("errorFieldsMax",{field:f.UNIT_NET_AMOUNT,value:e})})}k=i[f.TOTAL_NET_AMOUNT];if(k&&(k>=e)){m.push({field:f.TOTAL_NET_AMOUNT,max:e,message:b.get("errorFieldsMax",{field:f.TOTAL_NET_AMOUNT,value:e})})}if(m.length>0){return m}},getType:function(){return this.get("type")},setType:function(i){return this.set("type",i)},getCreated:function(){return this.get("Created")},setCreated:function(i){return this.set("Created",i)},getCurrentState:function(){return this.getState()},setCurrentState:function(i){return this.setState(i)},getState:function(){return this.get(f.STATE)},setState:function(i){return this.set(f.STATE,i)},getHistory:function(){return this.get("History")},setHistory:function(i){return this.set("History",i)},getInvoice:function(){return this.get("Invoice")},setInvoice:function(i){return this.set("Invoice",i)},getIsTestItem:function(){return this.get("IsTestItem")},setIsTestItem:function(i){return this.set("IsTestItem",i)},getModified:function(){return this.get("Modified")},setModified:function(i){return this.set("Modified",i)},getName:function(){return this.get("name")},setName:function(i){return this.set("name",i)},getOriginalCreationDate:function(){this.get("OriginalCreationDate")},setOriginalCreationDate:function(i){this.set("OriginalCreationDate",i)},getTotalCommissionBasisAmt:function(){return this.get("TotalCommissionBasisAmt")},setTotalCommissionBasisAmt:function(i){return this.set("TotalCommissionBasisAmt",i)},getTotalFeeAmount:function(){return this.get("TotalFeeAmount")},setTotalFeeAmount:function(i){return this.set("TotalFeeAmount",i)},getTotalGrossAmount:function(){return this.get("TotalGrossAmount")},setTotalGrossAmount:function(i){return this.set("TotalGrossAmount",i)},getTotalTaxesAmount:function(){return this.get("TotalTaxesAmount")},setTotalTaxesAmount:function(i){return this.set("TotalTaxesAmount",i)},getTotalNetAmount:function(){return this.get("TotalNetAmount")},setTotalNetAmount:function(i){return this.set("TotalNetAmount",i)},getUnitCommissionBasisAmt:function(){return this.get("UnitCommissionBasisAmt")},setUnitCommissionBasisAmt:function(i){return this.set("UnitCommissionBasisAmt",i)},getUnitFeeAmount:function(){return this.get("UnitFeeAmount")},setUnitFeeAmount:function(i){return this.set("UnitFeeAmount",i)},getUnitNetAmount:function(){return this.get("UnitNetAmount")},setUnitNetAmount:function(i){return this.set("UnitNetAmount",i)},getUnitTaxesAmount:function(){return this.get("UnitTaxesAmount")},setUnitTaxesAmount:function(i){return this.set("UnitTaxesAmount",i)},getQuantity:function(){return this.get("Quantity")},setQuantity:function(i){return this.set("Quantity",i)},getEndDate:function(){return this.get(f.END_DATE)},getLicensingScheme:function(){return this.get(f.LICENSING_SCHEME)},getProductDisplayName:function(){return this.get(f.PRODUCT_DISPLAY_NAME)}});g.STATUS=h;g.States=Object.freeze(h);g.Fields=Object.freeze(f);g.MAX_TOTAL_NET_AMOUNT=e;return g});define("DS/MPFCartModel/CartFilters",[],function(){var a=Object.freeze({FILTER_BY_STATE:"state",FILTER_BY_CREATION_DATE_DAYS:"creationDateDays",FILTER_BY_CREATION_DATE_MONTHS:"creationDateMonths",FILTER_BY_MODIFICATION_DATE_DAYS:"modificationDateDays",FILTER_BY_MODIFICATION_DATE_MONTHS:"modificationDateMonths",STATE_PENDING_FILTER:"pending",STATE_DELIVERED_FILTER:"delivered",STATE_CANCELED_FILTER:"cancelled",STATE_ALL_FILTER:"",CLEAR:"clear",FILTER_BY_TYPE:"type",TYPE_RENEWAL:"renewal"});return a});define("DS/MPFCartModel/CartSorts",[],function(){var a={SORT:"sort",CREATION_DATE:"creationDate",MODIFICATION_DATE:"modificationDate",DELIVERY_DATE:"deliveryDate",SERVICE_PROVIDER:"serviceProvider",CUSTOMER:"customer",STATE:"state"};a.desc=function(b){return"-"+b};return Object.freeze(a)});define("DS/MPFCartModel/CartPatchOperation",["UWA/Core","UWA/Class"],function(d,b){var a;var c={none:"none",add:"add",modify:"modify",remove:"remove"};a=b.extend({init:function(e,g,f){e=c.hasOwnProperty(e)?e:c.none;g||(g="/");this.op=e;this.path=g;this.value=f},getOperation:function(){return this.op},getPath:function(){return this.path},getValue:function(){return d.clone(this.value)},toJSON:function(){return{op:this.getOperation(),path:this.getPath(),value:this.getValue()}}});a.Operations=c;return a});define("DS/MPFCartModel/MeCartV2DataProxy",["UWA/Core","DS/MPFDataProxy/DataProxy","DS/MPFUrl/UrlUtils","DS/MPFCartModel/CartFilters","DS/MPFCartModel/CartSorts","DS/MPFModel/CollectionFetchOptions","DS/MPFError/NotImplementedError"],function(h,d,c,g,f,b,a){var e=d.extend({init:function(i){this._parent(i,"/me/cartsV2")},urlGet:function(k,j){var i;var l;j||(j={});i=this._parent(k,j);l=new c(i);this._addParamToUrlIfOptionKeySet(l,j,g.FILTER_BY_STATE);this._addParamToUrlIfOptionKeySet(l,j,g.FILTER_BY_CREATION_DATE_DAYS);this._addParamToUrlIfOptionKeySet(l,j,g.FILTER_BY_CREATION_DATE_MONTHS);this._addParamToUrlIfOptionKeySet(l,j,g.FILTER_BY_MODIFICATION_DATE_DAYS);this._addParamToUrlIfOptionKeySet(l,j,g.FILTER_BY_MODIFICATION_DATE_MONTHS);this._addParamToUrlIfOptionKeySet(l,j,g.FILTER_BY_TYPE);this._addParamToUrlIfOptionKeySet(l,j,f.SORT);if(h.is(j[b.START])&&h.is(j[b.SIZE])){l.addParameter(b.START,j[b.START]).addParameter(b.SIZE,j[b.SIZE])}this._addParamToUrlIfOptionKeySet(l,j,b.SEARCH);return l.getUrl()},_addParamToUrlIfOptionKeySet:function(l,i,j){var k;k=i[j];if(h.is(k)&&k!==""){l.addParameter(j,k)}},urlPatch:a.emit,urlPut:a.emit,urlDelete:a.emit,urlPost:a.emit,doPatch:a.emit,doPut:a.emit,doDelete:a.emit,doPost:a.emit});return e});define("DS/MPFCartModel/CartItemCollection",["DS/MPFModel/MPFCollection","DS/MPFCartModel/CartItemModel"],function(b,c){var a=b.extend({model:c});return a});define("DS/MPFCartModel/FinishRequestCartItemModel",["UWA/Core","DS/MPFCartModel/CartItemModel"],function(b,c){var a=c.extend({defaults:{FinishName:"",RelatedCartItemID:""},setup:function(d,e){this._parent(d,e)},parse:function(d){var f=["FinishName","RelatedCartItemID"];var h={};var e=Object.keys(d);for(var g=0;g<e.length;g++){if(f.indexOf(e[g])!==-1){h[e[g]]=d[e[g]]}}return h},toJSON:function(d){var e={};var f=["FinishName","RelatedCartItemID"];var h=Object.keys(this.omit());for(var g=0;g<h.length;g++){if(f.indexOf(h[g])!==-1){e[f[f.indexOf(h[g])]]=this.get(h[g])}}return e},});return a});define("DS/MPFCartModel/MeSellerCartV2DataProxy",["UWA/Core","UWA/String","DS/MPFDataProxy/DataProxy","DS/MPFUrl/UrlUtils","DS/MPFCartModel/CartFilters","DS/MPFCartModel/CartSorts","DS/MPFModel/CollectionFetchOptions","DS/MPFError/NotImplementedError"],function(f,g,a,b,e,c,i,d){var h;h=a.extend({init:function(j){this._parent(j,"/me/shops/{0}/seller-cartsV2")},buildPath:function(j){return g.format(this.resourcePath,j.parentResourceId)},urlGet:function(m,k){var j;var l;k||(k={});j=this._parent(m,k);l=new b(j);this._addParamToUrlIfOptionKeySet(l,k,e.FILTER_BY_STATE);this._addParamToUrlIfOptionKeySet(l,k,e.FILTER_BY_CREATION_DATE_DAYS);this._addParamToUrlIfOptionKeySet(l,k,e.FILTER_BY_CREATION_DATE_MONTHS);this._addParamToUrlIfOptionKeySet(l,k,e.FILTER_BY_MODIFICATION_DATE_DAYS);this._addParamToUrlIfOptionKeySet(l,k,e.FILTER_BY_MODIFICATION_DATE_MONTHS);this._addParamToUrlIfOptionKeySet(l,k,c.SORT);if(f.is(k[i.START])&&f.is(k[i.SIZE])){l.addParameter(i.START,k[i.START]).addParameter(i.SIZE,k[i.SIZE])}this._addParamToUrlIfOptionKeySet(l,k,i.SEARCH);return l.getUrl()},_addParamToUrlIfOptionKeySet:function(m,j,k){var l;l=j[k];if(f.is(l)&&l!==""){m.addParameter(k,l)}},urlPatch:d.emit,urlPut:d.emit,urlDelete:d.emit,urlPost:d.emit,doPatch:d.emit,doPut:d.emit,doDelete:d.emit,doPost:d.emit});return h});define("DS/MPFCartModel/3DPFinishRequestCartItemModel",["UWA/Core","DS/MPFCartModel/CartItemModel"],function(b,c){var a=c.extend({defaults:{FinishColors:""},setup:function(d,e){this._parent(d,e)},parse:function(d){var f=["FinishColors"];var h={};var e=Object.keys(d);for(var g=0;g<e.length;g++){if(f.indexOf(e[g])!==-1){h[e[g]]=d[e[g]]}}return h},toJSON:function(d){var e={};var f=["FinishColors"];var h=Object.keys(this.omit());for(var g=0;g<h.length;g++){if(f.indexOf(h[g])!==-1){e[f[f.indexOf(h[g])]]=this.get(h[g])}}return e},});return a});define("DS/MPFCartModel/PrintRequestCartItemModel",["UWA/Core","DS/MPFCartModel/CartItemModel"],function(a,c){var b=c.extend({defaults:{BoundingBoxX:0,BoundingBoxY:0,BoundingBoxZ:0,Data:"",DateAnswer:null,DateDelivery:null,Format:"",MaterialCategory:"",MaterialID:"",MaterialSubCategory:"",OriginalSTLDocumentID:"",Painting:false,Part3DPrintMPId:"",Part3DPrintName:"",Part3DPrintStatus:"",PickUp:false,PostalDelivery:false,Polish:false,Process:"",STLRepairedStatus:"",ToleranceMin:0,ToleranceRate:0,Unit:"",Volume:0},setup:function(d,e){this._parent(d,e)},parse:function(e){var k=["Painting","PickUp","Polish","PostalDelivery"];var j=["DateAnswer","DateDelivery"];var d=["BoundingBoxX","BoundingBoxY","BoundingBoxZ","ToleranceMin","ToleranceRate","Volume"];var g=["Data","Format","MaterialCategory","MaterialID","MaterialSubCategory","OriginalSTLDocumentID","Part3DPrintMPId","Part3DPrintName","Part3DPrintStatus","Process","STLRepairedStatus","Unit"];var i={};var f=Object.keys(e);for(var h=0;h<f.length;h++){if(k.indexOf(f[h])!==-1){i[f[h]]=e[f[h]].toLowerCase()==="true"}else{if(j.indexOf(f[h])!==-1){i[f[h]]=new Date(e[f[h]])?new Date(e[f[h]]):""}else{if(d.indexOf(f[h])!==-1){i[f[h]]=parseFloat(e[f[h]])||0}else{if(g.indexOf(f[h])!==-1){i[f[h]]=e[f[h]]}}}}}return i},toJSON:function(l){var k={};var i=["Painting","PickUp","Polish","PostalDelivery"];var f=["DateAnswer","DateDelivery"];var m=["BoundingBoxX","BoundingBoxY","BoundingBoxZ","ToleranceMin","ToleranceRate","Volume"];var e=["Data","Format","MaterialCategory","MaterialID","MaterialSubCategory","OriginalSTLDocumentID","Part3DPrintMPId","Part3DPrintName","Part3DPrintStatus","Process","STLRepairedStatus","Unit"];var g=Object.keys(this.omit());for(var h=0;h<g.length;h++){var d=g[h];var j=this.get(d);if(i.indexOf(d)!==-1){k[i[i.indexOf(d)]]=j?"TRUE":"FALSE"}else{if(f.indexOf(d)!==-1){k[f[f.indexOf(d)]]=j!==""?j.toLocaleDateString("en-US").replace(/[^ -~]/g,""):j;if(j&&(j.getHours()!==0||j.getMinutes()!==0||j.getSeconds()!==0||j.getMilliseconds()!==0)){k[f[f.indexOf(d)]]+=(" "+j.toLocaleTimeString("en-US").replace(/[^ -~]/g,""))}}else{if(m.indexOf(d)!==-1){k[m[m.indexOf(d)]]=j.toString()}else{if(e.indexOf(d)!==-1){k[e[e.indexOf(d)]]=j}else{k[d]=j}}}}}return k},});return b});define("DS/MPFCartModel/DeliveryServiceRequestCartItemModel",["UWA/Core","DS/MPFCartModel/CartItemModel"],function(a,c){var b=c.extend({defaults:{DeliveryServiceName:""},setup:function(d,e){this._parent(d,e)},parse:function(d){var f=["DeliveryServiceName"];var h={};var e=Object.keys(d);for(var g=0;g<e.length;g++){if(f.indexOf(e[g])!==-1){h[e[g]]=d[e[g]]}}return h},toJSON:function(d){var e={};var f=["DeliveryServiceName"];var h=Object.keys(this.omit());for(var g=0;g<h.length;g++){if(f.indexOf(h[g])!==-1){e[f[f.indexOf(h[g])]]=this.get(h[g])}}return e},});return b});define("DS/MPFCartModel/AdditionalServiceRequestCartItemModel",["UWA/Core","DS/MPFCartModel/CartItemModel"],function(b,c){var a=c.extend({defaults:{AdditionalServiceName:""},setup:function(d,e){this._parent(d,e)},parse:function(d){var f=["AdditionalServiceName"];var h={};var e=Object.keys(d);for(var g=0;g<e.length;g++){if(f.indexOf(e[g])!==-1){h[e[g]]=d[e[g]]}}return h},toJSON:function(d){var e={};var f=["AdditionalServiceName"];var h=Object.keys(this.omit());for(var g=0;g<h.length;g++){if(f.indexOf(h[g])!==-1){e[f[f.indexOf(h[g])]]=this.get(h[g])}}return e},});return a});define("DS/MPFCartModel/TimelineItemModel",["UWA/Core","DS/MPFModel/MPFModel","DS/MPFCartModel/CartItemModel"],function(b,c,d){var a=c.extend({defaults:{cartChanges:{},id:"",message:{}},setup:function(e,f){this._parent(e,f);this._type="TimelineItemModel"},parse:function(e){var h={id:e.id,message:e.message};if(h.message.creation){h.message.creation=new Date(h.message.creation)}if(h.message.lastModification){h.message.lastModification=new Date(h.message.lastModification)}if(e["cart-changes"]){h.cartChanges={};var f=Object.keys(e["cart-changes"]);for(var g=0;g<f.length;g++){if(f[g]==="deleted-items"){h.cartChanges.deletedItems=e["cart-changes"]["deleted-items"]}else{if(f[g]==="updated-fields"){h.cartChanges.updatedFields=e["cart-changes"]["updated-fields"]}else{if(f[g]==="version"){h.cartChanges.version=e["cart-changes"].version}else{if(typeof e["cart-changes"][f[g]]==="object"){h.cartChanges[f[g]]=new d(null,{dataProxy:{}}).parse(e["cart-changes"][f[g]])}}}}}}return h},toJSON:function(e){var g={id:this.get("id"),message:this.get("message")};if(this.get("message").creation){g.message.creation=this.get("message").creation}if(this.get("message").lastModification){g.message.lastModification=this.get("message").lastModification}if(this.get("cartChanges")){g["cart-changes"]={};var f=Object.keys(this.get("cartChanges"));for(var h=0;h<f.length;h++){if(f[h]==="deletedItems"){g["cart-changes"]["deleted-items"]=this.get("cartChanges").deletedItems}else{if(f[h]==="updatedFields"){g["cart-changes"]["updated-fields"]=this.get("cartChanges").updatedFields}else{if(f[h]==="version"){g["cart-changes"].version=this.get("cartChanges").version}else{if(typeof this.get("cartChanges")[f[h]]==="object"){g["cart-changes"][f[h]]=new d(this.get("cartChanges")[f[h]],{dataProxy:{}}).toJSON()}}}}}}return g},getID:function(){return this.get("id")},setID:function(e){return this.set("id",e)},getCartChange:function(e){return this.get("cart-changes")[e]},setCartChange:function(e){this.get("cart-changes")[e.id]=e;return this.get("cart-changes")[e.id]},getMessage:function(){return this.get("message")}});return a});define("DS/MPFCartModel/TimelineItemCollection",["DS/MPFModel/MPFCollection","DS/MPFCartModel/TimelineItemModel"],function(c,b){var a=c.extend({model:b});return a});define("DS/MPFCartModel/CartPatchArray",["UWA/Class","DS/MPFCartModel/CartPatchOperation"],function(b,a){var c=b.extend({init:function(){this._parent();this.operations=[]},add:function(d){if(d&&typeof d.getOperation==="function"&&d.getOperation()!==a.Operations.none){this.operations.push(d)}},addAll:function(e){var d;var f;d=e.length;for(f=0;f<d;f++){this.add(e[f])}},getOperations:function(){return this.operations.slice()},toJSON:function(){return{patchArray:this.getOperations()}}});return c});define("DS/MPFCartModel/CartModel",["UWA/Core","UWA/Promise","DS/MPFModel/MPFModel","DS/MPFAddressModel/AddressModel","DS/MPFCartModel/CartItemModel","DS/MPFCartModel/TimelineItemModel","DS/MPFCartModel/CartPatchArray","DS/MPFCartModel/CartPatchOperation","DS/MPFUtils/MPFUtils","DS/MPFError/BadArgumentError"],function(m,n,b,k,i,l,p,o,j,q){var g={cancelled:"CANCELLED",delivered:"DELIVERED",draft:"DRAFT",paymentAccepted:"PAYMENT_ACCEPTED",paymentComplete:"PAYMENT_COMPLETE",paymentInitiated:"PAYMENT_INITIATED",paymentRefused:"PAYMENT_REFUSED",pendingPayment:"PENDING_PAYMENT",processing:"PROCESSING",submitted:"SUBMITTED",submited:"SUBMITTED",failed:"FAILED",blocked:"BLOCKED",expired:"EXPIRED"};var h={};var d={};var c={};var a={};var f={};a.CANCELLED="CANCELLED";a.DELIVERED="DELIVERED";a.DRAFT="DRAFT";a.PAYMENT_ACCEPTED="PAYMENT_ACCEPTED";a.PAYMENT_COMPLETE="PAYMENT_COMPLETE";a.PAYMENT_INITIATED="PAYMENT_INITIATED";a.PAYMENT_REFUSED="PAYMENT_REFUSED";a.PENDING_PAYMENT="PENDING_PAYMENT";a.PROCESSING="PROCESSING";a.SUBMITTED="SUBMITTED";a.FAILED="FAILED";a.BLOCKED="BLOCKED";a.EXPIRED="EXPIRED";h.NAME="name";h.SHOP_NAME="shopName";h.SHOP_ID="shopId";h.PURCHASE_ORDER_NUMBER="PurchaseOrderNumber";h.EXPENSE_FINANCIAL_LINE="FinancialLine";h.OWNER_ID="OwnerId";h.PURCHASE_ORDER_ID="PoID";h.PAYMENT_METHOD="PaymentMethod";h.STATE="currentState";h.BLOCKED="Blocked";h.BUYER_INVOICE_DOCUMENT_PID="BuyerInvoiceDocumentPid";h.IS_PAYMENT_COMPLETE="IsPaymentComplete";h.BUYER_INVOICE_NUMBER="BuyerInvoiceNum";h.PAYMENT_URL="PaymentUrl";h.CURRENCY="currency";h.CURRENCY_DECIMALS="currencyDecimals";h.ONLINE_INSTANCE="onlineInstance";h.LICENSING_SCHEME="licensingScheme";h.IS_DIRECT_PURCHASE="IsDirectPurchase";h.NAME="name";h.LAST_UPDATE="Modified";h.CREATED="created";h.GLOBAL_STATE="GlobalState";h.DELIVERY_DATE="DateDelivery";h.OWNER_DATA="OwnerData";h.CONTRACT_DOCUMENTS="contract-documents";h.NET_AMOUNT_TOTAL="NetAmountTotal";h.PRICE_MAXIMUM="maximumPrice";h.PRICE_MINIMUM="minimumPrice";h.MULTI_BIDDING_ID="multibiddingId";h.GROSS_AMOUNT_TOTAL="GrossAmountTotal";h.TAXES_AMOUNT_TOTAL="TaxesAmountTotal";h.MINIMUM_ORDER_COST="minimumOrderCostValue";d.BANK_CARD="CC";d.DEFERRED_BANK_TRANSFER="DBT";c.SOFTWARE_REQUEST="MP_SoftwareRequest";f.CART_ITEMS="cart-items";var e;e=b.extend({defaults:{created:"",currency:"",currentState:"",items:null,timelineItems:null,name:"",shopID:"",shopName:"",PurchaseOrderNumber:"",OwnerId:""},setup:function(r,s){this._parent(r,s);this._type="CartModel";if(!(this.getItems())){this.setItems([])}if(!(this.getTimelineItems())){this.setTimelineItems([])}},clone:function(){var t=this._parent();if(this.has("items")){t.set("items",[]);for(var s=0;s<this.get("items").length;s++){t.get("items").push(this.get("items")[s].clone())}}if(this.has("timelineItems")){t.set("timelineItems",[]);for(var r=0;r<this.get("timelineItems").length;r++){t.get("timelineItems").push(this.get("timelineItems")[r].clone())}}return t},parse:function(s){var t;var u;var r;if(j.isEmpty(s)){t=this.omit()}else{if(s.hasOwnProperty(this.id)){t=this.omit();s=s[this.id]}else{t=this._parent(s);j.objectChangeKey(t,"Created","created");j.objectChangeKey(t,"Currency","currency");j.objectChangeKey(t,"owner","Owner");if(!(t.shopName)){t.shopName=t.ShopName}t.NetAmountTotal=parseFloat(t.NetAmountTotal);t.GrossAmountTotal=parseFloat(t.GrossAmountTotal);t.FeeAmountTotal=parseFloat(t.FeeAmountTotal);t.TaxesAmountTotal=parseFloat(t.TaxesAmountTotal);t[h.PRICE_MINIMUM]=parseFloat(t[h.PRICE_MINIMUM]);t[h.PRICE_MAXIMUM]=parseFloat(t[h.PRICE_MAXIMUM]);u=t.BillTo;if(u&&typeof u==="object"){this.billingAddress=new k(null,{dataProxy:"notNeeded"});this.billingAddress.set(u);t.BillTo=u.id}r=t.ShipTo;if(r&&typeof r==="object"){this.shippingAddress=new k(null,{dataProxy:"notNeeded"});this.shippingAddress.set(r);t.ShipTo=r.id}if(t.Items){t.items=this.parseItems(t.Items);delete t.Items}if(t.timelineItems){t.timelineItems=this.parseTimelineItems(t.timelineItems)}if(t.CompanyID){j.objectChangeKey(t,"CompanyID","companyID")}if(t.PersonID){j.objectChangeKey(t,"PersonID","personID")}t.IsTest=t.IsTest===true||t.IsTest==="TRUE"}}return t},parseItems:function(s){var r=[];var t;t=m.is(s,"array")&&s.length>0;if(t&&typeof s[0]==="string"){r=s}else{if(t&&typeof s[0]==="object"){r=s.map(function(u){return new i(u,{dataProxy:this.dataProxy,parse:true})},this)}}return r},parseTimelineItems:function(t){var s=[];var r;r=m.is(t,"array")&&t.length>0;if(r&&typeof t[0]==="string"){s=t}else{if(r&&typeof t[0]==="object"){s=t.map(function(u){return new l(u,{dataProxy:this.dataProxy,parse:true})},this)}}return s},toJSON:function(){var t;var s;t=this._parent();delete t.originalCart;delete t.Annotations;delete t.UserAllowedViews;t.Created=t.created;delete t.created;t.Currency=t.currency;delete t.currency;t.Items=[];t.timelineItems=[];var r=this.get("items");for(s=0;s<r.length;s++){if(typeof r[s]==="object"){t.Items.push(r[s].toJSON())}else{t.Items.push(r[s])}}delete t.items;var u=this.get("timelineItems");for(s=0;s<u.length;s++){if(typeof u[s]==="object"){t.timelineItems.push(u[s].toJSON())}else{t.timelineItems.push(u[s])}}if(this.billingAddress){t.BillTo=this.billingAddress.toJSON()}if(this.shippingAddress){t.ShipTo=this.shippingAddress.toJSON()}if(this.get("onlineInstance")){t.OnlineInstance=this.get("onlineInstance")}return t},getCartItems:function(t){var s=this.get("items")||[];var r=[];s.forEach(function(u){if(u.get("type")===t){r.push(u)}});return r},getCartItem:function(r){return this.get("items").filter(function(s){return(s.get("id")===r)}).shift()},savePromise:function(u,x,t){var w;var s;var r;var v;var y;s=(!m.is(u))||(m.typeOf(u))==="object";if(s){t=x}t=t||{};if(t.patch===true){if(s){r=u}else{r={};r[u]=x}v=new o(o.Operations.modify,"/",r);y=new p();y.add(v);w=this.megaPatch(y)}else{w=this._parent(u,x,t)}return w},megaPatch:function(u,s){var t=this;var r;r=this.dataProxy.url(this);return this.dataProxy.requestPromise(r,{method:"PATCH",data:JSON.stringify(u.toJSON())}).then(function(v){s||(s={});if(s.parse!==false){t.set(t.parse(v))}})},updateState:function(r){var s;var v;var u;var t;s=a[r];if(s){u=new o(o.Operations.modify,"/",{currentState:s});v=new p();v.add(u);t=this.megaPatch(v)}else{t=n.reject(new q("Invalid state for cart : "+s))}return t},getName:function(){return this.get(h.NAME)},setName:function(r){return this.set(h.NAME,r)},getCurrency:function(){return this.get(h.CURRENCY)},setCurrency:function(r){return this.set(h.CURRENCY,r)},getCurrencyDecimals:function(){return this.get(h.CURRENCY_DECIMALS)},setCurrencyDecimals:function(r){return this.set(h.CURRENCY_DECIMALS,r)},getBillingAddress:function(){return this.billingAddress},setBillingAddress:function(r){this.billingAddress=r},getShippingAddress:function(){return this.get("shippingAddress")},setShippingAddress:function(r){return this.set("shippingAddress",r)},getPaymentUrl:function(){return this.get(h.PAYMENT_URL)},setPaymentUrl:function(r){return this.set(h.PAYMENT_URL,r)},getPaymentMethod:function(){return this.get(h.PAYMENT_METHOD)},setPaymentMethod:function(r){return this.set(h.PAYMENT_METHOD,r)},getState:function(){return this.get(h.STATE)},setState:function(r){return this.set(h.STATE,r)},getItems:function(){return this.get("items")},setItems:function(r){return this.set("items",r)},getShopId:function(){return this.get("shopID")||this.get("ShopID")},getShopID:function(){return this.getShopId()},setShopId:function(r){return this.set("shopID",r)},getShopName:function(){return this.get(h.SHOP_NAME)},setShopName:function(r){return this.set(h.SHOP_NAME,r)},getPurchaseOrderNumber:function(){return this.get("PurchaseOrderNumber")},setPurchaseOrderNumber:function(r){return this.set("PurchaseOrderNumber",r)},getCompanyID:function(){return this.get("companyID")},getPersonID:function(){return this.get("personID")},getOwnerId:function(){return this.get("OwnerId")},setOwnerId:function(r){return this.set("OwnerId",r)},getTimelineItems:function(){return this.get("timelineItems")},setTimelineItems:function(r){return this.set("timelineItems",r)},getPurchaseOrderId:function(){return this.get(h.PURCHASE_ORDER_ID)},setPurchaseOrderId:function(r){return this.set(h.PURCHASE_ORDER_ID,r)},getExpenseFinancialLine:function(){return this.get(h.EXPENSE_FINANCIAL_LINE)},setExpenseFinancialLine:function(r){return this.set(h.EXPENSE_FINANCIAL_LINE,r)},getBuyerInvoiceDocumentPid:function(){return this.get(h.BUYER_INVOICE_DOCUMENT_PID)},setBuyerInvoiceDocumentPid:function(r){return this.set(h.BUYER_INVOICE_DOCUMENT_PID,r)},isPaymentComplete:function(){return this.get(h.IS_PAYMENT_COMPLETE)==="TRUE"},setPaymentComplete:function(r){return this.set(h.IS_PAYMENT_COMPLETE,r)},getBuyerInvoiceNumber:function(){return this.get(h.BUYER_INVOICE_NUMBER)},isBlocked:function(){return this.get(h.BLOCKED)==="TRUE"},getOnlineInstance:function(){return this.get(h.ONLINE_INSTANCE)},getLicensingScheme:function(){return this.get(h.LICENSING_SCHEME)},isDirectPurchase:function(){return this.get(h.IS_DIRECT_PURCHASE)==="TRUE"},getLastUpdate:function(){return this.get(h.LAST_UPDATE)},getCreated:function(){return this.get(h.CREATED)},getGlobalState:function(){return this.get(h.GLOBAL_STATE)},getDeliveryDate:function(){return this.get(h.DELIVERY_DATE)},getOwnerData:function(){return this.get(h.OWNER_DATA)},getContractDocuments:function(){return this.get(h.CONTRACT_DOCUMENTS)},getNetAmountTotal:function(){return this.get(h.NET_AMOUNT_TOTAL)},getGrossAmountTotal:function(){return this.get(h.GROSS_AMOUNT_TOTAL)},getTaxesAmountTotal:function(){return this.get(h.TAXES_AMOUNT_TOTAL)},getMultiBiddingId:function(){return this.get(h.MULTI_BIDDING_ID)},setMultiBiddingId:function(r){return this.set(h.MULTI_BIDDING_ID,r)},getMinOrderCost:function(){return this.get(h.MINIMUM_ORDER_COST)},setMinOrderCost:function(r){return this.set(h.MINIMUM_ORDER_COST,r)}});e.STATUS=g;e.States=Object.freeze(a);e.Fields=Object.freeze(h);e.PaymentMethods=Object.freeze(d);e.Types=Object.freeze(c);e.Expands=Object.freeze(f);return e});define("DS/MPFCartModel/CartCollection",["UWA/Core","DS/MPFModel/MPFCollection","DS/MPFCartModel/CartModel"],function(d,c,a){var b=c.extend({model:a,parse:function(e){var h;var i;var g;var f;i=d.typeOf(e)==="object";g=i&&e.numberOfCarts;f=i&&e.carts;if(i&&g&&f){this.totalModelCount=e.numberOfCarts;this.all=e.all;this.pending=e.pending;this.cancelled=e.cancelled;this.delivered=e.delivered;h=e.carts}else{h=e}return h}});return b});define("DS/MPFCartModel/CartModelHelper",["UWA/Core","UWA/Class","DS/MPFCartModel/CartModel","DS/MPFCartModel/CartItemModel","DS/MPFError/BadArgumentError","i18n!DS/MPFCartModel/assets/nls/CartModel"],function(g,c,e,f,a,d){var b={};b.isWaitingForPurchaseOrder=function(i,j){var k;var h;k=j==="buyer";h=g.is(i.getPurchaseOrderId());return k&&!(h)&&i.isBlocked()};b.isWaitingForInvoice=function(i,j){var k;var h;var l;k=j==="seller";h=!!i.getBuyerInvoiceNumber();l=i.getItems().filter(function(m){var p;var q;var o;var n;p=m.getState();q=p===f.STATUS.shipped;o=p===f.STATUS.ready;n=p===f.STATUS.delivered;return q||o||n}).length>0;return k&&!(h)&&l};b.isWaitingForProceedToPayement=function(h,i){var j;var k;j=i==="buyer";k=!!h.getBuyerInvoiceNumber();return j&&k&&!(h.isPaymentComplete())};b.isConfirmed=function(h){var i;i=h.getItems().filter(function(j){var m;var n;var l;var k;m=j.getState();n=m===f.STATUS.shipped;l=m===f.STATUS.ready;k=m===f.STATUS.delivered;return n||l||k}).length>0;return i};b.getElapsedTime=function(i){var k;var h;var j;k=new Date(i);h=new Date();j=new Date(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate(),h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds());return b.getTimeDifference(j,k)};b.getRemainingTime=function(i){var k;var h;var j;k=new Date(i);h=new Date();j=new Date(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate(),h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds());return b.getTimeDifference(k,j)};b.getTimeDifference=function(m,l){var n;var k;var h;var o;var i;var j;n=Math.floor((new Date(m)-new Date(l))/1000);k=Math.floor(n/31536000);if(k>1){return k+" "+d.get("years")}else{if(k===1){return k+" "+d.get("year")}}h=Math.floor(n/2592000);if(h>1){return h+" "+d.get("months")}else{if(h===1){return h+" "+d.get("month")}}o=Math.floor(n/86400);if(o>1){return o+" "+d.get("days")}else{if(o===1){return o+" "+d.get("day")}}i=Math.floor(n/3600);if(i>1){return i+" "+d.get("hours")}else{if(i===1){return i+" "+d.get("hour")}}j=Math.floor(n/60);if(j>1){return j+" "+d.get("minutes")}else{if(j===1){return j+" "+d.get("minute")}}return d.get("fewSeconds")};b.isPaidByDirectPurchase=function(m,k){var n;var l;var o;var h;var p;var j;var i;n=m.getState();l=k.first().getState();o=n===e.States.PENDING_PAYMENT;h=n===e.States.PAYMENT_INITIATED;p=n===e.States.PAYMENT_COMPLETE;j=n===e.States.PAYMENT_REFUSED;i=l===f.STATUS.submitted;return(o||h||p||j)&&i};b.getCurrencySymbol=function(j){var h;var i;h=0;i=h.toLocaleString(this.locale,{style:"currency",currency:j.getCurrency()}).replace(/[\w\s,.]/g,"");if(i===""){i=h.toLocaleString(this.locale,{style:"currency",currency:j.getCurrency()}).replace(/[\d\s,.]/g,"")}return i};b.formatPrice=function(k,i,h){var j;g.is(i,"number")||(i=k.getNetAmountTotal());h||(h={});h.locale||(h.locale="fr-FR");j={style:"currency",currency:k.getCurrency()};if(h.noSymbol===true){j.currencyDisplay="code"}i=i.toLocaleString(h.locale,j);if(i.replace(/[A-Za-z0-9.,\s]/g,"")===""&&!h.noSymbol){return i}else{return i.replace(/[A-Za-z]/g,"")}};return b});