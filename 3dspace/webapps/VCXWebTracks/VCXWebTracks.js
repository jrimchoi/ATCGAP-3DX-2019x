define("DS/VCXWebTracks/VCXKey",[],function(){var a=function(c,b){this._frame=c;this._value=b};a.prototype.Copy=function(b){this._frame=b._frame;this._value=b._value};a.prototype.SetFrame=function(b){this._frame=b};a.prototype.GetFrame=function(){return this._frame};a.prototype.SetValue=function(b){this._value=b};a.prototype.GetValue=function(){return this._value};a.prototype.Clone=function(){var b=new a();var d=this.GetFrame();b.SetFrame(d);var c=this.GetValue().Clone();b.SetValue(c);return b};return a});define("DS/VCXWebTracks/VCXEasing",["UWA/Class"],function(a){var b=a.singleton({init:function(){},easeInOutPower3:function(d,e,c){if(d<0.5){return e+d*d*d*4*(c-e)}else{d=1-d;return c+d*d*d*4*(e-c)}}});return b});define("DS/VCXWebTracks/VCXInterpolator",["UWA/Class",],function(a){var b=a.extend({init:function(){},GetType:function(){return"VCXInterpolator"},GetInterpolatedValue:function(e,f,d,c){}});b.EInterpolationType={Linear:0,Cubic:1,Custom:2,Smooth:5};return b});"use strict";var VCXGlobalCompare=function(d,c){return d._frame-c._frame};define("DS/VCXWebTracks/VCXTrack",["UWA/Class","DS/WebRBTree/WebRBTree","DS/VCXWebTracks/VCXKey","DS/WebRBTree/WebRBIterator"],function(c,d,e,b){var a=c.extend({init:function(){this._objectAnimation=null;this._treekeys=new d(VCXGlobalCompare);this._rangeok=false;this._lastKeyInf=null;this._lastKeySup=null},unInitialize:function(){this._objectAnimation=null;this._rangeok=false;this._lastKeyInf=null;this._lastKeySup=null;this._treekeys=null},SetObjectAnimation:function(f){this._objectAnimation=f},GetObjectAnimation:function(){return this._objectAnimation},SetBoostDirty:function(){if(this._objectAnimation){this._objectAnimation.SetBoostDirty()}},AddKey:function(f){this.SetBoostDirty();var h=this._treekeys.findIter(f);if(h){var g=h.data();g.SetValue(f.GetValue())}else{this._treekeys.insert(f)}this._rangeok=false;this._lastKeyInf=null;this._lastKeySup=null},RemoveKey:function(g){this.SetBoostDirty();var f=new e();f.SetFrame(g);this._treekeys.remove(f);this._rangeok=false;this._lastKeyInf=null;this._lastKeySup=null},GetKey:function(f){var i=new e();i.SetFrame(f);var h=this._treekeys.findIter(i);if(h){var g=h.data();return g}else{return null}},GetKeysForLinearInterpolationREF:function(f,g){if(this._rangeok){if(this._lastKeyInf){if(f<this._lastKeyInf.GetFrame()){this._rangeok=false}}if(this._lastKeySup){if(f>=this._lastKeySup.GetFrame()){this._rangeok=false}}if(this._rangeok){g.keyInf=this._lastKeyInf;g.keySup=this._lastKeySup;return false}}var j=new e();j.SetFrame(f);var i=this._treekeys.lowerBound(j);var k=i.data();if(k){g.keyInf=k}else{g.keyInf=null}i.next();var h=i.data();if(h){g.keySup=h}else{g.keySup=null}this._rangeok=true;this._lastKeyInf=g.keyInf;this._lastKeySup=g.keySup;return true},GetKeysForCubicInterpolation:function(n,m,l,q,g){var p=new e();p.SetFrame(n);var f=this._treekeys.lowerBound(p);var i=f.data();if(i===null){l._value=null;l._frame=null}else{l.Copy(i)}var h=this._treekeys.lowerBound(p).prev();if(h===null){m._value=null;m._frame=null}else{m.Copy(h)}f.next();var j=f.data();if(j===null){q._value=null;q._frame=null}else{q.Copy(j)}var k=f._cursor;var o=f.next();if(o===null||typeof k==="undefined"){g._value=null;g._frame=null}else{g.Copy(o)}},GetPreviousKey:function(f){var h=new e();h.SetFrame(f);var g=this._treekeys.lowerBound(h);var i=g.data();if(i===null){return null}else{return i}},GetPreviousStrictKey:function(f){var h=new e();h.SetFrame(f);var g=this._treekeys.lowerBound(h);var i=g.data();if(i===null){return null}else{if(i.GetFrame()===f){i=this._treekeys.lowerBound(h).prev()}return i}},GetNextStrictKey:function(f){var i=new e();i.SetFrame(f);var h=this._treekeys.upperBound(i);var g=h.data();if(g===null){return null}else{if(g.GetFrame()===f){g=this._treekeys.lowerBound(i).next()}return g}},GetMaxFrame:function(){var f=0;var g=this._treekeys.max();if(g!==null){f=g._frame}return f},IsEmpty:function(){var f=this._treekeys.max();if(f!==null){return false}else{return true}},IsConstant:function(){var j=null;var f=this._treekeys;var g=new b(f);var i=g.next();while(i!==null){var h=i.GetValue();console.log("            "+i.GetFrame()+"   "+h.ToString());if(j){if(!j.IsEqualTo(h)){return false}}else{j=h}i=g.next()}return true},Clone:function(){var j=new a();var g=this._treekeys;var h=new b(g);var i=h.next();while(i!==null){var f=i.Clone();j.AddKey(f);i=h.next()}return j},ResetRangeCache:function(){this._rangeok=false}});return a});define("DS/VCXWebTracks/VCXInterpolatorConstant",["DS/VCXWebTracks/VCXInterpolator",],function(b){var a=b.extend({init:function(){},GetType:function(){return"VCXInterpolatorConstant"},GetInterpolatedValue:function(f,g,e,d){var c=null;if(d){c=d[g]}var i=null;if(c){i=c.GetPreviousKey(e)}if(i){return i.GetValue()}else{if(f){var h=f.GetProperty(g);if(h){return h.GetPropertyValue()}}else{return null}}}});return a});define("DS/VCXWebTracks/VCXInterpolatorCubic",["DS/VCXWebTracks/VCXInterpolator","DS/VCXWebTracks/VCXKey"],function(b,c){var a=b.extend({init:function(){},GetType:function(){return"VCXInterpolatorCubic"},GetInterpolatedValue:function(q,j,h,n){var f=null;if(n){f=n[j]}var o=new c(null,null);var m=new c(null,null);var s=new c(null,null);var d=new c(null,null);if(typeof f!=="undefined"){f.GetKeysForCubicInterpolation(h,o,m,s,d)}if(m.GetValue()===null){if(typeof q!=="undefined"){var p=q.GetProperty(j);if(typeof p!=="undefined"){m=new c();m.SetValue(p.GetPropertyValue());m.SetFrame(0)}}}if(m.GetValue()===null){return null}if(o.GetValue()===null){o.SetValue(m.GetValue());o.SetFrame(m.GetFrame())}if(s.GetValue()===null){s.SetValue(m.GetValue());s.SetFrame(m.GetFrame())}if(d.GetValue()===null){d.SetValue(s.GetValue());d.SetFrame(s.GetFrame())}var e=o.GetValue();var g=m.GetValue();var k=s.GetValue();var l=d.GetValue();var r=1;if(s.GetFrame()!==m.GetFrame()){r=(h-m.GetFrame())/(s.GetFrame()-m.GetFrame())}var i=g.GetCubicInterpolatedValue(e,g,k,l,o.GetFrame(),m.GetFrame(),s.GetFrame(),d.GetFrame(),r);return i}});return a});define("DS/VCXWebTracks/VCXInterpolatorLinear",["DS/VCXWebTracks/VCXInterpolator","DS/VCXWebTracks/VCXKey"],function(b,c){var a=b.extend({init:function(){this._rangeChanged=false},GetType:function(){return"VCXInterpolatorLinear"},SetRangeChanged:function(d){if(this._rangeChanged!==d){this._rangeChanged=d}},GetRangeChanged:function(){return this._rangeChanged},GetInterpolatedValue:function(n,i,g,l){var e=null;if(l){e=l[i]}var k={};k.keyInf=null;k.keySup=null;if(e){var d=e.GetKeysForLinearInterpolationREF(g,k);this.SetRangeChanged(d)}if(k.keyInf===null){if(n){var m=n.GetProperty(i);if(m){k.keyInf=new c(null,null);k.keyInf.SetValue(m.GetPropertyValue());k.keyInf.SetFrame(0)}}}if(k.keyInf){if(k.keySup){var f=k.keyInf.GetValue();var j=k.keySup.GetValue();var o=(g-k.keyInf.GetFrame())/(k.keySup.GetFrame()-k.keyInf.GetFrame());if(e.easing){o=e.easing(o,0,1)}var h=f.GetInterpolatedValue(f,j,o);return h}else{return k.keyInf.GetValue()}}else{return null}}});return a});define("DS/VCXWebTracks/VCXInterpolatorSpherical",["DS/VCXWebProperties/VCXPropertyValueFrame","DS/VCXWebTracks/VCXInterpolator","DS/VCXWebTracks/VCXInterpolatorLinear","DS/VCXWebTracks/VCXKey","DS/Visualization/ThreeJS_DS"],function(a,d,c,f,b){var e=d.extend({init:function(){},GetType:function(){return"VCXInterpolatorSpherical"},setTargetPropertyName:function(g){this._targetPropertyName=g},setPositionPropertyName:function(g){this._positionPropertyName=g},GetInterpolatedValue:function(k,y,q,w){if(w===null){if(k){var r=k.GetProperty(this._positionPropertyName);if(r){return r.GetPropertyValue().GetValueFrame()}}return null}var t=w[this._positionPropertyName];var o=w[this._targetPropertyName];if(!t||!o){if(!t&&!o){return null}console.warn("Case not handled. Show this to ITY")}var B={};B.keyInf=null;B.keySup=null;var v=null;if(t){t.GetKeysForLinearInterpolationREF(q,B)}if(B.keyInf===null){if(k){var r=k.GetProperty(this._positionPropertyName);if(r){B.keyInf=new f(null,null);B.keyInf.SetValue(r.GetPropertyValue());B.keyInf.SetFrame(0)}}}if(B.keyInf){if(B.keySup){var u=B.keyInf.GetValue();var p=B.keySup.GetValue();var x=(q-B.keyInf.GetFrame())/(B.keySup.GetFrame()-B.keyInf.GetFrame());if(t.easing){x=t.easing(x,0,1)}var o=w[this._targetPropertyName];if(o){var s=new c();var m=s.GetInterpolatedValue(k,this._targetPropertyName,B.keyInf.GetFrame(),w);var A=s.GetInterpolatedValue(k,this._targetPropertyName,B.keySup.GetFrame(),w);var z=m.GetInterpolatedValue(m,A,x);var j=new b.Matrix4().getInverse(m.GetValueFrame().Value).multiply(u.GetValueFrame().Value);var i=new b.Matrix4().getInverse(A.GetValueFrame().Value).multiply(p.GetValueFrame().Value);var h=new a(j);var g=new a(i);var l=h.GetInterpolatedValue(h,g,x);var n=new a(new b.Matrix4().multiplyMatrices(z.GetValueFrame().Value,l.Value));return n}}else{v=B.keyInf.GetValue()}}else{return null}if(v){return v.GetValueFrame()}else{return null}}});return e});define("DS/VCXWebTracks/VCXInterpolatorCylindrical",["DS/VCXWebTracks/VCXInterpolator","DS/VCXWebTracks/VCXInterpolatorLinear","DS/VCXWebTracks/VCXKey","DS/Visualization/ThreeJS_DS",],function(d,c,e,b){var a=d.extend({init:function(){this._axis=[];this._axis[0]=0;this._axis[1]=0;this._axis[2]=0;this._axis[3]=0;this._axis[4]=0;this._axis[5]=1},GetType:function(){return"VCXInterpolatorCylindrical"},setAxisOrigin:function(f,h,g){this._axis[0]=f;this._axis[1]=h;this._axis[2]=g},setAxisDirection:function(f,h,g){this._axis[3]=f;this._axis[4]=h;this._axis[5]=g},setTargetPropertyName:function(f){this._centerPropertyName=f},setPositionPropertyName:function(f){this._positionPropertyName=f},GetInterpolatedValue:function(t,l,j,p){if(p===null){return null}var m=p[this._centerPropertyName];var f=p[this._positionPropertyName];var o={};o.keyInf=null;o.keySup=null;var i=new c();var q=i.GetInterpolatedValue(t,this._centerPropertyName,j,p);var r=q.GetValueFrame().Value;var h=new b.Vector3().getPositionFromMatrix(r);this.setAxisOrigin(h.x,h.y,h.z);var k=null;if(f){f.GetKeysForLinearInterpolationREF(j,o)}if(o.keyInf===null){if(t){var s=t.GetProperty(l);if(s){o.keyInf=new e(null,null);o.keyInf.SetValue(s.GetPropertyValue());o.keyInf.SetFrame(0)}}}if(o.keyInf){if(o.keySup){var g=o.keyInf.GetValue();var n=o.keySup.GetValue();var u=(j-o.keyInf.GetFrame())/(o.keySup.GetFrame()-o.keyInf.GetFrame());if(f.easing){u=f.easing(u,0,1)}k=g.GetCylindricalInterpolatedValue(g,n,u,this._axis)}else{k=o.keyInf.GetValue()}}else{return null}if(k){return k.GetValueFrame()}else{return null}}});return a});