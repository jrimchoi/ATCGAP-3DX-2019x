define("DS/i3DXCompassCore/CacheManager",["UWA/Core","UWA/Class","UWA/Utils","UWA/Storage","UWA/Storage/Adapter/Dom"],function(d,c,h,j){var e,b,i,g=24*3600000,f=new j({adapter:"Dom",database:"3DCompass"}),a={};return c.singleton({setup:function(k,l){e=k;if(!k){f=null}if(l){b=l}},CACHE_STRATEGY_STATIC:1,CACHE_STRATEGY_NO_WAIT:2,LONG_LIFE_TIME:g,setRequestCache:function(l,k,m){if(m&&m.cacheStrategy===this.CACHE_STRATEGY_STATIC){this.setLocalCache(l.url+JSON.stringify(m.data),k)}else{this.setCache(l.url+JSON.stringify(m.data),k)}},getRequestCache:function(k,m){var l=m.cacheTTL;if(m&&m.cacheStrategy===this.CACHE_STRATEGY_STATIC){return this.getLocalCache(k.url+JSON.stringify(m.data),l)}else{return this.getCache(k.url+JSON.stringify(m.data),l)}},setLocalCache:function(k,l){a[k]=l},getLocalCache:function(k){return a[k]},setCache:function(k,l){if(f){try{f.set(this._getKeyUID(k),l)}catch(m){f=null}}},getCache:function(l,n){var k=null;if(!n){n=g}if(f){try{k=f.get(this._getKeyUID(l),n)}catch(m){f=null}}return k},_getKeyUID:function(k){return h.getCheckSum(k+b+e+i)},_getUser:function(){return e}})});define("DS/i3DXCompassCore/Utils",["UWA/Core","UWA/Class","UWA/Utils"],function(e,b,d){var m="420.0.0",j=null,h=new Date().getTimezoneOffset(),g=null,k={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},i={},l=["platform-management-2"],c=null,f,a=null;return{getVersion:function(){return m},getTimezoneOffset:function(){return h},isTouchActivate:function(){if(g===null){g=e.Utils.Client.Features.touchEvents}return g},isUrl:function(n){return(n.indexOf("http")===0||n.indexOf("https")===0)&&d.isValidUrl(n)},isBase64:function(o){var n=new RegExp("^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{4})$");return n.test(o)},isBase64Image:function(n){if(n.indexOf("data:image")>-1&&n.indexOf(";base64,")>-1){n=n.split(";base64,")[1]}return this.isBase64(n)},getFileName:function(o){o=o.replace(/\\/g,"/");var p=o.lastIndexOf("/");return o.substr(p+1)},getFileExtension:function(o){var n=o.lastIndexOf("."),p="";if(n>-1){p=o.toLowerCase().substr(n+1)}return p},msToHoursMin:function(o){var n=Math.floor(o/3600000),p=Math.round((o-n*3600000)/60000);return{hours:n,minutes:p}},escapeDomSelector:function(n){n=n.replace(/:/g,"\\:");n=n.replace(/\./g,"\\.");n=n.replace(/@/g,"\\@");return n},escape:function(n){var o;for(o in k){if(k.hasOwnProperty(o)){if(n){n=n.replace(new RegExp(o,"g"),k[o])}}}return n},unescape:function(n){var o;for(o in k){if(k.hasOwnProperty(o)){if(n){n=n.replace(new RegExp(k[o],"g"),o)}}}return n},getTextFromHtml:function(n){var o=document.createElement("div");if(e.is(n,"string")&&n!==""){n=this.unescape(n);n=this.escape(n);o.innerHTML=n;n=o.childNodes[0].nodeValue}return n},getUUID:function(){return d.getCheckSum(d.getUUID())},detectOs:function(){var n=navigator.userAgent.toLowerCase();if(j===null){if(n.indexOf("windows")>-1){j="windows"}else{if(n.match(/(ipad|iphone|ipod)/g)){j="ios"}else{if(n.indexOf("mac")>-1){j="macos"}else{if(n.indexOf("android")>-1){j="android"}else{if(n.indexOf("linux")>-1){j="linux"}else{j="unknown"}}}}}}return j},merge:function(p,n){var q,o=Object.prototype.hasOwnProperty;for(q in n){if(o.call(n,q)){if(p[q]===undefined){p[q]=n[q]}}}return p},removeUselessPort:function(n){if(typeof n==="string"){n=n.replace(":443/","/").replace(":80/","/")}return n},isEmptyString:function(n){return !n||typeof n!=="string"||!n.trim()},isBetaModeActivated:function(p){var n=false,o="3DCompass-"+p;if(typeof i[o]==="undefined"){try{n=!!e.is(localStorage.getItem(o));i[o]=n}catch(q){e.log(q)}}else{n=i[o]}return n},i18n:function(n){var o=e.i18n(n);if(o){o=o.replace("3DEXPERIENCE","<b>3D</b>EXPERIENCE")}return o},getParentModule:(function(){var n={};function o(){var p;try{parent.document;p=true}catch(q){p=false}return p}return function(q,p){if(!n[q]&&o()){try{parent.require([q],function(s){n[q]=s;p(s)})}catch(r){try{require([q],function(s){n[q]=s;p(s)})}catch(r){}}}else{if(n[q]){setTimeout(function(){p(n[q])},0)}else{require([q],function(s){n[q]=s;p(s)})}}}}()),getRoleColor:function(o,r){var p={"-1":"pending","0":"admin","1":"member","2":"deny","3":"contractor"},n=(p[o])||p["-1"],q={"-1":"pending","0":"warning","1":"info","2":"error","3":"contractor"};return r===true?"color-indicator-"+n:q[o]},getAgreementValue:function(n){return n?"1":"0"},isCheckedAgreement:function(n){return n==="1"},scrollToElement:function(n){if(!this.isFrame()&&document.body){document.body.scrollTop=document.body.getElement(n).getPosition().y+64}},extractEmails:function(n){return n.match(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi)},manageSupportOfMultiModal:function(){var o="platform-management-modal-open",n=function(){if(document.body.getElement(".platform-management-2.modal")){document.body.addClassName("modal-open")}document.body.removeClassName(o)};document.body.addClassName(o);setTimeout(n,50)},getPlatformManagementWrapperClassName:function(n){if(l.length===1){l.push(this.detectOs());if(this.isTouchActivate()){l.push("is-touch")}l=l.join(" ")}return e.is(n,"string")?l+" "+n:l},isFrame:function(){if(c===null){c=document.location!==top.location}return c},downScaleCanvas:function(o,V){if(V===1){return o}if(V<0||V>1){throw new Error("scale must be a positive number <1 ")}var B=V*V;var y=o.width;var Q=o.height;var T=Math.ceil(y*V);var p=Math.ceil(Q*V);var v=0,u=0,D=0;var R=0,O=0,t=0,L=0;var z=0,x=0;var s=0,N=0,S=0,J=0,P=0,I=0;var M=false;var K=false;var G=o.getContext("2d").getImageData(0,0,y,Q).data;var C=new Float32Array(4*y*Q);var q=0,A=0,F=0;var H=0;for(u=0;u<Q;u++){O=u*V;x=Math.floor(O);t=4*x*T;K=(x!==(Math.floor(O+V)));if(K){P=(x+1-O);I=(O+V-x-1)}for(v=0;v<y;v++,D+=4){R=v*V;z=Math.floor(R);L=t+z*4;M=(z!==(Math.floor(R+V)));if(M){S=(z+1-R);J=(R+V-z-1)}q=G[D];A=G[D+1];F=G[D+2];H=G[D+3];if(!M&&!K){C[L]+=q*B;C[L+1]+=A*B;C[L+2]+=F*B;C[L+3]+=H*B}else{if(M&&!K){s=S*V;C[L]+=q*s;C[L+1]+=A*s;C[L+2]+=F*s;C[L+3]+=H*s;N=J*V;C[L+4]+=q*N;C[L+5]+=A*N;C[L+6]+=F*N;C[L+7]+=H*N}else{if(K&&!M){s=P*V;C[L]+=q*s;C[L+1]+=A*s;C[L+2]+=F*s;C[L+3]+=H*s;N=I*V;C[L+4*T]+=q*N;C[L+4*T+1]+=A*N;C[L+4*T+2]+=F*N;C[L+4*T+3]+=H*N}else{s=S*P;C[L]+=q*s;C[L+1]+=A*s;C[L+2]+=F*s;C[L+3]+=H*s;N=J*P;C[L+4]+=q*N;C[L+5]+=A*N;C[L+6]+=F*N;C[L+7]+=H*N;N=S*I;C[L+4*T]+=q*N;C[L+4*T+1]+=A*N;C[L+4*T+2]+=F*N;C[L+4*T+3]+=H*N;N=J*I;C[L+4*T+4]+=q*N;C[L+4*T+5]+=A*N;C[L+4*T+6]+=F*N;C[L+4*T+7]+=H*N}}}}}var U=document.createElement("canvas");U.width=T;U.height=p;var r=U.getContext("2d");var E=r.getImageData(0,0,T,p);var W=E.data;var n=0;for(D=0,L=0;n<T*p;D+=4,L+=4,n++){W[L]=Math.ceil(C[D]);W[L+1]=Math.ceil(C[D+1]);W[L+2]=Math.ceil(C[D+2]);W[L+3]=Math.ceil(C[D+3])}r.putImageData(E,0,0);return U},isEmail:function(n){var o=/^([a-zA-Z0-9_.\-'+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;return o.test(n)},getLang:function(){return a?a:this.getWidget().lang},setLang:function(n){a=n},getWidget:function(){return f},setWidget:function(n){f=n},isValidFilePathTxt:function(n){var o=/^(([a-zA-Z]:)((\\|\/)[^/\\:*?"><| ]([^/\\:*?"><|]*[^/\\:*?"><| ])?)+|(\\\\[.\w-]+)(\\[^/\\:*?"><| ]([^/\\:*?"><|]*[^/\\:*?"><| ])?)+)\.txt$/;return n.endsWith(".txt")&&o.test(n)},isHttpsUrl:function(n){return n.indexOf("https")===0&&d.isValidUrl(n)},isUNC:function(p){var o=new RegExp(/\\\\[a-zA-Z0-9\.\-_]{1,}(\\[a-zA-Z0-9\-_]{1,}){1,}[\$]{0,1}/g),n=(p.match(new RegExp("%","g"))||[]).length;return(n>0&&n%2===0)||o.test(p)}}});define("DS/i3DXCompassCore/UsageTracker",["UWA/Core","DS/Usage/TrackerAPI"],function(d,c){function b(g,f,h,e){if(!e&&!h){return g+":"+f}else{if(!e){h=h.replace(/ /g,"");return g+":"+h+":"+f}else{h=h.replace(/ /g,"");return g+":"+h+":"+f+":"+e}}}var a={_IDS:{compass:{quadrant:{north:"compass.quadrant.north",east:"compass.quadrant.east",south:"compass.quadrant.south",west:"compass.quadrant.west",play:"compass.quadrant.play"},cross:"compass.cross",role:"compass.role",roleFavorite:"compass.role.favorite",app:"compass.app",appFavorite:"compass.app.favorite",section:"compass.section"}},inc:function(g,f,h,e){c.getCounter(b(g,f,h,e)).inc()},sync:function(f,g){var e=c.getTracker("3DCompass-"+f);e.set(g)}};return a});define("DS/i3DXCompassCore/Controls/Gauge",["UWA/Core","UWA/Controls/Abstract"],function(b,a){return a.extend({defaultOptions:{backgroundColor:"#ecf0f1",separatorColor:"#2c3e50",lowColor:"#EA4F37",mediumColor:"#e87b00",highColor:"#edca00",fullColor:"#57b847",lowPercent:25,mediumPercent:50,highPercent:75,height:80,width:80,text:"",percent:0,className:"",reversed:false},init:function(c){var d=this;d._parent(c);this.buildContainer()},toUrl:function(){return this.url},buildContainer:function(){var c=b.createElement("canvas",{height:this.options.height,width:this.options.width,styles:{width:"100%",height:"auto"}}),l=c.getContext("2d"),e=c.width,j=c.height,f=this.options.percent/100*360,k,h=4,g,i,d=this.options.fullColor;l.clearRect(0,0,e,j);l.beginPath();l.strokeStyle=this.options.backgroundColor;l.lineWidth=h;l.arc(j/2,e/2,(j/2)-(h/2),0,Math.PI*2,false);l.stroke();g=f*Math.PI/180;l.beginPath();if(this.options.percent<this.options.lowPercent){d=this.options.reversed?this.options.fullColor:this.options.lowColor}else{if(this.options.percent<this.options.mediumPercent){d=this.options.reversed?this.options.highColor:this.options.mediumColor}else{if(this.options.percent<this.options.highPercent){d=this.options.reversed?this.options.mediumColor:this.options.highColor}else{d=this.options.reversed?this.options.lowColor:this.options.fullColor}}}l.strokeStyle=d;l.lineWidth=h;l.arc(e/2,j/2,(j/2)-(h/2),-90*Math.PI/180,g-90*Math.PI/180,false);l.stroke();l.fillStyle=d;l.font=Math.floor(this.options.width/4)+"px arial";k=Math.floor(f/360*100)+"%";i=l.measureText(k).width;l.fillText(k,e/2-i/2,(j/2)+(Math.floor(this.options.width/4)*0.7/2));this.url=c.toDataURL();this.elements.container=b.createElement("div",{"class":this.options.className||"",styles:{width:"100%",height:"auto"},html:[this.options.text!==""?{styles:{"text-align":"center",padding:"5px"},text:this.options.text}:null,{tag:"img",src:this.url,styles:{width:"100%",height:"auto"}}]})}})});define("DS/i3DXCompassCore/Controls/PlatformNotify",["UWA/Core","DS/UIKIT/Alert"],function(b,a){return{message:function(d,c){if(!this.notifier||(document.body.getElement&&!document.body.getElement(".platform-management-notify"))){this.notifier=new a({closable:true,visible:true,autoHide:true,hideDelay:3000,className:"platform-management-notify"}).inject(document.body,"top")}this.notifier.add({className:c,message:d})},success:function(c){this.message(c,"success")},alert:function(c){this.message(c,"error")},warn:function(c){this.message(c,"warning")},info:function(c){this.message(c,"info")}}});define("DS/i3DXCompassCore/Csrf",["UWA/Core","UWA/Class","DS/WAFData/WAFData","DS/i3DXCompassCore/CacheManager","DS/i3DXCompassCore/Utils","DS/PlatformAPI/PlatformAPI","DS/i3DXCompassCore/Controls/PlatformNotify"],function(d,a,g,e,f,i,j){var b=null,h="/resources/AppsMngt/",k="app.urls.myapps",c=null;return{request:function(l,s,o){var r={Accept:"application/json","Accept-Language":f.getLang()},q,p,m="passport",n=function(t){if(typeof o.onFailure==="function"){o.onFailure.apply(this,arguments)}else{d.log("ERROR");d.log(t)}};s={os:f.detectOs()};q=s;r["X-Utc-Offset"]=f.getTimezoneOffset();p={timeout:15000,method:"GET",type:"json",headers:r,proxy:m,data:q,cache:-1,onComplete:function(u){var t;if((u.code&&u.code!=="0")||u.error){if(u.message&&u.message!==""){t=u.message}else{if(u.error&&u.error.type){t=u.error.type}else{if(u.error){t=u.error}else{t=u}}}if(u.error&&u.error.status==="java.net.SocketTimeoutException: Read timed out"){j.warn(d.i18n.get("Action is still pending... Please wait a few seconds and refresh your widget"))}if(typeof o.onFailure==="function"){o.onFailure(u)}else{j.alert(t)}}else{if(typeof o.onComplete==="function"){o.onComplete(u)}}},onFailure:n,onTimeout:function(t){j.warn(d.i18n.get("Action is still pending... Please wait a few seconds and refresh your widget"));n(t)}};return g.authenticatedRequest(l,p)},formatUrl:function(l){if(b===null||b===""){b=i.getApplicationConfiguration(k);if(!b){i.getAllApplicationConfigurations(true);b=i.getApplicationConfiguration(k);if(b===undefined){b=window.origin+"/enovia"}}}return l.indexOf("http")===0?l:b+h+l},getTokenCSRF:function(l){return c===null&&c!=="Pending"?this.getOrGenerateTokenCSRF(l):c},getOrGenerateTokenCSRF:function(n){var m=function(o){c=o["X-DS-CSRFTOKEN"];if(n&&n.context.sync){n.context.sync(n.method,n.collection,n.options)}else{if(n&&n.context.request){if(n.url){n.context.request(n.url,n.params,n.callbacks,n.method)}else{n.context.request(n.options)}}}},l=function(o){d.log(o);c=null;if(n&&n.callbacks&&typeof n.callbacks.onFailure==="function"){n.callbacks.onFailure(o)}};c="Pending";this.request(this.formatUrl("security/csrf"),{},{onComplete:m,onFailure:l})}}});define("DS/i3DXCompassCore/RequestOptions",["UWA/Core","UWA/Class","DS/WAFData/WAFData","DS/i3DXCompassCore/CacheManager","DS/i3DXCompassCore/Utils","DS/PlatformAPI/PlatformAPI","DS/i3DXCompassCore/Controls/PlatformNotify","DS/i3DXCompassCore/Csrf"],function(i,q,c,r,e,d,o,h){var l="passport",n="json",j=null,b="/resources/AppsMngt/",a="app.urls.myapps",m="/widget/images/MyApps/",g="application/json",k,f,p=function(){if(typeof f==="undefined"){if(window.location.search.indexOf("debug")!==-1){f=true}else{f=false}}return f===false?null:true};return{_fetched:false,_inProgress:false,isFetched:function(){return this._fetched},isInProgress:function(){return this._inProgress},options:{timeout:60000,type:n,headers:{Accept:g,"X-Utc-Offset":e.getTimezoneOffset()},data:{os:e.detectOs(),debug:p()},proxy:l},setup:function(s,t){t=this.mergeOptions(t||{});this.options=t;if(this.url){if(typeof(this.url)==="function"){if(this.urlRoot&&this.collection.url){this.url=this.formatUrl(this.url())}}else{this.url=this.formatUrl(this.url)}}return this._parent(s,t)},setupLanguage:function(s){k=s},sync:function(y,x,s){var u=this,w=s.onComplete,t=s.onFailure,v=null;u._inProgress=true;s=this.mergeOptions(s);if(k&&!s.headers["Accept-Language"]){s.headers["Accept-Language"]=k}if(y==="patch"){y="update";if(s.attrs){s.data=i.merge(s.data,s.attrs)}}else{if(y==="update"||y==="create"){s.data=i.merge(s.data,x.toJSON(s))}}if(y==="update"||y==="create"||y==="delete"){s.headers["X-DS-CSRFTOKEN"]=h.getTokenCSRF();s.headers["Content-Type"]="application/x-www-form-urlencoded;charset=utf-8"}if(s.cache&&s.headers["Accept-Language"]&&s.data){s.data["Accept-Language"]=s.headers["Accept-Language"]}s.onComplete=function(A){var z;u._inProgress=false;if(A&&((A.code&&A.code.indexOf&&A.code.indexOf("CSRF")!==-1)||(A.indexOf&&A.indexOf("CSRF")!==-1))){h.getOrGenerateTokenCSRF({context:u,method:y,collection:x,options:s})}else{if(A&&((A.code&&A.code!=="0")||A.error)){if(A.message&&A.message!==""){z=A.message}else{if(A.error&&A.error.type){z=A.error.type}else{if(A.error){z=A.error}else{z=A}}}if(t){t(A)}else{o.alert(z)}}else{if(y==="read"){u._fetched=true;if(s.cacheTTL||s.cacheStrategy===r.CACHE_STRATEGY_STATIC){r.setRequestCache(u,A,s)}}if(w){if(!v||JSON.stringify(v)!==JSON.stringify(A)){w(A)}}}}};s.onFailure=function(z,A){u._inProgress=false;if((A&&((A.code&&A.code.indexOf&&A.code.indexOf("CSRF")!==-1)||(A.indexOf&&A.indexOf("CSRF")!==-1)))||(z&&((z.code&&z.code.indexOf&&z.code.indexOf("CSRF")!==-1)||(z.indexOf&&z.indexOf("CSRF")!==-1)))){h.getOrGenerateTokenCSRF({context:u,method:y,collection:x,options:s,callbacks:{onFailure:t,onComplete:w}})}else{if(t){t(z)}else{i.log("ERROR");i.log(z)}}};s.onTimeout=function(z){o.warn(i.i18n("Action is still pending... Please wait a few seconds and refresh your widget"));if(t){t(z)}};if(s.cacheTTL&&!s.cacheStrategy){s.cacheStrategy=r.CACHE_STRATEGY_NO_WAIT}v=r.getRequestCache(this,s);if(v){setTimeout(function(){w(v)},5)}if(!v||(s.cacheStrategy!==r.CACHE_STRATEGY_STATIC)){return this._parent(y,x,i.merge({ajax:c.authenticatedRequest},s))}},formatUrl:function(s){if(j===null||j===""){j=d.getApplicationConfiguration(a);if(!j){d.getAllApplicationConfigurations(true);j=d.getApplicationConfiguration(a);if(j===undefined){j=window.origin+"/enovia"}}}return s.indexOf("http")===0?s:this.getOptionsUrl(j)+(this.options.backendPath||this.getBackPath(b))+s},getBackendAsset:function(s){return e.removeUselessPort(this.formatUrl(s).replace(b,m))},getOptionsUrl:function(s){return s},getBackPath:function(s){return s},mergeOptions:function(s){var t=e.merge(s.data||{},this.options.data);s=e.merge(s||{},this.options);s.data=t;return s}}});define("DS/i3DXCompassCore/Model/i3DXCompassModel",["UWA/Core","UWA/Class/Model","DS/i3DXCompassCore/RequestOptions"],function(c,b,a){return b.extend(a)});define("DS/i3DXCompassCore/Model/UserRightModel",["UWA/Core","DS/i3DXCompassCore/Model/i3DXCompassModel","DS/i3DXCompassCore/CacheManager"],function(c,b,a){return b.extend({url:"environment/listroles",sync:function(f,e,d){return this._parent(f,e,c.merge(d,{cache:a.LONG_LIFE_TIME}))}})});define("DS/i3DXCompassCore/Model/PlatformModel",["UWA/Core","DS/i3DXCompassCore/Model/i3DXCompassModel","DS/i3DXCompassCore/Utils"],function(c,b,a){return b.extend({url:"platform",getId:function(){return this.get("id")},canCrossCompany:function(){return this.get("crossCompany")},canCrossCompanyExtended:function(){return this.get("crossCompanyExtended")},getCrossCompanyRoles:function(){return this.get("crossCompanyRoles")||[]},isOnPremise:function(){var d=this.get("isOnPremise");if(d===undefined&&this.get("id")){d=this.get("id").toLowerCase()==="OnPremise".toLowerCase()}return d},hasError:function(){return a.isBetaModeActivated("subscription-error")||this.get("subscriptionError")},isPlatform:function(){return this.get("platform")===true}})});define("DS/i3DXCompassCore/Model/ProcessModel",["UWA/Core","DS/i3DXCompassCore/Model/i3DXCompassModel","DS/i3DXCompassCore/Utils","DS/i3DXCompassCore/Controls/Gauge"],function(f,e,d,a){var b="license",c="apps";return e.extend({idAttribute:"uid",url:"role",hasFree:function(g){if(typeof g==="undefined"){g=0}return(this.get("withLicenses")===false)||this.canCrossCompany()||this.isTPA()||this.isCustom()||(this.get("free")!==0&&this.get("free")>=g)},isOption:function(){return this.get("option")},isCasual:function(){return this.get("casual")>0},isTPA:function(){return f.is(this.get("type"))&&this.get("type")!=="WA"&&this.get("type")!=="WU"},isSelfExp:function(){return this.get("selfexp")===true},getPercent:function(){var g=(this.get("total")-this.get("free"))*100/this.get("total");return Math.min(g,100)},getType:function(){return this.isTPA()?c:b},getDisplayType:function(){return this.isTPA()?this.escape("type"):null},isDisabled:function(i,h){var g=false;if(this.isSelfExp()){if(!this.get("granted")){g=true}else{g=!(this.get("remove")===true&&this.get("expire")==="")}}else{if(!i){if(this.isCustom()){g=false}else{if(this.isTPA()){g=this.get("private")===false}else{g=(this.get("granted")===false&&!this.hasFree())||(this.get("granted")===true&&this.get("remove")===false);if(!g&&h&&!this.hasFree(h)){g=true}}}}else{if(this.get("granted")){g=this.get("remove")===false}else{g=true}}}return g},getCasual:function(){return this.isCustom()?null:this.get("casual")},isCustom:function(){var g=f.is(this.get("custom"))?this.get("custom"):this.get("icon");return !this.isTPA()&&g},getIcon:function(){if(this.isTPA()){return this.get("icon")||d.getAsset("3DExpPlatform_Default.png")}else{if(this.isCustom()||this.get("total")===0){return this.get("icon")||d.getAsset("ROLE_64_granted.png")}else{if(this.isSelfExp()){return d.getAsset("selfexp-logo.png")}else{return new a({height:120,width:120,reversed:true,percent:this.getPercent()}).toUrl()}}}},canCrossCompany:function(){return this.get("crossCompany")===true},isWA:function(){return this.get("type")==="WA"},isWU:function(){return this.get("type")==="WU"},_hasPrereq:function(){return this.get("prereq")&&this.get("prereq").process&&this.get("prereq").process.length>0},isAssignDisabled:function(g,i){var h=false;if(g===false){h=this.get("free")===0}if(typeof i!=="undefined"){h=this.get("free")<i}return this.get("licensedDisabled")||h},isAssignSelected:function(){}})});define("DS/i3DXCompassCore/Collection/i3DXCompassCollection",["UWA/Core","UWA/Class/Collection","DS/i3DXCompassCore/RequestOptions"],function(c,b,a){return b.extend(a)});define("DS/i3DXCompassCore/Collection/PaginatedCollection",["UWA/Core","DS/i3DXCompassCore/Collection/i3DXCompassCollection","DS/i3DXCompassCore/Utils"],function(c,a,b){return a.extend({options:{data:{query:null,platform:null,sort:null,sort_direction:null,offset:null}},count:0,setParams:function(d){this.options.data=b.merge(d,this.options.data);return this},getParams:function(){return this.options.data},setPlatform:function(d){this.getParams().platform=d;return this},setSortField:function(d){this.getParams().sort=d;return this},setQuery:function(d){this.getParams().query=d;return this},getOffset:function(){return this.getParams().offset||0},setOffset:function(d){this.getParams().offset=d;return this},setLimit:function(d){this.getParams().limit=d;return this},getQuery:function(){return this.getParams().query},setMaxLimit:function(d){this.count=d;return this},setSortDirection:function(d){this.getParams().sort_direction=d;return this},getLimit:function(){return this.getParams().limit||this.size()},getMaxLimit:function(){return this.count},getPreviousOffset:function(){var d=this.getOffset();if(this.hasPrevious()){d=parseInt(this.getOffset(),10)-parseInt(this.getLimit(),10)}return d},getNextOffset:function(){var d=this.getOffset();if(this.hasNext()){d=parseInt(this.getOffset(),10)+parseInt(this.getLimit(),10)}return d},hasNext:function(){return(this.getOffset()+this.getLimit())<this.getMaxLimit()},hasPrevious:function(){return(this.getOffset()-this.getLimit())>0},hasPagination:function(){return this.getMaxLimit()>this.getLimit()}})});define("DS/i3DXCompassCore/Model/ImportModel",["UWA/Core","DS/i3DXCompassCore/Model/i3DXCompassModel","DS/i3DXCompassCore/Collection/PaginatedCollection"],function(f,e,b){var d=0,a=3,c=4;return e.extend({url:"massivesynchro",_users:null,_status:null,canRetry:function(){return this.get("status")!==d&&this.get("status")!==c&&this.get("status")!==a},inProgress:function(){return this.get("status")===a},fileUploadError:function(){return this.get("status")===c},setup:function(){var g=this;this._parent.apply(this,arguments);this._users=new b([],{url:this.url,data:{offset:0,limit:25}});this._status=new b();this._users.setMaxLimit(this.get("count"));this.addEvent("onChange:users",function(h,i){g._users.set(i)});this.addEvent("onChange:count",function(h,i){g._users.setMaxLimit(i)});this.addEvent("onChange:statuslist",function(h,i){g._status.set(i)})}})});define("DS/i3DXCompassCore/Model/AppModel",["UWA/Core","DS/i3DXCompassCore/Model/ProcessModel"],function(b,a){return a.extend({url:"app/custom"})});define("DS/i3DXCompassCore/Collection/AppsCollection",["UWA/Core","DS/i3DXCompassCore/Collection/PaginatedCollection","DS/i3DXCompassCore/Model/AppModel"],function(c,b,a){return b.extend({url:"app/custom",model:a,parse:function(d){this.setMaxLimit(d.count);return d.data}})});define("DS/i3DXCompassCore/Collection/ProcessCollection",["UWA/Core","DS/i3DXCompassCore/Collection/PaginatedCollection","DS/i3DXCompassCore/Model/ProcessModel"],function(c,b,a){return b.extend({url:"role",model:a,parse:function(d){this.setMaxLimit(d.count);return d.data||d.roles},toJSONString:function(d){var e=[];this.forEach(function(f){var g={id:f.get("uid")};if(d===false){g.licensed=false}e.push(g)});return JSON.stringify(e)}})});define("DS/i3DXCompassCore/Model/CustomRoleModel",["UWA/Core","DS/i3DXCompassCore/Model/i3DXCompassModel","DS/i3DXCompassCore/Utils"],function(e,d,c){var a="license",b="apps";return d.extend({idAttribute:"uid",url:"role",hasFree:function(f){if(typeof f==="undefined"){f=0}return(this.get("withLicenses")===false)||this.canCrossCompany()||this.isTPA()||this.isCustom()||(this.get("free")!==0&&this.get("free")>=f)},isOption:function(){return this.get("option")},isCasual:function(){return this.get("casual")>0},isTPA:function(){return false},isSelfExp:function(){return this.get("selfexp")===true},getPercent:function(){var f=(this.get("total")-this.get("free"))*100/this.get("total");return Math.min(f,100)},getType:function(){return this.isTPA()?b:a},getNbApp:function(){return this.get("relationships").applications.data.length},getDisplayType:function(){return this.isTPA()?this.escape("type"):null},isDisabled:function(h,g){var f=false;if(this.isSelfExp()){if(!this.get("granted")){f=true}else{f=!(this.get("remove")===true&&this.get("expire")==="")}}else{if(!h){if(this.isCustom()){f=false}else{if(this.isTPA()){f=this.get("private")===false}else{f=(this.get("granted")===false&&!this.hasFree())||(this.get("granted")===true&&this.get("remove")===false);if(!f&&g&&!this.hasFree(g)){f=true}}}}else{if(this.get("granted")){f=this.get("remove")===false}else{f=true}}}return f},getCasual:function(){return this.isCustom()?null:this.get("casual")},getTitle:function(){return this.get("attributes").name},isCustom:function(){return this.get("attributes").custom},getIcon:function(){if(this.isTPA()){return this.get("icon")||c.getAsset("3DExpPlatform_Default.png")}else{if(this.isCustom()||this.get("total")===0){return this.get("attributes").icon||c.getAsset("ROLE_64_granted.png")}}},canCrossCompany:function(){return this.get("crossCompany")===true},isWA:function(){return false},isWU:function(){return false},_hasPrereq:function(){return false},isAssignDisabled:function(f,h){var g=false;if(f===false){g=this.get("free")===0}if(typeof h!=="undefined"){g=this.get("free")<h}return this.get("licensedDisabled")||g},isAssignSelected:function(){}})});define("DS/i3DXCompassCore/Collection/CustomRoleCollection",["DS/i3DXCompassCore/Collection/ProcessCollection","DS/i3DXCompassCore/Model/CustomRoleModel"],function(b,a){return b.extend({url:"api/custom/roles",model:a,parse:function(c){this.setMaxLimit(c.count);return c.data||c.roles}})});define("DS/i3DXCompassCore/Utils/Ajax",["UWA/Core","UWA/Class","UWA/Data","DS/i3DXCompassCore/Controls/PlatformNotify","UWA/Class/Options","DS/i3DXCompassCore/Utils","UWA/Storage","DS/WAFData/WAFData","DS/i3DXCompassCore/Csrf","i18n!DS/i3DXCompassCore/assets/nls/i3DXCompassCore","UWA/Storage/Adapter/Dom"],function(b,a,g,h,e,d,j,f,c,i){return a.extend(e,{defaultOptions:{url:"",callbacks:{},params:{}},init:function(k){this.setOptions(k)},request:function(l,q,t,k){var s=this,o={Accept:"application/json","Accept-Language":d.getLang()},p,m,u="passport",r=null,n;q=b.merge({os:d.detectOs()},q);n=function(v,w){if((w&&((w.code&&w.code.indexOf&&w.code.indexOf("CSRF")!==-1)||(w.indexOf&&w.indexOf("CSRF")!==-1)))||(v&&((v.code&&v.code.indexOf&&v.code.indexOf("CSRF")!==-1)||(v.indexOf&&v.indexOf("CSRF")!==-1)))){c.getOrGenerateTokenCSRF({context:s,url:l,params:q,callbacks:t,method:k})}else{if(typeof t.onFailure==="function"){t.onFailure.apply(this,arguments)}else{b.log("ERROR");b.log(v)}}};k=k||"GET";if(q.proxy===null){u=null}else{if(q.proxy){u=q.proxy}}p=q;if(k==="POST"||k==="PUT"||k==="DELETE"){o["X-DS-CSRFTOKEN"]=c.getTokenCSRF();o["Content-Type"]="application/x-www-form-urlencoded;charset=utf-8"}o["X-Utc-Offset"]=d.getTimezoneOffset();m={timeout:15000,method:k,type:q.responseType||"json",headers:o,proxy:u,data:p,cache:-1,onComplete:function(w){var v;if(w&&((w.code&&w.code&&w.code.indexOf&&w.code.indexOf("CSRF")!==-1)||(w.indexOf&&w.indexOf("CSRF")!==-1))){c.getOrGenerateTokenCSRF({context:s,url:l,params:q,callbacks:t,method:k})}else{if((w.code&&w.code!=="0")||w.error){if(w.message&&w.message!==""){v=w.message}else{if(w.error&&w.error.type){v=w.error.type}else{if(w.error){v=w.error}else{v=w}}}if(w.error&&w.error.status==="java.net.SocketTimeoutException: Read timed out"){h.warn(i.get("Action is still pending... Please wait a few seconds and refresh your widget"))}if(typeof t.onFailure==="function"){t.onFailure(w)}else{h.alert(v)}}else{if(typeof t.onComplete==="function"){t.onComplete(w)}}}},onFailure:n,onTimeout:function(v){h.warn(i.get("Action is still pending... Please wait a few seconds and refresh your widget"));n(v)}};return f.authenticatedRequest(l,m)},get:function(){return this.request(this.options.url,this.options.params,this.options.callbacks,"GET")},post:function(){return this.request(this.options.url,this.options.params,this.options.callbacks,"POST")},put:function(){this.request(this.options.url,this.options.params,this.options.callbacks,"PUT")},doDelete:function(){return this.request(this.options.url,this.options.params,this.options.callbacks,"DELETE")},create:function(){return this.post()},update:function(){return this.put()}})});define("DS/i3DXCompassCore/Utils/Data",["UWA/Core","DS/PlatformAPI/PlatformAPI","DS/WebappsUtils/WebappsUtils","DS/i3DXCompassCore/Utils/Ajax","DS/i3DXCompassCore/Utils"],function(e,a,d,c){var b={proxy:{baseUrl:"",baseUrlBackend:"{0}/resources/AppsMngt/",getpreferences:"{0}user/getPreferences",setpreferences:"{0}user/setPreferences",licensesUser:"{0}licenses/user/",removeAllRoles:"{0}/licenses/allroles",faillurePage:"{0}uploadfile/message?error=true",faillurePageImport:"{0}massivesynchro/upload/result?success=false",eServiceError:"{0}/enovia/eServiceError.jsp",removefile:"{0}environment/removefile",platformInvite:"{0}platform/invite",userSupportMode:"{0}user/supportmode",massiveSynchroStart:"{0}massivesynchro/start",massiveSynchroFile:"{0}massivesynchro/file"},formatUrl:function(f){if(b.proxy.baseUrl===""){b.proxy.baseUrl=a.getApplicationConfiguration("app.urls.myapps");if(!b.proxy.baseUrl){a.getAllApplicationConfigurations(true);b.proxy.baseUrl=a.getApplicationConfiguration("app.urls.myapps")}b.proxy.baseUrlBackend=b.proxy.baseUrlBackend.format(b.proxy.baseUrl)}return f.format(b.proxy.baseUrlBackend)}};return{get:function(f){return(b.proxy[f])?b.formatUrl(b.proxy[f]):""},getUrl:function(f){return(b.proxy[f])?b.formatUrl(b.proxy[f]):""},createLicensesUser:function(g,f){return new c({url:b.formatUrl(b.proxy.licensesUser),params:g,callbacks:f}).create()},updateLicensesUser:function(g,f){return new c({url:b.formatUrl(b.proxy.licensesUser),params:g,callbacks:f}).update()},deleteLicensesUser:function(f){return new c({url:b.formatUrl(b.proxy.licensesUser),params:f.params||{},callbacks:f.callbacks||{}}).doDelete()},removeAllRoles:function(f){return new c({url:b.formatUrl(b.proxy.removeAllRoles),params:f.data||{},callbacks:f.callbacks||{}}).doDelete()},removeFile:function(g,f){return new c({url:b.formatUrl(b.proxy.removefile),params:g,callbacks:f}).get()},getPreferences:function(g,f){g=e.merge({responseType:"text"},g);return new c({url:b.formatUrl(b.proxy.getpreferences),params:g,callbacks:f}).get()},setSupportMode:function(f){return new c({url:b.formatUrl(b.proxy.userSupportMode),params:f.params,callbacks:f.callbacks}).create()},platformInvite:function(g,f){return new c({url:b.formatUrl(b.proxy.platformInvite),params:g,callbacks:f}).create()},startImport:function(f){return new c({url:b.formatUrl(b.proxy.massiveSynchroStart),params:f.params||{},callbacks:f.callbacks||{}}).post()},getImportFile:function(f){return new c({url:b.formatUrl(b.proxy.massiveSynchroFile),params:f.params||{},callbacks:f.callbacks||{}}).get()}}});define("DS/i3DXCompassCore/Model/PreferencesModel",["UWA/Core","UWA/Class/Model","UWA/Utils","DS/PlatformAPI/PlatformAPI","DS/i3DXCompassCore/Utils/Data","DS/i3DXCompassCore/Utils","DS/i3DXCompassCore/CacheManager"],function(d,a,c,i,h,f,e){var g="pm-preferences",b=a.extend({backendModel:new a(),defaults:{membersMaxPerPage:"25",membersSortField:"Last Name",membersSortDirection:"asc",membersDisplayPicture:"true",processesMaxPerPage:"25",processesSortDirection:"asc",advancedMode:false,displayMode:"grid"},isGridLayout:function(){if(!this._displayMode){this._displayMode=e.getCache("displayMode-"+f.getWidget(),0)||this.get("displayMode")}return this._displayMode==="grid"},shouldLoadPicture:function(){return this.get("membersDisplayPicture")===true||this.get("membersDisplayPicture")==="true"},setLayout:function(j){this._displayMode=j;e.setCache("displayMode-"+f.getWidget(),j);f.getWidget().setValue("displayMode",j)},isFetched:false,setup:function(){this.createUid();return this},createUid:function(){this.id=e._getKeyUID(g);return this.id},sync:function(m,l,j){var k=this;switch(m){case"read":if(k.isFetched||this.fetchLocal()){k.isFetched=true;j.onComplete.call(k)}else{this.fetchRemote(j.onComplete)}break}},fetchLocal:function(){var j=false,k;try{k=sessionStorage.getItem(this.id);if(k){this.set(JSON.parse(k));j=true}}catch(l){d.log(l)}return j},fetchRemote:function(k){var j=this;h.getPreferences({name:g},{onComplete:function(m){var l;if(m!==""){l=JSON.parse(c.base64Decode(m.replace("_","=")));if(l){j.set(l);this.isFetched=false}}j.saveLocal();k.call(j)}})},saveLocal:function(){var j=false;try{sessionStorage.setItem(this.id,JSON.stringify(this.toJSON()));j=true}catch(k){d.log(k)}return j},clear:function(){var j=this._parent();try{sessionStorage.removeItem(this.id)}catch(k){d.log(k)}this.isFetched=false;this.set(this.defaults);return j}});return new b()});define("DS/i3DXCompassCore/Model/MemberDetailsModel",["UWA/Core","DS/i3DXCompassCore/Model/i3DXCompassModel","DS/WebappsUtils/WebappsUtils","DS/i3DXCompassCore/Utils","DS/i3DXCompassCore/Utils/Data"],function(e,d,c,b,a){return d.extend({url:"user",idAttribute:"id",defaults:{user:"",firstname:"",lastname:"",email:"",platform:"",platformName:"",role:"",agreement:"",active:null,supportMode:null,legal:null,processes:null,apps:null,remove:true,deny:false},setup:function(f,g){if(this.get("email")){this.set("email",this.get("email").toLowerCase())}return this._parent(f,g)},getUserFullName:function(g){var h=this.escape("firstname")?e.String.ucfirst(this.escape("firstname")):"",f=this.escape("lastname")?e.String.ucfirst(this.escape("lastname")):"",i="";if(h===""){h=this.escape("firstName")?e.String.ucfirst(this.escape("firstName")):""}if(f===""){f=this.escape("lastName")?e.String.ucfirst(this.escape("lastName")):""}if(h.trim()!==""&&f.trim()!==""){i=h.trim()+" "+f.trim()}else{if(this.escape("email")&&this.escape("email").trim()!==""){i=this.escape("email").trim()}else{if(this.escape("id")&&this.escape("id").trim()!==""){i=this.escape("id").trim()}}}if(g&&this.escape("id").length<=4){i=i+" - "+this.escape("id").toUpperCase()}return i},getUserId:function(){return this.get("id")||this.get("id")||this.get("email").toLowerCase()},getProfile:function(h,i){var g,f="{0}/api/media/streammediasprite/idList/{1}?{2}";if(!h||i===""||!e.is(i)){g=b.isCheckedAgreement(this.get("agreement"))?"default-profile-contractor.png":"default-profile.png";g=c.getWebappsAssetUrl("PlatformManagement","")+g}else{g=e.String.format(f,i,this.getSpriteItem(),this.get("cacheBuster")?""+this.get("cacheBuster"):this.get("agreement"))}return g},getSpriteItem:function(){return(this.get("firstname")===""?this.get("email"):this.get("id"))+":7:6"},isDeny:function(){return this.get("role")==="2"},isContractor:function(){return b.isCheckedAgreement(this.get("agreement"))},isCasual:function(){return this.get("casual")>0},removeLicense:function(g,f,h){a.deleteLicensesUser(e.merge({params:{user:this.get("id"),licenses:f.canCrossCompany()?JSON.stringify([{id:g.get("uid"),licensed:g.get("licensed"),restricted:g.get("restricted")}]):JSON.stringify([{id:g.get("uid")}]),type:g.getType()}},{callbacks:h}))},addLicense:function(h,g,f,i){a.createLicensesUser({user:this.get("id"),licenses:JSON.stringify(h),type:g,platform:f.getId()},i)},updateLicense:function(h,g,f,i){a.updateLicensesUser({user:this.get("id"),licenses:JSON.stringify(h),type:g,platform:f.getId()},i)}})});define("DS/i3DXCompassCore/Collection/MemberCollection",["UWA/Core","DS/i3DXCompassCore/Collection/PaginatedCollection","DS/i3DXCompassCore/Model/MemberDetailsModel"],function(d,a,c){var b="user";return a.extend({url:b,model:c,sync:function(g,f,e){return this._parent(g,f,e)},parse:function(e){this.setMaxLimit(e.count);if(e.tag){this.setTags(e.tag)}return e.data||e.users},setTags:function(e){this.tags=e},getTags:function(){return this.tags}})});