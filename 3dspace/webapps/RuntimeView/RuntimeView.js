define("DS/RuntimeView/Abstract",["UWA/Core","UWA/Event","UWA/Class","DS/WebappsUtils/WebappsUtils","DS/CoreEvents/ModelEvents"],function(e,m,a,d,b){var k=false;var j="assets/icons/32/";var f={en:"",fr:"French",de:"German",ja:"Japanese",zh:"Simplified_Chinese",es:"Spanish"};function n(s,r){r=r.split(".");var q=/(.+)\[(\d+)\]/;for(var p=0;p<r.length;p++){var o=q.exec(r[p]);if(o){s=s[o[1]][parseInt(o[2],10)]}else{if(s){s=s[r[p]]}}}return s}function c(){var p=window.location.href.split("?")[0];var o=p.split("/");return o[o.length-2]}function h(w){var p={},u,v,r;for(var q in w){u=p;v=q.split(".");var s=v.pop();while(v.length){r=v.shift();u=u[r]=u[r]||{}}u[s]=w[q]}return p}function l(p){p=p.replace(/<meta charset="UTF-8"\/>/g,"");p=p.replace(/(\/\*([\s\S]*?)\*\/)|(\/\/(.*)$)/gm,"");var o=/(\r\n|\r|\n|\u0085|\u000C|\u2028|\u2029)/g;p=p.replace(o,"");var q=/\s+(?=([^"]*"[^"]*")*[^"]*$)/g;p=p.replace(q,"");var r=/=+(?=([^"]*"[^"]*")*[^"]*$)/g;p=p.replace(r,'":').replace(/";/g,'","');p='{"'+p.substring(0,p.length-2)+"}";return h(e.Json.decode(p))}var i=a.extend({defaultOptions:{resourceKey:null},init:function(o,p){this.options=e.extend(this.defaultOptions,o);this._parent(o);this._manager=p;this._resourceKey=this.options.resourceKey},getKey:function(r){if(this._resourceKey){var q=r.key;var o=this._resourceKey.split("/")[1]+"."+r.key;var p=this._manager._getKeyValue({resourceKey:this._resourceKey,key:q});if(!p){p=this._manager._getKeyValue({resourceKey:this._resourceKey,key:o})}if(p){return p.value}}else{console.warn("[ResourceManager]","ERROR","fileName option has not been defined")}},getIcon:function(r){if(this._resourceKey){var q=this._resourceKey+"."+r.key+".Icon."+r.size;var o=this._resourceKey.split("/")[1]+"."+r.key+".Icon."+r.size;var p=this._manager._getKeyValue({resourceKey:this._resourceKey,key:q});if(!p){p=this._manager._getKeyValue({resourceKey:this._resourceKey,key:o})}if(p){return d.getWebappsBaseUrl()+p.module+"/"+j+p.value}}else{console.warn("[ResourceManager]","ERROR","fileName option has not been defined")}},getTitle:function(r){if(this._resourceKey){var q=this._resourceKey+"."+r.key+".Title";var o=this._resourceKey.split("/")[1]+"."+r.key+".Title";var p=this._manager._getKeyValue({resourceKey:this._resourceKey,key:q});if(!p){p=this._manager._getKeyValue({resourceKey:this._resourceKey,key:o})}if(p){return p.value}}else{console.warn("[ResourceManager]","ERROR","fileName option has not been defined")}}});var g=a.extend({defaultOptions:{},AFR_DIR:"assets/afr/",NLS_DIR:"assets/catnls/",RSC_DIR:"assets/catrsc/",ICO_32_DIR:"assets/icons/32/",DEFAULT_LANGUAGE:"",init:function(o){this._parent(o);this._modelEvents=new b();this._listOfResources=[];this._timeoutAjax=[]},onResourceLoaded:function(p,s){var q=this;if(p===undefined){p={}}if(p.resourceFile){var r=p.resourceFile.split("/");if(r.length===1){p.resourceFile=c()+"/"+p.resourceFile}if(q._listOfResources[p.resourceFile]){var o=new i({resourceKey:p.resourceFile},q);s.call(o)}else{this._modelEvents.subscribe({event:"RESOURCE_LOADED"},function(v,u){if(p.resourceFile===v.resourceKey){q._modelEvents.unsubscribe(u);var t=new i({resourceKey:v.resourceKey},q);s.call(t)}})}}},_registerResource:function(x){var t=this;x.module=x.module||c();x.language=x.language||this.DEFAULT_LANGUAGE;x.resourceConverter=x.resourceConverter||l;var w=x;if(w.resourceFile){var v=w.resourceFile;var o,q;var s=w.resourceFile.split("/");if(s.length!==2){console.error("[ResourceManager]","ERROR","Invalid resourceFile: "+w.resourceFile,'Did you provide the module name in value of ResourceFile attribute in the CATCommandHeader inside your D-AFr (xml) file ? E.g. ResourceFile="MyModule/MyResourceFileNameWithoutExtension"')}else{o=s[0];q=s[1]}if(!t._listOfResources[v]){if(o){var u="";if(x.language&&x.language!==""&&f[x.language]!==""&&f[x.language]!==undefined){u=f[x.language]+"/"}var p=d.getWebappsBaseUrl()+o+"/"+w.resourceDir+u+q+w.fileExtension;var r="Ajax";if(d.getWebappsBaseUrl()!=="../"){r="Data"}if(this._timeoutAjax[v]){window.clearTimeout(this._timeoutAjax[v])}this._timeoutAjax[v]=setTimeout(function(){e[r].request(p,{async:true,onComplete:function(z){if(!t._listOfResources[v]){if(k){console.log("register resource",v+w.fileExtension,t._listOfResources)}t._listOfResources[v]=t.options.resourceConverter(z);t._listOfResources[v]["@module"]=o}var y=new i({resourceKey:v},t);t._modelEvents.publish({context:y,event:"RESOURCE_LOADED",data:{resourceKey:v}})},onFailure:function(y){console.warn("Error loading file: ",p,"\n",'Did you provide the module name in value of ResourceFile attribute in the CATCommandHeader inside your D-AFr (xml) file ? E.g. ResourceFile="MyModule/MyResourceFileNameWithoutExtension"')}})},50)}else{console.error("No module defined!",w)}}else{setTimeout(function(){t._modelEvents.publish({context:t,event:"RESOURCE_LOADED",data:{resourceKey:v}})},0)}}},getKeyValue:function(p){console.warn("DEPRECATED","Please do not use this method anymore. Look at WUXForDev.tst/RuntimeViewDemo.mweb to see the right way to consume rtv resources.");var q=p.split(".");var o=q[0];var r=n(this._listOfResources[o],p);if(k){console.log(p,"-->",r)}if(this._listOfResources[o]){return{module:this._listOfResources[o]["@module"],value:r}}},_getKeyValue:function(o){var p=n(this._listOfResources[o.resourceKey],o.key);if(k){console.log(o.key,"-->",p)}if(p&&this._listOfResources[o.resourceKey]){return{module:this._listOfResources[o.resourceKey]["@module"],value:p}}}});return g});define("DS/RuntimeView/RSCManager",["UWA/Core","UWA/Event","DS/RuntimeView/Abstract","DS/WebappsUtils/WebappsUtils"],function(e,a,d,b){var c=d.singleton({defaultOptions:{module:null,fileName:null,resourceDir:"assets/catrsc/",fileExtension:".CATRsc",onComplete:null},init:function(){this._parent()},loadResource:function(f){this.options=e.extend(this.defaultOptions,f);this._registerResource(this.options)},});return e.namespace("WUX/RuntimeView/RSCManager",c)});define("DS/RuntimeView/NLSManager",["UWA/Core","UWA/Event","DS/RuntimeView/Abstract"],function(d,a,c){var b=c.singleton({defaultOptions:{fileName:null,resourceDir:"assets/catnls/",fileExtension:".CATNls"},init:function(){this._parent()},loadResource:function(e){this.options=d.extend(this.defaultOptions,e);this._registerResource(this.options)},});return d.namespace("WUX/RuntimeView/NLSManager",b)});define("DS/RuntimeView/FileManager",["UWA/Core","UWA/Event","DS/RuntimeView/Abstract"],function(d,b,c){var a=c.extend({defaultOptions:{fileName:null,},init:function(){this._parent();console.warn("Deprecated","RuntimeView/FileManager","Please use UWA.Ajax.request or UWA.Data.request")},loadFile:function(e){console.warn("Deprecated","RuntimeView/FileManager.loadFile()","Please use UWA.Ajax.request or UWA.Data.request")},});return a});