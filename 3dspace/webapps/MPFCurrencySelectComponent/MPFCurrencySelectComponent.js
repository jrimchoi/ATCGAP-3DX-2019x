define("DS/MPFCurrencySelectComponent/CurrencySelectComponent",["UWA/Core","DS/MPFView/FieldSelectInputV2","DS/MPFServices/ObjectService","DS/MPFShopModel/ShopModel","DS/MPFView/ValidationResultBuilder","i18n!DS/MPFCurrencySelectComponent/assets/nls/MPFCurrencySelectComponent"],function(g,e,a,b,d,c){var f=e.extend({setup:function(h){h||(h={});a.requiredOfPrototype(this.model,b,"this.model must be a ShopModel");h.placeholder=c.get("selectCurrency");h.fieldName=b.Fields.CURRENCIES;h.fieldLabel=c.get("currency");h.required=true;h.dynamicValidation=true;h.readOnly=this.model.getState()===b.States.SUBMITTED;h.selectableOptions=this._getCurrencies();this._parent(h)},validate:function(k){k||(k={});var n=this;var j=new d();var i;var m={};var l;var o;var h;this._removeErrorMessage();if(this.required&&this.getValue().trim()===""){j.addError(this.fieldName,c.get("currencyRequired"))}if(j.isValid){m[this.fieldName]=[this.getValue()];l=Array.isArray(this.model.getSupportedCurrencies())&&this.model.getSupportedCurrencies().length>0;o=l&&this.model.getSupportedCurrencies()[0]!==this.getValue();if(!l||o){this.model.set(m,{silent:this.silent})}i=this.model.validate(this.model.pick(this.fieldName));if(g.is(i)){i.filter(function(p){return p.fieldName===n.fieldName}).forEach(function(p){j.addError(n.fieldName,p.message)})}}h=j.build();if(!h.isValid){this._displayErrorMessage(h)}return h},_getCurrencies:function(){var i;var j;var h;i=g.is(this.model.getSupportedCurrencies())&&this.model.getSupportedCurrencies().length>0;if(i){j=this.model.getSupportedCurrencies()[0]}h=[{value:"EUR",selected:i?j==="EUR":false},{value:"USD",selected:i?j==="USD":false},{value:"GBP",selected:i?j==="GBP":false}];if(this.model.isInternal()){h.push({value:"AED",selected:i?j==="AED":false})}return h}});return f});