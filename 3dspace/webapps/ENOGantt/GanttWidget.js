define("ENOGantt/GanttWidget",["UWA/Class","DS/Foundation2/FoundationV2Data","DS/ENOGantt/Widget/PreferenceUtils","DS/ENOGantt/View/GanttView","DS/ENO6WPlugins/jQuery","DS/Foundation/WidgetAPIs",],function(a,m,f,d,q,o){var i="savedPhysicalId";var b="savedObject";var j="savedTitle";var g="savedTenant";var n="Project Space";var e="bordered";var p=m.getWidgetConstant;var l=null;var c=null;var h=null;var k=a.extend({init:function(){h=this;if(window.isIFWE){WidgetUwaUtils.onAfterLoad=q.noop;var r=widget.getValue("collabstorage");o.getCollaborativeStorages(function(t){WidgetUwaUtils.processStorages(t,r);WidgetUwaUtils.setStoragesPrefs(widget,t,r,"true");WidgetUwaUtils.processStorageChange.call(h,r);var s=widget.getPreference("collabstorage");if(!s){m.getWidgetConstants(CONSTANTS_SERVICE,function(){var v=widget.getPreference("collabstorage");v.label=p("emxFoundation.Widget.CollaborativeStorages","3DExperience Platform");widget.addPreference(v);var u=widget.getPreference("collabspace");u.label=p("emxFoundation.Widget.CollaborativeSpaces","Collaboration Space");widget.addPreference(u)})}h.renderGanttView()})}},loadBPS:function(){WidgetUwaUtils.loadBPS.call(k,widget,enoviaServer.showSpace,CONSTANTS_SERVICE)},onLoad:function(){if(window.isIFWE){widget.addEvents({onStorageChange:h.onStorageChange,onSpaceChange:h.onSpaceChange,})}else{this.renderGanttView()}},renderGanttView:function(){if(!h.ganttView){h.ganttView=new d()}h.ganttView.render()},onResize:function(){var r;if(window.isIFWE){r=h.ganttView}else{r=h.ganttView}if(r){r.resize()}},reset:function(){f.set(i,false);f.removeClearProjectPreference();h.onLoad()},onPreferencesChanged:function(){if(widget.getValue("reset")!=="false"&&widget.getValue("reset")!==false){h.reset()}},processStorageChange:function(){WidgetUwaUtils.processStorageChange.apply(h,arguments)},setSpace:function(){var t=WidgetUwaUtils.getContext().split(".");h.collabSpace=t[t.length-1];var s=widget.getPreference("collabstorage");s.label=p("emxFoundation.Widget.CollaborativeStorages","3DExperience Platform");widget.addPreference(s);var r=widget.getPreference("collabspace");r.label=p("emxFoundation.Widget.CollaborativeSpaces","Collaboration Space");widget.addPreference(r);enoviaServer.securityContext=r.value},onRefresh:function(){if(!h.ganttView){h.ganttView=new d()}h.ganttView.render()},onStorageChange:function(){WidgetUwaUtils.onStorageChange.call(h)},onSpaceChange:function(){widget.isEdit=false;WidgetUwaUtils.onSpaceChange.call(h);WidgetUwaUtils.processStorageChange.call(h,widget.getValue("collabstorage"));h.setSpace();widget.isEdit=true},clearData:function(){WidgetUwaUtils.clearData.call(h)},onAfterLoad:function(){h.setSpace()},});return k});