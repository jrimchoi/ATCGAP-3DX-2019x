define("DS/ENOGantt/Controller/Finder",["UWA/Class","DS/ENOGantt/Ven/Ext",],function(c,b){var a=0;var d=null;return c.extend({init:function(e){this.newValue=e.newValue;this.oldValue=e.oldValue;this.field=e.field;this.view=e.view;this.store=e.store;this.models=e.store.toArray();a=0;d=null},reset:function(){this.field.setValue("");var f=this.field.getTrigger("clear");f.setVisible(false);var l=this.view.getSchedulingView();var n=this.view.getSelectionModel();var m=this.view.getSelectedRows();var e=this.view.taskStore.toArray();if(m.length>0){for(var k=0,h=m.length;k<h;k++){var g=m[k];l.unhighlightTask(g);n.deselect(g)}}l.scrollEventIntoView(e[1],false,false);this.lastMatchIndex=0;this.lastMatchedTask=null;a=0},find:function(g){var j=this.newValue;var h=this.oldValue;var e=this.field.getTrigger("clear");if(j&&j.length>0&&j!=h){e.setVisible(true);var i=new RegExp(b.String.escapeRegex(j),"i");var f=this.store.find(g,i,j,a);if(f&&f.model&&this.isNodeVisible(f.model)){this.highlightTask(f.model);d=f.model;a=f.index;return f}}else{this.reset()}},isNodeRefinedAlready:function(e){return true},isParentVisible:function(g){var e=this.models[0];var h=false;var f=g.parentNode;while(f&&(f!=e)){h=f.get("visible");if(h){break}f=f.parentNode}return h},isNodeVisible:function(f){var h=f.get("visible");if(h){return true}var g=this.isParentVisible(f);var e=this.isNodeRefinedAlready(f);return h&&g&&e},highlightTask:function(e){var f=this.view.getSchedulingView();var g=this.view.lockedGrid.getView().getSelectionModel();if(d){f.unhighlightTask(d);g.deselect(d)}f.scrollEventIntoView(e,false,false);f.highlightTask(e,false);g.select(e)},unhighlightTask:function(){if(d){var e=this.view.getSchedulingView();var f=this.view.lockedGrid.getView().getSelectionModel();e.unhighlightTask(d);f.deselect(d)}}})});