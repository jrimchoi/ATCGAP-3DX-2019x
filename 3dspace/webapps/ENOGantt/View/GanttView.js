try{define("DS/ENOGantt/View/GanttView",["UWA/Drivers/Alone","UWA/Core","UWA/Class/View","DS/UIKIT/Alert","DS/ENOGantt/Ven/Ext","DS/ENOGantt/Ven/Bryntum","DS/E6WCommonUI/Views/DetailsDisplayView","DS/E6WCommonUI/Views/FoundationBaseView","DS/Foundation2/Models/ReferenceModel","DS/Foundation2/FoundationV2Data","DS/ENOGantt/Widget/PreferenceUtils","DS/ENOGantt/Infra","DS/ENOGantt/Data/CrudManager","DS/ENOGantt/View/Toolbar","DS/ENOGantt/View/ResourceUtilizationPanel","DS/ENOGantt/View/GanttRefinement","DS/ENOGantt/GanttUtil","DS/ENOGantt/Custom/DPMGanttAll","DS/ENOGantt/View/GanttPlugins","DS/E6WCommonUI/UIHelper","DS/ENOGantt/Nls/Eno/"+window.languageGlobalVar,"css!DS/Sencha/classic/theme-neptune/resources/theme-neptune-all","css!DS/Bryntum/resources/css/sch-gantt-triton-all","css!ENOGantt/GanttWidget.css",],function(y,h,H,k,t,w,E,b,c,f,g,K,n,d,p,D,I,v,F,q,o){var A="savedPhysicalId";var B="savedObjectID";var e="savedObject";var s="savedTitle";var i="savedTenant";var r="Project Space,Project Concept";var l="bordered";var m=function(){return[{readWrite:"true",name:"project",attributeToDisplay:"name",imageAttribute:"image",singleObjectOnly:true,searchTypes:r,validTypes:r,searchTitle:"Project Search,Project Concept",typeAheadCallback:c.typeAheadCallback,type:"object",}]};var u=c.extend({get:function(M){var L;if(M==="canEdit"){L=true;return L}else{this._parent.apply(this,arguments)}},dataForRendering:function(){return{canEdit:true}},add:function(M,L){this._fireRelationshipChangeEvents(M,L,true)}});var C=b.extend({_uwaClassName:"GanttView",className:"gantt-view",id:function(){return"ganttView"},domEvents:{"dragenter ":"handleDragEnter","dragover ":"handleDragOver","dragleave ":"handleDragLeave","drop ":"handleDrop","drop .drop-target":"handleDrop","dragend .drop-target":"handleDragEnd"},save:function(){this.crudManager.sync()},getViewHeight:function(){var L=t.getBody().getHeight();if(window.isIFWE){L=widget.body.clientHeight}return L},setup:function(L){if(window.isIFWE){widget.body.empty();this.container.inject(widget.body)}this.mainPanel=t.create("Ext.panel.Panel",{width:"auto",id:"mainpanel",xtype:"xmainpanel",autoHeight:true,height:this.getViewHeight(),layout:"border",renderTo:window.isIFWE?this.container:t.getBody(),});if(window.isIFWE){var M={autoHide:true,closable:true};this.alerter=new k(M);this.alerter.inject(this.container,"top");widget.alerter=this.alerter}},prerender:function(){},renderProjectGantt:function(){var L=this;var M=new K({loadWidget:function(S){if(L.searchPanel){L.searchPanel.setLoading(false);L.searchPanel.setHidden(true)}var P=new n();L.crudManager=P.crudManager;var O=t.ComponentQuery.query("#dpmprojectgantt")[0];if(!O){var W=new v();var T=false;var Q=[];var R=new F();Q=R.getPlugins();var N=I.getDateFormat();if(!(App.Infra.ViewId==App.Infra.Views.VIEW_TEMPLATE_WBS)){T=t.create("DS.ENOGantt.DPMGanttAll.TooltipTamplate",null,N)}var V={ToolbarRequired:App.Infra.ToolbarRequired};L.panel=t.create("Gnt.panel.Gantt",{xtype:"dpmprojectgantt",id:"dpmprojectgantt",rowHeight:32,region:"center",rightLabelField:"Name",controller:"GanttViewController",columns:App.Infra.Columns,crudManager:L.crudManager,highlightWeekends:true,tooltipTpl:T,showTodayLine:true,loadMask:true,selModel:new t.selection.TreeModel({ignoreRightMouseSelection:false,mode:"MULTI"}),autoFitOnLoad:true,columnLines:true,enableBaseline:true,baselineVisible:App.Infra.BaselineRequired,enableProgressBarResize:false,showRollupTasks:false,allowParentTaskMove:false,enableTaskReordering:false,toggleParentTasksOnClick:false,tbar:L.getTbar(V),plugins:Q,lockedGridConfig:{width:"20%"},listeners:{taskclick:L.getTask,}});if(enoviaServer.viewId==App.Infra.Views.VIEW_STATUS_REPORT||enoviaServer.viewId==App.Infra.Views.VIEW_BASELINE_WBS||enoviaServer.viewId==App.Infra.Views.VIEW_BASELINE_VERSUS_CURRENT_BASELINE||enoviaServer.viewId==App.Infra.Views.VIEW_BASELINE_VERSUS_CURRENT_BASELINE2){L.panel.setReadOnly(App.Infra.ReadOnly)}L.refinement=new D({taskStore:L.crudManager.getTaskStore(),});L.refinement.render();L.resourceUtilizationPanel=new p();var U={region:"center",layout:"border",items:[L.panel,{xtype:"dpmresourceutilizationpanel",id:"dpmresourceutilizationpanel",region:"south",height:"50%",partnerTimelinePanel:L.panel,hidden:true,}]};window.gantt=L.ganttPanel;t.tip.QuickTipManager.init();L.mainPanel.add({xtype:L.refinement.panel,reference:"refinement"});L.mainPanel.add(U)}else{L.panel.show()}L.panel.crudManager.load();if(window.isIFWE){widget.setTitle(g.get("savedTitle"))}}})},changeAutoCompleteDisplaySettings:function(){var N=this;var L=this._searchBar.getElement("input");var M=this._searchBar.getElement(".chooser");var P=this._searchBar._childrenViews[0].autoCompleteControl;var O=o["emxProgramCentral.GanttView.SearchForProject"];this._searchBar._childrenViews[0].autoCompleteControl.setOption("placeholder",O);this._searchBar._childrenViews[0].autoCompleteControl.setOption("position",{my:"left-1.5 top",at:"left bottom",of:M,collision:"fit",within:this.container})},hideGanttPanels:function(){var N=t.ComponentQuery.query("#dpmresourceutilizationpanel")[0];if(N){N.hide()}var M=t.ComponentQuery.query("#GanttRefinementPanel")[0];if(M){M.hide()}var L=t.ComponentQuery.query("#dpmprojectgantt")[0];if(L){L.hide()}},renderProjectSearch:function(){var L=t.ComponentQuery.query("#mainpanel")[0];if(L){this.searchPanel=t.ComponentQuery.query("#searchprojectpanel")[0];if(!this.searchPanel){this.model=new u();this._searchBar=new E({model:this.model,id:"projectSpaceSearch",});this._searchBar.setConfig(m());this.listenTo(this.model,"onChange:project",this._onProjectSelected);this.listenTo(widget,"onResize",function(){this._searchBar._childrenViews[0].container.setStyle("width",widget.body.clientWidth*0.75)});g.get(A)?g.addClearProjectPreference():g.removeClearProjectPreference();this._searchBar.render();this._searchBar._childrenViews[0].container.setStyle("width",widget.body.clientWidth*0.75);this._searchBar._childrenViews[0].container.toggleClassName("fluid-width",true);this._searchBar._childrenViews[0].container.toggleClassName("visible",true);this._searchBar._childrenViews[0].container.toggleClassName("ds-detail-display",false);this.changeAutoCompleteDisplaySettings();this.searchPanel=t.create("Ext.Panel",{xtype:"panel",id:"searchprojectpanel",width:"100%",region:"east",items:[t.get(this._searchBar.getContent())]});L.add(this.searchPanel)}this.refreshPlaceHolderText();this.hideGanttPanels();this.searchPanel.show();if(window.isIFWE){widget.setTitle("")}}},refreshPlaceHolderText:function(){var L=this._searchBar.getElement("input[type=text]");if(!L){return}L.setAttribute("placeholder",o["emxProgramCentral.GanttView.SearchForProject"])},render:function(M){var P=this;if(window.isIFWE){var L=true;if(g.get(A)){if(M){var N="";var O="";if(g.get(e)){N=g.get(e)}else{N=g.get(A)}var Q=g.get(s);f.ajaxRequest({url:"/resources/v1/modeler/projects/"+N+"?&$include=none&mode=getUpdatedData&title="+Q,callback:function(S){var R=UWA.is(S,"object")?S:JSON.parse(S);if(R.data[0].dataelements.Error){L=false;O=R.data[0].dataelements.Error}else{if(R.data[0].dataelements.physicalId&&R.data[0].dataelements.physicalId!==g.get(A)){g.set(A,R.data[0].dataelements.physicalId);if(g.get(e)){g.set(e,false)}if(g.get(B)){g.set(B,false)}}}if(L){enoviaServer.physicalId=g.get(A);g.addClearProjectPreference();P.renderProjectGantt()}else{P.alerter.setOption("autoHide",false);P.alerter.setOption("hideDelay",5000);P.alerter.add({message:O,className:"error"});P.alerter.show();g.set(A,false);P.renderProjectSearch()}}})}else{enoviaServer.physicalId=g.get(A);g.addClearProjectPreference();P.renderProjectGantt()}}else{g.removeClearProjectPreference();this.renderProjectSearch()}}else{this.renderProjectGantt()}return P},resize:function(){this.mainPanel.setWidth(t.getBody().getWidth());this.mainPanel.setHeight(t.getBody().getHeight())},getTask:function(){var L=arguments[1];f.ajaxRequest({url:"/resources/v2/e6w/service/ObjectInfo/"+L.getId()+"?$fields=objectId",dataType:"json",callback:function(M){}})},getTbar:function(L){var O=this;if(L.ToolbarRequired){var N={crudManager:O.crudManager};var M=new d(N);return{xtype:"dpmgantttbar"}}else{return[]}},_onProjectSelected:function(N,M){var L=this;if(L.searchPanel){L.searchPanel.setLoading({msg:o["emxProgramCentral.Gantt.Loading"]})}enoviaServer.physicalId=M;f.ajaxRequest({url:"/resources/v2/e6w/service/ObjectInfo/"+M+"?$fields=objectId",callback:function(P){var O=UWA.is(P,"object")?P:JSON.parse(P);if(O.data[0].id){g.set(A,O.data[0].id);g.set(s,O.data[0].dataelements.title);g.addClearProjectPreference();L.render(false)}}})},handleDragEnter:function z(){g.get(A)&&this.container.addClassName(l)},handleDragLeave:function G(){this.container.removeClassName(l)},handleDrop:function x(M){if(M.stopPropagation){M.stopPropagation()}if(M.preventDefault){M.preventDefault()}this.container.removeClassName(l);var L=q.getDataTransferJSON(M.dataTransfer);if(L){this.processDropData(L)}return false},handleDragEnd:function J(){this.container.removeClassName(l)},handleDragOver:function j(L){if(L.preventDefault){L.preventDefault()}L.dataTransfer.dropEffect="copy";g.get(A)&&this.container.addClassName(l);return false},processDropData:function a(M){var N=M.data.items[0],L=N.displayName;if(L&&L.length>0){if(N.objectType!=="Project Space"&&N.objectType!=="Project Concept"){this.alerter.add({message:o["emxProgramCentral.GanttView.NotProjectSpace"],className:"error"});this.alerter.show()}else{this._onProjectSelected("",N.objectId)}}},});return C})}catch(err){console.log("==============================================Error:======"+err.Name)};