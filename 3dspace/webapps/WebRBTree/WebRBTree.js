define("DS/WebRBTree/WebRBIterator",[],function(){var a=function(b){this._tree=b;this._ancestors=[];this._cursor=null};a.prototype.data=function(){return this._cursor!==null?this._cursor.data:null};a.prototype.next=function(){if(this._cursor===null){var b=this._tree._root;if(b!==null){this._minNode(b)}}else{if(this._cursor.right===null){var c;do{c=this._cursor;if(this._ancestors.length){this._cursor=this._ancestors.pop()}else{this._cursor=null;break}}while(this._cursor.right===c)}else{this._ancestors.push(this._cursor);this._minNode(this._cursor.right)}}return this._cursor!==null?this._cursor.data:null};a.prototype.prev=function(){if(this._cursor===null){var b=this._tree._root;if(b!==null){this._maxNode(b)}}else{if(this._cursor.left===null){var c;do{c=this._cursor;if(this._ancestors.length){this._cursor=this._ancestors.pop()}else{this._cursor=null;break}}while(this._cursor.left===c)}else{this._ancestors.push(this._cursor);this._maxNode(this._cursor.left)}}return this._cursor!==null?this._cursor.data:null};a.prototype._minNode=function(b){while(b.left!==null){this._ancestors.push(b);b=b.left}this._cursor=b};a.prototype._maxNode=function(b){while(b.right!==null){this._ancestors.push(b);b=b.right}this._cursor=b};return a});define("DS/WebRBTree/WebRBNode",[],function(a){var b=function(c){this.data=c;this.left=null;this.right=null;this.red=true};b.prototype.get_child=function(c){return c?this.right:this.left};b.prototype.set_child=function(c,d){if(c){this.right=d}else{this.left=d}};return b});define("DS/WebRBTree/WebRBTreeBase",["DS/WebRBTree/WebRBIterator"],function(a){var b=function(){};b.prototype.clear=function(){this._root=null;this.size=0};b.prototype.find=function(e){var d=this._root;while(d!==null){var f=this._comparator(e,d.data);if(f===0){return d.data}else{d=d.get_child(f>0)}}return null};b.prototype.findIter=function(f){var e=this._root;var d=this.iterator();while(e!==null){var g=this._comparator(f,e.data);if(g===0){d._cursor=e;return d}else{d._ancestors.push(e);e=e.get_child(g>0)}}return null};b.prototype.lowerBound=function(c){return this._bound(c,this._comparator)};b.prototype.upperBound=function(d){var c=this._comparator;function e(g,f){return c(f,g)}return this._bound(d,e)};b.prototype.min=function(){var c=this._root;if(c===null){return null}while(c.left!==null){c=c.left}return c.data};b.prototype.max=function(){var c=this._root;if(c===null){return null}while(c.right!==null){c=c.right}return c.data};b.prototype.iterator=function(){return new a(this)};b.prototype.each=function(c){var d=this.iterator(),e;while((e=d.next())!==null){c(e)}};b.prototype.reach=function(c){var d=this.iterator(),e;while((e=d.prev())!==null){c(e)}};b.prototype._bound=function(g,f){var h=this._root;var d=this.iterator();while(h!==null){var j=this._comparator(g,h.data);if(j===0){d._cursor=h;return d}d._ancestors.push(h);h=h.get_child(j>0)}for(var e=d._ancestors.length-1;e>=0;--e){h=d._ancestors[e];if(f(g,h.data)>0){d._cursor=h;d._ancestors.length=e;return d}}d._ancestors.length=0;return d};return b});define("DS/WebRBTree/WebRBTree",["DS/WebRBTree/WebRBNode","DS/WebRBTree/WebRBTreeBase"],function(a,b){var c=function(d){this._root=null;this._comparator=d;this.size=0};c.prototype=Object.create(b.prototype);c.prototype.insert=function(h){var i=false;if(this._root===null){this._root=new a(h);i=true;this.size++}else{var l=new a(undefined);var f=0;var m=0;var g=null;var j=l;var d=null;var e=this._root;j.right=this._root;while(true){if(e===null){e=new a(h);d.set_child(f,e);i=true;this.size++}else{if(this.is_red(e.left)&&this.is_red(e.right)){e.red=true;e.left.red=false;e.right.red=false}}if(this.is_red(e)&&this.is_red(d)){var n=j.right===g;if(e===d.get_child(m)){j.set_child(n,this.single_rotate(g,!m))}else{j.set_child(n,this.double_rotate(g,!m))}}var k=this._comparator(e.data,h);if(k===0){break}m=f;f=k<0;if(g!==null){j=g}g=d;d=e;e=e.get_child(f)}this._root=l.right}this._root.red=false;return i};c.prototype.remove=function(j){if(this._root===null){return false}var l=new a(undefined);var g=l;g.right=this._root;var f=null;var i=null;var q=null;var h=1;while(g.get_child(h)!==null){var n=h;i=f;f=g;g=g.get_child(h);var k=this._comparator(j,g.data);h=k>0;if(k===0){q=g}if(!this.is_red(g)&&!this.is_red(g.get_child(h))){if(this.is_red(g.get_child(!h))){var d=this.single_rotate(g,h);f.set_child(n,d);f=d}else{if(!this.is_red(g.get_child(!h))){var m=f.get_child(!n);if(m!==null){if(!this.is_red(m.get_child(!n))&&!this.is_red(m.get_child(n))){f.red=false;m.red=true;g.red=true}else{var o=i.right===f;if(this.is_red(m.get_child(n))){i.set_child(o,this.double_rotate(f,n))}else{if(this.is_red(m.get_child(!n))){i.set_child(o,this.single_rotate(f,n))}}var e=i.get_child(o);e.red=true;g.red=true;e.left.red=false;e.right.red=false}}}}}}if(q!==null){q.data=g.data;f.set_child(f.right===g,g.get_child(g.left===null));this.size--}this._root=l.right;if(this._root!==null){this._root.red=false}return q!==null};c.prototype.is_red=function(d){return d!==null&&d.red};c.prototype.single_rotate=function(d,e){var f=d.get_child(!e);d.set_child(!e,f.get_child(e));f.set_child(e,d);d.red=true;f.red=false;return f};c.prototype.double_rotate=function(d,e){d.set_child(!e,this.single_rotate(d.get_child(!e),!e));return this.single_rotate(d,e)};return c});