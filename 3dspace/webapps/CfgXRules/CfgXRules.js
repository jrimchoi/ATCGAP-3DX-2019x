define("DS/CfgXRules/Commons/Utils/dictionaryCfgOperatorEnum",[],function(){var a={};a.binary_operator_id="binary_operator_id";a.binary_operator="binary_operator";a.and_id="and_id";a.or_id="or_id";a.imply_id="imply_id";a.eqvlt_id="eqvlt_id";a.unary_operator_id="unary_operator_id";a.not_id="not_id";a.unary_operator="unary_operator";a.open_id="open_id";a.opening_separator="opening_separator";a.close_id="close_id";a.closing_separator="closing_separator";a.closing_separator_id="closing_separator_id";a.opening_separator_id="opening_separator_id";return a});define("DS/CfgXRules/Commons/Utils/dictionaryCfgConverter",[],function(){var a={};a.convertFromPhysicalToLogical16X=function(g){var b=JSON.stringify(g);b=b.replace(/pid:/g,"");b=b.replace(/lid:/g,"");b=JSON.parse(b);var e=0,c=0;for(e=0;e<b.features.length;e+=1){var d=b.features[e];d.id=d.logicalId;d.logicalId=null;delete d.logicalId;for(c=0;c<d.options.length;c+=1){var f=d.options[c];f.id=f.parentRelLogicalId;f.parentRelLogicalId=null;delete f.parentRelLogicalId}}return b};a.convertFromV2toV1=function(r){var s={};s.variantClasses=[];s.options=[];s.packs=[];s.rules=[];var h=0,g=0,e=0,c=0;if(r.portfolioClasses){var q=r.portfolioClasses;h=0;for(h=0;h<q.length;h+=1){var d=q[h];if(d.portfolioComponents){g=0;for(g=0;g<d.portfolioComponents.length;g+=1){var o=d.portfolioComponents[g];if(o.variantClasses){for(e=0;e<o.variantClasses.length;e+=1){var b={};b.id=o.variantClasses[e].id;b.image=o.variantClasses[e].image;b.name=o.variantClasses[e].name;b.variants=[];if(o.variantClasses[e].variants){for(c=0;c<o.variantClasses[e].variants.length;c+=1){var f={};f.id=o.variantClasses[e].variants[c].id;f.name=o.variantClasses[e].variants[c].name;f.image=o.variantClasses[e].variants[c].image;b.variants.push(f)}}s.variantClasses.push(b)}}if(o.options){for(e=0;e<o.options.length;e+=1){var l={};l.id=o.options[e].id;l.name=o.options[e].name;l.image=o.options[e].image;s.options.push(l)}}if(o.packs){for(e=0;e<o.packs.length;e+=1){var p={};p.id=o.packs[e].id;p.name=o.packs[e].name;p.image=o.packs[e].image;s.packs.push(p)}}}}}}else{s=JSON.parse(JSON.stringify(r))}return s};return a});define("DS/CfgXRules/Commons/Utils/ServicesUrlsCatalog",[],function(){var a={};var b=function(){var c=location.pathname.substring(0,location.pathname.indexOf("/",1));var d=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");var e=d.concat(c);return e};a.solverUrlEndPoint=b()+"/resources/cfg/configurator/solver/";a.solverUrlEndPoint_newLib=b()+"/resources/rulesolver/solver/";return a});define("DS/CfgXRules/Commons/Presenters/VCSTablePresenter",["UWA/Class/View","UWA/Class/Listener","DS/Tree/TreeNodeModel","DS/Tree/TreeListView","DS/Tree/TreeDocument","DS/Tree/TreeNodeView","DS/Tree/Tree","DS/Tree/Manager","DS/UIKIT/Input/Text","DS/Controls/Button","DS/Core/ModelEvents","i18n!DS/CfgXRules/assets/nls/Commons/VariabilityCriteriaSelector","css!DS/CfgXRules/Commons/Presenters/VCSTablePresenter"],function(q,c,j,f,h,e,s,b,r,l,m,d,u){var p=10;var o=40;var t=800;function g(w){return{y:10,x:10}}function k(y){var A=0,z=0,x=0,w=0;if("detail" in y){z=y.detail}if("wheelDelta" in y){z=-y.wheelDelta/120}if("wheelDeltaY" in y){z=-y.wheelDeltaY/120}if("wheelDeltaX" in y){A=-y.wheelDeltaX/120}if("axis" in y&&y.axis===y.HORIZONTAL_AXIS){A=z;z=0}x=A*p;w=z*p;if("deltaY" in y){w=y.deltaY}if("deltaX" in y){x=y.deltaX}if((x||w)&&y.deltaMode){if(y.deltaMode===1){x*=o;w*=o}else{x*=t;w*=t}}if(x&&!A){A=(x<1)?-1:1}if(w&&!z){z=(w<1)?-1:1}return{spinX:A,spinY:z,pixelX:x,pixelY:w}}var n=q.extend({tagName:"div",className:"generic-detail",params:{},init:function(w){var x=this;UWA.extend(w,this.defaults,true);this._modelEvents=new m();if(w.actions){this.actionsTreeListView=new a({actions:w.actions,_modelEvents:this._modelEvents})}if(w.dictionaryJSON){if(w.dictionaryJSON._version==undefined||w.dictionaryJSON._version=="1.0"||w.dictionaryJSON._version=="v1"||w.dictionaryJSON._version=="V1"){this.dicoVersion="1.0"}else{if(w.dictionaryJSON._version=="2.0"||w.dictionaryJSON._version=="v2"||w.dictionaryJSON._version=="V2"){this.dicoVersion="2.0"}}}this.tableListView=new v(UWA.merge({viewIdentifier:w.viewIdentifier,dicoVersion:this.dicoVersion,dictionaryJSON:w.dictionaryJSON,actionsTreeListView:this.actionsTreeListView,_modelEvents:this._modelEvents,getAllChildrenOnParentSelection:w.getAllChildrenOnParentSelection,getParentOnChildSelection:w.getParentOnChildSelection},w.contentTreeOptions));this._parent(w);this.tableListView._loadDictionaryJsonUpdated.call(this.tableListView);this.tableListView.options.selectionData.displayCount=this.tableListView.options.selectionData.totalCount=this.tableListView.getNodeCount(this.tableListView);console.log("Total Node count : "+this.tableListView.options.selectionData.totalCount);this.subscribe("internal_onAddAction",function(B){if(B.nodeRowID!=undefined){var A=x.emptyDicoObject();A.clickedId=null;var z=x.tableListView.getManager().getTreeNodeModelFromRowID(B.nodeRowID);A.clickedId=z.options.id;if(x.dicoVersion=="1.0"){if(z._parentNode&&z._parentNode._isTrueRoot()){switch(z.options.criteriaType){case"Features":A.dictionary.features.push({id:z.options.id,name:z.options.label,options:x.getArrayOfChildren(z)});break}}else{var y=z._parentNode;if(y){A.dictionary.features.push({id:y.options.id,name:y.options.label,options:[{id:z.options.id,name:z.options.label}]})}}}else{if(x.dicoVersion=="2.0"){if(z._parentNode&&z._parentNode._isTrueRoot()){switch(z.options.criteriaType){case"Variants":A.dictionary.variantClasses.push({id:z.options.id,name:z.options.label,variants:x.getArrayOfChildren(z)});break;case"Options":A.dictionary.options.push({id:z.options.id,name:z.options.label});break;case"Packs":A.dictionary.packs.push({id:z.options.id,name:z.options.label});break}}else{var y=z._parentNode;if(y){A.dictionary.variantClasses.push({id:y.options.id,name:y.options.label,variants:[{id:z.options.id,name:z.options.label}]})}}}}x._modelEvents.publish({event:"onAddAction",data:A,context:null})}})},render:function(){var z=this;var A=UWA.createElement("div",{styles:{width:"calc( 100% - 40px )",height:"100%",display:"inline-block"}});A.addContent(this.tableListView);this.container.addContent(A);if(this.actionsTreeListView){var x=UWA.createElement("div",{styles:{width:"40px",height:"100%",display:"inline-block"}});x.addContent(this.actionsTreeListView);this.actionsTreeListView.elements.container.setStyle("display","inline");this.container.addContent(x)}this.container.style.height="100%";this.container.style.display="flex";var w=this.tableListView.getManager();var y=this.actionsTreeListView?this.actionsTreeListView.getManager():undefined;[{manager:w,overflowType:"overflow-y",status:"hidden"},{manager:y,overflowType:"overflow-x",status:"disabled"}].forEach(function(B){B.manager&&B.manager.onReady(function(){var C=this.elements.scroller;if(C){C.elements.container.setStyle(B.overflowType,B.status)}})});w.onReady(function(){z.actionsTreeListView&&z.actionsTreeListView.getManager().onReady(function(){var B=z.actionsTreeListView.getManager().elements.scroller;var C=z.tableListView.getManager().elements.scroller;C.elements.container.addEvent("wheel",function(G){G.preventDefault();if(w.getPoolNumberOfRows()==(w.getNumberOfRows()-1)){return}var J=UWA.Event.wheelDelta(G);var D=k(G);var I=Math.abs(D.pixelY);var F=g(G).y;var H=0;while(H<=I){H=H+F;var E=B.elements.container.scrollTop+(D.spinY*F);B.elements.container.scrollTop=E}B.setPosition({x:0,y:-B.elements.container.scrollTop},false);B._modelEvents.publish({event:"SCROLL",context:B,})});B.onScroll(function(F){var D=this.getPosition();var E=z.tableListView.getManager().elements.scroller.getPosition();z.tableListView.getManager().elements.scroller.setPosition({x:0,y:D.y},false);z.tableListView.getManager().elements.scroller.elements.container.scrollTop=Math.abs(D.y);z.tableListView.getManager().elements.scroller.elements.container.scrollLeft=Math.abs(E.x);z.tableListView.getManager().elements.scroller._modelEvents.publish({event:"SCROLL",data:{originatedFrom:"ActionScroller",},context:z.tableListView.getManager().elements.scroller,})})})});this.publish("onDisplayAndSelCountUpdate",this.tableListView.options.selectionData,null);return this},subscribe:function(w,x){if(this._modelEvents){this._modelEvents.subscribe({event:w},x)}},publish:function(w,y,x){if(this._modelEvents){this._modelEvents.publish({event:w,data:y,context:x})}},emptyDicoObject:function(){function w(y){var x=undefined;if(y&&y=="1.0"){x={dictionary:{_version:"1.0",features:[],options:[],}}}else{if(y&&y=="2.0"){x={dictionary:{_version:"2.0",variantClasses:[],options:[],packs:[]}}}}return x}return new w(this.dicoVersion)},getArrayOfChildren:function(w){var y=[];if(w){var x=w.getChildren()||[];x.forEach(function(z){if(z&&false==z.isHidden()){y.push({id:z.options.id,name:z.options.label})}})}return y}});var a=f.extend(c,{defaults:{apiVersion:2,height:"100%",width:"10%",display:"inline",allowUnsafeHTMLContent:false,columns:[{text:"",dataIndex:"tree",isHidden:true,},{text:"",dataIndex:"actionCol",width:"auto",isSortable:false,isEditable:false,isSelectable:false,onCellRequest:function(x){if(!x.isHeader){var w=x.cellView.reuseCellContent("_plusActionBtn")}}}],selection:{nodes:false,cells:false,rowHeaders:false,columnHeaders:false,unselectAllOnEmptyArea:false,toggle:true,canMultiSelect:false},},init:function(w){var x=this;UWA.extend(w,this.defaults,true);w.treeDocument=new h({useAsyncPreExpand:true,shouldAcceptDrop:function(y){return false},shouldAcceptDrag:function(y){return false},shouldBeEditable:function(y){return false},shouldBeSelected:function(y){return false}});this._parent(w);if(UWA.is(this.options.actions,"array")){this.options.actions.forEach(function(y){x.getManager().registerReusableCellContent({id:"_"+y.icon+"ActionBtn",buildContent:function(){var z=new l({icon:y.icon,displayStyle:"lite",allowUnsafeHTMLLabel:false});z.getContent().setStyle("margin-right","10");z.getContent().addEvent("click",function(){var A=this.parentNode.dsView.getCellInfos();if(A){x.options._modelEvents.publish({event:"internal_"+y.event,data:{nodeRowID:A.virtualRowID},context:null})}});return z}})})}},});var v=f.extend(c,{defaults:{treeDocument:{},apiVersion:2,height:"100%",width:"80%",allowUnsafeHTMLContent:false,expanderStyle:"triangle",selection:{nodes:true,cells:false,rowHeaders:true,columnHeaders:true,unselectAllOnEmptyArea:true,toggle:true,canMultiSelect:true},node:[],criteriaFilters:{searchData:{},searchText:"",checkBoxSts:{Variants:true,Options:true,Packs:true},},events:{onChangeSelection:function(w){var x=this;this.options._modelEvents.publish({event:"onDisplayAndSelCountUpdate",data:this.options.selectionData,context:null})},},onDragStartCell:function(y,z){if(z){var x={};if(this._parentObject.options.treeDocument){var w=this._parentObject.options.treeDocument.getSelectedNodes();if(w&&UWA.is(w,"array")){w.forEach(function(E){var A=E.options.criteriaType;var F=E.options.id;var G=E.getLabel();if(E.isRoot()){if(E.hasChildren()){var C=[];var D=E.getChildren();D.forEach(function(H){if(w.indexOf(H)!=-1){C.push({name:H.getLabel(),id:H.options.id})}});if(A=="Variants"){if(x.variantClasses==undefined){x.variantClasses=[]}x.variantClasses.push({name:G,id:F,variants:C})}else{if(A=="Features"){if(x.features==undefined){x.features=[]}x.features.push({name:G,id:F,options:C})}}}else{var B=A.toLowerCase();if(x[B]==undefined){x[B]=[]}x[B].push({name:G,id:F})}}})}if(this._parentObject.options.dicoVersion){x._version=this._parentObject.options.dicoVersion}else{x._version="1.0"}console.log("Dragged Items Dico: "+JSON.stringify(x));if(navigator.userAgent.indexOf("Trident")!=-1&&navigator.userAgent.indexOf("MSIE")==-1){y.dataTransfer.setData("text",JSON.stringify(x))}else{y.dataTransfer.setData("text",JSON.stringify(x))}y.dataTransfer.effectAllowed="all"}}y.dataTransfer.effectAllowed="all"},applyCriteriaFilter_v2:function(w){var A=this;var y=w.filterData;var E=w.filterData.searchValue;E=E.toLowerCase();var B=w.filterData.typeFilter?w.filterData.typeFilter:undefined;var x=this.options.treeDocument.getRoots();console.log("TreeDocument Root Nodes Count: "+x.length);var C=0;var z=0;var D=0;C=x.length;if(x&&x.length>0){x.filter(function(F){var H=false;var G=F.getLabel().toLowerCase();var I=F.getChildren();if(B){if(B[F.options.criteriaType]==false&&!F.isHidden()){F.hide();H=true}else{if(B[F.options.criteriaType]==true&&F.isHidden()&&G.contains(E)){F.show();if(E==""&&(I==null||I.length<0)){H=true}}else{if(B[F.options.criteriaType]==false&&F.isHidden()){return}else{if(B[F.options.criteriaType]==true&&!F.isHidden()){if(E==""&&(I==null||I.length<0)){H=true}}}}}if(H){return}}var J=[];if(I&&I.length>0){z+=I.length;J=I.filter(function(K){var L=K.getLabel().toLowerCase();if(L.contains(E)){if(K.isHidden()){K.show()}return true}else{if(!K.isHidden()){K.hide()}return false}})}if(F.isHidden()&&(G.contains(E)||J.length>0)){F.show()}else{if(!F.isHidden()&&(!G.contains(E)&&J.length<=0)){F.hide()}}});A.options.selectionData.displayCount=A.getVisibleNodeCount();A.options._modelEvents.publish({event:"onDisplayAndSelCountUpdate",data:A.options.selectionData,context:null})}},applyCriteriaFilter_v1:function(z){var y=this;var w=0;var x=z.filterData;var A=z.filterData.searchValue;A=A.toLowerCase();var B=z.filterData.typeFilter?z.filterData.typeFilter:undefined;this.options.treeDocument.getRoots().forEach(function(G){var E=[];if(B[G.options.criteriaType]){for(var L=0;L<x.savedAttributes.length+1;L++){var M=G.getLabel().toLowerCase();var I=1,K=1;if(L==x.savedAttributes.length){A=x.value.toLowerCase()}else{A=x.savedAttributes[L].value.toLowerCase()}if(G.getChildren()){var D;var F=G.getChildren();for(var J=0;J<F.length;J++){var C=F[J];for(var H=0;H<x.savedAttributes.length+1;H++){var I=1,K=1;if(H==x.savedAttributes.length){D=x.value.toLowerCase()}else{D=x.savedAttributes[H].value.toLowerCase()}if(C.getLabel().toLowerCase().contains(D)){K=1}else{K=0;break}}if(K==1){C.show();E.push(C)}else{C.hide()}}}if(M.contains(A)){I=1}else{I=0;break}}if(I==1){G.show()}else{if(E.length>0){G.show()}else{G.hide()}}}else{G.hide()}if(G.getChildren()){if(G.isHidden()){w+=G.getChildren().length}else{w+=(G.getChildren().length-G.getVisibleChildren().length)}}else{if(G.options.criteriaType!="Variants"){if(G.isHidden()){w+=1}}}});y.options.selectionData.displayCount=y.options.selectionData.totalCount-w;y.options._modelEvents.publish({event:"onDisplayAndSelCountUpdate",data:y.options.selectionData,context:null})},},getNodeCount:function(){function x(z){var y=0;if(z&&z.hasChildren()){var y=z.getChildren().length;z.getChildren().forEach(function(A){y+=x(A)})}return y}var w=0;if(this.options.treeDocument){var w=x(this.options.treeDocument._getTrueRoot())}return w},getVisibleNodeCount:function(){function x(z){var y=0;if(z&&z.hasChildren()&&z.getVisibleChildren()!=null){var y=z.getVisibleChildren().length;z.getVisibleChildren().forEach(function(A){y+=x(A)})}return y}var w=0;if(this.options.treeDocument){var w=x(this.options.treeDocument._getTrueRoot())}return w},_loadDictionaryJsonUpdated:function(){console.log("Loading dictionary");var z=this;if(this.dicoVersion){switch(this.dicoVersion){case"v1":case"V1":case"1.0":var y=this.options.dictionaryJSON.features?this.options.dictionaryJSON.features:[];var C=this.options.actionsTreeListView.options.treeDocument._getTrueRoot();var x=this.options.treeDocument._getTrueRoot();this.getTreeNodeModelFromDicoObject_v02(x,C,"Features","Configuration Feature",y);break;case"v2":case"V2":case"2.0":var A=this.options.dictionaryJSON.options;var B=this.options.dictionaryJSON.packs;var w=this.options.dictionaryJSON.variantClasses;var C=this.options.actionsTreeListView.options.treeDocument._getTrueRoot();var x=this.options.treeDocument._getTrueRoot();this.getTreeNodeModelFromDicoObject_v02(x,C,"Options",d.Option,A);this.getTreeNodeModelFromDicoObject_v02(x,C,"Packs",d.Pack,B);this.getTreeNodeModelFromDicoObject_v02(x,C,"Variants",d.VariantClass,w);break;default:console.log("Incorrect dictionary version/format: "+this.options.dictionaryJSON._version);break}}},init:function(x){var z=this;UWA.extend(x,this.defaults,true);x.treeDocument=new h({useAsyncPreExpand:true,shouldAcceptDrop:function(A){return false},shouldAcceptDrag:function(A){return true},shouldBeEditable:function(A){return false},shouldBeSelected:function(A){return true},});var y=true;if(y){var w=x.treeDocument.getXSO();w.onAdd(function(D){var E=w.isEmpty();var F=D.options.criteriaType;var C=undefined;if(D.isSelectionChangeFromUI()){if(D.hasChildren()){var A=[];if(z.options.getAllChildrenOnParentSelection){D.selectAll();D.getChildren().forEach(function(G){A.push({id:G.options.id,children:[]})});console.log(">> After node.selectall() call")}C={selection:[{id:D.options.id,children:A}],eventOrigin:z.options.viewIdentifier,}}else{if(D.getParent().isRoot()){if(z.options.getParentOnChildSelection){var B=D.getParent();if(false==B.isSelected()){B.select()}C={selection:[{id:B.options.id,children:[{id:D.options.id,children:[]}]},],eventOrigin:z.options.viewIdentifier}}else{C={selection:[{id:D.options.id,children:[]}],eventOrigin:z.options.viewIdentifier}}}}}});w.onRemove(function(E){var F=E.options.criteriaType;var D=undefined;if(E.isSelectionChangeFromUI()){if(E.hasChildren()){var B=[];if(z.options.getAllChildrenOnParentSelection||z.options.getParentOnChildSelection){E.unselectAll();E.getChildren().forEach(function(G){B.push({id:G.options.id,children:[]})})}}else{if(E.getParent().isRoot()){if(z.options.getParentOnChildSelection){var C=E.getParent();var A=0;E.getParent().getChildren().forEach(function(G){if(G.isSelected()){A++}});if(A===0){C.unselect()}D={selection:[{id:C.options.id,children:[{id:E.options.id,children:[]}]},],eventOrigin:z.options.viewIdentifier}}else{D={selection:[{id:E.options.id,children:[]}],eventOrigin:z.options.viewIdentifier}}}}}})}this._parent(x);this.dicoVersion=this.options.dicoVersion;this.elements.container.style.height="100%";this.options._modelEvents.subscribe({event:"onContentFilterCriteriaChange"},function(A){z.options.treeDocument.prepareUpdate();z.options.applyCriteriaFilter_v2.call(z,A);z.options.treeDocument.pushUpdate()});this.options.treeDocument._bindEventOnDocument("postExpand",function(A){if(A.parent){A.parent.options.actionNode.expand()}});this.options.treeDocument._bindEventOnDocument("postCollapse",function(A){if(A.parent){A.parent.options.actionNode.collapse()}});this.options.treeDocument._bindEventOnDocument("hide",function(A){if(A.data.nodeModel.options.actionNode){}A.data.nodeModel.options.actionNode.hide()});this.options.treeDocument._bindEventOnDocument("show",function(A){if(A.data.nodeModel.options.actionNode){}A.data.nodeModel.options.actionNode.show()})},getTreeNodeModelFromDicoObject_v02:function(z,B,w,x,y){var A=this;if(y&&UWA.is(y,"array")){var C=[];y.forEach(function(E){var D=A.createTreeNodeFromDicoItem(w,x,E);z.addChild(D);B.addChild(D.options.actionNode)})}},getTreeNodeModelFromDicoObject_02:function(w,x,y){var z=this;if(y&&UWA.is(y,"array")){var A=[];var B=[];y.forEach(function(C){A.push(z.createTreeNodeFromDicoItem(w,x,C));B.push(z.createActionsTreeNodeForDicoItem(w,x,C))});return{contentTreeNodes:A,actionsTreeNodes:B}}else{if(y&&UWA.is(y,"object")){return z.createTreeNodeFromDicoItem(w,y)}}},getDummyTreeNodeModelFromDicoObject:function(w,x,z){var y=this;var A=[];var B=[];for(i=0;i<z;i++){A.push(y.createTreeNodeFromDicoItem(w,x,{id:"x"+i,name:"x_"+i}))}return A},createTreeNodeFromDicoItem:function(x,y,z){var C=this.options.columns;var A="";var B={};C.forEach(function(E){var D=E.valueAttribute;if(E&&E.dataIndex=="tree"){A=z[D]?z[D]:(z.attributes?z.attributes[D]:(UWA.is(z.get,"function")?z.get(D):""))}else{if(D.toLowerCase()==="type"){if(y==="Configuration Option"||y==="Configuration Feature"){if(z[D]==="ConfigurationFeature"){y=d.ConfigurationFeature}else{if(z[D]==="ConfigurationOption"){y=d.ConfigurationOption}else{y=z[D]}}}B[D]=y}else{B[D]=z[D]?z[D]:(z.attributes?z.attributes[D]:(UWA.is(z.get,"function")?z.get(D):""))}}});var w=new j({id:z.id,label:A,criteriaType:x,children:null,grid:B,actionNode:new j({id:z.id,label:"",children:[],grid:{actionCol:"",}})});if(x=="Variants"&&UWA.is(z.variants,"array")&&z.variants.length>0){this.getTreeNodeModelFromDicoObject_v02(w,w.options.actionNode,x,d.Variant,z.variants)}else{if(x=="Features"&&UWA.is(z.options,"array")&&z.options.length>0){this.getTreeNodeModelFromDicoObject_v02(w,w.options.actionNode,"Options","Configuration Option",z.options)}}return w},createActionsTreeNodeForDicoItem:function(x,y,z){var w=new j({id:z.id,label:"",criteriaType:x,children:[],grid:{actionCol:"",}});return w},});return n});define("DS/CfgXRules/Commons/Presenters/SlideInPanel",["UWA/Class/View","UWA/Class/Listener","UWA/Class/Events","DS/UIKIT/Input/Button","DS/Windows/DockingElement","css!DS/CfgXRules/Commons/Presenters/SlideInPanel"],function(g,f,b,a,h,e){var c=g.extend({init:function(j){this.viewContent="";if(j.viewContent){this.viewContent=j.viewContent}var k=this;this.listenTo(this.viewContent,"onCloseAction",function(){k.dispatchEvent("onCloseAction")});this._parent.apply(this,arguments)},render:function(){var m=this;var o=new a({value:"Ok",className:"primary"});o.addEvent("onClick",function(){m.dispatchEvent("onOkAction")});var n=new a({value:"Cancel"});n.addEvent("onClick",function(){m.dispatchEvent("onCancelAction")});var k=UWA.createElement("div",{html:[o,n],"class":"modal-footer",styles:{width:"100%",flexShrink:"1"}});var l=UWA.createElement("div",{styles:{width:"100%",height:"100%",display:"flex",flexDirection:"column"}});var j=new UWA.createElement("div",{html:this.viewContent,"class":"slidein-view-content"});l.addContent(j);if(this.options.actionPanelRequired&&this.options.actionPanelRequired==true){l.addContent(k)}this.container.setContent(l);this.container.setStyles({position:"absolute",top:"0px",width:"100%",height:"100%"});return this},});var d=UWA.Class.extend(b,f,{init:function(j,m){this._parent();this.parentContainer=j.parentContainer;this.slideInMode="frame";this.isShown=false;this.slideInSize=j.slideInWidth?j.slideInWidth:300;var l=300;this.allowResize=j.isModal?(j.isModal==false):true;if(!this.allowResize){this.slideInMode="over"}if(this.parentContainer){var k=this.parentContainer.getSize().width;if(UWA.is(k,"number")){l=k*(1/3)}if(l>this.slideInSize){this.slideInSize=l}}this.viewContent=new c(j);this.options=j;this.viewContent.render()},show:function(){var j=this.parentContainer.getElement(".slidein-container");if(j){j.remove();j.destroy()}this.panelContainer=new h({side:WUXDockAreaEnum.RightDockArea,dockingZoneContent:this.viewContent,dockingZoneSize:this.slideInSize,collapsibleFlag:false,freeZoneContent:UWA.createElement("div",{styles:{backgroundColor:"#f9f9f9",opacity:0.5,height:"100%",width:"100%"}})});this.panelContainer.inject(this.parentContainer,"before");var l=this.panelContainer.getContent();l.addClassName("slidein-container");l.addClassName("slidein-container-"+this.slideInMode);var k=this;this.listenTo(this.viewContent,"onCancelAction",function(){if(UWA.is(k.options.onCancelAction,"function")){k.options.onCancelAction(k.options.viewContent)}k.hide()});this.listenTo(this.viewContent,"onOkAction",function(){if(UWA.is(k.options.onOkAction,"function")){k.options.onOkAction.call(this,k.options.viewContent)}k.hide()});this.listenTo(this.viewContent,"onCloseAction",function(){k.hide()});this.isShown=true;if(this.allowResize){this.listenTo(l,"dockResize",function(){k.resizePanel()});if(typeof widget!="undefined"){this.listenTo(widget,"onResize",function(){this.resizeContainer()})}this.resizeContainer()}this.mutationObserver=new MutationObserver(function(m){m.forEach(function(n){if(n.target&&n.target.style&&n.target.style.display=="none"){k.hide()}})});this.mutationObserver.observe(this.parentContainer,{attributes:true,attributeFilter:["style"]});if(UWA.is(this.options.onShowPanel,"function")){this.options.onShowPanel(this.options.viewContent)}this.dispatchEvent("onShow")},hide:function(){this.mutationObserver.disconnect();if(this.allowResize){this.parentContainer.setStyles({width:"100%"})}this.isShown=false;this.dispatchEvent("onHide");if(UWA.is(this.options.onHidePanel,"function")){this.options.onHidePanel(this.options.viewContent)}var j=this.panelContainer.getContent();j.removeClassName("slidein-container-"+this.slideInMode);this.panelContainer.remove();j.remove();this.stopListening()},toggle:function(){if(this.isShown){this.hide()}else{this.show()}},resizePanel:function(){var j=this.panelContainer.getContent();if(this.slideInMode=="frame"){this.parentContainer.setStyles({width:"calc( 100% - "+this.panelContainer.dockingZoneSize+"px )"})}else{this.parentContainer.setStyles({width:"100%"})}},resizeContainer:function(){var j=(typeof widget!="undefined")?widget.getViewportDimensions():this.parentContainer.getSize();var k=this.panelContainer.getContent();if(k.isInjected()){k.removeClassName("slidein-container-"+this.slideInMode);if(j.width>768){this.slideInMode="frame"}else{this.slideInMode="over"}k.addClassName("slidein-container-"+this.slideInMode);this.panelContainer.dockingZoneSize=this.slideInSize;if(this.isShown){this.resizePanel()}}},});return d});define("DS/CfgXRules/Commons/Presenters/VCSTilePresenter",["UWA/Class/View","UWA/Class/Collection","UWA/Class/Model","DS/W3DXComponents/Views/Item/TileView","DS/W3DXComponents/Views/Layout/GridView","DS/W3DXComponents/Views/Layout/GridScrollView","DS/W3DXComponents/Views/Layout/PanelSlider/PanelSlider","DS/W3DXComponents/Views/Layout/ActionsView","DS/UIKIT/DropdownMenu","DS/W3DXComponents/Collections/ActionsCollection","DS/Core/ModelEvents","DS/WebappsUtils/WebappsUtils","i18n!DS/CfgXRules/assets/nls/Commons/VariabilityCriteriaSelector","css!DS/CfgXRules/Commons/Presenters/VCSTilePresenter"],function(p,r,j,h,g,d,q,n,k,s,l,f,m,o){var b=r.extend({init:function(u,t){t=t?t:{includePrarentWithChild:true};if(t&&t.parentModel){this.parentModel=t.parentModel}this.includePrarentWithChild=t.includePrarentWithChild;this.sortOptions={order:"ASC",attribute:"name"};this._parent(u,t)},getTitle:function(){var t="";if(this.parentModel){t=this.parentModel.get("name")}return t},getParentCollection:function(){var t=this;if(this.parentModel){t=this.parentModel.collection}return t},filterModel:function(A,x){var u=true;if(this.filterData){var w=A.get("name");var z=A.get("type");var t="";if(z=="Variant Class"||z=="Variants"){t="Variants"}else{if(z=="Options"){t="Options"}else{if(z=="Packs"){t="Packs"}}}if(t&&this.filterData.typeFilter&&this.filterData.typeFilter[t]==false){u=false}if(u&&this.filterData.searchValue&&!(w.toLowerCase()).contains(this.filterData.searchValue.toLowerCase())){u=false;var v=A.get("items");if(v&&UWA.is(v,"array")&&v.length>0){for(var y=0;y<v.length;y++){if(v[y].name&&(v[y].name.toLowerCase()).contains(this.filterData.searchValue.toLowerCase())){u=true;break}}}}}return u},getCollectionSortComponent:function(){var w=this;if(!this.sortComponent){var u=[{value:"name",text:m.SortByName},{value:"creator",text:m.SortByCreator},{value:"modifiedDate",text:m.SortByModifiedDate}];var x=UWA.createElement("div",{html:m.SortByName,styles:{display:"inline-block",color:"#368ec4",minWidth:"34px",padding:"0px 5px"}});new k({target:x,items:u,events:{onClick:function(z,y){console.log(y);if(y.value){x.setContent(y.text?y.text:y.value);w.sortOptions.attribute=y.value;w.sortCollection()}}}});var v=UWA.createElement("div",{styles:{display:"inline-block"}});var t=new n({collection:new s([{text:"sort",icon:"down",title:m.Sort,order:"ASC"}]),events:{onActionClick:function(A,z){var y=A.model.get("order");if(y=="ASC"){A.model.set("icon","up");A.model.set("order","DESC");y="DESC"}else{if(y=="DESC"){A.model.set("icon","down");A.model.set("order","ASC");y="ASC"}else{y="ASC";A.model.set("icon","down");A.model.set("order","ASC")}}A.render();w.sortOptions.order=y;w.sortCollection()}}});v.setContent(t.render());this.sortComponent=UWA.createElement("div",{html:[{tag:"span",html:m.SortBy+":"},x,v],styles:{display:"flex",alignItems:"center"}})}return this.sortComponent},sortCollection:function(){if(this.sortOptions){var u=this.sortBy(this.sortOptions.attribute);var t=true;if(this.sortOptions.order=="DESC"){t=false}this.dispatchEvent("onSortCollection",[u,t])}},getSelectedDictionary:function(x){var z={variantClasses:[],options:[],packs:[]};var A=[];var B=[];var w=[];var v=[];var t=[];if(UWA.is(x,"array")){t=x}else{if(x){t.push(x)}}var y=this;t.forEach(function(G){var I=G.get("type");switch(I){case"Variant Class":var C={id:G.get("id"),name:G.get("name"),variants:[]};var H=G.get("items");H.forEach(function(N){var M={id:N.id,name:N.name};C.variants.push(M)});A.push(C);break;case"Variants":if(y.includePrarentWithChild==true&&y.parentModel){var E=y.parentModel.get("id");var D=y.parentModel.get("name");var C;if(A){A.forEach(function(M){if(M.id==E){C=M}})}if(!C){C={id:E,name:D,variants:[{id:G.get("id"),name:G.get("name")}]};A.push(C)}else{C.variants.push({id:G.get("id"),name:G.get("name")})}}else{z.variants.push({id:G.get("id"),name:G.get("name")})}break;case"Options":var F={id:G.get("id"),name:G.get("name")};B.push(F);break;case"Packs":var J={id:G.get("id"),name:G.get("name")};w.push(J);break;case"ConfigurationFeature":var L={id:G.get("id"),name:G.get("name"),options:[]};var K=G.get("items");K.forEach(function(N){var M={id:N.id,name:N.name};L.options.push(M)});v.push(L);break;case"ConfigurationOption":if(y.includePrarentWithChild==true&&y.parentModel){var E=y.parentModel.get("id");var D=y.parentModel.get("name");var L;if(v){v.forEach(function(M){if(M.id==E){L=M}})}if(!L){L={id:E,name:D,variants:[{id:G.get("id"),name:G.get("name")}]};v.push(L)}else{L.variants.push({id:G.get("id"),name:G.get("name")})}}else{z.variants.push({id:G.get("id"),name:G.get("name")})}break}});if(A.length>0){z.variantClasses=A}if(B.length>0){z.options=B}if(w.length>0){z.packs=w}if(v.length>0){z.features=v}var u={clickedId:x.id,dictionary:z};return u},});var c=h.extend({name:"criteria-item-view",init:function(t){UWA.merge(t,{});this.selectChildWithParent=t.selectChildWithParent;this.selectParentWithChild=t.selectParentWithChild;this._parent(t);this.container.setAttribute("draggable",false)},setup:function(){this._parent.apply(this,arguments)},select:function(u,t){if(t==true){this._parent(u)}},render:function(t){this._parent.apply(this,arguments);this.updateSelection(t)},updateSelection:function(v){var x=v?true:false;v=v?v:this.model;if(v){var w=v.get("selectionState");var t=v.get("items");var u=v.collection.parentModel;if(w==1){this.select({silent:true},true);this.persistCheckbox();this.container.setAttribute("draggable",true);if(x){if(this.selectChildWithParent==true){if(this.itemListView){if(this.itemListView.nestedView.collection){this.itemListView.nestedView.collection.invoke("set","selectionState",1,{silent:true},true)}}else{if(t){t.forEach(function(y){y.selectionState=1})}}}if(this.selectParentWithChild==true){if(u){u.set("selectionState",1,{silent:true},true)}}}}else{if(w==0){this.unSelect({silent:true});this.unPersistCheckbox();this.container.setAttribute("draggable",false);if(x){if(this.selectChildWithParent==true){if(this.itemListView){if(this.itemListView.nestedView.collection){this.itemListView.nestedView.collection.invoke("set","selectionState",0,{silent:true},true)}}else{if(t){t.forEach(function(y){y.selectionState=0})}}}if(this.selectParentWithChild==true){if(u){if(!v.collection.findWhere({selectionState:1})){u.set("selectionState",0,{silent:true},true)}}}}}}}},isItemSelected:function(){var t=false;var u=this.model.get("selectionState");if(u==1){t=true}return t},getItemData:function(){var t={id:this.model.id,name:this.model.get("name")};return t},onRender:function(){this._parent.apply(this,arguments);if(this.model.get("items")){var t=this.container.getElement(".criteria-item-view-sub-container");if(t){var u=UWA.createElement("span",{"class":"fonticon fonticon-2x fonticon-right-open",styles:{height:"100%",width:"35px",position:"absolute",top:"0",right:"35px",display:"flex",margin:"auto",alignItems:"center",color:"#b4b6ba"}});u.inject(t)}}},});var e=d.extend({init:function(t,u){u=u?u:{};UWA.merge(u,{mapping:{title:"name"}});UWA.merge(t,{useInfiniteScroll:false,usePullToRefresh:false,layout:{column:1},itemView:c,selectionMode:"nullToMany",itemViewOptions:u});this.includePrarentWithChild=t.includePrarentWithChild;this._parent(t)},setup:function(){this._parent.apply(this,arguments);this.listenTo(this.collection,"onSortCollection",function(y,x){var v=y.length;for(var u=0;u<v;u++){var w=this.nestedView.getChildView(y[u]);if(w){var t=u+1;if(x==false){t=v-u}w.container.setStyle("order",t)}}console.log()})},onItemViewCheck:function(w,u,v){var t=v.target.checked;if(t){u.model.set("selectionState",1)}else{console.log();if(u.isItemSelected()){u.model.set("selectionState",0)}}},onRender:function(t){this._parent.call(this,t);var u=this;this.collection.sortCollection()},filter:function(){var t=function(u,v){if(u.itemListView){if(v){u.itemListView.show();u.itemListView.filter()}else{u.itemListView.hide()}}if(v){u.show()}else{u.hide()}};if(this.nestedView){this.nestedView.filter(undefined,t)}},getListData:function(){var u={};var v=this.nestedView;var t=this.includePrarentWithChild;if(v.visibleItems){v.visibleItems.forEach(function(z){var y=z.get("type");var C=function(E){var D;switch(E){case"Variant Class":D="variantClasses";break;case"Variants":D="variants";break;case"Options":D="options";break;case"Packs":D="packs";break;case"ConfigurationFeature":D="features";break;case"ConfigurationOption":D="options";break}return D};var A=C(y);if(A){if(!u[A]){u[A]=[]}var w;var x=v.getChildView(z);if(x){if(x.isItemSelected()){w=x.getItemData();if(x.itemListView){UWA.merge(w,x.itemListView.getListData())}else{if(z.get("items")){var B=z.get("items");B.forEach(function(E){var D=C(E.type);if(D){if(!w[D]){w[D]=[]}w[D].push({id:E.id,name:E.name})}})}}u[A].push(w)}else{if(x.itemListView){u[A].push(x.itemListView.getListData())}}}}})}return u}});var a=p.extend({className:"criteria-tile-view-container",init:function(D){var z=D.dictionaryJSON;this._modelEvents=new l();var B=j.extend({defaults:function(){return{selectionState:0}},setup:function(){this.addEvent("onChange:selectionState",function(F,H){if(F){var G={critType:F.get("type"),parent:{id:F.id,name:F.get("name")},child:undefined,viewId:"tile"};if(F.collection.parentModel){G.child=G.parent;G.parent={id:F.collection.parentModel.id,name:F.collection.parentModel.get("name")}}var E="selectionOnAdd";if(F.get("selectionState")==0){E="selectionOnRemove"}else{if(F.get("selectionState")==1){E="selectionOnAdd"}}w.publish(E,G,null)}})},set:function(G,H,E,F){if(F==true){E=E?E:{};E.silent=true;if(this.get(G)!=H){this._parent(G,H,E);this.dispatchEvent("onChange")}}else{this._parent(G,H,E)}}});var v=D.getParentWithChild?D.getParentWithChild:true;var x=D.getAllChildrenOnParentSelection?D.getAllChildrenOnParentSelection:true;var A=D.getParentOnChildSelection?D.getParentOnChildSelection:true;var y=D.countParentSelection?D.countParentSelection:false;this.currentCollection=new b(undefined,{model:B,includePrarentWithChild:v});this.dictionaryVersion="2.0";var t=this.getInputData(z);this.currentCollection.add(t);var w=this;this.actions=[];if(UWA.is(D.actions,"array")){D.actions.forEach(function(F){if(F.icon&&F.event){var E={text:F.title?F.title:"Action",fonticon:F.icon,handler:function(G){var H=G.model.collection.getSelectedDictionary(G.model);w.publish(F.event,H)}};w.actions.push(E)}})}var C=function(G,F){var E=true;if(G.collection&&UWA.is(G.collection.filterModel,"function")){G.collection.filterData=w.filterData;E=G.collection.filterModel(G,F)}return E};var u=function(E){var F=w.gridview.getListData();F=F?F:{};F._version=w.dictionaryVersion;E.dataTransfer.setData("Text",JSON.stringify(F))};this.gridview=new e({collection:this.currentCollection,filterer:C,includePrarentWithChild:v,events:{onSlideNext:function(E){w.slideNext(E)},onItemViewClick:function(I,H){var G=H.model;var F=G.get("items");if(F&&F.length>0){if(!H.itemListView){var E=new e({collection:new b(F,{parentModel:G,model:B,includePrarentWithChild:v}),filterer:C,includePrarentWithChild:v,},{contextualActions:w.actions,selectChildWithParent:x,selectParentWithChild:A,events:{onDrag:u}});E.render();E.filter();H.itemListView=E}this.dispatchEvent("onSlideNext",{name:G.get("name"),content:H.itemListView})}}}},{contextualActions:this.actions,selectChildWithParent:x,selectParentWithChild:A,events:{onDrag:u,}});this._parent.apply(this,arguments)},setup:function(){var t=this;this.subscribe("onContentFilterCriteriaChange",function(u){console.log(t);t.filterData=u.filterData;t.gridview.filter()});this.subscribe("selectionOnAdd",function(v){console.log("selectionOnAdd");var x=v.parent.id;if(v&&v.viewId!="tile"){var w=v.child?v.child.id:"";t.updateSelection(x,w,true)}if(this.dragListCollection&&this.gridview){var u=this.gridview.collection.get(x);if(u){this.dragListCollection.set(u,{remove:false})}}return});this.subscribe("selectionOnRemove",function(u){console.log("selectionOnRemove");var w=u.parent.id;if(u&&u.viewId!="tile"){var v=u.child?u.child.id:"";t.updateSelection(w,v,false)}if(this.dragListCollection){this.dragListCollection.remove(w)}return})},updateSelection:function(x,w,u){var t=this.gridview.collection.get(x);var v=u?1:0;if(t){if(w){console.log()}else{t.set("selectionState",v,{silent:true},true)}}},render:function(){var u=this;var w=UWA.createElement("div",{styles:{display:"inline-block"}});this.slideBackActionView=new n({collection:new s([{text:"back",icon:"left-open",title:m.Back,}]),events:{onActionClick:function(y,x){u.slideBack()},onShow:function(){if(!(u.currentPanelIndex||u.currentPanelIndex>0)){this.hide()}}}});w.setContent(this.slideBackActionView.render());this.itemTitleView=UWA.createElement("div");var t=UWA.createElement("div",{html:[w,this.itemTitleView],styles:{display:"flex",alignItems:"center",paddingRight:"10px"}});this.sortActionContainer=UWA.createElement("div",{html:this.currentCollection.getCollectionSortComponent(),styles:{marginLeft:"auto",textAlign:"right"}});var v=UWA.createElement("div",{styles:{width:"100%",display:"flex"},});v.inject(this.container);t.inject(v);this.sortActionContainer.inject(v);this.panelSlider=new q([this.gridview.render(),],{layout:[{size:100,className:"big"}]});this.dragListCollection=new b();this.dragImageContainer=new d({collection:this.dragListCollection,itemView:h,useInfiniteScroll:false,usePullToRefresh:false,itemViewOptions:{mapping:{title:"name"}}});this.dragImageContainer.render();this.dragImageContainer.container.addClassName("drag-item-container");this.panelSlider.render();this.panelSlider.inject(this.container);this.dragImageContainer.inject(this.container);this._parent(this,arguments);return this},subscribe:function(t,u){if(this._modelEvents){this._modelEvents.subscribe({event:t},u)}},publish:function(t,v,u){if(this._modelEvents){this._modelEvents.publish({event:t,data:v,context:u})}},slideNext:function(t){if(this.panelSlider){if(!this.currentPanelIndex){this.currentPanelIndex=0}if(t&&t.content){this.currentCollection=t.content.collection}this.panelSlider.slideNext(t);this.currentPanelIndex++;this.updatePanelDetails();this.slideBackActionView.show()}},slideBack:function(t){if(this.panelSlider&&this.currentPanelIndex&&this.currentPanelIndex>0){this.currentPanelIndex--;this.panelSlider.slideBack(t);if(this.currentPanelIndex==0){this.slideBackActionView.hide()}this.currentCollection=this.currentCollection.getParentCollection();this.updatePanelDetails()}},updatePanelDetails:function(){this.itemTitleView.setContent(this.currentCollection.getTitle());this.sortActionContainer.setContent(this.currentCollection.getCollectionSortComponent())},getDictionaryData:function(u){var t=[];if(u.variantClasses){u.variantClasses.forEach(function(v){t.push(UWA.merge({type:"variantClass"},v))})}if(u.options){u.options.forEach(function(v){t.push(UWA.merge({type:"option"},v))})}if(u.packs){u.packs.forEach(function(v){t.push(UWA.merge({type:"pack"},v))})}return t},getInputData:function(u){var t=[];if(u._version&&(u._version=="v2"||u._version=="V2"||u._version=="2.0")){this.dictionaryVersion="2.0";if(u.variantClasses){u.variantClasses.forEach(function(v){var w={};w.id=v.id;w.type="Variant Class";w.name=v.name;w.image=v.image?v.image:f.getWebappsAssetUrl("CfgBaseUX","icons/DefaultImage.png");w.attributes=[];w.kpis=[];w.actions=[];w.items=[];if(v.variants&&v.variants.length>0){v.variants.forEach(function(x){var y={};y.id=x.id;y.type="Variants";y.name=x.name;y.image=x.image?x.image:f.getWebappsAssetUrl("CfgBaseUX","icons/DefaultImage.png");y.attributes=[];y.kpis=[];y.actions=[];w.items.push(y)})}t.push(w)})}if(u.options){u.options.forEach(function(v){var w={};w.id=v.id;w.type="Options";w.name=v.name;w.image=v.image?v.image:f.getWebappsAssetUrl("CfgBaseUX","icons/DefaultImage.png");w.attributes=[];w.kpis=[];w.actions=[];t.push(w)})}if(u.packs){u.packs.forEach(function(v){var w={};w.id=v.id;w.type="Packs";w.name=v.name;w.image=v.image?v.image:f.getWebappsAssetUrl("CfgBaseUX","icons/DefaultImage.png");w.attributes=[];w.kpis=[];w.actions=[];t.push(w)})}}else{this.dictionaryVersion="1.0";if(u.features){u.features.forEach(function(v){var w={};w.id=v.id;w.type=v.type;w.name=v.name;w.image=v.image?v.image:f.getWebappsAssetUrl("CfgBaseUX","icons/DefaultImage.png");w.attributes=v.attributes;w.kpis=[];w.actions=[];w.items=[];if(v.options&&v.options.length>0){v.options.forEach(function(x){var y={};y.id=x.id;y.type=x.type;y.name=x.name;y.image=x.image?x.image:f.getWebappsAssetUrl("CfgBaseUX","icons/DefaultImage.png");y.attributes=x.attributes;y.kpis=[];y.actions=[];w.items.push(y)})}t.push(w)})}}return t}});return a});define("DS/CfgXRules/RuleExpressionComponent/LanguageInformationComponent/Model/LanguageInformationItemModel",["UWA/Class/Model"],function(b){var a=b.extend({title:null,description:null,elements:[]});return a});define("DS/CfgXRules/RuleExpressionComponent/AutoCompleteRuleComponent/Model/AutoCompleteRuleModel",["UWA/Class/Model"],function(a){var b=a.extend({editable:null,dictionary:null,currentExpression:null,withAdvancedOperator:null,});return b});define("DS/CfgXRules/Commons/Utils/CfgUtils",["DS/UIKIT/Mask","UWA/Drivers/Alone"],function(c,a){var b={};b.hasClass=function(e,d){return(" "+e.className+" ").indexOf(" "+d+" ")>-1};b.maskContainer=function(d){UWA.extendElement(d);c.mask(d)};b.unmaskContainer=function(d){UWA.extendElement(d);c.unmask(d)};b.mergeJSON=function(g,f){var d={};for(var e in g){d[e]=g[e]}for(var e in f){d[e]=f[e]}return d};b.selectHasOption=function(d,g){try{var f=0;for(f=0;f<d.childElementCount;f+=1){if(d.childNodes[f].getAttribute("value")===g){return true}}return false}catch(h){console.error("error while calling selectHasOption method - "+h.message);return false}};b.computeSubMenuCoordinate=function(j,q){var h=0;var g=0;var m=document.body.getBoundingClientRect().right;var k=document.body.getBoundingClientRect().bottom;var n=j.getBoundingClientRect().left;var e=j.getBoundingClientRect().top;var d=j.getBoundingClientRect().left;var f=j.getBoundingClientRect().bottom;var p=q.getBoundingClientRect().height;var o=q.getBoundingClientRect().width;if(p>k-f){g=e-p}else{g=f}if(o<m-n){h=n}else{h=m-o}var l={x:h,y:g};return l};b.arrayContainsElement=function(g,f){var d=-1;var e=0;for(e=0;e<g.length;e+=1){if(b.deepCompare(g[e],f)){return true}}return d};b.arrayContainAttrElement=function(g,f,d){var e=0;for(e=0;e<g.length;e+=1){if(g[e][d]==f[d]){return e}}return -1};return b});define("DS/CfgXRules/RuleExpressionComponent/LanguageInformationComponent/Model/LanguageInformationModelFTR",["i18n!DS/CfgXRules/assets/nls/LanguageInformationComponent/LanguageInformationComponent"],function(a){var b=[{title:"criteria_title",description:"",elements:["<span>"+a.criteria_Feature+" / "+a.criteria_option+" : </span>","<br>","<span class='spanitalic'>"+a.criteria_featureoption_explanation+"</span>","<br>","<span class='spanitalic'>"+a.example+" : </span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_VariantClassSample1+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_Variant1Sample+"</span></span>","<br>","<br>","<span>"+a.criteria_Feature+" / "+a.criteria_severalOptions+" : </span>","<br>","<span class='spanitalic'>"+a.criteria_severalOptions_explanation+"</span>","<br>","<span class='spanitalic'>"+a.example+" : </span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_VariantClassSample1+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_Variant1Sample+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_Variant1Sample2+"</span></span>","<br>","<br>","<span>"+a.criteria_Feature+" : </span>","<br>","<span class='spanitalic'>"+a.criteria_feature_explanation+"</span>","<br>","<span class='spanitalic'>"+a.example+" : </span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_VariantClassSample1+"</span></span>"]},{title:"standard_operators_title",description:"",elements:["<span>"+a.standard_operators_not+" : </span>","<span class='badge badge-default'><span class='badge-content'>NOT</span></span>","<span>&nbsp;"+a.expression1+"&nbsp;</span>","<br>","<span class='spanitalic'>"+a.not_explanation+"</span>","<br>","<span class='spanitalic'>"+a.example+" : </span>","<span class='badge badge-default'><span class='badge-content'>NOT</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_VariantClassSample1+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_Variant1Sample+"</span></span>","<br>","<br>","<span>"+a.standard_operators_and+" : </span>","<span>&nbsp;"+a.expression1+"&nbsp;</span>","<span class='badge badge-default'><span class='badge-content'>AND</span></span>","<span>&nbsp;"+a.expression2+"&nbsp;</span>","<br>","<span class='spanitalic'>"+a.and_explanation+"</span>","<br>","<span class='spanitalic'>"+a.example+" : </span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_VariantClassSample1+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_Variant1Sample2+"</span></span>","<span class='badge badge-default'><span class='badge-content'>AND</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_VariantClassSample2+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_Variant2Sample1+"</span></span>","<br>","<br>","<span>"+a.standard_operators_or+" : </span>","<span>&nbsp;"+a.expression1+"&nbsp;</span>","<span class='badge badge-default'><span class='badge-content'>OR</span></span>","<span>&nbsp;"+a.expression2+"&nbsp;</span>","<br>","<span class='spanitalic'>"+a.or_explanation+"</span>","<br>","<span class='spanitalic'>"+a.example+" : </span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_VariantClassSample2+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_Variant2Sample2+"</span></span>","<span class='badge badge-default'><span class='badge-content'>OR</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_VariantClassSample4+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_Variant3Sample4+"</span></span>","<br>","<br>","<span>"+a.standard_operators_parenthesis+" : </span>","<span class='badge badge-default'><span class='badge-content'>(</span></span>","<span>&nbsp;"+a.expression1+"&nbsp;</span>","<span class='badge badge-default'><span class='badge-content'>)</span></span>","<br>","<span class='spanitalic'>"+a.parenthesis_explanation+"</span>","<br>","<span class='spanitalic'>"+a.example+" : </span>","<span class='badge badge-default'><span class='badge-content'>(</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_VariantClassSample1+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_Variant1Sample2+"</span></span>","<span class='badge badge-default'><span class='badge-content'>OR</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_VariantClassSample2+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_Variant2Sample2+"</span></span>","<span class='badge badge-default'><span class='badge-content'>)</span></span>","<span class='badge badge-default'><span class='badge-content'>AND</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_VariantClassSample3+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_Variant3Sample1+"</span></span>"]},{title:"conditional_requirement_title",description:"",elements:["<span>"+a.conditional_requirement_imply+" : </span>","<span>&nbsp;"+a.expression1+"&nbsp;</span>","<span class='badge badge-default'><span class='badge-content'>IMPLY</span></span>","<span>&nbsp;"+a.expression2+"&nbsp;</span>","<br>","<span class='spanitalic'>"+a.imply_explanation+"</span>","<br>","<span class='spanitalic'>"+a.example+" : </span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_VariantClassSample2+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_Variant2Sample1+"</span></span>","<span class='badge badge-default'><span class='badge-content'>IMPLY</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_VariantClassSample4+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_Variant3Sample4+"</span></span>"]},{title:"co_dependency_title",description:"",elements:["<span>"+a.co_dependency_equivalent+" : </span>","<span>&nbsp;"+a.expression1+"&nbsp;</span>","<span class='badge badge-default'><span class='badge-content'>EQUIVALENT</span></span>","<span>&nbsp;"+a.expression2+"&nbsp;</span>","<br>","<span class='spanitalic'>"+a.equivalent_explanation+"</span>","<br>","<span class='spanitalic'>"+a.example+" : </span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_VariantClassSample3+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_Variant3Sample1+"</span></span>","<span class='badge badge-default'><span class='badge-content'>EQUIVALENT</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_VariantClassSample4+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_Variant3Sample4+"</span></span>"]},{title:"incompatibility_title",description:"",elements:["<span class='spanitalic'>"+a.incompatibility_explanation+"</span>","<br>","<span class='spanitalic'>"+a.example+" : </span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_VariantClassSample2+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_Variant2Sample2+"</span></span>","<span class='badge badge-default'><span class='badge-content'>IMPLY</span></span>","<span class='badge badge-default'><span class='badge-content'>NOT</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_VariantClassSample4+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_Variant3Sample4+"</span></span>"]}];return b});define("DS/CfgXRules/RuleExpressionComponent/LanguageInformationComponent/Model/LanguageInformationModelXPortfolio",["i18n!DS/CfgXRules/assets/nls/LanguageInformationComponent/LanguageInformationComponent"],function(a){var b=[{title:"criteria_title",description:"",elements:["<span>"+a.criteria_variantClass+" / "+a.criteria_variant+" : </span>","<br>","<span class='spanitalic'>"+a.criteria_variantclassvariant_explanation+"</span>","<br>","<span class='spanitalic'>"+a.example+" : </span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_VariantClassSample1+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_Variant1Sample+"</span></span>","<br>","<br>","<span>"+a.criteria_variantClass+" / "+a.criteria_variants+" : </span>","<br>","<span class='spanitalic'>"+a.criteria_variantclassvariants_explanation+"</span>","<br>","<span class='spanitalic'>"+a.example+" : </span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_VariantClassSample1+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_Variant1Sample+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_Variant1Sample2+"</span></span>","<br>","<br>","<span>"+a.criteria_variantClass+" : </span>","<br>","<span class='spanitalic'>"+a.criteria_variantClass_explanation+"</span>","<br>","<span class='spanitalic'>"+a.example+" : </span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_VariantClassSample1+"</span></span>","<br>","<br>","<span>"+a.criteria_option+" : </span>","<br>","<span class='spanitalic'>"+a.option_explanation+"</span>","<br>","<span class='spanitalic'>"+a.example+" : </span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_OptionSample+"</span></span>","<br>","<br>","<span>"+a.criteria_Pack+" : </span>","<br>","<span class='spanitalic'>"+a.pack_explanation+"</span>","<br>","<span class='spanitalic'>"+a.example+" : </span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_PackSample+"</span></span>"]},{title:"standard_operators_title",description:"",elements:["<span>"+a.standard_operators_not+" : </span>","<span class='badge badge-default'><span class='badge-content'>"+a.standard_operators_not+"</span></span>","<span>&nbsp;"+a.expression1+"&nbsp;</span>","<br>","<span class='spanitalic'>"+a.not_explanation+"</span>","<br>","<span class='spanitalic'>"+a.example+" : </span>","<span class='badge badge-default'><span class='badge-content'>"+a.standard_operators_not+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_VariantClassSample1+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_Variant1Sample+"</span></span>","<br>","<br>","<span>"+a.standard_operators_and+" : </span>","<span>&nbsp;"+a.expression1+"&nbsp;</span>","<span class='badge badge-default'><span class='badge-content'>"+a.standard_operators_and+"</span></span>","<span>&nbsp;"+a.expression2+"&nbsp;</span>","<br>","<span class='spanitalic'>"+a.and_explanation+"</span>","<br>","<span class='spanitalic'>"+a.example+" : </span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_VariantClassSample1+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_Variant1Sample2+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.standard_operators_and+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_VariantClassSample2+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_Variant2Sample1+"</span></span>","<br>","<br>","<span>"+a.standard_operators_or+" : </span>","<span>&nbsp;"+a.expression1+"&nbsp;</span>","<span class='badge badge-default'><span class='badge-content'>"+a.standard_operators_or+"</span></span>","<span>&nbsp;"+a.expression2+"&nbsp;</span>","<br>","<span class='spanitalic'>"+a.or_explanation+"</span>","<br>","<span class='spanitalic'>"+a.example+" : </span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_VariantClassSample2+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_Variant2Sample2+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.standard_operators_or+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_VariantClassSample4+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_Variant3Sample4+"</span></span>","<br>","<br>","<span>"+a.standard_operators_parenthesis+" : </span>","<span class='badge badge-default'><span class='badge-content'>(</span></span>","<span>&nbsp;"+a.expression1+"&nbsp;</span>","<span class='badge badge-default'><span class='badge-content'>)</span></span>","<br>","<span class='spanitalic'>"+a.parenthesis_explanation+"</span>","<br>","<span class='spanitalic'>"+a.example+" : </span>","<span class='badge badge-default'><span class='badge-content'>(</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_VariantClassSample1+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_Variant1Sample2+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.standard_operators_or+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_VariantClassSample2+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_Variant2Sample2+"</span></span>","<span class='badge badge-default'><span class='badge-content'>)</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.standard_operators_and+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_VariantClassSample3+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_Variant3Sample1+"</span></span>"]},{title:"conditional_requirement_title",description:"",elements:["<span>"+a.conditional_requirement_imply+" : </span>","<span>&nbsp;"+a.expression1+"&nbsp;</span>","<span class='badge badge-default'><span class='badge-content'>"+a.conditional_requirement_imply+"</span></span>","<span>&nbsp;"+a.expression2+"&nbsp;</span>","<br>","<span class='spanitalic'>"+a.imply_explanation+"</span>","<br>","<span class='spanitalic'>"+a.example+" : </span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_VariantClassSample2+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_Variant2Sample1+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.conditional_requirement_imply+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_VariantClassSample4+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_Variant3Sample4+"</span></span>"]},{title:"co_dependency_title",description:"",elements:["<span>"+a.co_dependency_equivalent+" : </span>","<span>&nbsp;"+a.expression1+"&nbsp;</span>","<span class='badge badge-default'><span class='badge-content'>"+a.co_dependency_equivalent+"</span></span>","<span>&nbsp;"+a.expression2+"&nbsp;</span>","<br>","<span class='spanitalic'>"+a.equivalent_explanation+"</span>","<br>","<span class='spanitalic'>"+a.example+" : </span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_VariantClassSample3+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_Variant3Sample1+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.co_dependency_equivalent+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_VariantClassSample4+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_Variant3Sample4+"</span></span>"]},{title:"incompatibility_title",description:"",elements:["<span class='spanitalic'>"+a.incompatibility_explanation+"</span>","<br>","<span class='spanitalic'>"+a.example+" : </span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_VariantClassSample2+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_Variant2Sample2+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.conditional_requirement_imply+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.standard_operators_not+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_VariantClassSample4+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+a.sample_Variant3Sample4+"</span></span>"]}];return b});define("DS/CfgXRules/RuleExpressionComponent/Model/RuleExpressionModel",["UWA/Class/Model"],function(a){var b=a.extend({editable:null,fullDictionary:null,autoCompleteRuleModel:null,languageInformation:null,solverKey:null});return b});define("DS/CfgXRules/Commons/Utils/CustomMultiSelect",["UWA/Class/Model","UWA/Class/Collection","UWA/Class"],function(f,e,d){var b=f.extend({defaults:function(){return{name:"",id:""}},init:function(g,j){var h=this;this._parent(g);return this}});var c=e.extend({model:b,});var a=d.extend({"default":{topView:{},collection:{},totalModels:0,},onAdd:function(){this.totalModels++;this.topView.dispatchEvent("onChangeSelection",[this.totalModels,this.collection])},onRemove:function(){this.totalModels--;this.topView.dispatchEvent("onChangeSelection",[this.totalModels,this.collection])},init:function(j,h){var g=this;this.topView=j;this.collection=new c();this.totalModels=0;if(h){this.collection.addEvent("onAdd",function(){g.totalModels++;g.topView.dispatchEvent("onChangeSelection",[g.totalModels,g.collection])});this.collection.addEvent("onRemove",function(){g.totalModels--;g.topView.dispatchEvent("onChangeSelection",[g.totalModels])})}this._parent();return this},addToCollection:function(g,j){if(j){if(this.collection.get(g.id)){if(!this.collection.get(g.id).get("childCollection")){var h=this;this.collection.get(g.id).set("childCollection",new c());this.collection.get(g.id).get("childCollection").addEvent("onAdd",function(){h.onAdd()});this.collection.get(g.id).get("childCollection").addEvent("onRemove",function(){h.onRemove()})}this.collection.get(g.id).get("childCollection").add(new b({id:j.id,name:j.name?j.name:j.get("name")}))}else{this.collection.add(new b({id:g.id,name:g.name?g.name:g.get("name")}));if(!this.collection.get(g.id).get("childCollection")){var h=this;this.collection.get(g.id).set("childCollection",new c());this.collection.get(g.id).get("childCollection").addEvent("onAdd",function(){h.onAdd()});this.collection.get(g.id).get("childCollection").addEvent("onRemove",function(){h.onRemove()})}this.collection.get(g.id).get("childCollection").add(new b({id:j.id,name:j.name?j.name:j.get("name")}))}}else{if(g){if(!this.collection.get(g.id)){this.collection.add(new b({id:g.id,name:g.name?g.name:g.get("name")}))}}}},removeFromCollection:function(g,h){if(h){if(this.collection.get(g.id)&&this.collection.get(g.id).get("childCollection")){this.collection.get(g.id).get("childCollection").remove(h.id)}}else{if(g){if(this.collection.get(g.id)){this.collection.remove(g.id)}}}},getSelectionCount:function(){return this.totalModels},getSelection:function(){return this.collection}});return a});define("DS/CfgXRules/Commons/Presenters/ViewSearch",["UWA/Class/View","DS/Core/ModelEvents","DS/UIKIT/Input/Toggle","DS/UIKIT/DropdownMenu","DS/UIKIT/Autocomplete","DS/UIKIT/Scroller","i18n!DS/CfgXRules/assets/nls/Commons/VariabilityCriteriaSelector","css!DS/CfgXRules/Commons/Presenters/ViewSearch.css"],function(b,j,f,a,g,c,h,d){var e=b.extend({init:function(l){var k=UWA.clone(l,false);var m=this;var n={searchTextBox:"",enableCache:true,attributeSelected:{},selectedAttrContainer:"",data:{searchValue:""}};UWA.merge(k,n);this.modelEvent=new j();this.options=k;if(k.enableCache){this.options.data.savedAttributes=[]}this.modelEvent.subscribe({event:"onSaveInCache"},function(p){if(k.enableCache){var q=m.isAlreadyPresent(m.options.data.savedAttributes,p);if(!q){if(p.searchValue.length>0){var o=(m.options.data.savedAttributes.length==0)?"25px":(((m.options.data.savedAttributes.length+1)*25)+"px");m.options.savedAttrContainer.setStyles({height:o});m.saveSearch(p.searchValue,p.searchAttribute)}}}});if(UWA.is(k.onSearch,"function")){this.modelEvent.subscribe({event:"OnSearchValueChange"},k.onSearch)}this._parent()},isAlreadyPresent:function(l,m){for(var k=0;k<l.length;k++){if((l[k].value.toString().toLowerCase()==m.searchValue.toString().toLowerCase())&&l[k].attribute==m.searchAttribute.id){return true}}return false},render:function(){var o=UWA.createElement("div",{"class":"searchContainer"});var n=UWA.createElement("div",{"class":"defaultContainer"}).inject(o);if(this.options.typeFilter!=undefined){var k=UWA.createElement("div",{"class":"checksContainer"}).inject(o);this.createCheckbox(this.options.typeFilter,k)}var m=UWA.createElement("div",{"class":"textboxContainer"}).inject(n);this.createSearchBox().inject(m);this.options.savedAttrContainer=(UWA.createElement("div",{"class":"selectedAttrContainer",styles:{"min-height":"20px","max-height":"75px","margin-left":"5px"}}).inject(m));this.options.savedAttrContainer.hide();this.options.selectedAttrContainer=(UWA.createElement("div",{"class":"selectedAttrContainer"}));this.options.savedAttrContainer.setContent(this.options.selectedAttrContainer);this.options.savedSearchScroll=new c({element:this.options.savedAttrContainer}).inject(m);if(this.options.attributeFilter!=undefined){var l=UWA.createElement("span",{"class":"fonticon fonticon-xx fonticon-menu attributeContainer"}).inject(n);this.createAttributeFilter(l)}return o},createSearchBox:function(){var k=this;this.options.searchTextBox=new g({placeholder:"Search",noResultsMessage:""});this.options.searchTextBox.elements.clear.addEvent("click",function(l){k.resetInput()});this.options.searchTextBox.elements.inputContainer.addClassName("search-input");this.getSearchBoxPlaceholder(this.options.attributeSelected,true);this.options.searchTextBox.elements.input.onkeyup=function(l){k.options.data.searchValue=l.target.value.trim();if(l.key=="Enter"){k.publishSaveInCache()}else{if(l.target.value.length>0){k.options.searchTextBox.elements.clear.show()}else{k.resetInput()}k.publishSearch()}};return this.options.searchTextBox},createAttributeFilter:function(k){var l=this;var m=new a({target:k,items:[],events:{onClick:function(o,n){l.setSelectedAttribute(m.items);l.publishSearch()}}});this.setSelectedAttribute(this.options.attributeFilter);m.addItem(this.options.attributeFilter);k.setStyles({color:"#368ec4",opacity:"1"});return m},saveSearch:function(p,m){var r=this;var s=0,l,k=p;var n=this.options.selectedAttrContainer.getChildren();if(m.text!=undefined){p=p+" ("+m.text+")"}for(var q=0;q<n.length;q++){l=n[q].textContent;if(l==p){s=1;break}}if(s==0){var t=UWA.createElement("div",{"class":"itemContainer"}).inject(this.options.selectedAttrContainer);var o=UWA.createElement("span",{text:p,"class":"itemSelectionSpan"}).inject(t);var u=UWA.createElement("span",{"class":"fonticon fonticon-xx fonticon-cancel clearSpan clearSelectionSpan"}).inject(t);this.options.selectedAttrContainer.show();this.options.savedAttrContainer.show();this.options.savedSearchScroll.getScrollbar("y",true);this.options.savedSearchScroll.show();this.options.savedSearchScroll.scrollToElement(t);this.options.data.savedAttributes.push({value:k,attribute:m.id});this.publishSearch()}n=this.options.selectedAttrContainer.getChildren();n.forEach(function(v){v.lastChild.addEvents({click:function(w){r.removeSavedSearch(w.currentTarget.parentElement);r.publishSearch()}})})},removeSavedSearch:function(n){var o=n.getChildren()[0].getText().split(" ");var m=this.options.selectedAttrContainer.getChildren();for(var l=0;l<m.length;l++){if(n.getChildren()[0].getText()==m[l].getText()){this.options.data.savedAttributes.splice(l,1)}}var k=((this.options.data.savedAttributes.length)*25)+"px";this.options.savedAttrContainer.setStyles({height:k});if(this.options.data.savedAttributes.length==0){this.options.savedAttrContainer.hide()}n.remove()},getSearchBoxPlaceholder:function(l,k){var m=h.Search;if(k==true&&l!=null){if(l.text!=undefined){m=m+" ("+l.text+")"}}this.options.searchTextBox.elements.input.placeholder=m},publishSaveInCache:function(){this.modelEvent.publish({event:"onSaveInCache",data:{searchValue:this.options.data.searchValue,searchAttribute:this.options.attributeSelected,}})},publishSearch:function(){this.modelEvent.publish({event:"OnSearchValueChange",data:this.options.data,})},resetInput:function(){this.options.data.searchValue="";this.options.searchTextBox.resetInput();this.getSearchBoxPlaceholder(this.options.attributeSelected,true);this.publishSearch()},setSelectedAttribute:function(l){this.options.data.searchAttribute="";this.options.attributeSelected=null;for(var k=0;k<l.length;k++){if(l[k].selectable==undefined){l[k]["selectable"]=true;l[k].name=l[k].id}if(l[k].selected==undefined){l[k]["selected"]=false}if(l[k].selected==true){this.options.attributeSelected=l[k];this.options.data.searchAttribute=l[k].name}}if(this.options.attributeSelected==null){this.options.data.searchAttribute=l[0].name;l[0].selected=true;this.options.attributeSelected=l[0]}this.getSearchBoxPlaceholder(this.options.attributeSelected,true)},createCheckbox:function(l,k){this.options.data.typeFilter={};var o=[];var n=this;for(var m=0;m<l.length;m++){if(l[m].selected==undefined){l[m].selected=false}o[m]=new f({type:"checkbox",className:"primary toggle-viewSearch",value:l[m].text,label:l[m].text,checked:l[m].selected,id:l[m].id,events:{onClick:function(p){n.options.data.typeFilter[p.target.id]=p.target.checked;n.publishSearch()},}}).inject(k);this.options.data.typeFilter[o[m].options.id]=o[m].options.checked}return o},getCurrentSearchText:function(){return this.options.data.searchValue},getCurrentAttribute:function(){if(this.options.attributeFilter){return this.options.attributeSelected}else{return undefined}},getTypeFilters:function(){if(this.options.typeFilter){return this.options.data.typeFilter}else{return undefined}}});return e});define("DS/CfgXRules/Commons/Utils/dictionaryCfgEnum",[],function(){var a={};a.PACK_NAME="pack";a.PACKCLASS_NAME="packclass";a.VARIANT_NAME="variant";a.VARIANTCLASS_NAME="variantclass";a.OPTION_NAME="option";a.BASELINE_NAME="baseline";a.PORTFOLIO_COMPONENT_NAME="portfoliocomponent";a.RULE_NAME="rule";return a});define("DS/CfgXRules/RuleExpressionComponent/Presenter/RuleExpressionComponentExpressionGenerator",["DS/CfgXRules/Commons/Utils/dictionaryCfgEnum","DS/CfgXRules/Commons/Utils/dictionaryCfgOperatorEnum"],function(a,b){var c={};c.generateRawExpression=function(m){var j="";if(m&&m.items&&m.items.length!==0){var e=0;var h=null;var l=null;var k=null;var n=null;var o=false;var d=false;var g=true;var f=false;for(e=0;e<m.items.length;e+=1){f=false;h=m.items[e].type;l=m.items[e+1]?m.items[e+1].type:null;k=m.items[e];n=m.items[e+1];if(h===a.VARIANTCLASS_NAME&&l===a.VARIANT_NAME){o=true;d=false;f=true}else{if(h===a.VARIANT_NAME&&l===a.VARIANT_NAME){o=true;d=true;f=true}else{o=false;d=false;f=false}}if(o&&d&&!g){j+=" OR "+k.id;f=true}if(o&&g&&d){j+="( "+k.id;g=false;f=true}else{if(o===false&&h===a.VARIANT_NAME&&g){j+=" "+k.id;f=true}else{if(o===false&&h===a.VARIANT_NAME){j+=" OR "+k.id+" )";f=true;g=true}}}if(o||f){}else{if(h===b.binary_operator||h===b.unary_operator||h===b.opening_separator||h===b.closing_separator){j+=" "+k.value}else{j+=" "+k.id}}}}j=j.replace(/  +/g," ");j=(j[0]===" ")?j.substr(1):j;return j};c.generateExpression=function(g){var d="";var h="EREV1:";var f="1.0.1";var j="";var e={};e.version=f;j=c.generateRawExpression(g);e.expression=j;d=h+JSON.stringify(e);return d};c.generateDependencies=function(h){var j=[];var f=0;var g=[];for(f=0;f<h.items.length;f+=1){if(h.items[f].type===a.VARIANTCLASS_NAME||h.items[f].type===a.VARIANT_NAME||h.items[f].type===a.OPTION_NAME||h.items[f].type===a.PACK_NAME){var d=h.items[f].id;if(g.indexOf(d)<0){g.push(d)}}}var e={};for(f=0;f<g.length;f+=1){e={};e.id=g[f];j.push(e)}return j};return c});define("DS/CfgXRules/RuleExpressionComponent/Presenter/RuleExpressionComponentWrappedExpressionGenerator",["DS/CfgXRules/Commons/Utils/dictionaryCfgEnum","DS/CfgXRules/Commons/Utils/dictionaryCfgOperatorEnum","DS/CfgXRules/RuleExpressionComponent/Presenter/RuleExpressionComponentExpressionGenerator"],function(c,d,e){var b=function(j,h){var g=0;for(g=0;g<h.features.length;g+=1){if(h.features[g].logicalId===j){return h.features[g]}}return null};var a=function(m,k){var l=k.features;var h=0,g=0;for(h=0;h<l.length;h+=1){for(g=0;g<l[h].options.length;g+=1){if(l[h].options[g].parentRelLogicalId===m){return l[h].options[g]}}}return null};var f={};f.generateFullExpressionForExpressionModeler=function(m,o){var g={};g.expression=e.generateExpression(m);var n=e.generateDependencies(m);g.dependencies=[];var j=null;var l=null;var k=0;for(k=0;k<n.length;k+=1){j=null;l=null;n[k]=[n[k]];n[k][0].logicalId=n[k][0].id;var h=null;if(b(n[k][0].id,o)){h=b(n[k][0].id,o).id}else{if(a(n[k][0].id,o)){h=a(n[k][0].id,o).parentRelId;l=a(n[k][0].id,o).id;j=null}else{if(a(n[k][0].id,o)){h=a(n[k][0].id,o).parentRelId;l=a(n[k][0].id,o).id;j=null}else{h=null}}}n[k][0].physicalid=h;if(l){n[k].push({logicalid:j,physicalid:l})}delete n[k][0].id;g.dependencies.push(n[k])}return g};return f});define("DS/CfgXRules/Commons/Utils/SolverServices",["DS/WAFData/WAFData","UWA/Utils","DS/CfgXRules/Commons/Utils/ServicesUrlsCatalog"],function(b,f,c){var a=c.solverUrlEndPoint;var d=c.solverUrlEndPoint_newLib;var e={};e.release=function(h,k){var j=false;if(k!=null){j=true}var g;if(h==null){h=""}b.handleRequest(a+"release",{method:"POST",async:j,type:null,timeout:300000,data:{solverKey:h},onComplete:function(l){g=l;if(k!=null){k(l)}},onFailure:function(l){console.log("failed while releasing the solver: "+l)},});return g};e.computeAnswer=function(s,t,j,q,p,n){var h=a+"computeAnswer";var l=(j!=null)?true:false;var r=null;var o;if(s.constructor==Object){o=JSON.stringify(s)}else{if(s.constructor==String){o=s}}t=(t==null)?"":t;var k=null;if(p){k=p}if(n){var m=(s._from)?s._from:"apps";var g={_from:m,_to:"solver",_request:"abortRequest",_data:""};b.handleRequest(h,{method:"POST",type:"application/ds-json",async:false,timeout:300000,onComplete:function(u){console.debug("Aborting solver")},data:{solverId:t,selectedCriteria:JSON.stringify(g)},onFailure:function(u){console.error("failed while trying to abort the solver")}})}b.handleRequest(h,{method:"POST",async:l,type:"application/ds-json",timeout:300000,data:{solverId:t,selectedCriteria:o},onComplete:function(u){r=u;if(j!=null){r=(typeof r==="string")?JSON.parse(r):r;j(r,q)}},onFailure:function(u){console.log("failed while computing the answer: "+u);if(j!=null){j(undefined,q)}r=undefined},});return r};return e});define("DS/CfgXRules/Commons/Utils/dictionaryCfgUtils",["DS/UIKIT/Mask","DS/CfgXRules/Commons/Utils/dictionaryCfgEnum","DS/CfgXRules/Commons/Utils/CfgUtils"],function(d,a,b){var c={};c.mergeRulesInMap=function(h){var e={};var g=0,f=0;for(f=0;f<h.length;f+=1){if(h[f].rules){for(g=0;g<h[f].rules.length;g+=1){e[h[f].rules[g].id]={};e[h[f].rules[g].id]={name:h[f].rules[g].name}}}}return e};c.mergeDicosInMap=function(m){var e={};var l=0,g=0,f=0;for(f=0;f<m.length;f+=1){var h=m[f];if(h.variantClasses){for(l=0;l<h.variantClasses.length;l+=1){if(!e[h.variantClasses[l].id]){e[h.variantClasses[l].id]={};e[h.variantClasses[l].id]={name:h.variantClasses[l].name,parent:null,type:a.VARIANTCLASS_NAME,isInherited:null,variants:[]}}for(g=0;g<h.variantClasses[l].variants.length;g+=1){e[h.variantClasses[l].variants[g].id]={};e[h.variantClasses[l].variants[g].id]={name:h.variantClasses[l].variants[g].name,parent:h.variantClasses[l].id,type:a.VARIANT_NAME,isInherited:h.variantClasses[l].variants[g].isInherited};e[h.variantClasses[l].id].variants.push(h.variantClasses[l].variants[g].id)}}}if(h.packs){for(l=0;l<h.packs.length;l+=1){e[h.packs[l].id]={};e[h.packs[l].id]={name:h.packs[l].name,parent:null,type:a.PACK_NAME,isInherited:h.packs[l].isInherited}}}if(h.options){for(l=0;l<h.options.length;l+=1){e[h.options[l].id]={};e[h.options[l].id]={name:h.options[l].name,parent:null,type:a.OPTION_NAME,isInherited:h.options[l].isInherited}}}}return e};c.mergeDictionaryMaps=function(k,j){var h=null;for(h in k){if(!j[h]){j[h]=k[h]}else{if(j[h].type===a.VARIANTCLASS_NAME){var e=k[h].variants;var l=j[h].variants;var f=e;var g=0;if(l){for(g=0;g<l.length;g+=1){if(e.indexOf(l[g])<0){e.push(l[g])}}}j[h].variants=e}}}return j};c.mergeDicosInMap2=function(l){var t={};var p=0,o=0,h=0,g=0,f=0;for(p=0;p<l.length;p+=1){var q=l[p];if(q.portfolioClasses){var s=q.portfolioClasses;o=0;for(o=0;o<s.length;o+=1){var e=s[o];if(e.portfolioComponents){h=0;for(h=0;h<e.portfolioComponents.length;h+=1){var r=e.portfolioComponents[h];t[r.id]={};t[r.id]={name:r.name,parent:e.id,type:a.PORTFOLIO_COMPONENT_NAME};if(r.variantClasses){for(g=0;g<r.variantClasses.length;g+=1){if(!t[r.variantClasses[g].id]){t[r.variantClasses[g].id]={};t[r.variantClasses[g].id]={name:r.variantClasses[g].name,parent:r.id,type:a.VARIANTCLASS_NAME,isInherited:null,variants:[]}}if(r.variantClasses[g].variants){for(f=0;f<r.variantClasses[g].variants.length;f+=1){t[r.variantClasses[g].variants[f].id]={};t[r.variantClasses[g].variants[f].id]={name:r.variantClasses[g].variants[f].name,parent:r.variantClasses[g].id,type:a.VARIANT_NAME,isInherited:r.variantClasses[g].variants[f].isInherited};t[r.variantClasses[g].id].variants.push(r.variantClasses[g].variants[f].id)}}}}if(r.options){for(g=0;g<r.options.length;g+=1){t[r.options[g].id]={};t[r.options[g].id]={name:r.options[g].name,parent:null,type:a.OPTION_NAME,isInherited:r.options[g].isInherited}}}if(r.packs){for(g=0;g<r.packs.length;g+=1){t[r.packs[g].id]={};t[r.packs[g].id]={name:r.packs[g].name,parent:null,type:a.PACK_NAME,isInherited:r.packs[g].isInherited}}}if(r.portfolioClasses&&r.portfolioClasses.length>0){t=c.mergeDictionaryMaps(t,c.mergeDicosInMap2([{portfolioClasses:r.portfolioClasses}]))}if(r.rules){for(g=0;g<r.rules.length;g+=1){t[r.rules[g].id]={};t[r.rules[g].id]={name:r.rules[g].name,parent:r.id,type:a.RULE_NAME,isInherited:null}}}}}}}else{if(q.variantClasses){for(o=0;o<q.variantClasses.length;o+=1){if(!t[q.variantClasses[o].id]){t[q.variantClasses[o].id]={};t[q.variantClasses[o].id]={name:q.variantClasses[o].name,parent:null,type:a.VARIANTCLASS_NAME,isInherited:null,variants:[]}}if(q.variantClasses[o].variants){for(f=0;f<q.variantClasses[o].variants.length;f+=1){t[q.variantClasses[o].variants[f].id]={};t[q.variantClasses[o].variants[f].id]={name:q.variantClasses[o].variants[f].name,parent:q.variantClasses[o].id,type:a.VARIANT_NAME,isInherited:q.variantClasses[o].variants[f].isInherited};t[q.variantClasses[o].id].variants.push(q.variantClasses[o].variants[f].id)}}}}if(q.options){for(o=0;o<q.options.length;o+=1){t[q.options[o].id]={};t[q.options[o].id]={name:q.options[o].name,parent:null,type:a.OPTION_NAME,isInherited:q.options[o].isInherited}}}if(q.rules){for(o=0;o<q.rules.length;o+=1){t[q.rules[o].id]={};t[q.rules[o].id]={name:q.rules[o].name,parent:null,type:a.RULE_NAME,isInherited:null}}}if(q.packs){for(o=0;o<q.packs.length;o+=1){t[q.packs[o].id]={};t[q.packs[o].id]={name:q.packs[o].name,parent:null,type:a.PACK_NAME,isInherited:q.packs[o].isInherited}}}}}return t};c.createDicoVersion1InMap=function(h){var f={};var g=0,e=0,j=0;if(h.features){for(e=0;e<h.features.length;e+=1){if(!f[h.features[e].id]){f[h.features[e].id]={};f[h.features[e].id]={name:h.features[e].displayValue,parent:null,type:a.VARIANTCLASS_NAME,isInherited:null,variants:[]}}if(h.features[e].options){for(j=0;j<h.features[e].options.length;j+=1){f[h.features[e].options[j].id]={};f[h.features[e].options[j].id]={name:h.features[e].options[j].displayValue,parent:h.features[e].id,type:a.VARIANT_NAME,isInherited:null};f[h.features[e].id].variants.push(h.features[e].options[j].id)}}}}return f};c.mergeDicosVersion1InMap=function(g){var f=0;var e={};for(f=0;f<g.length;f+=1){e=b.mergeJSON(e,c.createDicoVersion1InMap(g[f]))}return e};c.mergeDicosAnyVersionInMap=function(g){var h=c.mergeDicosInMap2(g);var f=c.mergeDicosVersion1InMap(g);var e=b.mergeJSON(f,h);return e};return c});define("DS/CfgXRules/RuleExpressionComponent/LanguageInformationComponent/Model/LanguageInformationModel",["UWA/Class/Collection","DS/CfgXRules/RuleExpressionComponent/LanguageInformationComponent/Model/LanguageInformationItemModel"],function(c,a){var b=UWA.Class.Collection.extend({model:a});return b});define("DS/CfgXRules/RuleExpressionComponent/AutoCompleteRuleComponent/Presenter/AutoCompleteRuleUtils",["DS/CfgXRules/Commons/Utils/dictionaryCfgEnum","DS/CfgXRules/Commons/Utils/dictionaryCfgOperatorEnum",],function(c,d){var a="S_OK";var b="S_FALSE";var e={};e.getDatasetItemFromId=function(h,k){var g=0,f=0;for(g=0;g<h.datasets.length;g+=1){for(f=0;f<h.datasets[g].items.length;f+=1){if(h.datasets[g].items[f].id_===k){return h.datasets[g].items[f]}}}return null};e.getDatasetItemFrom=function(h,k){var g=0,f=0;for(g=0;g<h.datasets.length;g+=1){for(f=0;f<h.datasets[g].items.length;f+=1){if(h.datasets[g].items[f].id_===k||(h.datasets[g].items[f].value&&(h.datasets[g].items[f].value.toUpperCase()===k.toUpperCase()))||(h.datasets[g].items[f].name&&(h.datasets[g].items[f].name.toUpperCase()===k.toUpperCase()))){return h.datasets[g].items[f]}}}return null};e.getFlatListOfIds=function(l){var g=[];var f;if(navigator.userAgent.indexOf("Trident")!==-1&&navigator.userAgent.indexOf("MSIE")===-1){f=l.dataTransfer.getData("text");f=JSON.parse(f)}else{f=l.dataTransfer.getData("text");f=JSON.parse(f)}if(!f){return[]}var k=0,h=0;if(f._version==="2.0"||f._version===2){if(f.variantClasses&&f.variantClasses!==[]){for(k=0;k<f.variantClasses.length;k+=1){if(f.variantClasses[k].variants&&f.variantClasses[k].variants.length>0){for(h=0;h<f.variantClasses[k].variants.length;h+=1){g.push(f.variantClasses[k].variants[h].id)}}else{g.push(f.variantClasses[k].id)}}}if(f.options&&f.options!==[]){for(k=0;k<f.options.length;k+=1){g.push(f.options[k].id)}}if(f.packs){for(k=0;k<f.packs.length;k+=1){g.push(f.packs[k].id)}}}else{if(f.features&&f.features!==[]){for(k=0;k<f.features.length;k+=1){if(f.features[k].options&&f.features[k].options.length>0){for(h=0;h<f.features[k].options.length;h+=1){g.push(f.features[k].options[h].id)}}else{g.push(f.features[k].id)}}}}return g};return e});define("DS/CfgXRules/RuleExpressionComponent/AutoCompleteRuleComponent/Presenter/AutoCompleteRuleChecks",["DS/CfgXRules/Commons/Utils/dictionaryCfgEnum","DS/CfgXRules/Commons/Utils/dictionaryCfgOperatorEnum","i18n!DS/CfgXRules/assets/nls/RuleExpressionComponent/RuleExpressionComponent"],function(e,j,h){var c="S_OK";var g="S_FALSE";var a="ERROR";var k={};k.dicoCheck=function(s,q,r){var u={};var t;u._rc=c;u.discrepancyElements=[];var l=[];for(t in s){if(s.hasOwnProperty(t)){l.push(t)}}for(t in q){if(q.hasOwnProperty(t)){l.push(t)}}if(r&&r.selectedItems){var n=0;for(n=0;n<r.selectedItems.length;n+=1){var o=r.selectedItems[n].id_;if(l.indexOf(o)===-1){u._rc=a;var m=r.selectedItems[n].value;var p=m+" "+h.isUnknown;u.discrepancyElements.push({id:o,idx:n,description:p})}}}return u};k.grammarCheck=function(y,w,x){var A={};A._rc=c;A.discrepancyElements=[];var u=false;var v=null;var l=false;var o=[];if(x&&x.selectedItems){var p=0;for(p=0;p<x.selectedItems.length;p+=1){u=false;v=null;l=false;var n=null;var s=x.selectedItems[p];var r=null;if(p>0){r=x.selectedItems[p-1]}if(!r){switch(s.type){case e.VARIANTCLASS_NAME:case e.OPTION_NAME:case e.PACK_NAME:case j.opening_separator:break;case j.unary_operator:u=(x.selectedItems.length===1)?true:false;break;default:u=true;break}}else{switch(s.type){case e.VARIANT_NAME:switch(r.type){case e.VARIANT_NAME:if(r.parent_!==s.parent_){u=true}break;case e.VARIANTCLASS_NAME:if(r.id_!==s.parent_){u=true}break;default:u=true;break}break;case e.VARIANTCLASS_NAME:case e.OPTION_NAME:case e.PACK_NAME:if(r.type!==j.opening_separator&&r.type!==j.unary_operator&&r.type!==j.binary_operator){u=true}break;case j.binary_operator:if(r.type!==e.PACK_NAME&&r.type!==e.OPTION_NAME&&r.type!==e.VARIANTCLASS_NAME&&r.type!==e.VARIANT_NAME&&r.type!==j.closing_separator){u=true}n=null;n=x.selectedItems[p+1];if(!u){if(!n||!n.id_){u=true;v="unknown"}else{if(n.type!==e.PACK_NAME&&n.type!==e.OPTION_NAME&&n.type!==e.VARIANTCLASS_NAME&&n.type!==j.opening_separator&&n.type!==j.unary_operator){u=true;v=n.type}}}break;case j.unary_operator:if(r.type!==j.binary_operator&&r.type!==j.opening_separator&&r.type!==j.unary_operator){u=true}n=null;n=x.selectedItems[p+1];if(!u){if(!n||!n.id_){u=true;v="unknown"}else{if(n.type!==e.PACK_NAME&&n.type!==e.OPTION_NAME&&n.type!==e.VARIANTCLASS_NAME&&n.type!==j.opening_separator&&n.type!==j.unary_operator){u=true;v=n.type}}}break;case j.opening_separator:if(r.type!==j.binary_operator&&r.type!==j.opening_separator&&r.type!==j.unary_operator){u=true}n=null;n=x.selectedItems[p+1];if(!u){if(!n||!n.id_){u=true;v="unknown"}else{if(n.type!==e.PACK_NAME&&n.type!==e.OPTION_NAME&&n.type!==e.VARIANTCLASS_NAME&&n.type!==j.opening_separator&&n.type!==j.unary_operator){u=true;v=n.type}}}break;case j.closing_separator:if(r.type!==e.PACK_NAME&&r.type!==e.OPTION_NAME&&r.type!==e.VARIANTCLASS_NAME&&r.type!==e.VARIANT_NAME&&r.type!==j.closing_separator){u=true}break;default:u=true;l=true;break}}if(u){o.push(p);A._rc=a;var t=s.id_;var z=(r&&r.value)?h.errorInContextOf+" : "+r.value:h.genericError;if(v){z=s.value+" "+h.isNotExpectingToBeFollowedBy+" "+v}if(h[v]){z=s.value+" "+h.isNotExpectingToBeFollowedBy+" "+h[v]}if(l){z=h.badge+" "+s.value+" "+h.isNotInPossibleCriteria}A.discrepancyElements.push({id:t,idx:p,description:z})}}var q=d(x);if(q._rc===a){A._rc=a;p=0;for(p=0;p<q.discrepancyElements.length;p+=1){var m=f(A,q.discrepancyElements[p].idx);if(m){m.description+="; "+q.discrepancyElements[p].description}else{A.discrepancyElements.push(q.discrepancyElements[p])}}}}return A};k.dicoAndGrammarCheckAndUpdateUI=function(l,p,q){var o=k.dicoCheck(l,p,q);var n=k.grammarCheck(l,p,q);var m={};m._rc=c;m._rc=(o._rc===a)?a:m._rc;m._rc=(n._rc===a)?a:m._rc;m.discrepancyElements=o.discrepancyElements.concat(n.discrepancyElements);b(m,q,"badge-error");return m};k.getGlobalErrorCounts=function(u,r,s){var m=k.dicoCheck(u,r,s);var l=k.grammarCheck(u,r,s);var p={};p._rc=c;p._rc=(m._rc===a)?a:p._rc;p._rc=(m._rc===a)?a:p._rc;var t=[];var o=0;for(o=0;o<m.discrepancyElements.length;o+=1){t.push(m.discrepancyElements[o].idx)}var q=[];for(o=0;o<l.discrepancyElements.length;o+=1){q.push(l.discrepancyElements[o].idx)}var n=t.concat(q);n=n.filter(function(v,w){return n.indexOf(v)===w});return n.length};var d=function(q){var t={};t._rc=c;t.discrepancyElements=[];var s=q.selectedItems.length;var n=[];var r=[];var o=0;var m=0,l=0;var p=-1;for(m=0;m<s;m+=1){if(q.selectedItems[m].type===j.opening_separator){o=1;for(l=m+1;l<s;l+=1){if(q.selectedItems[l].type===j.opening_separator){o+=1}else{if(q.selectedItems[l].type===j.closing_separator){o-=1}}if(o===0){n.push(m);r.push(l);break}}if(o!==0){t._rc=a;t.discrepancyElements.push({id:q.selectedItems[m].id_,idx:m,description:h.correspondingClosingOperatorNotFound})}}}for(m=0;m<s;m+=1){if(q.selectedItems[m].type===j.closing_separator&&r.indexOf(m)===-1){t._rc=a;t.discrepancyElements.push({id:q.selectedItems[m].id_,idx:m,description:h.correspondingOpeningOperatorNotFound})}}return t};var b=function(m,o,l){var n=0;for(n=0;n<o.badges.length;n+=1){o.badges[n].getContent().title="";o.badges[n].getContent().classList.remove(l);o.badges[n].getContent().classList.remove("badge-default");o.badges[n].getContent().classList.remove("badge-closable");o.badges[n].getContent().classList.remove("badge-selected");if(f(m,n)!=null){o.badges[f(m,n).idx].getContent().classList.add(l);o.badges[n].getContent().title=f(m,n).description}else{o.badges[n].getContent().classList.add("badge-default")}}return m.discrepancyElements};var f=function(m,l){var n=0;for(n=0;n<m.discrepancyElements.length;n+=1){if(m.discrepancyElements[n].idx===l){return m.discrepancyElements[n]}}return null};return k});define("DS/CfgXRules/RuleExpressionComponent/LanguageInformationComponent/Presenter/LanguageInformationPresenter",["DS/W3DXComponents/Views/Temp/TempItemView","DS/UIKIT/Accordion","DS/CfgXRules/RuleExpressionComponent/LanguageInformationComponent/Model/LanguageInformationModel","i18n!DS/CfgXRules/assets/nls/LanguageInformationComponent/LanguageInformationComponent","text!DS/CfgXRules/RuleExpressionComponent/LanguageInformationComponent/View/LanguageInformationTemplate.html","css!DS/CfgXRules/RuleExpressionComponent/LanguageInformationComponent/View/LanguageInformationComponent.css","css!DS/UIKIT/UIKIT.css"],function(g,a,f,e,b,c,h){var d=g.extend({name:"language-information-view",tagName:"div",template:function(){return b},setup:function(s){var r=this;var p=(s._givenModel)?s._givenModel:[];r._title=e.languageInformation_title;r._localModelEvent=s._localModelEvent;r.collection=new f(p);r.container.addClassName(this.getClassNames("-container"));var k={};k.className="styled filled";k.arrows=false;k.items=[];k.events={};k.events.onChange=function(t,j){r._localModelEvent.publish({event:"onResize",data:null})};var o=0,n=0;for(o=0;o<r.collection.length;o+=1){var q="";if(r.collection.at(o).get("description")!==""){q+=e[r.collection.at(o).get("description")]+"<br>"}for(n=0;n<r.collection.at(o).get("elements").length;n+=1){q+=r.collection.at(o).get("elements")[n]}k.items.push({title:e[r.collection.at(o).get("title")],content:q})}var l={};l.className="styled filled";l.arrows=false;l.items=[];var m='<span class="fonticon fonticon-info"></span>'+r._title;l.items.push({title:m,content:" ",accordion:k});l.events={};l.events.onChange=function(t,j){r._localModelEvent.publish({event:"onResize",data:null})};r._accordion=new a(l)},onRender:function(){var j=this;j._accordion.inject(j.container.getElement(".content-section"))}});return d});define("DS/CfgXRules/RuleExpressionComponent/AutoCompleteRuleComponent/Presenter/AutoCompleteRulePresenter",["DS/W3DXComponents/Views/Temp/TempItemView","DS/CfgXRules/RuleExpressionComponent/AutoCompleteRuleComponent/Presenter/AutoCompleteRuleChecks","DS/CfgXRules/RuleExpressionComponent/AutoCompleteRuleComponent/Presenter/AutoCompleteRuleUtils","DS/UIKIT/Autocomplete","DS/CfgXRules/Commons/Utils/dictionaryCfgUtils","DS/CfgXRules/Commons/Utils/dictionaryCfgEnum","DS/CfgXRules/Commons/Utils/dictionaryCfgOperatorEnum","DS/CfgXRules/RuleExpressionComponent/AutoCompleteRuleComponent/Model/AutoCompleteRuleModel","text!DS/CfgXRules/RuleExpressionComponent/AutoCompleteRuleComponent/View/AutoCompleteRuleTemplate.html","css!DS/CfgXRules/RuleExpressionComponent/AutoCompleteRuleComponent/View/AutoCompleteRuleComponent.css","css!DS/UIKIT/UIKIT.css"],function(g,j,m,n,b,k,o,e,d,a,p){var f=false;var c="S_OK";var l="S_FALSE";var h=g.extend({name:"autocomplete-rule-view",tagName:"div",template:function(){return d},setup:function(r){var u=this;u._mapDico={};u._mapOperator={};u._errorDicoOrGrammar=true;u._editable=r.editable;u.container.addClassName(this.getClassNames("-container"));u._context=null;u._badgeOnLeft=null;u._lastPosition=-1;u.model=new e(r);u._localModelEvent=r._localModelEvent;var s=function(y){if(y.clickedId){var z=m.getDatasetItemFromId(u._autocomplete,y.clickedId);if(z){var w=u._lastPosition;if(z.type===k.VARIANT_NAME){var x=u.getRelativeContext(w);if(x&&x.id_===z.parent_){u._autocomplete.onSelect(z,w);if(u._lastPosition>=0){u._lastPosition+=1}}else{if(w>=0){u._autocomplete.onSelect(z,w);if(u._lastPosition>=0){u._lastPosition+=1}u._autocomplete.onSelect(z.parentReference,w);if(u._lastPosition>=0){u._lastPosition+=1}}else{u._autocomplete.onSelect(z,w);if(u._lastPosition>=0){u._lastPosition+=1}u._autocomplete.onSelect(z.parentReference,u._autocomplete.badges.length-1);if(u._lastPosition>=0){u._lastPosition+=1}}}}else{u._autocomplete.onSelect(z,w);if(u._lastPosition>=0){u._lastPosition+=1}}var v=j.dicoAndGrammarCheckAndUpdateUI(u._mapDico,u._mapOperator,u._autocomplete);u._errorDicoOrGrammar=(v._rc!==c);u.updateExpression();if(u._localModelEvent){u._localModelEvent.publish({event:"onChangeExpression",data:null})}}else{console.log("object with id "+y.clickedId+" not found in dictionary")}}u._autocomplete.onHideSuggests()};if(u._localModelEvent&&u._editable){u._localModelEvent.subscribe({event:"onPlus"},s)}var q=function(y){if(!UWA.is(u._autocomplete.currentPosition,"number")){return(y.id_autocomplete!=="binary_operator_id"&&y.id_autocomplete!=="closing_separator_id")}var x=u.getRelativeBadgeAndIndexOnLeft(u._autocomplete.currentPosition);var v=true;if(!x){return(y.id_autocomplete!=="binary_operator_id"&&y.id_autocomplete!=="closing_separator_id")}switch(x.badge.type){case k.VARIANTCLASS_NAME:v=(y.id_autocomplete===x.badge.id_autocomplete||y.id_autocomplete==="binary_operator_id"||y.id_autocomplete==="closing_separator_id");break;case k.VARIANT_NAME:var w=u.getRelativeContext(u._autocomplete.currentPosition);if(w){v=(y.id_autocomplete===x.badge.parent_||y.id_autocomplete==="binary_operator_id"||y.id_autocomplete==="closing_separator_id")}break;case k.OPTION_NAME:case k.PACK_NAME:v=(y.id_autocomplete==="binary_operator_id"||y.id_autocomplete==="closing_separator_id");break;case"binary_operator":v=(y.id_autocomplete!=="binary_operator_id"&&y.id_autocomplete!=="closing_separator_id");break;case"unary_operator":v=(y.id_autocomplete!=="binary_operator_id"&&y.id_autocomplete!=="closing_separator_id");break;case"opening_separator":v=(y.id_autocomplete!=="binary_operator_id"&&y.id_autocomplete!=="closing_separator_id");break;case"closing_separator":v=(y.id_autocomplete==="binary_operator_id"||y.id_autocomplete==="closing_separator_id");break;default:break}return v};var t=function(v){var w=null;var x=null;v=v.filter(q);return v};u._autocomplete=new n({showSuggestsOnFocus:true,floatingSuggestions:true,multiSelect:true,itemMultiSelect:true,placeholder:"",noResultsMessage:false,closableItems:false,allowFreeInput:true,filterEngine:t,events:{onSelectBadge:function(w,v){u._autocomplete.onHideSuggests()},onUnSelectBadge:function(v){},onFocus:function(){},onClick:function(){},onClickOutside:function(){},onSelect:function(y){var x=document.activeElement;if(y.type===k.VARIANT_NAME){if(u.getRelativeContext(u._autocomplete.currentPosition)===null||u.getRelativeContext(u._autocomplete.currentPosition).type!==k.VARIANTCLASS_NAME||u.getRelativeContext(u._autocomplete.currentPosition).id_!==y.parent_){if(u._autocomplete.currentPosition!==-1){var w=u._autocomplete.currentPosition;u._autocomplete.onSelect(y.parentReference,w);u._autocomplete.currentPosition+=1}else{u._autocomplete.onSelect(y.parentReference,u._autocomplete.badges.length-1);u._autocomplete.currentPosition=-1}}u._autocomplete.onHideSuggests()}var v=j.dicoAndGrammarCheckAndUpdateUI(u._mapDico,u._mapOperator,u._autocomplete);u._errorDicoOrGrammar=(v._rc!==c);u.updateExpression();if(u._localModelEvent){u._localModelEvent.publish({event:"onChangeExpression",data:null})}u._autocomplete.onShowSuggests();x.focus()},onUnselect:function(w){var v=j.dicoAndGrammarCheckAndUpdateUI(u._mapDico,u._mapOperator,u._autocomplete);u._errorDicoOrGrammar=(v._rc!==c);u.updateExpression();if(u._localModelEvent){u._localModelEvent.publish({event:"onChangeExpression",data:null})}},onUpdateInputPosition:function(v){},onBlur:function(v){u._lastPosition=u._autocomplete.currentPosition}}});u.createMapDico();u.createDataSet();if(u._editable===false){u._autocomplete.disable()}u.createInitialExpression();u._autocomplete.onHideSuggests()},getRelativeContext:function(r){var x=this;var q=x.getRelativeBadgeAndIndexOnLeft(r);if(!q){return null}var v=q.badge;var s=q.index;if(v.type===k.VARIANT_NAME){var t=v.parent_;var u=s-1;var w=(u>=0);while(w){switch(x._autocomplete.selectedItems[u].type){case k.VARIANT_NAME:if(t!==x._autocomplete.selectedItems[u].parent_){return null}break;case k.VARIANTCLASS_NAME:if(t===x._autocomplete.selectedItems[u].id_){return x._autocomplete.selectedItems[u]}else{return null}break;default:return null}u--;if(u<0){w=false}}}else{return v}return null},getRelativeBadgeAndIndexOnLeft:function(q){var r=this;if(q===0){return null}if(q===-1){return(r._autocomplete.selectedItems.length>0)?{badge:r._autocomplete.selectedItems[r._autocomplete.selectedItems.length-1],index:r._autocomplete.selectedItems.length-1}:null}return{badge:r._autocomplete.selectedItems[q-1],index:q-1}},onRender:function(){var q=this;q._autocomplete.inject(q.container.getElement(".autocomplete-rule-content-section"));q.container.getElement(".autocomplete-rule-content-section").ondrop=function(x){var A=q;console.log("drop");x.preventDefault();var B=[];B=m.getFlatListOfIds(x);console.log(B);var s=null;var v=0;var w=x.target;var y=-1;var v=0;for(v=0;v<q._autocomplete.innerInputs.length;v+=1){if(w===q._autocomplete.innerInputs[v]){y=v;break}}var u=(y>=0)?y:q._autocomplete.badges.length;for(v=0;v<B.length;v+=1){s=B[v];if(s){var z=m.getDatasetItemFromId(q._autocomplete,s);if(z){if(z.type===k.VARIANT_NAME){var r=q.getRelativeContext(u);if(r&&r.id_===z.parent_){q._autocomplete.onSelect(z,u);u+=1}else{q._autocomplete.onSelect(z,u);q._autocomplete.onSelect(z.parentReference,u);u+=2}}else{q._autocomplete.onSelect(z,u);u+=1}var t=j.dicoAndGrammarCheckAndUpdateUI(q._mapDico,q._mapOperator,q._autocomplete);q._errorDicoOrGrammar=(t._rc!==c);q.updateExpression();if(q._localModelEvent){q._localModelEvent.publish({event:"onChangeExpression",data:null})}}else{console.log("object with id "+s+" not found in dictionary")}}else{console.log("object dropped not supported")}}q._autocomplete.onHideSuggests()};q.container.getElement(".autocomplete-rule-content-section").onpaste=function(x){var A=q;console.log("paste");var B="";var C="";if(x.clipboardData){B=x.clipboardData.getData("text/plain");C=B.split("|")}else{if(window.clipboardData){B=window.clipboardData.getData("Text");C=B.split("|")}}var v=x.target;var y=-1;var u=0;for(u=0;u<q._autocomplete.innerInputs.length;u+=1){if(v===q._autocomplete.innerInputs[u]){y=u;break}}var s=(y>=0)?y:q._autocomplete.badges.length;var t=0;for(t=0;t<C.length;t+=1){var z=m.getDatasetItemFrom(q._autocomplete,C[t]);if(z){q._autocomplete.onSelect(z,s)}else{q._autocomplete.onSelect({label:C[t],value:C[t],id_:null},s)}if(s>=0){s+=1}}var r=j.dicoAndGrammarCheckAndUpdateUI(q._mapDico,q._mapOperator,q._autocomplete);q._errorDicoOrGrammar=(r._rc!==c);q.updateExpression();if(q._localModelEvent&&C.length>0){q._localModelEvent.publish({event:"onChangeExpression",data:null})}x.preventDefault();var w=document.createEvent("Events");w.initEvent("keydown",true,true);w.which=39;w.keyCode=39;q._autocomplete.currentBadge.elements.container.focus();q._autocomplete.currentBadge.elements.container.dispatchEvent(w)}},createMapDico:function(){var q=this;q._mapDico=b.mergeDicosAnyVersionInMap([q.model.get("dictionary")])},createDataSet:function(){var w=this;var v=0;var u=w._mapDico;var z=null;var q=[];for(z in u){var t=null;if(u.hasOwnProperty(z)){switch(u[z].type){case k.VARIANT_NAME:break;case k.VARIANTCLASS_NAME:t={};t.name="datasetname"+u[z].name;t.id_autocomplete=z;t.id_=z;t.displayName=f;t.items=[];t.items.push({value:u[z].name,id_autocomplete:z,id_:z,type:k.VARIANTCLASS_NAME});t.items[0].items=[];for(v=0;v<u[z].variants.length;v+=1){var x=u[z].variants[v];t.items[0].items.push({parent_:z,value:u[x].name,id_:x,type:k.VARIANT_NAME})}break;case k.OPTION_NAME:case k.PACK_NAME:t={};t.name="datasetname"+u[z].name;t.displayName=f;t.items=[];t.id_autocomplete=z;t.items.push({value:u[z].name,id_:z,type:u[z].type});break;default:break}if(t!==null){q.push(t)}}}for(v=0;v<q.length;v+=1){w._autocomplete.addDataset(q[v])}var s={name:"datasetoperator",displayName:f,id_autocomplete:o.binary_operator_id,items:[{id_:o.and_id,value:"AND",type:o.binary_operator},{id_:o.or_id,value:"OR",type:o.binary_operator}]};w._mapOperator.and_id={value:"AND",type:o.binary_operator};w._mapOperator.or_id={value:"OR",type:o.binary_operator};if(w.model.get("withAdvancedOperator")===true){s.items.push({id_:o.imply_id,value:"IMPLY",type:o.binary_operator});s.items.push({id_:o.eqvlt_id,value:"EQUIVALENT",type:o.binary_operator});w._mapOperator.imply_id={value:"IMPLY",type:o.binary_operator};w._mapOperator.eqvlt_id={value:"EQUIVALENT",type:o.binary_operator}}w._autocomplete.addDataset(s);var y={name:"datasetnot",id_autocomplete:o.unary_operator_id,displayName:f,items:[{id_:o.not_id,value:"NOT",type:o.unary_operator}]};w._mapOperator.not_id={value:"NOT",type:o.unary_operator};w._autocomplete.addDataset(y);var A={name:"OpeningSeparators",id_autocomplete:o.opening_separator_id,displayName:f,items:[{id_:o.open_id,value:"(",type:o.opening_separator}]};w._mapOperator.open_id={value:"(",type:o.opening_separator};var r={name:"ClosingSeparators",id_autocomplete:o.closing_separator_id,displayName:f,items:[{id_:o.close_id,value:")",type:o.closing_separator}]};w._mapOperator.close_id={value:")",type:o.closing_separator};w._autocomplete.addDataset(A);w._autocomplete.addDataset(r)},updateExpression:function(){var v=this;var q=v._autocomplete.selectedItems;var s=0;var r=[];for(s=0;s<q.length;s+=1){var u={};u.id=q[s].id_?q[s].id_:"undefined";u.label=q[s].label?q[s].label:"undefined";u.type=q[s].type?q[s].type:"dummy";u.value=q[s].value?q[s].value:"undefined";r.push(u)}var t=v.model.get("currentExpression");t.items=r;v.model.set("currentExpression",t)},getExpression:function(){return this.model.get("currentExpression")},setExpression:function(q){this.model.set("currentExpression",q)},createInitialExpression:function(){var t=this;t._autocomplete.unselectAll();var v=t.model.get("currentExpression");var u=JSON.parse(JSON.stringify(v));if(v&&v.items&&v.items.length!==0){var r=0;for(r=0;r<u.items.length;r+=1){var s=m.getDatasetItemFromId(t._autocomplete,u.items[r].id);if(s){t._autocomplete.onSelect(s,t._autocomplete.badges.length)}else{t._autocomplete.onSelect({label:v.items[r].value,value:v.items[r].value,id_:null},t._autocomplete.badges.length);console.info(u.items[r].id)}}}var q=j.dicoAndGrammarCheckAndUpdateUI(t._mapDico,t._mapOperator,t._autocomplete);t._errorDicoOrGrammar=(q._rc!==c)},getErrorsCount:function(){var q=this;return j.getGlobalErrorCounts(q._mapDico,q._mapOperator,q._autocomplete)},isThereError:function(){return this._errorDicoOrGrammar}});return h});define("DS/CfgXRules/RuleExpressionComponent/Presenter/RuleExpressionPresenter",["DS/W3DXComponents/Views/Temp/TempItemView","DS/CfgXRules/RuleExpressionComponent/AutoCompleteRuleComponent/Presenter/AutoCompleteRulePresenter","DS/CfgXRules/RuleExpressionComponent/LanguageInformationComponent/Presenter/LanguageInformationPresenter","DS/CfgXRules/RuleExpressionComponent/Presenter/RuleExpressionComponentExpressionGenerator","DS/CfgXRules/Commons/Utils/SolverServices","DS/CfgXRules/Commons/Utils/dictionaryCfgUtils","DS/Core/ModelEvents","DS/UIKIT/Input/Button","DS/UIKIT/Input/ButtonGroup","DS/UIKIT/Spinner","DS/UIKIT/Popover","DS/W3DXComponents/Views/Layout/ActionsView","DS/W3DXComponents/Collections/ActionsCollection","DS/CfgXRules/RuleExpressionComponent/Model/RuleExpressionModel","i18n!DS/CfgXRules/assets/nls/RuleExpressionComponent/RuleExpressionComponent","text!DS/CfgXRules/RuleExpressionComponent/View/RuleExpressionTemplate.html","css!DS/CfgXRules/RuleExpressionComponent/View/RuleExpressionComponent.css"],function(n,g,q,r,a,s,k,j,l,e,o,m,t,b,p,h,f){var d=this;var c=n.extend({name:"rule-expression-view",tagName:"div",template:function(){return h},setup:function(D){var C=this;C._editable=(D.editable!==undefined&&D.editable!==null)?D.editable:true;C.model=new b(D);C._autoCompleteRulePresenter=null;C._languageInformationPresenter=null;C._actions=[];C._solverKey=D.solverKey;C._mapDico=s.mergeDicosInMap2([D.fullDictionary]);C._isInConflict=false;var A={text:"Solver computing",title:"Solver computing",icon:"progress-0",selected:false,handler:function(E){console.log("button should be not clickable")}};var v=null;var x={text:p.conflict_with_existing_rules,title:p.conflict_with_existing_rules,icon:"attention",selected:false,handler:function(G){if(v==null){UWA.extendElement(C._internalActionConflictContainer);v=new o({target:C._internalActionConflictContainer,position:"left",body:p.under_computation+"...",title:p.conflicting_additional_information});v.elements.container.setAttribute("tabindex","-1");v.elements.container.onblur=function(){v.hide()}}console.log("calculating conflict reason on "+C._solverKey+" "+r.generateExpression(C._autoCompleteRulePresenter.getExpression()));var E=C._getSolverObject(true);console.log(E);var F=function(L,K){C._internalActionConflictContainer.setStyle("pointerEvents","auto");C._internalActionLoaderContainer.classList.add("displaynone");v.show();v.elements.container.focus();if(L==undefined||(L!==""&&L._rc!=="OK"&&L._rc!=="S_FALSE"&&L._rc!=="Validity_KO")){if(L){(L._rc)?console.log(L._rc):console.log("error")}return}else{if(L===""){C._isInConflict=false;C._internalActionConflictContainer.classList.add("displaynone")}else{var I="";var J=0;for(J=0;J<L._data.conflictingRules.length;J+=1){if(J>0){I+=", "}var H=L._data.conflictingRules[J].substring(0,32);I+=(C._mapDico[H])?C._mapDico[H].name:L._data.conflictingRules[J]}(I!=="")?v.setBody(p.invalid_expression_due_to+" : "+I):v.setBody(p.get("invalid_expression_without_reason"))}}};C._internalActionConflictContainer.setStyle("pointerEvents","none");C._internalActionLoaderContainer.classList.remove("displaynone");v.setBody(p.under_computation+"...");v.show();v.elements.container.focus();if(C._solverKey&&E){a.computeAnswer(E,C._solverKey,F,[],null,true)}else{F("",null)}}};C._actions.push(A);C._actions.push(x);C._localModelEvent=new k();C._initialExpression={};if(D.autoCompleteRuleModel){C._initialExpression=JSON.parse(JSON.stringify(D.autoCompleteRuleModel))}var B={};B._givenModel=D.languageInformation?D.languageInformation:null;B._localModelEvent=C._localModelEvent;C._languageInformationPresenter=new q(B);if(D&&D.autoCompleteRuleModel&&D.fullDictionary){var y=D.autoCompleteRuleModel;y.dictionary=D.fullDictionary;y.withAdvancedOperator=true;y._localModelEvent=C._localModelEvent;y.solverKey=C._solverKey;y.editable=C._editable;C._autoCompleteRulePresenter=new g(y)}C.container.addClassName(this.getClassNames("-container"));C.createOKCancelActions(D);var z=function(){C.container.getElement(".ruleexpression-footer-content").classList.remove("displaynone");C._localModelEvent.publish({event:"onResize",data:null})};C._localModelEvent.subscribe({event:"onChangeExpression"},z);var u=function(){if(!C._internalActionConflictContainer){C._internalActionConflictContainer=C._actionView.container.getChildren()[1]}if(!C._internalActionLoaderContainer){C._internalActionLoaderContainer=C._actionView.container.getChildren()[0];C._internalActionLoaderContainer.setStyle("pointerEvents","none");C._internalActionLoaderContainer.setStyle("color","white");var G=new e().inject(C._internalActionLoaderContainer).show();C._internalActionLoaderContainer.classList.add("displaynone");G.elements.container.style.position="absolute"}var E=!C._autoCompleteRulePresenter.isThereError();if(E){var F=C._getSolverObject(false);var H=function(J,I){C._internalActionConflictContainer.setStyle("pointerEvents","auto");C._internalActionLoaderContainer.classList.add("displaynone");if(J==undefined||(J!==""&&J._rc!=="OK"&&J._rc!=="S_FALSE"&&J._rc!=="Validity_KO")){if(J){(J._rc)?console.log(J._rc):console.log("error")}C._internalActionConflictContainer.classList.add("displaynone");C._isInConflict=true;return}else{if(J===""){C._isInConflict=false;C._internalActionConflictContainer.classList.add("displaynone")}else{if(J._rc==="OK"||J._rc==="S_FALSE"){C._isInConflict=false;C._internalActionConflictContainer.classList.add("displaynone")}else{C._isInConflict=true;C._internalActionConflictContainer.classList.remove("displaynone")}}}};if(C._solverKey&&F){C._internalActionConflictContainer.setStyle("pointerEvents","none");C._internalActionLoaderContainer.classList.remove("displaynone");a.computeAnswer(F,C._solverKey,H,[],null,true)}else{H("",null)}}else{C._internalActionConflictContainer.classList.add("displaynone")}};C._localModelEvent.subscribe({event:"onChangeExpression"},u);C._localModelEvent.subscribe({event:"onCheckExpression"},u);var w=function(){var E=C.container.getElement(".ruleexpression-frame");var I=C.container.getElement(".ruleexpression-language-information").clientHeight;var H=C.container.getElement(".ruleexpression-header-content").clientHeight;var G=C.container.getElement(".ruleexpression-footer-content").clientHeight;var F=I+H+G+5;E.style.height="calc(100% - "+F+"px)"};C._localModelEvent.subscribe({event:"onResize"},w)},onRender:function(){var v=this;if(v._autoCompleteRulePresenter){v._autoCompleteRulePresenter.inject(v.container.getElement(".ruleexpression-frame"));v._autoCompleteRulePresenter.render()}if(v._languageInformationPresenter){v._languageInformationPresenter.inject(v.container.getElement(".ruleexpression-language-information"));v._languageInformationPresenter.render()}var u={collection:new t(v._actions),events:{onActionClick:function(y,x){var w=y.model.get("handler");if(UWA.is(w,"function")){w.call(y,v)}}}};v._actionView=new m(u);v._actionView.inject(v.container.getElement(".ruleexpression-header-content"));v._actionView.render();v._localModelEvent.publish({event:"onResize",data:null});v._OkCancel.inject(v.container.getElement(".ruleexpression-footer-content"));v._localModelEvent.publish({event:"onCheckExpression",data:null})},addAction:function(v){var u=this;u._actions.push(v)},createOKCancelActions:function(x){var z=this;var u=function(){z.container.getElement(".ruleexpression-footer-content").classList.add("displaynone");z._localModelEvent.publish({event:"onResize",data:null})};z._localModelEvent.subscribe({event:"onDone"},u);var B=new j({value:p.OK,className:"primary"});var A=function(){var C=JSON.parse(JSON.stringify(z.getExpression()));var D={};D.currentExpression={};D.currentExpression.items=C.items;z._initialExpression=JSON.parse(JSON.stringify(D));z._localModelEvent.publish({event:"onSave",data:z.getExpression()})};B.addEvent("onClick",A);var y=new j({value:p.cancel,className:"default"});var w=function(){z._localModelEvent.publish({event:"onDone",data:null});z._autoCompleteRulePresenter.setExpression(JSON.parse(JSON.stringify(z._initialExpression.currentExpression)));z._autoCompleteRulePresenter.createInitialExpression();z._localModelEvent.publish({event:"onCheckExpression",data:null})};y.addEvent("onClick",w);var v=new l({buttons:[B,y]});z._OkCancel=v},getExpression:function(){return this._autoCompleteRulePresenter.getExpression()},subscribe:function(u,v){this._localModelEvent.subscribe({event:u},v)},publish:function(u,v){this._localModelEvent.publish({event:u,data:v})},getErrorsCount:function(){return this._autoCompleteRulePresenter.getErrorsCount()},_getSolverObject:function(x){var A=this;var v=r.generateRawExpression(A._autoCompleteRulePresenter.getExpression());var B=(x)?"true":"false";var D={};var C={};var u={};u.expression=v;u.computeCause=B;if(v===""){return null}var w="checkExpressionValidity";var y="solverRule";var z="RuleExpressionPresenter";C._data=u;C._from=z;C._to=y;C._request=w;return C},isInConflict:function(){return this._isInConflict}});return c});define("DS/CfgXRules/Commons/Presenters/VCSMainContainer",["UWA/Class/View","DS/DataDragAndDrop/DataDragAndDrop","DS/W3DXComponents/Views/Layout/ActionsView","DS/W3DXComponents/Views/Item/ActionView","DS/UIKIT/Tooltip","DS/W3DXComponents/Collections/ActionsCollection","DS/UIKIT/DropdownMenu","DS/UIKIT/IconDropdown","DS/UIKIT/Input/Text","DS/UIKIT/Input/Button","DS/Controls/Toggle","DS/Core/ModelEvents","DS/CfgXRules/Commons/Presenters/VCSTablePresenter","DS/Utilities/Debug","DS/UIKIT/Dropdown","DS/CfgXRules/Commons/Presenters/ViewSearch","DS/CfgXRules/Commons/Presenters/VCSTilePresenter","text!DS/CfgXRules/assets/DataGridColumnAttributeMapping.json","i18n!DS/CfgXRules/assets/nls/Commons/VariabilityCriteriaSelector","css!DS/UIKIT/UIKIT.css","css!DS/CfgXRules/Commons/Presenters/VCSMainContainer"],function(s,e,r,b,u,y,m,j,t,l,o,p,c,k,v,g,q,n,f,w,a){var d=false;var h=JSON.parse(n);var x=s.extend({className:"criteria-selector-container",init:function(A){var B=this;A=A?A:{};this._currSearchText="";this.searchOptions={};this.showCloseAction=false;this.showSwitchViewAction=false;this.showKpiAction=false;this.actions=null;if(A.showCloseAction==true){this.showCloseAction=true}if(A.showSwitchViewAction==true){this.showSwitchViewAction=true}if(A.showKpiAction==true){this.showKpiAction=true}if(A.actions&&A.actions.length>0){this.actions=A.actions}if(A.dictionaryJSON&&!A.dictionaryJSON._version){A.dictionaryJSON._version="1.0"}this.criteriaTypes=[];var z=[];if(h){h[A.dictionaryJSON._version].forEach(function(E){z.push({text:f[E.text]?f[E.text]:E.text,dataIndex:(h[A.dictionaryJSON._version][0]===E)?"tree":E.attribute,valueAttribute:E.attribute,width:E.width?E.width:"auto",isEditable:E.isEditable?E.isEditable:false,isSortable:(E.isSortable==undefined)?true:E.isSortable,isHidden:E.isHidden?E.isHidden:false})})}if(A.dictionaryJSON._version=="1.0"){this.criteriaTypes.push({criteriaName:"Features"});this.criteriaTypes.push({criteriaName:"Options"})}else{this.criteriaTypes.push({criteriaName:"Variants"});this.criteriaTypes.push({criteriaName:"Options"});this.criteriaTypes.push({criteriaName:"Packs"})}var D={contentTreeOptions:{viewIdentifier:"table",isEditable:true,columns:(z.length>0)?z:[{text:"Title",dataIndex:"tree",width:200,},{text:"Type",dataIndex:"critType",width:"auto",isSortable:true}],resize:{rows:false,columns:true,},selectionData:{totalCount:0,displayCount:0,selectionCount:0},countParentSelection:false,}};var C={dictionaryJSON:(A.dictionaryJSON?A.dictionaryJSON:""),getAllChildrenOnParentSelection:true,getParentOnChildSelection:true,countParentSelection:false,actions:[{title:f.Add,icon:"plus",event:"onAddAction",}],};this.contentViews=[{id:"table",view:c,options:UWA.merge(D,C)},{id:"tile",view:q,options:UWA.merge({viewIdentifier:"tile"},C)}];this._parent(A)},render:function(){var A=this;var z=this.buildHeaderSection();z.inject(this.container);var B=this.buildSearchSection();B.inject(this.container);this.contentSection=this.buildContentView();this.contentSection.inject(this.container);this.initializeContentViews();this.subscribe("onDisplayAndSelCountUpdate",function(D){console.log("onDisplayAndSelCountUpdate callback: "+arguments.toString());var C=(((D.selectionCount>0)?" "+D.selectionCount+" "+f.Of+" ":"")+D.displayCount+" "+f.items);if(A.container.getElement(".selection-count")){A.container.getElement(".selection-count").setContent(C)}});this.switchView("table");return this},buildHeaderSection:function(){var I=UWA.createElement("div",{id:"headerCtrlSection","class":"header-ctrl-section"});var A=UWA.createElement("div",{id:"dispAndSelectionCountLabel","class":"selection-count",html:""});var E=this;I.addContent(A);var B=UWA.createElement("div",{id:"actions-section","class":"actions-section",styles:{display:"flex"}});var C=[{text:"Search",icon:"search",title:f.Search,handler:function(J){if(J.container.getElement(".search-section-div")){var K=J.container.getElement(".search-section-div").getStyle("display");if(K=="table"){J.container.getElement(".search-section-div").setStyle("display","none")}else{if(K=="none"){J.container.getElement(".search-section-div").setStyle("display","table")}}}this.toggleSelection()}}];var H={text:"kpi",icon:"chart-bar",title:"KPI",handler:function(J){console.log("kpi action.."+E);this.toggleSelection();if(!this.kpiSelectPanel){this.kpiSelectPanelElements={};this.kpiSelectPanelElements.selectAllCheck=new o({label:"(select all)",value:"all",mixedState:true,allowUnsafeHTMLLabel:false});this.kpiSelectPanelElements.kpis=[new o({label:"Take Rate",value:"takeRate",checkFlag:true,allowUnsafeHTMLLabel:false}),new o({label:"Total Cost",value:"totalCost",checkFlag:true,allowUnsafeHTMLLabel:false}),new o({label:"Complexity",value:"complexity",checkFlag:true,allowUnsafeHTMLLabel:false}),];var K=UWA.createElement("div",{html:this.kpiSelectPanelElements.kpis});this.kpiSelectPanel=new v({body:K,target:this.container,closeOnClick:false})}if(this.model.get("selected")==true){this.kpiSelectPanel.show()}else{this.kpiSelectPanel.hide()}}};var D={text:"switch",icon:"list",title:f.SwitchView,selectedView:"tableView",selected:true,handler:function(J){console.log("view action.."+E);var K=this.model.get("selectedView");if(K=="tableView"){this.model.set("selectedView","tileView");this.model.set("icon","layout");this.render();J.switchView("tile")}else{if(K=="tileView"){this.model.set("selectedView","tableView");this.model.set("icon","list");this.render();J.switchView("table")}}}};if(this.showKpiAction==true){C.push(H)}if(this.showSwitchViewAction==true){C.push(D)}var F=b.extend({onRender:function(){if(UWA.is(this.model.get("title"))&&this.model.get("title").trim().length>0){this.tooltip=new u({position:"bottom",target:this.container,body:this.model.get("title")})}this.container.setStyles({width:"auto"});if(this.model.get("selected")==true){this.container.addClassName("item");this.container.addClassName("selected")}},hideTooltip:function(){if(this.tooltip){this.tooltip.hide()}},toggleSelection:function(){var J=true;if(this.model.get("selected")||this.model.set("selected")==false){this.model.set("selected",false);this.container.removeClassName("item");this.container.removeClassName("selected")}else{this.model.set("selected",true);this.container.addClassName("item");this.container.addClassName("selected")}},});var G=new r({collection:new y(C),itemView:F,events:{onActionClick:function(K,J){var L=K.model.get("handler");if(UWA.is(L,"function")){L.call(K,E)}}}});var z=new r({collection:new y([{text:"close",icon:"cancel",title:f.Close}]),itemView:F,events:{onActionClick:function(K,J){K.hideTooltip();E.dispatchEvent("onCloseAction")}}});B.addContent(G.render());if(this.showCloseAction){B.addContent({tag:"div",html:"|",styles:{width:"auto"},"class":"fonticon fonticon-2x"});B.addContent(z.render())}I.addContent(B);return I},buildSearchSection:function(){var z=this;return this.getSearchComponent_new()},getSearchComponent_new:function(){var D=this;var B=[];var E=this.options.dictionaryJSON._version;if(E&&(E=="2.0")){B=[{id:"Variants",text:"Variants",selected:true},{id:"Options",text:"Options",selected:true},{id:"Packs",text:"Packs",selected:true}]}var A=UWA.createElement("div",{id:"searchDiv","class":"search-section-div"});var C={enableCache:false,typeFilter:B,onSearch:function(F){D.publishViewEvent("onContentFilterCriteriaChange",{filterData:F})}};var z=new g(C);C=this.searchOptions;z.render().inject(A);return A},buildContentView:function(){var A=this.options;var z=UWA.createElement("div",{id:"contentSection","class":"content-section"});return z},initializeContentViews:function(){if(this.contentViews&&this.contentViews.length>0){this._contentViews={};var z=this;this.contentViews.forEach(function(D,C){var B=D.options?D.options:{};var A=new D.view(B);A.render();if(C==0){z._contentViews.currentView=D.id;z._contentViews.view={}}z._contentViews.view[D.id]=A})}},switchView:function(z){if(this._contentViews){this.contentSection.setContent(this._contentViews.view[z]);this._contentViews.currentView=this._contentViews.view[z]}},publishViewEvent:function(A,B){if(this._contentViews){for(var C in this._contentViews.view){if(!(B.eventOrigin&&C===B.eventOrigin)){var z=this._contentViews.view[C];if(UWA.is(z.publish,"function")){z.publish(A,B,z)}}}}},subscribeViewEvent:function(B,C){if(this._contentViews){for(var z in this._contentViews.view){var A=this._contentViews.view[z];if(UWA.is(A.subscribe,"function")&&UWA.is(C,"function")){A.subscribe(B,C)}}}},subscribe:function(z,A){this.subscribeViewEvent(z,A)},changeView:function(z){this.switchView(z)},addCriteria:function(z){this.publishViewEvent("addCriteria",{item:z})},removeCriteria:function(z){this.publishViewEvent("removeCriteria",{item:z})},showAttribute:function(z){this.publishViewEvent("showAttribute",{attribute:z})},hideAttribute:function(z){this.publishViewEvent("hideAttribute",{attribute:z})},sortBy:function(A,z){this.publishViewEvent("sortBy",{attribute:A,isAccending:z})},hideCriteria:function(z){},showCriteria:function(z){},applyAction:function(A,z){},setActions:function(z){},});return x});define("DS/CfgXRules/Commons/Presenters/VariabilityCriteriaSelector",["UWA/Class","DS/CfgXRules/Commons/Presenters/SlideInPanel","DS/CfgXRules/Commons/Presenters/VCSMainContainer"],function(a,b,c){return a.extend({init:function(d){this.parentContainer=d.parentContainer;var e={dictionaryJSON:d.dictionaryJSON,showCloseAction:true,showSwitchViewAction:true,showKpiAction:false,actions:[]};this.viewContent=new c(e);this.viewContent.render();var f=d.actionView;this.slideinPanel=new b({isModal:(d.isModal)?(d.isModal):undefined,parentContainer:this.parentContainer,viewContent:this.viewContent,onShowPanel:function(){console.log("slide-in show action");if(f){f.container.addClassName("font-icon-selected")}},onHidePanel:function(){console.log("slide-in hide action");if(f){f.container.removeClassName("font-icon-selected")}},onOkAction:function(){console.log("slide-in ok action")},onCancelAction:function(){console.log("slide-in cancel action")}});this._parent.apply(this,arguments)},toggle:function(){this.slideinPanel.toggle()},subscribe:function(d,e){this.viewContent.subscribe(d,e)},changeView:function(d){this.viewContent.changeView(d)},addCriteria:function(d){this.viewContent.addCriteria(d)},removeCriteria:function(d){this.viewContent.removeCriteria(d)},showAttribute:function(d){this.viewContent.showAttribute(d)},hideAttribute:function(d){this.viewContent.hideAttribute(d)},sortBy:function(e,d){this.viewContent.sortBy(e,d)},hideCriteria:function(d){},showCriteria:function(d){},applyAction:function(e,d){},setActions:function(d){},})});