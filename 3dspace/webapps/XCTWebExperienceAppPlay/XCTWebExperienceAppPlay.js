define("DS/XCTWebExperienceAppPlay/managers/CXPWebEventListenerManager",["UWA/Core","DS/WebApplicationBase/W3AAManager","DS/Core/Events","DS/EP/EP","DS/EPTaskPlayer/EPTaskPlayerDefine","MathematicsES/MathVector2DJSImpl","DS/VisuEvents/EventsManager","DS/EPInputs/EPInputsDefine"],function(h,g,b,c,a,d,f){var e=g.extend({start:function(){var i=this;if(this._eventsArray){h.log("CXPWebEventListenerManager already started");return}var j=this._experienceBase.webApplication.frmWindow._3dViewer.canvas;var k=new c.MouseEnableEvent();c.EventServices.dispatchEvent(k);this._eventsArray=[];this._eventsArray.push(f.addEvent(document,"onMouseMove",function(n){if(n.from[0].view!==j){return}var m=new d();m.x=n.from[0].currentPosition.x;m.y=n.from[0].currentPosition.y;var p=new c.MouseMoveEvent();p.position=m;var o=new d();o.x=n.from[0].deltaPosition.x;o.y=n.from[0].deltaPosition.y;p.deltaPosition=o;i.dispatchEvent(p)}));this._eventsArray.push(f.addEvent(document,"onLeftMouseDown",function(m){if(m.from[0].view!==j){return}var n=new c.MousePressEvent();n.position.x=m.from[0].currentPosition.x;n.position.y=m.from[0].currentPosition.y;n.button=c.Mouse.EButton.eLeft;i.dispatchEvent(n)}));this._eventsArray.push(f.addEvent(document,"onLeftMouseUp",function(m){if(m.from[0].view!==j){return}var n=new c.MouseReleaseEvent();n.position.x=m.from[0].currentPosition.x;n.position.y=m.from[0].currentPosition.y;n.button=c.Mouse.EButton.eLeft;i.dispatchEvent(n)}));this._eventsArray.push(f.addEvent(document,"onLeftClick",function(m){if(m.from[0].view!==j){return}var n=new c.MouseClickEvent();n.position.x=m.from[0].currentPosition.x;n.position.y=m.from[0].currentPosition.y;n.button=c.Mouse.EButton.eLeft;i.dispatchEvent(n)}));this._eventsArray.push(f.addEvent(document,"onLeftDoubleClick",function(m){if(m.from[0].view!==j){return}var n=new c.MouseDoubleClickEvent();n.position.x=m.from[0].currentPosition.x;n.position.y=m.from[0].currentPosition.y;n.button=c.Mouse.EButton.eLeft;i.dispatchEvent(n)}));this._eventsArray.push(f.addEvent(document,"onMiddleMouseDown",function(m){if(m.from[0].view!==j){return}var n=new c.MousePressEvent();n.position.x=m.from[0].currentPosition.x;n.position.y=m.from[0].currentPosition.y;n.button=c.Mouse.EButton.eMiddle;i.dispatchEvent(n)}));this._eventsArray.push(f.addEvent(document,"onMiddleMouseUp",function(m){if(m.from[0].view!==j){return}var n=new c.MouseReleaseEvent();n.position.x=m.from[0].currentPosition.x;n.position.y=m.from[0].currentPosition.y;n.button=c.Mouse.EButton.eMiddle;i.dispatchEvent(n)}));this._eventsArray.push(f.addEvent(document,"onMiddleClick",function(m){if(m.from[0].view!==j){return}var n=new c.MouseClickEvent();n.position.x=m.from[0].currentPosition.x;n.position.y=m.from[0].currentPosition.y;n.button=c.Mouse.EButton.eMiddle;i.dispatchEvent(n)}));this._eventsArray.push(f.addEvent(document,"onMiddleDoubleClick",function(m){if(m.from[0].view!==j){return}var n=new c.MouseDoubleClickEvent();n.position.x=m.from[0].currentPosition.x;n.position.y=m.from[0].currentPosition.y;n.button=c.Mouse.EButton.eMiddle;i.dispatchEvent(n)}));this._eventsArray.push(f.addEvent(document,"onRightMouseDown",function(m){if(m.from[0].view!==j){return}var n=new c.MousePressEvent();n.position.x=m.from[0].currentPosition.x;n.position.y=m.from[0].currentPosition.y;n.button=c.Mouse.EButton.eRight;i.dispatchEvent(n)}));this._eventsArray.push(f.addEvent(document,"onRightMouseUp",function(m){if(m.from[0].view!==j){return}var n=new c.MouseReleaseEvent();n.position.x=m.from[0].currentPosition.x;n.position.y=m.from[0].currentPosition.y;n.button=c.Mouse.EButton.eRight;i.dispatchEvent(n)}));this._eventsArray.push(f.addEvent(document,"onRightClick",function(m){if(m.from[0].view!==j){return}var n=new c.MouseClickEvent();n.position.x=m.from[0].currentPosition.x;n.position.y=m.from[0].currentPosition.y;n.button=c.Mouse.EButton.eRight;i.dispatchEvent(n)}));this._eventsArray.push(f.addEvent(document,"onRightDoubleClick",function(m){if(m.from[0].view!==j){return}var n=new c.MouseDoubleClickEvent();n.position.x=m.from[0].currentPosition.x;n.position.y=m.from[0].currentPosition.y;n.button=c.Mouse.EButton.eRight;i.dispatchEvent(n)}));this._eventsArray.push(f.addEvent(document,"onMouseWheel",function(m){if(m.from[0].view!==j){return}var n=new c.MouseWheelEvent();n.position=c.Devices.getMouse().getPosition();n.wheelDeltaValue=m.gesture.delta;i.dispatchEvent(n)}));var l=new c.KeyboardEnableEvent();c.EventServices.dispatchEvent(l);this._eventsArray.push(f.addEvent(document,"onKeyDown",function(m){var n=new c.KeyboardPressEvent();n.key=m.gesture.key;i.dispatchEvent(n)}));this._eventsArray.push(f.addEvent(document,"onKeyUp",function(m){var n=new c.KeyboardReleaseEvent();n.key=m.gesture.key;i.dispatchEvent(n)}))},dispatchEvent:function(i){c.EventServices.dispatchEvent(i)},stop:function(){if(this._eventsArray){for(var j=this._eventsArray.length;j--;){f.removeEventFromToken(this._eventsArray[j]);this._eventsArray[j]=null}this._eventsArray=null}},GetType:function(){return"CXPWebEventListenerManager"}});return e});define("DS/XCTWebExperienceAppPlay/commands/XCTWebStopCmd",["UWA/Core","DS/ApplicationFrame/Command","DS/CAT3DExpModel/CAT3DXModel"],function(d,a,c){var b=a.extend({init:function(e){this._parent(e,{isAsynchronous:true})},beginExecute:function(){var g=this;var f=this.getFrameWindow();var e=f._experienceBase;var h=c.GetExperience();if(h){e.getManager("CXPWebPlayManager").stop(h).done(function(){g.end()})}},execute:function(){}});return b});define("DS/XCTWebExperienceAppPlay/interfaces/StuIPrototypeBuild",["UWA/Class","DS/WebComponentModeler/CATWebInterface"],function(c,b){var a=b.singleton({interfaceName:"StuIPrototypeBuild",required:{Get:function(){return undefined},Free:function(){}},optional:{}});return a});define("DS/XCTWebExperienceAppPlay/CXPWebRaytraceWrapper",[],function(){var a=function(){};a.prototype.setAperture=function(){};a.prototype.setExposure=function(){};a.prototype.setFocusDistance=function(){};a.prototype.setSpeed=function(){};a.prototype.setAutoFocusMode=function(){};a.prototype.setProduceVideo=function(){};a.prototype.shotSingleFrame=function(){};a.prototype.begin=function(){};a.prototype.end=function(){};return a});define("DS/XCTWebExperienceAppPlay/CXPWebViewer",["UWA/Core","DS/Visualization/ThreeJS_DS","DS/StuCore/StuContext","DS/StuMath/StuSphere","DS/StuMath/StuRay","DS/Visualization/PathElement","MathematicsES/MathsDef","DS/CATCXPModel/CATCXPRenderUtils","DS/StuRenderEngine/StuIntersection"],function(c,h,a,e,i,b,g,f){var d=c.Class.extend({_viewer:null,init:function(j){this._viewer=j},GetSize:function(k){if(k instanceof g.Vector2D){var j=this._viewer.canvas.getSize();k.x=j.width;k.y=j.height}else{c.log("StuViewer.GetSize ERROR : parameter is not a Vector2D !");k=null}},GetGlobalBoundingSphere:function(k){if(k instanceof a.Sphere){var j=this._viewer.getSceneBoundingSphere("show",true);k.center=j.center;k.radius=j.radius}else{c.log("StuViewer.GetGlobalBoundingSphere ERROR : parameter is not a STU.Sphere !");k=null}},GetRayFromPosition:function(m,l){if(!(l instanceof a.Ray)){c.log("StuViewer.GetRayFromPosition ERROR : ray parameter is not a STU.Ray !");l=null;return}var k=this._viewer.currentViewpoint.camera;var j=this._viewer.currentViewpoint.create3DRayFrom2DPoint(m,k);l.origin.x=j.origin.x;l.origin.y=j.origin.y;l.origin.z=j.origin.z;l.direction.x=j.direction.x;l.direction.y=j.direction.y;l.direction.z=j.direction.z},GetLineFromPosition:function(m,k){if(!(k instanceof g.Line)){c.log("StuViewer.GetLineFromPosition ERROR : ray parameter is not a DSMath.Line !");k=null;return}var l=this._viewer.currentViewpoint.camera;var j=this._viewer.currentViewpoint.create3DRayFrom2DPoint(m,l);k.origin.x=j.origin.x;k.origin.y=j.origin.y;k.origin.z=j.origin.z;k.direction.x=j.direction.x;k.direction.y=j.direction.y;k.direction.z=j.direction.z},PickFromPosition:function(s,k,n,m){if(!(k instanceof Array)){c.log("StuViewer.PickFromPosition ERROR : oIntersections parameter is not an Array !");k=null;return undefined}if(n){var o=new h.Vector2(s.x,s.y);var w=this._viewer.getMousePosition(o);var r=this._viewer.pick(w,"mesh",true);var x=r.path;if(x.length>=1){var p=f.getComponentsFromPathElement(r.path[0],true);if(p.length===1){var u=p[0].QueryInterface("StuIPrototypeBuild");var j=u.GetSync();var l=new a.Intersection();var v=new g.Point(r.position.x,r.position.y,r.position.z);l.setPoint(v);var q=new g.Vector3D(r.normal.x,r.normal.y,r.normal.z);l.setNormal(q);l.setActor(j);if(j.name){l.actorName=j.name}k.push(l)}}return k}else{var t=new a.Ray();this.GetRayFromPosition(s,t);return this.PickFromRay(t,k,n,m)}},PickFromRay:function(p,k,n){if(!(k instanceof Array)){c.log("StuViewer.PickFromRay ERROR : oIntersections parameter is not an Array !");k=null;return undefined}var u=new h.Ray();u.origin.set(p.getOrigin().x,p.getOrigin().y,p.getOrigin().z);u.direction.set(p.getDirection().x,p.getDirection().y,p.getDirection().z);var m=p.getLength();var r=this._viewer.castRay(u,null,"prim");for(var o=0;o<r.length;o++){if(r[o].distance<=m||m===0){var q=f.getComponentsFromPathElement(r[o].pathElement,true);if(q.length===1){var t=q[0].QueryInterface("StuIPrototypeBuild");var j=t.GetSync();if(this._isClickable(j)){var l=new a.Intersection();var v=new g.Point(r[o].point.x,r[o].point.y,r[o].point.z);l.setPoint(v);var s=new g.Vector3D(r[o].normal.x,r[o].normal.y,r[o].normal.z);l.setNormal(s);l.setActor(j);if(j.name){l.actorName=j.name}k.push(l);if(n===true){return k}}}}}return k},_isClickable:function(j){if(j.clickable){return j.parent instanceof a.Actor3D?this._isClickable(j.parent):true}else{return false}},PickFromLine:function(k,m,l){if(!(m instanceof Array)){c.log("StuViewer.PickFromLine ERROR : oIntersections parameter is not an Array !");m=null;return undefined}var j=new a.Ray();j.origin=k.origin;j.direction=k.direction;this.PickFromRay(j,m,l);return m},GetMousePosition:function(k){if(!(k instanceof h.Vector2)){c.log("StuViewer.GetMousePosition ERROR : pos parameter is not a THREE.Vector2!");k=null;return}var j=this._viewer.getMousePosition(new h.Vector2(0,0));k.x=j.x;k.y=j.y},SetMousePosition:function(){c.log("StuViewer.SetMousePosition WARNING : No Implementation !")},HideMouseCursor:function(){this._viewer.setCursor("")},ShowMouseCursor:function(){this._viewer.setCursor("auto")},HighlightDisplay:function(){c.log("StuViewer.HighlightDisplay WARNING : No Implementation !")},PreHighlightDisplay:function(){c.log("StuViewer.SetMousePosition WARNING : No Implementation !")},GetViewpointCoordinatesFromPixel:function(l,k){var j=this._viewer.currentViewpoint.create3DRayFrom2DPoint(l,k);return j.origin},Unproject:function(n,l){var k=new h.Matrix4();var m=new h.Matrix4();this._validateMatrix(l.matrixWorld,m);var j=new h.Matrix4();this._validateMatrix(l.projectionMatrix,j);k.multiplyMatrices(m,k.getInverse(j));return n.applyProjection(k)},_validateMatrix:function(j,l){for(var k=j.elements.length-1;k>=0;k--){var m=j.elements[k];if(isFinite(m)&&!isNaN(m)){l.elements[k]=m}}},ActivateDefaultNavigation:function(){this._viewer.currentViewpoint.control.setActive(true);this._viewer.setManipulators({activated:true});if(this._saveAuthCamOptions){this._viewer.currentViewpoint.moveTo(this._saveAuthCamOptions);this._saveAuthCamOptions=undefined}},DeactivateDefaultNavigation:function(){this._viewer.currentViewpoint.control.setActive(false);this._viewer.setManipulators({activated:false});this._saveAuthCamOptions={eyePosition:this._viewer.currentViewpoint.getCameraPosition().clone(),upDirection:this._viewer.currentViewpoint.getUpDirection().clone(),sightDirection:this._viewer.currentViewpoint.getSightDirection().clone(),distanceToTarget:this._viewer.currentViewpoint.getTargetDistance(),duration:500}}});return d});define("DS/XCTWebExperienceAppPlay/StuReticule",["UWA/Core"],function(b){var a=b.Class.extend({init:function(){},ShowArrow:function(){},SetOpacity:function(){},SetRotationInDegree:function(){},BuildWidget:function(){},Dispose:function(){}});return a});define("DS/XCTWebExperienceAppPlay/StuTriggerZoneManagerWeb",["UWA/Core","DS/StuCore/StuContext","DS/StuMath/StuBox","MathematicsES/MathsDef"],function(e,c,b,d){var a=e.Class.extend({__stu__Init:function(){this._uObjectID=0;this._triggerZones=[];this._triggeringObjects=[];this._interactionsMap={}},__stu__Dispose:function(){},__stu__RegisterTriggerZone:function(f){this._triggerZones.push({id:this._uObjectID,stuObject:f.getStuObject()});var g=this._uObjectID;this._uObjectID++;return g},__stu__RegisterTriggeringObject:function(f){this._triggeringObjects.push({id:this._uObjectID,stuObject:f.getStuObject()});var g=this._uObjectID;this._uObjectID++;return g},__stu__GetNbTriggerZones:function(){return this._triggerZones.length},__stu__GetNbTriggeringObjects:function(){return this._triggeringObjects.length},__stu__UnRegisterTriggerZone:function(g){var f=this._triggerZones.map(function(h){return h.id}).indexOf(g);if(f>=0){this._triggerZones.splice(f,1)}},__stu__UnRegisterTriggeringObject:function(g){var f=this._triggeringObjects.map(function(h){return h.id}).indexOf(g);if(f>=0){this._triggeringObjects.splice(f,1)}},__stu__Run:function(){this.refreshTransform(this._triggerZones);this.refreshTransform(this._triggeringObjects);this._computeInteractions()},refreshTransform:function(g){for(var f=0;f<g.length;f++){var h=g[f].stuObject.getTransform();if(!g[f].transform){g[f].transfoChanged=true}else{g[f].transfoChanged=this.areTransfoEqual(g[f].transform,h)}g[f].transform=h;if(g[f].transfoChanged){this.refreshBB(g[f]);this.refreshOBBCornerPoints(g[f])}}},refreshBB:function(f){var g=new b();f.stuObject.StuIRepresentation.GetBoundingBox(g,f.transform,0);f.bb=g},refreshOBBCornerPoints:function(g){var k=new b();g.stuObject.StuIRepresentation.GetOrientedBoundingBox(k,{orientation:g.transform,excludeChildren:false},g.transform);var l=k.high.x-k.low.x;var j=k.high.y-k.low.y;var f=k.high.z-k.low.z;var m=[];var h;for(h=0;h<4;h++){m[h]=k.low.clone()}for(h=0;h<4;h++){m[h+4]=k.high.clone()}m[1].x+=l;m[2].y+=j;m[3].z+=f;m[4].x-=l;m[5].y-=j;m[6].z-=f;for(h=0;h<8;h++){m[h].applyTransformation(g.transform)}g.obbCornerPoints=m},_computeInteractions:function(){for(var g=0;g<this._triggerZones.length;g++){for(var f=0;f<this._triggeringObjects.length;f++){if((this._triggerZones[g].transfoChanged)||(this._triggeringObjects[f].transfoChanged)){this._computeInteraction(this._triggerZones[g],this._triggeringObjects[f])}}}},_computeInteraction:function(i,h){var g=this.isIntersectByBoundingBox(i.bb,h.bb);if(g!==-1){g=this.isIntersectByOrientedBoundingBox(i.obbCornerPoints,h.obbCornerPoints)}var f;if(e.is(this._interactionsMap[i.id])&&e.is(this._interactionsMap[i.id][h.id])){f=this._interactionsMap[i.id][h.id]}else{f=-1}if(f!==g){if((f<0)&&(g>=0)){c.TriggerZoneManager.getInstance().onTriggerZoneEntry(i.id,h.id)}if((f>=0)&&(g<0)){c.TriggerZoneManager.getInstance().onTriggerZoneExit(i.id,h.id)}if((g>0)&&(f<=0)){c.TriggerZoneManager.getInstance().onTriggerZoneInclusion(i.id,h.id,g)}if((g<=0)&&(f>0)){c.TriggerZoneManager.getInstance().onTriggerZoneEndInclusion(i.id,h.id,g)}}if(!e.is(this._interactionsMap[i.id])){this._interactionsMap[i.id]={}}this._interactionsMap[i.id][h.id]=g},isIntersectByBoundingBox:function(g,f){if(g.high.x<f.low.x||g.high.y<f.low.y||g.high.z<f.low.z||f.high.x<g.low.x||f.high.y<g.low.y||f.high.z<g.low.z){return -1}return 0},isIntersectByOrientedBoundingBox:function(q,k){var o=[];var m=[];var h;for(h=0;h<8;h++){o.push(new d.Vector3D(q[h].x,q[h].y,q[h].z));m.push(new d.Vector3D(k[h].x,k[h].y,k[h].z))}var l=[];var p=[];for(h=1;h<=3;h++){l.push(d.Vector3D.sub(o[h],o[0]));p.push(d.Vector3D.sub(m[h],m[0]))}var f=-1;for(h=0;h<3;h++){f=this.projectionsAreIntersected(o,m,l[h],f);if(f<0){break}}if(f>=0){for(h=0;h<3;h++){f=this.projectionsAreIntersected(o,m,p[h],f);if(f<0){break}}}if(f>=0){for(h=0;h<3;h++){for(var g=0;g<3;g++){var n=l[h].clone().cross(p[g]);f=this.projectionsAreIntersected(o,m,n,f);if(f>=0){break}}}}return f},projectionsAreIntersected:function(n,l,r,s){if(r.isEqual(new d.Vector3D(0,0,0),0.000001)){return s}var f=d.normalize(r);var m=Number.MAX_VALUE;var q=-Number.MAX_VALUE;var j=Number.MAX_VALUE;var o=-Number.MAX_VALUE;for(var k=0;k<8;k++){var h=n[k].dot(f);var p=l[k].dot(f);m=(h<m)?h:m;q=(h>q)?h:q;j=(p<j)?p:j;o=(p>o)?p:o}var g;if(s!==0){if(j<m&&o>q&&(s===-1||s===1)){g=1}else{if(m<j&&q>o&&(s===-1||s===2)){g=2}else{g=0}}}else{g=s}if(q<j||m>o){return -1}else{return g}},areTransfoEqual:function(j,h){var f=j.getCoefficients();var k=h.getCoefficients();for(var g=0;g<12;++g){if(Math.abs(f[g]-k[g])>0.000001){return true}}return false}});return a});define("DS/XCTWebExperienceAppPlay/commands/XCTWebPlayCmd",["UWA/Core","DS/ApplicationFrame/Command","DS/CAT3DExpModel/CAT3DXModel"],function(d,b,c){var a=b.extend({init:function(e){this._parent(e,{isAsynchronous:true})},beginExecute:function(){var g=this;var f=this.getFrameWindow();var e=f._experienceBase;var h=c.GetExperience();if(h){e.getManager("CXPWebPlayManager").play(h).done(function(){g.end()})}},execute:function(){}});return a});define("DS/XCTWebExperienceAppPlay/StuUIBinder",["UWA/Core"],function(b){var a=b.Class.extend({fillProperties:function(){}});return a});define("DS/XCTWebExperienceAppPlay/CXPWebViewpoint",["UWA/Core","DS/Visualization/ThreeJS_DS"],function(c,b){var a=c.Class.extend({_viewer:null,init:function(d){this._viewpoint=d},__stu__IsLocked:function(){return 0},__stu__SetAngle:function(d){this._viewpoint.setAngle(d*2)},__stu__SetViewpoint:function(e,g,d){var h=new b.Vector3(d.x,d.y,d.z);var f=new b.Vector3(g.x,g.y,g.z);this._viewpoint.moveTo({eyePosition:e,sightDirection:f,upDirection:h})},__stu__SetClippingValue:function(e,d){this._viewpoint.camera.near=e;this._viewpoint.camera.far=d},__stu__SetProjectionType:function(d){this._viewpoint.setProjectionType(d)},__stu__SetZoom:function(h){var g=this._viewpoint.camera;var f=(g.right-g.left)/(2*h);var e=(g.top-g.bottom)/(2*h);var d=(g.right+g.left)/2;var i=(g.top+g.bottom)/2;g.projectionMatrix.makeOrthographic(d-f,d+f,i+e,i-e,g.near,g.far)},__stu__SetFocusDistance:function(d){this._viewpoint.setTargetDistance(d)}});return a});define("DS/XCTWebExperienceAppPlay/StuHMDWrapper",["DS/StudioIV/StuHMDWrapper"],function(a){a.prototype.setInteractionCtxTransform=function(){};a.prototype.getInteractionCtxTransform=function(){};a.prototype.deactivateMainViewerRefresh=function(){};a.prototype.activateMainViewerRefresh=function(){};a.prototype.setRepresentationVisibility=function(){};a.prototype.start=function(){}});define("DS/XCTWebExperienceAppPlay/CAT3DXModelFactoryPlay",["UWA/Core","DS/CAT3DExpModel/CAT3DXModelFactory","DS/CAT3DExpModel/interfaces/CATI3DExperienceObject","DS/CAT3DExpModel/CAT3DXJSONReader"],function(e,c,d,a){var b=c.extend({LoadExperience:function(j,i,h){var g=this;var f=e.Promise.deferred();j.resolveLinkAsStream(i).then(function(l){var k=new FileReader();k.onloadend=function(o){var m=new a(g,g._factory._experienceBase.getManager("CAT3DXLinkManager"));var n=JSON.parse(o.target.result);if(!e.is(n)){f.reject("invalid string")}m.read(n,j).then(function(p){if(e.is(p)&&p.GetType()==="CXPExperience_Spec"){f.resolve(p)}else{f.reject("Invalid JSON"+h)}})["catch"](function(p){f.reject(p)})};k.readAsText(l)})["catch"](function(k){f.reject(k)});return f.promise},CloseExperience:function(){var f=this.GetExperience();f.destroy();return e.Promise.resolve()}});return b});define("DS/XCTWebExperienceAppPlay/commands/XCTWebPauseCmd",["UWA/Core","DS/ApplicationFrame/Command","DS/CAT3DExpModel/CAT3DXModel"],function(d,a,b){var c=a.extend({init:function(e){this._parent(e,{isAsynchronous:false})},beginExecute:function(){var f=this.getFrameWindow();var e=f._experienceBase;var g=b.GetExperience();if(g){e.getManager("CXPWebPlayManager").pause(g)}},execute:function(){}});return c});define("DS/XCTWebExperienceAppPlay/CXPWebiVWrapper",[],function(){var a=function(){};a.prototype.createIVScenario=function(){};a.prototype.setBackgroundStreamState=function(){};a.prototype.setMarkerType=function(){};a.prototype.setMarkerSize=function(){};a.prototype.startTracking=function(){};a.prototype.isNoTrackingEnabled=function(){};a.prototype.setMirrorState=function(){};a.prototype.dispose=function(){};a.prototype.getBackgroundStreamState=function(){};a.prototype.getMirrorState=function(){};return a});define("DS/XCTWebExperienceAppPlay/CXPWebSoundListenerWrapper",[],function(){var a=function(){};a.prototype.setVolume=function(){};a.prototype.getVolume=function(){};a.prototype.setPosition=function(){};a.prototype.setOrientation=function(){};return a});define("DS/XCTWebExperienceAppPlay/StuRaytraceWrapper",["DS/StuRaytrace/StuRaytraceWrapper"],function(a){a.prototype.setAperture=function(){};a.prototype.setExposure=function(){};a.prototype.setFocusDistance=function(){};a.prototype.setSpeed=function(){};a.prototype.setAutoFocusMode=function(){};a.prototype.setProduceVideo=function(){};a.prototype.shotSingleFrame=function(){};a.prototype.begin=function(){};a.prototype.end=function(){}});define("DS/XCTWebExperienceAppPlay/StuCDSDynFactory",["DS/StuPhysic/StuCDSDynFactory"],function(a){a.buildCDSDynFactory=function(){return{CreateBox:function(){},CreateForce:function(){return{SetApplicationPoint:function(){},SetForceComponent:function(){},SetTorqueComponent:function(){}}},CreateMaterial:function(){},CreateRigidBody:function(){return{SetOrigin:function(){},SetOrientation:function(){},EnableAutomaticDeactivation:function(){},SetMaterial:function(){},SetAngularDamping:function(){},SetLinearVelocity:function(){},SetAngularVelocity:function(){}}},ReleaseObject:function(){},CreateInertia:function(){return{SetMass:function(){},SetInertia:function(){},SetCenterOfGravity:function(){}}},CreateSolverConfig:function(){},CreateSolver:function(){return{SetWorld:function(){},AddRigidBody:function(){},AddImpulse:function(){},AddForce:function(){},RemoveForce:function(){}}},CreateWorld:function(){return{SetSize:function(){},SetGravity:function(){}}}}};a.buildCDSDynInertiaComputer=function(b,c){return{Run:function(){this.usedVar=c},GetMass:function(){},GetPrincipalInertia:function(){return{oInertia:null,oInertiaOrientation:null}},GetCoG:function(){return{oCoG:[null,null,null]}}}};a.removeCDSDynInertiaComputer=function(b){this.usedVar=b}});define("DS/XCTWebExperienceAppPlay/StuVisuServices",["DS/StuMiscContent/StuVisuServices","UWA/Core","DS/Visualization/ThreeJS_DS","DS/Visualization/Node3D","DS/SceneGraphNodes/CSS2DNode","DS/StuRenderEngine/StuRenderManager"],function(b,g,e,f,a,d){var c=g.Class.extend({GetPLMProperties:function(){return["toto"]},GetPLMPropValue:function(){},AnnotationDisplay:function(j,h){var i=d.getInstance().main3DViewer._viewer;i.getRootNode().addChild(h)}});b.prototype.build=function(){return new c()};return b});define("DS/XCTWebExperienceAppPlay/CXPWebSoundSourceWrapper",[],function(){var a=function(){};a.prototype.getEngineStatus=function(){};a.prototype.getVolume=function(){};a.prototype.getDuration=function(){};a.prototype.getPlayPostion=function(){};a.prototype.getConeInnerAngle=function(){};a.prototype.getConeOuterAngle=function(){};a.prototype.getRollOffFactor=function(){};a.prototype.getPitch=function(){};a.prototype.getTempo=function(){};a.prototype.play=function(){};a.prototype.pause=function(){};a.prototype.stop=function(){};a.prototype.isPlaying=function(){};a.prototype.isPaused=function(){};a.prototype.isStopped=function(){};return a});define("DS/XCTWebExperienceAppPlay/StuEnvServices",["DS/StuCore/StuEnvServices"],function(a){a.prototype.CATGetEnv=function(b){return localStorage.getItem(b)}});define("DS/XCTWebExperienceAppPlay/CXPWebHMDWrapper",[],function(){var a=function(){};a.prototype.setInteractionCtxTransform=function(){};a.prototype.getInteractionCtxTransform=function(){};a.prototype.deactivateMainViewerRefresh=function(){};a.prototype.activateMainViewerRefresh=function(){};a.prototype.setRepresentationVisibility=function(){};a.prototype.start=function(){};return a});define("DS/XCTWebExperienceAppPlay/CATCXPHumanManager",["DS/StuHuman/CATCXPHumanManager"],function(a){a.CATGetHumanManager=function(){return{RegisterHumanMotionBe:function(){}}}});define("DS/XCTWebExperienceAppPlay/CXPWebAppPlayModelExtension",["UWA/Core","DS/CAT3DExpModel/CAT3DXModelExtensionImpl","DS/CAT3DExpModel/CAT3DXModel","text!DS/XCTWebExperienceAppPlay/assets/CXPWebAppPlayInterfaces.json","text!DS/XCTWebExperienceAppPlay/assets/CXPWebAppPlayExtensions.json","text!DS/XCTWebExperienceAppPlay/assets/CXPWebAppPlayManagers.json"],function(g,d,e,f,c,a){var b=d.extend({GetInterfaces:function(){return[JSON.parse(f)]},GetExtensions:function(){return[JSON.parse(c)]},GetManagers:function(){return[JSON.parse(a)]}});return b});define("DS/XCTWebExperienceAppPlay/CXPWebCapacityLauncher",["DS/StuMiscContent/StuCapacityLauncher","DS/Controls/Button","UWA/Core","DS/Visualization/ThreeJS_DS","DS/Visualization/Node3D","DS/SceneGraphNodes/CSS2DNode"],function(e,c,f,b,d,a){e.prototype.createCapacityPanel=function(k,l){var j=f.createElement("div",{id:"layouttest",styles:{display:"flex","flex-direction":"column","align-items":"stretch",width:"auto",padding:"4px",border:"1px solid #E2E4E3","background-color":"#F4F5F6"}});for(var h=0;h<k.length;h++){k[h].inject(j)}var g=new a({html:j,offset:new b.Vector2(l.x,l.y)});return g};e.prototype.createElement=function(h,g){if(h==="CATVidCtlButton"){var i=new c();i.label=g.Label;i.Name=g.Name;i.displayStyle="flyout";i.elements.button.style.cssText="justify-content : left";return i}return undefined};e.prototype.setClickEventName=function(){return"click"};e.prototype.getCapacities=function(){if(this.capacities&&this.capacities!==[]){return this.capacities}else{var o=[];var m=this.actor;var g=m.behaviors;var h=function(p){var i=p.name;if(["hide","show","activate","deactivate"].includes(i)||p._naturalLanguageInfo._exposedVariableName!==""||p._naturalLanguageInfo._capacityType==="SensorState"){return false}else{return true}};var l=[];var k=[];var n=[];if(m._services){l=l.concat(m._services.filter(h))}if(m._functions){n=n.concat(m._functions.filter(h))}for(var j=0;j<g.length;j++){if(g[j]._services){l=(g[j]._services).concat(l)}if(g[j]._functions){n=(g[j]._functions).concat(n)}}o=o.concat(l,n,k);o=o.filter(h);return o.map(function(i){return i.name})}};e.prototype.visibleFlagSpelling=function(){return"visibleFlag"};e.prototype.setVisibility=function(h,g){h.setVisibility(g);this.CATI3DExperienceObject.getModelObject()._experienceBase.getManager("CAT3DXVisuManager").forceViewerRefresh()};e.prototype.toggleVisibility=function(h){var g=h.visible;h.setVisibility(!g);this.CATI3DExperienceObject.getModelObject()._experienceBase.getManager("CAT3DXVisuManager").forceViewerRefresh()};return e});define("DS/XCTWebExperienceAppPlay/StuMaterialsManager",["DS/StuRenderEngine/StuMaterialsManager"],function(a){a.prototype.getMaterialName=function(){};a.prototype.setMaterialByName=function(){};a.prototype.removeMaterials=function(){};a.prototype.setMaterial=function(){};a.prototype.getMaterial=function(){};return a});define("DS/XCTWebExperienceAppPlay/CXPWebEnvironmentsManager",["UWA/Core","DS/CAT3DExpModel/CAT3DXModel"],function(c,a){var b=c.Class.extend({getActiveEnvironmentName:function(){var f=a.GetExperience();if(!f){return undefined}var d=f.QueryInterface("CATICXPEnvironmentsMgr");var e=d.GetActiveEnvironment();return e.QueryInterface("CATIAlias").GetAlias()},setActiveEnvironmentByNumber:function(f){var e=a.GetExperience();if(!e){return undefined}var d=e.QueryInterface("CATICXPEnvironmentsMgr");var g=[];d.ListEnvironments(g);if(f===0){d.SetActiveEnvironment()}else{d.SetActiveEnvironment(g[f-1])}return f},getActiveEnvironmentNumber:function(){var f=a.GetExperience();if(!f){return 0}var d=f.QueryInterface("CATICXPEnvironmentsMgr");var g=[];d.ListEnvironments(g);var e=d.GetActiveEnvironment();return g.indexOf(e)+1},deActivateEnvironment:function(){var e=a.GetExperience();if(!e){return undefined}var d=e.QueryInterface("CATICXPEnvironmentsMgr");d.SetActiveEnvironment();return this.getActiveEnvironmentNumber()},setActiveEnvironmentByName:function(e){var g=a.GetExperience();if(!g){return undefined}var d=g.QueryInterface("CATICXPEnvironmentsMgr");var h=[];d.ListEnvironments(h);for(var f=0;f<h.length;f++){if(h[f].QueryInterface("CATIAlias").GetAlias()===e){d.SetActiveEnvironment(h[f]);return this.getActiveEnvironmentNumber()}}return undefined},initStartupEnvironment:function(){var f=a.GetExperience();if(!f){return undefined}var e=f.QueryInterface("CATICXPEnvironmentsMgr");var d=e.GetStartupEnvironment();if(d){e.SetActiveEnvironment(d)}return this.getActiveEnvironmentNumber()},getExperienceScaleFactor:function(){return 1},getActiveLocation:function(){}});return b});define("DS/XCTWebExperienceAppPlay/CXPWebGeomPrimitiveISOManager",["UWA/Core","DS/StuCore/StuContext","DS/Visualization/SceneGraphFactory","DS/Visualization/ThreeJS_DS","DS/Visualization/Node3D","DS/Mesh/Mesh","DS/SceneGraphNodes/ArrowNode","DS/SceneGraphNodes/FixedSizeArrowNode","DS/SceneGraphOverrides/SceneGraphOverrideSet","DS/Visualization/PathElement","DS/SceneGraphNodes/FixedSizeNode3D","MathematicsES/MathsDef"],function(d,a,j,k,g,c,l,f,e,b,m,i){var h=d.Class.singleton({init:function(){this._GeomPrimitiveRootNode=new g();this._GeomPrimitiveRootNode.pickable=false;this._sceneGraphOS=new e(this._GeomPrimitiveRootNode);this._primitiveNodes={};this._uIDNode=0},deleteAll:function(){this._sceneGraphOS.deleteOverrides(this._sceneGraphOS.getOverrides());this._GeomPrimitiveRootNode.removeChildren();for(var n in this._primitiveNodes){if(this._primitiveNodes.hasOwnProperty(n)){delete this._primitiveNodes[n]}}if(this._viewer){this._viewer.render()}},setViewer:function(n){if(this._viewer){this._viewer.removeNode(this._GeomPrimitiveRootNode);this._viewer.getSceneGraphOverrideSetManager().removeSceneGraphOverrideSet(this._sceneGraphOS)}this._viewer=n;n.addNode(this._GeomPrimitiveRootNode);this._viewer.getSceneGraphOverrideSetManager().pushSceneGraphOverrideSet(this._sceneGraphOS)},_createNewRep:function(p,s,t){var o;if(t.screenSize){o=new m({ratio:a.RenderManager.getInstance().getPixelDensity()})}else{o=new g()}this._GeomPrimitiveRootNode.addChild(o);if(s instanceof i.Transformation){var r=s.getArray();var w=new k.Matrix4(r[0],r[3],r[6],r[9],r[1],r[4],r[7],r[10],r[2],r[5],r[8],r[11],0,0,0,1);o.setMatrix(w)}else{o.setMatrix(s)}o.addChild(p);var v=this._uIDNode;this._primitiveNodes[v]=o;this._uIDNode++;var u=d.is(t.alpha)?t.alpha/255:1;var q=t.color?"rgb("+t.color.r+","+t.color.g+","+t.color.b+")":"rgb("+150+","+150+","+150+")";var x=new b([this._GeomPrimitiveRootNode,o]);var n=this._sceneGraphOS.createOverride(x);n.setOpacity(u,false);n.setColor(q,false);if(this._viewer){this._viewer.render()}return v},createBox:function(t){var u=d.is(t.closed)?t.closed:false;var w=Boolean(t.centered);var v,n,q,s;if(t.box){v=new k.Vector3(t.box.low.x,t.box.low.y,t.box.low.z);n=new k.Vector3(t.box.high.x-t.box.low.x,0,0);q=new k.Vector3(0,t.box.high.y-t.box.low.y,0);s=new k.Vector3(0,0,t.box.high.z-t.box.low.z)}else{var r,p,o;if(typeof t.size==="number"){r=t.size;p=t.size;o=t.size}else{r=t.size.x;p=t.size.y;o=t.size.z}if(w){v=new k.Vector3(t.position.vector.x-r/2,t.position.vector.y-p/2,t.position.vector.z-o/2);n=new k.Vector3(r/2,0,0);q=new k.Vector3(0,p/2,0);s=new k.Vector3(0,0,o/2)}else{v=new k.Vector3(t.position.vector.x,t.position.vector.y,t.position.vector.z);n=new k.Vector3(r,0,0);q=new k.Vector3(0,p,0);s=new k.Vector3(0,0,o)}}var x=j.createCuboidNode({cornerPoint:v,firstAxis:n,secondAxis:q,thirdAxis:s,fill:u});return this._createNewRep(x,t.position,t)},createSphere:function(p){var n=p.radius;var o=j.createSphereNode({radius:n});return this._createNewRep(o,p.position,p)},createPoint:function(n){n.screenSize=true;n.radius=n.size;return this._createSphere(n)},createVector:function(o){var n=this._CreateLineOrVector(o,true);return this._createNewRep(n.rep,n.transform,o)},createLine:function(o){var n=this._CreateLineOrVector(o,false);return this._createNewRep(n.rep,n.transform,o)},_CreateLineOrVector:function(r,x){var p;var t=new k.Vector3();if((r.startPoint)&&(r.endPoint)){var w=r.endPoint.clone().addScaledVector(r.startPoint,-1);t.set(w.x,w.y,w.z);p=w.clone().norm()}else{p=r.length;t.set(r.direction.x,r.direction.y,r.direction.z)}var o=new k.Vector3();o.set(r.startPoint.x,r.startPoint.y,r.startPoint.z);var n=r.width?r.width:0.01*p;var u;if(x){var s=r.headLength?r.headLength:0.1*p;var y=r.headWidth?r.headWidth:3*n;p=p-s;u=j.createConeNode({bottomCenterPoint:new k.Vector3(0,0,p),topCenterPoint:new k.Vector3(0,0,p+s),topRadius:0,bottomRadius:y})}var z=j.createCylinderNode({bottomCenterPoint:new k.Vector3(0,0,0),topCenterPoint:new k.Vector3(0,0,p),radius:n});if(u){z.addChild(u)}var q=new k.Vector3(0,0,1);q.cross(t.clone());if(q.length()===0){q.set(0,1,0);q.cross(t.clone())}var v=new k.Matrix4();v.lookAt(t,new k.Vector3(),q);v.setPosition(o);return{rep:z,transform:v}},createAxis:function(q){var o=q.size;var s={startPoint:new i.Vector3D(0,0,0),length:o};s.direction=new i.Vector3D(1,0,0);var n=this._CreateLineOrVector(s,true);s.direction=new i.Vector3D(0,1,0);var t=this._CreateLineOrVector(s,true);s.direction=new i.Vector3D(0,0,1);var r=this._CreateLineOrVector(s,true);var p=new g();p.addChild(n.rep);p.addChild(t.rep);p.addChild(r.rep);n.rep.setMatrix(n.transform);t.rep.setMatrix(t.transform);r.rep.setMatrix(r.transform);return this._createNewRep(p,q.position,q)},setColor:function(v,y,t,n,s){var u=this._primitiveNodes[v];if(!u){return}var w=d.is(s)?s/255:1;var p=d.is(y)?y:150;var r=d.is(t)?t:150;var x=d.is(n)?n:150;var q="rgb("+p+","+r+","+x+")";var z=new b([this._GeomPrimitiveRootNode,u]);var o=this._sceneGraphOS.getUniqueOverrideFromPathElement(z);o.setOpacity(w,false);o.setColor(q,false);if(this._viewer){this._viewer.render()}},setPosition:function(q,n){var p=this._primitiveNodes[q];if(!p){return}if(n instanceof i.Transformation){var r=n.getArray();var o=new k.Matrix4(r[0],r[3],r[6],r[9],r[1],r[4],r[7],r[10],r[2],r[5],r[8],r[11],0,0,0,1);p.setMatrix(o)}},ExternalizeSharedTransfo:function(n){this._sharedTransfo=n},CleanSharedTransfo:function(n){return n},SetPosFromSharedTransfo:function(q){if(this._primitiveNodes.hasOwnProperty(q)){var p=this._primitiveNodes[q];if(p){var o=this._sharedTransfo;if(o){if(o[12]>0){var n=new k.Matrix4(o[0],o[3],o[6],o[9],o[1],o[4],o[7],o[10],o[2],o[5],o[8],o[11],0,0,0,1);p.setMatrix(n)}}}}}});h.__proto__["delete"]=function(q){var o=this._primitiveNodes[q];if(!o){return}var p=new b([this._GeomPrimitiveRootNode,o]);var n=this._sceneGraphOS.getUniqueOverrideFromPathElement(p);this._sceneGraphOS.deleteOverride(n);this._GeomPrimitiveRootNode.removeChild(o);delete this._primitiveNodes[q];if(this._viewer){this._viewer.render()}};h.init();h.deleteAll();return h});define("DS/XCTWebExperienceAppPlay/StuProxy/StuProxy",["UWA/Core","UWA/Class"],function(b){var a=b.Class.extend({init:function(c,d){this._modelObject=c;this._stuObject=d},getModelObject:function(){return this._modelObject},getStuObject:function(){return this._stuObject}});return a});define("DS/XCTWebExperienceAppPlay/CXPWebAppPlay",["UWA/Core","UWA/Class/Listener","DS/CAT3DExpModel/CAT3DXModelApplication","DS/CAT3DExpModel/CAT3DXModel","DS/XCTWebExperienceAppPlay/CXPWebAppPlayModelExtension","text!DS/XCTWebExperienceAppPlay/assets/CXPWebAppPlayPrototypeBuild.json"],function(g,f,d,c,b,e){var a=d.extend(f,{init:function(h){this._parent(h);if(!h.modelFactory){h.modelFactory="DS/XCTWebExperienceAppPlay/CAT3DXModelFactoryPlay"}this._modelExtensions.push(new b())},onAppReady:function(){this._parent();this._experienceBase.getManager("CXPWebPlayManager").AddProtobuildSpec(JSON.parse(e));var h=this._experienceBase.getManager("CAT3DXVisuManager").getViewer();h.picking.displayHL=false},getWorkBench:function(){return{module:"XCTWebExperienceAppPlay",name:"CXPWebAppPlay"}}});return a});define("DS/XCTWebExperienceAppPlay/CXPWebRaytrace",["DS/StuRaytrace/StuRaytrace","DS/XCTWebExperienceAppPlay/CXPWebRaytraceWrapper"],function(b,a){b.prototype.buildWrapper=function(){return new a()}});define("DS/XCTWebExperienceAppPlay/CXPWebSoundPlayer",["DS/StuSound/StuSoundPlayer","DS/XCTWebExperienceAppPlay/CXPWebSoundSourceWrapper"],function(b,a){b.prototype.buildWrapper=function(){return new a()};return b});define("DS/XCTWebExperienceAppPlay/CXPWebSoundListener",["DS/StuSound/StuSoundListener","DS/XCTWebExperienceAppPlay/CXPWebSoundListenerWrapper"],function(b,a){b.prototype.buildWrapper=function(){return new a()};return b});define("DS/XCTWebExperienceAppPlay/CXPWebiVScenario",["DS/StudioIV/StuiVScenario","DS/XCTWebExperienceAppPlay/CXPWebiVWrapper"],function(b,a){b.prototype.buildWrapper=function(){return new a()};return b});define("DS/XCTWebExperienceAppPlay/CXPWebViveManager",["DS/StudioIV/StuViveManager","DS/XCTWebExperienceAppPlay/CXPWebHMDWrapper"],function(a,b){a.prototype.buildHMDWrapper=function(){return new b()};return a});define("DS/XCTWebExperienceAppPlay/StuProxy/StuIRepresentation",["UWA/Core","DS/XCTWebExperienceAppPlay/StuProxy/StuProxy","DS/Visualization/ThreeJS_DS","MathematicsES/MathsDef"],function(e,b,c,a){var d=b.extend({init:function(f,g){this._parent(f,g);this._modelObject=f},GetBoundingSphere:function(o){var g=this._modelObject.QueryInterface("CATI3DGeoVisu").GetPathElement();var l=this._modelObject._experienceBase.getManager("CAT3DXVisuManager").getViewer();var h;if(this._modelObject.QueryInterface("CATI3DGeoVisu").GetOverride().getVisibility()){h=g.getBoundingSphere(l,"visibleSpace")}else{h=g.getBoundingSphere(l,"invisibleSpace")}var k=this.getModelObject();var p=k.QueryInterface("CATICXPObject").GetFatherObject();if(p){var f=p.QueryInterface("CATIMovable");if(f){var m=new a.Transformation();f.GetAbsPosition(m);var j=m.getArray();var i=new c.Matrix4(j[0],j[3],j[6],j[9],j[1],j[4],j[7],j[10],j[2],j[5],j[8],j[11],0,0,0,1);var n=new c.Matrix4().getInverse(i);h.applyMatrix4(n)}}o.center.x=h.center.x;o.center.y=h.center.y;o.center.z=h.center.z;o.radius=h.radius},GetBoundingBox:function(k,i,l){var n=this._modelObject.QueryInterface("CATI3DGeoVisu");var g=n.GetPathElement();var j=this._modelObject._experienceBase.getManager("CAT3DXVisuManager").getViewer();l=l?l:0;var m;if(n.GetOverride().getVisibility()){m=g.getBoundingBox(null,j,"visibleSpace")}else{m=g.getBoundingBox(null,j,"invisibleSpace")}if(l===0){var h=i.getArray();var f=new c.Matrix4(h[0],h[3],h[6],h[9],h[1],h[4],h[7],h[10],h[2],h[5],h[8],h[11],0,0,0,1);m.applyMatrix4(f)}k.high.x=m.max.x;k.high.y=m.max.y;k.high.z=m.max.z;k.low.x=m.min.x;k.low.y=m.min.y;k.low.z=m.min.z},GetOrientedBoundingBox:function(o,m,k){var h;var r=this._modelObject.QueryInterface("CATI3DGeoVisu");if(m.excludeChildren){h=r.GetPathElement().clone();h.externalPath.push(r.GetLocalNodes())}else{h=r.GetPathElement()}var l=this._modelObject._experienceBase.getManager("CAT3DXVisuManager").getViewer();var i=m.orientation?m.orientation.getArray():null;var q;if(r.GetOverride().getVisibility()){q=h.getBoundingBox(null,l,"visibleSpace")}else{q=h.getBoundingBox(null,l,"invisibleSpace")}if(i){var j=k.getArray();var f=new c.Matrix4(j[0],j[3],j[6],j[9],j[1],j[4],j[7],j[10],j[2],j[5],j[8],j[11],0,0,0,1);var p=new c.Matrix4(i[0],i[3],i[6],i[9],i[1],i[4],i[7],i[10],i[2],i[5],i[8],i[11],0,0,0,1);var g=new c.Matrix4();g=g.getInverse(p);var n=new c.Matrix4();n.multiplyMatrices(f,g);q.applyMatrix4(n)}o.high.x=q.max.x;o.high.y=q.max.y;o.high.z=q.max.z;o.low.x=q.min.x;o.low.y=q.min.y;o.low.z=q.min.z}});return d});define("DS/XCTWebExperienceAppPlay/StuProxy/StuCATI3DGeoVisu",["UWA/Core","DS/XCTWebExperienceAppPlay/StuProxy/StuProxy"],function(c,a){var b=a.extend({});return b});define("DS/XCTWebExperienceAppPlay/StuProxy/StuCATI3DXGraphicalProperties",["UWA/Core","DS/XCTWebExperienceAppPlay/StuProxy/StuProxy"],function(c,a){var b=a.extend({init:function(d,e){this._parent(d,e);this._modelCATI3DXGraphicalProperties=d.QueryInterface("CATI3DXGraphicalProperties")},GetPickMode:function(){return this._modelCATI3DXGraphicalProperties.GetPickMode()},SetPickMode:function(d){this._modelCATI3DXGraphicalProperties.SetPickMode(d)},GetShowMode:function(){return this._modelCATI3DXGraphicalProperties.GetShowMode()},SetShowMode:function(d){this._modelCATI3DXGraphicalProperties.SetShowMode(d)},GetOpacity:function(){return this._modelCATI3DXGraphicalProperties.GetOpacity()},SetOpacity:function(d){this._modelCATI3DXGraphicalProperties.SetOpacity(d)},GetRed:function(){return this._modelCATI3DXGraphicalProperties.GetRed()},GetGreen:function(){return this._modelCATI3DXGraphicalProperties.GetGreen()},GetBlue:function(){return this._modelCATI3DXGraphicalProperties.GetBlue()},SetColor:function(e,f,d){this._modelCATI3DXGraphicalProperties.SetColor(e,f,d)}});return b});define("DS/XCTWebExperienceAppPlay/StuProxy/StuCATIMovable",["UWA/Core","DS/XCTWebExperienceAppPlay/StuProxy/StuProxy","MathematicsES/MathsDef"],function(e,d,c){var b=null;var a=d.extend({init:function(f,g){this._parent(f,g);this._modelCATIMovable=f.QueryInterface("CATIMovable");Object.defineProperty(this,"_ArrayBuffer",{enumerable:true,configurable:true,get:function(){return b},set:function(h){b=h}})},GetLocalPosition:function(){var f=new c.Transformation();this._modelCATIMovable.GetLocalPosition(f);this._transformToArrayBuffer(f)},SetLocalPosition:function(){var f=this._arrayBufferToTransform();this._modelCATIMovable.SetLocalPosition(null,f)},GetAbsPosition:function(){var f=new c.Transformation();this._modelCATIMovable.GetAbsPosition(f);this._transformToArrayBuffer(f)},SetAbsPosition:function(){var f=this._arrayBufferToTransform();this._modelCATIMovable.SetAbsPosition(f)},ExternalizeArray:function(f){this._ArrayBuffer=f},CleanArray:function(){this._ArrayBuffer=null},_transformToArrayBuffer:function(f){var g=f.getArray();this._ArrayBuffer[0]=g[0];this._ArrayBuffer[1]=g[1];this._ArrayBuffer[2]=g[2];this._ArrayBuffer[3]=g[3];this._ArrayBuffer[4]=g[4];this._ArrayBuffer[5]=g[5];this._ArrayBuffer[6]=g[6];this._ArrayBuffer[7]=g[7];this._ArrayBuffer[8]=g[8];this._ArrayBuffer[9]=g[9];this._ArrayBuffer[10]=g[10];this._ArrayBuffer[11]=g[11]},_arrayBufferToTransform:function(){var f=new c.Transformation();f.setFromArray(Array.prototype.slice.call(this._ArrayBuffer));return f}});return a});define("DS/XCTWebExperienceAppPlay/StuNavigation",["DS/StuCameras/StuNavigation","DS/XCTWebExperienceAppPlay/StuReticule"],function(a,b){a.prototype.buildReticule=function(){return new b()};return a});define("DS/XCTWebExperienceAppPlay/StuProxy/StuCATICXPUIActor",["UWA/Core","DS/XCTWebExperienceAppPlay/StuProxy/StuProxy"],function(c,a){var b=a.extend({init:function(d,e){this._parent(d,e);this._modelCATICXPUIActor=d.QueryInterface("CATICXPUIActor")},setOffset:function(d,e){this._modelCATICXPUIActor.SetOffset({x:d,y:e})},getOffset:function(){var d=this._modelCATICXPUIActor.GetOffset();return[d.x,d.y]},setMinimumDimension:function(d,f,e){this._modelCATICXPUIActor.SetMinimumDimension(d,f,e)},getMinimumDimension:function(){var d=this._modelCATICXPUIActor.GetMinimumDimension();return[d.width,d.height,d.mode]},setAttachment:function(d,e){this._modelCATICXPUIActor.SetAttachment(d,e?e.getModelObject():e)},setEnable:function(d){this._modelCATICXPUIActor.SetEnable(d)},getEnable:function(){return this._modelCATICXPUIActor.GetEnable()},setOpacity:function(d){this._modelCATICXPUIActor.SetOpacity(d)},getOpacity:function(){return this._modelCATICXPUIActor.GetOpacity()},setVisible:function(d){this._modelCATICXPUIActor.SetVisible(d)},getVisible:function(){return this._modelCATICXPUIActor.GetVisible()},setESObject:function(){},instantiateView:function(){}});return b});define("DS/XCTWebExperienceAppPlay/StuProxy/StuCATICXPPictureResource",["UWA/Core","DS/XCTWebExperienceAppPlay/StuProxy/StuProxy"],function(c,a){var b=a.extend({init:function(d,f){this._parent(d,f);this._sizeInPixel=null;var e=this;d.QueryInterface("CATICXPPictureResource").GetPictureSizeInPixel().done(function(g){e._sizeInPixel=g})},GetSizeInPixel:function(){return this._sizeInPixel},GetPixelImage:function(){console.log("not implemented")}});return b});define("DS/XCTWebExperienceAppPlay/StuTriggerZoneManager",["DS/StuTriggerZones/StuTriggerZoneManager","DS/XCTWebExperienceAppPlay/StuTriggerZoneManagerWeb"],function(b,a){b.prototype.getTriggerZoneManager=function(){return new a()};b.prototype.deleteTriggerZoneManager=function(){};return b});define("DS/XCTWebExperienceAppPlay/StuProxy/StuCATI3DExperienceObject",["UWA/Core","DS/XCTWebExperienceAppPlay/StuProxy/StuProxy","DS/CAT3DExpModel/interfaces/CATI3DExperienceObject","DS/StuRenderEngine/StuColor"],function(e,b,d,a){var c=b.extend({init:function(f,g){this._parent(f,g);this._modelCATI3DExperienceObject=f.QueryInterface("CATI3DExperienceObject")},GetValueByName:function(f){var g=this._modelCATI3DExperienceObject.GetVariableType(f);if(g===d.VarType.Object){return this._GetValueByNameObject(f)}else{if(g===d.VarType.Color){return this._GetValueByNameColor(f)}else{return this._modelCATI3DExperienceObject.GetValueByName(f)}}},_GetValueByNameObject:function(g){var k=this._modelCATI3DExperienceObject.GetValueByName(g);var j;if(k){if(Array.isArray(k)){j=[];for(var h=0;h<k.length;h++){if(k[h].QueryInterface("StuIPrototypeBuild")){var f=k[h].QueryInterface("StuIPrototypeBuild").GetSync();if(f){j.push(f)}}}}else{if(k.QueryInterface("StuIPrototypeBuild")){j=k.QueryInterface("StuIPrototypeBuild").GetSync()}}}return j},_GetValueByNameColor:function(g){var h=this._modelCATI3DExperienceObject.GetValueByName(g);var f;if(h){var i=h.GetThreeColor();f=new a(i.r*255,i.g*255,i.b*255)}return f},SetValueByName:function(f,h){var g=this._modelCATI3DExperienceObject.GetVariableType(f);if(g===d.VarType.Object){this._SetValueByNameObject(f,h)}else{if(g===d.VarType.Color){this._SetValueByNameColor(f,h)}else{this._modelCATI3DExperienceObject.SetValueByName(f,h,d.SetValueMode.OnlyVolatile)}}},_SetValueByNameObject:function(f,j){if(!j){this._modelCATI3DExperienceObject.SetValueByName(f,j,d.SetValueMode.OnlyVolatile)}else{if(Array.isArray(j)){var h=[];for(var g=0;g<j.length;g++){h.push(j[g].CATI3DExperienceObject.getModelObject())}this._modelCATI3DExperienceObject.SetValueByName(f,h,d.SetValueMode.OnlyVolatile)}else{this._modelCATI3DExperienceObject.SetValueByName(f,j.CATI3DExperienceObject.getModelObject(),d.SetValueMode.OnlyVolatile)}}},_SetValueByNameColor:function(){console.log("not implemented")}});return c});define("DS/XCTWebExperienceAppPlay/extensions/StuEExperienceBasePrototypeBuild",["UWA/Core","UWA/Class/Listener","DS/CAT3DExpModel/interfaces/CATI3DExperienceObject","DS/XCTWebExperienceAppPlay/StuProxy/StuCATI3DExperienceObject"],function(e,b,d,a){var c=e.Class.Listener.extend({init:function(){this._instance=null;this._creationPromise=null},destroy:function(){this._instance=null;this._creationPromise=null},Get:function(){if(!e.is(this._instance)){return this._Create()}return e.Promise.resolve(this._instance)},GetSync:function(){return this._instance},_Create:function(){var g=this.GetObject();var f=this;if(!this._creationPromise){this._creationPromise=e.Promise.deferred();g._experienceBase.getManager("CXPWebPlayManager").GetProtobuildFromComponent(g).then(function(h){f._instance=h;return f._Fill(h)}).then(function(){f._creationPromise.resolve(f._instance);f._creationPromise=null})["catch"](function(){f._creationPromise.resolve(f._instance);f._creationPromise=null})}return this._creationPromise.promise},_Fill:function(h){h.CATI3DExperienceObject=new a(this.GetObject(),h);var f=this.QueryInterface("CATI3DExperienceObject");var g=this;return this._setParent(h).done(function(){return g._Project(h,f,"_varName","name")}).done(function(){var l=[];var k=[];f.ListVariables(k,d.VarType.All);for(var j=0;j<k.length;j++){l.push(g._Project(h,f,k[j],k[j]))}return e.Promise.all(l)})},_setParent:function(g){var h=this.QueryInterface("CATICXPObject");if(h){var f=h.GetFatherObject();if(f){return f.QueryInterface("StuIPrototypeBuild").Get().done(function(i){if(i&&g.parent!==i&&g.setParent){g.setParent(i)}})}}return e.Promise.resolve()},_Project:function(g,i,f,h){return this._BuildProjectValue(i,f).done(function(){var j=g.CATI3DExperienceObject.GetValueByName(f);if(e.is(j)){g[h]=j}})},_BuildProjectValue:function(k,f){if(k.GetVariableType(f)===d.VarType.Object){var j=k.GetValueByName(f);if(Array.isArray(j)){var h=[];for(var g=0;g<j.length;++g){if(j[g].QueryInterface&&j[g].QueryInterface("StuIPrototypeBuild")){h.push(j[g].QueryInterface("StuIPrototypeBuild").Get())}}return e.Promise.all(h)}else{if(j&&j.QueryInterface&&j.QueryInterface("StuIPrototypeBuild")){return j.QueryInterface("StuIPrototypeBuild").Get()}}}return e.Promise.resolve()},Free:function(){this._instance=null;this._creationPromise=null;this.stopListening();var k=[];var g=this.QueryInterface("CATI3DExperienceObject");g.ListVariables(k,d.VarType.Object);for(var j=0;j<k.length;j++){var h=g.GetVariableInfo(k[j]);if(h.valuationMode===d.ValuationMode.AggregatingValue){var l=g.GetValueByName(k[j]);if(l){if(Array.isArray(l)){for(var f=0;f<l.length;f++){if((l[f].QueryInterface)&&(l[f].QueryInterface("StuIPrototypeBuild"))){l[f].QueryInterface("StuIPrototypeBuild").Free()}}}else{if((l.QueryInterface)&&(l.QueryInterface("StuIPrototypeBuild"))){l.QueryInterface("StuIPrototypeBuild").Free()}}}}}}});return c});define("DS/XCTWebExperienceAppPlay/extensions/StuEBeScriptPrototypeBuild",["UWA/Core","DS/XCTWebExperienceAppPlay/extensions/StuEExperienceBasePrototypeBuild"],function(c,b){var a=b.extend({_Fill:function(d){var e=this;return this._parent(d).done(function(){if(c.is(e._instance.scriptinstance)){e._instance.updateCode()}d.__proto__.name=e.QueryInterface("CATI3DExperienceObject").GetValueByName("_varName")})}});return a});define("DS/XCTWebExperienceAppPlay/extensions/StuPictureResourcePrototypeBuild",["UWA/Core","DS/XCTWebExperienceAppPlay/extensions/StuEExperienceBasePrototypeBuild","DS/XCTWebExperienceAppPlay/StuProxy/StuCATICXPPictureResource"],function(d,c,a){var b=c.extend({_Fill:function(e){e.CATICXPPictureResource=new a(this.GetObject(),e);return this._parent(e)}});return b});define("DS/XCTWebExperienceAppPlay/extensions/StuEVector3DPrototypeBuild",["UWA/Core","DS/XCTWebExperienceAppPlay/extensions/StuEExperienceBasePrototypeBuild","MathematicsES/MathsDef"],function(d,c,a){var b=c.extend({_Create:function(){var e=new a.Vector3D();this._instance=e;return this._Fill(e).done(function(){return e})}});return b});define("DS/XCTWebExperienceAppPlay/extensions/StuECameraManagerSequencePrototypeBuild",["UWA/Core","DS/StuCore/StuContext","DS/XCTWebExperienceAppPlay/extensions/StuEExperienceBasePrototypeBuild","DS/StuCameras/StuCameraManager"],function(d,a,c){var b=c.extend({_Create:function(){var e=new a.CameraManagerSequence();this._instance=e;return this._Fill(e).done(function(){return e})}});return b});define("DS/XCTWebExperienceAppPlay/extensions/StuECameraManagerTransitionPrototypeBuild",["UWA/Core","DS/StuCore/StuContext","DS/XCTWebExperienceAppPlay/extensions/StuEExperienceBasePrototypeBuild","DS/StuCameras/StuCameraManager"],function(d,a,c){var b=c.extend({_Create:function(){var e=new a.CameraManagerTransition();this._instance=e;return this._Fill(e).done(function(){return e})}});return b});define("DS/XCTWebExperienceAppPlay/extensions/StuEVector2DPrototypeBuild",["UWA/Core","DS/XCTWebExperienceAppPlay/extensions/StuEExperienceBasePrototypeBuild","MathematicsES/MathsDef"],function(d,c,a){var b=c.extend({_Create:function(){var e=new a.Vector2D();this._instance=e;return this._Fill(e).done(function(){return e})}});return b});define("DS/XCTWebExperienceAppPlay/extensions/StuEUIActorPrototypeBuild",["UWA/Core","DS/XCTWebExperienceAppPlay/extensions/StuEExperienceBasePrototypeBuild","DS/XCTWebExperienceAppPlay/StuProxy/StuCATICXPUIActor","DS/StuCID/StuUIActor","DS/StuCID/CXPText","DS/StuCID/CXPImage"],function(g,f,d,b,c,a){var e=f.extend({_Create:function(){var h;switch(this.QueryInterface("CATI3DExperienceObject").GetValueByName("data").QueryInterface("CATI3DExperienceObject").GetValueByName("__configurationName__")){case"CXPText":h=new c();break;case"CXPImage":h=new a();break;default:h=new b();break}this._instance=h;return this._Fill(h).done(function(){return h})},_Fill:function(i){var h=this.QueryInterface("CATI3DXUIRep").Get();h.registerPlayEvents(i);i.CATICXPUIActor=new d(this.GetObject(),i);return this._parent(i)},Get:function(){if(!g.is(this._instance)){return this._Create()}return g.Promise.resolve(this._instance)},Free:function(){this._parent();var h=this.QueryInterface("CATI3DXUIRep").Get();h.releasePlayEvents()}});return e});define("DS/XCTWebExperienceAppPlay/extensions/StuE3DActorPrototypeBuild",["UWA/Core","DS/XCTWebExperienceAppPlay/extensions/StuEExperienceBasePrototypeBuild","DS/XCTWebExperienceAppPlay/StuProxy/StuCATIMovable","DS/XCTWebExperienceAppPlay/StuProxy/StuIRepresentation","DS/XCTWebExperienceAppPlay/StuProxy/StuCATI3DGeoVisu","DS/XCTWebExperienceAppPlay/StuProxy/StuCATI3DXGraphicalProperties"],function(g,f,a,e,d,c){var b=f.extend({_Fill:function(i){var h=this;i.CATIMovable=new a(this.GetObject(),i);i.StuIRepresentation=new e(this.GetObject(),i);i.CATI3DGeoVisu=new d(this.GetObject(),i);i.CATI3DXGraphicalProperties=new c(this.GetObject(),i);return this._parent(i).done(function(){return h._ProjectSubActors(i,h.QueryInterface("CATI3DExperienceObject"))})},_ProjectSubActors:function(i,h){return this._Project(i,h,"actors","subActors")}});return b});define("DS/XCTWebExperienceAppPlay/extensions/StuESubProductActorPrototypeBuild",["UWA/Core","DS/XCTWebExperienceAppPlay/extensions/StuE3DActorPrototypeBuild","DS/XCTWebExperienceAppPlay/StuProxy/StuCATIMovable","DS/XCTWebExperienceAppPlay/StuProxy/StuIRepresentation","DS/XCTWebExperienceAppPlay/StuProxy/StuCATI3DGeoVisu","DS/XCTWebExperienceAppPlay/StuProxy/StuCATI3DXGraphicalProperties"],function(g,c,a,f,e,b){var d=c.extend({_Fill:function(h){h.CATIMovable=new a(this.GetObject(),h);h.StuIRepresentation=new f(this.GetObject(),h);h.CATI3DGeoVisu=new e(this.GetObject(),h);h.CATI3DXGraphicalProperties=new b(this.GetObject(),h);return this._parent(h)},_ProjectSubActors:function(o,n){var k=n.QueryInterface("CATI3DXAssetHolder").getCache();var h=(k&&k.OverrideChildren)?k.OverrideChildren:[];var m=[];var j=[];for(var l=0;l<h.length;++l){m.push(h[l].QueryInterface("StuIPrototypeBuild").Get().done(function(i){j.push(i)}))}return g.Promise.all(m).done(function(){if(g.is(j)){o.subActors=j}})}});return d});define("DS/XCTWebExperienceAppPlay/extensions/StuEProductActorPrototypeBuild",["UWA/Core","DS/XCTWebExperienceAppPlay/extensions/StuE3DActorPrototypeBuild"],function(c,b){var a=b.extend({_ProjectSubActors:function(k,j){var f=j.QueryInterface("CATI3DXAssetHolder").getCache();var d=(f&&f.OverrideChildren)?f.OverrideChildren:[];var h=[];var e=[];for(var g=0;g<d.length;++g){h.push(d[g].QueryInterface("StuIPrototypeBuild").Get().done(function(i){e.push(i)}))}h.push(this._BuildProjectValue(j,"actors"));return c.Promise.all(h).done(function(){var i=k.CATI3DExperienceObject.GetValueByName("actors");i=i.concat(e);if(c.is(i)){k.subActors=i}})}});return a});define("DS/XCTWebExperienceAppPlay/CXPWebRenderManager",["DS/StuRenderEngine/StuRenderManager","DS/XCTWebExperienceAppPlay/CXPWebViewer","DS/XCTWebExperienceAppPlay/CXPWebViewpoint","DS/XCTWebExperienceAppPlay/CXPWebGeomPrimitiveISOManager","DS/XCTWebExperienceAppPlay/CXPWebEnvironmentsManager"],function(d,c,a,b,e){d.prototype.buildViewer=function(){return new c(this._WebViewer)};d.prototype.setViewer=function(f){this._WebViewer=f;b.setViewer(f)};d.prototype.setViewpoint=function(f){this._WebViewpoint=f};d.prototype.buildViewpoint=function(){return new a(this._WebViewpoint)};d.prototype.buildGeomPrimitive_ISOManager=function(){return b};d.prototype.buildGlobeServices=function(){return null};d.prototype.buildEnvironmentsManager=function(){return new e()};d.prototype.getPixelDensity=function(){return 96/25.4};return d});define("DS/XCTWebExperienceAppPlay/StuProxy/StuVIAIIxpVirtualPath",["UWA/Core","DS/XCTWebExperienceAppPlay/StuProxy/StuProxy"],function(c,b){var a=b.extend({init:function(d,e){this._parent(d,e);this._modelVIAIIxpVirtualPath=d.QueryInterface("VIAIIxpVirtualPath")},GetLength:function(){return this._modelVIAIIxpVirtualPath.GetLength()},GetValue:function(e,f,d){this._modelVIAIIxpVirtualPath.GetValue(e,f,d)},GetDiscretization:function(){console.log("not implemented")}});return a});define("DS/XCTWebExperienceAppPlay/extensions/StuEPathActorPrototypeBuild",["UWA/Core","DS/XCTWebExperienceAppPlay/extensions/StuE3DActorPrototypeBuild","DS/XCTWebExperienceAppPlay/StuProxy/StuVIAIIxpVirtualPath"],function(d,c,b){var a=c.extend({_Fill:function(e){e.VIAIIxpVirtualPath=new b(this.GetObject(),e);return this._parent(e)}});return a});define("DS/XCTWebExperienceAppPlay/StuUIActor",["DS/StuCID/StuUIActor","DS/XCTWebExperienceAppPlay/StuUIBinder"],function(a,b){a.prototype.getUIBinder=function(){return new b()};a.prototype.getCtl=function(){return{Data:this.data}};a.prototype.__parseProperties=function(c,e){for(var d in e){if(e.hasOwnProperty(d)&&(c[d]===null||c[d]===undefined)){(function(f,g){Object.defineProperty(f,g,{enumerable:true,configurable:true,get:function(){return e.CATI3DExperienceObject.GetValueByName(g)},set:function(h){e.CATI3DExperienceObject.SetValueByName(g,h)}})})(c,d)}}};return a});define("DS/XCTWebExperienceAppPlay/managers/CXPWebPlayManager",["UWA/Core","UWA/Class/Events","DS/StuCore/StuContext","DS/WebApplicationBase/W3AAManager","DS/EPTaskPlayer/EPTaskPlayerDefine","DS/StuRenderEngine/StuRenderManager","DS/EPEventServices/EPEventServices","DS/XCTWebExperienceAppPlay/CXPWebRenderManager","DS/XCTWebExperienceAppPlay/StuTriggerZoneManager","DS/StuTriggerZones/StuTriggerZoneActor","DS/XCTWebExperienceAppPlay/StuUIActor","DS/XCTWebExperienceAppPlay/StuNavigation","DS/XCTWebExperienceAppPlay/StuEnvServices","DS/XCTWebExperienceAppPlay/StuVisuServices","DS/XCTWebExperienceAppPlay/CXPWebCapacityLauncher"],function(h,b,d,g,a,f,e){var c=h.Class.extend(g,b,{initialize:function(){this._playing=false;this._pause=false;this._protoSpecs=[]},unInitialize:function(){this._playing=false;this._pause=false;this._protoSpecs=[]},getUpdatePriority:function(){return 0},update:function(l){if(this._playing){var j=Date.now();var i=j-this._startDate;var k={deltaTime:l.deltaTime,elapsedTime:i};a.execute(k)}},AddProtobuildSpec:function(i){this._protoSpecs.push(i)},GetProtobuildFromComponent:function(j){var m=j.GetType();var n=undefined;for(var l=0;l<this._protoSpecs.length;++l){if(this._protoSpecs[l].hasOwnProperty(m)){n=this._protoSpecs[l][m];break}}var k=this;return new h.Promise(function(i,o){if(n){require([n],function(){var q=arguments;var p=new q[0];i(p)})}else{k._experienceBase.getManager("CAT3DXNotificationsManager").addNotification({level:"warning",message:"Warning : "+m+" not (longer) supported"},5000);o()}})},play:function(j){if(!j.IsKindOf("CXPExperience_Spec")){return h.Promise.reject(new Error())}var i=this;if(this._pause){this._pause=false;this._playing=true;i._experienceBase.getManager("CXPWebEventListenerManager").start();a.resume();return h.Promise.resolve()}this._viewer=this._experienceBase.getManager("CAT3DXVisuManager").getViewer();d.RenderManager.getInstance().setViewer(this._viewer);d.RenderManager.getInstance().setViewpoint(this._viewer.currentViewpoint);d.initContext();j.QueryInterface("CATI3DXVolatileEO").setVolatile();return this._getStuObject(j).done(function(k){i._experienceBase.getManager("CXPWebEventListenerManager").start();k.initialize();i._startDate=Date.now();i._playing=true;k.activate();a.start();i._setPlayCursor();return h.Promise.resolve()})},pause:function(){this._playing=false;this._pause=true;this._experienceBase.getManager("CXPWebEventListenerManager").stop();a.pause();return h.Promise.resolve()},stop:function(j){if(this._pause){this._pause=false}var i=this;this._playing=false;this._experienceBase.getManager("CXPWebEventListenerManager").stop();a.stop();return this._getStuObject(j).done(function(k){k.deactivate();d.disposeContext();j.QueryInterface("StuIPrototypeBuild").Free();j.QueryInterface("CATI3DXVolatileEO").restorePersistent();i._restoreAuthoringCursor()})},_getStuObject:function(i){if(!h.is(i)){console.error("Error getStuObject() : parameter not defined !");return undefined}return i.QueryInterface("StuIPrototypeBuild").Get()},_setPlayCursor:function(){var k=0;this.onClickableEnterEvent=function(){k++;this._viewer.canvas.style.cursor="pointer"};this.onClickableExitEvent=function(){k--;if(k===0){this._viewer.canvas.style.cursor="default"}};var j=e.getEventByType("ClickableEnterEvent");e.addObjectListener(j,this,"onClickableEnterEvent");var i=e.getEventByType("ClickableExitEvent");e.addObjectListener(i,this,"onClickableExitEvent");this._viewer.canvas.style.cursor="default"},_restoreAuthoringCursor:function(){var j=e.getEventByType("ClickableEnterEvent");e.removeObjectListener(j,this,"onClickableEnterEvent");var i=e.getEventByType("ClickableExitEvent");e.removeObjectListener(i,this,"onClickableExitEvent");this._viewer.canvas.style.cursor="auto"},GetType:function(){return"CXPWebPlayManager"}});return c});