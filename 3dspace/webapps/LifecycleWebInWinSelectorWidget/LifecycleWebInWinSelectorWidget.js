define("DS/LifecycleWebInWinSelectorWidget/LifecycleWebInWinSelectorWidget",["css!DS/LifecycleWidget/LifecycleWidget","css!DS/LifecycleWebInWinSelectorWidget/LifecycleWebInWinSelectorWidget","UWA/Controls/Abstract","DS/ENO6WPlugins/jQuery","DS/WAFData/WAFData","DS/WebInWinHelper/WebInWinHelper","DS/HistoryMultiPanel/HistoryMultiPanel","DS/Controls/Button","DS/LifecycleServices/LifecycleAlert","DS/LifecycleServices/LifecycleServicesSettings","i18n!DS/LifecycleWidget/assets/nls/LifecycleWidgetNls"],function(d,i,e,k,g,l,h,j,b,a,c){var f=e.extend({defaultOptions:{wintop:false,},webToWinCom_Socket:null,ContextualMenus:null,context:null,displayNotification:function(m){b.displayNotification(m)},addTestFunctions:function(m){m.addMissingExternalRecIds=function(){document.body.setAttribute("data-rec-id","TopLevelDocumentBody");var n=m.widget.body.querySelectorAll("div.egraph_views_RootLayer");var o;for(o=0;o<n.length;o++){var p=n.item(o);p.setAttribute("data-rec-id","egraph_views_RootLayer_"+o)}n=m.widget.body.querySelectorAll("[class^='wux-layouts-slidingviews']");for(o=0;o<n.length;o++){var p=n.item(o);p.setAttribute("data-rec-id","wux-layouts-slidingview_"+o)}n=document.body.querySelectorAll("[class^='tooltip']");for(var o=0;o<n.length;o++){var p=n.item(o);p.setAttribute("data-rec-id","tooltip_"+o)}n=document.body.querySelectorAll("[class^='module']");for(var o=0;o<n.length;o++){var p=n.item(o);p.setAttribute("data-rec-id","module_"+o)}}},addTestStubs:function(m){},init:function(q,m,o){var p=this;this.widget=q;this.context=this;this.options=o;this.options.NoContextMenu="true";this.options.modelRevisions="true";this.isWebInWinODTMode=o.isWebInWinODTMode;this.securityContext=null;l.getServices(p);a.app_initialization(function(){l.initTenant(p);a.setTenant(p.tenant)});this.contextMenuObject=null;if(this.options.wintop==true){this.webToWinCom_Socket=l.createWebInWinSocket("webinwinhistory_socket_")}this.options.webToWinComSocket=this.webToWinCom_Socket;this.parentWidget=m;this._parent(o);var s=UWA.createElement("div");this.elements.container=s;s.className="webinwin_history_frame";s.setAttribute("data-rec-id",s.className);this.titleDiv=UWA.createElement("div");this.titleDiv.className="webinwin_history_title";this.titleDiv.setAttribute("data-rec-id",this.titleDiv.className);this.titleDiv.inject(this.elements.container);this.titleWidget=UWA.createElement("h4",{"class":"ebinwin_history_title_widget","data-rec-id":"ebinwin_history_title_widget",text:UWA.i18n("")});this.titleWidget.inject(this.titleDiv);var r={setObjects:function(u,t,v){p.updateObjects(u,t,v)},setTitleFromObject:function(t){if(p.historyMultiPanel.selectedData!==null&&p.historyMultiPanel.selectedData.selectedNodes.length===1){p.setTitleFromObject(t)}else{p.setTitle("  ")}},postUpdateHandler:function(t){if(t.selectedNodes!==undefined){if(t.selectedNodes.length>0){p.okButton.disabled=false}else{p.okButton.disabled=true}}},postVersionExplorerLoadedHandler:function(t){if(t.autoFire===true){if(p.options.SendResultsToCSO==="true"){p.sendSelection(p.historyMultiPanel.selectedData.selectedNodes)}if(p.options.SendResultsToCSODirect==="true"){p.sendSelection(p.historyMultiPanel.selectedData.selectedNodes,true)}if(p.options.OnOkFireCommand!==undefined){l.fireWintopCommandWithArgs(p.webToWinCom_Socket,p.historyMultiPanel.selectedData,p.options.OnOkFireCommand)}l.closePanel(p.webToWinCom_Socket)}}};this.historyMultiPanel=new h(this,q,m,o,r);window.addEventListener("resize",function(t){p.historyMultiPanel.revisionFamily.onResize(t)});this.addTestFunctions(this.historyMultiPanel);if(this.isWebInWinODTMode==true){this.addTestStubs(this.historyMultiPanel)}this.historyMultiPanel.inject(this.elements.container);if(this.options.wintop==true){k(document).ready(function(){k(window).resize(function(){p.historyMultiPanel.revisionFamily.onResize()})})}var n=UWA.createElement("div");n.className="webinwin_version_selector_buttons_div";n.setAttribute("data-rec-id",n.className);this.okButton=new j({label:c.okButton,attributes:{"data-rec-id":"okButton"},displayStyle:"normal",disabled:true,});this.cancelButton=new j({label:c.cancelButton,attributes:{"data-rec-id":"cancelButton"},displayStyle:"normal",});this.cancelButton.inject(n);this.okButton.inject(n);n.inject(this.elements.container);this.okButton.addEventListener("buttonclick",function(){var t={};if(p.options.SendResultsToCSO==="true"){p.sendSelection(p.historyMultiPanel.selectedData.selectedNodes)}if(p.options.SendResultsToCSODirect==="true"){p.sendSelection(p.historyMultiPanel.selectedData.selectedNodes,true)}if(p.options.OnOkFireCommand!==undefined){l.fireWintopCommandWithArgs(p.webToWinCom_Socket,p.historyMultiPanel.selectedData,p.options.OnOkFireCommand)}l.closePanel(p.webToWinCom_Socket)});this.cancelButton.addEventListener("buttonclick",function(){var t={};if(p.options.OnCancelFireCommand!==undefined){l.fireWintopCommandWithArgs(p.webToWinCom_Socket,p.historyMultiPanel.selectedData,p.options.OnCancelFireCommand)}l.closePanel(p.webToWinCom_Socket)})},setTitle:function(m){this.titleWidget.innerHTML=m},setTitleFromObject:function(m){if(m&&m.displayName){this.setTitle(m.displayName+" "+m.revision)}},sendSelection:function(m,n){l.setCSOSelection(this.options.webToWinComSocket,m,n)},reframeHistoryTree:function(){},updateObjects:function(q,o,r){var p=this;if(r==false){this.historyMultiPanel.revisionFamily.setObjects(q)}setTimeout(function(){p.reframeHistoryTree()},1);var m=[];l.getJSONArrayFromSelectionData(p.webToWinCom_Socket,q,m);var n=JSON.stringify(m);this.widget.setValue("Custo_roots_pids",n)},initDatafromWin:function(m){var n=this;var o=[];m.forEach(function(s){var p=s.physicalId;var r=s.name;var q={physicalid:p,name:r,tenant:n.tenant};o.push(q)});this.historyMultiPanel.setObjects(o,false,false);n.historyMultiPanel.addMissingExternalRecIds()},onResize:function(){},onRefresh:function(){},initEnvfromWin:function(n){var m=this},onSetCtxMenuForItem:function(m){var n=0;this.historyMultiPanel.revisionFamily.onSetCtxMenuForItem(m);if(this.historyMultiPanel.revisionFamily.contextMenuObject!==null){n=this.historyMultiPanel.revisionFamily.contextMenuObject.physicalid}},});return f});