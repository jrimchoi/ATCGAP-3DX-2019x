function updateHrefTag(h,b){var a=$("#"+h.id+"proslauncher");var d=h.id;var c=h.dataset.href;var f=h.dataset.title;var g=h.dataset.label;var e=h.dataset.target;var i=buildHrefTag(c,d,e,f,"&#x2713;","left pointer launcherbtn launchersubmitbtn",b);a.replaceWith(i)}function buildHrefTag(b,h,f,g,c,e,a){var d="";h=h+"proslauncher";if(f===""||f==="content"||f==="popup"){d="<button onclick=\"showNonModalDialog('{0}', '930', '650', 'true')\" id='{1}' title='{2}' class='{3}' onclick='hideLauncher();return true;'>{4}</button>".format(b,h,a,e,c)}else{if(f!=="slidein"){d="<button onclick=\"{0};hideLauncher();return false;\" id='{1}' title='{2}' target='{3}' class='{4}'>{5}</button>".format(b,h,a,f,e,c)}else{d="<button onclick=\"getTopWindow().showSlideInDialog('{0}', 'true');hideLauncher();return true;\" id='{1}' title='{2}' class='{3}' onclick='hideLauncher();return true;'>{4}</button>".format(b,h,a,e,c)}}return d}function hideLauncher(){$(".prosactionlauncher").hide();$(".proslauncherMenu").show()}function showLauncher(a){$(".prosactionlauncher").hide();$(".proslauncherMenu").hide();$("#"+a+".prosactionlauncher").fadeIn(1000)}define("DS/ENOProcessStepsUX/scripts/SearchConfiguration",["UWA/Core","UWA/Utils/InterCom","UWA/Class/Model","DS/ENOFrameworkPlugins/jQuery"],function(e,b,d,c){var a=function(f){this.multiSelectVal=f;this.socketName="search_socket_"+(new Date()).getTime();this.socket=new b.Socket(this.socketName,{dispatchRetryInterval:5});this.socket.subscribeServer("SearchComServer");this.listener=this.objectsSelected.bind(this);this.socket.addListener("Selected_Objects_search",this.listener);var g=this.options();this.socket.dispatchEvent("RegisterContext",g)};a.prototype.destroy=function(){var f={};f.widget_id=widget.id;this.socket.dispatchEvent("unregisterSearchContext",f);this.socket.unsubscribeServer("SearchComServer");this.socket.removeListener("Selected_Objects_search",this.listener);this.socket.disconnect()};a.prototype.options=function(j,h,k,g,f){var i={};i.title=j;i.multiSel=this.multiSelectVal;i.mode="furtive";i.app_socket_id=this.socketName;i.widget_id=widget.id;i.default_with_precond=true;i.show_precond=false;i.idcard_activated=false;i.role=k;if(h){i.precond="(";h=h.split(",");c.each(h,function(l,m){if(l!==0){i.precond+=" OR "}i.precond+='flattenedtaxonomies:"types/'+m.trim()+'"'});i.precond+=")";if(f!=""){i.precond+=f}}if(g){i.default_search_criteria=g}return(i)};a.prototype.activate=function(j,i,l,k,h,f){var g=this.options(j,i,l,h,f);this.callback=k;this.socket.dispatchEvent("InContextSearch",g)};a.prototype.isAvailable=function(){return(e.is(this.socket))};a.prototype.objectsSelected=function(k){var f=[];if(this.callback){for(var j=0;j<k.length;j++){var h=[];var g=new d(k[j]);h.push(g.get("id"));h.push(g.get("ds6w:identifier"));h.push(g.get("ds6w:type"));h.push(g.get("ds6w:policy"));h.push(g.get("type_icon_url"));f.push(h)}this.callback(f)}};return(a)});define("DS/ENOProcessStepsUX/scripts/ProcessStep",["DS/ENOFrameworkPlugins/jQuery",],function(b){var a={ProcessStep:function(c){this.allMandTasksComplete=true;b.extend(this,c)},};return a});define("DS/ENOProcessStepsUX/scripts/ProcessStepsUtil",["DS/PlatformAPI/PlatformAPI","UWA/Core","UWA/Class/Promise","DS/i3DXCompassServices/i3DXCompassServices","DS/WAFData/WAFData","DS/UIKIT/Alert"],function(b,g,f,e,a,d){var c={executeOperation:function(h,r,s){var i=document.getElementById("accordianTasks");var k=i.getAttribute("rootObjectId");var u=findFrame(getTopWindow(),"PROSProcessSteps");var m=null;if(!u){u=findFrame(getTopWindow(),"detailsDisplay")}if(!u){m=getTopWindow().location.href}else{m=u.location.href}$.urlParam=function(A){var B=new RegExp("[?&]"+A+"=([^&#]*)").exec(m);if(B!=null){return B[1]||0}else{return""}};var n=$.urlParam("selectedProposedItem");var w=$.urlParam("selectedAffectedItems");var p=jQuery.ajax({url:"./enoPROSProcessStepsActions.jsp?objectId="+h+"&rootobjectId="+k+"&operationName="+r,async:false,cache:false,});if(p){var z=p.responseText;var v="begin_process_msg:";var j=v.length;var q=z.lastIndexOf(v)+j;z=z.substr(q,z.length);var l=":end_process_msg";var t=l.length;var y=z.lastIndexOf(l);var o=z.substr(0,y);if(o){alert(o)}}if(s=="true"){getTopWindow().RefreshHeader();getTopWindow().deletePageCache();var x=null;if(!u){x=getTopWindow().location.href}else{x=u.location.href}if(n&&w){x+="&selectedProposedItem="+n+"&selectedAffectedItems="+w}u.location.href=x}},acceptTask:function(h){submitWithCSRF(h,findFrame(getTopWindow(),"listHidden"));getTopWindow().findFrame(getTopWindow(),"detailsDisplay").location.href=getTopWindow().findFrame(getTopWindow(),"detailsDisplay").location.href},showTooltip:function(k,h){var i=document.getElementById(k);i.style.visibility="visible";if(h!=""){var j=document.getElementById(h);if(j){j.style.visibility="hidden"}showRoute(h)}},hideTooltip:function(k,h){var i=document.getElementById(k);i.style.visibility="hidden";if(h!=""){var j=document.getElementById(h);if(j){j.style.visibility="hidden"}}},showRoute:function(h){var k="&objectId="+h+"&suiteKey=DocumentControl";var i=emxUICore.getDataPost("../questionnaire/enoQuestionnaireExecute.jsp?questionAction=ENODCLDocumentUI:getApproversImage",k);var j=document.getElementById(h+"Images");j.innerHTML=i},openTreePage:function(i){var h="../common/emxTree.jsp?mode=insert&objectId="+i;getTopWindow().showModalDialog(h,250,250,true)},openHistoryPage:function(h){var i="../audittrail/Execute.jsp?executeAction=ENOAuditTrails:preProcessHistory&structuralHistory=false&mode=";i+="&objectId="+h;getTopWindow().showModalDialog(i,250,250,true)},openConditionsPage:function(h){var j="../questionnaire/enoQuestionnaireExecute.jsp?questionAction=ENOQuestionUI:getPromoteBlockingConditionsHTML&validateToken=false&mqlNoticeMode=true&objectId="+h;var k=emxUICore.getDataPost(j);var i=document.getElementById(h+"Blocking");i.innerHTML=k.substring(1);i.style.visibility="visible"},openLifecycle:function(h){var i="../common/emxLifecycle.jsp?toolbar=AEFLifecycleMenuToolBar&header=emxFramework.Lifecycle.LifeCyclePageHeading&export=false";i+="&mode=advanced&objectId="+h;showModalDialog(i,250,250,true)},openEditPage:function(i,k){var h="";if(k=="Change Order"){h+="../common/emxForm.jsp?form=type_ChangeOrderSlidein&formHeader=EnterpriseChangeMgt.Heading.EditCO&HelpMarker=emxhelpchangeorderedit&mode=edit&submitAction=doNothing&preProcessJavaScript=preProcessInEditCO&postProcessJPO=enoECMChangeOrder:coPostProcessJPO&type=type_ChangeOrder&postProcessURL=../enterprisechangemgt/ECMCommonRefresh.jsp?functionality=editCOFromRMB";h+="&objectId="+i+"&parentOID="+i;h+="&emxSuiteDirectory=enterprisechangemgt&suiteKey=EnterpriseChangeMgt&SuiteDirectory=enterprisechangemgt&StringResourceFileId=emxEnterpriseChangeMgtStringResource"}if(k=="Change Action"){h+="../common/emxForm.jsp?form=type_ChangeActionSlidein&formHeader=EnterpriseChangeMgt.Heading.EditCA&HelpMarker=emxhelpchangeactionedit&mode=edit&submitAction=doNothing&type=type_ChangeAction&postProcessURL=../enterprisechangemgt/ECMCommonRefresh.jsp?functionality=editCAFromRMB";h+="&objectId="+i+"&parentOID="+i;h+="&emxSuiteDirectory=enterprisechangemgt&suiteKey=EnterpriseChangeMgt&SuiteDirectory=enterprisechangemgt&StringResourceFileId=emxEnterpriseChangeMgtStringResource"}if(k=="Quality System Document"){h+="../documentcontrol/enoDCLExecute.jsp?dclAction=ENODCLDocumentUI:showDocumentEditView&validateToken=false";h+="&objectId="+i+"&parentOID="+i;h+="&emxSuiteDirectory=enterprisechangemgt&suiteKey=EnterpriseChangeMgt&SuiteDirectory=enterprisechangemgt&StringResourceFileId=emxEnterpriseChangeMgtStringResource"}getTopWindow().showSlideInDialog(h,true);var j=findFrame(getTopWindow(),"DCMyDocumentsTab");j.emxEditableTable.refreshStructureWithOutSort()},openViewPage:function(i){var h="../common/emxTree.jsp?mode=insert&objectId="+i;h=h+"&HelpMarker=emxhelpchangeorderedit";getTopWindow().showModalDialog(h,250,250,true)},openViewPageDiv:function(h){var k="&objectId="+h+"&suiteKey=DocumentControl";var i=emxUICore.getDataPost("../questionnaire/enoQuestionnaireExecute.jsp?questionAction=ENODCLDocumentUI:getBasicProperties",k);var j=document.getElementById(h);j.innerHTML=i;j.style.visibility="visible"},format:function(){var i=arguments[0];var h=arguments;return i.replace(/{(\d+)}/g,function(j,k){return typeof h[k]!="undefined"?h[k+1]:j})},resizeIframe:function(j){var i=j.contentDocument?j.contentDocument:j.contentWindow.document;var h=getDocHeight(i);j.style.height=h+"px"},getDocHeight:function(k){k=k||document;var i=k.body,j=k.documentElement;var h=Math.max(i.scrollHeight,i.offsetHeight,j.clientHeight,j.scrollHeight,j.offsetHeight);return h},getDelimitedStringFromList:function(h,i){var k=h;if(k.length>1){var j=(k.toString()).split(",");k=j.join(i)}return k},getNonNullValue:function(h){if(h==null){return""}else{return h}},getStepTitleImage:function(h){if(statusIconImage==null){return""}else{h='<img src="../common/images/'+h+'" width="16px" height="15px" alt=""/>'}},getStatusIcon:function(l,m,o,k){var h=l.status;var i=l.taskType;var j="false";var n="";if(m==="false"&&o==="false"){j="true"}if(i==="Optional"){if(h==="OK"){n="iconcircle complete checked icon"}else{n="iconcircle ps-active alert-iconcircle icon"}}else{if(o==="true"){n="iconcircle complete checked icon"}else{if(m==="true"||j==="true"){if(m==="true"&&h==="OK"){n="iconcircle complete checked icon"}else{if(h==="WIP"||h==="NA"||h==="hold"){n="iconcircle pendingArrow icon"}else{if(h==="KO"){n="iconcircle stopped error icon"}else{if(h==="stop"){if(m==="true"){n="<div class='octagonStatus'><div class='octagon'></div></div>"}else{n="iconcircle future icon"}}else{n="iconcircle future icon"}}}}}}}if(m==="true"&&h==="stop"){return n}if(k){n+=" disabled"}return"<div class='{0}'></div>".format(n)},getTitleTag:function(i,h,j){if(h&&j){return i+'&nbsp;&nbsp;<div class="'+h+'">'+j+"</div>"}else{return i}},makeWSCall:function(n,w,u,l,p,s,t,r,h,x,j){var m=n;var v="";if(!j){v="POST"}else{v=j}var o="enovia";var q="application/json";var i=new Date().getTime();if(m.indexOf("?")==-1){m=m+"?tenant="+u+"&timestamp="+i}else{m=m+"&tenant="+u+"&timestamp="+i}if(!l){l=""}if(!u){u=""}if(!w){w=""}s=s||function(){};t=t||function(){};var y="en";if(typeof widget!=="undefined"){y=widget.getValue("lang");if(widget.lang){y=widget.lang}}var k={};k.method=v;k.timeout="";k.type="json";if(o){k.auth={passport_target:o}}k.proxy=w;if(l){k.headers={Accept:"application/json","Content-Type":q,SecurityContext:l,"Accept-Language":y}}else{k.headers={Accept:"application/json","Content-Type":q,"Accept-Language":y}}if(p){k.data=p}k.onComplete=function(z){console.log("Success calling url: "+m);console.log("Success data: "+JSON.stringify(z));s(z,JSON.parse(p),r,h)};k.onFailure=function(A,z){console.log("Error in calling url: "+m);console.log("Additional Details:: httpMethod: "+v+" authentication: "+o+" securityContext: "+l+" ContentType: "+q);console.log("Error Detail: "+A);console.log("Error Data: "+JSON.stringify(z));t(A,z)};k.onTimeout=function(){console.log("Timedout for url: "+m)};if(x!=null){k.async=x}else{k.async=true}a.authenticatedRequest(m,k)},FileDropSelectHandlerColumn:function(p,i,u,s,q,l,m,t,o,n,j,r,k,h){c.functionOne(p,i,u,s,q,l,m,t,o,n,j,r,k,"");c.functionTwo(s)},functionOne:function(q,j,w,u,s,m,n,v,p,o,k,t,l,i){var h=$.Deferred();FileSelectHandler(q,j,w,u,s,m,n,v,p,o,k,t,l,i);return h},functionTwo:function(h){c.onfileDrop(h)},onDragLeaveFile:function(i,h){FileDragHoverColumn(i,h)},onfileDrop:function(k){var l=document.getElementById(k);l.className="dropProgressColumn";var j=document.getElementById(k).children;for(var h=0;h<=j.length-1;h++){j[h].parentNode.removeChild(j[h])}j=document.getElementById(k).children;for(var h=0;h<=j.length-1;h++){j[h].parentNode.removeChild(j[h])}},refreshFrame:function(){var h=findFrame(getTopWindow(),"detailsDisplay");h.location.href=h.location.href},getObjectHref:function(h,i){return"<a href='#' class='callout-link' objectid='{0}'>{1}</a>".format(h,i)},isWidget:function(){var i="";try{i=widget}catch(h){}return i},error:function(h){this.message(h,"error")},success:function(h){this.message(h,"success")},warn:function(h){this.message(h,"warning")},info:function(h){this.message(h,"primary")},message:function(j,i){if(this.alertPS!=null){this.alertPS.hide()}var h=true;if(i=="error"){h=false}this.alertPS=new d({closable:true,visible:true,autoHide:h,hideDelay:5000,className:"wp-alert"}).inject(document.body,"top");this.alertPS.add({className:i,message:j})},};return c});define("DS/ENOProcessStepsUX/scripts/PlatformServices",["UWA/Core","UWA/Promise","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices",],function(b,a,d){var c=function(){};c.prototype.initializePlatform=function(e){var f=this;d.getPlatformServices({onComplete:function(g){if(g===null){g.options=e;var j=e.onFailure;j("cannot retrieve platform data")}else{var i={};f.platformurls=i.platformurls=g[0];widget.platformServices=f;i.options===e;var h=e.onComplete;h(i)}},onFailure:function(g){var h=e.onFailure;h(g)}})};c.prototype.get3DSpaceURL=function(){return this.getURL("3DSpace")};c.prototype.getTenantId=function(){return this.getURL("platformId")};c.prototype.getURL=function(e){return this.platformurls[e]||""};c.prototype.getCurrentUser=function(){return new Promise(function(f,e){d.getUser({onComplete:function(g){f({id:g.id,email:g.email,firstName:g.firstname,lastName:g.lastname})},onFailure:e})})};return c});define("DS/ENOProcessStepsUX/scripts/ProcessStepsModals",["DS/UIKIT/Form","DS/UIKIT/Modal","UWA/Core","i18n!DS/ENOProcessStepsUX/assets/nls/ProcessSteps","DS/UIKIT/Input/Button"],function(d,c,f,e,b){var a={modalHeader:null,modalFooterButtons:null,modalBody:null,modalObject:null,_createModal:function(){var g=a.createFooterButtons();this.modalObject=new c({closable:true,header:"<h4>"+a.modalHeader+"</h4>",body:a.createModalBody(),footer:g,events:{onHide:function(){a.modalObject.destroy()}.bind(a.modalObject)}});return this.modalObject},createFooterButtons:function(){var g=a.modalFooterButtons;var j=[];for(var h=0;h<g.buttons.length;h++){if(g.buttons[h].buttonValue=="Cancel"){j[h]=new b({value:e.PS_Cancel,events:{onClick:function(){a.modalObject.hide()}}})}else{j[h]=new b({value:g.buttons[h].buttonValue,className:"primary",})}}return j},createModalBody:function(){var l="";var g=a.modalBody.mBody;var k=[];for(var h=0;h<g.length;h++){var j=false;var m=g[h].fieldType;if(m==="textarea"){j=true}k[h]={type:g[h].fieldType,value:g[h].fieldValue,label:g[h].fieldLabel,placeholder:g[h].fieldPlaceHolder,className:g[h].fieldClassName,rows:g[h].fieldRows,html:g[h].html,required:j,}}l=new d({fields:k,events:{onInvalid:function(){var i=this;alert(e.PS_MandFieldMissing_error)},}});return l},clearModalValues:function(){this.modalHeader=null;this.modalFooterButtons=null;this.modalBody=null;this.modalObject=null}};return a});define("DS/ENOProcessStepsUX/scripts/ProcessTask",["DS/ENOFrameworkPlugins/jQuery",],function(b){var a={ProcessTask:function(c){this.calloutFlag=false;this.parentCalloutFlag=false;b.extend(this,c)},};return a});define("DS/ENOProcessStepsUX/scripts/ProcessStepsSpinner",["DS/UIKIT/Mask"],function(b){var a={wait:false,keepActive:false,doWait:function(c,d){if((a.keepActive===false)&&(a.isWaiting())){a.endWait(c)}else{if(a.isWaiting()){return}}b.mask(c,d);a.wait=true},endWait:function(c){if(a.isWaiting()){b.unmask(c);a.wait=false;a.keepActive=false}},isWaiting:function(){return a.wait}};return a});define("DS/ENOProcessStepsUX/scripts/DCLFileContentView",["css!DS/ENOProcessStepsUX/ENOProcessStepsUX","DS/ENOProcessStepsUX/scripts/ProcessStepsUtil","DS/UIKIT/Accordion","DS/ENOFrameworkPlugins/jQuery","i18n!DS/ENOProcessStepsUX/assets/nls/ProcessSteps",],function(b,d,a,f,c){var e={_loadDocumentFiles:function(j){var n=j;var l=n.renderTo;var g=new UWA.Element("div",{styles:{height:"10%",width:"99.9%"}});g.setAttributes({id:"divForReferenceView"});var k="";var i=j.myAppsURL+"/resources/dclProcessSteps/DCLProcessStepsService/getFileContentsData";var h=function(w,v,x,r){var J=w.data;var I=JSON.parse(J);var A=new UWA.Element("table",{styles:{width:"100%",cursor:"default",padding:"0px"}});var B="";try{B=widget}catch(E){}var t=[];if(!B){t=[c.PS_FileName,c.PS_Type,c.PS_Version,c.PS_Actions,c.PS_Comments,c.PS_Originator,c.PS_ModifiedDate,c.PS_FileSize]}else{t=[c.PS_FileName,c.PS_Type,c.PS_Version,c.PS_Comments,c.PS_Originator,c.PS_ModifiedDate,c.PS_FileSize]}var o=document.createElement("tbody");var p=document.createElement("tr");for(var G=0;G<t.length;G++){var u=document.createElement("td");u.style.height="1px";u.style.border="0 solid #fff";u.style.borderLeftWidth="1px";u.style.borderBottomWidth="1px";u.style.padding="5px 8px 5px 8px";var z=document.createElement("div");z.style.top="0px";u.appendChild(z);var y=document.createTextNode(t[G]);z.appendChild(y);p.appendChild(u)}p.style.backgroundColor="#e2e4e3";p.style.fontWeight="bold";o.appendChild(p);for(var G=0;G<I.length;G++){var H=I[G].FileContents;for(var D=0;D<H.length;D++){if(!B){k=[H[D]["attribute[Title]"],H[D].type,H[D].revision,H[D].actionLink,H[D].comments,H[D].owner,H[D].modified,H[D].size]}else{k=[H[D]["attribute[Title]"],H[D].type,H[D].revision,H[D].comments,H[D].owner,H[D].modified,H[D].size]}var K=document.createElement("tr");K.style.backgroundColor="#f4f5f6";for(var F=0;F<k.length;F++){var s=document.createElement("td");s.style.height="1px";s.style.border="0 solid #fff";s.style.borderLeftWidth="1px";s.style.borderBottomWidth="1px";s.style.padding="5px 8px 5px 8px";var q=document.createElement("div");q.style.top="0px";s.appendChild(q);q.innerHTML=k[F];K.appendChild(s);o.appendChild(K)}}}A.addContent(o);var C=new a({className:"styled divided filled",items:[{title:c.PS_FileContent,content:A,selected:true}],events:{onOpen:function(){},onClose:function(){}},}).inject(g);x.appendChild(g)};var m=function(p,o){console.log("onFailureCallback:errDetailds:"+p)};d.makeWSCall(i,n.proxy,n.tenant,n.securityContext,JSON.stringify(j),h,m,l)},};return e});define("DS/ENOProcessStepsUX/scripts/Settings",["UWA/Class","UWA/Promise","DS/ENOProcessStepsUX/scripts/PlatformServices","DS/WAFData/WAFData",],function(d,f,c,i){var a=d.singleton({init:function h(){this.isPlatformInitialized=true},getSetting:function l(m){return widget[m]||""},getPlatformURLs:function k(){return this.getSetting("platformServices")},loadPlatformServices:function g(n){var m=this.getSetting("platformServices");if(m==""){this.addplatformService(n)}else{n(m)}},addplatformService:function e(p){var o=this;var n=function(){return new f(function(s,r){var q={onComplete:s,onFailure:r};c.prototype.initializePlatform(q)})};var m=function(q){return new f(function(u,t){var s=a.getPlatformURLs();var r={url:s.get3DSpaceURL()+"/resources/pno/person/getsecuritycontext?tenant="+s.getTenantId(),onComplete:function(v){var w=JSON.parse(v);if(!widget.getValue("pad_security_ctx")){a.addSetting("pad_security_ctx",w.SecurityContext)}u(v)},onFailure:t};a.callCustomService(r)})};n().then(m).then(function(q){p(o)},function(q){console.log(q)})},addSetting:function b(m,o){var n=this;if(!n.isPlatformInitialized){throw new Error("Platformservices not initialized")}if(widget[m]){console.log("Setting is already in use")}widget[m]=o},callCustomService:function j(m){m.method=m.method||"GET";m.headers=m.headers||{Accept:"application/json"};m.proxy=m.proxy||"passport";if(!m.withoutSC){m.SecurityContext=a.getSetting("pad_security_ctx")}i.authenticatedRequest(m.url,m)},});return a});define("DS/ENOProcessStepsUX/scripts/ProcessStepsWidgetActions",["DS/ENOProcessStepsUX/scripts/SearchConfiguration","css!DS/ENOProcessStepsUX/ENOProcessStepsUX","DS/UIKIT/SuperModal","DS/ENOProcessStepsUX/scripts/ProcessStepsModals","DS/ENOProcessStepsUX/scripts/ProcessStepsUtil","UWA/Core","DS/ENOProcessStepsUX/scripts/Settings","DS/ENOProcessStepsUX/scripts/ProcessStepsSpinner","i18n!DS/ENOProcessStepsUX/assets/nls/ProcessSteps","DS/Panels/SidePanel"],function(e,i,b,f,k,h,a,d,g,c){var j={callback:function(l){alert("back...")},executeViewAction:function(p){var s=p.currentTarget.attributes[0].value;var l=s.split(":");var q=l[0];var t=l[1];var o=p.currentTarget.attributes[1].value;var r=p.currentTarget.attributes[2].value;var m=p.currentTarget.attributes[3].value;var n={refJS:q,refMethod:t,title:r};n.viewObjectId=m;if(o=="slideIn"){j.openActionInSlideIn(n)}else{if(o=="popup"){j.openActionInPopup(n)}else{j.executeAction(n)}}},refresh:function(){var l=a.getSetting("data");var m=l.renderTo;m.innerHTML="";require(["DS/ENOProcessStepsUX/scripts/ProcessStepsView"],function(n){n.prototype._createView_ProcessSteps(l)})},executeTaskAction:function(n){var r=j.refresh;var t=n.currentTarget.attributes[0].value;var l=t.split(":");var o=l[0];var u=l[1];var m=n.currentTarget.attributes[1].value;var s=n.currentTarget.attributes[2].value;var q=n.currentTarget.attributes[3].value;var p={refJS:o,refMethod:u,title:s};p.refresh=r;p.actionObjectId=q;p.that=this;if(m=="slideIn"){j.openActionInSlideIn(p)}else{if(m=="popup"){j.openActionInPopup(p)}else{j.executeAction(p)}}},executeAction:function(l){require([l.refJS],function(o){var p=l.refMethod;try{var m=new o();m[p](l)}catch(n){(o[p](l))}})},openActionInPopup:function(l){var p=new UWA.Element("div",{});var o="";for(var n in o){l[n]=o[n]}l.renderTo=p;require([l.refJS],function(s){var t=l.refMethod;try{var q=new s();q[t](l)}catch(r){(s[t](l))}});var m=new b({renderTo:widget.body});m.dialog({body:p,title:l.title,})},openActionInSlideIn:function(v){var r=new UWA.Element("div",{});var q={};for(var t in q){v[t]=q[t]}v.renderTo=r;require([v.refJS],function(y){var z=v.refMethod;try{var w=new y();w[z](v)}catch(x){(y[z](v))}});var n=new c({side:"right","z-index":1000,width:300});n.appendChild(r);n.elements.container.children[0].style.height="100%";n.elements.container.children[1].style.height="100%";n.elements.content.classList.add("sidepanel-content-wrapper");n.elements.container.children[0].classList.add("sidepanel-content");var p=new UWA.Element("div",{"class":"modal modal-root",styles:{display:"block",}});var l=new UWA.Element("div",{"class":"modal-overlay in",});var o=UWA.createElement("div",{id:"sidePanelData","class":"modal-wrap",});var s=UWA.createElement("div",{id:"sidePanel-container",});widget.body.appendChild(s);o.empty();n.inject(o);o.inject(p);p.inject(s);l.inject(s);var u=new UWA.Element("div",{text:v.title,"class":"action-bar",}).inject(r);var m=new UWA.Element("div",{"class":"preview-icon fonticon fonticon-cancel btn-without-label btn-with-icon actionsContainer",events:{click:function(){var w=document.getElementById("sidePanel-container");w.destroy()},}}).inject(u)},promote:function(n){var o=n.actionObjectId;o=(o!=undefined&&o!=null)?o.replace("pid:",""):"";var m=a.getPlatformURLs().get3DSpaceURL()+"/resources/lifecycle/maturity/promote";var q='{ "data" : [{ "physicalid":"","tostate":""}]}';var l=JSON.parse(q);l.data[0].physicalid=o;l.data[0].tostate="In Work";l=JSON.stringify(l);var p=function(v){d.endWait(widget.body);var s=v.status;if(s=="failure"){var u=v.report[0].error;k.error(u)}else{var t=n.refresh;t()}};var r=function(t,s){d.endWait(widget.body)};d.doWait(widget.body);k.makeWSCall(m,"passport","OnPremise","VPLMAdmin.MyCompany.Default",l,p,r,"")},setApproveOrRejectFortask:function(m,t,r){var o=h.extendElement(document.body).getElements(".reason_input");var l=t.actionObjectId;if(o!=null&&o[0]&&o[0].value==""){o[0].getParent(".form-group").addClassName("has-error");k.warn(g.PS_CommentsMissing_error)}else{var q=JSON.stringify({action:m,comments:"Done"});var p=function(v){var u=v.errorMessage;if(u!=null&&u!=""){k.error(u)}};var s=function(v){d.endWait(widget.body);var u=t.refresh;u()};var n=a.getPlatformURLs().get3DSpaceURL()+"/resources/modeler/change/inboxtask/pid=pid:"+l;d.doWait(widget.body);k.makeWSCall(n,"passport","OnPremise",a.getSetting("pad_security_ctx"),q,s,p,null,null,null,"PUT");if(r){r.destroy()}}},handleContextMenuClickApprove:function(l){var n="";var m=null;l.that.setApproveOrRejectFortask("Approve",l,m)},handleContextMenuClickReject:function(l){var n="";f.clearModalValues();f.modalHeader="Reject";n="Comments for Reject";f.modalFooterButtons={buttons:[{buttonValue:"Done",buttonEvent:""},{buttonValue:"Cancel",buttonEvent:""}]};f.modalBody={mBody:[{fieldType:"textarea",fieldLabel:"Comments",fieldValue:"",fieldPlaceHolder:n,fieldClassName:"reason_input",fieldRows:"3"}]};var m=f._createModal();m.inject(widget.body).show();jQuery(".reason_input")[0].focus();m.elements.footer.childNodes[0].addEventListener("click",function(){l.that.setApproveOrRejectFortask("Reject",l,m)})},handleContextMenuClickAccept:function(o){var m="pid:"+o.actionObjectId;var p=a.getPlatformURLs().get3DSpaceURL()+"/resources/modeler/change/inboxtask/accept/"+m;var l="";var n=function(r){var q=o.refresh;q();k.success("CA_NLS.ECM_CA_Task_Accept_Success");d.endWait(widget.body)};d.doWait(widget.body);k.makeWSCall(p,"passport","OnPremise",a.getSetting("pad_security_ctx"),null,n,null,null,null,null,"PUT")},handleContextMenuClickRestart:function(l){},openProperties:function(l){var n=new UWA.Element("div",{});var m="6D7EB156533500008299525CB5F80D00"},search:function(t){var r="";var o="proposed";var m=true;var n="Quality System Document";var s=new e(m);var l="VPLMProjectLeader";var p=null;var q=j.callback;s.activate("Add Reference Document",n,l,q,p,r)},};return j});define("DS/ENOProcessStepsUX/scripts/ProcessSteps",["DS/ENOProcessStepsUX/scripts/ProcessStepsUtil","DS/ENOProcessStepsUX/scripts/ProcessStep","DS/ENOProcessStepsUX/scripts/ProcessTask","DS/PlatformAPI/PlatformAPI","UWA/Core","UWA/Data","UWA/Class/Promise","DS/i3DXCompassServices/i3DXCompassServices","DS/ENOFrameworkPlugins/jQuery","css!DS/ENOProcessStepsUX/ENOProcessStepsUX","i18n!DS/ENOProcessStepsUX/assets/nls/ProcessSteps","DS/ENOProcessStepsUX/scripts/ProcessStepsWidgetActions",],function(j,i,g,l,f,k,h,a,c,e,m,d){var b={loadReferenceView:function(o,r,t,p){var s=b.getInputDataJSON(o,r,"","","",p);var n=p.myAppsURL+"/resources/processSteps/ProcessStepsService/getReferenceViewURL";var q=function(E,G,x,A){var H=E.data;var C=JSON.parse(H);var D=C[0].RefernceJS;var F=C[0].RefernceMethod;var w=C[0].AMD;var y=document.getElementById("ReferenceView");if(y==null){y=x}if(w=="false"){document.getElementById("ReferenceView").innerHTML="";c("#ReferenceView").load(D,{objectId:o,MCSURL:p.myAppsURL})}else{var B="";var z=D;var v=F;require([z],function(I){var J=I[v];s=JSON.parse(s);s.renderTo=y;B=J(s);return B})}};var u=function(w,v){console.log("onReferenceViewFailureCallback:errDetailds:"+w)};j.makeWSCall(n,p.proxy,p.tenant,p.securityContext,s,q,u,t)},loadProcessSteps:function(n,q,t,p){var s=b.getInputDataJSON(n,q,"","","",p);var o=p.myAppsURL+"/resources/processSteps/ProcessStepsService/getProcessStepsData";var u=function(w,v){console.log("onFailureCallback:errDetailds:"+w)};var r=function(aL,Q,av,aR){var ak=aL.data;var Z=JSON.parse(ak);var G=b.getCarouselDiv();for(var W=0;W<Z.length;W++){var af=Z[W].ProcessSteps;var U=b.getHeaderHTML();var aS;var aG;var aB;var C=af.length;var aI=b.getDefaultLoadedStepNumber(i,af);for(var V=0;V<af.length;V++){var Y=new i.ProcessStep(af[V]);var A=Y.sequenceNumber;var az=Y.title;var w=Y.titleImage;var E=Y.description;var H=V+1;var L=Y.objectIds;var aa=Y.stepXMLStateSymName;var T=Y.isActiveStep;var I=Y.isElapsedStep;var S=Y.isStoppedStep;var aA=Y.isWaitingStep;var y=!(Y.isActiveStep==="true"||Y.isElapsedStep==="true"||Y.isStoppedStep==="true"||Y.isWaitingStep==="true");var at=Y.stepXMLPolicySymName;var ax="graph";var aT="";console.log("stepTitle:"+az);if(T=="true"){aG=V+1;ax="graph active ps-active";if(V===aI-1){ax+=" activegraphring loaded";aS=Y}if(S=="true"){ax="graph stopped";if(V===aI-1){ax+=" stoppedgraphring loaded";aS=Y}}}else{if(I=="true"){ax="graph complete";if(V===aI-1){ax+=" completegraphring loaded";aS=Y}}else{ax="graph";if(V===aI-1){ax+=" futuregraphring loaded";aS=Y}}}var aQ=V==0?"":"-->";var aP=V==af.length-1?"<!---->":"<!--";var ay=j.getDelimitedStringFromList(L,"|");if(aS==null&&V==af.length-1){aS=af[V];aG=V+1}G+=aQ;G+='<div step="'+az+'" ';G+='sequence="'+A+'" ';G+='stepnumber="'+H+'" ';G+='objectId="'+ay+'" ';G+='policy="'+at+'" ';G+='state="'+aa+'" ';G+='isactive="'+T+'" ';G+='iselapsed="'+I+'" ';G+='isstopped="'+S+'" ';G+='isfuture="'+y+'" ';G+='totalnumsteps="'+C+'" ';G+='selectedAffectedItems="'+j.getNonNullValue(q)+'" ';G+='class="'+ax+'"><span>'+H+"</span>";if(aA){if(!j.isWidget()){G+='<div class=\'octagonBadge\' onclick="{0}" title="{1}">'.format(Y.dependencyHref,Y.dependencyLabel)}else{G+="<div class='octagonBadge' title=\"{1}\">".format(Y.dependencyHref,Y.dependencyLabel)}G+="<div class='octagon'></div></div>"}G+="</div>"+aP}G+="</div>";G+='<div class="steptitle">';var x="titletext";for(var V=0;V<af.length;++V){var Y=new i.ProcessStep(af[V]);var az=Y.title;var T=Y.isActiveStep;var I=Y.isElapsedStep;var S=Y.isStoppedStep;if(T=="true"){x="titletext textactive";if(S=="true"){x="titletext textstopped"}}else{if(I=="true"){x="titletext textcomplete"}else{x="titletext textfuture"}}G+='<div class="'+x+'">'+az+"</div>"}G+="</div>";G+='<div class="summary">';for(var V=0;V<af.length;++V){var Y=new i.ProcessStep(af[V]);var E=Y.description;G+='<div class="titletext summary">'+j.getNonNullValue(E)+"</div>"}G+="</div>";G+="</div>";G+='<div id="go-right" class="sliderarrows next"></div>';G+="</div>";var K="tablebanner";var J="tasktable";if(aS){if(aS.isActiveStep=="true"){K=K+" tablebanneractive";J+=" tasktableactive";if(aS.isStoppedStep=="true"){K=K+" tablebannerstopped";J+=" tasktablestopped"}}else{if(aS.isElapsedStep=="true"){K=K+" tablebannercomplete";J+=" tasktablecomplete"}else{K=K+" tablebannerfuture";J+=" tasktablefuture"}}var O="pointleft";var ar="pointright";if(aI=="1"){O=""}else{if(aI==C){ar=""}}var az=aS.title;G+=b.getAccordianTasksDiv();G+=b.getTableBannerContent(aI,az,C,aS.isActiveStep,aS.isElapsedStep,aS.isStoppedStep);G+='<table id=taskTable class="'+J+'">';G+=U;var ap=aS.stepTasks;var au=[];var ab=[];var X=true;for(var V=0;V<ap.length;V++){var aJ=new g.ProcessTask(ap[V]);var N=ap[V].ignore;if(N){continue}if((aJ.taskType==="Mandatory"||aJ.taskType==="Dependency")&&aJ.status!=="OK"){ab.push(aJ);if(X==true){X=false}}var F=null;if(ap[V].dependeeType&&ap[V].dependeeType==="all"){F=[];F.push.apply(F,ab)}else{if(ap[V].dependeeTasks){F=ap[V].dependeeTasks}}var aN=!(aS.isActiveStep==="true"||aS.isElapsedStep==="true"||aS.isStoppedStep==="true"||aS.isWaitingStep==="true");var aH=b.getCallout(aJ,F,au,aS.isActiveStep,aS.isElapsedStep,aN);var aD=aH||aJ.parentCalloutFlag===true?true:false;var z=b.getTaskAction(aJ,aH);if(aJ.calloutFlag===true||aJ.parentCalloutFlag===true){au.push(aJ.sequenceNumber)}var ac=j.getStatusIcon(aJ,aS.isActiveStep,aS.isElapsedStep,aD);var ai=aJ.formattedDueDate;var al=aJ.formattedDueDateClass;var aF=j.getTitleTag(aJ.title,al,ai);var aq=aD||aN||aJ.status==="NA"||aJ.status==="hold"?"disabled":"";G+="<tr>";G+='<td width="2%">'+ac+"</td>";G+="<td><span class={0}>".format(aq)+aF+"</span><span class='callout-holder'>{0}</span></td>".format(aH);var aC=aJ.taskType;if(aC=="Mandatory"||aC=="routetask"){aC=m.PS_Mandatory}else{if((aC=="Optional")){aC=m.PS_Optional}else{aC=m.PS_Dependency}}G+="<td class={0}>".format(aq)+j.getNonNullValue(aC)+"</td>";if(!j.isWidget()){G+="<td class={0}>".format(aq)+z+"</td>";G+="<td class={0}>".format(aq)+j.getNonNullValue(aJ.viewHref)+"</td>"}else{if(!aJ.actionLauncher){var aM=aJ.dashboardActionImage;var P=aM.split("@");var B=aJ.dashboardActionHref;var an=B.split("@");var ah=aJ.dashboardActionTargetLocation;var v=ah.split("@");var aj=aJ.dashboardActionLabel;var ad=aj.split("@");G+="<td class={0} taskAction".format(aq)+" >";for(W=0;W<P.length;W++){G+="<span href='"+an[W]+"' targetlocation='"+v[W]+"' title='"+ad[W]+"'  actionobjectId='"+aJ.actionObjectId+"' actionClick='true' class='"+P[W]+"' > </span>"}G+="</td>"}else{z=b.getLauncherDiv(aJ.actionLauncher,aJ.dashboardActionLabel);G+="<td class={0} taskAction".format(aq)+" >";G+="<div > "+z+" </div>";G+="</td>"}var aK=aJ.dashboardViewImage;var ao=aK.split("@");var D=aJ.dashboardViewHref;var R=D.split("@");var ae=aJ.dashboardViewTargetLocation;var am=ae.split("@");var aE=aJ.dashboardViewLabel;var aO=aE.split("@");G+="<td class={0} taskAction".format(aq)+" >";for(W=0;W<ao.length;W++){G+="<span amdhref='"+R[W]+"' targetlocation='"+am[W]+"' title='"+aO[W]+"'  viewObjectId='"+aJ.viewObjectId+"' viewClick='true' class='"+ao[W]+"' >";if(ao[W]&&ao[W].indexOf("http")>=0){G+="<img src='"+ao[W]+"' ></img>"}G+="</span>"}G+="</td>"}G+="<td class={0}>".format(aq)+b.getOwnerImageDiv(ap[V].ownerImageURL,aJ.title,ap[V].ownerEmailId,ap[V].ownerImageTooltip)+"<div class='owner-name'>"+j.getNonNullValue(ap[V].owner)+"</div></td>";G+="<td class={0}>".format(aq)+j.getNonNullValue(aJ.role)+"</td>";G+=" </tr>"}}else{K=K+" tablebannercomplete";J+=" tasktablecomplete";G=b.getAccordianTasksDiv();G+='<div id=taskTableBanner class="'+K+'">';G+='<p class="alignleft m-all-0">'+aG+". "+az+"</p>";G+='<div class="alignright">';G+='<div class="'+O+'"></div>';var aw=m.PS_Step+" {0} "+m.PS_of+" {1}";aw=aw.format(aG,C);G+='<p class="m-all-0 left p-l-half p-r-half">'+aw+" </p>";G+='<div class="'+ar+'"></div>';G+="</div>";G+="</div>";G+='<table id=taskTable class="'+J+'">';G+=U}G+="</table>";G+="</div>";G+="</div>";G+="</div>";G+="</div>";c("#accordianTasks").html(G);if(av){var ag=new UWA.Element("div",{styles:{height:"100%",width:"99.9%"}});ag.setAttributes({id:"divForProcessSteps"});var M=b.getReferencetableDiv();ag.addContent(M);ag.addContent(G);ag.inject(av)}b.checkOverflow(true);b.attachEventHandlers(av,p);c(".loading").remove();return G}};j.makeWSCall(o,p.proxy,p.tenant,p.securityContext,s,r,u,t)},attachEventHandlers:function(o,n){c(".graph").mouseover(function(){b.highlightStep(c(this))});c(".graph").mouseout(function(){b.unhighlightStep(c(this))});c(".graph").click(function(){b.loadTasksForStep(c(this),o,n)});c("#go-right").click(function(){b.slideOnX("right")});c("#go-left").click(function(){b.slideOnX("left")});c(window).resize(function(){b.checkOverflow("true")});b.attachTaskTableEventHandlers(n.myAppsURL,n.proxy,n.tenant,n.securityContext,o,n)},attachTaskTableEventHandlers:function(u,q,s,t,o,v){var r=c(".callout-link").attr("objectid");c(".pointleft").click(function(){b.loadPrevStep(u,q,s,t,o,v)});c(".pointright").click(function(){b.loadNextStep(u,q,s,t,o,v)});var n;var p=500;c(".redflag").hover(function(){n=setTimeout(function(){b.showCallout()},p);return false},function(){clearTimeout(n);return false});c(".boxclose").click(function(){b.hideCallout();return false});c(".callout-link").click(function(){j.openViewPage(r);return false});c(".launcherradiobtn").click(function(){b.updateHrefTag(this,c(".launcherradiobtn").attr("submitLabel"))});c(".left.pointer.launcherbtn").click(function(){b.hideLauncher()});c(".proslauncherMenu").click(function(){b.showLauncher(this.name)});c(".dashboardLauncherAction").click(function(w){d.executeTaskAction(w)});c(".accepttask").click(function(){j.acceptTask(c("[title=Promote]").attr("accepturl"))});c("[href*='executeOperation']").click(function(){j.executeOperation(this.attributes.objectid.value,"promote","true")});c(".referencedocument").on("drop",(function(){var w=document.getElementById("divDrag10,1");w.className="dropProgressColumn";j.FileDropSelectHandlerColumn(event,c(".dropAreaColumn").attr("objectid"),"formDrag10,1","divDrag10,1","id[level1]=1,1.expandRow","0,0","null","Quality System Document","","","","","DOCUMENTS","isValidDnDOperation");w.className="dropAreaColumn"}));c(".checkinfile").on("drop",(function(){var w=document.getElementById("divDrag00,0");w.className="dropProgressColumn";j.FileDropSelectHandlerColumn(event,c(".dropAreaColumn").attr("objectid"),"formDrag00,0","divDrag00,0","id[level1]=1,1.expandRow","0,0","null","Quality System Document","","","","","DOCUMENTS","isValidDnDOperation");w.className="dropAreaColumn"}));c(".checkinfile").on("dragleave",(function(){j.onDragLeaveFile(event,"divDrag00,0")}));c("[actionClick='true']").click(function(w){d.executeTaskAction(w)});c("[viewClick='true']").click(function(w){d.executeViewAction(w)})},loadTaskCompleteCallback:function(o,n,r,p,q){},checkOverflow:function(p){var q=document.getElementsByClassName("slider")[0];if(q){var x=q.style.overflow;if(!x||x==="visible"){q.style.overflow="hidden"}var o=q.clientWidth<q.scrollWidth;q.style.overflow=x;var t=c("div.slider").position();var B=c("div.carousel").position();if(!o){var u=c("div.slider").width();var r=c("div.carousel").width();if(t.left!=parseInt(B.left)-4){o=true}else{if(u>r){o=true}}}if(o){c("#go-left").css("visibility","visible");c("#go-right").css("visibility","visible")}else{c("#go-left").css("visibility","hidden");c("#go-right").css("visibility","hidden")}if(p){var w=c("div.loaded").outerWidth(true);var C=c("div.loaded").attr("stepnumber");var s=w*C;var y=c("div.loaded").offset();var A=c("div.slider");var v=b.getTranslatedX(A);var D=0;var z=v+s-w;var n;if(z<parseInt(B.left)){D=parseInt(B.left)-z;n=v+D}else{D=v+s-q.clientWidth;if(D>0){n=v-D}}if(typeof n!="undefined"&&n!==v&&D>4){b.doTranslateX(A,n)}}}},loadNextStep:function(t,q,r,s,n,u){var v=c(".loaded").attr("stepnumber");var p=parseInt(v,10)+1;var o=c("div[stepnumber='"+p+"']");b.loadTasksForStep(o,n,u);b.checkOverflow(true)},loadPrevStep:function(t,q,r,s,p,u){var v=c(".loaded").attr("stepnumber");var o=parseInt(v,10)-1;var n=c("div[stepnumber='"+o+"']");b.loadTasksForStep(n,p,u);b.checkOverflow(true)},getSelectionColor:function(r){var t=["rgb(86, 189, 234)","#56bdea"];var q=["rgb(53, 209, 115)","#35d173"];var p=["rgb(235, 235, 235)","#ebebeb"];var o=["rgb(255, 148, 77)","#ff944d"];var n=c(r).css("background-color");var s="";if(c.inArray(n,t)!=-1){s="#005685"}else{if(c.inArray(n,q)!=-1){s="#6e821e"}else{if(c.inArray(n,o)!=-1){s="#cd0200"}else{s="#b8b8b8"}}}return s},getHeaderHTML:function(o){var n='<thead class="fw-bold"><tr><th width="2%"></th><th>'+m.PS_Activities+"</th><th>"+m.PS_ActivityType+"</th>";n+="<th>"+m.PS_Actions+"</th><th>"+m.PS_RelatedData+"</th>";n+="<th>"+m.PS_Owner+"</th><th>"+m.PS_Role+"</th></tr></thead>";return n},getDefaultLoadedStepNumber:function(A,s){var y="";for(var v=0;v<s.length;v++){var w=new A.ProcessStep(s[v]);var u=w.sequenceNumber;var x=w.title;var n=w.titleImage;var B=w.description;var z=v+1;var t=w.objectIds;var C=w.stepXMLStateSymName;var q=w.isActiveStep;var D=w.isElapsedStep;var r=w.stepXMLPolicySymName;var p="graph";var o="";if(q=="true"){y=v+1;break}}if(y===""){y=s.length}return y},getCurrentLoadedStepNumber:function(){var n=c(".loaded").attr("stepnumber");return n},getAccordianTasksDiv:function(){var n='<div id="accordianTasks">';n+="<div>";n+='<div class="tableborder">';return n},getCarouselDiv:function(){var n='<div id="carousel" class="carousel" style="overflow: hidden;"><div id="go-left" class="sliderarrows prev"></div><div class="slider"><div class="content">';return n},getReferencetableDiv:function(){var n='<div id="ReferenceView" >';return n},loadTasksForStep:function(q,o,z){if(q.is("span")){q=q.parent()}var t=function(L,E,U,V){c("div.graph").css("box-shadow","none");c("div.graph").css("color","white");c("div.graph").removeClass("activegraphring");c("div.graph").removeClass("completegraphring");c("div.graph").removeClass("futuregraphring");c("div.graph").removeClass("loaded");c("div.graph").css("font-size","medium");var ag=b.getSelectionColor(V);V.css("color",ag);V.css("box-shadow","inset 0 0 0 3px "+ag);V.addClass("loaded");var aA=V.attr("sequence");var Z=V.attr("objectid");var A=V.attr("policy");var aI=V.attr("state");var J=V.attr("selectedAffectedItems");var aJ=V.attr("type");var av=L.data;var G=JSON.parse(av);var W=b.getHeaderHTML();var aF=V.attr("stepnumber");var af=V.attr("step");var D=V.attr("totalnumsteps");var ah=V.attr("isactive");var at=V.attr("iselapsed");var ae=V.attr("isstopped");var Q=V.attr("isfuture");var H=[];var ax=[];var ac=true;var B=E.myAppsURL;for(var aB=0;aB<G.length;aB++){var K=G[aB].ProcessTasks;for(var az=0;az<K.length;az++){var aa=new g.ProcessTask(K[az]);var C=aa.ignore;if(C){continue}var M=j.getStatusIcon(aa,ah,at);var an=aa.title;var aE=aa.formattedDueDate;var aC=aa.formattedDueDateClass;var ap=j.getTitleTag(an,aC,aE);var I="";if(aa.actionLauncher){I=b.getLauncherDiv(aa.actionLauncher)}else{I=aa.actionHref}var ad=aa.dependeeType;var X=aa.actionLauncher;if((aa.taskType==="Mandatory"||aa.taskType==="Dependency")&&aa.status!=="OK"){ax.push(aa);if(ac==true){ac=false}}var ay=null;if(aa.dependeeType&&aa.dependeeType==="all"){ay=[];ay.push.apply(ay,ax)}else{if(aa.dependeeTasks){ay=aa.dependeeTasks}}var aw=b.getCallout(aa,ay,H,ah,at,Q);var am=aw||aa.parentCalloutFlag===true?true:false;var I=b.getTaskAction(aa,aw);if(aa.calloutFlag===true||aa.parentCalloutFlag===true){H.push(aa.sequenceNumber)}var M=j.getStatusIcon(aa,ah,at,am);var aE=aa.formattedDueDate;var aC=aa.formattedDueDateClass;var ap=j.getTitleTag(aa.title,aC,aE);var ai=am||Q==="true"||aa.status==="NA"||aa.status==="hold"?"disabled":"";W+="<tr>";W+='<td width="2%" class={0}>'.format(ai)+M+"</td>";W+="<td><span class={0}>".format(ai)+ap+"</span><span class='callout-holder'>{0}</span></td>".format(aw);var N=aa.taskType;if(N=="Mandatory"||N=="routetask"){N=m.PS_Mandatory}else{if((N=="Optional")){N=m.PS_Optional}else{N=m.PS_Dependency}}W+="<td class={0}>".format(ai)+j.getNonNullValue(N)+"</td>";if(!j.isWidget()){W+="<td class={0}>".format(ai)+I+"</td>";W+="<td class={0}>".format(ai)+j.getNonNullValue(aa.viewHref)+"</td>"}else{if(!aa.actionLauncher){var al=aa.dashboardActionImage;var ao=al.split("@");var R=aa.dashboardActionHref;var aG=R.split("@");var T=aa.dashboardActionTargetLocation;var Y=T.split("@");var aH=aa.dashboardActionLabel;var ar=aH.split("@");var ak=aa.dashboardViewImage;W+="<td class={0} taskAction".format(ai)+" >";for(aB=0;aB<ao.length;aB++){W+="<div amdhref='"+aG[aB]+"' targetlocation='"+Y[aB]+"' title='"+ar[aB]+"'  actionobjectId='"+aa.actionObjectId+"' actionClick='true' class='"+ao[aB]+"' > </div>"}W+="</td>"}else{I=b.getLauncherDiv(aa.actionLauncher,aa.dashboardActionLabel);W+="<td class={0} taskAction".format(ai)+" >";W+="<div > "+I+" </div>";W+="</td>"}var ak=aa.dashboardViewImage;var aD=ak.split("@");var P=aa.dashboardViewHref;var au=P.split("@");var F=aa.dashboardViewTargetLocation;var ab=F.split("@");var aj=aa.dashboardViewLabel;var O=aj.split("@");W+="<td class={0} taskAction".format(ai)+" >";for(aB=0;aB<aD.length;aB++){W+="<div amdhref='"+au[aB]+"' targetlocation='"+ab[aB]+"' title='"+O[aB]+"'  viewObjectId='"+aa.viewObjectId+"' viewClick='true' class='"+aD[aB]+"' > </div>"}W+="</td>"}W+="<td class={0}>".format(ai)+b.getOwnerImageDiv(aa.ownerImageURL,aa.title,aa.ownerEmailId,aa.ownerImageTooltip)+"<div class='owner-name'>"+j.getNonNullValue(aa.owner)+"</div></td>";W+="<td class={0}>".format(ai)+j.getNonNullValue(aa.role)+"</td>";W+=" </tr>"}}var aq=b.getTableBannerContent(aF,af,D,ah,at,ae);c("#taskTableBanner")[0].outerHTML=aq;c("#taskTable").html(W);var S=V.attr("class");if(S.indexOf("active")!=-1){c("#taskTableBanner").attr("class","tablebanner tablebanneractive");c("#taskTable").attr("class","tasktable tasktableactive")}else{if(S.indexOf("stopped")!=-1){c("#taskTableBanner").attr("class","tablebanner tablebannerstopped");c("#taskTable").attr("class","tasktable tasktablestopped")}else{if(S.indexOf("complete")!=-1){c("#taskTable").attr("class","tasktable tasktablecomplete");c("#taskTableBanner").attr("class","tablebanner tablebannercomplete")}else{c("#taskTable").attr("class","tasktable tasktablefuture");c("#taskTableBanner").attr("class","tablebanner tablebannerfuture")}}}b.attachTaskTableEventHandlers(E.myAppsURL,E.proxy,E.tenant,E.securityContext,U,z)};var p=function(B,A){console.log("loadTaskFailureCallback:errDetailds:"+B)};var w=q.attr("sequence");var v=q.attr("objectid");var s=q.attr("policy");var n=q.attr("state");var y=q.attr("selectedAffectedItems");var u=q.attr("type");var x=z.myAppsURL+"/resources/processSteps/ProcessStepsService/getProcessTasksData";var r=b.getInputDataJSON(v,y,w,s,n,z);j.makeWSCall(x,z.proxy,z.tenant,z.securityContext,r,t,p,o,q)},getInputDataJSON:function(n,q,s,p,t,o){var r={};r.objectId=n;r.selectedAffectedItems=q;r.myAppsURL=o.myAppsURL;r.proxy=o.proxy;r.tenant=o.tenant;r.securityContext=o.securityContext;r.inputSequence=s;r.inputStepPolicy=p;r.inputStepState=t;r.widgetui="true";r.MCSURL=o.myAppsURL;r.page="";if(o!=null&&o.page){r.page=o.page}return JSON.stringify(r)},getTableBannerContent:function(t,s,o,p,w,u){var r="";var n="tablebanner";var x="pointleft";var v="pointright";if(p=="true"){n=n+" tablebanneractive";if(u=="true"){n=n+" tablebannerstopped"}}else{if(w=="true"){n=n+" tablebannercomplete"}else{n=n+" tablebannerfuture"}}if(t=="1"){x=""}else{if(t==o){v=""}}r+='<div id=taskTableBanner class="{0}">'.format(n);r+='<p class="alignleft m-all-0">{0}. {1}</p>'.format(t,s);r+='<div class="alignright">';r+='<div class="{0}"></div>'.format(x);var q=m.PS_Step+" {0} "+m.PS_of+" {1}";q=q.format(t,o);r+='<p class="m-all-0 left p-l-half p-r-half">'+q+"</p>";r+='<div class="{0}"></div>'.format(v);r+="</div>";r+="</div>";return r},getLauncherDiv:function(n,p){var o="";if(!j.isWidget()){o=b.getLauncherDivForSpace(n)}else{o=b.getLauncherDivForDashboard(n,p)}return o},getLauncherDivForSpace:function(o){var t="";var x=JSON.parse(o);var s=x.closelabel;var n=x.submitlabel;for(var r=0;r<x.launchers.length;r++){var q=x.launchers[r];t+='<a  class="proslauncherMenu" class="left" name=\'{0}\'  title=\'{1}\'><img src=\'{2}\' width="23px" height="23px"/></a>'.format(q.name,q.label,q.image);t+='<div id="{0}" class="prosactionlauncher left m-l-1">'.format(q.name);var y="#";var u="";for(var p=0;p<x.launchers[r].inputs.length;++p){var v=x.launchers[r].inputs[p];var w="";if(p===0){w="checked";u=v}t+='<input class="left launcherradiobtn" type="radio" name="{0}" id="{1}" value="{2}" submitLabel="{3}" onclick="updateHrefTag(this, \'{3}\')" data-href="{4}" data-target="{5}" data-title="{6}" data-label="{7}" {8}>'.format(q.name,q.name,v.name,n,encodeURI(v.href),v.target,v.label,v.label,w);t+='<label class="left" for="{0}"><img width="23px" height="23px" class="left" src="{1}" title="{2}"/></label>'.format(v.name,v.image,v.label)}t+=b.buildHrefTag(u.href,q.name,u.target,u.label,"✓","left pointer launcherbtn launchersubmitbtn",n);t+='<button onclick="hideLauncher();return false;" title="{0}" class="left pointer launcherbtn">✕</button>'.format(s);t+="</div>"}return t},getLauncherDivForDashboard:function(o,w){var t="";var y=JSON.parse(o);var s=y.closelabel;var n=y.submitlabel;y=y.dashboardLaunchers;for(var r=0;r<y.length;r++){var q=y[r];t+="<a  class=\"proslauncherMenu\" class=\"left\" name='{0}'  title='{1}'><span class='{2}'/></a>".format(q.name,q.label,q.image);t+='<div id="{0}" class="prosactionlauncher left m-l-1">'.format(q.name);var z="#";var u="";for(var p=0;p<y[r].inputs.length;++p){var v=y[r].inputs[p];var x="";if(p===0){x="checked";u=v}t+='<input checked class="left launcherradiobtn" type="radio" name="{0}" id="{1}" value="{2}" submitLabel="{3}" onclick="updateHrefTag(this, \'{3}\')" data-href="{4}" data-target="{5}" data-title="{6}" data-label="{7}" {8}>'.format("create1","Craete2","Crete3","create",encodeURI(v.href),v.target,"c1","c2",x);t+='<label class="left" for="{0}"><span   class="left {1}"  title="{2}"/></label>'.format(v.label,v.image,v.label)}t+=b.buildHrefTag(u.href,q.name,u.target,w,"✓","left pointer launcherbtn launchersubmitbtn",n);t+='<button onclick="hideLauncher();return false;" title="{0}" class="left pointer launcherbtn">✕</button>'.format(s);t+="</div>"}return t},buildHrefTag:function(o,u,s,t,p,r,n){var q="";u=u+"proslauncher";if(!j.isWidget()){if(s===""||s==="content"||s==="popup"){q="<button onclick=\"showNonModalDialog('{0}', '930', '650', 'true')\" id='{1}' title='{2}' class='{3}' onclick='hideLauncher();return true;'>{4}</button>".format(o,u,n,r,p)}else{if(s!=="slidein"){q="<button onclick=\"{0};hideLauncher();return false;\" id='{1}' title='{2}' target='{3}' class='{4}'>{5}</button>".format(o,u,n,s,r,p)}else{q="<button onclick=\"getTopWindow().showSlideInDialog('{0}', 'true');hideLauncher();return true;\" id='{1}' title='{2}' class='{3}' onclick='hideLauncher();return true;'>{4}</button>".format(o,u,n,r,p)}}}else{if(s===""||s==="content"||s==="popup"){q="<button href='"+o+"' targetlocation='"+s+"'  title='"+t+"' actionobjectId='"+u+"' class='dashboardLauncherAction  {0}'  >{1}</button>".format(r,"✓")}else{if(s!=="slidein"){q="<button  href='"+o+"' targetlocation='"+s+"'  title='"+t+"' actionobjectId='"+u+"' class='dashboardLauncherAction  {0}' >{1}</button>".format(r,"✓")}else{q="<button href='"+o+"' targetlocation='"+s+"'  title='"+t+"' actionobjectId='"+u+"'  class='dashboardLauncherAction  {0}'   >{1}</button>".format(r,"✓")}}}return q},updateHrefTag:function(u,o){var n=c("#"+u.id+"proslauncher");var q=u.id;var p=u.dataset.href;var s=u.dataset.title;var t=u.dataset.label;var r=u.dataset.target;var v=b.buildHrefTag(p,q,r,s,"✓","left pointer launcherbtn launchersubmitbtn",o);n.replaceWith(v)},hideLauncher:function(){c(".prosactionlauncher").hide();c(".proslauncherMenu").show()},showLauncher:function(n){c(".prosactionlauncher").hide();c(".proslauncherMenu").hide();c("#"+n+".prosactionlauncher").fadeIn(1000)},highlightStep:function(o){if(o.is("span")){o=o.parent()}var n=o.attr("class");if(n.indexOf("loaded")==-1){var p=b.getSelectionColor(o);o.css("color",p);o.css("box-shadow","inset 0 0 0 3px "+p+", 0 0 1em "+p)}},unhighlightStep:function(o){if(o.is("span")){o=o.parent()}var n=o.attr("class");if(n.indexOf("loaded")==-1){o.css("color","white");o.css("box-shadow","none")}},slideRight:function(){c(".slider").removeClass("move-left move-right");c(".slider").addClass("move-right")},slideLeft:function(){c(".slider").removeClass("move-left move-right");c(".slider").addClass("move-left")},slideOnX:function(q){var n=c("div.slider");var p=b.getTranslatedX(n);var o=p;if(q==="left"){o=p+200}else{o=p-200}b.doTranslateX(n,o);b.checkOverflow(false)},doTranslateX:function(n,o){var p=o+"px";n.css("transform","translateX("+p+")");n.css("-webkit-transform","translateX("+p+")");n.css("-moz-transform","translateX("+p+")")},getTranslatedX:function(q){var p=q.css("transform")||q.css("-webkit-transform")||q.css("-moz-transform");if(p=="none"){return 0}var o=p.replace(/[^0-9\-.,]/g,"").split(",");var n=o[12]||o[4];return parseInt(n)},getTaskAction:function(n){var o="";if(n.actionLauncher){o=b.getLauncherDiv(n.actionLauncher)}else{o=j.getNonNullValue(n.actionHref)}return o},getCallout:function(o,v,n,t,x,w){var r="";var z="..";if(j.isWidget()){z=widget.myApps3DSpaceURL}if(w!="true"){if(v){var y=true;var q=o.externalProcessPage?o.calloutHeader+" on "+j.getObjectHref(o.calloutLinkId,o.calloutLinkLabel):o.calloutHeader;var p='<a href="#" class="balloon"><img class="redflag" src="'+z+'/webapps/ENOProcessStepsUX/assets/images/RedFlagWavy.png" height="20" width="20"/><div id="callout" class="hidden-balloon"><a href="#" class="boxclose"></a><strong>{0}</strong><ul class="plain-ul">'.format(q);if(o.dependeeType&&o.dependeeType==="all"){for(var u=0;u<v.length;u++){if(n.length>0&&n.indexOf(v[u].sequenceNumber)!=-1){o.parentCalloutFlag=true;return""}}}for(var u=0;u<v.length;u++){if(v[u].title&&v[u].title!==o.title&&v[u].status&&v[u].status!=="OK"&&y){if(n.length>0&&n.indexOf(v[u].sequenceNumber)!=-1){o.parentCalloutFlag=true}else{y=false;r+=p}}var A=v[u].routeTasks;if(A&&o.parentCalloutFlag===false){for(var s=0;s<A.length;s++){if(A[s].status&&A[s].status==="WIP"){if(y){r+=p;y=false}r+="<li>{0}</li>".format(j.getStatusIcon(A[s],t,x)+"<div class='balloon-task'>"+A[s].title+"</div>")}}}else{if(v[u]&&v[u].status!=="OK"&&v[u].title!==o.title&&o.parentCalloutFlag===false){r+="<li>{0}</li>".format(j.getStatusIcon(v[u],t,x)+"<div class='balloon-task'>"+v[u].title+"</div>")}}}if(!y){r+="</ul></div></a>";o.calloutFlag=true}}}return r},showCallout:function(){document.getElementById("callout").classList.remove("hidden-balloon");document.getElementById("callout").classList.add("visible-balloon")},hideCallout:function(){document.getElementById("callout").classList.remove("visible-balloon");document.getElementById("callout").classList.add("hidden-balloon")},getOwnerImageDiv:function(p,q,o,n){var r="<div";if(p){r=r+' class="person-image" style="background-image: url("{0}");"'.format(encodeURI(p))}else{r=r+' class="person-solid icon"'}if(o){r=r+" onclick=\"location.href='mailTo:{0}?subject={1}'\"".format(o,encodeURI(q));if(!p){r=r+' style="cursor:pointer"'}}if(n){r=r+' title="{0}"'.format(n)}r=r+"></div>";if(!p){r=r+"&nbsp;&nbsp;&nbsp;&nbsp;"}return r},};return b});define("DS/ENOProcessStepsUX/scripts/ProcessStepsView",["UWA/Class/View","UWA/Core","UWA/Promise","DS/ENOProcessStepsUX/scripts/ProcessSteps","DS/ENOProcessStepsUX/scripts/Settings","DS/UIKIT/Scroller"],function(g,f,d,a,e,b){var c=function(){this._name="ProcessStepsView"};function h(k){var j=document.createElement("div");j.classList.add("loading");for(var l=0;l<4;l++){var p=document.createElement("div");p.classList.add("loading-bar");j.appendChild(p)}var n="Loading...";var m=document.createElement("span");var o=document.createTextNode(n);m.appendChild(o);j.appendChild(m);k.appendChild(j)}c.prototype._createView_ProcessSteps=function(i){var j=new d(function(l,k){e.loadPlatformServices(l)}).then(function(u){var p=i.id||i.objectId;if(!p){p=i.data.id}var s=e.getPlatformURLs().get3DSpaceURL();var q=e.getPlatformURLs().getTenantId();var r=e.getSetting("pad_security_ctx");var n="passport";var o=i.renderTo;h(o);e.addSetting("data",i);e.addSetting("myApps3DSpaceURL",s);i.myAppsURL=s;i.tenant=q;i.securityContext=r;i.proxy=n;var k=new UWA.Element("div",{id:"processStepsView",styles:{height:widget.body.clientHeight}});var t=new UWA.Element("div",{id:"ReferenceView"});var m=new UWA.Element("div",{id:"TableView"});a.loadReferenceView(p,"",t,i);a.loadProcessSteps(p,"",m,i);k.appendChild(t);k.appendChild(m);var l=new b({element:k});l.inject(o);o.appendChild(k)})};c.prototype.refresh=function(){var i=e.getSetting("options");var j=i.renderTo;j.innerHTML="";new c()._createView_ProcessSteps(i)};return c});define("DS/ENOProcessStepsUX/scripts/ECMProposedChangeView",["css!DS/ENOProcessStepsUX/ENOProcessStepsUX","DS/ENOProcessStepsUX/scripts/ProcessStepsUtil","DS/UIKIT/Accordion","DS/ENOFrameworkPlugins/jQuery","DS/ENOProcessStepsUX/scripts/ProcessSteps","i18n!DS/ENOProcessStepsUX/assets/nls/ProcessSteps",],function(c,e,b,g,a,d){var f={_loadDocumentFiles:function(l){var q=l;var j=q.renderTo;var m=new UWA.Element("div",{styles:{height:"10%",width:"99.9%"}});m.setAttributes({id:"divForReferenceView"});var k="";var h=q.myAppsURL+"/resources/ecmProcessSteps/ECMProcessStepsService/getProposedChangesData";var p=q.myAppsURL+"/resources/ecmProcessSteps/ECMProcessStepsService/getRealizedChangesData";var i=function(D,C,F,v){var Q=D.data;var P=JSON.parse(Q);var J=new UWA.Element("table",{styles:{width:"100%",cursor:"default"}});var s=true;var N="";var y=["",d.PS_Title,d.PS_Type,d.PS_Name,d.PS_State,d.PS_Revision,d.PS_Actions,d.PS_ChangeInformation];var r=document.createElement("tbody");var t=document.createElement("tr");for(var O=0;O<y.length;O++){var B=document.createElement("td");B.style.height="1px";B.style.border="0 solid #fff";B.style.borderLeftWidth="1px";B.style.borderBottomWidth="1px";B.style.padding="5px 8px 5px 8px";var I=document.createElement("div");I.style.top="0px";B.appendChild(I);var G=document.createTextNode(y[O]);I.appendChild(G);t.appendChild(B)}t.style.backgroundColor="#e2e4e3";t.style.fontWeight="bold";r.appendChild(t);for(var O=0;O<P.length;O++){var H=P[O].ProposedItems;var w=P[O].RealizedItems;var A="";if(H){s=true;N=d.PS_ProposedChanges;A=H}else{if(w){s=false;N=d.PS_RealizedChanges;A=w}}var z=P[O].selectedproposeditems;for(var M=0;M<A.length;M++){k=["",A[M].type,A[M].name,A[M].current,A[M].revision,A[M].action,A[M].changeInfo];var R=document.createElement("tr");R.style.backgroundColor="#f4f5f6";var x=document.createElement("td");if(A.length>0){x.style.height="1px";x.style.border="0 solid #fff";x.style.borderLeftWidth="1px";x.style.borderBottomWidth="1px";x.style.padding="5px 8px 5px 8px";var u=document.createElement("div");u.style.top="0px";x.appendChild(u);var E=new UWA.Controls.Input.Checkbox({value:A[M].id,displayData:true,id:A[M].id,events:{onClick:function(){o()}}}).inject(u);R.appendChild(x)}for(var L=0;L<k.length;L++){var x=document.createElement("td");x.style.height="1px";x.style.border="0 solid #fff";x.style.borderLeftWidth="1px";x.style.borderBottomWidth="1px";x.style.padding="5px 8px 5px 8px";var u=document.createElement("div");u.style.top="0px";x.appendChild(u);u.innerHTML=k[L];R.appendChild(x)}r.appendChild(R)}}J.addContent(r);if(!(!s&&A.length==0)){var K=new b({className:"filled",items:[{title:N,content:J,selected:true}],events:{onOpen:function(){},onClose:function(){}},}).inject(m);var S=document.getElementsByClassName("accordion-item active");if(S.length>1){S[0].className="accordion-item"}}F.appendChild(m)};var n=function(s,r){console.log("onFailureCallback:errDetailds:"+s)};var o=function(){var s="";var u=g("input:checked");var v=l;v=v.objectId;if(u.length===0){alert(d.PS_FilterAlert);selectedCheckbox.checked=true}else{u.each(function(w){s+=g(this).attr("value");if(w<u.length-1){s+="|"}});var r=q.myAppsURL+"/resources/processSteps/ProcessStepsService/getProcessStepsData";var t=document.getElementById("accordianTasks");t.innerHTML="";a.loadProcessSteps(v,s,"",l)}};e.makeWSCall(h,q.proxy,q.tenant,q.securityContext,JSON.stringify(l),i,n,j,false);e.makeWSCall(p,q.proxy,q.tenant,q.securityContext,JSON.stringify(l),i,n,j,false)},};return f});