define("DS/SpecTree/SpecTreeVault",["DS/Tree/TreeDocument","DS/Tree/TreeNodeModel"],function(b,g){var f=false;var a="default";var e={MODEL:"model",FAKE:"fake",LAYOUT:"layout"};var d={NONE:{icon:undefined,color:"transparent"},ERROR:{icon:{fontIconFamily:WUXManagedFontIcons.FontAwesome,iconName:"exclamation-circle"},color:"#EA4F37"},INFO:{icon:{fontIconFamily:WUXManagedFontIcons.FontAwesome,iconName:"info-circle"},color:"#42A2DA"},WARNING:{icon:{fontIconFamily:WUXManagedFontIcons.FontAwesome,iconName:"exclamation-triangle"},color:"#E87B00"}};function c(){this.TYPES_VAULT={};this.RESOLVED_TYPES_VAULT={};this.DEFAULT_APP_NS=a;this.NODE_CATEGORIES=e;this.NOTIFICATIONS=d;return this}c.prototype.registerModelNodeType=function(h){h.nodeCategory=this.NODE_CATEGORIES.MODEL;return this._registerNodeType(h)};c.prototype.registerFakeNodeType=function(h){h.nodeCategory=this.NODE_CATEGORIES.FAKE;return this._registerNodeType(h)};c.prototype.registerLayoutNodeType=function(h){h.nodeCategory=this.NODE_CATEGORIES.LAYOUT;return this._registerNodeType(h)};c.prototype._registerNodeType=function(q){var i=q.application?q.application:this.DEFAULT_APP_NS;var j=q.nodeType;var p=q.nodeCategory;if(!q.nodeType){throw"Cannot register a nodeType without a nodeType option specified"}if(!q.nodeCategory){throw"Cannot register a nodeCategory without a nodeCategory option specified"}if(this.doesNodeTypeExist(q)===true){throw"This node type has already been registered"}var o=this;var m=Object.keys(this.NODE_CATEGORIES).some(function(r){return o.NODE_CATEGORIES[r]===q.nodeCategory});if(!m){throw'Node type: "'+j+'" has already been registered'}var n=function(r,u,s){if(u.length>1){var t=u[0];if(r[t]===undefined){r[t]={}}u.shift();n(r[t],u,s)}else{r[u[0]]={__definition__:s};return r}};var o=this;var h=function(r,s){var t=r.split(".");n(o.TYPES_VAULT,t,s)};if(!this.getRegisteredNodeType(p,j,i)){var l='Error registering nodeType: "'+j+'"';if(!q.buildLabel){throw l+', "buildLabel" callback has not been defined'}var k=q;h(i+"."+p+"."+j,k)}else{throw'Node type: "'+j+'" has already been registered'}};c.prototype.doesNodeTypeExist=function(i){i.application=i.application?i.application:this.DEFAULT_APP_NS;var h=UWA.Json.path(this.TYPES_VAULT,"$."+[i.application,i.nodeCategory,i.nodeType].join("."));return h!==false};c.prototype.searchNodeType=function(h){var i=UWA.Json.path(this.TYPES_VAULT,"$.."+h.nodeType,{resultType:"PATH"});if(i){return i.map(function(j){return JSON.parse(j.replace("$","").replace(/\]\[/g,",").replace(/'/g,'"'))})}else{return[]}};c.prototype.getResolvedNodeOptions=function(h){if(this.RESOLVED_TYPES_VAULT[h.application]===undefined){this.RESOLVED_TYPES_VAULT[h.application]={}}if(this.RESOLVED_TYPES_VAULT[h.application][h.nodeCategory]===undefined){this.RESOLVED_TYPES_VAULT[h.application][h.nodeCategory]={}}if(this.RESOLVED_TYPES_VAULT[h.application][h.nodeCategory][h.nodeType]===undefined){this.RESOLVED_TYPES_VAULT[h.application][h.nodeCategory][h.nodeType]=this._mergeNodeType(h.nodeCategory,h.nodeType,h.application)}return this.RESOLVED_TYPES_VAULT[h.application][h.nodeCategory][h.nodeType]};c.prototype.getResolvedNodeType=function(j,i,h){return this.getResolvedNodeOptions({application:h,nodeCategory:j,nodeType:i})};c.prototype._processNodeType=function(n,i,l,p,k){var h;var j={};var m=this;var q=i.split(".");var o=function(t,u,s,r){var v=m.getRegisteredNodeType(t,u,m.DEFAULT_APP_NS);if(v){p({nodeCategory:t,nodeType:u,application:m.DEFAULT_APP_NS,options:v});if(f){console.log("-->",u,v)}}if(s){var v=m.getRegisteredNodeType(t,u,s);if(v){p({nodeCategory:t,nodeType:u,application:s,options:v});if(f){console.log("-->",u,v)}}}if(q.length>1){if(f){console.group(k)}q.shift();h=o(t,u+"."+q[0],s,r);if(f){console.groupEnd(k)}}else{h=r}return h};return o(n,q[0],l,j)};c.prototype._mergeNodeType=function(l,k,i){var n={};var j=k.split(".");var m=this;var h=function(q,r,p,o){if(j.length>1){var s=m.getRegisteredNodeType(q,r,p);if(s){o=UWA.extend(o,s,true)}j.shift();return h(q,r+"."+j[0],p,o)}else{var s=m.getRegisteredNodeType(q,r,p);if(s){o=UWA.extend(o,s,true)}return o}};return h(l,j[0],i,n)};c.prototype.getRegisteredNodeCategory=function(i,h){if(h===undefined){h=this.DEFAULT_APP_NS}var j=UWA.Json.path(this.TYPES_VAULT[h],"$"+i);if(j&&j.length===1){return j[0]}else{return}};c.prototype.getRegisteredNodeType=function(j,i,h){if(h===undefined){h=this.DEFAULT_APP_NS}if(this.TYPES_VAULT[h]&&this.TYPES_VAULT[h][j]){var k=UWA.Json.path(this.TYPES_VAULT[h][j],"$"+i+".__definition__");if(k&&k.length===1){return k[0]}else{return}}else{return}};c.prototype.getNotificationInfos=function(h){var i=this.NOTIFICATIONS[h];if(i){return i}else{return{icon:undefined,color:"transparent"}}};return c});define("DS/SpecTree/SpecTreeDocument",["DS/SpecTree/SpecTreeVault","DS/Tree/TreeDocument","DS/Tree/TreeNodeModel"],function(c,b,g){var a="default";function f(k,m,l){var n;var h=l.application?l.application:a;var i=l.nodeType;if(i){var j=k.getRegisteredNodeType(m,i,h);if(j){n={icons:l.icons,label:l.label,children:l?l.children:null}}else{throw"Cannot create node. No registered node type"+h+" "+m+" "+i}}else{n={icons:l.icons,label:l.label,children:l?l.children:null}}var o=new d(n);o.__private__={nodeCategory:l.nodeCategory,nodeType:l.nodeType,notification:l.notification,notificationMsg:l.notificationMsg,color:l.color,borderColor:l.borderColor,activeFlag:l.activeFlag};o._setNodeCategory(m);o._setNodeType(l.nodeType);if(o._getNodeCategory()===undefined||o._getNodeType()===undefined){throw"Node is not compliant with the SpecTree Model"}return o}var d=g.extendNode({__private__:{},_getContext:function(){var k=this.getTreeDocument();if(k){var h=k.getCurrentApplication();var j=this._getNodeCategory();var i=this._getNodeType();return{treeDocument:k,treeVault:k._specTreeVlt,application:h,nodeCategory:j,nodeType:i}}},_getResolved:function(){var i=this._getContext();if(i&&i.nodeCategory&&i.nodeType&&i.application){var h=i.treeVault.getResolvedNodeType(i.nodeCategory,i.nodeType,i.application);if(h){this.__resolved__=h;return this.__resolved__}else{console.error(i);throw"Node context is uncorrect, check that application, nodeCategory or nodeType is correct and has been registered"}}else{console.log("unable to get resolved node. May be the node just have been removed");return{}}},_getResolvedAndCall:function(i,j){var h=this._getResolved()[i];if(h){return h({nodeModel:this})}else{if(j){return j({nodeModel:this})}}},getResolved:function(){return this._getResolved()},getResolvedAndCall:function(h,i){return this._getResolvedAndCall(h,i)},addChild:function(j,i){var k=this;var l=k.getResolved();if(l&&l.onPreAddChild){l.onPreAddChild(k,j)}if(j instanceof Array){if(j.length===0){this._parent(j,i)}else{k.prepareUpdate();j.forEach(function(n,m){k.addChild(n,i+m)});k.pushUpdate()}}else{var h=this;if(l&&l.getTrueParent){h=l.getTrueParent(k,j)}if(j instanceof d){h._parent(j,i)}else{h._parent(new d(j),i)}}if(l&&l.onPostAddChild){l.onPostAddChild(k,j)}},removeChild:function(k){var i=this;var h;var j=i.getResolved();if(j&&j.getTrueParent){h=j.getTrueParent(i,k)}if(!h){h=this}h._parent(k);if(j&&j.onPostRemoveChild){j.onPostRemoveChild(i,k)}},hasNoRepresentation:function(){if(this.getResolvedAndCall("hasNoRepresentation")){return true}return this._parent()},getIcons:function(){return this._getResolvedAndCall("buildIcons")||this.options.icons},getLabel:function(){var h=this._getResolvedAndCall("buildLabel");if(typeof h!=="string"){h=""}return h},getBadges:function(){return this._getResolvedAndCall("buildBadges",function h(){return{topLeft:"",topRight:"",bottomLeft:"",bottomRight:""}})},getColor:function(){var h=this._getResolved().buildColor;if(h){return h({nodeModel:this})}else{return this.__private__.color||"transparent"}},getBorderColor:function(){var h=this._getResolved().buildBorderColor;if(h){return h({nodeModel:this})}else{return this.__private__.borderColor||"transparent"}},getTypeId:function(){return this._getResolvedAndCall("getTypeId",function h(){return this._getNodeType()}.bind(this))},isActive:function(){return this.__private__.activeFlag},applyDropTreeNodeModel:function(i){var h=this.getResolved();if(h&&h.applyDrop){return h.applyDrop({nodeModel:this,draggedNodes:i.droppedNodes,position:i.dropPosition})}return false},_isDraggable:function(){if(this.getResolvedAndCall("isDraggable")){return true}return false},_shouldAcceptDrop:function(l,h,i,j){var k=this.getResolved();if(k&&k.shouldAcceptDrop){return k.shouldAcceptDrop({nodeModel:this,draggedNodes:l,position:h},i,j)}i(false);return false},isRollbackable:function(){if(this.getResolvedAndCall("isRollbackable")){return true}return false},supportsRollback:function(){if(this.getResolvedAndCall("supportsRollback")){return true}return false},getNotification:function(){return this.__private__.notification},getNotificationMsg:function(){return this.__private__.notificationMsg},activate:function(){var h=this.getTreeDocument();if(h){if(this.isRollbackable()){h.prepareUpdate();this.__private__.activeFlag=true;this.notifyModelUpdate();h.pushUpdate()}else{this.__private__.activeFlag=true;this.notifyModelUpdate()}var i=h._getTrueRoot();if(i){i._modelEvents.publish({event:"uiActiveUpdate",context:h})}}},deactivate:function(){this.__private__.activeFlag=false;this.notifyModelUpdate()},defineAsRollbackedNode:function(){this._getResolvedAndCall("onRollbackDefine")},setNotification:function(i,h){this.__private__.notification=i;this.__private__.notificationMsg=h},getPath:function(){return this._parent().filter(function(h){return !h._isLayoutNode()})},_getParentModel:function(){var h=this.getParent();if(h.isModelNode()){return h}else{return h._getParentModel()}},getAndProcessFeatures:function(h){if(this.getChildren()){return this.getChildren().filter(function(i){if(i.options.isFeature===true){h(i)}})}else{return[]}},_isMatching:function(h){if(h&&h!==""&&(JSON.stringify(this.options.grid)+"  "+this._getNodeType()+" "+this.getLabel()).toLowerCase().indexOf(h.toLowerCase())>=0){return true}return false},select:function(j){if(this._isLayoutNode("layout-horizontal")){this.withTransactionUpdate(function i(){if(!this.isSelected()){this._parent(j)}if(!this.areAllChildrenSelected()){this.getChildren().forEach(function k(l){if(!l.isSelected()){l.select(j)}})}})}else{var h=this.getParent();if(h._isLayoutNode("layout-horizontal")){this.withTransactionUpdate(function(){if(!this.isSelected()){this._parent(j)}if(h.areAllChildrenSelected()&&!h.isSelected()){h.select(j)}})}else{this._parent(j)}}},unselect:function(){if(this._isLayoutNode("layout-horizontal")){this.withTransactionUpdate(function(){if(this.isSelected()){this._parent()}if(this.areAllChildrenSelected()){this.getChildren().forEach(function(i){if(i.isSelected()){i.unselect()}})}})}else{var h=this.getParent();if(h._isLayoutNode("layout-horizontal")){this.withTransactionUpdate(function(){if(this.isSelected()){this._parent()}if(!h.areAllChildrenSelected()&&h.isSelected()&&!this.getTreeDocument().getXSO().isBeingEmptied()){h.unselect()}})}else{this._parent()}}},preExpandDone:function(h){var i=this._parent;i.call(this,h)},_getNodeCategory:function(){return this.__private__.nodeCategory},_getNodeType:function(){return this.__private__.nodeType},_setNodeCategory:function(h){this.__private__.nodeCategory=h},_setNodeType:function(h){this.__private__.nodeType=h},isModelNode:function(h){if(h){return this._getNodeCategory()==="model"&&this._getNodeType()===h}else{return this._getNodeCategory()==="model"}},isFakeNode:function(h){return this._isFakeNode(h)},_isLayoutNode:function(h){if(h){return this._getNodeCategory()==="layout"&&this._getNodeType()===h}else{return this._getNodeCategory()==="layout"}},_isFakeNode:function(h){if(h){return this._getNodeCategory()==="fake"&&this._getNodeType()===h}else{return this._getNodeCategory()==="fake"}},_isSubnode:function(){return this.getParent()&&this.getParent()._isLayoutNode("layout-horizontal")},getNextVisibleNode:function(){var h=g.prototype.getNextVisibleNode.apply(this);if(h){if(h._isLayoutNode()){return h.getNextVisibleNode()}else{return h}}},getPreviousVisibleNode:function(){var h=g.prototype.getPreviousVisibleNode.apply(this);if(h){if(h._isLayoutNode()){return h.getPreviousVisibleNode()}else{var i=this.getPreviousNode();if(i&&i.isVisible()===false){return this.getPreviousVisibleNode()}else{return i}}}},collapse:function(h){if(!this._isLayoutNode()){return g.prototype.collapse.apply(this,h)}else{this.prepareUpdate();this._modelEvents.publish({event:"preCollapse",data:{nodeModel:this,virtualRowID:this._rowID},context:this});this._modelEvents.publish({event:"collapse",data:{nodeModel:this,virtualRowID:this._rowID},context:this});this._modelEvents.publish({event:"postCollapse",data:{nodeModel:this,virtualRowID:this._rowID},context:this});this.pushUpdate()}},isVisibleInSpecTree:function(){if(this._specTreeVisibility===undefined){this._specTreeVisibility=true}return this._specTreeVisibility},setVisibilityInSpecTree:function(j){if(this._isLayoutNode("layout-horizontal")){this.withTransactionUpdate(function i(){this._specTreeVisibility=j;this.notifyModelUpdate();this.getChildren().forEach(function k(l){l._specTreeVisibility=j;l.notifyModelUpdate()})})}else{var h=this.getParent();if(h._isLayoutNode("layout-horizontal")){this.withTransactionUpdate(function(){this._specTreeVisibility=j;if(h.areAllChildrenVisibleInSpecTree()===!j&&h.isVisibleInSpecTree()===!j){h.setVisibilityInSpecTree(j)}})}else{this.withTransactionUpdate(function(){this._specTreeVisibility=j;this.notifyModelUpdate()})}}},areAllChildrenVisibleInSpecTree:function(){var k=true;if(this.hasChildren()){var j=this.getChildren();for(var h=0;h<j.length&&k;h++){if(j[h].isVisibleInSpecTree()===false){k=false}}}return k},isUIActive:function(h){return this._isUIActive!==undefined?this._isUIActive:false},_setUIActive:function(h){this._isUIActive=h},_suppress:function(){if(this._isSuppressed()===false){this.__isSuppressed=true;this.notifyModelUpdate()}},_isSuppressed:function(){return this.__isSuppressed!==undefined?this.__isSuppressed:false},_unsuppress:function(){if(this._isSuppressed()===true){this.__isSuppressed=false;this.notifyModelUpdate()}},_afterRollbackCursor:function(){if(this._isAfterRollbackCursor()===false){this.__isAfterRollbackCursor=true;this.notifyModelUpdate()}},_isAfterRollbackCursor:function(){return this.__isAfterRollbackCursor!==undefined?this.__isAfterRollbackCursor:false},_beforeRollbackCursor:function(){if(this._isAfterRollbackCursor()===true){this.__isAfterRollbackCursor=false;this.notifyModelUpdate()}},matchSearch:function(h){this._isMatchingSearchFocused=h;return this._parent()},unmatchSearch:function(){this._isMatchingSearchFocused=false;return this._parent()}});var e=b.extend({defaultOptions:{useAsyncPreExpand:true,shouldBeSelected:function(h){if(h._getNodeCategory()===this._specTreeVlt.NODE_CATEGORIES.MODEL){return true}else{if(h._getNodeCategory()===this._specTreeVlt.NODE_CATEGORIES.LAYOUT&&h._getNodeType()==="layout-horizontal"){return true}else{return false}}},shouldBeEditable:function(h){return true},shouldAcceptDrag:function(h){if(typeof h._isDraggable==="function"&&h._isDraggable()){return true}return false},shouldAcceptDrop:function(k,h,j){var i=k.parentTreeNodeModel;if(i&&typeof i._shouldAcceptDrop==="function"&&i._shouldAcceptDrop(k.draggedTreeNodeModels,k.dropPosition,h,j)){return true}return false},nodeModelClass:d},init:function(h){this._parent(h);this._handleEvents();this._currentApplication=null;this._listOfUIActiveNodes=[];this._specTreeVlt=new c();this._registerDefaultNodes();this._manageResolvedCallbacks()},getVault:function(){return this._specTreeVlt},setVault:function(h){this._specTreeVlt=h},_manageResolvedCallbacks:function(){this.onPreExpand(function(k){var j=k.target;setTimeout(function(){var l=j._getResolved().onPreExpand;if(l){l({nodeModel:j})}else{j.preExpandDone()}},0)});var h=this.getXSO();h.onAdd(function(k){var j=k._getResolved().onSelect;if(j){j({nodeModel:k})}});h.onRemove(function(k){var j=k._getResolved().onUnselect;if(j){j({nodeModel:k})}});var i=this.getPXSO();i.onAdd(function(k){var j=k._getResolved().onPreSelect;if(j){j({nodeModel:k})}});i.onRemove(function(k){var j=k._getResolved().onPreUnselect;if(j){j({nodeModel:k})}})},_registerDefaultNodes:function(){if(this._specTreeVlt.doesNodeTypeExist({application:this.getCurrentApplication(),nodeCategory:this._specTreeVlt.NODE_CATEGORIES.FAKE,nodeType:"section"})===false){this._specTreeVlt.registerFakeNodeType({icons:[{iconName:"expand-right"}],nodeType:"section",buildIcons:function(h){return h.nodeModel.options.icons},buildLabel:function(h){return h.nodeModel.options.label},buildBadges:function(){},onPreExpand:function(h){h.nodeModel.preExpandDone()}})}if(this._specTreeVlt.doesNodeTypeExist({application:this.getCurrentApplication(),nodeCategory:this._specTreeVlt.NODE_CATEGORIES.FAKE,nodeType:"more/less"})===false){this._specTreeVlt.registerFakeNodeType({icons:[],nodeType:"more/less",buildIcons:function(h){if(h.nodeModel.isExpanded()){return[{iconName:"minus"}]}else{return[{iconName:"plus"}]}},buildLabel:function(i){var h;if(i.nodeModel.isExpanded()){h="less on"}else{h="more on"}return h+" "+i.nodeModel.getParent().options.label},buildBadges:function(){},onPreExpand:function(h){h.nodeModel.preExpandDone()}})}if(this._specTreeVlt.doesNodeTypeExist({application:this.getCurrentApplication(),nodeCategory:this._specTreeVlt.NODE_CATEGORIES.LAYOUT,nodeType:"layout-horizontal"})===false){this._specTreeVlt.registerLayoutNodeType({icons:[{iconName:"folder"}],nodeType:"layout-horizontal",buildIcons:function(){return[]},buildLabel:function(){},buildBadges:function(){},onPreExpand:function(h){h.nodeModel.preExpandDone()}})}if(this._specTreeVlt.doesNodeTypeExist({application:this.getCurrentApplication(),nodeCategory:this._specTreeVlt.NODE_CATEGORIES.LAYOUT,nodeType:"rollbackable-children"})===false){this._specTreeVlt.registerLayoutNodeType({icons:[{iconName:"folder"}],nodeType:"rollbackable-children",buildIcons:function(){return[]},buildLabel:function(){},buildBadges:function(){},onPreExpand:function(h){h.nodeModel.preExpandDone()}})}},setCurrentApplication:function(h){this._currentApplication=h},getCurrentApplication:function(){if(this._currentApplication&&this._currentApplication!==""){return this._currentApplication}else{return this._specTreeVlt.DEFAULT_APP_NS}},_handleEvents:function(){},onPreExpand:function(i){var h=this;this._parent(function(j){h.prepareUpdate();j.target.search({match:function(k){var l=k.nodeModel.options.isFeature;return l}}).forEach(function(k){k.remove()});i.call(this,j);h.pushUpdate()})},createModelNode:function(h){if(!h.nodeType){throw"A model node must have a nodeType"}var i=["","","","#57B847","#00B8DE","#EA4F37"];h.biColor=i[Math.floor(Math.random()*i.length)];return f(this._specTreeVlt,this._specTreeVlt.NODE_CATEGORIES.MODEL,h)},createFakeNode:function(h){return f(this._specTreeVlt,this._specTreeVlt.NODE_CATEGORIES.FAKE,h)},_createLayoutNode:function(h){return f(this._specTreeVlt,this._specTreeVlt.NODE_CATEGORIES.LAYOUT,{nodeType:h.nodeType})},createSubNodes:function(h){var j=this;var i=this._createLayoutNode({nodeType:"layout-horizontal"});var k=[];h.forEach(function(l){var m;if(l instanceof d){m=l}else{m=j.createModelNode(l)}if(m.hasChildren()){throw"A sub-node cannot have children"}else{k.push(m)}});i.addChild(k);i.expand();return i},createRollbackableNodes:function(h){var j=this;var i=this._createLayoutNode({nodeType:"rollbackable-children"});var k=[];h.forEach(function(l){var m;if(l instanceof d){m=l}else{m=j.createModelNode(l)}if(m.hasChildren()){throw"A sub-node cannot have children"}else{k.push(m)}});i.addChild(k);i.expand();return i},isNodeUIActive:function(h){return this._uiActiveNode?this._uiActiveNode._getID()===h._getID():false},unsetUIActiveNode:function(){while(this._listOfUIActiveNodes[0]){this._listOfUIActiveNodes[0]._setUIActive(false);this._listOfUIActiveNodes.shift()}this._uiActiveNode=null;var h=this._getTrueRoot();h._modelEvents.publish({event:"uiActiveUpdate",context:this})},getUIActiveNode:function(){return this._uiActiveNode},setUIActiveNode:function(i){var h=this;while(this._listOfUIActiveNodes[0]){this._listOfUIActiveNodes[0]._setUIActive(false);this._listOfUIActiveNodes.shift()}if(this._uiActiveNode){this._uiActiveNode.notifyModelUpdate()}this._uiActiveNode=i;i._setUIActive(true);i.notifyModelUpdate();this._listOfUIActiveNodes.push(i);i.processDescendants({processNode:function(k){k.nodeModel._setUIActive(true);h._listOfUIActiveNodes.push(k.nodeModel)}});var j=h._getTrueRoot();j._modelEvents.publish({event:"uiActiveUpdate",context:h})},registerLayoutNodeType:function(h){return this.getVault().registerLayoutNodeType(h)},registerFakeNodeType:function(h){return this.getVault().registerFakeNodeType(h)},registerModelNodeType:function(h){return this.getVault().registerModelNodeType(h)},getNotificationInfos:function(h){return this.getVault().getNotificationInfos(h)}});e.DEFAULT_APP_NS=a;e._buildSpecTreeDocumentFromSearchResult=function(h){var i=new e({shouldBeEditable:function(){return false}});i.prepareUpdate();h.searchResults.forEach(function(k){var j={};for(var m in k.options){if(m!=="children"){j[m]=k.options[m]}}j._originalID=k._getID();j.path=k.getPath();var l=new d(j);l._setNodeCategory(k._getNodeCategory());l._setNodeType(k._getNodeType());i.addChild(l)});i.pushUpdate();return i};return e});define("DS/SpecTree/SpecTreeView",["DS/Tree/TreeListView","DS/SpecTree/SpecTreeDocument","DS/Tree/Manager","DS/Tree/TreeNodeModel","DS/Tree/TreeNodeView","DS/Core/PointerEvents","DS/Controls/Button","DS/Controls/Abstract","DS/Controls/Slider","DS/Controls/ComboBox","DS/Controls/TooltipModel","DS/Utilities/Dom","DS/Controls/LineEditor","DS/Windows/DockingElement","DS/Utilities/Utils","DS/Windows/Dialog","DS/TreeModel/TreeDocument","DS/Controls/Toolbar","DS/Controls/Breadcrumb","DS/Utilities/TouchUtils"],function(l,F,b,s,j,i,u,w,f,m,k,z,A,n,d,h,p,D,g,c){var q=false;var E=20;var t=20;var y=false;var o=20;var v={NOTIFICATION_COLOR:{text:"notification",dataIndex:"notification_color",isEditable:false,isHidden:false,isStatic:true,icon:{fontIconFamily:WUXManagedFontIcons.FontAwesome,iconName:"exclamation-circle"},width:2,onCellRequest:function(H){var G=H.cellView.reuseCellContent("__notificationcolor__");G.style.backgroundColor=H.manager.getDocument()._specTreeVlt.getNotificationInfos([H.nodeModel.getNotification()]).color}},SELECTION:{text:"",dataIndex:"selection",isStatic:true,width:E,onCellRequest:function(G){G.cellView.reuseCellContent("_specTreeSelection")}},TREE:{dataIndex:"tree",isSortable:false,isEditable:true,setValue:function(H){var I=H.nodeModel;I.prepareUpdate();I.updateOptions({label:H.value});I._getResolvedAndCall("onEditLabel",function G(J){J.nodeModel.updateOptions({label:H.value})});I.pushUpdate()}},COLOR:{icon:{iconName:"palette"},dataIndex:"color",isEditable:false,isHidden:false,isStatic:true,width:20,onCellRequest:function(H){var I=H.nodeModel;if(I._isSubnode()||I._getNodeCategory()===H.manager.getDocument()._specTreeVlt.NODE_CATEGORIES.FAKE||I._getNodeCategory()===H.manager.getDocument()._specTreeVlt.NODE_CATEGORIES.LAYOUT){H.cellView.getContent().empty()}else{var G=H.cellView.reuseCellContent("__color__");G.style.backgroundColor=I.getColor()}}},BORDER_COLOR:{text:"",dataIndex:"borderColor",isEditable:false,isHidden:false,isStatic:true,width:4,onCellRequest:function(H){var I=H.nodeModel;if(I._isSubnode()||I._getNodeCategory()===H.manager.getDocument()._specTreeVlt.NODE_CATEGORIES.FAKE||I._getNodeCategory()===H.manager.getDocument()._specTreeVlt.NODE_CATEGORIES.LAYOUT){H.cellView.getContent().empty()}else{var G=H.cellView.reuseCellContent("__bordercolor__");G.style.backgroundColor=I.getBorderColor()}}},NOTIFICATION_ICON:{text:"notification_icon",icon:{fontIconFamily:WUXManagedFontIcons.FontAwesome,iconName:"exclamation-circle"},dataIndex:"notification_icon",isEditable:false,width:t,isStatic:true,isHidden:false,onCellRequest:function(I){var H=I.manager.getDocument()._specTreeVlt.getNotificationInfos(I.nodeModel.getNotification());var G=z.generateIcon(H.icon);if(G){G.style.color=H.color;G.tooltipInfos=new k({title:I.nodeModel.getNotification(),shortHelp:I.nodeModel.getNotificationMsg()});I.cellView.getContent().setContent(G)}else{I.cellView.getContent().innerText=""}}},HIDE_SHOW:{text:"visibility",icon:{fontIconFamily:WUXManagedFontIcons.Font3DS,iconName:"eye-off"},dataIndex:"visibility",isEditable:false,isStatic:true,isHidden:false,width:t+6,onCellRequest:function(I){I.cellView.getContent().empty();var H=I.cellView.reuseCellContent("__visibility__");var G=I.nodeModel.isVisibleInSpecTree();H._reflectValue(G);H.value=G;I.cellView.getContent().setStyle("text-align","left")}},ACTION:{text:"action",dataIndex:"action",isEditable:false,width:t,isStatic:true,isHidden:false,onCellRequest:function(G){G.cellView.reuseCellContent("__action__")}}};function r(M,L){var L=L||(M.target||M.srcElement),I=L.currentStyle||window.getComputedStyle(L,null),H=parseInt(I.borderLeftWidth,10),K=parseInt(I.borderTopWidth,10),J=L.getBoundingClientRect(),G=M.clientX-H-J.left,N=M.clientY-K-J.top;return{offsetX:G,offsetY:N}}var a=w.inherit({publishedProperties:{value:{defaultValue:true,type:"boolean"},map:{defaultValue:true,type:"object"}},_preBuildView:function(){this.elements.container=new UWA.Element("div",{"class":"wux-cell-icon"});var G=this;this.elements.container.addEvent("mouseenter",function(){G._reflectPreviewValue(!G.value)});this.elements.container.addEvent("mouseleave",function(){G._reflectValue(G.value)});if(window.jasmine!==undefined&&!window.WEBUX_DO_NOT_TEST_SPECTREEVIEW){setInterval(function(){if(G.getContent().getParent()){G.elements.container.setContent(new UWA.Element("div",{html:"DO NOT TEST THE VIEW PLEASE",styles:{background:"red",color:"white",height:"100%",width:"100%"}}))}},1000)}},_applyProperties:function(G){this._applyValue();this._parent(G)},_applyValue:function(){this._applyMap()},_applyMap:function(){this.getContent().setContent(z.generateIcon(this.map[this.value].value))},_reflectPreviewValue:function(G){this.getContent().setContent(z.generateIcon(this.map[G].valuePreview))},_reflectValue:function(G){this.getContent().setContent(z.generateIcon(this.map[G].value))}});var C=j.extend({init:function(G){this._parent(G);this.elements.badgeTopRight.classList.add("wux-layouts-spectreeview-badge");this.elements.badgeTopLeft.classList.add("wux-layouts-spectreeview-badge");this.elements.badgeBottomRight.classList.add("wux-layouts-spectreeview-badge");this.elements.badgeBottomLeft.classList.add("wux-layouts-spectreeview-badge");this.elements.badgeTopRight.classList.add("wux-layouts-spectreeview-badge-top-right");this.elements.badgeTopLeft.classList.add("wux-layouts-spectreeview-badge-top-left");this.elements.badgeBottomRight.classList.add("wux-layouts-spectreeview-badge-bottom-right");this.elements.badgeBottomLeft.classList.add("wux-layouts-spectreeview-badge-bottom-left")},_buildWriteView:function(){this.getGridEngine()._hideHoverBar();return this._parent()},debouncedUpdateInternalParameters:function(){var G=this.getCellInfos();var H=G.nodeModel;if(G.virtualRowID>-1){this.getContent().setAttribute("node-category",H._getNodeCategory());this.getContent().setAttribute("node-type",H._getNodeType());this.getContent().setAttribute("node-notification",H.getNotification());this.getContent().setAttribute("node-is-hidden",!H.isVisibleInSpecTree());if(H.isMatchingSearch()){this.getContent().setAttribute("match-search",H._isMatchingSearchFocused)}else{this.getContent().removeAttribute("match-search")}}},_isSubNode:function(G){var H=this.getCellInfos();var I=H.nodeModel;if(H.virtualRowID>-1&&I.getParent()._isLayoutNode(G)){return true}else{return false}},_manageHoverBarButton:function(){var M=this.getCellInfos();if(M&&typeof(M.nodeModel)==="object"){var J=M.nodeModel._getNodeCategory();var H=M.nodeModel._getNodeType();var L=false;var K=M.manager.getDocument().getVault().getRegisteredNodeType(J,H);if(K&&K.buildHoverBar){var I=[];var G=K.buildHoverBar({nodeModel:M.nodeModel,hoverBarModel:UWA.clone(I)});if((Array.isArray(G)&&G.length)||(Array.isArray(I)&&I.length)){L=true;if(!this.elements.hoverbarDotMenu){this.elements.hoverbarDotMenu=new UWA.Element("div",{"class":"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-menu-dot wux-spectree-hoverbar-button"}).inject(this.elements.nodeContainer);this.elements.hoverbarDotMenu.addEvent("click",function(N){this.getCellInfos().manager._showHoverBar(this.getCellModel().getCellContent())}.bind(this))}else{this.elements.hoverbarDotMenu.inject(this.elements.nodeContainer)}}}if(!L&&this.elements.hoverbarDotMenu){this.elements.hoverbarDotMenu.remove()}}},updateInternalParameters:function(){var H=this.getCellInfos();this._parent();if(this._isSubNode()){this.getContent().removeAttribute("is-hidden");this.getContent().setAttribute("is-subnode",H.nodeModel.getParent()._getNodeType())}else{this.getContent().removeAttribute("is-subnode")}if(!H.isHeader){this._manageHoverBarButton();var G=H.manager.getDocument();this.getContent().setAttribute("node-is-uiactive",H.nodeModel.isActive());this.getContent().setAttribute("node-is-inwork",H.nodeModel.isActive());if(H.nodeModel._isAfterRollbackCursor()){this.getContent().setAttribute("node-is-after-rollback-cursor",true)}else{this.getContent().setAttribute("node-is-after-rollback-cursor",false)}}this.debouncedUpdateInternalParameters()},unsetBadges:function(){this.elements.badgeTopLeft.style.backgroundImage="";this.elements.badgeTopLeft.style.visibility="hidden";this.elements.badgeTopLeft.className="";this.elements.badgeTopLeft.addClassName("wux-layouts-treeview-badge wux-layouts-spectreeview-badge wux-layouts-treeview-badge-top-left wux-layouts-spectreeview-badge-top-left");this.elements.badgeBottomLeft.style.backgroundImage="";this.elements.badgeBottomLeft.style.visibility="hidden";this.elements.badgeBottomLeft.className="";this.elements.badgeBottomLeft.addClassName("wux-layouts-treeview-badge wux-layouts-spectreeview-badge wux-layouts-treeview-badge-bottom-left wux-layouts-spectreeview-badge-bottom-left");this.elements.badgeTopRight.style.backgroundImage="";this.elements.badgeTopRight.style.visibility="hidden";this.elements.badgeTopRight.className="";this.elements.badgeTopRight.addClassName("wux-layouts-treeview-badge wux-layouts-spectreeview-badge wux-layouts-treeview-badge-top-right wux-layouts-spectreeview-badge-top-right");this.elements.badgeBottomRight.style.backgroundImage="";this.elements.badgeBottomRight.style.visibility="hidden";this.elements.badgeBottomRight.className="";this.elements.badgeBottomRight.addClassName("wux-layouts-treeview-badge wux-layouts-spectreeview-badge wux-layouts-treeview-badge-bottom-right wux-layouts-spectreeview-badge-bottom-right")},addIcon:function(H,G){if(G===undefined){if(UWA.typeOf(H)==="element"){var I=new UWA.Element("div",{"class":"wux-layouts-treeview-icon",html:H,styles:{display:"inline-block"}});I.inject(this.elements.iconsContainer)}else{this._parent(H,G)}}},_getRelativeIncrementFactor:function(I){var H=this.getCellInfos();var J=H.nodeModel;var G=J.getParents();return H.manager._getRelativeIncrementFactorForNode(G[I])},_setDepth:function(H){var G=this.getCellInfos();var I=G.nodeModel;if(I.getParent()._isLayoutNode("layout-horizontal")&&G.dataIndex==="tree"){this.elements.linksContainer.setStyle("width",0);this.elements.nodeContainer.setStyle("left",0)}else{this._parent(H)}},_getSubNodeCellWidth:function(){var H=this.getCellInfos();var G=H.manager;return Math.min(45,(G.getColumnWidth("tree")/4))},getPosition:function(){var H=this.getCellInfos();var J=H.nodeModel;var G=H.manager;if(this._isSubNode("layout-horizontal")){return{top:G.getRowPosition(H.nodeModel.getParent()._getRowID()),left:G._getAbsoluteIncrementFactorForNode(H.nodeModel)+o+G.getColumnPosition("tree")+this._getSubNodeCellWidth()*J._getLocalID()}}else{var I=this._parent();return I}},getDimensions:function(){var H=this.getCellInfos();var G=H.manager;if(this._isSubNode("layout-horizontal")){return{width:this._getSubNodeCellWidth(),height:G.options.defaultCellHeight}}else{return this._parent()}}});var e=b.extend({init:function(H,G){this._parent(H,G);this._manageActiveNode()},getDocumentOwner:function(){var G=document;if(this.getContent()&&this.getContent().ownerDocument){G=this.getContent().ownerDocument}return G},_manageKeyboard:function(){this._parent();this._commandRegistry.registerCommand("goToPreviousParentNode",function(H){var J=H.event;var K=this.getActiveNode();var I=this;J.preventDefault();if(K){if(K.isExpanded()){H.keymapManager.wait();K.onPostCollapse(function(){H.keymapManager.listen()});K.collapse();I._goToNode(J,K,0)}else{if(!K.isRoot()){var G=K._getParentModel();if(G){I.setActiveNode(G);I._goToNode(J,G,0)}}else{I._goToNode(J,K,-1)}}}})},loadDocument:function(G){this._parent(G);this._manageUIActiveArea()},_updateBreadCrumb:function(I,H){var G=[];H.forEach(function(L){var J=L.getIcons();var K;if(J&&J.length>0){K=J[0]}G.push({label:L.getLabel(),icon:K,node:L})});I.value=G},_reflectNewActiveNode:function(){var H=this;var K=H.getActiveNode();var J=H._getCellViewDom(-1,"tree");if(K&&J){var I=J.dsView;var G=I.reuseCellContent("__breadcrumb__");G._lock=true;H._updateBreadCrumb(G,K.getPath().filter(function(L){switch(L._getNodeCategory()){case H.getDocument()._specTreeVlt.NODE_CATEGORIES.FAKE:if(L._getNodeType()==="more/less"){return false}else{return true}default:return true}}));G._lock=false}},_manageActiveNode:function(){var G=d.throttle(this._reflectNewActiveNode,100).bind(this);this._modelEvents.subscribe({event:"active"},this._reflectNewActiveNode.bind(this));this.onGridResize(G)},isUIActiveAreaEnabled:function(){return this._uiActiveAreaBGEnabled?this._uiActiveAreaBGEnabled:false},_manageUIActiveArea:function(){var H=this;this._uiActiveAreaBGEnabled=false;this._uiActiveAreaBG=null;var G=d.debounce(this._updateUIActiveArea.bind(this),20);this._bindJSEventOnDocument(this.getContent(),i.POINTERHIT,function I(L,J){if(L.multipleHitCount!==2){return}var K=H.getDocument();if(J&&J.isHeader===false){if(J.dataIndex==="tree"){J.nodeModel._getResolvedAndCall("onEdit")}}});this._bindEventOnDocument("uiActiveUpdate",function(J){H.updateView();G()});this._bindEventOnDocument("addChild",function(J){G()});this._bindEventOnDocument("removeChild",function(J){G()});this._bindEventOnDocument("postExpand",function(J){G()});this._bindEventOnDocument("postCollapse",function(J){G()})},_updateUIActiveArea:function(M){var R=this;var ad=R.getDocument();var V=ad.getUIActiveNode();if(V){R.getContent().addClassName("wux-ui-state-uiactive-mode");var W=V._getRowID();this._activeSupportRollbackNode=undefined;var K;this._lockRollbackbar=false;var Z=[];V.processDescendants({onlyVisibleNodes:true,treeTraversalOrder:"preOrder",processNode:function(af){var ag=af.nodeModel;if(ag&&!ag.hasNoRepresentation()){Z.push(ag);if(typeof(ag.isActive)==="function"&&ag.isActive()){if(typeof(ag.supportsRollback)==="function"&&ag.supportsRollback()){this._activeSupportRollbackNode=ag}else{if(typeof(ag.isRollbackable)==="function"&&ag.isRollbackable()){if(!this._activeSupportRollbackNode){this._activeSupportRollbackNode=ag.getParent()}K=ag}else{this._activeSupportRollbackNode=ag;this._lockRollbackbar=true}}}ag._beforeRollbackCursor()}}.bind(this)});var ac=Z.length>0?Z[Z.length-1]._getRowID():W;var S=R.getRowPosition(W);var T=(R.getRowPosition(ac)-R.getRowPosition(W)+R.getRowHeight(ac));if(!R._uiActiveAreaBG){R._uiActiveAreaBG=new UWA.Element("div",{"class":"wux-spectree-uiactive-area-bg"});R._uiActiveAreaBG.inject(R.elements.poolContainerRel)}if(!R._uiActiveAreaFG){R._uiActiveAreaFG=new UWA.Element("div",{"class":"wux-spectree-uiactive-area-fg"});R._uiActiveAreaFG.inject(R.elements.poolContainerRel)}R._uiActiveAreaFG.setStyles({display:"block",top:S,left:0,right:0,height:T});R._uiActiveAreaBG.setStyles({display:"block",top:S,left:0,right:0,height:T});var ab=4;if(this._activeSupportRollbackNode){var H=this._activeSupportRollbackNode.getVisibleChildren();if(Array.isArray(H)&&H.length){if(!K){this._lockRollbackbar=true}else{this._lockRollbackbar=false}var G=H[0];var aa;this._firstRollbackableChild=undefined;this._lastRollbackableChild=undefined;ad.prepareUpdate();this._activeSupportRollbackNode.processDescendants({onlyVisibleNodes:true,treeTraversalOrder:"preOrder",processNode:function(af){var ag=af.nodeModel;if(ag&&!ag.hasNoRepresentation()){if(K){if(af.virtualRowID<=K._getRowID()){ag._beforeRollbackCursor()}else{ag._afterRollbackCursor()}}if(typeof(ag.isRollbackable)==="function"&&ag.isRollbackable()){if(!this._firstRollbackableChild){this._firstRollbackableChild=ag}this._lastRollbackableChild=ag}aa=ag}}.bind(this)});ad.pushUpdate();if(this._firstRollbackableChild){this._minLocalCursorPosition=R.getRowHeight(this._firstRollbackableChild._getRowID())}if(this._lastRollbackableChild){this._maxLocalCursorPosition=R.getRowPosition(this._lastRollbackableChild._getRowID())-R.getRowPosition(this._activeSupportRollbackNode._getRowID())}if(!R._rollbackSlider){R._rollbackSlider=new UWA.Element("div",{"class":"wux-spectree-rollback-slider"});R._rollbackSliderRail=new UWA.Element("div",{"class":"wux-spectree-rollback-slider-rail"}).inject(R._rollbackSlider);R._rollbackSliderBar=new UWA.Element("div",{"class":"wux-spectree-rollback-slider-bar"}).inject(R._rollbackSliderRail);R._rollbackSliderCursor=new UWA.Element("div",{"class":"wux-spectree-rollback-slider-cursor"}).inject(R._rollbackSliderRail);var O;var Y;var ae=false;var Q=function(ag){var af=R.getDocument();if(af&&O){af.prepareUpdate();this._activeSupportRollbackNode.processDescendants({onlyVisibleNodes:true,treeTraversalOrder:"postOrder",processNode:function(ah){var ai=ah.nodeModel;if(ai&&!ai.hasNoRepresentation()){if(ah.virtualRowID<=O.rowID){ai._beforeRollbackCursor()}else{if(O.rowID<=this._lastRollbackableChild._getRowID()){ai._afterRollbackCursor()}}}}.bind(this)});af.pushUpdate()}}.bind(this);R.getContent().addEvent(i.POINTERMOVE,function(ag){O=R._getCoordinatesFromEvent(ag);if(window.jasmine!==undefined&&ag.sliderCellInfos){O=ag.sliderCellInfos}if(ae){if(O.rowID<this._firstRollbackableChild._getRowID()){O.rowID=this._firstRollbackableChild._getRowID()}else{if(O.rowID>this._lastRollbackableChild._getRowID()){O.rowID=this._lastRollbackableChild._getRowID()}}Y=R.getTreeNodeModelFromRowID(O.rowID);var af=this.getDocumentOwner();if(typeof(Y.isRollbackable)!=="function"||!Y.isRollbackable()){af.body.style.cursor="not-allowed"}else{af.body.style.cursor="default"}}else{var af=this.getDocumentOwner();af.body.style.cursor="default"}}.bind(this));var P=function(ah){if(ae){var ag=r(ah,R._rollbackSlider);var af=ag.offsetY;if(af>this._maxLocalCursorPosition-(R.getRowHeight(O.rowID)/2)){af=this._maxLocalCursorPosition-(R.getRowHeight(O.rowID)/2)}if(af<(this._minLocalCursorPosition/2)){af=(this._minLocalCursorPosition/2)}R._rollbackSliderBar.setStyles({height:af-(ab/2)});R._rollbackSliderCursor.setStyles({top:af-(R.getRowHeight(O.rowID)/2)+(ab/2)});Q(ah)}}.bind(this);var U=function(ah){ae=false;var ag=this.getDocumentOwner();ag.removeEventListener(i.POINTERMOVE,P);ag.removeEventListener(i.POINTERUP,U);Y=R.getTreeNodeModelFromRowID(O.rowID);var af=R.getRowPosition(O.rowID)-R.getRowPosition(this._activeSupportRollbackNode._getRowID());R._rollbackSliderBar.setStyles({height:af-(ab/2)});R._rollbackSliderCursor.setStyles({top:af-R.getRowHeight(O.rowID)+(ab/2)});Q(ah);Y.defineAsRollbackedNode();R.unlockUI()}.bind(this);R._rollbackSlider.addEvent(i.POINTERDOWN,function J(ag){ag.preventDefault();if(!this._lockRollbackbar){ae=true;var af=this.getDocumentOwner();af.addEventListener(i.POINTERMOVE,P);af.addEventListener(i.POINTERUP,U);R.lockUI()}}.bind(this));R._rollbackSlider.inject(R.elements.poolContainerRel);R._rollbackSlider.addEventListener("dragstart",function(af){af.preventDefault();af.stopPropagation();return false})}var N;var I;if(this._lockRollbackbar){I=G;N=R.getRowPosition(aa._getRowID())+R.getRowHeight(aa._getRowID())-R.getRowPosition(G._getRowID())}else{I=this._firstRollbackableChild;N=R.getRowPosition(this._lastRollbackableChild._getRowID())+R.getRowHeight(this._lastRollbackableChild._getRowID())-R.getRowPosition(this._firstRollbackableChild._getRowID())}R._rollbackSlider.setStyles({display:"block",position:"absolute",top:R.getRowPosition(I._getRowID()),left:R._getAbsoluteIncrementFactorForNode(this._activeSupportRollbackNode)+14,height:N-(ab/2),zIndex:10000000000000});if(this._lockRollbackbar){R._rollbackSliderBar.setStyles({display:"none"});R._rollbackSliderCursor.setStyles({display:"none"})}else{var L=R.getRowPosition(K._getRowID())-R.getRowPosition(this._activeSupportRollbackNode._getRowID());R._rollbackSliderBar.setStyles({display:"block",height:L-(ab/2)});R._rollbackSliderCursor.setStyles({display:"block",height:R.getRowHeight(K._getRowID())-ab,top:L-R.getRowHeight(this._activeSupportRollbackNode._getRowID())+(ab/2)})}}}else{if(R._rollbackSlider){R._rollbackSlider.setStyles({display:"none"})}}}else{R.getContent().removeClassName("wux-ui-state-uiactive-mode");if(R._rollbackSlider){R._rollbackSlider.hide()}if(R._uiActiveAreaFG){R._uiActiveAreaFG.hide()}if(R._uiActiveAreaBG){R._uiActiveAreaBG.hide()}if(R._uiInWorkArea){R._uiInWorkArea.hide()}if(R._uiInWorkPath){R._uiInWorkPath.hide()}for(var X in R._listOfInWorkDot){R._listOfInWorkDot[X].destroy();delete R._listOfInWorkDot[X]}}},_shoulBeSelected:function(H){var G=this.getDocument();return G.options.shouldBeSelected.call(G,H)},selectRow:function(H,G){if(this._shoulBeSelected(this.getTreeNodeModelFromRowID(H))){this._parent(H,G)}},_setHeadersDimensions:function(G){this._parent(G);if(this._getParent().options.enableStaticColumns){if(y){z.setStyles(this.elements.rowsHeaderContainer,{right:0,left:""});z.setStyles(this.elements.gridHeaderContainer,{right:this.elements.rowsHeaderContainer.style.width,left:0})}}},_syncRowModelWithTreeNodeModel:function(H){var G=this;G.updateCellView(H._getRowID(),-1);return this._parent(H)},_doFeaturesNeedToBeDisplayed:function(G){return G.hasFeatures()&&G.isExpanded()},_getAbsoluteIncrementFactorForNode:function(J){var I=0;var H=J.getParents();for(var G=0;G<H.length;G++){I=I+this._getRelativeIncrementFactorForNode(H[G])}return I},_getRelativeIncrementFactorForNode:function(H){var G;switch(H._getNodeCategory()){case this.getDocument()._specTreeVlt.NODE_CATEGORIES.LAYOUT:if(H._isLayoutNode("rollbackable-children")){G=o}else{G=0}break;case this.getDocument()._specTreeVlt.NODE_CATEGORIES.FAKE:G=o;break;default:if(H.hasNoRepresentation()){G=0}else{G=o}}return G},_computeStyleForActiveState:function(J){var L=J._getRowID();var H,G;H=this.getRowPosition(L);G=this.getRowHeight(L);if(J._isSubnode("layout-horizontal")){H=this.getRowPosition(J.getParent()._getRowID());var I=this.getColumnIDFromDataIndex("tree");var N=this.elements.container.querySelector('.wux-datagrid-cell[virtual-row-id="'+L+'"][virtual-column-id="'+I+'"]');if(N){var K=N.dsView;var M=K.getDimensions();return{top:H,left:K.getPosition().left,height:M.height,width:M.width}}else{return this._parent(J)}}else{return{top:H,left:0,height:G,right:0}}},_indexRowsPosition:function(){},getRowPosition:function(I){var H;if(I===-1){H=this._parent(I)}else{var K=this.getTreeNodeModelFromRowID(I);if(K&&K._isSubnode("layout-horizontal")){var G=K.getParent();var J=G._getRowID();if(J===null){}H=this.getRowPosition(J)}else{H=this._parent(I)}}return H},getRowHeight:function(G){if(G===-1){return this._parent(G)}else{var H=G;if(typeof G==="number"){H=this.getTreeNodeModelFromRowID(G)}if(H&&H.getParent()&&H.getParent()._isLayoutNode("layout-horizontal")){return 0}else{if(H&&H._isLayoutNode("rollbackable-children")){return 0}else{return this._parent(G)}}}},_createDocument:function(G){this._parent(G);this._manageHoverBar()},_manageHoverBar:function(){var I=this;this.elements.poolContainerRel.addEvent("mouseleave",function(){I._mouseCursorOut=true;I._hideHoverBar()});var J;var K=0;var H=false;var G=function(M,N){if(window.jasmine!==undefined&&M.cellInfos){N=M.cellInfos}if(N&&N.cellView&&N.cellView.elements.hoverbarDotMenu&&N.cellView.elements.hoverbarDotMenu.isHidden()){N.cellView.elements.hoverbarDotMenu.addClassName("wux-spectree-hoverbar-button-display");var L=function(){if(N){N.cellView.elements.hoverbarDotMenu.removeClassName("wux-spectree-hoverbar-button-display");N.cellView.elements.container.removeEvent("mouseleave",L)}};N.cellView.elements.container.addEvent("mouseleave",L)}};this.addEventListener(i.POINTERMOVE,G);this.addEventListener("mouseenter",function(){H=true;I._mouseCursorOut=false})},_hideHoverBar:function(){if(this.elements.hoverbarContainer){setTimeout(function(){if(this._mouseCursorOut){this.elements.hoverbarContainer.setAttribute("visibility","false")}}.bind(this),1000)}},_showHoverBar:function(G){if(this.elements.hoverbarContainer===undefined){var L=function(Q){Q.stopPropagation()};this.elements.hoverbarContainer=new UWA.Element("div",{"class":"wux-spectree-hoverbar",events:{mousedown:L,touchstart:L,mouseup:L,touchend:L}});this.elements.hoverbarContainerRel=new UWA.Element("div",{"class":"wux-spectree-hoverbar-rel"}).inject(this.elements.hoverbarContainer);this.elements.hoverbarContainerBlurMask=new UWA.Element("div",{"class":"wux-spectree-hoverbar-blur"}).inject(this.elements.hoverbarContainerRel);this.elements.hoverbarContainer.inject(this.elements.poolContainerRel);this.elements.hoverbarToolbar=new D({overflowManagement:"dropdown",direction:"horizontal",adaptSizeToParent:true}).inject(this.elements.hoverbarContainerRel)}else{this.elements.hoverbarToolbar.clear()}var J=G._getRowID();this.elements.hoverbarContainer.setStyles({top:this.getRowPosition(J),height:this.getRowHeight(J),right:0});var K=this;if(G){var N=this.getDocument();var O=G._getNodeCategory();var I=G._getNodeType();var P=this._getParent().options;var H=[];var M=[];N._specTreeVlt._processNodeType(O,I,P.application,function(R){var Q=R.options;if(Q&&Q.buildHoverBar&&!G._isSubnode()){H=Q.buildHoverBar({nodeModel:G,hoverBarModel:UWA.clone(H)})}},"buildHoverBar");if(H instanceof Array){H.forEach(function(Q){M.push(Q)});M.forEach(function(Q){var R=new u({label:"",displayStyle:"icon",icon:Q.icon});var S=K.getRowHeight(G)-4;R.getContent().setStyle("min-height",S+"px");R.getContent().setStyle("min-width",S+4+"px");R.elements.iconPlaceholder.style.lineHeight=(S-4)+"px";R.addEventListener("buttonclick",function(T){if(Q.callback){K.elements.hoverbarContainer.setStyle("PointerEvents","none");Q.callback({nodeModel:G});setTimeout(function(){K.elements.hoverbarContainer.setStyle("PointerEvents","");K._showHoverBar(G)},100)}});K.elements.hoverbarToolbar.add("element",{element:R.getContent(),position:"far"})});if(M.length>0){K.elements.hoverbarContainer.setAttribute("visibility","true")}else{K.elements.hoverbarContainer.setAttribute("visibility","false")}}else{throw"SpecTree: buildHoverBar does not return an array"}}}});var x=l.extend({defaultOptions:{specTreeVault:null,cellClass:C,managerClass:e,application:F.APP_DEFAULT_NS,expanderStyle:"triangle",performances:{renderingMode:"adaptive",numberOfRowsFactor:3,numberOfColumnsFactor:1,buildLinks:false,preloadPool:true,resizeDebounceTimeout:10,useRequestAnimationFrameRendering:true,automaticSizeTreeColumnToFit:false,minimumScrollDistance:10},apiVersion:2,show:{rowHeaders:true,columnHeaders:true},selection:{rowHeaders:false,preSelection:true,nodes:true,canMultiSelect:true,enableListSelection:true,toggle:false},defaultYDistanceOfTopBadgesFromIconCenter:4,defaultYDistanceOfBottomBadgesFromIconCenter:10,changeColorOnFocus:false,showLinesSeparator:false,enableExpandOnDoubleClick:false,enableStaticColumns:true,isEditable:true,enableActiveUI:true,enableKeyboardNavigation:true,enableTreeColumnEllipsisOverflow:true,showScrollbarsOnHover:true,columns:[v.BORDER_COLOR,v.TREE,v.NOTIFICATION_ICON,v.COLOR,v.HIDE_SHOW,v.SELECTION],onDragStartCell:function(H,I){var G=[];I.manager.getNodesXSO().get().concat().sort(function(K,J){return K._getRowID()>J._getRowID()?+1:-1}).forEach(function(J){G.push(J._getID())});this.serializeDragAndDropEvent(H,{data:{"dswebux/x-tree.treenodemodel+json":G,"dswebux/x-tree.treenodemodel+number":I.nodeModel._getID()}})},onDragEnterCellDefault:function(I,H){var G=H.dropPosition==="middle"?H.nodeModel:H.nodeModel.getParent();var K=H.manager.getNodesXSO().get();if(Array.isArray(K)&&K.length){var J=new Promise(function(M,L){H.manager.getDocument().options.shouldAcceptDrop({parentTreeNodeModel:G,draggedTreeNodeModels:K,dropPosition:H.dropPosition},M,L)}).then(function(L){if(!L){I.dataTransfer.dropEffect="none"}H.manager.enableDragOverStateForRow(H.virtualRowID,H.dropPosition)})}},onDragOverCellDefault:function(I,H){var G=H.dropPosition==="middle"?H.nodeModel:H.nodeModel.getParent();var K=H.manager.getNodesXSO().get();if(Array.isArray(K)&&K.length){var J=new Promise(function(M,L){H.manager.getDocument().options.shouldAcceptDrop({parentTreeNodeModel:G,draggedTreeNodeModels:K,dropPosition:H.dropPosition},M,L)}).then(function(L){if(!L){I.dataTransfer.dropEffect="none"}H.manager.setDragOverStateForNode(H.nodeModel,H.dropPosition)})}},onDragLeaveCellDefault:function(I,H){var G=H.dropPosition==="middle"?H.nodeModel:H.nodeModel.getParent();var K=H.manager.getNodesXSO().get();if(Array.isArray(K)&&K.length){var J=new Promise(function(M,L){H.manager.getDocument().options.shouldAcceptDrop({parentTreeNodeModel:G,draggedTreeNodeModels:K,dropPosition:H.dropPosition},M,L)}).then(function(L){if(!L){I.dataTransfer.dropEffect="none"}H.manager.disableDragOverStateForBlank();H.manager.disableDragOverStateForRow()})}},onContextualEvent:{callback:function B(L){if(L&&L.treeview){var J=L.treeview.manager._getParent().options;if(L.treeview.virtualRowID>-1&&L.treeview.virtualColumnID>-1){var K=L.treeview.nodeModel._getNodeCategory();var I=L.treeview.nodeModel._getNodeType();var H=[];var G=[];L.treeview.manager.getDocument()._specTreeVlt._processNodeType(K,I,J.application,function(N){var M=N.options;if(M&&M.buildContextualMenu){H=M.buildContextualMenu({nodeModel:L.treeview.nodeModel,contextualMenuModel:H})}},"buildContextualMenu");H.forEach(function(M){if(q){M.title="["+(J.application?J.application:F.DEFAULT_APP_NS)+"] "+M.title}if(M.action){G.push(M)}else{console.error("Contextual menu item has been ignored because it doesn't contain an action callback")}});return G}}}}},init:function(O){O.apiVersion=2;O.enableStaticColumns=O.enableStaticColumns!==undefined?O.enableStaticColumns:true;O.show=UWA.extend({rowHeaders:true,columnHeaders:true},O.show);if(O.enableStaticColumns){O.show={rowHeaders:O.show.rowHeaders!==undefined?O.show.rowHeaders:false,columnHeaders:O.show.columnHeaders!==undefined?O.show.columnHeaders:false};O.staticColumns=[];var I=0;var H=O.columns||UWA.clone(this.defaultOptions.columns);H=H.filter(function(P){if(P.isStatic){I+=P.width;O.staticColumns.push(UWA.clone(P));return false}else{return true}});O.columns=H;O.headersDimensions={width:O.show.rowHeaders?I:0,height:O.show.columnHeaders?40:0}}O=UWA.extend(UWA.clone(this.defaultOptions),O);O.treeDocument=O.treeDocument||new F();this._parent(O);var L=this;var J=this.getManager();this.getContent().addClassName("wux-spectreeview");if(this.options.showLinesSeparator){this.elements.container.setAttribute("show-lines-separator","true")}else{this.elements.container.setAttribute("show-lines-separator","false")}this.options.treeDocument.setCurrentApplication(this.options.application);this._registerReusables();if(this.options.enableStaticColumns){if(y){z.setStyles(J.elements.rowsHeaderContainer,{right:0,left:"initial"});z.setStyles(J.elements.gridHeaderContainer,{right:J.elements.rowsHeaderContainer.style.width,left:0})}var K=this.getManager()._reusableCellContentManager.use("__staticcolumns__");var M=K.component;L.options.staticColumns.forEach(function(R){var P=M.subCells[R.dataIndex];if(L.options.show.columnHeaders){if(R.icon){var Q=z.generateIcon(R.icon);z.setContent(P,Q)}else{z.setContent(P,R.text)}}});M.inject(this.getManager().elements.corner);this.getManager().onColumnHeaderRequest(function G(P){if(P.dataIndex==="tree"){J._reflectNewActiveNode()}});this.getManager().onRowHeaderRequest(function G(Q){var P=Q.cellView.reuseCellContent("__staticcolumns__");Q.nodeModel=J.getTreeNodeModelFromRowID(Q.virtualRowID);if(Q.nodeModel){L.options.staticColumns.forEach(function(T){var S=P.subCells[T.dataIndex];var R=Q.cellView;Q.manager=J;Q.cellView=S;P.appendChild(S);T.onCellRequest(Q);Q.cellView=R})}})}this._manageSelectionColumn();this._manageZoom();this._manageAutomaticResize();this._mapBehaviorToNodeTypes();var N=function(){var P=c.getTouchMode()?true:false;if(this.getManager().touchMode!==P){this.getManager().touchMode=P}}.bind(this);N();document.addEventListener("touchChange",function(){N()}.bind(this))},destroy:function(){},_manageAutomaticResize:function(){this._lastRegisteredTreeColumnWidth=0;var H=this;var G=this.getManager();H.getManager().onReady(function(){var K={x:0,y:0};function I(M){var L=G._computeMinimalColumnWidth("tree");if(H._lastRegisteredTreeColumnWidth!==L||G.__lastScrollPos.x!==K.x){G.prepareUpdateView();G.setColumnWidth("tree",L);G.pushUpdateView();H._lastRegisteredTreeColumnWidth=L;K=G.__lastScrollPos;console.info("sizeTreeColumnToFit")}}var J=d.debounce(I,600);if(H.options.performances.automaticSizeTreeColumnToFit){H.options.treeDocument.onPostExpand(J);H.options.treeDocument.onPostCollapse(J);H.getManager().getScroller().onScrollEnd(J)}})},_registerReusables:function(){var H=this;var G=this.getManager();this.getManager().registerReusableCellContent({id:"__staticcolumns__",buildContent:function(){var I=new UWA.Element("div",{"class":"wux-datagrid-static-cell"});I.subCells={};H.options.staticColumns.forEach(function(L){var K=new UWA.Element("div",{"class":"wux-datagrid-subcell",styles:{width:L.width}}).inject(I);I.subCells[L.dataIndex]=K;var J;K.getContent=function(){return K};K._disposeReusableContent=function(){if(J){J.__disposable__.dispose();J=undefined}};K._setReusableContent=function(M){K._disposeReusableContent();J=M;K.setContent((J.getContent&&J.getContent())||J)};K.reuseCellContent=function(M){return G._reuseCellContent(M,K)}});return I}});this.getManager().registerReusableCellContent({id:"__action__",buildContent:function(){var I=new UWA.Element("div",{"class":"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-menu-dot",styles:{display:"block",textAlign:"center",lineHeight:H.options.defaultCellHeight+"px",fontSize:14}});I.addEvent("click",function(K){var J=document.createEvent("HTMLEvents");J.initEvent("contextmenu",true,false);J.pageX=K.pageX;J.pageY=K.pageY;I.dispatchEvent(J)});return I}});this.getManager().registerReusableCellContent({id:"__visibility__",buildContent:function(){var I=new a({value:true,map:{"false":{value:{iconName:"eye-off"},valuePreview:{iconName:"eye-off"}},"true":{valuePreview:{iconName:"eye-off"},value:{}}}});I.getContent().addEvent("click",function(M){M.stopPropagation();var N=G._getCellInfosFromEventTarget(M);var O=N.nodeModel;I.value=!I.value;var J=I.value?"onShow":"onHide";O.setVisibilityInSpecTree(I.value);if(O._isLayoutNode()){var L=O.getChildren();for(var K=0;Array.isArray(L)&&K<L.length;K++){L[K].setVisibilityInSpecTree(I.value);L[K]._getResolvedAndCall(J)}}O._getResolvedAndCall(J)});return I}});this.getManager().registerReusableCellContent({id:"__color__",buildContent:function(){var I=new UWA.Element("span",{styles:{position:"absolute",top:10,left:4,right:4,bottom:10,borderRadius:"2px"}});return I}});this.getManager().registerReusableCellContent({id:"__bordercolor__",buildContent:function(){var I=new UWA.Element("span",{styles:{position:"absolute",top:0,left:0,right:0,bottom:0}});return I}});this.getManager().registerReusableCellContent({id:"__notification__",buildContent:function(){var I=new a({value:true,map:{"false":{valuePreview:undefined,value:undefined},"true":{valuePreview:{iconName:"info"},value:{iconName:"info"}}}});return I}});this.getManager().registerReusableCellContent({id:"__notificationcolor__",buildContent:function(){var I=new UWA.Element("div",{styles:{width:"100%",height:"100%"}});return I}});this.getManager().registerReusableCellContent({id:"__breadcrumb__",buildContent:function(){var I=new g({value:[],});I.displayLabels=4;I.displayIcons=1;I._lock=false;I.addEventListener("change",function(K){if(I._lock===false){var J=K.dsModel.value[K.dsModel.value.length-1].node;G.prepareUpdateView();J.select(true);G.setActiveNode(J);G.scrollToNode(J,"middle");G.pushUpdateView()}});return I}})},_manageZoom:function(){var G=this;G._zoom=1;UWA.Element.addEvent.call(this.elements.container,"mousewheel",function(I){var K=UWA.Event.wheelDelta(I);var J=I.ctrlKey;if(J){I.preventDefault();if(Math.abs(K)===1){K=K*0.05}var H=(G._zoom+K);if(H>=0.55&&H<=1.5){G._zoom=H;G.getManager().elements.container.setStyle("zoom",G._zoom.toFixed(2));G.getManager().updateView(true);G.getManager().onPostUpdateViewOnce(function(){G.getManager()._updateUIActiveArea()})}}})},_manageSelectionColumn:function(){var O=this;O.getManager().registerReusableCellContent({id:"_specTreeSelection",buildContent:function(){var T=new UWA.Element("div",{"class":"wux-spectreeview-selection-area",html:"&nbsp;"});T.addEventListener("focus",function(U){U.preventDefault();U.stopPropagation()});return T}});var J=O.getManager();var P=0,R=0,I=-1;var L,K;var M;var H,N;var G=[];var Q=false;var S=function(Z,aa){N=J.getDocument();H=N.getXSO();if(O.options.selection.canMultiSelect){if(H.get().length===0&&L>=0){var T=J.getTreeNodeModelFromRowID(L);T.withTransactionUpdate(function(){J.selectRow(L,false);J.setActiveNode(T);T.select();J._preventNextUpdateView()})}if(H.get().length!==0){var X=J.getTreeNodeModelFromRowID(aa.rowID);P=X._getRowID()-H.get()[0]._getRowID();R=X._getRowID()-M;if(R!==0){J._modeIsListSel=true;J._modeIsMultiSel=true;K=aa.rowID;M=aa.rowID;J.prepareUpdateView();J._preventNextUpdateView();H.empty();var V=J.getSelectedRows();while(V[0]!==undefined){J.unselectRow(V[0])}var U,W;if(P>0){U=L;W=K}else{W=L;U=K}G.forEach(function(ac){J.unselectRow(ac._getRowID())});G=[];for(var Y=U;Y<=W;Y++){var ab=J.getTreeNodeModelFromRowID(Y);if(ab.isSelected()===false){ab.select()}J.selectRow(Y,false)}if(I>W){for(var Y=W+1;Y<=I;Y++){var ab=J.getTreeNodeModelFromRowID(Y);if(ab){ab.unselect()}J.unselectRow(Y)}}J.setActiveNode(X);I=W;J._modeIsListSel=false;J._modeIsMultiSel=false;J.pushUpdateView()}}}};J._draggable({begin:function(U,V){if(V.columnID===-1&&z.firstParentWithClass(U.target,"wux-spectreeview-selection-area")){U.preventDefault();U.stopPropagation();N=J.getDocument();H=N.getXSO();G=H.get().slice();var T=J.getTreeNodeModelFromRowID(V.rowID);Q=T.isSelected();if(O.options.selection.canMultiSelect){T.withTransactionUpdate(function(){J.selectRow(V.rowID,false);J.setActiveNode(T);T.select();J._preventNextUpdateView()})}else{T.withTransactionUpdate(function(){J.setActiveNode(T);T.select(true)})}L=V.rowID;M=V.rowID}},drag:function(T,U){if(z.hasClass(T.target,"wux-spectreeview-selection-area")){T.stopPropagation()}if(J.getScrollerPosition().y<0){T.stopPropagation();T.preventDefault()}if(U.columnID===-1&&z.firstParentWithClass(T.target,"wux-spectreeview-selection-area")){S(T,U)}},end:function(U,W){if(W.columnID===-1&&L!==undefined&&z.firstParentWithClass(U.target,"wux-spectreeview-selection-area")){var V=J.getTreeNodeModelFromRowID(L);if(V._isLayoutNode()){W=J._getCellInfosFromEventTarget(U)}if(W.columnID===-1&&L===W.rowID&&Q){var T=J.getTreeNodeModelFromRowID(W.rowID);J.setActiveNode(T);T.unselect()}J.updateView()}}})},_applyDropCell:function(M,I){var K=this;var L=M.data["dswebux/x-tree.treenodemodel+number"];if(I.dropPosition==="middle"&&I.nodeModel._getID()===L){return}var J=I.nodeModel;var G=I.dropPosition==="middle"?J:J.getParent();if(G){var H=[];var N=M.data["dswebux/x-tree.treenodemodel+json"];I.manager.getNodesXSO().get().forEach(function(P){var O=N.indexOf(P._getID());if(O>=0){N.splice(O,1);H.push(P)}});if(H.length){G.applyDropTreeNodeModel({droppedNodes:H,dropPosition:I.dropPosition})}}},_mapBehaviorToNodeTypes:function(){var H=this.getDocument();var G=this.getManager();G.addEventListener("click",function(J,I){if(I&&I.isHeader===false){var K=I.nodeModel;switch(K._getNodeCategory()){case H._specTreeVlt.NODE_CATEGORIES.FAKE:if(K.isExpanded()){K.collapse()}else{K.expand()}break;default:}}})},_search:function(H){var G=[];var I=this.getManager().getDocument();I.prepareUpdate();I.processDescendants({onlyVisibleNodes:false,treeTraversalOrder:"postOrder",processNode:function(J){var K=J.nodeModel.getChildren();if(J.nodeModel.getState()==="noChildren"&&Array.isArray(K)&&K.length){J.nodeModel.setState({state:"expanded"})}J.nodeModel.show();J.nodeModel.unmatchSearch();if(J.nodeModel._isMatching(H.value)){G.push(J.nodeModel)}}});I.pushUpdate();return G},findInterface:function(H,G){H.specTreeShell.closeDrawer();var J=this.getManager().getDocument();J.prepareUpdate();var I=this._search({value:H.value});I.forEach(function(K){K.matchSearch()});J.pushUpdate()},searchInterface:function(H){H.specTreeShell.openDrawer({height:200});var L=this;var J=this.getManager().getDocument();var K=this._search({value:H.value});var I=F._buildSpecTreeDocumentFromSearchResult({searchResults:K});I.getXSO().onAdd(function(O){var N=J.search({useTransaction:false,match:function(P){return O.options._originalID===P.nodeModel._getID()}});L.getManager().scrollToNode(N[0],"middle",false);N[0].select(true)});var G=v.NOTIFICATION_COLOR;var M=v.NOTIFICATION_ICON;M.isHidden=!H.showNotifications;G.isHidden=!H.showNotifications;if(!this.elements.filteredTreeListView){this.elements.filteredTreeListView=new x({height:"auto",enableStaticColumns:false,defaultCellHeight:40,isEditable:true,changeColorOnFocus:false,show:{rowHeaders:false,columnHeaders:false},columns:[M,{dataIndex:"path",width:"auto",getValue:function(N){return N.nodeModel.options.path},setValue:function(){},onCellRequest:function(O){if(O.isHeader===false){var N=O.cellView.reuseCellContent("__breadcrumb__");N._lock=true;O.manager._updateBreadCrumb(N,O.nodeModel.options.path);N._lock=false}}}]});this.elements.filteredTreeListView.getContent().addClassName("wux-spectreeview");this.elements.filteredTreeListView.getContent().addClassName("wux-state-filtered");this.elements.filteredTreeListView.getManager().hideColumn("tree")}this.elements.filteredTreeListView.getManager().loadDocument(I);H.specTreeShell.elements.topDockingElement.dockingZoneContent=this.elements.filteredTreeListView.getContent()},filterInterface:function(G){G.specTreeShell.closeDrawer();var H=this.getManager().getDocument();if(G.value&&G.value.length>0){H.prepareUpdate();H.processDescendants({onlyVisibleNodes:false,treeTraversalOrder:"postOrder",processNode:function(I){if(this._preventHide===true){delete this._preventHide;return}I.nodeModel.unmatchSearch();if(I.nodeModel._isMatching(G.value)){I.nodeModel.show();I.nodeModel.getParents().forEach(function(K){var J=K.getChildren();if(Array.isArray(J)&&J.length){K.setState({state:"expanded"})}K.show();K._preventHide=true})}else{I.nodeModel.hide()}}});H.pushUpdate()}}});Object.defineProperty(x,"DEFAULT_COLUMNS",{get:function(){return UWA.clone(v)}});return x});define("DS/SpecTree/SpecTreeShell",["DS/SpecTree/SpecTreeView","DS/SpecTree/SpecTreeDocument","DS/Tree/Manager","DS/Tree/TreeNodeModel","DS/Tree/TreeNodeView","DS/Core/PointerEvents","DS/Controls/Button","DS/Controls/Abstract","DS/Controls/ComboBox","DS/Utilities/Dom","DS/Controls/LineEditor","DS/Windows/DockingElement","DS/Utilities/Utils","DS/Windows/Dialog","DS/TreeModel/TreeDocument","DS/Controls/Toolbar","DS/Tweakers/TypeRepresentationFactory","i18n!DS/SpecTree/assets/nls/shell.json"],function(q,u,a,n,i,h,o,p,j,r,s,k,b,f,l,t,g,e){var d=p.inherit({publishedProperties:{height:{defaultValue:"",type:"string"},mode:{defaultValue:"find",type:"string"},value:{defaultValue:"",type:"string"}},_preBuildView:function(){var v=this;this._ignoreChangeEvents=false;this.elements.container=new UWA.Element("div",{"class":"wux-spectreeshell-search"});this.elements.inputSearch=new s({placeholder:e[this.mode],value:this.value,selectAllOnFocus:true,autoCommitFlag:true}).inject(this.elements.container);this.elements.btnSearch=new o({icon:"search",displayStyle:"lite",type:"check"}).inject(this.elements.container);this.elements.btnFilter=new o({icon:"filter",displayStyle:"lite",type:"check"}).inject(this.elements.container);this._bindEvents()},_bindEvents:function(){var v=this;this.elements.inputSearch.addEventListener("change",function(w){v.value=w.dsModel.value});this.elements.btnSearch.addEventListener("change",function(){if(v._ignoreChangeEvents===false){if(v.elements.btnSearch.checkFlag){v.mode="search"}else{v.mode="find"}}});this.elements.btnFilter.addEventListener("change",function(w){if(v._ignoreChangeEvents===false){if(v.elements.btnFilter.checkFlag){v.mode="filter"}else{v.mode="find"}}})},_applyMode:function(){var v=this;this._ignoreChangeEvents=true;switch(this.mode){case"find":v.elements.btnSearch.checkFlag=false;v.elements.btnFilter.checkFlag=false;break;case"search":v.elements.btnSearch.checkFlag=true;v.elements.btnFilter.checkFlag=false;break;case"filter":v.elements.btnSearch.checkFlag=false;v.elements.btnFilter.checkFlag=true;break;default:}this.elements.inputSearch.placeholder=e[this.mode];this._ignoreChangeEvents=false}});var c=new g();var m=p.inherit({publishedProperties:{height:{defaultValue:"",type:"string"},application:{defaultValue:"",type:"string"},representations:{defaultValue:[],type:"array"}},_preBuildView:function(){var w=this;this._enums=["test"];c.registerEnum("Enum1",function(){return w._enums});console.warn("Please DO NOT USE this component yet");this.elements.container=new UWA.Element("div",{"class":"wux-spectreeshell"});this.elements.header=new UWA.Element("div",{"class":"wux-spectreeshell-header",styles:{zIndex:1000000}}).inject(this.getContent());setTimeout(function(){w._buildHeader()},1000);this.elements.combo=new j({elementsList:[],selectedIndex:0,enableSearchFlag:false,actionOnClickFlag:true});this.elements.combo.addEventListener("change",function(x){w.elements.topDockingElement.freeZoneContent=x.dsModel.currentValue()});this.elements.searchField=new d();this.elements.searchField.addEventListener("change",function(){w._search()});this.elements.topDockingElement=new k({side:WUXDockAreaEnum.TopDockArea,collapsibleFlag:false,collapseDockingZoneFlag:true,visibleDockingZoneFlag:false});var v=new UWA.Element("div",{styles:{position:"absolute",top:40,bottom:0,left:0,right:0}});this.elements.topDockingElement.inject(v);v.inject(this.elements.container);this.elements.topDockingElement.visibleDockingZoneFlag=true;this.elements.topDockingElement.visibleDockingZoneFlag=false;if(window.jasmine!==undefined&&!window.WEBUX_DO_NOT_TEST_SPECTREEVIEW){setInterval(function(){if(w.getContent().getParent()){w.elements.container.setContent(new UWA.Element("div",{html:"DO NOT TEST THE VIEW PLEASE",styles:{background:"red",color:"white",height:"100%",width:"100%"}}))}},1)}},_buildHeader:function(){this.elements.toolbar=new t({overflowManagement:"dropdown",direction:"horizontal"}).inject(this.elements.header);this.elements.toolbar.adaptSizeToParent=true;this.elements.toolbar.add("element",{element:this.elements.combo.getContent(),position:"near"});this.elements.toolbar.add("element",{element:this.elements.searchField.getContent(),position:"far"})},_getCurrentViewOptions:function(){return this.representations[this.elements.combo.selectedIndex]},_applyProperties:function(v){this._applyRepresentations();this._parent(v)},_applyRepresentations:function(){var v=this;this.elements.combo.elementsList=this.representations.map(function(w){return{labelItem:w.label,valueItem:w.mainView,iconItem:w.icon}})},_search:b.debounce(function(v){var w=this;var x=this.elements.searchField.value;switch(this.elements.searchField.mode){case"find":w._getCurrentViewOptions().onFind({value:x,specTreeShell:this});break;case"search":w._getCurrentViewOptions().onSearch({value:x,specTreeShell:this});break;case"filter":w._getCurrentViewOptions().onFilter({value:x,specTreeShell:this});break;default:}},500),openDrawer:function(v){var w=this;w.elements.topDockingElement.dockingZoneSize=v.height;w.elements.topDockingElement.visibleDockingZoneFlag=true;w.elements.topDockingElement.dockingZoneContent=v.content},closeDrawer:function(){var v=this;v.elements.topDockingElement.visibleDockingZoneFlag=false}});return m});