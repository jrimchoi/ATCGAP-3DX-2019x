define("DS/VCXKeyFramer/VCXObjectAnimation",["UWA/Class"],function(a){var b=a.extend({init:function(){this._Tracks={};this._AnimatedTracks=null;this._scenario=null},unInitialize:function(){this._scenario=null;this._AnimatedTracks=null;for(var c in this._Tracks){if(this._Tracks.hasOwnProperty(c)){this._Tracks[c].unInitialize()}}},SetScenario:function(c){this._scenario=c},GetScenario:function(){return this._scenario},SetBoostDirty:function(){this._AnimatedTracks=null;if(this._scenario){this._scenario.SetBoostDirty()}},GetListTrackNames:function(e){for(var c in this._Tracks){if(this._Tracks.hasOwnProperty(c)){var d=c;e.push(d)}}},AddTrack:function(d,c){if(c){this.SetBoostDirty();this._Tracks[d]=c;c.SetObjectAnimation(this)}},GetTrack:function(c){var d=c in this._Tracks;if(d){return this._Tracks[c]}else{return null}},GetMaxFrame:function(){var e=0;for(var d in this._Tracks){if(this._Tracks.hasOwnProperty(d)){var c=this._Tracks[d];var f=c.GetMaxFrame();if(f>e){e=f}}}return e},RemoveTrack:function(c){this.SetBoostDirty();var d=this._Tracks[c];if(d){d.SetObjectAnimation(null)}delete this._Tracks[c]},GetTrackNumber:function(){var d=0;for(var c in this._Tracks){if(this._Tracks.hasOwnProperty(c)){d++}}return d},RemoveConstantTracks:function(){this.SetBoostDirty();var d=[];for(var f in this._Tracks){if(this._Tracks.hasOwnProperty(f)){console.log("     "+f);var c=this._Tracks[f];if(c.IsConstant()){d.push(f)}}}for(var e=0;e<d.length;e++){this.RemoveTrack(d[e]);console.log("  RemoveTrack("+d[e]+")")}},Clone:function(){var c=new b();var g=[];this.GetListTrackNames(g);for(var f=0;f<g.length;f++){var e=g[f];var d=this.GetTrack(e);if(d){var h=d.Clone();c.AddTrack(e,h)}}return c}});return b});define("DS/VCXKeyFramer/VCXKeyFramer",["UWA/Class","DS/VCXWebTracks/VCXInterpolatorConstant","DS/VCXWebTracks/VCXInterpolatorLinear","DS/VCXWebTracks/VCXInterpolatorCubic","DS/VCXWebTracks/VCXInterpolatorCylindrical","DS/VCXWebProperties/VCXPropertyMap","DS/VCXWebProperties/VCXProperty","DS/VCXWebProperties/VCXPropertyInfo","DS/VCXWebProperties/VCXPropertySet","DS/VCXWebProperties/VCXPropertyMapNeutrals"],function(a,g,b,c,i,h,j,f,e,k){var d=a.extend({init:function(l){this._modifiableServer=l;this._restoreSet={};this._Neutrals=new k(this._restoreSet);this._DefaultInterpolators={};this._Interpolators=[new g(),new b(),new c(),new i()]},unInitialize:function(){this._modifiableServer.unInitialize();this._modifiableServer=null;this._restoreSet={};this._Neutrals=null;this._DefaultInterpolators={};this._Interpolators=[]},SetDefaultInterpolator:function(l,m){this._DefaultInterpolators[l]=m},GetDefaultInterpolator:function(m){var l=this._DefaultInterpolators[m];if(typeof l==="undefined"){return this._Interpolators[1]}else{if(l>2){return this._Interpolators[0]}else{return this._Interpolators[l]}}},AddNeutrals:function(n,l){this._modifiableServer.AddModifiable(n);var m=n.GetHashing();this._Neutrals.AddOrModifyPropertySet(m,l)},RemoveNeutrals:function(l){this._Neutrals.RemovePropertySet(l)},GetNeutrals:function(l){return this._Neutrals.GetPropertySet(l)},RestoreNeutralPropertiesOneModifiable:function(p,v){var r=this._restoreSet[p];if(r){}else{return}var s=this._modifiableServer.GetModifiableFromHashing(p);if(s.IsLiving()===false){return}var w=this._Neutrals.GetPropertySet(p);if(w){for(var q in r){if(r.hasOwnProperty(q)){var u=null;if(v){var n=v.GetTrack(q);if(n){u=n.GetKey(0)}}if(u){}else{var l=w.GetProperty(q);if(l){var m=l.GetPropertyValue();s.OnChangeProperty(q,m)}else{}}}}if(s.GetVirtualProperties){var o=s.GetVirtualProperties();for(var q in o){if(o.hasOwnProperty(q)){var t=s.GetInterpolator(q);if(typeof t==="undefined"||t===null){t=this.GetDefaultInterpolator(q)}var y=t.GetInterpolatedValue(w,q,0,null);if(y){var x={};s.OnChangeProperty(q,y,x)}}}}s.OnChangePropertiesEnd();this.EmptyRestoreSetOneModifiable(s)}else{console.log("Properties has been changed but neutrals not found!")}},AddPropertyToRestoreSet:function(m,l){if(this._restoreSet[m]){}else{this._restoreSet[m]={}}this._restoreSet[m][l]=true},EmptyRestoreSetOneModifiable:function(n){var m=n.GetHashing();if(this._restoreSet.hasOwnProperty(m)){var l=n.GetRequiredPropertiesForTransition();if(l){}else{delete this._restoreSet[m]}}},InitRestoreSetFromNeutrals:function(m){var q=[];if(m){q.push(m)}else{this._Neutrals.GetListModifiables(q)}for(var n=0;n<q.length;n++){var o=q[n];var l=this._Neutrals.GetPropertySet(o);if(l){for(var p in l._map){if(l._map.hasOwnProperty(p)){this.AddPropertyToRestoreSet(o,p)}}}}},InitRestoreSetforPlay:function(m){for(var q in m._animations){if(m._animations.hasOwnProperty(q)){var n=m._animations[q];if(n){var l=[];n.GetListTrackNames(l);for(var p=0;p<l.length;p++){var o=l[p];this.AddPropertyToRestoreSet(q,o)}}}}},RestoreNeutralProperties:function(l){var p=[];this._Neutrals.GetListModifiables(p);for(var n=0;n<p.length;n++){var m=p[n];var o;if(l){o=l.GetObjectAnimation(m)}this.RestoreNeutralPropertiesOneModifiable(m,o)}},UpdatePropertiesOneModifiable:function(r,p,o,v,l){var u=0;var s=this._modifiableServer.GetModifiableFromHashing(o);if(s){if(r._AnimatedModifiables===null){if(s.IsLiving()===false){return 0}}}else{return u}var x=this._Neutrals.GetPropertySet(o);var w=r._animations[o];if(w){var m={};if(l){m[l]=true}else{m=r.GetAnimatedTracksForBlockRange(w,v);if(s.GetVirtualProperties){var n=s.GetVirtualProperties();for(var q in n){if(n.hasOwnProperty(q)){m[q]=true}}}}for(var q in m){var t=s.GetInterpolator(q);if(typeof t==="undefined"||t===null){t=this.GetDefaultInterpolator(q)}if(q==="Actor.Pulse.Type"){t.SetRangeChanged(false)}var z=t.GetInterpolatedValue(x,q,p,w._Tracks);if(z){var y={};if(t.GetRangeChanged){y.rangeChanged=t.GetRangeChanged()}s.OnChangeProperty(q,z,y);u++}}if(u>0){s.OnChangePropertiesEnd()}}return u},UpdateProperties:function(r,o,t,l){var p=r.GetBlockRangeToJumpToFrame(o);if(t){this.UpdatePropertiesOneModifiable(r,o,t,p,l);return}var s=0;var m=r.GetAnimatedModifiablesForRange(p);for(var n in m){if(m.hasOwnProperty(n)){var q=this._modifiableServer.GetModifiableFromHashing(n);if(q){s+=this.UpdatePropertiesOneModifiable(r,o,n,p,l)}}}},UpdateProperty:function(o,m,r,n){var p=this._modifiableServer.GetModifiableFromHashing(r);if(p){}else{return}var t=this._Neutrals.GetPropertySet(r);var s=o._animations[r];if(s){var l=s.GetTrack(n);if(l){var q=p.GetInterpolator(n);if(typeof q==="undefined"||q===null){q=this.GetDefaultInterpolator(n)}var u=q.GetInterpolatedValue(t,n,m,s._Tracks);if(u){p.OnChangeProperty(n,u)}}p.OnChangePropertiesEnd()}},GetPropertiesAtTimeZero:function(s){var r=new g();var w=new h();var m=this._modifiableServer.GetHashTable();for(var o in m){if(m.hasOwnProperty(o)){var p=o;var x=null;if(s.GetApplyNeutralAtGoToScenario()){x=this._Neutrals.GetPropertySet(p);if(x){var u=new e();for(var l in x._map){if(x._map.hasOwnProperty(l)){u.AddOrModifyProperty(x._map[l])}}w.AddOrModifyPropertySet(p,u)}}var v=s.GetObjectAnimation(p);if(v){for(var q in v._Tracks){if(v._Tracks.hasOwnProperty(q)){var n=v.GetTrack(q);var y=r.GetInterpolatedValue(x,q,0,v._Tracks);if(y){var t=new j(new f(q,0),y);w.AddOrModifyProperty(p,t)}}}}}}return w}});return d});define("DS/VCXKeyFramer/VCXScenarioVisibility",["UWA/Class","DS/VCXWebVisibility/VCXIVisibility"],function(b,a){var c=b.extend({init:function(){this._visibilityMap={};this._visibilityMapCollab={};this._mode=0},GetMode:function(){return this._mode},SetMode:function(d){this._mode=d},Empty:function(){this._visibilityMap={};this._visibilityMapCollab={}},GetVisibles:function(){var e=[];for(var d in this._visibilityMap){if(this._visibilityMap.hasOwnProperty(d)){if(this._visibilityMap[d]===a.EVisState.Visible){e.push(d)}}}return e},GetInvisibles:function(){var e=[];for(var d in this._visibilityMap){if(this._visibilityMap.hasOwnProperty(d)){if(this._visibilityMap[d]===a.EVisState.Hidden){e.push(d)}}}return e},GetVisibleCollabs:function(){var e=[];for(var d in this._visibilityMapCollab){if(this._visibilityMapCollab.hasOwnProperty(d)){if(this._visibilityMapCollab[d]===a.EVisState.Visible){e.push(d)}}}return e},AddVisibles:function(e){for(var d=0;d<e.length;d++){this._visibilityMap[e[d]]=a.EVisState.Visible}},AddInvisibles:function(e){for(var d=0;d<e.length;d++){this._visibilityMap[e[d]]=a.EVisState.Hidden}},AddVisibleCollabs:function(e){for(var d=0;d<e.length;d++){this._visibilityMapCollab[e[d]]=a.EVisState.Visible}},AddVisibleToGroups:function(g){if(g){if(!(g.IsGeometry&&g.IsGeometry())){this._visibilityMap[g.GetID()]=a.EVisState.Visible}var f=g.QueryInterface("VCXIModelNavigable").getChildren();for(var e=0;e<f.length;e++){var d=f[e];if(d){this.AddVisibleToGroups(d.GetObject())}}}},AddVisibleToDescendants:function(g){if(g){this._visibilityMap[g.GetID()]=a.EVisState.Visible;var f=g.QueryInterface("VCXIModelNavigable").getChildren();for(var e=0;e<f.length;e++){var d=f[e];if(d){this.AddVisibleToDescendants(d.GetObject())}}}},AddVisible:function(d){if(d){this._visibilityMap[d.GetID()]=a.EVisState.Visible}},RemoveVisible:function(d){if(d){delete this._visibilityMap[d.GetID()]}},AddInvisibleToDescendants:function(f){if(f){this._visibilityMap[f.GetID()]=a.EVisState.Hidden;var g=f.QueryInterface("VCXIModelNavigable").getChildren();for(var e=0;e<g.length;e++){var d=g[e];if(d){this.AddInvisibleToDescendants(d.GetObject())}}}},AddInvisible:function(d){if(d){this._visibilityMap[d.GetID()]=a.EVisState.Hidden}},RemoveInvisible:function(d){if(d){delete this._visibilityMap[d.GetID()]}},AddVisibleCollab:function(d){this._visibilityMapCollab[d.GetID()]=a.EVisState.Visible},RemoveVisibleCollab:function(d){delete this._visibilityMapCollab[d.GetID()]},FindVisibleCollab:function(d){if(this._visibilityMapCollab[d]===a.EVisState.Visible){return 1}else{return -1}},IsVisibleWithParents:function(e){var g=e.GetID();var d=-1;if(e.IsKindOf("VCXWebComponentOccurrence")&&!e.IsDressup){var f=this._visibilityMap[g];if(f===a.EVisState.Hidden){d=0}else{if(f===a.EVisState.Visible){d=1}}if(d===-1){if(this._mode===2){d=1}else{if(this._mode===1){d=0}else{if(this._mode===0){d=-1}}}}}else{if(this._visibilityMapCollab[g]===a.EVisState.Visible){return d=1}}return d},Clone:function(e){var d=new c();d.SetMode(e.GetMode());d.AddVisibles(e.GetVisibles());d.AddInvisibles(e.GetInvisibles());d.AddVisibleCollabs(e.GetVisibleCollabs());return d}});return c});define("DS/VCXKeyFramer/VCXScenario",["UWA/Class","DS/VCXWebTracks/VCXKey","DS/VCXKeyFramer/VCXScenarioVisibility","DS/VCXKeyFramer/VCXObjectAnimation","DS/VCXWebTracks/VCXTrack","DS/WebRBTree/WebRBIterator","DS/CoreEvents/Events"],function(e,h,f,g,b,d,a){var c=e.extend({init:function(){this._IsEMSDirty=true;this._animations={};this._visibility=new f();this._bApplyNeutralAtGoToScenario=true;this._bIsTransition=false;this._bZoomFitAll=false;this._maxFrameOverride=null;this._maxFrameCache=null;this._CurrentFrame=0;this._sequenceMaxFrame=null;this._markersTrack=new b();this._currentMarkerSequence="";this._AnimatedModifiables=null;this._AnimatedModifiablesMaxFrame=0;this._AnimatedModifiablesNbBlocks=200;this._LastBlock=0;this._bIsBounce=false;this._bIsLoop=false;this._bIsReverse=false;this._bIsBouncing=false;this._speed=1;this._scenarioType=c.EScenarioType.Scenario;this._docId=-1},IsEMSDirty:function(){return this._IsEMSDirty},SetEMSDirty:function(i){this._IsEMSDirty=i},unInitialize:function(){this._AnimatedModifiables=null;this._visibility=null;for(var i in this._animations){if(this._animations.hasOwnProperty(i)){var j=this._animations[i];j.unInitialize()}}this._animations={};this._markersMap={}},SetBoostDirty:function(){this.SetEMSDirty(true);this._maxFrameCache=null;this._AnimatedModifiables=null;this._LastBlock=0},SetDocId:function(i){this._docId=i},GetDocId:function(){return this._docId},SetCurrentFrame:function(i){this._CurrentFrame=i;a.publish({event:"VCX_UPDATE_MARKER_SEQ",data:{time:i,scenarioID:this.GetID()}})},GetCurrentFrame:function(){return this._CurrentFrame},SetIsTransition:function(i){this._bIsTransition=i},GetIsTransition:function(){return this._bIsTransition},SetIsBounce:function(i){this._bIsBounce=i},GetIsBounce:function(){return this._bIsBounce},SetIsLoop:function(i){this._bIsLoop=i},GetIsLoop:function(){return this._bIsLoop},SetIsReverse:function(i){this._bIsReverse=i},GetIsReverse:function(){return this._bIsReverse},SetIsBouncing:function(i){this._bIsBouncing=i},GetIsBouncing:function(){return this._bIsBouncing},SetSpeed:function(i){this._speed=i},GetSpeed:function(){return this._speed},GetType:function(){return this.componentType},GetVisibility:function(){return this._visibility},SetVisibility:function(i){this._visibility=i},SetZoomFitAll:function(i){this._bZoomFitAll=i},GetZoomFitAll:function(){return this._bZoomFitAll},SetApplyNeutralAtGoToScenario:function(i){this._bApplyNeutralAtGoToScenario=i},GetApplyNeutralAtGoToScenario:function(){return this._bApplyNeutralAtGoToScenario},AddObjectAnimation:function(i,j){if(i){this._animations[i]=j;this.SetBoostDirty();if(j){j.SetScenario(this)}}else{console.log("HASHING EMPTY in VCXScenario::AddObjectAnimation")}},RemoveObjectAnimation:function(i){this.SetBoostDirty();var j=this._animations[i];if(j){j.SetScenario(null)}delete this._animations[i]},GetObjectAnimation:function(i){var j=i in this._animations;if(j){return this._animations[i]}else{return null}},GetListModifiables:function(k){for(var i in this._animations){if(this._animations.hasOwnProperty(i)){var j=i;k.push(j)}}},HasAnimation:function(){for(var m in this._animations){if(this._animations.hasOwnProperty(m)){var n=m;var r=this.GetObjectAnimation(n);var q=[];r.GetListTrackNames(q);for(var o=0;o<q.length;o++){var p=q[o];var k=r.GetTrack(p);var t=0;if(typeof k!=="undefined"){t=k._treekeys.size;if(t===1){var s=new h();s.SetFrame(0);var j=k._treekeys.lowerBound(s);var l=j.data();if(l===null){return true}}else{if(t>1){return true}}}}}}return false},SetMaxFrame:function(i){this._maxFrameOverride=i},GetMaxFrame:function(){if(this._maxFrameOverride!==null){return this._maxFrameOverride}if(this._maxFrameCache){return this._maxFrameCache}var l=0;for(var j in this._animations){if(this._animations.hasOwnProperty(j)){var i=j;var k=this.GetObjectAnimation(i);var m=k.GetMaxFrame();if(m>l){l=m}}}this._maxFrameCache=l;return l},RemoveConstantTracks:function(){this.SetBoostDirty();var m=[];for(var l in this._animations){if(this._animations.hasOwnProperty(l)){console.log("scanning "+l);var k=this._animations[l];k.RemoveConstantTracks();if(k.GetTrackNumber()===0){m.push(l)}}}for(var j=0;j<m.length;j++){this.RemoveObjectAnimation(m[j])}},SetPropertyMapAtFrame:function(p,l){this.SetBoostDirty();for(var m in p._map){if(p._map.hasOwnProperty(m)){var n=p.GetPropertySet(m);for(var o in n._map){if(n._map.hasOwnProperty(o)){var i=n.GetProperty(o);var r=i.GetPropertyInfo().GetBehaviorType();if((r===2)||(r===1&&l!==0)){continue}var j=i.GetPropertyValue();var s=this.GetObjectAnimation(m);if(s){}else{s=new g();this.AddObjectAnimation(m,s)}var k=s.GetTrack(o);if(k){}else{k=new b();s.AddTrack(o,k)}var q=new h();q.SetFrame(l);q.SetValue(j);k.AddKey(q)}}}}},EmptyObjectAnimation:function(){this.SetBoostDirty();var l=[];this.GetListModifiables(l);for(var j=0;j<l.length;j++){var k=l[j];this.RemoveObjectAnimation(k)}},Clone:function(m){if(m){}else{m=this._experienceBase.Factory.BuildComponent("VCXScenario")}var o=[];this.GetListModifiables(o);for(var p=0;p<o.length;p++){var v=o[p];var s=this.GetObjectAnimation(v);var q=s.Clone();m.AddObjectAnimation(v,q)}var k=this.GetVisibility();var t=k.Clone(k);m.SetVisibility(t);var u=this.QueryInterface("VCXIModifiable");var r;if(u){r=u.GetProperties()}var n=m.QueryInterface("VCXIModifiable");if(n){if(r){for(var j in r._map){if(r._map.hasOwnProperty(j)){var l=r.GetProperty(j);n.OnChangeProperty(j,l.GetPropertyValue().Clone())}}}}return m},CloneObjAnim:function(n){if(n){}else{return}this.EmptyObjectAnimation();var o=[];n.GetListModifiables(o);for(var l=0;l<o.length;l++){var m=o[l];var k=n.GetObjectAnimation(m);var j=k.Clone();this.AddObjectAnimation(m,j)}},ResetRangeCache:function(){for(var l in this._animations){if(this._animations.hasOwnProperty(l)){var k=l;var p=this.GetObjectAnimation(k);var o=[];p.GetListTrackNames(o);for(var n=0;n<o.length;n++){var m=o[n];var j=p.GetTrack(m);j.ResetRangeCache()}}}},SetSequenceMaxFrame:function(i){this._sequenceMaxFrame=i},GetSequenceMaxFrame:function(){return this._sequenceMaxFrame},SetScenarioType:function(i){this._scenarioType=i},GetScenarioType:function(){return this._scenarioType},SetName:function(i){if(this._name!==i){this._name=i;a.publish({event:"VCX_SCENARIO_NAME_CHANGED",data:this})}},GetName:function(){return this._name},SortMarkers:function(){var j=[];var i=Object.keys(this._markersMap);i.sort(function(l,k){return l-k});i.forEach(function(k){j.push(k)});return j},AddMarker:function(k,i){var j=new h();j.SetFrame(k);j.SetValue(i.GetID());this._markersTrack.AddKey(j)},RemoveMarker:function(i){this._markersTrack.RemoveKey(i)},GetTrackMarkers:function(){return this._markersTrack},GetCurrentMarkerSequence:function(){return this._currentMarkerSequence},SetCurrentMarkerSequence:function(i){this._currentMarkerSequence=i},GetAnimatedTracksForBlockRange:function(m,l){var k={};var o=m._AnimatedTracks;if(o&&l){for(var i=l.start;i<=l.end;i++){var j=o[i];for(var n in j){if(j.hasOwnProperty(n)){k[n]=true}}}}else{for(var n in m._Tracks){if(m._Tracks.hasOwnProperty(n)){k[n]=true}}}return k},GetBlockRangeToJumpToFrame:function(j){var l;if(this._AnimatedModifiables){l={};l.start=this._LastBlock;var i=Math.floor((j*this._AnimatedModifiablesNbBlocks)/this._AnimatedModifiablesMaxFrame);if(i>=this._AnimatedModifiablesNbBlocks){i=this._AnimatedModifiablesNbBlocks-1}l.end=i;this._LastBlock=i;if(l.start>l.end){var k=l.start;l.start=l.end;l.end=k}}return l},GetAnimatedModifiablesForRange:function(l){var m={};if(this._AnimatedModifiables&&l){for(var i=l.start;i<=l.end;i++){var j=this._AnimatedModifiables[i];for(var k in j){if(j.hasOwnProperty(k)){m[k]=true}}}}else{for(var k in this._animations){if(this._animations.hasOwnProperty(k)){m[k]=true}}}return m},BuildAnimatedModifiablesSets:function(x){this._AnimatedModifiablesMaxFrame=this.GetMaxFrame();var l=30;var m=2;this._AnimatedModifiablesNbBlocks=Math.floor((this._AnimatedModifiablesMaxFrame/l)*m)+1;if(this._AnimatedModifiablesNbBlocks>200){this._AnimatedModifiablesNbBlocks=200}this._AnimatedModifiables=[];for(var n in this._animations){if(this._animations.hasOwnProperty(n)){var E=n;var q=this.GetObjectAnimation(E);q._AnimatedTracks=[];var o=x._modifiableServer.GetModifiableFromHashing(E);if(o.IsLiving()===false){continue}var p=[];q.GetListTrackNames(p);for(var G=0;G<p.length;G++){var N=p[G];var C=q.GetTrack(N);var y=C._treekeys;var F=new d(y);var Q=F.next();var K=true;var M=null;if(Q!==null){var B=o.GetInterpolator(N);if(typeof B==="undefined"||B===null){B=x.GetDefaultInterpolator(N)}if(B){M=B.GetType();if(M!=="VCXInterpolatorLinear"&&M!=="VCXInterpolatorConstant"){M=null}else{var A=Q.GetValue().GetType();if(A==="VCXPropertyValueEnum"||A==="VCXPropertyValueHyperlinkId"||A==="VCXPropertyValueBoolean"||A==="VCXPropertyValueString"||A==="VCXPropertyValueDocId"||A==="VCXPropertyValueBase64"||A==="VCXPropertyValueLink"||A==="VCXPropertyValuePath"){M="VCXInterpolatorConstant"}if(N==="Actor.Pulse.Type"){K=false}}}}if(M===null){for(var u=0;u<this._AnimatedModifiablesNbBlocks;u++){var r=this._AnimatedModifiables[u];if(r){}else{r=this._AnimatedModifiables[u]={}}r[E]=true;var I=q._AnimatedTracks[u];if(I){}else{I=q._AnimatedTracks[u]={}}I[N]=true}continue}var P=null;while(Q!==null){var t=Q.GetValue();var w=Q.GetFrame();var J=0;var D=null;if(w!==0){if(P){J=P.GetFrame();D=P.GetValue()}else{var s=x.GetNeutrals(E);if(s){var j=s.GetProperty(N);if(j){D=j.GetPropertyValue()}}}}if(K&&D!==null&&D.IsEqualTo(Q.GetValue())){}else{var H=Math.floor((J*this._AnimatedModifiablesNbBlocks)/this._AnimatedModifiablesMaxFrame);var k=Math.floor((Q.GetFrame()*this._AnimatedModifiablesNbBlocks)/this._AnimatedModifiablesMaxFrame)+1;if(k>this._AnimatedModifiablesNbBlocks){k=this._AnimatedModifiablesNbBlocks}if(M==="VCXInterpolatorConstant"){H=k-1}for(var u=H;u<k;u++){var r=this._AnimatedModifiables[u];if(r){}else{r=this._AnimatedModifiables[u]={}}r[E]=true;var I=q._AnimatedTracks[u];if(I){}else{I=q._AnimatedTracks[u]={}}I[N]=true}}P=Q;Q=F.next()}}}}for(var u=0;u<this._AnimatedModifiablesNbBlocks;u++){var r=this._AnimatedModifiables[u];var z=0;if(r){z=Object.keys(r).length}var O={};for(var E in r){if(r.hasOwnProperty(E)){var q=this.GetObjectAnimation(E);var L=q._AnimatedTracks[u];for(var v in L){if(L.hasOwnProperty(v)){if(O[v]){O[v]++}else{O[v]=1}}}}}for(var v in O){if(O.hasOwnProperty(v)){}}}}});c.EScenarioType={Scenario:0,Layer:1,CADView:2,CADCapture:3};Object.defineProperty(c.prototype,"componentType",{enumerable:true,get:function(){return"VCXScenario"}});return c});