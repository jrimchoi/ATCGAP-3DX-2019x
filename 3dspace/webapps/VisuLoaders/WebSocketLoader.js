define("DS/VisuLoaders/WebSocketLoader",[],function(){var a=window.mySocket;var b=function(g,e,f,d){this.msg=g;this.msgData=e;this.answer=f;this.onCompletedCB=d};b.emit=function(){};var c=function(){this.pendingRequests=[];this.pending=0;this.maxPending=5};c.prototype.isEnabled=function(){return a?true:false};c.prototype.emit=function(h,e,g,d){if(this.pending<this.maxPending){this._emit(h,e,g,d)}else{var f=new b(h,e,g,d);this.pendingRequests.push(f)}};c.prototype._emitNext=function(){if(this.pending<this.maxPending&&this.pendingRequests.length>0){var d=this.pendingRequests.shift();this._emit(d.msg,d.msgData,d.answer,d.onCompletedCB)}};c.prototype._emit=function(g,e,f,d){this.pending++;a.emit(g,e);var h=this;a.on(f,function(i){d(i);h.pending--;h._emitNext()})};return new c()});