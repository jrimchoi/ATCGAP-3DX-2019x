define("DS/VisuLoaders/SceneGraphConverter",["UWA/Class","DS/Visualization/ThreeJS_DS","DS/Visualization/SceneGraph","DS/Visualization/Node3D","DS/Visualization/Mesh3D","DS/Visualization/GeometryHelper","DS/Visualization/SceneGraphFactory"],function(c,f,h,g,b,a,d){var e=c.extend({init:function(j,i){this.glContext=j;this.v6SceneGraph=new g();this.v6SceneGraph.name="convertedSceneGraph";this.nodes=[this.v6SceneGraph];this.convert(i)},getRootNode:function(){return this.v6SceneGraph},traverse:function(m,n){n.call(this,m,this.nodes);var k,j;for(k=0,j=m.children.length;k<j;k++){this.traverse(m.children[k],n)}if(m instanceof f.Object3D&&!(m instanceof f.Mesh)){this.nodes.pop()}},convert:function(i){this.traverse(i,function(o,l){var n,m,k,j;if(o instanceof f.Mesh){n=new a();m=n.convertFromTHREEMesh(o);k=d.createMeshNode(m,undefined,undefined,"mono");k.setMatrix(o.matrix);l[l.length-1].addChild(k)}else{if(o instanceof f.Object3D){k=new g(o.name);k.setMatrix(o.matrix);if(o.children.length){l[l.length-1].addChild(k)}l.push(k)}else{console.log("SceneGraph converter : unsupported node "+o)}}})}});return e});