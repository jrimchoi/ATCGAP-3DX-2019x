define("DS/PARParameterComponent/PARAlert",["DS/UIKIT/Alert"],function(a){var b={alert:null,message:function(d,c){if(!this.alert){this.alert=new a({closable:true,visible:true,autoHide:true,hideDelay:6000,maximumVisibleMessages:1,className:"wp-alert"}).inject(document.body,"top");this.alert.add({className:c,message:UWA.is(d,"string")?d.escapeHTML():d})}this.alert.add({className:c,message:UWA.is(d,"string")?d.escapeHTML():d})},error:function(c){this.message(c,"error")},success:function(c){this.message(c,"success")},warn:function(c){this.message(c,"warning")},info:function(c){this.message(c,"primary")}};return b});define("DS/PARParameterComponent/PARModel",["UWA/Core","UWA/Class/Model","UWA/Class/Options","UWA/Class/Collection","DS/WAFData/WAFData"],function(f,e,b,d,a){var c=e.extend(b,{init:function(g){this.setOptions(g);this._parent()},initVars:function(){var g=this;if(this.options.tenant==="OnPremise"||this.options.tenant===undefined||this.options.tenant===""){this.set("3DSpaceUrl",this.options.url);if(this.get("3DSpaceUrl")===""||this.get("3DSpaceUrl")===undefined){require(["DS/i3DXCompassServices/i3DXCompassServices"],function(h){h.getServiceUrl({serviceName:"3DSpace",onComplete:function(i){g.set("3DSpaceUrl",i.url);g.finalizeInit()}.bind(this)})})}else{this.finalizeInit()}}else{require(["DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices"],function(h){h.getPlatformServices({onComplete:function(n){var m=n;if(f.is(m)){var k=0,j=0,l=m.length,i=true;for(;k<l&&i;k++){if(m[k].platformId===g.options.tenant){j=k;i=false}}g.set("3DSpaceUrl",m[j]["3DSpace"]);g.finalizeInit()}}.bind(this)})})}},setup:function(){this.initVars()},finalizeInit:function(){var g=this;a.authenticatedRequest(this.get("3DSpaceUrl")+"/resources/pno/person/getsecuritycontext",{method:"GET",type:"json",onComplete:function(i){g.set("SecurityContext",i.SecurityContext)},onFailure:function(){g.set("SecurityContext","VPLMProjectLeader.MyCompany.3DS Collab Space")},});var h={"Content-Type":"application/json",SecurityContext:g.get("SecurityContext")};if(this.get("parentid")===undefined||this.get("parentid")===""){this.set("parentid",this.options.parentid)}if(this.get("objectid")===undefined||this.get("objectid")===""){this.set("objectid",this.options.objectid)}if(this.get("objectid")!==undefined&&this.get("objectid")!==""){a.authenticatedRequest(this.get("3DSpaceUrl")+"/resources/parameter/authoring/"+this.get("objectid"),{method:"GET",type:"json",headers:{"Content-Type":"application/json"},onComplete:function(k){var j=true,i=f.clone(g.get("preferreddimensions"));g.get("preferreddimensions").forEach(function(l){if(k.dimension===l.value){j=false}});if(j){i.push({value:k.dimension,nls:k.dimensionnls})}g.set("preferreddimensions",i);g.set("valuationtype",k.valuationtype);g.set("title",k.title);g.set("dimension",k.dimension);g.set("parentid",k.attributes.parentid);g.set("unit",k.attributes.unit);g.set("autoname",k.attributes.name);g.set("name",k.attributes.name);g.set("description",k.attributes.description);g.set("owner",k.attributes.owner);g.set("revision",k.attributes.revision);g.set("value",k.values.value);g.set("minvalue",k.values.minvalue);g.set("mininclus",k.values.mininclus);g.set("maxvalue",k.values.maxvalue);g.set("maxinclus",k.values.maxinclus);g.set("values",k.values.valuesvalue);g.set("mintolerance",k.values.mintolerance);g.set("maxtolerance",k.values.maxtolerance);g.set("minprecision",k.values.minprecision);g.set("maxprecision",k.values.maxprecision);g.set("function",k.values["function"]);g.set("objectiftype",k.values.objectiftype);g.set("objectifprobability",k.values.objectifprobability);g.set("objectifprobabilityunit",k.values.objectifprobabilityunit);g.set("objectifconfidence",k.values.objectifconfidence);g.set("objectifconfidencetunit",k.values.objectifconfidencetunit)},onFailure:function(i){console.log(i)},})}a.authenticatedRequest(this.get("3DSpaceUrl")+"/resources/parameter/authoring/getdimensions",{method:"GET",type:"json",onComplete:function(i){g.set("alldimensions",i)},onFailure:function(){g.set("alldimensions",[])},});a.authenticatedRequest(this.get("3DSpaceUrl")+"/resources/parameter/authoring/getpreferreddimensions",{method:"POST",type:"json",data:"ANGLEParameter;BooleanParameter;IntegerParameter;LENGTHParameter;MASSParameter;RealParameter;StringParameter;",headers:h,onComplete:function(i){g.set("preferreddimensions",i);g.set("preferreddimensionsbase",i)}});a.authenticatedRequest(this.get("3DSpaceUrl")+"/resources/parameter/authoring/getpreferreddimensions",{method:"POST",type:"json",data:widget.getValue("preferreddimensionsMRU"),headers:{"Content-Type":"application/json",SecurityContext:g.get("SecurityContext")},onComplete:function(i){g.set("preferreddimensionsMRU",i)},onFailure:function(){g.set("preferreddimensionsMRU",[])}});this.set("displaytype",this.options.type)},defaults:{preferreddimensions:[{value:"ANGLEParameter",nls:"Angle"},{value:"BooleanParameter",nls:"Boolean"},{value:"IntegeParameterr",nls:"Integer"},{value:"LENGTHParameter",nls:"Length"},{value:"MASSParameter",nls:"Mass"},{value:"RealParameter",nls:"Real"},{value:"StringParameter",nls:"String"},],preferreddimensionsbase:[{value:"ANGLEParameter",nls:"Angle"},{value:"BooleanParameter",nls:"Boolean"},{value:"IntegeParameterr",nls:"Integer"},{value:"LENGTHParameter",nls:"Length"},{value:"MASSParameter",nls:"Mass"},{value:"RealParameter",nls:"Real"},{value:"StringParameter",nls:"String"},],preferreddimensionsMRU:[],alldimensions:[],unitsselecteddimension:[],valuationtype:"1",title:"",dimension:"ANGLEParameter",selecteddimension:"",parentid:"",unit:"",autoname:true,name:"",description:"",owner:"",value:"",minvalue:"",mininclus:true,maxvalue:"",maxinclus:true,values:[],mintolerance:"",maxtolerance:"",minprecision:"",maxprecision:"",revision:"A.1",role:"",priority:"0","function":"",objectiftype:"",objectifprobability:"",objectifprobabilityunit:"PERCENTAGE",objectifconfidence:"",objectifconfidencetunit:"PERCENTAGE",objectid:"",displaytype:""}});return c});define("DS/PARParameterComponent/PARForm",["DS/UIKIT/Modal","DS/WAFData/WAFData","DS/UIKIT/Popover","DS/PARParameterComponent/PARAlert","i18n!DS/PARParameterComponent/assets/nls/PARParameterComponent"],function(b,a,c,f,e){var d={getForm:function(E){this.model=E;var ax=this.PARremovevalue.bind(this),aI=this.PARaddvalue.bind(this),aE=this.PARchangeselectedvalue.bind(this),V=this.PARchangefunctionobjectif.bind(this),al=this.PARchangeautomatiquename.bind(this),az=this.PARchangedimension.bind(this),aR=this.PARcreateparam.bind(this),s=this.PARclicksetvalues.bind(this),aN=this.PARchangevaluationtype.bind(this),aq=this.PARclickdetails.bind(aq),aS=this.PARchangevalue.bind(this),aF=this.PARchangetitle.bind(this),m=this.PARchangedescription.bind(this),aB=this.PARchangeunit.bind(this),z=this.PARchangeminvalue.bind(this),aJ=this.PARchangemininclus.bind(this),t=this.PARchangemaxvalue.bind(this),F=this.PARchangemaxinclus.bind(this),W=this.PARchangename.bind(this),O=this.PARchangeowner.bind(this),C=this.PARchangerole.bind(this),q=this.PARchangepriority.bind(this),l=this.PARclickselecteddimension.bind(this),an=this.PARchangeselecteddimension.bind(this),aQ=this.getFooter.bind(this),x=this.PARremoveerrorvalue.bind(this),am=this.PARremoveerrorminvalue.bind(this),aj=this.PARremoveerrormaxvalue.bind(this),ay=this.PARchangeaddvalues.bind(this),Y=this.PARremoveerroraddvalues.bind(this),ab=this.PARchangemintolerancevalue.bind(this),aU=this.PARremoveerrormintolerancevalue.bind(this),aK=this.PARchangemaxtolerancevalue.bind(this),aa=this.PARremoveerrormaxtolerancevalue.bind(this),ad=this.PARchangeminprecisionvalue.bind(this),i=this.PARremoveerrorminprecisionvalue.bind(this),aT=this.PARchangemaxprecisionvalue.bind(this),ac=this.PARremoveerrormaxprecisionvalue.bind(this),Z=this.PARchangetypeobjectif.bind(this),aC=this.PARchangeprobabilityobjectif.bind(this),X=this.PARchangeprobabilityunitobjectif.bind(this),I=this.PARchangeconfidenceobjectif.bind(this),r=this.PARchangeconfidenceunitobjectif.bind(this),aV=this.PARshowdimensionslist.bind(this),ae=this._isValueValid.bind(this),at=this._isMinValid.bind(this),ap=this._isMaxValid.bind(this),aL=this._checkListOfValues.bind(this),y=this._isMultipleValueValid.bind(this),P=this._isMinMaxValid.bind(this),k=this._isMinIncludedValid.bind(this),B=this._isMaxIncludedValid.bind(this),aw=this._isMinMaxIncludedValid.bind(this),v=this._updateMinError.bind(this),p=this._updateMaxError.bind(this),aO=this._updateValueError.bind(this),ar=this._updateValueMinMaxError.bind(this);var u=E.get("preferreddimensions"),aG=E.get("alldimensions"),D=E.get("unitsselecteddimension"),H=E.get("values"),j=E.get("allowners"),R=[],av=[],G=[],aH=[],ao=[{tag:"option",value:"Empty",text:""}],J=[""];this.errorminvalue=null;this.errormaxvalue=null;this.errorvalue=null;this.errorvalues=null;u.forEach(function(aW){R.push({tag:"option",value:aW.value,text:aW.nls})});aG.forEach(function(aW){av.push([{tag:"div","class":"toggle",html:[{tag:"input",type:"radio",name:"radioalldimensions",id:aW.nls,value:aW.value,},{tag:"label","class":"control-label","for":aW.nls,html:aW.nls}]}])});D.forEach(function(aW){G.push({tag:"option",value:aW.value,text:aW.nls})});H.forEach(function(aW){ao.push({tag:"option",value:aW.value,text:aW.nls});J.push(aW.value)});var ai=UWA.createElement("div",{id:"divcontent","class":"row"});var M=UWA.createElement("div",{id:"divparent","class":"row",styles:{height:"600px",overflow:"auto",width:"100%",padding:"15px"}});M.inject(ai);var ag=UWA.createElement("div",{id:"divtitle","class":"col-sm-12",html:[{tag:"label",text:e.get("Title")},{tag:"input",type:"text",id:"inputtitle","class":"form-control",value:this.model.get("title"),events:{keyup:function(){aF()}}}]});ag.inject(M);var g=UWA.createElement("div",{id:"divdescription","class":"col-sm-12",html:[{tag:"label",text:e.get("Description")},{tag:"textarea",id:"inputdescription","class":"form-control",rows:"3",value:this.model.get("description"),events:{keyup:function(){m()}}}]});g.inject(M);var aM=UWA.createElement("div",{id:"divalldimensions",html:[{tag:"div",id:"divalldimension",html:av,styles:{maxHeight:"400px",overflow:"auto","float":"left",width:"95%",padding:"15px",margin:"15px"},events:{change:function(aW){an(aW)}}},{tag:"div",id:"divfooteralldimension",styles:{padding:"15px",margin:"15px"},html:[{tag:"button",type:"button",id:"btnalldimsubmit","class":"btn btn-primary",html:"Submit",events:{click:function(){l()}}},{tag:"button",type:"button",id:"btnalldimcancel","class":"btn btn-default",html:"Cancel",events:{click:function(){document.querySelector("#divalldimensions").hide();document.querySelector("#divparent").show()}}}],events:{change:function(aW){an(aW)}}}]});aM.inject(ai);aM.hide();var aA=UWA.createElement("div",{id:"divbuttonsalldimensions",html:[{tag:"button",type:"button",id:"btnalldimsubmit","class":"btn btn-primary",html:"Submit",events:{click:function(){l()}}},{tag:"button",type:"button",id:"btnalldimcancel","class":"btn btn-default",html:"Cancel",events:{click:function(){document.querySelector("#divparent").show()}}}]});var A=true;if(this.model.get("objectid")===""||this.model.get("objectid")===undefined){A=false}var U=UWA.createElement("div",{id:"divdimensionunit","class":"col-sm-12",html:[{tag:"div","class":"row",html:[{tag:"div",id:"divdimension","class":"col-sm-12",html:[{tag:"label",text:e.get("Dimension")},{tag:"div","class":"input-group",html:[{tag:"select",id:"selectdimensions","class":"form-control",html:R,events:{change:function(){az()}},value:this.model.get("dimension"),disabled:A},{tag:"span",id:"spandimensions","class":"input-group-btn",html:[{tag:"button",type:"button",id:"btndimensions","class":"btn btn-default",html:"...",events:{click:function(){aV()}},disabled:A}]}]}]}]}]});U.inject(M);var L=UWA.createElement("div",{id:"divvalueunit","class":"col-sm-12",html:[{tag:"div","class":"row",html:[{tag:"div",id:"divvalue","class":"col-sm-6",html:[{tag:"label",text:e.get("Value")},{tag:"input",type:"text","class":"form-control",id:"inputvalue",value:this.model.get("value"),events:{keyup:function(){aS()},keydown:function(){x()}}}]},{tag:"div",id:"divunit","class":"col-sm-6",html:[{tag:"label",text:e.get("DisplayUnit")},{tag:"select",id:"selectunit","class":"form-control",html:G,events:{change:function(){aB()}}}]}]}]});L.inject(M);var au=UWA.createElement("div",{id:"divminmaxvalue","class":"col-sm-12",html:[{tag:"div","class":"row",html:[{tag:"div",id:"divminvalue","class":"col-sm-3",html:[{tag:"label",text:e.get("MinValue")},{tag:"input",type:"text","class":"form-control",id:"inputminvalue",value:this.model.get("minvalue"),events:{keyup:function(){z()},keydown:function(){am()}}}]},{tag:"div","class":"col-sm-3",styles:{"padding-top":"30px"},html:[{tag:"input",type:"checkbox",id:"cbinclusminvalue",checked:this.model.get("mininclus"),events:{change:function(){aJ()}}},{tag:"label","class":"control-label","for":"cbinclusminvalue",html:e.get("Included"),}]},{tag:"div",id:"divmaxvalue","class":"col-sm-3",html:[{tag:"label",text:e.get("MaxValue")},{tag:"input",type:"text","class":"form-control",id:"inputmaxvalue",value:this.model.get("maxvalue"),events:{keyup:function(){t()},keydown:function(){aj()}}}]},{tag:"div","class":"col-sm-3",styles:{"padding-top":"30px"},html:[{tag:"input",type:"checkbox",id:"cbinclusmaxvalue",checked:this.model.get("maxinclus"),events:{change:function(){F()}}},{tag:"label","class":"control-label","for":"cbinclusmaxvalue",html:e.get("Included"),}]}]}]});au.inject(M);var N=UWA.createElement("div",{id:"divsetvalues","class":"col-sm-12"});var ak=UWA.createElement("div",{id:"divvaluationtype","class":"col-sm-12",html:[{tag:"label",text:e.get("ValuationType")},{tag:"select",id:"selectvaluationtype","class":"form-control",html:[{tag:"option",value:"1",text:e.get("SimpleValue")},{tag:"option",value:"2",text:e.get("MultipleValue")}],events:{change:function(){aN()}},value:this.model.get("valuationtype")}]});ak.inject(N);var h=this.model.get("valuationtype")==="1"?h=e.get("AuthorizedValues"):h=e.get("Values");var o=UWA.createElement("div",{id:"divvalues","class":"col-sm-12",html:[{tag:"label",text:h,id:"labelvalues"},{tag:"select","class":"form-control",multiple:true,styles:{"margin-bottom":"5px"},id:"selectvalues",html:ao,events:{change:function(){aE(J)}}},{tag:"div","class":"row",styles:{"margin-bottom":"10px"},html:[{tag:"div",id:"divvaluesinput","class":"col-sm-6",html:[{tag:"input",type:"text","class":"form-control",id:"inputvalues",events:{keyup:function(){ay()},keydown:function(){Y()}}}]},{tag:"div",id:"divvaluesbuttons","class":"col-sm-6",html:[{tag:"button",type:"button","class":"btn btn-default",html:"+",id:"btnaddvalue",events:{click:function(){aI(J)}}},{tag:"button",type:"button","class":"btn btn-default",html:"-",id:"btnremovevalue",events:{click:function(){ax(J)}}}]}]}]});o.inject(N);var Q=UWA.createElement("div",{id:"divbtnsetvalues","class":"col-sm-12",html:[{tag:"div","class":"row",styles:{"margin-top":"10px"},html:[{tag:"div",id:"divbuttons","class":"col-sm-6",html:[{tag:"button",type:"button","class":"btn btn-default",html:e.get("MoreValues"),id:"btndetails",styles:{margin:"5px"},events:{click:function(){aq(N)}}}]}]}]});Q.inject(M);var K=UWA.createElement("div",{id:"divminmaxtolerance","class":"col-sm-12",html:[{tag:"div","class":"row",html:[{tag:"div",id:"divmintolerance","class":"col-sm-6",html:[{tag:"label",text:e.get("MinTolerance")},{tag:"input",type:"text","class":"form-control",id:"inputmintolerance",events:{keyup:function(){ab()},keydown:function(){aU()}}}]},{tag:"div",id:"divmaxtolerance","class":"col-sm-6",html:[{tag:"label",text:e.get("MaxTolerance")},{tag:"input",type:"text","class":"form-control",id:"inputmaxtolerance",events:{keyup:function(){aK()},keydown:function(){aa()}}}]}]}]});K.inject(N);var n=UWA.createElement("div",{id:"divminmaxprecision","class":"col-sm-12",html:[{tag:"div","class":"row",html:[{tag:"div",id:"divminprecision","class":"col-sm-6",html:[{tag:"label",text:e.get("MinPrecision")},{tag:"input",type:"text","class":"form-control",id:"inputminprecision",events:{keyup:function(){ad()},keydown:function(){i()}}}]},{tag:"div",id:"divmaxprecision","class":"col-sm-6",html:[{tag:"label",text:e.get("MaxPrecision")},{tag:"input",type:"text","class":"form-control",id:"inputmaxprecision",events:{keyup:function(){aT()},keydown:function(){ac()}}}]}]}]});n.inject(N);N.inject(M);N.hide();var T=UWA.createElement("div",{id:"divdetails","class":"col-sm-12"});var aP;if(this.model.get("objectid")===""||this.model.get("objectid")===undefined){aP=UWA.createElement("div",{id:"divname","class":"col-sm-12",styles:{display:"none"},html:[{tag:"label",text:e.get("Name")},{tag:"div","class":"row",html:[{tag:"div","class":"col-sm-6",html:[{tag:"input",id:"inputname",type:"text","class":"form-control",disabled:true}],value:this.model.get("name"),events:{keyup:function(){W()}}},{tag:"div","class":"col-sm-6",html:[{tag:"input",type:"checkbox",id:"cbname",styles:{display:"none"},value:"PLMParameter",checked:this.model.get("autoname"),events:{change:function(){al()}},},{tag:"label",styles:{display:"none"},id:"labelname","class":"control-label","for":"cbname",html:"Nom automatique",}]}]}]})}else{aP=UWA.createElement("div",{id:"divname","class":"col-sm-12",styles:{display:"none"},html:[{tag:"label",text:e.get("Name")},{tag:"div","class":"row",html:[{tag:"div","class":"col-sm-6",html:[{tag:"input",id:"inputname",type:"text","class":"form-control",disabled:false}],value:this.model.get("name"),events:{keyup:function(){W()}}},{tag:"div","class":"col-sm-6",html:[{tag:"input",type:"checkbox",id:"cbname",value:"PLMParameter",checked:this.model.get("autoname"),events:{change:function(){al()}},hidden:true},{tag:"label",id:"labelname","class":"control-label","for":"cbname",html:"Nom automatique",hidden:true}]}]}]})}aP.inject(T);var ah=UWA.createElement("div",{id:"divrevisionowner","class":"col-sm-12",html:[{tag:"div","class":"row",html:[{tag:"div",id:"divrevision","class":"col-sm-6",html:[{tag:"label",text:e.get("Revision")},{tag:"div",id:"inputrevision",html:this.model.get("revision")}]},{tag:"div",id:"divowner","class":"col-sm-6",html:[{tag:"label",text:e.get("Owner")},{tag:"input",id:"inputowner","class":"form-control",value:this.model.get("owner"),events:{change:function(){O()}},disabled:true}]}]}]});ah.inject(T);if(this.model.get("objectid")===""||this.model.get("objectid")===undefined){ah.hide()}var af=true;if(this.model.get("objectid")===""||this.model.get("objectid")===undefined){af=false}var w=UWA.createElement("div",{id:"divrolepriorityfunction","class":"col-sm-12",html:[{tag:"div","class":"row",html:[{tag:"div",styles:{display:"none"},id:"divrole","class":"col-sm-4",html:[{tag:"label",text:e.get("Role")},{tag:"input",type:"text","class":"form-control",id:"inputrole",value:this.model.get("role"),events:{keyup:function(){C()}},disabled:af}]},{tag:"div",id:"divpriority","class":"col-sm-6",html:[{tag:"label",text:e.get("Priority")},{tag:"input",type:"text","class":"form-control",id:"inputpriority",value:this.model.get("priority"),events:{keyup:function(){q()}}}]},{tag:"div",id:"divfunction","class":"col-sm-6",html:[{tag:"label",text:e.get("Function")},{tag:"select",id:"selectfunction","class":"form-control",html:[{tag:"option",value:"",text:"",},{tag:"option",value:"Objective",text:e.get("Objective")}],events:{change:function(){V()}},value:this.model.get("function")}]}]}]});w.inject(T);var S=UWA.createElement("div",{id:"divparentobjectif",html:[{tag:"div",div:"divobjectiftype","class":"col-sm-12",html:[{tag:"div","class":"row",html:[{tag:"div",id:"divobjetiftype","class":"col-sm-4",html:[{tag:"label",text:e.get("Type")},{tag:"select",id:"selectobjetiftype","class":"form-control",html:[{tag:"option",value:"Target",text:e.get("Target"),selected:true},{tag:"option",value:"Minimize",text:e.get("Minimize")},{tag:"option",value:"Maximize",text:e.get("Maximize")}],events:{change:function(){Z()}}}]},{tag:"div",id:"divobjetifprobability","class":"col-sm-4",html:[{tag:"label",text:e.get("Probability")},{tag:"div","class":"row",html:[{tag:"div","class":"col-sm-6",html:[{tag:"input",type:"text","class":"form-control",id:"inputobjetifprobability",events:{keyup:function(){aC()}}}]},{tag:"div","class":"col-sm-6",html:[{tag:"select",id:"selectobjetifprobabilityunit","class":"form-control",html:[{tag:"option",value:"NONE",text:""},{tag:"option",value:'PERCEN"tag"E',text:e.get("%"),selected:true}],events:{change:function(){X()}}}]}]}]},{tag:"div",id:"divobjectifconfidence","class":"col-sm-4",html:[{tag:"label",text:e.get("Confidence")},{tag:"div","class":"row",html:[{tag:"div","class":"col-sm-6",html:[{tag:"input",type:"text","class":"form-control",id:"inputobjectifconfidence",events:{keyup:function(){I()}}}]},{tag:"div","class":"col-sm-6",html:[{tag:"select",id:"selectobjectifconfidenceunit","class":"form-control",html:[{tag:"option",value:"NONE",text:""},{tag:"option",value:'PERCEN"tag"E',text:e.get("%"),selected:true}],events:{change:function(){r()}}}]}]}]}]}]}]});S.inject(T);S.hide();var aD=UWA.createElement("div",{id:"divbtndetails","class":"col-sm-12",html:[{tag:"div","class":"row",styles:{"margin-top":"10px"},html:[{tag:"div",id:"divbuttons","class":"col-sm-6",html:[{tag:"button",type:"button","class":"btn btn-default",html:e.get("Details"),id:"btndetails",styles:{margin:"5px"},events:{click:function(){aq(T)}}}]}]}]});aD.inject(M);T.inject(M);T.hide();if(this.model.get("displaytype")!=="modal"){aQ().inject(M)}return ai},getFooter:function(){var g=this.PARcreateparam.bind(this),h=this;var j=[];if(this.model.get("objectid")===""||this.model.get("objectid")===undefined){j.push({tag:"button",type:"button","class":"btn btn-primary",html:"OK",id:"btncreateparam",styles:{margin:"5px"},events:{click:function(){g()}}})}else{j.push({tag:"button",type:"button","class":"btn btn-primary",html:"Update",id:"btncreateparam",styles:{margin:"5px"},events:{click:function(){g()}}})}if(this.model.get("displaytype")==="modal"){j.push({tag:"button",type:"button","class":"btn btn-default",html:"Cancel",id:"btncancelparam",styles:{margin:"5px"},events:{click:function(){h.model.get("modalparent").hide()}}})}var i=UWA.createElement("div",{id:"divfooterbuttons","class":"col-sm-12",html:[{tag:"div","class":"row",styles:{"margin-top":"10px"},html:[{tag:"div",id:"divbuttons","class":"col-sm-6 col-sm-offset-6",html:j}]}]});return i},PARremovevalue:function(l){var j=document.querySelector("#inputvalues"),h=document.querySelector("#selectvalues"),g=h.selectedIndex,n=[];var o=g===-1?o="":h.options[g].value;if(j.value===o){h.options[g].remove();l.splice(g,1);selectvalues.selectedIndex=0;inputvalues.value=""}for(var m=0;m<h.options.length;m++){var k=h.options[m];n.push({value:k.value,nls:k.text})}this.model.set("values",n,{silent:true})},PARaddvalue:function(m){if(undefined===this.erroraddvalues||!this.erroraddvalues.isVisible){var q=document.querySelector("#inputvalues"),r=document.querySelector("#selectvalues"),h=document.querySelector("#selectvaluationtype").value,k=q.value,g=r.selectedIndex,s=[];var o=this._isMultipleValueValid(k);if(!UWA.is(o)){if(
/*!isNaN(newvalue) && */
h==="2"||(h==="1"&&m.indexOf(k)===-1)){var p=g===-1?p="":r.options[g].value;if(p===""||p==="Empty"){var n=document.createElement("option");n.text=k;n.value=k;r.add(n);m.push(k)}else{r.options[g].value=k;r.options[g].text=k;m[g]=k}selectvalues.selectedIndex=0;inputvalues.value="";for(var l=0;l<r.options.length;l++){var j=r.options[l];s.push({value:j.value,nls:j.text})}this.model.set("values",s,{silent:true})}else{console.log("Value already present in the list")}}else{}}},PARchangeselectedvalue:function(){var h=document.querySelector("#inputvalues"),g=document.querySelector("#selectvalues");if(g.value!=="Empty"){h.value=g.value}},PARchangefunctionobjectif:function(){var g=document.querySelector("#selectfunction");if(g.value==="Objective"){divparentobjectif.show()}else{divparentobjectif.hide()}this.model.set("function",document.querySelector("#selectfunction").value,{silent:true})},PARchangeautomatiquename:function(){var h=document.querySelector("#cbname"),g=document.querySelector("#inputname");if(h.checked){g.disabled=true}else{g.disabled=false;if(g.value===""||g.value===undefined){this.errorname=new c({target:document.querySelector("#inputname"),position:"top",body:e.get("Required")});this.errorname.show()}}this.model.set("autoname",h.checked,{silent:true})},PARchangedimension:function(){var q=document.querySelector("#selectdimensions"),k=q.value,l={dimension:k},n=this,p=document.querySelector("#inputvalue"),g=document.querySelector("#divminmaxvalue"),i=document.querySelector("#divvalues");this.model.set("dimension",k,{silent:true});a.authenticatedRequest(this.model.get("3DSpaceUrl")+"/resources/parameter/authoring/getunits",{method:"POST",type:"json",data:JSON.stringify(l),headers:{"Content-Type":"application/json"},onComplete:function(t){n.model.set("unitsselecteddimension",t)},onFailure:function(){n.model.set("unitsselecteddimension",[])}});if((null!==q)&&(-1!==q.selectedIndex)){if("BooleanParameter"===k){n.swapInputField("inputvalue",true);var m=document.querySelector("#inputvalue");var s=document.createElement("option");s.text="TRUE";s.value="TRUE";m.add(s);var h=document.createElement("option");h.text="FALSE";h.value="FALSE";m.add(h);g.hide();i.hide();divminmaxtolerance.hide();divminmaxprecision.hide()}else{if("StringParameter"===k){n.swapInputField("inputvalue",false);g.hide();i.show();divminmaxtolerance.hide();divminmaxprecision.hide()}else{if("IntegerParameter"===k){n.swapInputField("inputvalue",false);var r=parseInt(p.value),j=parseInt(document.querySelector("#inputminvalue").value),o=parseInt(document.querySelector("#inputmaxvalue").value);p.value=isNaN(r)?"":r;document.querySelector("#inputminvalue").value=isNaN(j)?"":j;document.querySelector("#inputmaxvalue").value=isNaN(o)?"":o;g.show();i.show();divminmaxtolerance.hide();divminmaxprecision.hide()}else{n.swapInputField("inputvalue",false);var r=parseFloat(p.value),j=parseFloat(document.querySelector("#inputminvalue").value),o=parseFloat(document.querySelector("#inputmaxvalue").value);p.value=isNaN(r)?"":r;document.querySelector("#inputminvalue").value=isNaN(j)?"":j;document.querySelector("#inputmaxvalue").value=isNaN(o)?"":o;g.show();i.show();divminmaxtolerance.show();divminmaxprecision.show()}}}}},swapInputField:function(k,n){var m=document.querySelector("#"+k);if(null!==m){var j=m.type;if(n&&("text"===j)){var i=m.getParent();i.removeChild(m);var h=UWA.createElement("select",{id:k,type:"text","class":"form-control"});i.appendChild(h)}else{if(!n){var l=false;if((null!==j)&&(0===j.indexOf("select"))){l=true}else{if(!((null!==j)&&(undefined!==j))){var g=m.html();if(0===g.toLowerCase().indexOf("<option")){l=true}}}if(l){var i=m.getParent();i.removeChild(m);var h=UWA.createElement("input",{id:k,type:"text","class":"form-control"});i.appendChild(h)}}}}},PARcreateparam:function(){if(UWA.is(this.errorvalue)){this.errorvalue.show()}else{if(UWA.is(this.errorminvalue)){this.errorminvalue.show()}else{if(UWA.is(this.errormaxvalue)){this.errormaxvalue.show()}else{if(this.model.get("title")!==undefined&&this.model.get("title")!==""){var v=this;if(this.errortitle){this.errortitle.hide()}var j={"Content-Type":"application/json",SecurityContext:this.model.get("SecurityContext")};var n=this.model.get("valuationtype"),M=this.model.get("title"),I=this.model.get("dimension"),C=this.model.get("parentid")!==""&&this.model.get("parentid")!==undefined?C=this.model.get("parentid"):"",K=this.model.get("objectid")!==""&&this.model.get("objectid")!==undefined?K=this.model.get("objectid"):"",x=this.model.get("unit"),N=this.model.get("name"),G=this.model.get("description"),g=this.model.get("owner"),p=this.model.get("values"),D=this.model.get("value"),q=this.model.get("minvalue"),A=this.model.get("maxvalue"),B=this.model.get("autoname"),H=this.model.get("mininclus"),m=this.model.get("maxinclus"),l=this.model.get("mintolerance"),s=this.model.get("maxtolerance"),F=this.model.get("minprecision"),u=this.model.get("maxprecision"),o=this.model.get("function"),r=this.model.get("objectiftype"),k=this.model.get("objectifprobability"),i=this.model.get("objectifprobabilityunit"),z=this.model.get("objectifconfidence"),h=this.model.get("objectifconfidencetunit"),J=this.model.get("priority");var w=true;if(n==="1"&&UWA.is(p)){var y=p.length;if(y>1){if(D===undefined||D===""){w=false;if(UWA.is(this.errorvalueauthorized)){this.errorvalueauthorized.setBody(e.get("error.ValueNeeded"))}else{this.errorvalueauthorized=new c({target:document.querySelector("#inputvalue"),position:"top",body:e.get("error.ValueNeeded")})}this.errorvalueauthorized.show()}else{var E=this._isValueValid();if(!UWA.is(E)){this.model.set("value",document.querySelector("#inputvalue").value,{silent:true});if(UWA.is(this.errorvalue)){this.errorvalue.destroy();this.errorvalue=null}}else{w=false;if(UWA.is(this.errorvalue)){this.errorvalue.setBody(e.get(E))}else{this.errorvalue=new c({target:document.querySelector("#inputvalue"),position:"top",body:e.get(E)})}this.errorvalue.show()}}}}if(true===w){var L={valuationtype:n,title:M,dimension:I,objectid:K,attributes:{parentid:C,unit:x,autoname:B,name:N,description:G,owner:g},values:{value:D,minvalue:q,mininclus:H,maxvalue:A,maxinclus:m,valuesvalue:p,mintolerance:l,maxtolerance:s,minprecision:F,maxprecision:u},objectif:{"function":o,objectiftype:r,objectifprobability:k,objectifprobabilityunit:i,objectifconfidence:z,objectifconfidenceunit:h,priority:J}};var t=document.querySelector("#btncreateparam").innerHTML;if(t==="OK"){a.authenticatedRequest(this.model.get("3DSpaceUrl")+"/resources/parameter/authoring",{method:"POST",type:"json",data:JSON.stringify(L),headers:j,onComplete:function(O){console.log(O);f.success(e.get("ParameterCreationOK"));v.model.set("objectid",O.objectid);v.model.set("physicalid",O.physicalid);v.model.set("relid",O.relid);v.model.set("name",O.attributes.name);v.model.set("owner",O.attributes.owner);v.model.set("revision",O.attributes.revision);if(v.model.get("displaytype")==="modal"){v.model.get("modalparent").hide()}v.model.dispatchEvent("PARComponentCreate",v.model)},onFailure:function(O){console.log(O);if(O.objectid!==undefined&&O.objectid!==""){v.model.set("objectid",O.objectid);f.warn(e.get("ParameterCreationWithErrors")+O.error)}else{f.error(e.get("ParameterCreationKO"))}}})}else{if(t==="Update"){a.authenticatedRequest(this.model.get("3DSpaceUrl")+"/resources/parameter/authoring/"+K,{method:"PUT",type:"json",data:JSON.stringify(L),headers:j,onComplete:function(O){console.log(O);f.success(e.get("ParameterModificationOK"));v.model.dispatchEvent("PARComponentUpdate",v.model)},onFailure:function(O){if(O.objectid!==undefined&&O.objectid!==""){v.model.set("objectid",O.objectid);f.warn(e.get("ParameterModificationWithErrors")+O.error)}else{f.error(e.get("ParameterModificationKO"))}}})}}}}else{this.errortitle=new c({target:document.querySelector("#inputtitle"),position:"top",body:e.get("Required")});this.errortitle.show()}}}}},PARapplyparam:function(){if(this.model.get("title")!==undefined&&this.model.get("title")!==""){var u=this;if(this.errortitle){this.errortitle.hide()}var k={"Content-Type":"application/json",SecurityContext:u.get("SecurityContext")};var o=this.model.get("valuationtype"),I=this.model.get("title"),E=this.model.get("dimension"),z=this.model.get("parentid")!==""&&this.model.get("parentid")!==undefined?z=this.model.get("parentid"):"",G=this.model.get("objectid")!==""&&this.model.get("objectid")!==undefined?G=this.model.get("objectid"):"",v=this.model.get("unit"),J=this.model.get("name"),C=this.model.get("description"),g=this.model.get("owner"),j=this.model.get("values"),A=this.model.get("value"),q=this.model.get("minvalue"),x=this.model.get("maxvalue"),y=this.model.get("autoname"),D=this.model.get("mininclus"),n=this.model.get("maxinclus"),m=this.model.get("mintolerance"),s=this.model.get("maxtolerance"),B=this.model.get("minprecision"),t=this.model.get("maxprecision"),p=this.model.get("function"),r=this.model.get("objectiftype"),l=this.model.get("objectifprobability"),i=this.model.get("objectifprobabilityunit"),w=this.model.get("objectifconfidence"),h=this.model.get("objectifconfidencetunit"),F=this.model.get("priority");var H={valuationtype:o,title:I,dimension:E,objectid:G,attributes:{parentid:z,unit:v,autoname:y,name:J,description:C,owner:g},values:{value:A,minvalue:q,mininclus:D,maxvalue:x,maxinclus:n,valuesvalue:j,mintolerance:m,maxtolerance:s,minprecision:B,maxprecision:t},objectif:{"function":p,objectiftype:r,objectifprobability:l,objectifprobabilityunit:i,objectifconfidence:w,objectifconfidencetunit:h,priority:F}};a.authenticatedRequest(this.model.get("3DSpaceUrl")+"/resources/parameter/authoring",{method:"POST",type:"json",data:JSON.stringify(H),headers:k,onComplete:function(K){console.log(K);f.success(e.get("ParameterCreationOK"));u.model.set("objectid",K.objectid);u.model.set("name",K.attributes.name);u.model.set("owner",K.attributes.owner);u.model.set("revision",K.attributes.revision)},onFailure:function(K){console.log(K);if(K.objectid!==undefined&&K.objectid!==""){u.model.set("objectid",K.objectid);f.warn(e.get("ParameterCreationWithErrors")+K.error)}else{f.error(e.get("ParameterCreationKO"))}}})}else{this.errortitle=new c({target:document.querySelector("#inputtitle"),position:"top",body:e.get("Required")});this.errortitle.show()}},PARclicksetvalues:function(g){if(g.style.display==="none"){g.show()}else{g.hide()}},PARclickdetails:function(g){if(g.style.display==="none"){g.show()}else{g.hide()}},PARchangevaluationtype:function(){this.model.set("valuationtype",document.querySelector("#selectvaluationtype").value,{silent:true});if(document.querySelector("#selectvaluationtype").value==="1"){document.querySelector("#labelvalues").setText(e.get("AuthorizedValues"));document.querySelector("#inputvalue").disabled=false}else{document.querySelector("#labelvalues").setText(e.get("Values"));document.querySelector("#inputvalue").disabled=true;document.querySelector("#inputvalue").value=""}},PARchangevalue:function(){if(this.model.get("dimension")==="StringParameter"||this.model.get("dimension")==="BooleanParameter"){this.model.set("value",document.querySelector("#inputvalue").value,{silent:true})}else{if(isNaN(document.querySelector("#inputvalue").value)){if(UWA.is(this.errorvalue)){this.errorvalue.setBody(e.get("MustBeANumber"))}else{this.errorvalue=new c({target:document.querySelector("#inputvalue"),position:"top",body:e.get("MustBeANumber")})}this.errorvalue.show()}else{var g=this._isValueValid();if(!UWA.is(g)){this.model.set("value",document.querySelector("#inputvalue").value,{silent:true});if(UWA.is(this.errorvalue)){this.errorvalue.destroy();this.errorvalue=null}}else{if(UWA.is(this.errorvalue)){this.errorvalue.setBody(e.get(g))}else{this.errorvalue=new c({target:document.querySelector("#inputvalue"),position:"top",body:e.get(g)})}this.errorvalue.show()}}this._updateMinError();this._updateMaxError()}},PARremoveerrorvalue:function(){},PARchangetitle:function(){this.model.set("title",document.querySelector("#inputtitle").value,{silent:true})},PARchangedescription:function(){this.model.set("description",document.querySelector("#inputdescription").value,{silent:true})},PARchangeunit:function(){this.model.set("unit",document.querySelector("#selectunit").value,{silent:true})},PARchangeminvalue:function(){if(this.model.get("dimension")==="StringParameter"||this.model.get("dimension")==="BooleanParameter"){}else{if(isNaN(document.querySelector("#inputminvalue").value)){if(UWA.is(this.errorminvalue)){this.errorminvalue.setBody(e.get("MustBeANumber"))}else{this.errorminvalue=new c({target:document.querySelector("#inputminvalue"),position:"top",body:e.get("MustBeANumber")})}this.errorminvalue.show()}else{var g=this._isMinValid();if(!UWA.is(g)){this.model.set("minvalue",document.querySelector("#inputminvalue").value,{silent:true});if(UWA.is(this.errorminvalue)){this.errorminvalue.destroy();this.errorminvalue=null}}else{if(UWA.is(this.errorminvalue)){this.errorminvalue.setBody(e.get(g))}else{this.errorminvalue=new c({target:document.querySelector("#inputminvalue"),position:"top",body:e.get(g)})}this.errorminvalue.show()}}this._updateValueError();this._updateMaxError()}},PARremoveerrorminvalue:function(){},PARchangemininclus:function(){var g=this._isMinIncludedValid();if(!UWA.is(g)){if(UWA.is(this.errorminincvalue)){this.errorminincvalue.destroy();this.errorminincvalue=null}}else{if(UWA.is(this.errorminincvalue)){this.errorminincvalue.setBody(e.get(g))}else{this.errorminincvalue=new c({target:document.querySelector("#cbinclusminvalue"),position:"top",body:e.get(g)})}this.errorminincvalue.show()}this.model.set("mininclus",document.querySelector("#cbinclusminvalue").checked,{silent:true})},PARchangemaxvalue:function(){if(this.model.get("dimension")==="StringParameter"||this.model.get("dimension")==="BooleanParameter"){}else{if(isNaN(document.querySelector("#inputmaxvalue").value)){if(UWA.is(this.errormaxvalue)){this.errormaxvalue.setBody(e.get("MustBeANumber"))}else{this.errormaxvalue=new c({target:document.querySelector("#inputmaxvalue"),position:"top",body:e.get("MustBeANumber")})}this.errormaxvalue.show()}else{var g=this._isMaxValid();if(!UWA.is(g)){this.model.set("maxvalue",document.querySelector("#inputmaxvalue").value,{silent:true});if(UWA.is(this.errormaxvalue)){this.errormaxvalue.destroy();this.errormaxvalue=null}}else{if(UWA.is(this.errormaxvalue)){this.errormaxvalue.setBody(e.get(g))}else{this.errormaxvalue=new c({target:document.querySelector("#inputmaxvalue"),position:"top",body:e.get(g)})}this.errormaxvalue.show()}}this._updateValueError();this._updateMinError()}},PARremoveerrormaxvalue:function(){},PARchangemaxinclus:function(){var g=this._isMaxIncludedValid();if(!UWA.is(g)){if(UWA.is(this.errormaxincvalue)){this.errormaxincvalue.destroy();this.errormaxincvalue=null}}else{if(UWA.is(this.errormaxincvalue)){this.errormaxincvalue.setBody(e.get(g))}else{this.errormaxincvalue=new c({target:document.querySelector("#cbinclusmaxvalue"),position:"top",body:e.get(g)})}this.errormaxincvalue.show()}this.model.set("maxinclus",document.querySelector("#cbinclusmaxvalue").checked,{silent:true})},PARchangemintolerancevalue:function(){if(this.model.get("dimension")==="StringParameter"||this.model.get("dimension")==="BooleanParameter"){}else{if(isNaN(document.querySelector("#inputmintolerance").value)){this.errormintolerance=new c({target:document.querySelector("#inputmintolerance"),position:"top",body:e.get("MustBeANumber")});this.errormintolerance.show()}else{this.model.set("mintolerance",document.querySelector("#inputmintolerance").value,{silent:true})}}},PARremoveerrormintolerancevalue:function(){if(undefined!==this.errormintolerance){this.errormintolerance.hide()}},PARchangemaxtolerancevalue:function(){if(this.model.get("dimension")==="StringParameter"||this.model.get("dimension")==="BooleanParameter"){}else{if(isNaN(document.querySelector("#inputmaxtolerance").value)){this.errormaxtolerance=new c({target:document.querySelector("#inputmaxtolerance"),position:"top",body:e.get("MustBeANumber")});this.errormaxtolerance.show()}else{this.model.set("maxtolerance",document.querySelector("#inputmaxtolerance").value,{silent:true})}}},PARremoveerrormaxtolerancevalue:function(){if(undefined!==this.errormaxtolerance){this.errormaxtolerance.hide()}},PARchangeminprecisionvalue:function(){if(this.model.get("dimension")==="StringParameter"||this.model.get("dimension")==="BooleanParameter"){}else{if(isNaN(document.querySelector("#inputminprecision").value)){this.errorminprecision=new c({target:document.querySelector("#inputminprecision"),position:"top",body:e.get("MustBeANumber")});this.errorminprecision.show()}else{this.model.set("minprecision",document.querySelector("#inputminprecision").value,{silent:true})}}},PARremoveerrorminprecisionvalue:function(){if(undefined!==this.errorminprecision){this.errorminprecision.hide()}},PARchangemaxprecisionvalue:function(){if(this.model.get("dimension")==="StringParameter"||this.model.get("dimension")==="BooleanParameter"){}else{if(isNaN(document.querySelector("#inputmaxprecision").value)){this.errormaxprecision=new c({target:document.querySelector("#inputmaxprecision"),position:"top",body:e.get("MustBeANumber")});this.errormaxprecision.show()}else{this.model.set("maxprecision",document.querySelector("#inputmaxprecision").value,{silent:true})}}},PARremoveerrormaxprecisionvalue:function(){if(undefined!==this.errormaxprecision){this.errormaxprecision.hide()}},PARchangename:function(){this.model.set("name",document.querySelector("#inputname").value,{silent:true});if(document.querySelector("#inputname").value===""||document.querySelector("#inputname").value===undefined){this.errorname=new c({target:document.querySelector("#inputname"),position:"top",body:e.get("Required")});this.errorname.show()}else{if(this.errorname!==undefined){this.errorname.hide()}}},PARchangeowner:function(){this.model.set("owner",document.querySelector("#inputowner").value,{silent:true})},PARchangerole:function(){this.model.set("role",document.querySelector("#inputrole").value,{silent:true})},PARchangepriority:function(){this.model.set("priority",document.querySelector("#inputpriority").value,{silent:true})},PARclickselecteddimension:function(){var g=document.querySelector("#selectdimensions"),k=this.model.get("selecteddimension"),h=UWA.clone(this.model.get("preferreddimensionsMRU")),i=true,j=UWA.clone(this.model.get("preferreddimensionsbase"));if(h.length>0){h.forEach(function(l){if(l.value===k.value){i=false}})}if(j.length>0){j.forEach(function(l){if(l.value===k.value){i=false}})}if(i){h.push({value:k.value,nls:k.nls});if(h.length>10){h.shift()}this.model.set("preferreddimensionsMRU",h)}this.model.set("dimension",k.value);document.querySelector("#divalldimensions").hide();document.querySelector("#divparent").show()},PARchangeselecteddimension:function(g){this.model.set("selecteddimension",{value:g.target.value,nls:g.target.id})},PARchangeaddvalues:function(){if(this.model.get("dimension")!=="StringParameter"&&this.model.get("dimension")!=="BooleanParameter"&&isNaN(document.querySelector("#inputvalues").value)){this.erroraddvalues=new c({target:document.querySelector("#inputvalues"),position:"top",body:e.get("MustBeANumber")});this.erroraddvalues.show()}if(UWA.is(this.errorvalue)){this.model.set("value",document.querySelector("#inputvalue").value,{silent:true});this.errorvalue.destroy();this.errorvalue=null}},PARremoveerroraddvalues:function(){if(undefined!==this.erroraddvalues){this.erroraddvalues.hide()}},PARupdatedisplay:function(){if(this.model.get("objectid")===""||this.model.get("objectid")===undefined){document.querySelector("#btncreateparam").innerHTML="OK";document.querySelector("#cbname").style.visibility="visible";document.querySelector("#labelname").style.visibility="visible";document.querySelector("#inputrole").disabled=false;if(document.querySelector("#cbname").checked){document.querySelector("#inputname").disabled=true}else{document.querySelector("#inputname").disabled=false}document.querySelector("#selectdimensions").disabled=false;document.querySelector("#divrevisionowner").hide();document.querySelector("#btndimensions").disabled=false}else{document.querySelector("#btncreateparam").innerHTML="Update";document.querySelector("#cbname").style.visibility="hidden";document.querySelector("#labelname").style.visibility="hidden";document.querySelector("#inputrole").disabled=true;document.querySelector("#inputname").disabled=false;document.querySelector("#selectdimensions").disabled=true;document.querySelector("#inputname").name=this.model.get("name");document.querySelector("#inputrevision").value=this.model.get("revision");document.querySelector("#inputowner").value=this.model.get("owner");document.querySelector("#divrevisionowner").show();document.querySelector("#btndimensions").disabled=true}},PARchangetypeobjectif:function(){this.model.set("objectiftype",document.querySelector("#selectobjetiftype").value,{silent:true})},PARchangeprobabilityobjectif:function(){this.model.set("objectifprobability",document.querySelector("#inputobjetifprobability").value,{silent:true})},PARchangeprobabilityunitobjectif:function(){this.model.set("objectifprobabilityunit",document.querySelector("#selectobjetifprobabilityunit").value,{silent:true})},PARchangeconfidenceobjectif:function(){this.model.set("objectifconfidence",document.querySelector("#inputobjectifconfidence").value,{silent:true})},PARchangeconfidenceunitobjectif:function(){this.model.set("objectifconfidencetunit",document.querySelector("#selectobjectifconfidenceunit").value,{silent:true})},PARshowdimensionslist:function(){document.querySelector("#divparent").hide();document.querySelector("#divalldimensions").show()},_checkListOfValues:function(k,r){var t=null,m="#inputmaxvalue",h="#cbinclusmaxvalue";if(k==="Min"){m="#inputminvalue";h="#cbinclusminvalue"}var s=document.querySelector("#inputvalue").value,u=document.querySelector("#selectvaluationtype").value,i=document.querySelector(m).value,n=document.querySelector(h),j=n.checked,q=document.querySelector("#selectvalues"),o=q.length,x=0,g=[];for(;x<o;x++){var w=q.options[x].value;if(w!=="Empty"&&w!==undefined){g.push(w)}}if(g.length>0){function p(y){return y.sort(function(A,z){return +A-+z})}var l=p(g);var v=k==="Min"?l[1]:l[l.length-1];if(r==="Equality"&&parseFloat(v)===parseFloat(i)){if(u==="1"){t=k=="Min"?"error.MinStricLessAuthValues":"error.MaxStricGreaterAuthValues"}else{if(u==="2"){t=k=="Min"?"error.MinStricLessMultipleValues":"error.MaxStricGreaterMultipleValues"}}}else{if(r==="Comparison"){if(k==="Min"){if(j&&parseFloat(i)>parseFloat(v)){t=u==="1"?"error.MinLessAuthValues":"error.MinLessMultipleValues"}else{if(!j&&parseFloat(i)>=parseFloat(v)){t=u==="1"?"error.MinStricLessAuthValues":"error.MinStricLessMultipleValues"}}}else{if(k==="Max"){if(j&&parseFloat(i)<parseFloat(v)){t=u==="1"?"error.MaxGreaterAuthValues":"error.MaxGreaterMultipleValues"}else{if(!j&&parseFloat(i)<=parseFloat(v)){t=u==="1"?"error.MaxStricGreaterAuthValues":"error.MaxStricGreaterMultipleValues"}}}}}}}return t},_isValueValid:function(){var n=null,s=true,k=document.querySelector("#inputminvalue").value,o=document.querySelector("#inputmaxvalue").value,q=document.querySelector("#inputvalue").value,h=document.querySelector("#cbinclusmaxvalue").checked,j=document.querySelector("#cbinclusminvalue").checked;if(k.length>0&&!isNaN(k)&&(j==true&&parseFloat(q)<parseFloat(k))||(j==false&&parseFloat(q)<=parseFloat(k))){n="error.ValueLessThanMin";s=false}if(s&&o.length>0&&!isNaN(o)&&(h==true&&parseFloat(q)>parseFloat(o))||(h==false&&parseFloat(q)>=parseFloat(o))){n="error.ValueGreaterThanMax"}if(s===true){var m=document.querySelector("#selectvaluationtype").value,p=document.querySelector("#selectvalues"),g=p.length,i=0,r=[];for(;i<g;i++){var l=p.options[i].value;if(l!=="Empty"&&l!==undefined){r.push(l)}}if(m==="1"&&r.length>1&&r.indexOf(q)===-1){n="error.NotInTheList"}}return n},_isMultipleValueValid:function(n){var i=null,m=true,l=this.model.get("dimension");if(l==="StringParameter"||l==="BooleanParameter"){return null}else{if(isNaN(n)){return"error.NotAValidNumber"}}var k=document.querySelector("#inputminvalue").value,g=document.querySelector("#inputmaxvalue").value,h=document.querySelector("#cbinclusmaxvalue").checked,j=document.querySelector("#cbinclusminvalue").checked;if(k.length>0&&!isNaN(k)&&(j==true&&parseFloat(n)<parseFloat(k))||(j==false&&parseFloat(n)<=parseFloat(k))){i="error.ValueLessThanMin";m=false}if(m&&g.length>0&&!isNaN(g)&&(h==true&&parseFloat(n)>parseFloat(g))||(h==false&&parseFloat(n)>=parseFloat(g))){i="error.ValueGreaterThanMax"}return i},_isMinMaxValid:function(k){var l=null,o=true,i=document.querySelector("#inputminvalue").value,m=document.querySelector("#inputmaxvalue").value,n=document.querySelector("#inputvalue").value,j=document.querySelector("#selectvaluationtype").value,g=document.querySelector("#cbinclusmaxvalue").checked,h=document.querySelector("#cbinclusminvalue").checked;var o=true;if(j==="1"&&n.length>0&&!isNaN(n)){if(k==="Min"&&i.length>0&&!isNaN(i)&&(h==true&&parseFloat(n)<parseFloat(i))||(h==false&&parseFloat(n)<=parseFloat(i))){o=false;l="error.MinGreaterValue"}if(o&&k==="Max"&&m.length>0&&!isNaN(m)&&(g==true&&parseFloat(n)>parseFloat(m))||(g==false&&parseFloat(n)>=parseFloat(m))){o=false;l="error.MaxLessValue"}}if(o&&i.length>0&&!isNaN(i)&&m.length>0&&!isNaN(m)){if(k==="Min"&&(h==true&&parseFloat(m)<parseFloat(i))||(h==false&&parseFloat(m)<=parseFloat(i))){o=false;l="error.MinGreaterMax"}if(o&&k==="Max"&&(g==true&&parseFloat(i)>parseFloat(m))||(g==false&&parseFloat(i)>=parseFloat(m))){o=false;l="error.MaxLessMin"}}if(o){l=this._checkListOfValues(k,"Comparison")}return l},_isMinValid:function(){return this._isMinMaxValid("Min")},_isMaxValid:function(){return this._isMinMaxValid("Max")},_isMinIncludedValid:function(){return this._isMinMaxIncludedValid("Min")},_isMaxIncludedValid:function(){return this._isMinMaxIncludedValid("Max")},_isMinMaxIncludedValid:function(k){var l=null,o=true,m="#inputmaxvalue",p="#cbinclusmaxvalue";if(k==="Min"){m="#inputminvalue";p="#cbinclusminvalue"}var n=document.querySelector("#inputvalue").value,j=document.querySelector("#selectvaluationtype").value,h=document.querySelector(m).value,i=document.querySelector(p),g=i.checked;if(g===false){if(h.length>0&&!isNaN(h)){if(j!=="0"){if(j==="1"){if(n.length>0&&!isNaN(n)){if(parseFloat(n)===parseFloat(h)){o=false;l=k==="Min"?"error.MinStricLessValue":"error.MaxStricGreaterValue"}}}if(o==true){l=this._checkListOfValues(k,"Equality");if(UWA.is(l)){o=false}}if(o==false){g=true}}}}return l},_updateValueMinMaxError:function(j){var h="#inputmaxvalue",g="maxvalue";if(j==="Min"){h="#inputminvalue";g="minvalue"}else{if("Value"===j){h="#inputvalue";g="value"}}var i="Min"===j?this._isMinValid():"Max"===j?this._isMaxValid():this._isValueValid();if(!UWA.is(i)){this.model.set(g,document.querySelector(h).value,{silent:true});if("Min"===j&&UWA.is(this.errorminvalue)){this.errorminvalue.destroy();this.errorminvalue=null}else{if("Max"===j&&UWA.is(this.errormaxvalue)){this.errormaxvalue.destroy();this.errormaxvalue=null}else{if("Value"===j&&UWA.is(this.errorvalue)){this.errorvalue.destroy();this.errorvalue=null}}}}},_updateValueError:function(){this._updateValueMinMaxError("Value")},_updateMinError:function(){this._updateValueMinMaxError("Min")},_updateMaxError:function(){this._updateValueMinMaxError("Max")}};return d});define("DS/PARParameterComponent/PARView",["UWA/Core","UWA/Class/View","UWA/Class/Debug","UWA/Class/Collection","DS/UIKIT/Mask","DS/UIKIT/Input/Text","DS/UIKIT/Modal","DS/WAFData/WAFData","DS/PARParameterComponent/PARForm"],function(g,a,j,e,d,c,h,i,f){var b=a.extend(j,{className:"EditorView",setup:function(){this.onModelLoaded(this.model);this.listenTo(this.model,"onChange:preferreddimensions",function(m){this.replaceselectcontain("#selectdimensions",m._attributes.preferreddimensions);var k=document.querySelector("#selectdimensions"),m={dimension:k.value},l=this;i.authenticatedRequest(this.model.get("3DSpaceUrl")+"/resources/parameter/authoring/getunits",{method:"POST",type:"json",data:JSON.stringify(m),headers:{"Content-Type":"application/json"},onComplete:function(n){l.model.set("unitsselecteddimension",n)},onFailure:function(){l.model.set("unitsselecteddimension",[])}})});this.listenTo(this.model,"onChange:objectid",function(k){f.PARupdatedisplay()});this.listenTo(this.model,"onChange:alldimensions",function(m){var n=document.querySelector("#divalldimension"),k="",l=this;m._attributes.alldimensions.forEach(function(o,p){if(p===0){k=k.concat('<div class="toggle"><input type="radio" name="radios" id="'+o.nls+'" value="'+o.value+'" checked><label class="control-label" for"'+o.nls+'">'+o.nls+"</label></div>");l.model.set("selecteddimension",{value:o.value,nls:o.nls})}else{k=k.concat('<div class="toggle"><input type="radio" name="radios" id="'+o.nls+'" value="'+o.value+'"><label class="control-label" for"'+o.nls+'">'+o.nls+"</label></div>")}});n.innerHTML=k});this.listenTo(this.model,"onChange:unitsselecteddimension",function(m){var k=false,l=this;this.replaceselectcontain("#selectunit",m._attributes.unitsselecteddimension.units);if(m._attributes.unitsselecteddimension.units!==undefined&&m._attributes.unitsselecteddimension.units.length>0){m._attributes.unitsselecteddimension.units.forEach(function(n){if(n.value===l.model.get("unit").value){k=true}});if(k){document.querySelector("#selectunit").value=this.model.get("unit").value}else{document.querySelector("#selectunit").value=m._attributes.unitsselecteddimension.preferredunit.name}}});this.listenTo(this.model,"onChange:valuationtype",function(m){var l=document.querySelector("#labelvalues"),k=document.querySelector("#selectvaluationtype").value;if(m._attributes.valuationtype==="1"){l.setHTML("Authorized values")}else{l.setHTML("Values")}if(m._attributes.valuationtype!==k){document.querySelector("#selectvaluationtype").value=m._attributes.valuationtype}});this.listenTo(this.model,"onChange:title",function(k){document.querySelector("#inputtitle").value=k._attributes.title});this.listenTo(this.model,"onChange:dimension",function(l){document.querySelector("#selectdimensions").value=l._attributes.dimension;var l={dimension:l._attributes.dimension},k=this;this.model.set("unit",{value:"",nls:""});i.authenticatedRequest(this.model.get("3DSpaceUrl")+"/resources/parameter/authoring/getunits",{method:"POST",type:"json",data:JSON.stringify(l),headers:{"Content-Type":"application/json"},onComplete:function(m){k.model.set("unitsselecteddimension",m)},onFailure:function(){k.model.set("unitsselecteddimension",[])}})});this.listenTo(this.model,"onChange:unit",function(l){document.querySelector("#selectunit").value=l._attributes.unit.value;var k=l._attributes.unit;if(k.value===null||k.nls===null){if(k.value===null){k.value=""}if(k.nls===null){k.nls=""}this.model.set("unit",k,{silent:true})}});this.listenTo(this.model,"onChange:autoname",function(k){if(typeof(k._attributes.autoname)==="boolean"){if(!k._attributes.autoname){document.querySelector("#cbname").checked=false}else{document.querySelector("#cbname").checked=true}}else{this.model.set("autoname",true,{silent:true});document.querySelector("#cbname").checked=true}});this.listenTo(this.model,"onChange:name",function(k){if(k._attributes.name===undefined||k._attributes.name===""){document.querySelector("#inputname").value=""}else{document.querySelector("#inputname").value=k._attributes.name}});this.listenTo(this.model,"onChange:description",function(k){if(k._attributes.description===undefined||k._attributes.description===""){document.querySelector("#inputdescription").value=""}else{document.querySelector("#inputdescription").value=k._attributes.description}});this.listenTo(this.model,"onChange:owner",function(k){if(k._attributes.owner===undefined||k._attributes.owner===""){document.querySelector("#inputowner").value=""}else{document.querySelector("#inputowner").value=k._attributes.owner}});this.listenTo(this.model,"onChange:revision",function(k){if(k._attributes.owner===undefined||k._attributes.revision===""){document.querySelector("#inputrevision").innerHTML=""}else{document.querySelector("#inputrevision").innerHTML=k._attributes.revision}});this.listenTo(this.model,"onChange:value",function(k){if(k._attributes.value===undefined||k._attributes.value===""){document.querySelector("#inputvalue").value=""}else{document.querySelector("#inputvalue").value=k._attributes.value}});this.listenTo(this.model,"onChange:minvalue",function(k){if(k._attributes.minvalue===undefined||k._attributes.minvalue===""||k._attributes.minvalue===null){document.querySelector("#inputminvalue").value=""}else{document.querySelector("#inputminvalue").value=k._attributes.minvalue}if(k._attributes.minvalue===null){this.model.set("minvalue","",{silent:true})}});this.listenTo(this.model,"onChange:mininclus",function(k){if(typeof(k._attributes.mininclus)==="boolean"){if(!k._attributes.mininclus){document.querySelector("#cbinclusminvalue").checked=false}else{document.querySelector("#cbinclusminvalue").checked=true}}else{this.model.set("mininclus",true,{silent:true});document.querySelector("#cbinclusminvalue").checked=true}});this.listenTo(this.model,"onChange:maxvalue",function(k){if(k._attributes.maxvalue===undefined||k._attributes.maxvalue===""||k._attributes.maxvalue===null){document.querySelector("#inputmaxvalue").value=""}else{document.querySelector("#inputmaxvalue").value=k._attributes.maxvalue}if(k._attributes.maxvalue===null){this.model.set("maxvalue","",{silent:true})}});this.listenTo(this.model,"onChange:maxinclus",function(k){if(typeof(k._attributes.maxinclus)==="boolean"){if(!k._attributes.maxinclus){document.querySelector("#cbinclusmaxvalue").checked=false}else{document.querySelector("#cbinclusmaxvalue").checked=true}}else{this.model.set("maxinclus",true,{silent:true});document.querySelector("#cbinclusmaxvalue").checked=true}});this.listenTo(this.model,"onChange:mintolerance",function(k){if(k._attributes.mintolerance===undefined||k._attributes.mintolerance===""||k._attributes.mintolerance===null){document.querySelector("#inputmintolerance").value=""}else{document.querySelector("#inputmintolerance").value=k._attributes.mintolerance}if(k._attributes.mintolerance===null){this.model.set("mintolerance","",{silent:true})}});this.listenTo(this.model,"onChange:values",function(l){var k=l._attributes.values;k.unshift({value:"Empty",nls:""});this.replaceselectcontain("#selectvalues",k)});this.listenTo(this.model,"onChange:preferreddimensionsMRU",function(n){var m=n._attributes.preferreddimensionsMRU,k=document.querySelector("#selectdimensions"),l="";n._attributes.preferreddimensionsMRU.forEach(function(p){l=l+p.value+";"});widget.setValue("preferreddimensionsMRU",l);var o=this.model.get("preferreddimensionsbase").concat(m);this.model.set("preferreddimensions",o)});this.listenTo(this.model,"onChange:function",function(k){document.querySelector("#selectfunction").value=k._attributes["function"]});this.listenTo(this.model,"onChange:objectiftype",function(k){document.querySelector("#selectobjetiftype").value=k._attributes["function"]});this.listenTo(this.model,"onChange:objectifprobability",function(k){document.querySelector("#inputobjetifprobability").value=k._attributes["function"]});this.listenTo(this.model,"onChange:objectifprobabilityunit",function(k){document.querySelector("#selectobjetifprobabilityunit").value=k._attributes["function"]});this.listenTo(this.model,"onChange:objectifconfidence",function(k){document.querySelector("#inputobjectifconfidence").value=k._attributes["function"]});this.listenTo(this.model,"onChange:objectifconfidencetunit",function(k){document.querySelector("#inputobjectifconfidenceunit").value=k._attributes["function"]})},replaceselectcontain:function(l,m){var k=document.querySelector(l);while(k.firstChild){k.removeChild(k.firstChild)}if(m!==undefined&&m.length>0){m.forEach(function(n){var o=document.createElement("option");o.text=n.nls;o.value=n.value;k.add(o)})}},onModelLoaded:function(k){this.renderForm(k)},renderForm:function(l){d.unmask(this.container);var m=this;if(l.get("displaytype")==="modal"){var o=new h({closable:true,body:"<p>Waiting for a selection in Catia</p>",size:"400px"}).inject(this.container);l.set("modalparent",o);o.hide();o.setBody(f.getForm(this.model));o.setFooter(f.getFooter());o.getBody().setStyles({maxHeight:"800px",overflow:"auto"});var n=UWA.createElement("div",{id:"divbutton","class":"col-sm-6",html:[{tag:"button",type:"button","class":"btn btn-default",html:"Param",id:"btnapplyparam",styles:{margin:"5px"},events:{click:function(){o.show()}}}]});n.inject(this.container)}else{var k=f.getForm(this.model);k.inject(this.container)}},loadData:function(){},render:function(){this.container.setStyles({width:"100%",height:"100%"});return this},onResize:function(k){},destroy:function(){this.stopListening();this.model=null;this._parent()}});return b});define("DS/PARParameterComponent/PARComponent",["DS/PARParameterComponent/PARModel","DS/PARParameterComponent/PARView","UWA/Class/View","DS/i3DXCompassServices/i3DXCompassServices","UWA/Class/Promise"],function(c,a,f,d,e){var b=f.extend({onLoad:function(){},setup:function(){var g=this;this._promise=new e(function(i,h){if(g.options.url===""||g.options.url===undefined){d.getServiceUrl({serviceName:"3DSpace",onComplete:function(j){var j=j[0];g.options.url=j.url;g.model=new c(g.options);g.view=new a({model:g.model,id:"PLMParameter"});g.view.render().inject(g.container);g.getData();i()}.bind(g),onFailure:function(){h()}})}else{g.model=new c(g.options);g.view=new a({model:g.model,id:"PLMParameter"});g.view.render().inject(g.container);i()}})},render:function(){return this},getData:function(){this.view.loadData()},getModel:function(){return this.model},getPARCompPromise:function(){return this._promise}});return b});define("DS/PARParameterComponent/popup/PARPopup",["UWA/Controls/Abstract","DS/ENOFloatingPanel/ENOFloatingPanel","DS/PARParameterComponent/PARComponent","DS/PlatformAPI/PlatformAPI","UWA/Class/Promise","css!DS/EditPropWidget/EditPropWidget.css","i18n!DS/EditPropWidget/assets/nls/editPropPopup"],function(g,f,a,c,e){var b="ENOVIA - "+UWA.i18n("Parameters");var d=g.extend({defaultOptions:{serverName:"",serverUri:"",container:null,context:null,parentid:"",tenant:""},init:function(h){this._parent(h);this.parentid=h.parentid;this.tenant=h.tenant;this.initUI()},setDataReady:function(h){if(h){this.defaultModels=null}this.dataReady=h},initUI:function(){var i=this;this._parent(this.options);this.widgetPere=this.options.container;this.widgetPere=this.widgetPere?this.widgetPere:widget.body;this.widgetPere=this.widgetPere?this.widgetPere:UWA.extend(document.body);var h=new a({parentid:this.parentid,type:"container",tenant:this.tenant});h.render();i.fakeFloatingPanel=new f({className:"PAR_PopupDialFake",body:h.getContent(),title:b,pinOptions:null,pinCallback:null,overlay:false,closable:true,animate:true,resizable:true,events:{onClose:function(){i._cancel()}}});i.fakeFloatingPanel.inject(this.widgetPere);var j=h.getPARCompPromise();j.then(function(){i.fakeFloatingPanel.setNewSize({});i.fakeFloatingPanel.lockWidth();i.fakeFloatingPanel.centerIt();h.listenTo(h.getModel(),"PARComponentCreate",function(k){c.publish("DS/PARParameterComponent/PlatformAPI/create",k._attributes);i.destroyComponent()});h.listenTo(h.getModel(),"PARComponentUpdate",function(k){c.publish("DS/PARParameterComponent/PlatformAPI/update",k._attributes)})})},show:function(){this.fakeFloatingPanel.show()},hide:function(){this.fakeFloatingPanel.hide()},onRefresh:function(){},_cancel:function(){this.fakeFloatingPanel.hide();this.fakeFloatingPanel.destroy()},destroyComponent:function(){this.fakeFloatingPanel.hide();this.fakeFloatingPanel.destroy()}});return d});