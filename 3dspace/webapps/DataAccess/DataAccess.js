define("DataAccess/zxExpandTask",[],function(){var a=function(e,c){this.oid=e;this.serverdefinition=c;var g=null;this.generateMQL=function(){return this.serverdefinition.rawmode?this.generateRawMQL():this.generateProcMQL()};this.generateRawMQL=function(){var h="start transaction ;\n";h+="expand businessobject  %oid% from relationship PLMInstance recurse to all size 1000 terse select bus physicalid type select relationship id physicalid dump | tcl;\n";h+="abort transaction ;\n";return h};this.generateProcMQL=function(){var h='<?xml version="1.0" encoding="utf-8"?>\n';h+='<executeSequence xmlns="http://www.3ds.com/xmql/query">\n';h+="\t<execute>\n";h+="\t\t<function>expand_bus</function>\n";h+="\t\t<version>2.0.0</version>\n";h+="\t\t<params>\n";h+='\t\t\t<param name="label">expand</param>\n';h+='\t\t\t<param name="rootid">%oid%</param>\n';h+='\t\t\t<param name="from">true</param>\n';h+='\t\t\t<param name="to">false</param>\n';h+='\t\t\t<param name="typepattern">*</param>\n';h+='\t\t\t<param name="relpattern">PLMInstance</param>\n';h+='\t\t\t<param name="fixedpointskw"/>\n';h+='\t\t\t<param name="fixedpointsids"/>\n';h+='\t\t\t<param name="withroots"/>\n';h+='\t\t\t<param name="preventduplicates"/>\n';h+='\t\t\t<param name="recurselevel">all</param>\n';h+='\t\t\t<param name="size">1000</param>\n';h+='\t\t\t<param name="terse">true</param>\n';h+='\t\t\t<param name="selectbo">["physicalid", "type"]</param>\n';h+='\t\t\t<param name="wherebokw"/>\n';h+='\t\t\t<param name="wherebo"/>\n';h+='\t\t\t<param name="selectrel">["id","physicalid"]</param>\n';h+='\t\t\t<param name="dump">|</param>\n';h+="\t\t</params>\n";h+="\t</execute>\n";h+="</executeSequence>\n";return h};var d=this.generateMQL();this.run=function(j,k,m,h,n){g=j;console.log("running zxxMQLExpandTask");var i=c.xmqlServiceUri();var l=d.replace("%oid%",this.oid);k.executePostHttpRequest(i,c.rawmode,l,function(p){console.log("callback has been called");var o=new b(e,j,p,function(){h(this)})})};this.dataSet=function(){return g};var f=function(j,l){var k=l;var i=j;var h=new Array();this.setFatherLevel=function(o){var n=(h.length-1);if(o>n){}else{if(o<n){var m=n;while(m!=o){h.pop();m=m-1}h.pop()}}};this.lastNode=function(){return h[h.length-1]};this.pushNode=function(m){h.push(m)};this.pushNode(k.rootNode());this.registerRelationship=function(o,n){k.registerRelationship(n);var m=k.findNodeByPhysicalId(n.to.phyid);this.pushNode(m)}};var b=function(h,k,n,m){var l=new f(h,k);var i=function(r){var s=/[^\r\n]+/g;var q=-1;var o=false;var p;while(((p=s.exec(n))!==null)&&(!o)){j(p[0]);if(s.lastIndex===q){o=true}q=s.lastIndex}m()};var j=function(v){var s=/\{([^\}]*)}/g;v=v.substring(1,(v.length-1));var p=-1;var r=false;var x;var t=0;var u=new Object();u.to=new Object();var o=-1;while(((x=s.exec(v))!==null)&&(!r)){var q=x[0].substring(1,x[0].length-1);if(t===0){o=q;l.setFatherLevel(o)}else{if(t===1){u.plmtype=q}else{if(t===2){}else{if(t===3){u.to.ident=q}else{if(t===4){q=q.substring(1,q.length);u.to.phyid=q}else{if(t===5){q=q.substring(1,q.length);u.to.plmtype=q}else{if(t===6){q=q.substring(1,q.length);u.ident=q}else{if(t===7){q=q.substring(1,q.length);u.phyid=q}}}}}}}}t=t+1;if(s.lastIndex===p){isILinenfiniteLoop=true}p=s.lastIndex}var w=l.lastNode();u.from=w;l.registerRelationship(o,u)};i(n)}};return a});define("DataAccess/zxMQLSelectTaskDefinition",[],function(){var a=function(f,b,g,c){var e=f;var d=b;this.boOrRel=c;this.injectRowInto=g;this.typeRequested=function(){return e};this.attributes=function(){return d};this.marshallAsMQLListOfAttributes=function(){var j="";for(var h=0;h<d.length;h++){j=j+" "+d[h]}return j};this.marshallAsMQLListAttributesAsJSON=function(){if(d.length===0){throw"no fetch attributes selected"}return JSON.stringify(d)}};return a});define("DataAccess/zxPLMDataHelper",[],function(){var a=function(k){var b=k;var c=b.threedexpServiceUri();var g=function(){return b.rawmode?i():r()};var i=function(){var s="start transaction ;\n";s+="get checkout ticket nozip mcsurl %1 \n";s+=" store %2 \n";s+="businessobjectproxy physicalid %3 format %4 filename %5 tcl;\n";s+="abort transaction ;\n";return s};var r=function(){var s='<?xml version="1.0" encoding="utf-8"?>\n';s+='<executeSequence xmlns="http://www.3ds.com/xmql/query">\n';s+="\t<execute>\n";s+="\t\t<function>get_checkout_ticket</function>\n";s+="\t\t<version>2.1.0</version>\n";s+="\t\t<params>\n";s+='\t\t\t<param name="label">checkout</param>\n';s+='\t\t\t<param name="zip">false</param>\n';s+='\t\t\t<param name="mcsurl">%1</param>\n';s+='\t\t\t<param name="bops">[{"store": "%2", "bops": [{"physicalid": "%3", "format": "%4", "filename": "%5"}]}]</param>\n';s+="\t\t</params>\n";s+="\t</execute>\n";s+="</executeSequence>\n";return s};var o=g();this.transformSelectedSDByRoleAndFormatIntoTicketRequest=function(v,w,t,s,u){if(w.indexOf("SDv2")==0){return this.transformSelectedSDv2ByRoleAndFormatIntoTicketRequest(v,w,t,s,u)}if(w.indexOf("SDV0")==0){return this.transformSelectedSDv0ByRoleAndFormatIntoTicketRequest(v,w,t,s,u)}return"E_NOTIMPLEMENTED"};this.transformSelectedSDv0ByRoleAndFormatIntoTicketRequest=function(v,z,y,t,u){var s=d(z);var x=e(s,y,t);var w=l(v,x,u);return w};this.transformSelectedSDv2ByRoleAndFormatIntoTicketRequest=function(v,z,y,t,u){var s=h(z);var x=e(s,y,t);var w=l(v,x,u);return w};this.transformSDObjectIntoTicketRequest=function(t){if((t.persistancyname!=null)&&(t.persistancyname.length>2)){var s=n(t.phyid,t,t.storeIdentifier,t.persistancyname);return s}else{return l(t.phyid,t,t.storeIdentifier)}};this.transformSelectedSDByRoleAndFormatIntoSDObject=function(v,x,t,s,u){var w=null;if(x.indexOf("SDv2")==0){w=this.transformSelectedSDv2ByRoleAndFormatIntoSDObject(v,x,t,s,u);if(w==null){return null}w.phyid=v;w.storeIdentifier=u;return w}if(x.indexOf("SDV0")==0){w=this.transformSelectedSDv0ByRoleAndFormatIntoSDObject(v,x,t,s,u);if(w==null){return null}w.phyid=v;w.storeIdentifier=u;return w}return"E_NOTIMPLEMENTED"};this.transformSelectedSDByRoleAndFormatAndTypeLateIntoSDObjects=function(x,z,t,s,u,w){var y=null;if(z.indexOf("SDv2")==0){y=this.transformSelectedSDv2ByRoleAndFormatAndTypeLateIntoSDObjects(x,z,t,s,u,w);if(y==null){return null}for(var v=0;v<y.length;v++){y[v].phyid=x;y[v].storeIdentifier=w}return y}if(z.indexOf("SDV0")==0){}return"E_NOTIMPLEMENTED"};this.transformSelectedSDv0ByRoleAndFormatIntoSDObject=function(v,y,x,t,u){var s=d(y);var w=e(s,x,t);return w};this.transformSelectedSDv2ByRoleAndFormatIntoSDObject=function(v,y,x,t,u){var s=h(y);var w=e(s,x,t);return w};this.transformSelectedSDv2ByRoleAndFormatAndTypeLateIntoSDObjects=function(x,z,y,u,w,v){var s=h(z);var t=q(s,y,u,w);return t};var l=function(u,v,t){var w='"'+u+"_"+v.role+"."+v.format+'"';var s=o.replace("%1",c);var s=s.replace("%2",t);var s=s.replace("%3",u);var s=s.replace("%4",v.format);var s=s.replace("%5",w);return s};var n=function(w,x,u,v){var t=v.slice(1,v.length-1);var y=""+w+"_"+x.role+"."+x.format+"="+t+"";var s=o.replace("%1",c);var s=s.replace("%2",u);var s=s.replace("%3",w);var s=s.replace("%4",x.format);var s=s.replace("%5",y);return s};var e=function(u,w,s){for(var t=0;t<u.length;t++){var v=u[t];if((v.role==w)&&(v.format==s)){return v}}return null};var q=function(v,y,t,w){var s=new Array();for(var u=0;u<v.length;u++){var x=v[u];if((x.role==y)&&(x.format==t)&&(x.latetype==w)){s.push(x)}}return s};var d=function(t){var x=/[^:]+/g;var u=-1;var s=false;var w;var v=0;var y=[];while(((w=x.exec(t))!==null)&&(!s)){var z=p(w[0]);y.push(z);v=v+1;if(x.lastIndex===u){isILinenfiniteLoop=true}u=x.lastIndex}return y};var p=function(s){var t=s.slice(3,4);var u=s.slice(5,s.length-1);return j(t,u)};function j(x,t){var y=/[^,]+/g;var u=-1;var s=false;var w;var v=0;var z=new Object();z.sdtype=x;while(((w=y.exec(t))!==null)&&(!s)){if(v===0){z.format=w[0]}else{if(v===1){z.role=w[0]}else{if(v===2){z.latetype=w[0]}else{if(v===3){z.watermarkstamp=w[0]}}}}v=v+1;if(y.lastIndex===u){isILinenfiniteLoop=true}u=y.lastIndex}return z}var h=function(t){var x=/[^:]+/g;var u=-1;var s=false;var w;var v=0;var y=[];while(((w=x.exec(t))!==null)&&(!s)){var z=m(w[0]);y.push(z);v=v+1;if(x.lastIndex===u){isILinenfiniteLoop=true}u=x.lastIndex}return y};var m=function(s){var t=s.slice(3,4);var u=s.slice(5,s.length-1);return f(t,u)};function f(x,t){var y=/[^,]+/g;var u=-1;var s=false;var w;var v=0;var z=new Object();z.sdtype=x;while(((w=y.exec(t))!==null)&&(!s)){if(v===0){z.format=w[0]}else{if(v===1){z.role=w[0]}else{if(v===2){z.latetype=w[0]}else{if(v===3){z.watermarkstamp=w[0]}else{if(v===4){z.synchrostamp=w[0]}else{if(v===5){z.persistancytype=w[0]}else{if(v===6){z.persistancyname=w[0]}}}}}}}v=v+1;if(y.lastIndex===u){isILinenfiniteLoop=true}u=y.lastIndex}return z}};return a});define("DataAccess/zxTreeTarget",[],function(){var a=function(d,g){var e={};var c=d;var b=g;var f=b("Node");f.ident=c.physicalid;this.rootNode=function(){return f};this.registerRelationship=function(j){var i=this.findNodeByPhysicalId(j.phyid);i.boid=j.ident;i.id=j.phyid;i.plmtype=j.plmtype;var h=this.findNodeByPhysicalId(j.to.phyid);h.boid=j.to.ident;h.id=j.to.phyid;h.plmtype=j.to.plmtype;j.from.add(i);i.add(h)};this.countObjects=function(){var i=0;for(var h in e){if(e.hasOwnProperty(h)){i++}}return i};this.dumpObjects=function(){var i=0;for(var h in e){if(e.hasOwnProperty(h)){console.log(e[h])}}return i};this.findNodeByPhysicalId=function(h){var i=e[h];if(i===undefined){e[h]=b("Node");e[h].id=h}return e[h]};this.findNodeByType=function(i){var j=new Array();for(var h in e){if(e[h].plmtype==i){j.push(e[h])}}return j};this.findNodeByPLMTypeExpressedAsPhyIdSeparatedByComma=function(i){var j="";for(var h in e){if(e[h].plmtype==i){if(j!=""){j=j+","}j=j+e[h].id}}return j};this.findNodeByPLMTypeExpressedAsPhyIdAsJSON=function(i){var j=this.findNodeByType(i);var h=[];if(j.length>0){j.forEach(function(l,k){h.push(l.id)});return JSON.stringify(h)}else{return[]}}};return a});define("DataAccess/zxFCSPrepDownloadTaskDefinition",[],function(){var a=function(c){var b=c;this.typeRequested=function(){return b}};return a});define("DataAccess/zxDataAccessObjectFactory",[],function(){var a=function(){};a.createServerDefinition2=function(f,b,e,d){var c=new Object();if(typeof(f)==="undefined"){console.log("No Hostname in CreateServerDefinition");return null}c.hostname=f;if(typeof(b)==="undefined"){console.log("No RootUri in CreateServerDefinition");return null}c.rooturi=b;c.isSecure=false;if(typeof(e)!="undefined"){if(e){c.isSecure=true}}c.port=-1;if(typeof(d)!="undefined"){c.port=d}c.xmqlServiceUri=function(){var h="http://";if(this.isSecure){h="https://"}var g=h+this.hostname;if(this.port!=-1){g+=":"+this.port}g+="/"+this.rooturi+"/i3dx/services/xmql?raw=true";return g};c.threedexpServiceUri=function(){var h="http://";if(this.isSecure){h="https://"}var g=h+this.hostname;if(this.port!=-1){g+=":"+this.port}g+="/"+this.rooturi;return g};return c};a.createServerDefinition=function(e,d,b){var c=new Object();c.hostname=e;c.port=d;c.rooturi=b;c.xmqlServiceUri=function(){return"http://"+this.hostname+":"+this.port+"/"+this.rooturi+"/i3dx/services/xmql?raw=true"};c.threedexpServiceUri=function(){return"http://"+this.hostname+":"+this.port+"/"+this.rooturi};return c};a.createDisplayObjectSpecification=function(c,d){var b=new Object();b.physicalid=c;b.serverdefinition=d;return b};a.createDisplayObjectSpecification2=function(c,d){var b=new Object();b.physicalid=c.identifier;b.use=c.use;b.serverdefinition=d;return b};a.createSimLWObjectSpecification=function(c,d){var b=new Object();b.physicalid=c;b.serverdefinition=d;return b};return a});define("DataAccess/zxNode",[],function(){var a=function(){this.add=function(b){}};return a});define("DataAccess/zxXHRWithProxyAbstraction",["DS/DataAccess/zxXHRWithProxyAbstraction"],function(a){console.info("This module is deprecateed. use DS/DataAccess/zxXHRWithProxyAbstraction instead of DataAccess/zxXHRWithProxyAbstraction");return a});define("DS/DataAccess/zxXHRWithProxyAbstraction",["UWA/Core","UWA/Data","UWA/Utils","UWA/Utils/Client","UWA/Ajax","UWA/Json","DS/WAFData/WAFData"],function(h,e,f,g,d,c,a){var b=function(){this.executeGetHttpRequest=function(k,p,m,o){if(b.proxyUsage===2){console.log("gestion WAFData");var j=new Object();j.headers=new Object();j.data=new Object();j.data.GET=m;j.method="GET";j.async=true;j.onComplete=o;j.type=p;var l=a.authenticatedRequest(k,j)}else{if(b.proxyUsage===1){k=i(k,b.server,b.sport)}var n=new XMLHttpRequest();n.open("GET",k,true);n.onload=function(q){o(this.response)};n.setRequestHeader("X-Requested-With","XMLHttpRequest");if(p==="arraybuffer"){n.responseType=p}n.send(m)}};this.executePostHttpRequest=function(k,p,o,n){if(b.proxyUsage==2){console.log("gestion WAFData");var j={timeout:100000,method:"POST",data:o,type:"text",headers:{"Content-type":p,Accept:"text/plain"},onComplete:n,onFailure:function(q){h.log("arguments onFailure");h.log(arguments)}};if(b.proxymode){j.proxy=b.proxymode}var l=a.authenticatedRequest(k,j)}else{if(b.proxyUsage==1){k=i(k,b.server,b.sport)}var m=new XMLHttpRequest();m.open("POST",k);m.onload=function(q){n(this.response)};m.setRequestHeader("Content-type",p);m.setRequestHeader("Accept","text/plain");m.send(o)}};this.executePostHttpRequest2=function(l,q,p,o,k){if(b.proxyUsage==2){console.log("gestion WAFData");var j={timeout:100000,method:"POST",data:p,type:"text",headers:{"Content-type":q,Accept:"text/plain",},onComplete:o,onFailure:function(r){h.log("arguments onFailure");h.log(arguments)}};if(k.responseType!=null){j.type=k.responseType}if(b.proxymode){j.proxy=b.proxymode}var m=a.authenticatedRequest(l,j)}else{if(b.proxyUsage==1){l=i(l,b.server,b.sport)}var n=new XMLHttpRequest();n.open("POST",l);n.onload=function(r){o(this.response)};n.setRequestHeader("Content-type",q);n.setRequestHeader("Accept","text/plain");if(k.responseType!=null){n.responseType=k.responseType}n.send(p)}};this.executeSyncPostHttpRequest=function(l,p,o){if(b.proxyUsage==2){console.log("gestion WAFData");var j;var k={timeout:100000,method:"POST",data:o,type:"text",async:false,headers:{"Content-type":p,Accept:"text/plain",},onComplete:function(q){console.warn("retour >data",q);j=q},onFailure:function(q){console.log("arguments onFailure");console.log(arguments)}};if(b.proxymode){k.proxy=b.proxymode}var m=a.authenticatedRequest(l,k);return j}else{if(b.proxyUsage==1){l=i(l,b.server,b.sport)}var n=new XMLHttpRequest();n.open("POST",l,false);n.setRequestHeader("Content-type",p);n.setRequestHeader("Accept","text/plain");n.send(o);return n.responseText}return""};this.transformUrlIntoRealUrl=function(k){if(b.proxyUsage==2){console.log("gestion WAFData");var j=new Object();return k}else{if(b.proxyUsage==1){k=i(k,b.server,b.sport);return k}}return k};this.asyncTransformFCSUrlIntoRealUrl=function(k,j,p){var l=k.indexOf("v23");var m=k.slice(3,l);var n=k.slice(l+3,k.length);var o="application/xml";if(typeof(j)==="boolean"&&j){o="application/xmql"}this.executePostHttpRequest(m,o,n,function(s){var w=/\{\{([^\}]*)\}\{([^\}]*)\}\}/;var u=w.exec(s);var t=u[1];var v=u[2];var q=v;var r="posthttp:"+q+":postparams:__fcs__jobTicket="+encodeURIComponent(t);p(r)})};var i=function(l,m,k){var j=l.indexOf("/");var o=l.indexOf("/",j+2);var n=l.slice(0,j)+"//"+m+":"+k+l.slice(o,l.length);return n}};b.useNoProxy=function(){b.proxyUsage=0;b.server=null;b.sport=null};b.useProxyDefinedBy=function(j,i){b.proxyUsage=1;b.server=j;b.sport=i};b.useUWAProxy=function(i){b.proxyUsage=2;b.server=null;b.sport=null;b.proxymode=i};return b});define("DataAccess/zxTaskPlanner",[],function(){var a=function(){var c=new Array();var b=0;var d=null;this.addSequentialTask=function(f){var e=new Array();e.push(f);c.push(e)};this.addEndingTask=function(e){d=e};this.endingTask=function(){return d};this.next=function(){if(b<c.length){b=b+1;return c[b-1]}return null};this.resetIterator=function(){b=0};this.tasksCount=function(){return c.length};this.currentTaskIndex=function(){return b}};return a});define("DataAccess/zxTicketGeneratorTask",[],function(){var a=function(b,c){var d=b;var e=c;this.generateUrl=function(){var f=e.xmqlServiceUri();var g="fcs"+f+"v23"+d;return g}};return a});define("DataAccess/zxStreamUnStreamerTaskDefinition",[],function(){var a=function(c,e,d){var b=c;this.streamReceived=e;this.streamNumber=d;this.responseType=null;this.typeRequested=function(){return b}};return a});define("DataAccess/zxSelectTask",[],function(){var a=function(d,i){var j=d;var f=null;var b=i;var c=function(n,o,s,r){var q=n;var p=o;var l=function(w){var x=/[^\r\n]+/g;var v=-1;var t=false;var u;while(((u=x.exec(s))!==null)&&(!t)){m(q,u[0]);if(x.lastIndex===v){t=true}v=x.lastIndex}r()};var m=function(A,u){var z=/\{([^\}]*)}/g;u=u.substring(1,(u.length-1));var w=-1;var t=false;var y;var x=0;var v=new Array();while(((y=z.exec(u))!==null)&&(!t)){if(y[0].indexOf("{{")==0){y[0]=y[0].substring(2,y[0].length)}if(y[0].indexOf("{")==0){y[0]=y[0].substring(1,y[0].length)}if(y[0].indexOf("}")==(y[0].length-1)){y[0]=y[0].substring(0,y[0].length-1)}v.push(y[0]);x=x+1;if(z.lastIndex===w){isILinenfiniteLoop=true}w=z.lastIndex}q.injectRowInto(v,p)};l(s)};var e=function(){return b.rawmode?g():k()};var g=function(){var l="start transaction ;\n";if(j.boOrRel==0){l+="query connection type %1  where \"physicalid matchlist '%2'','\"  select %3 dump | tcl;\n"}else{l+="temporary query businessobject  %1 * *  where \"physicalid matchlist '%2'','\"  select %3 dump | tcl;\n"}l+="abort transaction ;\n";return l};var k=function(){var l='<?xml version="1.0" encoding="utf-8"?>\n';l+='<executeSequence xmlns="http://www.3ds.com/xmql/query">\n';l+="\t<execute>\n";if(j.boOrRel==0){l+="\t\t<function>query_connection</function>\n"}else{l+="\t\t<function>query_bus</function>\n"}l+="\t\t<version>2.2.1</version>\n";l+="\t\t<params>\n";l+='\t\t\t<param name="label">select</param>\n';if(j.boOrRel!=0){l+='\t\t\t<param name="name">*</param>\n';l+='\t\t\t<param name="revision">*</param>\n'}l+='\t\t\t<param name="vault">*</param>\n';l+='\t\t\t<param name="orderbykw"/>\n';l+='\t\t\t<param name="orderby"/>\n';l+='\t\t\t<param name="limitkw"/>\n';l+='\t\t\t<param name="limit"/>\n';l+='\t\t\t<param name="rootids">[]</param>\n';l+="\t\t\t<param name=\"where\">physicalid matchlist '%2'','</param>\n";l+='\t\t\t<param name="select">%3</param>\n';l+='\t\t\t<param name="type">%1</param>\n';l+='\t\t\t<param name="notsubstitute">false</param>\n';l+='\t\t\t<param name="dump">|</param>\n';l+="\t\t</params>\n";l+="\t</execute>\n";l+="</executeSequence>\n";return l};var h=e();this.run=function(r,o,q,t,s){f=r;var m=b.xmqlServiceUri();var l=j.typeRequested();var n=r.findNodeByPLMTypeExpressedAsPhyIdAsJSON(l);var p=h.replace("%1",l);p=p.replace("%4",n);p=p.replace("%3",j.marshallAsMQLListAttributesAsJSON());p=p.replace("%2",r.findNodeByPLMTypeExpressedAsPhyIdSeparatedByComma(j.typeRequested()));o.executePostHttpRequest(m,b.rawmode,p,function(v){var u=new c(j,r,v,function(){t(this)})})}};return a});define("DataAccess/zxPlanRunner",["DS/DataAccess/zxXHRWithProxyAbstraction"],function(a){var b=function(h,d,g,n,m){var l=function(){this.executePostHttpRequest=function(q,o,t,s){var p=new a();var r="application/xml";if(typeof(o)==="boolean"&&o){r="application/xmql"}p.executePostHttpRequest(q,r,t,s)}};var f=d;var k=h;var j=new l();var i=n;var c=function(o){if(g!==null){var p=(h.currentTaskIndex()/h.tasksCount())*100;g(p)}console.log("onNextTask");var q=h.next();if(q==null){e()}else{q[0].run(f,j,g,c,m)}};var e=function(){console.log("----------------Finished-------->");var o=(h.endingTask())(f);n(o)};this.executePlan=function(){console.log("Beginning zxPlanRunner runPlan");var o=k.next();o[0].run(f,j,null,c,null);console.log("Ending zxPlanRunner runPlan")}};return b});define("DataAccess/zxStreamUnstreamerTask",["DS/DataAccess/zxXHRWithProxyAbstraction"],function(a){var b=function(f,c){var e=f;var d=c;this.run=function(u,h,r,w,v){var t=new a();var s=u.findNodeByType(e.typeRequested());for(var o=0;o<s.length;o++){var g=new Array();if(s[o].ticketRequest!=null){g.push(s[o].ticketRequest)}else{if(s[o].ticketRequests!=null){var m=s[o].ticketRequests;for(var n=0;n<m.length;n++){g.push(m[n])}}}e.streamNumber(g.length);if(!window.ODTNoFCSCalls){var q=g.length;for(var l=0;l<g.length;l++){var p=g[l].generateUrl();t.asyncTransformFCSUrlIntoRealUrl(p,d.rawmode,function(k){if(k.slice(0,8)=="posthttp"){var i=k.indexOf(":postparams:");var y=k.slice(9,i);var x=k.slice(i+12,k.length);var j=new Object();if(e.responseType!=null){console.log("registering otherParams reponsetype "+e.responseType);j.responseType=e.responseType}t.executePostHttpRequest2(y,"application/x-www-form-urlencoded",x,function(z){e.streamReceived(z);q=q-1;if(q==0){w(this)}},j)}})}}if(window.ODTNoFCSCalls||g.length===0){w(this)}}}};return b});define("DataAccess/zxFCSPrepDownloadTask",["DataAccess/zxPLMDataHelper","DataAccess/zxTicketGeneratorTask"],function(b,a){var c=function(h,d){var g=h;var f=d;var e=null;this.run=function(v,m,t,y,x){e=v;var w=new b(f);var l=f.xmqlServiceUri();var k=g.typeRequested();var u=e.findNodeByType(k);for(var r=0;r<u.length;r++){if(u[r].sdObject!=null){var o=w.transformSDObjectIntoTicketRequest(u[r].sdObject);u[r].ticketRequest=new a(o,f)}else{if(u[r].sdObjects!=null){var p=u[r].sdObjects;var n=new Array();for(var q=0;q<p.length;q++){var o=w.transformSDObjectIntoTicketRequest(p[q]);var s=new a(o,f);n.push(s)}u[r].ticketRequests=n}}}y(this)}};return c});define("DataAccess/zxDOSRunner",["DataAccess/zxTreeTarget","DataAccess/zxPlanRunner","DataAccess/zxTaskPlanner","DataAccess/zxExpandTask","DataAccess/zxMQLSelectTaskDefinition","DataAccess/zxSelectTask","DataAccess/zxPLMDataHelper","DataAccess/zxTicketGeneratorTask","DataAccess/zxFCSPrepDownloadTaskDefinition","DataAccess/zxFCSPrepDownloadTask","DataAccess/zxStreamUnStreamerTaskDefinition","DataAccess/zxStreamUnstreamerTask"],function(i,a,d,k,e,c,f,j,g,b,n,m){function h(p){var o=new Object();if(typeof(p.serverdefinition.hostname)==="undefined"){return null}o.hostname=p.serverdefinition.hostname;if(typeof(p.serverdefinition.rooturi)==="undefined"){return null}o.rooturi=p.serverdefinition.rooturi;o.isSecure=false;if(typeof(p.serverdefinition.protocol)!="undefined"){if(p.serverdefinition.protocol==="https"){o.isSecure=true}}o.port=-1;if(typeof(p.serverdefinition.port)!="undefined"){o.port=p.serverdefinition.port}o.rawmode=false;o.xmqlServiceUri=function(){var r="http://";if(this.isSecure){r="https://"}var q=r+this.hostname;if(this.port!=-1){q+=":"+this.port}q+="/"+this.rooturi+"/i3dx/services/xmql";if(typeof(o.rawmode)==="boolean"&&o.rawmode){q+="?raw=true"}return q};o.threedexpServiceUri=function(){var r="http://";if(this.isSecure){r="https://"}var q=r+this.hostname;if(this.port!=-1){q+=":"+this.port}q+="/"+this.rooturi;return q};p.serverdefinition=o;return p}var l=function(o,q){var r=h(o);var s=new i(r,q);var t=null;var u=null;var w=null;var v=q;this.run=function(B,z,C){t=B;u=z;w=C;var A=new p();var y=A.buildPlan(r);var x=new a(y,s,t,u,w);x.executePlan()};var p=function(){this.buildPlan=function(S){console.log("--->zxDOSPlanifier:Beginning BuildPlan");var z=new d();var H=new k(S.physicalid,S.serverdefinition);z.addSequentialTask(H);var A=new Array();A.push("physicalid");A.push("attribute[LPAbstractInstance.V_matrix_1]");A.push("attribute[LPAbstractInstance.V_matrix_2]");A.push("attribute[LPAbstractInstance.V_matrix_3]");A.push("attribute[LPAbstractInstance.V_matrix_4]");A.push("attribute[LPAbstractInstance.V_matrix_5]");A.push("attribute[LPAbstractInstance.V_matrix_6]");A.push("attribute[LPAbstractInstance.V_matrix_7]");A.push("attribute[LPAbstractInstance.V_matrix_8]");A.push("attribute[LPAbstractInstance.V_matrix_9]");A.push("attribute[LPAbstractInstance.V_matrix_10]");A.push("attribute[LPAbstractInstance.V_matrix_11]");A.push("attribute[LPAbstractInstance.V_matrix_12]");var N=function(V,W){var U=W.findNodeByPhysicalId(V[1]);var T=v("Matrix");T.set(V[2],V[5],V[8],V[11]*1000,V[3],V[6],V[8],V[12]*1000,V[4],V[7],V[10],V[13]*1000,0,0,0,1);U.setMatrix(T)};var D=new e("VPMInstance",A,N,0);var L=new c(D,S.serverdefinition);z.addSequentialTask(L);var E=new Array();E.push("physicalid");E.push("attribute[StreamDescriptors]");E.push("format.file.store");var R=new f(S.serverdefinition);var Q=function(U,W){var T=W.findNodeByPhysicalId(U[3]);var V=R.transformSelectedSDByRoleAndFormatIntoSDObject(U[3],U[4],"''","2",U[5]);T.sdObject=V};var J=new e("3DShape",E,Q,1);var I=new c(J,S.serverdefinition);z.addSequentialTask(I);var P=new g("3DShape");var F=new b(P,S.serverdefinition);z.addSequentialTask(F);var O=function(T,U){};if(S.use=="Structure.Review"){var O=function(U,W){var T=W.findNodeByPhysicalId(U[3]);var V=R.transformSelectedSDByRoleAndFormatIntoSDObject(U[3],U[4],"''","1",U[5]);T.sdObject=V};var y=new e("Review",E,O,1);var B=new c(y,S.serverdefinition);z.addSequentialTask(B);var x=new g("Review");var G=new b(x,S.serverdefinition);z.addSequentialTask(G);var C=new n("Review",function(T){console.log("Specs::blob received length of "+T.length)},function(T){console.log("Specs::numberTotalOfStreams To receive:"+T)});var K=new m(C,S.serverdefinition);z.addSequentialTask(K)}var M=function(V){var T=V.rootNode();var U=V.findNodeByType("3DShape");return{rootNode:T,geometryNodes:U}};z.addEndingTask(M);console.log("--->zxDOSPlanifier:Beginning BuildPlan Done");return z}}};return l});define("DataAccess/zxSimuliaLightweightRunner",["DS/DataAccess/zxSimuliaLightweightRunner"],function(a){console.info("This module is deprecateed. use DS/DataAccess/zxSimuliaLightweightRunner instead of DataAccess/zxSimuliaLightweightRunner");return a});define("DS/DataAccess/zxSimuliaLightweightRunner",["DataAccess/zxTaskPlanner","DataAccess/zxPlanRunner","DataAccess/zxTreeTarget","DataAccess/zxExpandTask","DataAccess/zxNode","DataAccess/zxMQLSelectTaskDefinition","DataAccess/zxSelectTask","DataAccess/zxPLMDataHelper","DataAccess/zxFCSPrepDownloadTaskDefinition","DataAccess/zxFCSPrepDownloadTask","DataAccess/zxStreamUnStreamerTaskDefinition","DataAccess/zxStreamUnstreamerTask","DS/VisuDataAccess/Ox4TypeHelper"],function(d,a,i,k,l,e,c,f,g,b,o,m,n){function h(q){var p=new Object();if(typeof(q.serverdefinition.hostname)==="undefined"){return null}p.hostname=q.serverdefinition.hostname;if(typeof(q.serverdefinition.rooturi)==="undefined"){return null}p.rooturi=q.serverdefinition.rooturi;p.isSecure=false;if(typeof(q.serverdefinition.protocol)!="undefined"){if(q.serverdefinition.protocol==="https"){p.isSecure=true}}p.port=-1;if(typeof(q.serverdefinition.port)!="undefined"){p.port=q.serverdefinition.port}p.rawmode=false;p.xmqlServiceUri=function(){var s="http://";if(this.isSecure){s="https://"}var r=s+this.hostname;if(this.port!=-1){r+=":"+this.port}r+="/"+this.rooturi+"/i3dx/services/xmql";if(typeof q.tenant==="string"){r+="?tenant="+q.tenant}if(typeof(p.rawmode)==="boolean"&&p.rawmode){r+="?raw=true"}return r};p.threedexpServiceUri=function(){var s="http://";if(this.isSecure){s="https://"}var r=s+this.hostname;if(this.port!=-1){r+=":"+this.port}r+="/"+this.rooturi;return r};q.serverdefinition=p;return q}var j=function(q,D,s,u){var r=q.serverurl;if(!r){var t=q.serverdefinition.port;r=q.serverdefinition.protocol+"://"+q.serverdefinition.hostname+(t?":"+t:"")+"/"+q.serverdefinition.rooturi}n.InitWithUrl(r,q.tenant,q.requiredAuth,q.proxyurl);var w=h(q);var y=null;var z=null;var C=null;var p=D;var A=u;var v=s;var x=new i(w,function(E){if(E==="Node"){return new l()}});this.run=function(G,E,H){console.log("---> Entering zxSimLWRunner");y=G;z=E;C=H;var F=new B();F.buildPlan(w,function(J){if(J!==null){var I=new a(J,x,y,z,C);I.executePlan()}else{C({msg:"Connection failed"})}})};var B=function(){this.buildPlan=function(E,F){console.log("--->zxSimLWTaskPlanner:Beginning BuildPlan");console.log(E);console.log(E.physicalid);n.GetParentsBusType("DesignSight",function(L){if(L){var N=new d();var K=new k(E.physicalid,E.serverdefinition);N.addSequentialTask(K);var S=new Array();S.push("physicalid");S.push("attribute[StreamDescriptors]");S.push("format.file.store");var O=new f(E.serverdefinition);var G=function(V,Y){var U=Y.findNodeByPhysicalId(V[3]);var X=O.transformSelectedSDByRoleAndFormatAndTypeLateIntoSDObjects(V[3],V[4],"'EXTENDED'","2","CATNonCATIADocument",V[5]);var W=new Array();for(var T=0;T<X.length;T++){if(p(X[T].persistancyname)){W.push(X[T])}}U.sdObjects=W};var P=new e("dsc_Result_Rep",S,G,1);var J=new c(P,E.serverdefinition);N.addSequentialTask(J);var R=new g("dsc_Result_Rep");var I=new b(R,E.serverdefinition);N.addSequentialTask(I);var M=new o("dsc_Result_Rep",A,v);M.responseType="arraybuffer";var H=new m(M,E.serverdefinition);N.addSequentialTask(H);var Q=function(V){var T=null;var U=null;return{rootNode:T,geometryNodes:U}};N.addEndingTask(Q);console.log("--->zxSimLWRunner:Beginning BuildPlan Done");F(N)}else{F(null)}})}}};return j});