define("DS/LifecycleControls/EditPropDialog",["UWA/Class","DS/ApplicationFrame/Command",],function(b,a){var c="DS/CfgAuthoringContextUX/scripts/CfgAuthoringContext";var d=a.extend({defaultIsTransient:false,extraNotif:false,mergeSupport:true,init:function(e,f){this._parent(e,f);require([c]);this.editProp=null},beginExecute:function(){},_launchTransientWidget:function(e,f){window.top.performance.mark("end_EP_SelectionTreatment");window.top.performance.mark("start_EP_TransientLoaded");if(window.top.isDebug===true){console.log("Launch transient "+window.top.performance.now())}e.showWidget("ENOLCMT_AP","ENOVIA - Properties ",f,{mode:"panel",height:800,width:650})},launchProperties:function(g){window.top.performance.mark("start_EP_FullTime");window.top.performance.mark("start_ExecuteAndLoadCommand");var m=null;if(widget&&widget.getValue("debug_me")==="1"){var n=[];var f=window.top.performance.getEntriesByType("mark");for(var k=0;k<f.length;k++){var j=f[k].name;var e=j.replace("start_","").replace("end_","");if(j!==e){n.push(j)}}n.forEach(function(i){window.top.performance.clearMarks(i)})}var l=this;var h=false;if(widget){widget.setValue("index_mode",false);h=widget.getValue("index_mode")}require(["DS/WidgetServices/securityContextServices/SecurityContextServices","DS/EditPropWidget/models/EditPropModelMerge","DS/EditPropWidget/models/EditPropModel","DS/EditPropWidget/utils/EditPropUtils","DS/EditPropWidget/constants/ConstantsMapping","DS/EditPropWidget/ajaxRequests/ServicesAjaxRequests","DS/WidgetServices/WidgetServices","DS/TransientWidget/TransientWidget"],function(q,v,p,w,D,A,C,r){window.top.performance.mark("end_ExecuteAndLoadCommand");window.top.performance.mark("start_EP_SelectionTreatment");var z=l.mergeSupport;var y={context:g};var i=[];var u=[];var o=g.model;if(!o||!o.objectId){i=g.getSelectedNodes()}else{if(o.tenant){y.tenant=o.tenant}if(o.source){y.source=o.source}u.push(new p(o))}q.getInstance(y).getSecurityContext();if(i.length){i.forEach(function(F){var E=w.getModelFromSelectedNode(F);if(E){u.push(E)}})}var t=C.getWidgetValue("editProperties_readOnly");if(u.length>0){var B=u[0];if(!z){u=[B]}u=C.removeDuplicate(u,function(E){return E.get("objectId")});var s=l.defaultIsTransient;if(typeof g.isTransient==="function"){s=g.isTransient()}s=s===true||C.isTransientWidget();if(s===false&&!C.isWebInWinEnvironment()&&!C.isNatifEnvironnement()){var x=function(P){var G=window.top.document.body.getElementsByClassName("preview-container")[0];var S=false;if(G){var E=G.getElement(".moduleContent");if(E){var J=E.className;if(J.indexOf("EditPropWidget")>=0){S=true;G.show();var T={};if(P){T.securityContext=P.SecurityContext}require(["DS/WidgetServices/commandProxy/CommandProxy"],function(U){U.publishUpdate(u,T)})}}}if(S===false){var I=null;if(u&&u.length>0){I=u[0]}var K=D.getServiceForModel(I);var L=!((I&&I.isTransient===true)||K.modelNeeded===true);var H=[];u.forEach(function(U){H.push(U.toJSON())});var T={SelectedItem:H,x3dPlatformId:A.getTenantFromModel(I),isTransient:"true",loadData:true,asynchronousRequest:L,index_mode:C.getWidgetValue("index_mode")};if(P&&P.SecurityContext){T.securityContext=P.SecurityContext}if(t!==undefined){T.readOnly=t}if(h){T.readOnly=true}if(L){var Q=u.length>1;if(Q){var O=C.generateUniqueId();T.transactionId=O;var R=u[0];var M=UWA.clone(R.getOptions());M.objectId=O;var N={};u.forEach(function(U){N[U.get("objectId")]=U});var F=new v(M);F.setMergingModels(N);u=[F]}require(["DS/EditPropWidget/comm/DistantAjax","DS/EditPropWidget/constants/ConstantsMapping"],function(V,W){V.launchMainRead(u,T);V.getServices(T.x3dPlatformId);V.getRoles(T.x3dPlatformId);var Y=W.getDefaultFacets(Q,true);var X=[];Y.forEach(function(aa){if(aa){var Z=aa;if(aa.facet){Z=aa.facet.name}X.push({name:Z,inheritance:aa.inheritance})}});var U=null;if(u&&u.length>0){U=u[0]}V.launchFacetsVisibility(U,X,{context:g},true)})}if(C.isChangeAvailable()){require(["DS/EditPropWidget/changeAction/passThruJS"],function(U){U.onReady(function(V){V.get2(function(W){if(typeof V.changeIsSetChecker==="function"){if(V.changeIsSetChecker(W)){T.changeControl=W}}l._launchTransientWidget(r,T)})})},function(){l._launchTransientWidget(r,T)})}else{l._launchTransientWidget(r,T)}}};q.getSecurityContext({onSuccess:x,onFailure:function(){x(null)}})}else{require(["DS/EditPropWidget/EditPropComponent","DS/EditPropWidget/constants/EditPropConstants"],function(L,G){if(l.editProp==null){var J=function(){};var I=false;var H=C.getWidgetPreference("editProperties_editMode");if(H===undefined){var E={type:"hidden",name:"editProperties_editMode",label:"editProperties_editMode",defaultValue:I};C.addWidgetPreference(E)}H=H?H.value:I;var K=false;if(h){K="true";H=false}else{if(t!==undefined){K=t}}var F=C.getWidgetBody();F=F?F:UWA.extend(document.body);l.editProp=new L({className:"editProp_popup_fromCmd",readOnly:K,editMode:H,context:g,displayType:G.POPUP,container:F,extraNotif:l.extraNotif,events:{onCancel:function(){if(J){C.addWidgetResizeEvent(J)}l.editProp=null}}});l.editProp.show(u);C.removeWidgetResizeEvent(J)}else{l.editProp.centerIt()}})}}else{l._setError(g,UWA.i18n("no content selected"))}l.end()})},_setError:function(f,g){if(typeof f.displayNotification==="function"){var e={eventID:"error",msg:g};f.displayNotification(e)}else{alert(g)}},endExecute:function(){}});return d});define("DS/LifecycleControls/ProgressDialog",["UWA/Controls/Abstract","UWA/Core","DS/UIKIT/Mask","css!DS/LifecycleControls/LifecycleControls"],function(c,b,a){return c.extend({showDelay:function(d,g,e){var f=this;this.timer=setTimeout(function(){f.timer=null;f._createProgress(d,g)},e)},close:function(){if(this.timer){clearTimeout(this.timer);this.timer=null}if(this.progressContainer){this.progressContainer.remove();this.progressContainer=null}},_createProgress:function(d,i){this.progressContainer=b.createElement("div",{"class":"lcm-progress-container"});var e=b.createElement("span",{"class":"progress-icon-container"});e.inject(this.progressContainer);var f=b.createElement("div",{"class":"progress-icon"});f.inject(e);var h=b.createElement("span",{"class":"progress-msg"});h.innerHTML=i;h.inject(this.progressContainer);this.progressContainer.inject(d);a.mask(f,"");var g=this.progressContainer;this.progressContainer.remove=function(){d.removeChild(g)}}})});define("DS/LifecycleControls/DelayedMask",["UWA/Controls/Abstract","DS/UIKIT/Mask"],function(b,a){return b.extend({timer:null,element:null,init:function(e,d,f){if(!e){return}this.element=e;var c=this;this.timer=setTimeout(function(){c.timer=null;a.mask(c.element,f)},d)},unmask:function(){if(!this.element){return}if(this.timer){clearTimeout(this.timer);this.timer=null}a.unmask(this.element);this.element=null}})});define("DS/LifecycleControls/Assembly3DViewer",["UWA/Controls/Abstract","DS/LifecycleServices/LifecycleServicesSettings","UWA/Utils/InterCom","DS/Core/Events"],function(e,c,a,b){var d=e.extend({init:function(i,h){var g=this;this._parent({});this.isViewerReady=false;this.lang=h;this.tenant=i;this.bufferedModels=null;this.bufferedActiveModel=null;this.pad3dViewerLoaded=false;window.onPAD3DViewerLoaded=this.onPAD3DViewerLoaded;var f=Date.now().toString();this.id="assembly3dviewer_"+f;this.cmdQueue=[];this.listenFrameEvents();this.buildUI();this.onReadyCallback=null;this.onLoadCallback=null;this.onLoadFailCallback=null;b.subscribe({event:"ENOLifecycleSnapshotsHighlightOccurrencesInViewer"},function(j){g.postCommand("highlight",j)})},load:function(f){this.postCommand("load",f)},clear:function(){this.postCommand("clear")},destroy:function(){this.postCommand("destroy")},postCommand:function(g,h){var f={cmd:g,params:h};if(this.isViewerReady==false){this.cmdQueue.push(f)}else{this.iframe.contentWindow.postMessage(f,"*")}},buildUI:function(){this.iframe=UWA.createElement("iframe");this.iframe.src=c.get3DSpaceWSUrl(this.tenant,"/webapps/LifecycleControls/Assembly3DViewerImpl.html","id="+this.id+"&lang="+widget.lang);this.iframe.className="CGRViewerWidget";this.iframe.width="100%";this.iframe.height="100%";this.iframe.style.border="0px";this.elements.container=this.iframe;this.htmlUnloaded=true},onPAD3DViewerLoaded:function(){this.pad3dViewerLoaded=true;this.loadBufferedModels();this.showBufferedModel()},listenFrameEvents:function(){var f=this;window.addEventListener("message",function(h){var i=h.data;var g=i.eventName;var j=i.params;f.onEvent(g,j)},false)},onEvent:function(f,g){switch(f){case"onSelect":this.onSelect(g);break;case"onReady":this.onReady();break;case"onHtmlLoad":this.onHtmlLoad();break;case"onHtmlUnload":this.onHtmlUnload();break;case"onLoad":if(this.onLoadCallback!=null){this.onLoadCallback()}break;case"onLoadFail":if(this.onLoadFailCallback!=null){this.onLoadFailCallback()}break}},onHtmlLoad:function(){},onHtmlUnload:function(){this.htmlUnloaded=true},onReady:function(){this.isViewerReady=true;var h=this.cmdQueue.length;for(var f=0;f<h;f++){var g=this.cmdQueue[f];this.iframe.contentWindow.postMessage(g,"*")}this.cmdQueue=[];if(this.onReadyCallback!=null){this.onReadyCallback()}},onSelect:function(f){console.log("Selected occurenceID List: "+f.toString());b.publish({event:"ENOLifecycleSnapshotsSelectOccurrencesInTree",data:f})},loadBufferedModels:function(){if(this.pad3dViewerLoaded==true&&this.iframe.contentWindow!=null){this.iframe.contentWindow.loadModels(this.bufferedModels)}},showBufferedModel:function(){if(this.pad3dViewerLoaded==true&&this.iframe.contentWindow!=null){this.iframe.contentWindow.showModel(this.bufferedActiveModel)}}});return d});define("DS/LifecycleControls/ChooseAttributes",["UWA/Class","UWA/Core","DS/UIKIT/SuperModal","i18n!DS/UIKIT/assets/nls/UIKIT","i18n!DS/LifecycleControls/assets/nls/CommandDialog","css!DS/LifecycleControls/assets/styles/LifecycleModals"],function(c,g,a,b,f,d){var e=c.singleton({init:function(){this._parent({})},showDialog:function(s){var k=this;var o=s.parent;var n=s.title;var i=s.allAttributes;var p=s.onOk;var l=s.onShow;var q=new a({closable:true,className:"Lifecycle_Modals",events:{onShow:function(){if(l!=null){l(k)}}},renderTo:o});var m=f.okButton;var r=f.cancelButton;var j=this.buildDialogBody(i);q.dialog({body:j,title:n,buttons:[{className:"primary",value:m,action:function(u){u.hide();var t=k.getSelectedAttributes();p(t)}},{value:r,action:function(t){t.hide()}}]});if(q&&q.modals&&q.modals.current&&q.modals.current.elements){var h=(q.modals.current.elements.header)?q.modals.current.elements.header.getElement(".close.fonticon.fonticon-cancel"):null;if(h){h.setText("\u00D7");h.removeClassName("fonticon");h.removeClassName("fonticon-cancel");h.setAttributes({title:b.close})}if(q.modals.current.elements.closeTooltip&&q.modals.current.elements.closeTooltip.elements){q.modals.current.elements.closeTooltip.elements.container.addClassName("hideDefaultTooltip")}}},getSelectedAttributes:function(){var h=[];var l=this.checkboxes.length;for(var j=0;j<l;j++){var k=this.checkboxes[j];if(k.checked){h.push(k.id)}}return h},buildDialogBody:function(k){var j=g.createElement("div",{styles:{position:"relative",height:"100%",overflow:"auto"}});var o=k.length;this.checkboxes=[];for(var m=0;m<o;m++){var h=k[m];var l=h.isSelected;if(l){this.addItem(j,h)}}for(var m=0;m<o;m++){var h=k[m];var l=h.isSelected;if(!l){this.addItem(j,h)}}return j},addItem:function(i,h){var o=g.createElement("div",{styles:{width:"100%",overflow:"hidden"}});var n=g.createElement("input");this.checkboxes.push(n);n.type="checkbox";var l=h.name;var m=h.displayName;var k=h.isSelected;n.id=l;n.checked=k;var j=g.createElement("label",{styles:{"font-weight":"inherit","margin-left":"4px","margin-bottom":"5px",display:"inline-block"}});if(h.disabled===true){n.disabled=true}j.htmlFor=l;j.innerHTML=m;n.inject(o);j.inject(o);o.inject(i)}});return e});define("DS/LifecycleControls/ResizeMonitor",["UWA/Controls/Abstract","DS/LifecycleServices/EventHandler"],function(c,a){var b=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(d){return window.setTimeout(d,20)};return c.extend({addMonitor:function(e,l){e.resizeMonEvents=e.resizeMonEvents||[];if(e.resizeMon){e.resizeMon.cb.push(l);return}e.resizeMon={el:document.createElement("div"),cb:[]};e.resizeMon.cb.push(l);var n="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;";var m="position: absolute; left: 0; top: 0; transition: 0s;";e.resizeMon.el.style.cssText=n;e.resizeMon.el.innerHTML='<div style="'+n+'"><div style="'+m+'"></div></div><div style="'+n+'"><div style="'+m+' width: 200%; height: 200%"></div></div>';e.appendChild(e.resizeMon.el);if(e.resizeMon.el.offsetParent!==e){e.style.position="relative"}var d=e.resizeMon.el.childNodes[0];var g=e.resizeMon.el.childNodes[1];var o,j,f=0;var i=function(){d.childNodes[0].style.width="100000px";d.childNodes[0].style.height="100000px";d.scrollLeft=100000;d.scrollTop=100000;g.scrollLeft=100000;g.scrollTop=100000};var h=function(){if(e.resizeMon==null){return}o=e.offsetWidth;j=e.offsetHeight;f=0;i();e.resizeMon.cb.forEach(function(p){p.call()})};var k=function(){if(o!=e.offsetWidth||j!=e.offsetHeight){if(f===0){f=b(h)}}};i();e.resizeMonEvents.push(a(d,"scroll",k));e.resizeMonEvents.push(a(g,"scroll",k));return{detach:function(){e.resizeMonEvents.forEach(function(q){q.unbind()});e.resizeMonEvents=null;if(e.resizeMon){try{e.removeChild(e.resizeMon.el)}catch(p){}e.resizeMon=null}}}}})});define("DS/LifecycleControls/WidgetMaximizeHandler",["UWA/Class","UWA/Controls/Abstract"],function(a,b){return b.extend({init:function(){if(window&&window.parent&&window.parent.document&&window.frameElement){var c=window.frameElement.id.replace("frame","wi");this.widget=window.parent.document.querySelector("."+c);if(this.widget){this.btnContainer=this.widget.querySelector(".moduleHeader")}}this._observeButtons();this.isMaximized=false;this._updateHandlers()},maximize:function(){this._maximize();var c=this;return new UWA.Class.Promise(function(e,d){c._wait(function(){e(null)})})},restore:function(){this._restore();var c=this;return new UWA.Class.Promise(function(e,d){c._wait(function(){e(null)})})},destroy:function(){if(this.maximizedObserver){this.maximizedObserver.disconnect();this.maximizedObserver=null}},_observeButtons:function(){if(!this.btnContainer){return}var c=this;this.maximizedObserver=new MutationObserver(function(d){if(c._isWidgetMaximized()!==this.isMaximized){c._updateHandlers();c.dispatchEvent("widget-maxmized-changed",c.isMaximized)}});this.maximizedObserver.observe(this.btnContainer,{attributes:true})},_isWidgetMaximized:function(){if(!this.btnContainer){return false}return this.btnContainer.querySelector(".fonticon-resize-small")!==null},_updateHandlers:function(){this._maximize=function(){};this._restore=function(){};this._wait=function(h){h()};if(!this.btnContainer){return}var g=this.btnContainer.querySelector(".fonticon-resize-full");var d=this.btnContainer.querySelector(".fonticon-resize-small");var f=this;var c=function(j,h){if(!j.gotEl){if(f.btnContainer.querySelector(j.cls)){j.gotEl=true}}if(!j.gotNewW){var i=f.widget.getBoundingClientRect().width;if(i!=j.oldW){j.gotNewW=1;j.oldW=i}}else{if(j.gotNewW===1){var i=f.widget.getBoundingClientRect().width;if(i===j.oldW){j.gotNewW=2}else{j.oldW=i}}}if(j.gotEl&&j.gotNewW&&j.gotNewW===2){f._updateHandlers();h()}else{if(++j.cnt<30){setTimeout(c,100,j,h)}else{h()}}};var e=this.widget.getBoundingClientRect().width;if(g){f.isMaximized=false;this._maximize=function(){var h=f.btnContainer.querySelector(".fonticon-resize-full");if(!h){return}h.click();f.isMaximized=true};this._wait=c.bind(null,{oldW:e,cnt:0,cls:".fonticon-resize-small"})}else{if(d){f.isMaximized=true;this._restore=function(){var h=f.btnContainer.querySelector(".fonticon-resize-small");if(!h){return}h.click();f.isMaximized=false};this._wait=c.bind(null,{oldW:e,cnt:0,cls:".fonticon-resize-full"})}}}})});define("DS/LifecycleControls/NumberModal",["UWA/Controls/Abstract","DS/UIKIT/Modal","DS/Controls/Button","DS/Controls/SpinBox","css!DS/UIKIT/UIKIT","css!DS/LifecycleControls/assets/styles/NumberModal",],function(d,b,a,c){return d.extend({name:"numberModal",number:1,init:function(o){this._parent(o);var g=this;var e=o.parentContainer||document.body;var f=UWA.createElement("div",{"class":this.getClassNames()});var i=new c({value:g.number,minValue:1,stepValue:1,pageStepValue:1}).inject(f);i.getContent().addClassName(this.getClassNames("_spinbox"));i.addEventListener("change",function(p){g.number=parseInt(p.dsModel.value)});var l=new a({icon:"check",emphasize:"success"}).inject(f);l.getContent().addClassName(this.getClassNames("_ok"));l.addEventListener("click",function(){g.dispatchEvent("onApply",g.number);k.destroy()});if(i.elements.inputField){i.elements.inputField.addEventListener("keyup",function(p){if(p.keyCode===13){g.dispatchEvent("onApply",g.number);k.destroy()}})}var k=new b({className:this.getClassNames("_modal"),closable:false,body:f,visible:true});k.elements.container.addEventListener("click",function(p){k.destroy()});k.elements.content.addEventListener("click",function(p){p.preventDefault();p.stopPropagation();return false});k.inject(e);var m=o.windowPos.y-90+"px";try{var j=parseInt(window.getComputedStyle(k.elements.wrapper).paddingTop);var n=k.elements.wrapper.getBoundingClientRect();m=o.windowPos.y-(n.y+j)+"px"}catch(h){}k.elements.wrapper.setStyle("margin-left",o.windowPos.x+"px");k.elements.wrapper.setStyle("margin-top",m);if(i.elements.inputField){i.elements.inputField.focus()}}})});define("DS/LifecycleControls/LifecycleControls",[],function(){return{}});define("DS/LifecycleControls/InputValidation",["UWA/Controls/Abstract","DS/UIKIT/Tooltip","DS/LifecycleServices/EventHandler"],function(d,i,m){function l(p,o){return Array.prototype.slice.apply(p.querySelectorAll(o))}var k={unknown:0,text:1,number:2,email:3,custom:4,submit:5};function e(o){if(o==="text"){return k.text}if(o==="number"){return k.number}if(o==="email"){return k.email}if(o==="custom"){return k.custom}if(o==="submit"){return k.submit}return k.unknown}function b(o){return o===k.text||o===k.number||o===k.email||o===k.custom}function a(){if(!(this instanceof a)){return new a()}}a.prototype={validate:function(o){if(typeof o==="string"){return o.length>0}return false},getErrorInfo:function(o){return"Text cannot be empty"}};function c(){if(!(this instanceof c)){return new c()}}c.prototype={validate:function(o){if(typeof o==="string"&&o.length===0){return false}return !isNaN(o)},getErrorInfo:function(o){return"Must be a number"}};function g(o){if(!(this instanceof g)){return new g()}this.min=o}g.prototype={validate:function(o){if(typeof o==="string"&&o.length>=this.min){return true}return false},getErrorInfo:function(o){return"Must be min "+this.min+" chars"}};function f(o){if(!(this instanceof f)){return new f()}this.max=o}f.prototype={validate:function(o){if(typeof o==="string"&&o.length<=this.max){return true}return false},getErrorInfo:function(o){return"Must be max "+this.max+" chars"}};function n(){if(!(this instanceof n)){return new n()}}n.prototype={validate:function(o){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(o)},getErrorInfo:function(o){return"Must be a valid e-mail"}};var h=d.extend({init:function(p,o,q){this.isDebug=false;this.element=p;this.type=o;this.customCSS=q;this.isOptional=false;this.isValid=true;this.customId=-1;this.validators=[]},setGroupId:function(o){this.groupId=o},setOptional:function(o){this.isOptional=o},addValidators:function(o){this.validators=this.validators.concat(o);if(b(this.type)){this.validate()}},validate:function(q){var r=this.isValid;var p=false;if(q==null&&this.element==null){console.error("validate error");return}var o="";var s=q!=null?q:this.element.value;if(this.validators.some(function(t){var u=t.validate(s);if(!u){o=t.getErrorInfo(s)}return !u})){this.isValid=this.checkOptional(s)}else{this.isValid=true}if(r!==this.isValid||o!==this.errorText){this.errorText=o;this.updateUI();p=true}return p},checkOptional:function(o){if(!this.isOptional){return false}if(!o){return true}if(typeof(o)==="string"&&o.length===0){return true}return false},updateUI:function(){if(!this.element){return}if(this.isValid){this.element.classList.remove("inputvalidation-validation-invalid");if(this.customCSS&&this.customCSS.inputCSS){this.element.classList.remove(this.customCSS.inputCSS)}var o=this.getInfoElement(this.element,true);if(o){o.style.display="none"}}else{this.element.classList.add("inputvalidation-validation-invalid");if(this.customCSS&&this.customCSS.inputCSS){this.element.classList.add(this.customCSS.inputCSS)}var o=this.getInfoElement(this.element,true);if(o){o.style.display="inline";this.tooltip.elements.body.innerHTML=this.errorText}}},removeValidationElementsFromHost:function(o){if(!o){return}o.classList.remove("inputvalidation-validation-invalid");if(this.customCSS&&this.customCSS.inputCSS){o.classList.remove(this.customCSS.inputCSS)}var p=this.getInfoElement(o,false);if(p){o.parentNode.removeChild(p)}if(this.isDebug){o.classList.add("debug-inputvalidation-detached");o.classList.remove("debug-inputvalidation-attached");o.classList.remove("debug-inputvalidation-create")}},getInfoElement:function(q,p){if(!q.parentNode){return null}var o=q.parentNode.querySelector(".inputvalidation-info-icon");if(!o&&p){o=document.createElement("b");o.classList.add("inputvalidation-info-icon");if(this.customCSS&&this.customCSS.infoIconCSS){o.classList.add(this.customCSS.infoIconCSS)}this.tooltip=new i({target:UWA.extendElement(o),body:"no error yet",position:"bottom"});this.tooltip.elements.container.classList.add("inputvalidation-tooltip");if(this.customCSS&&this.customCSS.tooltipCSS){this.tooltip.elements.container.classList.add(this.customCSS.tooltipCSS)}q.parentNode.appendChild(o)}return o}});var j=d.extend({init:function(o,q){this.validateEl=[];this.customValidators=q;var p=[];if(o){p=l(o,("[data-validation]"))}p.forEach(function(u){var s=this._getValidators(u);var t=u.getAttribute("data-validation-group");var r=typeof u.getAttribute("data-validation-optional")==="string";this.addValidateElement(u,s.validators,r,t,s.type)},this);this._updateSubmit()},setCustomCSS:function(o){this.customCSS=o},_getValidators:function(t){var p=[];var u=t.getAttribute("data-validation").split(".");var s=e(u[0]);if(s===k.unknown){return}if(s===k.text){p.push(new a())}else{if(s===k.number){p.push(new c())}else{if(s===k.email){p.push(new n())}}}var r=+t.getAttribute("data-validation-minLength");if(!isNaN(r)&&r!==0){p.push(new g(r))}var o=+t.getAttribute("data-validation-maxLength");if(!isNaN(o)&&o!==0){p.push(new f(o))}if(q){p.push(q)}var q=null;if(s===k.custom){q=this._getCustomValidator(this.customValidators,u[1])}if(q){p.push(q)}return{type:s,validators:p}},updateValidation:function(){this._updateSubmit()},addValidateElement:function(s,p,o,q,r){var u=new h(s,r?r:k.custom,this.customCSS);u.setGroupId(q);u.setOptional(o?o:false);u.addValidators(p);this.validateEl.push(u);u.inputHandler=new m(s,"input",this._onInputChanged.bind(this,u));if(this.isDebug){s.classList.remove("debug-inputvalidation-attached");s.classList.remove("debug-inputvalidation-detached");s.classList.add("debug-inputvalidation-create")}var t=this;return{getValidator:function(){return u},setCustomId:function(v){u.customId=v;u.element.setAttribute("data-custom-id",v)},getElementCustomId:function(){return u.element?u.element.getAttribute("data-custom-id"):-1},removeElementCustomId:function(){u.element.removeAttribute("data-custom-id")},attachElement:function(v){this.detach(v);u.element=v;u.inputHandler=new m(v,"input",t._onInputChanged.bind(t,u));this.setCustomId(u.customId);if(!u.isValid){u.updateUI()}if(this.isDebug){v.classList.add("debug-inputvalidation-attached");v.classList.remove("debug-inputvalidation-detached");v.classList.remove("debug-inputvalidation-create")}},detach:function(v){if(!u.element){return}if(u.customId!==-1&&u.element){var w=this.getElementCustomId();if(u.customId!=w){console.error("ID mismatch","data-id: "+w+" validator id: "+u.customId);u.removeValidationElementsFromHost(v);this.removeInputHandler();u.element=null;return}}u.removeValidationElementsFromHost(u.element);this.removeInputHandler();this.removeElementCustomId();u.element=null},removeInputHandler:function(){if(u.inputHandler){u.inputHandler.unbind();u.inputHandler=null}},updateInputValidation:function(v){if(u.validate(v)){t._updateSubmit();return true}return false}}},addSubmitElement:function(p,o){return this.addValidateElement(p,null,false,o,k.submit)},isInputInvalid:function(o){return this.validateEl.filter(function(p){return p.type!==k.submit}).some(function(p){return p.isValid===false&&p.groupId===o})},isInputValid:function(o){return !this.isInputInvalid(o)},_getCustomValidator:function(r,q){var p=null;if(r){var o=0;for(;o<r.length;++o){if(r[o].name===q){p=r[o];break}}}return p},_updateSubmit:function(){this.validateEl.filter(function(o){return o.type===k.submit}).forEach(function(o){if(this.isInputInvalid(o.groupId)){o.element.disabled=true;o.element.classList.add("inputvalidation-submit-invalid")}else{o.element.disabled=false;o.element.classList.remove("inputvalidation-submit-invalid")}},this)},_onInputChanged:function(o){if(o.validate()){this._updateSubmit()}}});return j});define("DS/LifecycleControls/Assembly3DViewerImpl",["UWA/Controls/Abstract","UWA/Utils/InterCom","DS/LifecycleServices/AssemblyJson","DS/Selection/CSOManager","DS/Selection/HSOManager",],function(f,c,b,a,d){var e=f.extend({init:function(h,g){this.widget=h;this._parent({});this.buildUI();this.listenCommands();this.postEvent("onHtmlLoad");this.options=g},buildUI:function(){this.elements.container=new UWA.Element("div",{styles:{position:"absolute",height:"100%",width:"100%",}});this.build3DViewer(this.elements.container)},build3DViewer:function(g){var i=this;var h="DS/ENOPAD3DViewer/PAD3DViewer";require({baseUrl:"../"},[h],function(j){i.viewer3d=new j({widget:i.widget,css_view_class:"windowed",activateProbes:false,authorizeSet3DStructure:false,propertiesCommandAvailability:false,windowOptions:{BIMode:"SLAVE"},});i.viewer3d.subscribe({event:"onActionBarReady"},function(){var l=i.viewer3d.elements.container.getElementsByClassName("paddnd_invite_container");if(l!=null){if(l.length!=0){var k=l[0];k.setStyle("z-index","-1")}}l=i.viewer3d.elements.container.getElementsByClassName("wux-afr-view-tabbar-parent");if(l!=null){if(l.length!=0){var k=l[0];k.setStyle("display","none")}}i.on3DViewerActionBarReady(g)});i.viewer3d.subscribe({event:"onLoadingComplete"},function(){i.postEvent("onLoad")});i.viewer3d.subscribe({event:"onLoadingFailure"},function(){i.postEvent("onLoadFail")});a.onUpdate(function(m){var l=a.get();var k=[];l.forEach(function(p){var n=i.viewer3d._controller.buildArrayFromPath(p.pathElement);var o=JSON.stringify(n);if(i.mapPathToOccurrence[o]!=null){k.push(i.mapPathToOccurrence[o])}});i.postEvent("onSelect",k)})})},on3DViewerActionBarReady:function(g){var h=this;h.viewer3d.render().inject(g);if(h.viewer3d.getLevelSelectorCommand){h.viewer3d.getLevelSelectorCommand(function(i){if(i){i.displayLabels(false)}})}this.postEvent("onReady");if(this.options!=null){if(this.options.onActionBarReady!=null){this.options.onActionBarReady()}}},postEvent:function(g,i){var h={eventName:g,params:i};window.parent.postMessage(h,"*")},listenCommands:function(){var g=this;window.addEventListener("message",function(h){var j=h.data;var i=j.cmd;var k=j.params;g.onCmd(i,k)},false)},onCmd:function(g,h){switch(g){case"load":this.load(h);break;case"clear":this.clear();break;case"destroy":this.destroy();break;case"highlight":this.highlightSelectedObjects(h);break}},load:function(l){var g=b.getRootPhysicalId(l);if(g==this.lastSnapshotAssemblyRootId){return}this.clear();l=JSON.parse(JSON.stringify(l));var h=l.nodes.length;for(var k=0;k<h;k++){var j=l.nodes[k];var o=j.cgrurl;if(o!=null&&o!=""){var p="&origin=3DSpace";if(!o.endsWith(p)){j.cgrurl+=p}}}var m=b.convertToViewerFormat(l);this.lastSnapshotAssemblyRootId=g;var q={data:[{rootID:g,structure:{results:m.results}}]};this.viewer3d.loadJSON(q);this.mapPathToOccurrence=m.mapPathToOccurrence;this.mapOccurrenceToPath=m.mapOccurrenceToPath},clear:function(){if(this.lastSnapshotAssemblyRootId!=null){this.viewer3d.removeRoots({pids:[this.lastSnapshotAssemblyRootId]});this.lastSnapshotAssemblyRootId=null}},destroy:function(){this.viewer3d.destroy()},highlightSelectedObjects:function(m){var n=this;var g=n.mapPathToOccurrence;var o=n.mapOccurrenceToPath;d.empty();for(var l=0;l<m.length;l++){var h=m[l];if(h>=0&&Array.isArray(o)){var q=o[h];if(Array.isArray(q)){var j=JSON.stringify(q);for(var p in g){if(p.indexOf(j)===0){var k=n.viewer3d._controller.buildPathFromArray(JSON.parse(p));d.add({pathElement:k})}}}}}}});return e});define("DS/LifecycleControls/AssemblyTreeList",["UWA/Controls/Abstract","UWA/Core","UWA/Class/Promise","DS/Tree/TreeListView","DS/Core/PointerEvents","DS/Controls/Toggle","DS/LifecycleServices/AssemblyJson","DS/LifecycleServices/LifecycleServices","DS/LifecycleServices/ArrayFunctions",],function(f,c,h,d,e,i,j,b,a){var g=f.extend({init:function(k){this._parent({});this.buildUI();this.options=k;this.colIndexes=["revision","owner","description","modified","originated"];this.defaultWidth=[];this.defaultWidth.revision=72;this.defaultWidth.newTitle=180;this.defaultWidth.maturityNls=110;this.showCheckbox=false;this.selectOnCheck=false;this.postUpdateViewCalled=false;this.enableDragAndDrop=true;this.selectOnCheck=false;this.treeColumnSortable=true;this.enableListSelection=false;if(typeof k!=="undefined"){if(typeof k.showCheckbox!=="undefined"){this.showCheckbox=k.showCheckbox}if(typeof k.selectOnCheck!=="undefined"){this.selectOnCheck=k.selectOnCheck}if(typeof k.onDropCol!=="undefined"){this.onDropCol=k.onDropCol}if(typeof k.allCols!=="undefined"){this.colIndexes=k.allCols}if(typeof k.getTypeIcon!=="undefined"){this.getTypeIconFunc=k.getTypeIcon}if(typeof k.getChildrenInTreeOrder!=="undefined"){this.getChildrenInTreeOrder=k.getChildrenInTreeOrder}if(typeof k.treeColumnSortable!=="undefined"){this.treeColumnSortable=k.treeColumnSortable}if(typeof k.colsSortable!=="undefined"){this.colsSortable=k.colsSortable}if(typeof k.treeColumnSortable!=="undefined"){this.treeColumnSortable=k.treeColumnSortable}if(typeof k.colsSortable!=="undefined"){this.colsSortable=k.colsSortable}if(typeof k.enableDragAndDrop!=="undefined"){this.enableDragAndDrop=k.enableDragAndDrop}if(typeof k.enableListSelection!=="undefined"){this.enableListSelection=k.enableListSelection}if(typeof k.onContextualEvent!=="undefined"){this.onContextualEvent=k.onContextualEvent}this.canMultiSelect=k.canMultiSelect||false}this._configureDropdownCellFactory();this.columns=this.initColumns()},disableNodesByType:function(o){var k=this.tree.getDocument().getAllDescendants();var q=k.length;for(var l=0;l<q;l++){var p=k[l];var m=p.options.type;if(o.indexOf(m)!=-1){continue}this.disableNode(p)}},getNodes:function(l,k){var k=[];var p=this.tree.getDocument().getAllDescendants();var r=p.length;for(var o=0;o<r;o++){var q=p[o];if(l(q)){var m=this.buildAssemblyNode(q);k.push(m)}}return k},getAllNodes:function(){return this.getNodes(function(k){return true})},getSelectedNodes:function(){var k=this;return this.tree.getDocument().getSelectedNodes().map(function(l){return k.buildAssemblyNode(l)})},getSameNodes2:function(k){return this.getNodes(function(l){return k==l.options.nodeId})},getToggledNodes:function(){if(this.showCheckbox!=true){return[]}var l=[];var k=this.tree.getDocument().getAllDescendants();var q=k.length;for(var m=0;m<q;m++){var o=k[m];if(o.toggled){var p=o.options.nodeId;if(l.indexOf(p)==-1){l.push(p)}}}return l},getDropdownSelectedIndex:function(o,m){var k=this.getSameNodes(o);if(k.length==0){return -1}var n=k[0];var l=this.getNodeDropdownSelectedIndex(n,m);return l},onSelect:function(k){this.onSelCallback=k},onUnselect:function(k){this.onUnselCallback=k},onCheck:function(k){this.onCheckCallback=k},onUncheck:function(k){this.onUncheckCallback=k},insertCol:function(l,k){this.columns.splice(l,0,k)},load:function(r,p,l){var s=this;this.assembly=r;this.filterDuplicates=false;if(l!==undefined&&l.filterDuplicates!==undefined){this.filterDuplicates=l.filterDuplicates}var u=null;if(typeof this.options!=="undefined"){u=this.getOptions(r,this.colIndexes)}else{u=this.getOptions(r,p)}this.tree=new d(u);this.tree.getManager().onPostUpdateView(function(){s.postUpdateViewCalled=true;s.dispatchEvent("onPostUpdateView")});this.tree.inject(this.elements.container);if(typeof this.options!=="undefined"){this.customizeColumns(p)}this.elements.container.getElement(".wux-tree-treelistview").setStyle("height","100%");this.elements.container.getElement(".wux-datagrid").setStyle("height","100%");this.elements.container.getElement(".wux-layouts-gridengine").setStyle("height","100%");this.elements.container.getElement(".wux-layouts-gridengine").setStyle("min-height","80px");var k=this.tree.getDocument().getAllDescendants();var m=k.length;for(var q=0;q<m;q++){var o=k[q];o.onSelect(function(w){var v=w.target;if(s.onSelCallback!=null){var n=s.buildAssemblyNode(w.target);s.onSelCallback(n)}});o.onUnselect(function(w){var v=w.target;if(s.onUnselCallback!=null){var n=s.buildAssemblyNode(w.target);s.onUnselCallback(n)}});o.toggle=function(){this.toggled=true;if(this.checkbox!=null&&this.checkbox.checkFlag!==true){this.checkbox.toggle()}};o.untoggle=function(){this.toggled=false;if(this.checkbox!=null&&this.checkbox.checkFlag===true){this.checkbox.toggle()}}}var t=this.tree.getNthRoot(0);t.expandAll()},insertDropdownListCol:function(p,s,r,m,n,k,o){k=typeof k!=="undefined"?k:130;var l=typeof o!=="undefined"?o:true;var q=this;this.insertCol(p,{text:r,dataIndex:s,isSortable:l,type:"string",width:k,onCellRequest:function(t){if(!t.isHeader){q.insertDropdownListCell(s,t,m,n)}}})},getRelatives:function(m){var l=m.getAllDescendants();var k=m.getParents();var n=this.getSameNodes(m.options.nodeId);return{children:l,parents:k,instances:n}},setDropdownSelectionIf:function(l,k,n,p){for(var m=0;m<l.length;m++){var o=l[m];if(typeof p!=="function"||p(this.getNodeDropdownSelectedIndex(o,n))){this.setNodeDropdownSelectedIndex(o,n,k);if(typeof o.dropdownList!=="undefined"){var q=o.dropdownList[n];q.selectedIndex=k;q.previouslySelectedIndex=k}}}},getNodeDropdownSelectedIndex:function(l,k){if(typeof l.dropdownListSelectedIndex==="undefined"){l.dropdownListSelectedIndex={};l.dropdownListSelectedIndex[k]=0}return l.dropdownListSelectedIndex[k]},setNodeDropdownSelectedIndex:function(m,l,k){if(typeof m.dropdownListSelectedIndex==="undefined"){m.dropdownListSelectedIndex={}}m.dropdownListSelectedIndex[l]=k},onDropdownListChange:function(p){var o=p.target;var n=o.nodeModel;var l=o.selectedIndex;var m=o.dataIndex;if(typeof o.onChangeCallback==="function"){o.onChangeCallback(o.previouslySelectedIndex,o.selectedIndex,n)}o.previouslySelectedIndex=o.selectedIndex;var k=this.getRelatives(n);this.setDropdownSelectionIf(k.instances,l,m);n.options.grid[m]=o.options[l].innerHTML},_configureDropdownCellFactory:function(){this.defaultDropdownCellFactory=function(l,k){var m=c.createElement("select",{"class":"atl-combo"+(l._nodeDepth===0?" atl-root":""),styles:{width:"100%"}});m.onChangeCallback=k;return m};this.dropdownCellFactory=this.options&&this.options.dropdownCellFactory?this.options.dropdownCellFactory:this.defaultDropdownCellFactory},insertDropdownListCell:function(t,u,m,p){var s=this;var l=u.nodeModel;var o={physicalId:l.options.physicalId,nodeId:l.options.nodeId,occId:l.options.occId};var v=this.dropdownCellFactory(l,p);v.dataIndex=t;v.nodeModel=l;l.dropdownList={};l.dropdownList[t]=v;v.addEventListener("change",function(n){s.onDropdownListChange(n)});var w=m(o,l);var k=w.length;for(var q=0;q<k;q++){var r=c.createElement("option");r.setText(w[q]);r.inject(v)}v.selectedIndex=this.getNodeDropdownSelectedIndex(l,t);v.previouslySelectedIndex=v.selectedIndex;if(k<=1||l.disabled){s.disableDropdownList(v)}u.cellView.getContent().setHTML(v);var r=v.options[v.selectedIndex];if(r!=null){l.options.grid[t]=v.options[v.selectedIndex].innerHTML}},disableDropdownLists:function(m){var k=m.dropdownList;for(var l in k){if(k.hasOwnProperty(l)){var n=k[l];this.disableDropdownList(n)}}},disableDropdownList:function(k){if(k!==null){k.disabled=true;k.setStyle("opacity",".2")}},enableDropdownLists:function(m){var k=m.dropdownList;for(var l in k){if(k.hasOwnProperty(l)){var n=k[l];this.enableDropdownList(n)}}},enableDropdownList:function(k){if(k!==null&&!k.nodeModel.hardDisabled){k.disabled=false;k.setStyle("opacity","1")}},buildAssemblyNode:function(n){var l=this;var m=n.options;var k={occId:m.occId,nodeId:m.nodeId,physicalId:m.physicalId,_treeNode:n};k.getParent=function(){var p=k._treeNode;var o=p.getParent();var q=null;if(o!=null&&o.options.occId!=null){q=l.buildAssemblyNode(o)}return q};k.getChildren=function(){var p=[];var s=k._treeNode;var r=s.getChildren();if(r==null){return[]}var u=r.length;for(var q=0;q<u;q++){var t=r[q];var o=l.buildAssemblyNode(t);p.push(o)}return p};return k},customizeColumns:function(o){var m=this.getColumnsOptions(o);var p=this.tree.options.columns.length;for(var l=0;l<p;l++){var k=this.columns[l];if(k.dataIndex!="toggle"&&k.dataIndex!="tree"&&o.indexOf(k.dataIndex)==-1){k.isHidden=true;m.push(k)}}this.tree.loadColumns(m);for(var l=0;l<p;l++){var k=this.tree.options.columns[l];if(k.isHidden){this.tree.getManager().hideColumn(k.dataIndex)}else{this.tree.getManager().showColumn(k.dataIndex)}}},getColumnsOptions:function(r){var k=[];if(this.showCheckbox){var q=this.getCol("toggle");q.isHidden=false;k.push(q)}var l=this.getCol("tree");l.isHidden=false;k.push(l);if(r!==undefined){var s=r.length;for(var p=0;p<s;p++){var o=r[p];var m=this.getCol(o);m.isHidden=false;k.push(m)}}return k},getOptions:function(t,v){var u=this;var q=j.getRootOccurenceId(t);var r=[];if(this.showCheckbox){this.insertToggleCol();var p=this.getCol("toggle");r.push(p)}var k=this.getCol("tree");r.push(k);var l=["physicalid","Title","type"];if(v!==undefined){var o=v.length;for(var s=0;s<o;s++){var y=v[s];var m=this.getCol(y);r.push(m);var w=y;if(w=="modified"){w="mod"}l.push(w)}}l.push("type_icon_url");var A=[];var x={};this.fillTreeListNode(t,q,l,x);A.push(x);var z={apiVersion:2,columns:r,roots:A,enableDragAndDrop:this.enableDragAndDrop,resize:{columns:true,rows:true},selection:{toggle:false,enableListSelection:this.enableListSelection,canMultiSelect:this.canMultiSelect},shouldAcceptDrag:function(n){return false},onDrop:function(n,D,C,B){return u.onDragDropColumn(n,D,C,B)},onDropColumnHeader:function(B,n){return u.onDragDropColumn2(B,n)}};if(this.onContextualEvent){z.onContextualEvent=this.onContextualEvent}return z},getColIndex:function(k,o){var m=k.dataIndex;var q=o.length;for(var l=0;l<q;l++){var p=o[l];if(m==p.dataIndex){return l}}return -1},calcAfterDropColDataIndexes:function(s,t){var u=[];var p=t.manager.options.columns;var r=this.getColIndex(s,p);var m=this.getColIndex(t,p);var l=p.length;for(var o=0;o<l;o++){var k=p[o];var q=k.dataIndex;if(q=="toggle"||q=="tree"){continue}if(o==r){continue}if(o==m){if(r<m){u.push(q);u.push(s.dataIndex)}else{if(r>m){u.push(s.dataIndex);u.push(q)}else{u.push(q)}}}else{u.push(q)}}return u},onDragDropColumn:function(l,o,n,m){if(o.dataIndex=="tree"||o.dataIndex=="toggle"||n.dataIndex=="tree"||n.dataIndex=="toggle"){return false}else{if(this.onDropCol!=null){var k=this.calcAfterDropColDataIndexes(o,n);this.onDropCol(k)}return true}},onDragDropColumn2:function(r,w){var v=r.dataTransfer.getData("Text");var o=w.dataIndex;if(v=="tree"||v=="toggle"||o=="tree"||o=="toggle"){return false}var q=this.tree.getManager().getColumn(v)[0];var m=this.tree.getManager().getColumn(o)[0];var t=false;if(q.options.columnID>m.options.columnID){t=true}var s=this.tree.getManager().getColumns();var x=[];var l=s.length;for(var p=0;p<l;p++){var k=s[p];var u=k.dataIndex;if(k.isHidden==false&&u!="tree"&&u!="toggle"){if(u==v){continue}if(t){if(u==o){x.push(v)}x.push(u)}else{x.push(u);if(u==o){x.push(v)}}}}this.onDropCol(x);return true},fillTreeListNode:function(x,A,o,v){var t=[];var w=j.getNodeIdFromOccurenceId(x,A);var k=j.getNodeAttributeValues(x,w,o);var q=k[0];var G=k[1];var r=k[2];var s=k[o.indexOf("type_icon_url")];if(s==null&&this.getTypeIconFunc!=null){s=this.getTypeIconFunc(r)}var l={};var y=k.length;for(var C=3;C<y;C++){var B=o[C];var D=k[C];var F=B;if(B=="mod"){F="modified";D=b.formatDate(D,true)}if(B=="originated"){D=b.formatDate(D,true)}l[F]=D}v.label=G;v.icons=[s];v.grid=l;v.type=r;v.occId=A;v.nodeId=w;v.physicalId=q;var E;if(this.getChildrenInTreeOrder){E=j.getChildOccurenceIdsTreeOrder(x,A,this.filterDuplicates)}else{E=j.getChildOccurenceIds(x,A,this.filterDuplicates)}var z=E.length;if(z>0){v.children=[];for(var C=0;C<z;C++){var p=E[C];var u={};v.children.push(u);this.fillTreeListNode(x,p,o,u)}}},addColumn:function(m,o,l,n,p){var k={text:o,dataIndex:l,isSortable:p,width:n};m.push(k)},initColumns:function(){var m=[];var q=b.getAttributeDisplayName("title");this.addColumn(m,q,"tree","auto",this.treeColumnSortable);var s=this.colIndexes.length;for(var l=0;l<s;l++){var k=this.colIndexes[l];var p=b.getAttributeDisplayName(k);var o="auto";if(this.defaultWidth[k]!=undefined){o=this.defaultWidth[k]}var r=true;if(this.colsSortable!=undefined&&this.colsSortable[k]!=undefined){r=this.colsSortable[k]}this.addColumn(m,p,this.colIndexes[l],o,r)}return m},buildUI:function(){this.elements.container=c.createElement("div",{styles:{"class":"tree_list",top:"0px",left:"0px",width:"100%",height:"100%","background-color":"white"}})},updateToggleHeader:function(){var l=this.getAllNodesCount();var k=this.getSelectedNodes();if(this.lastSelected==l||this.lastSelected==0){this.toggleHeader.toggle()}this.lastSelected=k.length},toggleAll:function(){var k=this.tree.getDocument().getAllDescendants();var o=k.length;for(var l=0;l<o;l++){var m=k[l];if(m.disabled){continue}m.toggle()}},untoggleAll:function(){var k=this.tree.getDocument().getAllDescendants();var o=k.length;for(var l=0;l<o;l++){var m=k[l];if(m.disabled){continue}m.untoggle()}},getAllNodesCount:function(){return 10},createToggleHeader:function(){var l=this;var k=new i({checkFlag:false,mixedState:false});k.getContent().addEventListener(e.POINTERDOWN,function(m){m.stopPropagation()});k.getContent().addEventListener("focus",function(m){m.preventDefault();m.stopPropagation()});k.getContent().addEventListener("change",function(m){m.preventDefault();m.stopPropagation();if(m.dsModel.checkFlag){l.toggleAll()}else{l.untoggleAll()}});return k},getSameNodes:function(p){var l=[];var k=this.tree.getDocument().getAllDescendants();var q=k.length;for(var m=0;m<q;m++){var o=k[m];if(p==o.options.nodeId){l.push(o)}}return l},toggleSameNodes:function(o){var k=this.getSameNodes(o);var p=k.length;for(var l=0;l<p;l++){var m=k[l];if(this.selectOnCheck){m.select()}m.toggle()}},untoggleSameNodes:function(o){var k=this.getSameNodes(o);var p=k.length;for(var l=0;l<p;l++){var m=k[l];m.untoggle()}},onToggle:function(l){if(this.selectOnCheck){l.select()}this.toggleSameNodes(l.options.nodeId);if(this.onCheckCallback!=null){var k=this.buildAssemblyNode(l);this.onCheckCallback(k)}},onUntoggle:function(l){this.untoggleSameNodes(l.options.nodeId);if(this.onUncheckCallback!=null){var k=this.buildAssemblyNode(l);this.onUncheckCallback(k)}},disableNode:function(k){k.disabled=true;this.disableToggle(k);this.disableDropdownLists(k)},disableToggle:function(k){if(k.checkbox!=null){k.checkbox.disabled=true}},enableNode:function(k){k.disabled=false;this.enableToggle(k);this.enableDropdownLists(k)},enableToggle:function(k){if(k.checkbox!=null){k.checkbox.disabled=false}},insertToggleCell:function(n){var l=this;var k=n.nodeModel;var m=new i({checkFlag:k.toggled,mixedState:false});k.checkbox=m;if(k.disabled){l.disableToggle(k)}m.getContent().addEventListener(e.POINTERDOWN,function(o){o.stopPropagation()});m.addEventListener("buttonclick",function(o){console.log("buttonclick")});m.getContent().addEventListener("focus",function(o){o.preventDefault();o.stopPropagation()});m.getContent().addEventListener("change",function(o){k.toggled=o.dsModel.checkFlag;if(k.toggled){l.onToggle(k)}else{l.onUntoggle(k)}});n.cellView.getContent().setHTML(m)},insertToggleCol:function(){var l=this;this.toggleHeader=this.createToggleHeader();var k={text:this.toggleHeader,width:30,dataIndex:"toggle",isSortable:false,onCellRequest:function(m){if(!m.isHeader){l.insertToggleCell(m)}}};this.insertCol(0,k)},getCol:function(m){var o=this.columns.length;for(var l=0;l<o;l++){var k=this.columns[l];if(k.dataIndex==m){return k}}return null},selectOccurrences:function(o){var k=this.tree.getDocument().getAllDescendants();for(var m=0;m<k.length;m++){var n=k[m];var l=n.options.occId;if(o.indexOf(l)!=-1){n.select()}else{if(n.isSelected()){n.unselect()}}}},onInitialUpdateView:function(){var k=this;this._onInitialUpdateViewPromise=this._onInitialUpdateViewPromise||new c.Class.Promise(function(m,l){if(k.postUpdateViewCalled){m()}else{k.addEvent("onPostUpdateView",function(){setTimeout(function(){m()},100)})}});return this._onInitialUpdateViewPromise}});return g});define("DS/LifecycleControls/CustomizeColumns",["UWA/Class","DS/LifecycleControls/ChooseAttributes","DS/LifecycleServices/LifecycleServices","i18n!DS/LifecycleControls/assets/nls/CustomizeColumns"],function(a,c,b,e){var d=a.extend({init:function(h,i,f,g){this._parent({});this.allColumns=f;this.defaultCols=g;this.hWidget=h;this.appId=i},getAll:function(){return this.allColumns},getAlldbKeys:function(){return this.allColumns.map(function(f){return f.dbKey})},load:function(){var f=null;if(this.hWidget){f=this.hWidget.getValue(this.appId)}else{f=JSON.parse(window.localStorage.getItem(this.appId))}if(f==null){f=this.defaultCols;this.save(f)}return f},save:function(f){if(this.hWidget){this.hWidget.setValue(this.appId,f)}else{window.localStorage.setItem(this.appId,JSON.stringify(f))}},getAttrDispName:function(f){var g=f;if(f=="newTarget"){g=e.newTarget}else{g=b.getAttributeDisplayName(f)}return g},customizeColumns:function(g,o){var l=this;var p=this.load();var j=[{name:"title",displayName:this.getAttrDispName("title"),isSelected:true,disabled:true}];for(var k=0,m=p.length;k<m;k++){var h=this.allColumns.find(function(i){return p[k]===i.dbKey});if(h){j.push({name:h.dbKey,displayName:h.columnNLS,isSelected:true})}}var f=this.allColumns.length;for(var k=0;k<f;k++){if(p.indexOf(this.allColumns[k].dbKey)==-1){j.push({name:this.allColumns[k].dbKey,displayName:this.allColumns[k].columnNLS,isSelected:false})}}c.showDialog({title:e.CustomizeColumns,parent:document.body,allAttributes:j,onShow:function(i){o(i)},onOk:function(r){var q=[];var t=r.length;for(var s=0;s<t;s++){if(r[s]=="title"){continue}q.push(r[s])}l.save(q);g(q)}})},setParams:function(h,g,f){if(typeof h==="string"&&h.length){this.appId=h}if(Array.isArray(g)&&g.length){this.allColumns=g}if(Array.isArray(f)&&f.length){this.defaultCols=f}}});return d});define("DS/LifecycleControls/AdaptiveLayout",["UWA/Controls/Abstract","DS/LifecycleControls/ResizeMonitor","DS/LifecycleServices/ArrayFunctions"],function(g,b,d){function e(h){var i=parseInt(h,10);return isNaN(i)?0:i}function a(i){var h={};i.split(";").forEach(function(k){var j=k.split(":");if(j.length===2){h[j[0].trim()]=parseInt(j[1].trim(),10)}});return h}var f=g.extend({init:function(i){this.el=i;if(!this.el.classList){var h=i;this.el.classList={contains:function(j){var k=this._getClassList();return k.indexOf(j)!==-1},add:function(j){var k=this._getClassList();if(k.indexOf(j)===-1){k.push(j);this._updateClassList(k)}},remove:function(k){var l=this._getClassList();var j=l.indexOf(k);if(j!==-1){l.splice(j,1);this._updateClassList(l)}},_getClassList:function(){var j=h.getAttribute("class")||"";return j?j.trim().split(/\s+/):[]},_updateClassList:function(j){h.setAttribute("class",j.join(" "))}}}},hasClass:function(h){return this.el.classList.contains(h)},addClass:function(h){this.el.classList.add(h)},removeClass:function(h){this.el.classList.remove(h)},});var c=g.extend({init:function(h,i){this.cls=h;this.parentEl=i;this.queries=[];this.currentCls=[];this.queryIdCounter=2;this.currentStyle=0;this.onSizeChangedFn=null;this.onStyleChangedFn=null;this.isMain=false;this.childGroups=[];this.resizeMon=new b();this.monitoredElements=[];this.currentCls.push(h)},query:function(k,h,i){var j={id:this.queryIdCounter++,query:a(k),cls:[],optional:i?i:[]};if(h.forEach){j.cls=h}else{j.cls.push(h)}this.queries.push(j);return this},onSizeChanged:function(h){if(typeof h==="function"){this.onSizeChangedFn=h}return this},onStyleChanged:function(h){if(typeof h==="function"){this.onStyleChangedFn=h}return this},start:function(){return this._init(true)},stop:function(){this.monitoredElements.forEach(function(h){if(h!==undefined&&h!==null){h.detach()}});this.monitoredElements=[]},restart:function(h){if(h.forEach){h.forEach(function(i){this._restart(i)},this)}else{this._restart(h)}},_restart:function(h){if(this.cls===h){this._initAdaptiveElements();this.currentStyle=0;this._sizeChanged()}else{this.childGroups.forEach(function(i){if(i.cls===h){i._initAdaptiveElements();i.currentStyle=0;this._sizeChanged()}},this)}},_init:function(i){this.isMain=i;this._initAdaptiveElements();if(this.isMain){var j=this;var h=this.resizeMon.addMonitor(this.parentEl,function(){j._sizeChanged()});this.monitoredElements.push(h)}this.childGroups.forEach(function(k){k._initAsChild()});return this},_initAdaptiveElements:function(){this.elements=Array.prototype.slice.apply(this.parentEl.querySelectorAll("."+this.cls)).map(function(h){return{el:new f(h),restoreCls:[],removeCls:[]}})},childGroup:function(h){this.childGroups.push(h);return this},_initAsChild:function(){if(this.isMain){console.error("Ambiguous initialization")}this._init(false)},_matchQueries:function(i,l){var j=this.queries.find(function(h){if(h.query["max-height"]&&l<h.query["max-height"]){return true}if(h.query["min-height"]&&l>h.query["min-height"]){return true}if(h.query["max-width"]&&i<h.query["max-width"]){return true}if(h.query["min-width"]&&i>h.query["min-width"]){return true}return false});var m=j?j:{id:1,cls:[this.cls],optional:[]};var k=false;if(this.currentStyle!==m.id){this._changeStyle(m);k=true}return k},_changeStyle:function(h){this.elements.forEach(function(i){i.restoreCls.forEach(function(j){i.el.addClass(j)});i.restoreCls.length=0;i.removeCls.forEach(function(j){i.el.removeClass(j)});i.removeCls.length=0;this.currentCls.forEach(function(j){i.el.removeClass(j)});h.cls.forEach(function(j){i.el.addClass(j)});h.optional.forEach(function(j){if(i.el.hasClass(j.from)){i.el.removeClass(j.from);i.restoreCls.push(j.from);i.el.addClass(j.to);i.removeCls.push(j.to)}})},this);this.currentStyle=h.id;this.currentCls.length=0;this.currentCls.push.apply(this.currentCls,h.cls)},_sizeChanged:function(){var p=this.parentEl.offsetWidth;var l=this.parentEl.offsetHeight;var q=window.getComputedStyle(this.parentEl);var k=parseInt(q.paddingLeft,10)+parseInt(q.paddingRight,10)+e(q.borderLeft,10)+e(q.borderRight,10);var o=parseInt(q.paddingTop,10)+parseInt(q.paddingBottom,10)+e(q.borderTop,10)+e(q.borderBottom,10);var j={width:p-k,height:l-o};var n=this._matchQueries(j.width,j.height);this.childGroups.forEach(function(h){var r=h._matchQueries(j.width,j.height);if(r){n=true}});if(n&&this.onStyleChangedFn){var m=this.queries.find(function(h){return this.currentStyle===h.id},this);var i=m?m.cls[0]:this.cls;this.onStyleChangedFn.call(null,i,j)}if(this.onSizeChangedFn){this.onSizeChangedFn.call(null,n,j)}}});return c});define("DS/LifecycleControls/DlgMaximizeHandler",["UWA/Controls/Abstract","DS/LifecycleControls/WidgetMaximizeHandler"],function(b,a){return b.extend({init:function(c){var d=this;this.dialog=c;this.isUIVisible=true;this.isMaximized=false;this.widgetHandler=new a();this.widgetHandler.addEvent("widget-maxmized-changed",function(e){d._updateHeaderButtons(e);d.dispatchEvent("widget-maxmized-changed",e)});this._insertMinMaxButtons()},destroy:function(){this.widgetHandler.destroy();this.widgetHandler=null},isWidgetMaximized:function(){return this.widgetHandler.isMaximized},setUIVisibility:function(c){if(this.isUIVisible===c){return}this.isUIVisible=c;this._updateHeaderButtons(this.isMaximized)},_insertMinMaxButtons:function(){var c=this.dialog.elements.header.querySelector(".floatingPanel_RightButtons");if(!c){return}var d=this;this.maxBtn=UWA.createElement("span",{"class":"right-actions fonticon fonticon-resize-full ",styles:{display:this.widgetHandler.isMaximized?"none":"inline-block"},events:{click:function(){d._maximize()},touchstart:function(){d._maximize()}}}).inject(c,"top");this.restoreBtn=UWA.createElement("span",{"class":"right-actions fonticon fonticon-resize-small ",styles:{display:this.widgetHandler.isMaximized?"inline-block":"none"},events:{click:function(){d._restore()},touchstart:function(){d._restore()}}}).inject(c,"top")},_updateHeaderButtons:function(c){this.isMaximized=c;if(!this.isUIVisible){this.maxBtn.setStyle("display","none");this.restoreBtn.setStyle("display","none")}else{if(c){this.maxBtn.setStyle("display","none");this.restoreBtn.setStyle("display","inline-block")}else{this.maxBtn.setStyle("display","inline-block");this.restoreBtn.setStyle("display","none")}}},_maximize:function(){this._updateHeaderButtons(true);this.restoreRect=this.dialog.elements.container.getBoundingClientRect();var c=this;this.widgetHandler.maximize().then(function(){var d=c.dialog.elements.container.parentElement.getBoundingClientRect();c.dialog._changeWidth(d.width);c.dialog._changeHeight(d.height);c.dialog._resizeContainer();c.dialog.isMaximized=true;if(c.dialog.options.resizable){c.dialog._showResizeContainer(false);c.oldResizeCB=c.dialog.__showResizeContainerCB;c.dialog.__showResizeContainerCB=function(){}}})},_restore:function(){this._updateHeaderButtons(true);var c=this;this.widgetHandler.restore().then(function(){if(c.restoreRect){c.dialog.isMaximized=false;c.dialog.setNewSize({width:c.restoreRect.width,height:c.restoreRect.height});c.dialog._changeLeft(c.restoreRect.left);c.dialog._changeTop(c.restoreRect.top);if(c.dialog.options.resizable){c.dialog.__showResizeContainerCB=c.oldResizeCB}}})}})});define("DS/LifecycleControls/CommandDialog",["UWA/Controls/Abstract","UWA/Core","DS/ENOFloatingPanel/ENOFloatingPanel","DS/UIKIT/Input/Button","DS/LifecycleCmd/ImageUtil","DS/LifecycleControls/DlgMaximizeHandler","i18n!DS/LifecycleControls/assets/nls/CommandDialog","DS/ENO6WPlugins/jQuery","css!DS/LifecycleControls/LifecycleControls"],function(d,c,h,e,a,b,g,i){var f=d.extend({buttonStyle:{ok:1,okCancel:2,none:3,cancel:4},init:function(){this._dialog=null;this._okButton=null;this._cancelButton=null;this._closeButton=null},create:function(o,l,j){var n=l||{};this._onOkHandler=n.onOk||function(){};this._onCloseHandler=n.onClose||function(){};this._enableCmdFn=n.enableCmd||null;this._fnContext=j||this;this._OKBtnText=n.OKBtnText||g.okButton;if(n.onCloseOverride){if(!n.events){n.events={}}n.events.onClose=n.onCloseOverride}var q=this._createFooter(n.buttonStyle||this.buttonStyle.okCancel);var k=n.overlay!==undefined?n.overlay:true;var m=this._createDialog(q,o,n.resizable||false,n.maximizable||false,n.closeButton,n.events||{},n.title,k,n.className||"",n.persistId);this.updateUI();var p=this;if(n.powerMaximize){this.DlgMaximizeHandler=new b(m);this.DlgMaximizeHandler.addEvent("widget-maxmized-changed",function(r){p.dispatchEvent("widget-maxmized-changed",r)})}return m},destroy:function(){if(this.DlgMaximizeHandler){this.DlgMaximizeHandler.destroy();this.DlgMaximizeHandler=null}if(this._dialog){this._dialog.destroy();this._dialog=null}},setTitle:function(j){if(this._dialog){this._dialog.setTitle(j)}},updateUI:function(){if(this._cancelButton){this._cancelButton.setDisabled(false)}if(this._closeButton){this._closeButton.disabled=false}if(this._okButton){if(this._okButton.isDisabled()){this._okButton.events=null}if(this._enableCmdFn){this._okButton.setDisabled(this._enableCmdFn.apply(this._fnContext)?false:true)}else{this._okButton.setDisabled(false)}}},isWidgetMaximized:function(){return this.DlgMaximizeHandler?this.DlgMaximizeHandler.isWidgetMaximized():false},setPowermaximizeVisibility:function(j){if(!this.DlgMaximizeHandler){return}this.DlgMaximizeHandler.setUIVisibility(j)},maximize:function(){if(!this.DlgMaximizeHandler){return}this.DlgMaximizeHandler._maximize()},restore:function(){if(!this.DlgMaximizeHandler){return}this.DlgMaximizeHandler._restore()},_onOk:function(){this._disableUI();this._onOkHandler.apply(this._fnContext)},_onCancel:function(){this._disableUI();this._onCloseHandler.apply(this._fnContext);this.destroy()},_disableUI:function(){if(this._okButton){this._okButton.setDisabled(true)}if(this._cancelButton){this._cancelButton.setDisabled(true)}if(this._closeButton){this._closeButton.disabled=true}},_disableOK:function(){if(this._okButton){this._okButton.setDisabled(true)}},_createFooter:function(l){if(l===this.buttonStyle.none){return}var j=document.createElement("div");if(l===this.buttonStyle.ok){this._okButton=new e({value:this._OKBtnText,className:"primary"})}else{if(l===this.buttonStyle.cancel){this._cancelButton=new e({value:g.cancelButton,className:"default"})}else{this._okButton=new e({value:this._OKBtnText,className:"primary"});this._cancelButton=new e({value:g.cancelButton,className:"default"})}}var k=this;if(this._okButton){this._okButton.inject(j);this._okButton.addEvent("onClick",function(){k._onOk()})}if(this._cancelButton){this._cancelButton.inject(j);this._cancelButton.addEvent("onClick",function(){k._onCancel()})}return j},_decreaseAllzIndex:function(l){if(l&&l!==""){var k=i("."+l);for(var j=0;j<k.length;j+=1){var m=i(k[j]).css("zIndex");if(i.isNumeric(m)){i(k[j]).css("zIndex",(m-=1))}}}},_setToTopzIndex:function(j){i(j).css("zIndex",40040)},_createDialog:function(t,o,j,k,u,v,r,l,p,s){var n=this;if(!v.onClose){v.onClose=function(){n._onCancel()}}this._decreaseAllzIndex(p);this._dialog=new h({className:"command_dialog "+p,title:r,footer:t,body:o,overlay:l,escapeToClose:u,closable:u,animate:true,resizable:j,maximizable:k,autocenter:true,visible:true,events:v,limitParent:true,persistId:s});this._setToTopzIndex(this._dialog.elements.container);var m=this;var q=function(){m._decreaseAllzIndex(p);m._setToTopzIndex(m._dialog.elements.container)};this._dialog.elements.content.addEventListener("touchstart",q,true);this._dialog.elements.content.addEventListener("mousedown",q,true);return this._dialog}});return f});