define("DS/MPFBuyer/BuyerType",["UWA/Class","DS/MPFPersonModel/PersonModel","DS/MPFCompanyModel/CompanyModel"],function(b,a,d){var c=b.extend({init:function(e){this.name=e}});c.INDIVIDUAL=new c("individual");c.COMPANY=new c("company");c.UNKNOWN=new c("unknown");c.fromModel=function(f){var e;if(d.prototype.isPrototypeOf(f)){e=c.COMPANY}else{if(a.prototype.isPrototypeOf(f)){e=c.INDIVIDUAL}else{e=c.UNKNOWN}}return e};return c});define("DS/MPFBuyer/Buyer",["UWA/Class","UWA/Promise","DS/MPFDataProxy/MarketplaceConnector","DS/MPFModelFactory/MPFFactoriesV2","DS/MPFModelFactory/PersonFactory","DS/MPFModelFactory/CompanyFactory","DS/MPFPersonModel/PersonModel","DS/MPFBuyer/BuyerType","DS/MPFServices/ObjectService"],function(a,h,d,j,f,c,e,b,g){var i=a.extend({init:function(k){this.model=k.model;this.buyerType=b.fromModel(this.model)},getModel:function(){return this.model},getBuyerType:function(){return this.buyerType}});i.fromPerson=function(m){var n;var l;var k;g.requiredOfPrototype(m,e,"person must be a PersonModel");return d.fetchPromise().then(function(o){var p=j.getInstance(o);return p.getFactory(j.Types.COMPANY)}).then(function(o){l=m.getCompanyId();if(l){k=o.createModel(c.Types.COMPANY);k.set("id",l);n=k.fetchPromise()}else{n=h.resolve(m)}return n}).then(function(o){return new i({model:o})})};i.fromMe=function(){return d.fetchPromise().then(function(k){var l=j.getInstance(k);return l.getFactory(j.Types.PERSON)}).then(function(l){var k=l.createModel(f.Types.ME);return k.fetchPromise()}).then(function(k){return i.fromPerson(k)})};return i});