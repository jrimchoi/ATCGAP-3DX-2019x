define("DS/LifecycleServices/ArrayFunctions",function(){if(!Array.prototype.find){Object.defineProperty(Array.prototype,"find",{value:function(a){if(this===null){throw new TypeError("Array.prototype.find called on null or undefined")}if(typeof a!=="function"){throw new TypeError("predicate must be a function")}var f=Object(this);var d=f.length>>>0;var b=arguments[1];var e;for(var c=0;c<d;c++){e=f[c];if(a.call(b,e,c,f)){return e}}return undefined}})}if(!Array.prototype.findIndex){Object.defineProperty(Array.prototype,"findIndex",{value:function(a){if(this===null){throw new TypeError("Array.prototype.findIndex called on null or undefined")}if(typeof a!=="function"){throw new TypeError("predicate must be a function")}var f=Object(this);var d=f.length>>>0;var b=arguments[1];var e;for(var c=0;c<d;c++){e=f[c];if(a.call(b,e,c,f)){return c}}return undefined}})}return null});define("DS/LifecycleServices/NotificationPublish",["UWA/Core","DS/PlatformAPI/PlatformAPI"],function(b,a){return{publish:function(c,d){var e;if(b.is(d,"string")){e=d}else{e=JSON.stringify(d)}a.publish(c,e);a.publish("webinwin:web:notification",e)}}});define("DS/LifecycleServices/LifecycleServicesSettings",["UWA/Class","UWA/Class/Options","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/PlatformAPI/PlatformAPI","DS/WAFData/WAFData",],function(b,g,c,i,h){var a={CATIAV5:{name:"CATIAV5",require:"DS/ENOXCADCATIAV5UI/ENOXCADFileNameValidation"}};var e=null;var f;require(["DS/CfgAuthoringContextUX/scripts/CfgAuthoringContext"],function(j){f=j});var d=b.singleton(g,{folder_json:null,tenant:"",options:{wintop:false,},init:function(j){this._parent()},instance:function(){return this},getTenant:function(){return this.tenant},setTenant:function(j){this.tenant=j},getInstance:function(l){try{this.init(l)}catch(m){}for(var j in l){this.options[j]=l[j]}return this},get3DSpaceUrl:function(l){var j=location.protocol+"//"+location.hostname;var k="3DSpace";if(l){l.serverUrl=j;l.serverUri=k}return j+"/"+k},get3DSpaceBaseUrl:function(n){if(!UWA.is(this.getOption("platform_services"),"array")){throw new Error("Platform services not initialize yet")}var m=this;var j;try{for(var l=0;l<this.getOption("platform_services").length;l++){if(this.getOption("platform_services")[l]["platformId"]==n){j=this.getOption("platform_services")[l]["3DSpace"];break}}}catch(k){j=m.get3DSpaceUrl()}return j},get3DSpaceWSUrl:function(m,j,l){if(m==null||m==undefined||m==""){m="OnPremise"}var k=this.get3DSpaceBaseUrl(m)+j+(j.indexOf("?")<0?"?":"&")+"tenant="+m;if(l!=undefined&&l!=null){k=k+"&"+l}return k},getServerURL:function(){var j="";c.getPlatformServices({onComplete:function(k){j=k[0]["3DSpace"]},});return j},getPlatformUrl:function(m,l){var j=location.protocol+"//"+location.hostname;var k=m;if(l){l.serverUrl=j;l.serverUri=k}return j+"/"+k},getPlatformBaseUrl:function(n,o){if(!UWA.is(this.getOption("platform_services"),"array")){throw new Error("Platform services not initialize yet")}var m=this;var j;try{for(var l=0;l<this.getOption("platform_services").length;l++){if(this.getOption("platform_services")[l]["platformId"]==o){j=this.getOption("platform_services")[l][n];break}}}catch(k){j=m.getPlatformUrl()}return j},getPlatformWSUrl:function(k,n,j,m){if(n==null||n==undefined||n==""){n="OnPremise"}var l=this.getPlatformBaseUrl(k,n)+j+"?tenant="+n;if(m!=undefined&&m!=null){l=l+"&"+m}return l},app_initialization:function(n,j){var l=this;var m=false;try{if(!UWA.is(this.getOption("platform_services"),"array")){m=true}}catch(k){m=true}if(m){if(j){l.setOption("platform_services",j);n()}else{c.getPlatformServices({onComplete:function(o){l.setOption("platform_services",o);if(typeof(window.widget)!=="undefined"&&window.widget&&typeof(window.widget.getValue("x3dPlatformId"))!=="undefined"&&window.widget.getValue("x3dPlatformId")&&window.widget.getValue("x3dPlatformId").trim().length>0){l.tenant=window.widget.getValue("x3dPlatformId")}else{l.tenant=o[0].platformId}l.getEnforceFolderLinkSetting();n()},onFailure:function(o){n()}})}}else{n()}},setFolderCommunicationChannel:function(j){if(j&&j.getCurrentFolder){this.setCurrentFolder(j.getCurrentFolder())}i.subscribe("FolderEditor.CurrentFolder",this.setCurrentFolder.bind(this));i.subscribe("FolderEditor.ActiveFolder",function(k){if(k.origin===undefined){e=k}else{if(widget.id===k.origin){e=k;if(e.id==""){e.id=null}}}require(["DS/LifecycleServices/LifecycleServicesSettings"],function(l){l.getActiveFolder=function(){return e}})});require(["DS/PlatformAPI/PlatformAPI"],function(k){k.publish("FolderEditor.ActiveFolderCallBack",null)})},setCurrentFolder:function(j){this.folder_json=JSON.parse(j)},getCurrentFolderID:function(){if(this.folder_json!=null&&this.folder_json.hasOwnProperty("FolderID")){return this.folder_json.FolderID}else{return null}},getCurrentFolderSecurityContext:function(){if(this.folder_json!=null&&this.folder_json.hasOwnProperty("SecurityContext")){return this.folder_json.SecurityContext}else{return null}},hasPARRole:function(l){var k=this;if(k._hasPARRole===undefined){k._hasPARRole=false;try{c.getGrantedRoles(function(n){for(var m=0;m<n.length;m++){if(n[m]&&n[m].id==="InternalDS"||n[m].id==="PAR"||n[m].id==="PAU"||n[m].id==="UWE"){k._hasPARRole=true}}l(k._hasPARRole)})}catch(j){k._hasPARRole=false;l(k._hasPARRole)}}else{l(k._hasPARRole)}},hasRole:function(n,l){var m=this;var k=false;try{c.getGrantedRoles(function(q){for(var p=0;p<q.length&!k;p++){for(var o=0;o<l.length;o++){if(q[p]&&q[p].id===l[o]){k=true;break}}}n(k)})}catch(j){n(k)}},getServices:function(){if(this.options.wintop){if(typeof this.options.platform_services!=="undefined"&&this.options.platform_services.length>0){if(typeof this.options.platform_services[0].platformId!=="undefined"){this.tenant=this.options.platform_services[0].platformId}}return d.getInstance(this.options)}else{return d}},getEnforceFolderLinkSettingAsync:function(m){if((this._enforceFolderLink!==undefined)){m(null,this._enforceFolderLink)}else{if((this._enforceFolderLinkReturned!==undefined)&&(this._enforceFolderLinkReturned==false)){m(null,this._enforceFolderLink);return}else{this._enforceFolderLinkReturned=false;var l=this.getServices().get3DSpaceWSUrl(this.tenant,"/resources/lifecycle/product/getEnforceFolderSetting",null);var j=this;var k={type:"json",method:"POST",proxy:"passport",authentication:"passport",data:UWA.Json.encode(""),headers:d.getHeaders(),onComplete:function(o){j._enforceFolderLinkReturned=true;var n=o.result;if(n&&n==="true"){j._enforceFolderLink=true}if(n&&n==="false"){j._enforceFolderLink=false}m(null,j._enforceFolderLink)},onFailure:function(n){j._enforceFolderLinkReturned=true;console.log("getEnforceFolderLinkSetting: Failure..."+n);m("getEnforceFolderLinkSetting: Failure..."+n)},onTimeout:function(){j._enforceFolderLinkReturned=true;console.log("getEnforceFolderLinkSetting: A connection timeout occured.");m("getEnforceFolderLinkSetting: A connection timeout occured.")}};h.handleRequest(l,k)}}},getEnforceFolderLinkSettingPromise:function(){var j=this;return new Promise(function(l,k){j.getEnforceFolderLinkSettingAsync(function(n,m){if(n){k(n)}else{l(m)}})})},getEnforceFolderLinkSetting:function(){if(this._enforceFolderLink!==undefined){return this._enforceFolderLink}else{this.getEnforceFolderLinkSettingAsync(function(){});return}},isLogicalDeleteActive:function(k){var j=this;if(j._isLogicalDeleteActive===undefined){d.app_initialization(function(){var l=d.get3DSpaceWSUrl(j.tenant,"/resources/lifecycle/product/isLogicalDeleteActivated",null);UWA.Data.request(l,{type:"json",method:"POST",proxy:"passport",data:UWA.Json.encode(""),headers:d.getHeaders(),onComplete:function(m){console.log("isLogicalDeleteActive: onComplete:"+m);if(m.hasOwnProperty("result")&&m.result=="true"){j._isLogicalDeleteActive=true;j._trashSecurityContext=m.securityContext}else{j._isLogicalDeleteActive=false}k(j._isLogicalDeleteActive)},onFailure:function(m){console.log("isLogicalDeleteActive: onFailure:"+m);k(false)},onTimeout:function(){console.log("isLogicalDeleteActive: onTimeout: A connection timeout occured.");k(false)}})})}else{k(j._isLogicalDeleteActive)}},getHeaders:function(l){var m={Accept:"application/json","Content-Type":"application/json","Accept-Language":widget.lang,};if(l){m.SecurityContext=l}try{var j=f.get();if(j.change.id.length>0){m["DS-Change-Authoring-Context"]="pid:"+j.change.id}if(j.evolution.id.length>0){m["DS-Configuration-Authoring-Context"]="pid:"+j.evolution.id}}catch(k){}return m},isOpenWithCATIAV5Available:function(j){this.hasPARRole(j)},getCADvalidityService:function(j){return new Promise(function(l,k){var n;var m=a[j];if(m!=null){var n=m.require;require([n],function(o){l(o)},function(){k("No Mapping found")})}else{k("No Mapping found")}})}});return d});define("DS/LifecycleServices/AssemblyJson",["UWA/Class",],function(a){var b=a.singleton({init:function(){this._parent({})},convertFromExpandFormat:function(c){var d=function(){var r=[];var x=[];var q=[];var p={};var w={};var n={};var u={};var f={};var t=[];var m=[];var o=[];var y=0;var j=0;var v=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];var l=-1;var g={};var z=null;function k(H){var G=H.results;var C=0;var D=G.length;if(D>0){u={};var A=0;for(A=0;A<D;A++){var B=G[A];if(B.hasOwnProperty("icon__default_thumbnail_2d")){z=B.icon__default_thumbnail_2d;continue}var F=B.attributes;if(undefined===F){F=B.path;if(undefined===F){continue}t.push(F);s(F)}}f={};A=0;for(A=0;A<D;A++){var B=G[A];var F=B.attributes;if(undefined===F){continue}else{h(F)}}i();var E={};E.uicontroltype="piecewisecgrviewer";E.version=2;E.rootoccurrence=l;E.nodes=r;E.occurrences=x;E.occurrencerelationships=q;return E}}function h(P){var Q=P.length;var F=0;var U={};var M={};var A;var X;var O;var J=[];for(F=0;F<Q;F++){A=P[F];X=A.name;O="";O=A.value;U[X]=O}var B=u[U.did];var V=U.physicalid;if(!V){V=U.resourceid}f[U.did]=V;n[V]=U["ds6w:type"];if(B=="relationship"){var W={physicalid:V};m.push(W);var E=false;if(U.hasOwnProperty("matrixtxt")){var H=U.matrixtxt;var L=H.split(",");J=[];var I=0;E=true;var C=L.length;if(C==12){for(I=0;I<12;I++){var S=Number(L[I]);if(NaN==S){E=false;break}J.push(S);if(I==2){J.push(0)}if(I==5){J.push(0)}if(I==8){J.push(0)}if(I==11){J.push(1)}}}else{E=false}}if(false==E){J=v}var R=1;if(U.hasOwnProperty("TreeOrder")){R=parseFloat(U.TreeOrder);if(isNaN(R)){R=1}}g[V]=R;w[V]=J}else{if(B=="node"){var N=y++;p[V]=N;M.nodeid=N;M.physicalid=V;M.mod=U["ds6w:modified"];M.modms=Date.parse(M.mod);M.type=U["ds6w:type"];M.state=U["ds6w:status"];M.cadMaster=U["ds6w:cadMaster"];var T=U.cgr;if(T==null){T=""}M.cgrurl=T;M.Title=U["ds6w:label"];var G=U["ds6w:revision"];if((undefined===G)||(""===G)){G=U["ds6wg:revision"]}if(undefined==G){G=""}var D=U.type_icon_url;if(D===undefined&&z){var K=false;z.some(function(Y){Y.did.some(function(Z){if(Z===U.did){D=Y.icon;K=true}return K});return K})}M.revision=G;M.attributes={originated:U["ds6w:created"],name:U["ds6w:label"],locked:U["ds6w:reserved"],revision:G,description:U["ds6w:description"],owner:U["ds6w:responsible"],locker:U["ds6w:reservedBy"],type_icon_url:D,};r.push(M)}}}function s(C){var B=C.length;var A=0;var D=false;for(A=0;A<B;A++){if(D===true){u[C[A]]="relationship";D=false}else{u[C[A]]="node";D=true}}}function i(){var I=t.length;var A=0;for(A=0;A<I;A++){var K=t[A];var N="";var D=K.length;var L=0;var M=false;var B=null;var J=null;var H=null;var E=null;var G=null;var F=null;for(L=0;L<D;L++){if(M===true){G=K[L];if(!p[G]){G=f[G]}N=N+G;M=false}else{J=K[L];if(!p[J]){J=f[J]}N=N+"|"+J;if(!o.hasOwnProperty(N)){var C=j++;o[N]=C;E={};E.occurrenceid=C;E.nodeid=p[J];if(w.hasOwnProperty(G)){E.xform=w[G]}else{E.xform=v}x.push(E);if(L!==0){F={};F.parent=B;F.child=C;F.physicalid=G;F.treeOrder=g[G];F.type=n[G];q.push(F)}else{if(l==-1){l=C}}}B=o[N];M=true}}}}return{convert:function(A){return k(A)},}};var e=new d();return e.convert(c)},convertToViewerFormat:function(J){var w={results:[]};var Y;var U={attributes:[{name:"did",value:""},{name:"resourceid",value:""},{name:"ds6w:type",value:""}]};var N={attributes:[{name:"did",value:""},{name:"resourceid",value:""},{name:"ds6w:type",value:""},{format:"attribute",name:"thumbnail_3d",type:"STRING",value:""},{format:"attribute",name:"cgr",type:"STRING",value:""}]};var R={attributes:[{name:"did",value:"12832"},{name:"resourceid",value:"134EB556B30A000072A1EA5672400800"},{name:"type",value:"CAD SubComponent"},{name:"matrixtxt",value:"1,0,0,0,1,0,0,0,1,0,0,0"}]};var W=J.nodes.length;var M=false;for(Y=0;Y<W;Y++){var P=J.nodes[Y].type;if(P=="Part"){if(P=="Part"&&J&&J.nodes[Y]&&J.nodes[Y].cgrurl!==undefined&&J.nodes[Y].cgrurl!==""){J.nodes[Y].type=P="3DShape"}else{J.nodes[Y].type=P="VPMReference"}}M=(P=="CATPart")||(P=="CATShape")||(P=="CATIA CGR")||(P=="3DShape")||(P=="CATIA V4 Model");if(M==true){var k=JSON.parse(JSON.stringify(N));k.attributes[0].value=""+J.nodes[Y].nodeid;k.attributes[1].value=J.nodes[Y].physicalid;k.attributes[2].value=J.nodes[Y].type;k.attributes[3].value=J.nodes[Y].cgrurl;k.attributes[4].value=J.nodes[Y].cgrurl;w.results.push(k)}else{var k=JSON.parse(JSON.stringify(U));k.attributes[0].value=""+J.nodes[Y].nodeid;k.attributes[1].value=J.nodes[Y].physicalid;k.attributes[2].value=J.nodes[Y].type;w.results.push(k)}}var u=J.occurrences.length;var E=J.occurrencerelationships.length;for(Y=1;Y<u;Y++){var k=JSON.parse(JSON.stringify(R));var B=[];if(J.occurrences[Y].xform!=null){if(J.occurrences[Y].xform.length==12){for(var ab=0;ab<12;ab++){B.push(J.occurrences[Y].xform[ab])}}else{B.push(J.occurrences[Y].xform[0]);B.push(J.occurrences[Y].xform[1]);B.push(J.occurrences[Y].xform[2]);B.push(J.occurrences[Y].xform[4]);B.push(J.occurrences[Y].xform[5]);B.push(J.occurrences[Y].xform[6]);B.push(J.occurrences[Y].xform[8]);B.push(J.occurrences[Y].xform[9]);B.push(J.occurrences[Y].xform[10]);B.push(J.occurrences[Y].xform[12]);B.push(J.occurrences[Y].xform[13]);B.push(J.occurrences[Y].xform[14])}}var F=JSON.stringify(B);F=F.replace("[","");F=F.replace("]","");var g="";var O="";for(var V=0;V<E;V++){if(J.occurrences[Y].occurrenceid==J.occurrencerelationships[V].child){g=J.occurrencerelationships[V]["physicalid"];O=J.occurrencerelationships[V]["relname"];break}}k.attributes[0].value=(W+Y-1).toString();k.attributes[1].value=(g!=null&&g!="")?g:(W+Y-1).toString();k.attributes[2].value=(O!=null&&O!="")?O:(W+Y-1).toString();k.attributes[3].value=F;if(O=="CatDesignTable"){k.attributes.splice(3,1)}w.results.push(k)}var h=J.nodes;var s=J.occurrences;var S=J.occurrencerelationships;var n={};for(var I=0;I<h.length;I++){var v=h[I];var ad=v.nodeid;n[ad]=v}var t={};var X={};var L={};for(var I=0;I<s.length;I++){var q=s[I];var o=q.occurrenceid;var ad=q.nodeid;var v=n[ad];var z=v.physicalid;t[o]=z;X[o]=ad;L[o]=I}var l={};var r={};for(var I=0;I<S.length;I++){var aa=S[I];var c=aa.child;var K=aa.parent;var x=aa.physicalid;l[c]=x;r[c]=K}var d=new Array(u);var Q={};for(Y=0;Y<u;Y++){var H=Y;var y=J.occurrences[H].nodeid;var A=[];var D=Y;var o=s[D].occurrenceid;while(o!=undefined){A.push(o);o=r[o]}A.reverse();var p=[];var f=[];var e=W-1;for(var V=0;V<A.length;V++){var o=A[V];if(V>0){var m=l[o];p.push(m);var Z=L[o];f.push((Z+e).toString())}var C=t[o];p.push(C);var ac=X[o];f.push(ac.toString())}d[Y]=p.slice();var G=n[y];var T=G.type;M=(T=="CATPart")||(T=="CATShape")||(T=="CATIA CGR")||(T=="3DShape")||(T=="CATIA V4 Model");if(M==true){w.results.push({path:f.slice()})}Q[JSON.stringify(d[Y])]=Y}w.mapOccurrenceToPath=d;w.mapPathToOccurrence=Q;return w},getNodeCount:function(c){return c.nodes.length},getRootPhysicalId:function(d){if(d.occurrences.length==0){var g=d.nodes[0];return g.physicalid}else{var f=this.getRootOccurenceId(d);var e=this.getNodeIdFromOccurenceId(d,f);var c=this.getNodeAttributeValue(d,e,"physicalid");return c}},getRootOccurenceId:function(c){return c.rootoccurrence},_getChildOccurenceIds:function(h,f,m){var c=[];var k=h.occurrencerelationships;var d=k.length;var l=[];var o=m||false;for(var g=0;g<d;g++){var j=k[g];if(j.parent==f){if(o){var e=this.getOccurence(h,j.child);if(l.indexOf(e.nodeid)!==-1){continue}else{l.push(e.nodeid)}}c.push({id:j.child,treeOrder:j.treeOrder})}}return c},getChildOccurenceIds:function(d,f,c){var e=this._getChildOccurenceIds(d,f,c);return e.map(function(g){return g.id})},getChildOccurenceIdsTreeOrder:function(d,f,c){var e=this._getChildOccurenceIds(d,f,c);return e.sort(function(h,g){return h.treeOrder-g.treeOrder}).map(function(g){return g.id})},setOccurenceRelationshipOrder:function(d,g,e,c){var h=d.occurrencerelationships.length;for(var f=0;f<h;f++){if(d.occurrencerelationships[f].parent==g&&d.occurrencerelationships[f].child==e){d.occurrencerelationships[f].order=c;break}}},getOccurence:function(c,f){var g=c.occurrences;var h=g.length;for(var d=0;d<h;d++){var e=g[d];if(e.occurrenceid==f){return e}}return null},getAllNodePhysicalIds:function(d){var f=[];var c=d.nodes;var h=c.length;for(var e=0;e<h;e++){var g=c[e];f.push(g.physicalid)}return f},getNodePhysicalId:function(c,e){var d=this.getNode(c,e);return d.physicalid},getNode:function(d,g){var c=d.nodes;var h=c.length;for(var e=0;e<h;e++){var f=c[e];if(f.nodeid==g){return f}}return null},getNodeFromPhysicalId:function(d,e){var c=d.nodes;var h=c.length;for(var f=0;f<h;f++){var g=c[f];if(g.physicalid===e){return g}}return null},Node:function(c){var d={setAttribute:function(e,f){if(this.nodeJson[e]!=null){this.nodeJson[e]=f}else{this.nodeJson.attributes[e]=f}},getAttribute:function(e){var f=this.nodeJson[e];if(f==null){f=this.nodeJson.attributes[e]}return f},nodeJson:c,};return d},Assembly:function(c){var d={getNodeByPhysicalId:function(e){var h=this.nodes.length;for(var f=0;f<h;f++){var g=this.nodes[f];if(g.physicalid==e){return b.Node(g)}}return null},getNodeCount:function(){return this.nodes.length},getNode:function(e){return b.Node(c.nodes[e])},nodes:c.nodes,};return d},getNodeAttributeValue:function(d,g,e){var f=[e];var c=this.getNodeAttributeValues(d,g,f);return c[0]},getNodeAttributeValues:function(j,f,d){var l=[];var g=this.getNode(j,f);var e=d.length;for(var h=0;h<e;h++){var c=d[h];var k=g[c];if(k==null){k=g.attributes[c]}l.push(k)}return l},getNodeIdFromOccurenceId:function(c,e){var d=this.getOccurence(c,e);return d.nodeid},getNodeIdsFromOccurenceIds:function(d,c){var f=[];var h=c.length;for(var e=0;e<h;e++){var g=this.getNodeIdFromOccurenceId(d,c[e]);if(f.indexOf(g)==-1){f.push(g)}}return f},getRelationshipId:function(c,f,d){var g=c.occurrencerelationships.length;for(var e=0;e<g;e++){if(c.occurrencerelationships[e].parent===f&&c.occurrencerelationships[e].child===d){return c.occurrencerelationships[e].physicalid}}return null},getRelationshipData:function(c,f,d){var g=c.occurrencerelationships.length;for(var e=0;e<g;e++){if(c.occurrencerelationships[e].parent===f&&c.occurrencerelationships[e].child===d){return{pid:c.occurrencerelationships[e].physicalid,type:c.occurrencerelationships[e].type}}}return null},getRelationships:function(h,j,f){var l=[];var e=h.occurrencerelationships.length;for(var g=0;g<e;g++){var c=h.occurrencerelationships[g].parent;var m=this.getOccurence(h,c).nodeid;var d=h.occurrencerelationships[g].child;var k=this.getOccurence(h,d).nodeid;if(m===j&&k===f){if(l.indexOf(h.occurrencerelationships[g].physicalid)===-1){l.push(h.occurrencerelationships[g].physicalid)}}}return l},foo:function(){}});return b});define("DS/LifecycleServices/UUIDGenerator",["UWA/Class"],function(a){return a.singleton({init:function(){this.counter=0},create:function(){var b=new Date();return b.getTime()+this.counter++}})});define("DS/LifecycleServices/LifecycleObjectList",["css!DS/LifecycleServices/LifecycleServices","UWA/Core","UWA/Controls/Abstract","DS/DataGridWidget/DataGridWidget","i18n!DS/LifecycleWidget/assets/nls/LifecycleWidgetNls","i18n!DS/LifecycleServices/assets/nls/LifecycleServicesNls",],function(a,e,g,c,d,b){var f=g.extend({defaultOptions:{className:"Lifecycle-objectlist",showDisplayNameColumn:true,showNameColumn:false,showRevisionColumn:false,showTypeColumn:false,appendObjects:false,showMaturityColumn:false},objectsTableBody:null,objectsTable:null,init:function(h){this._parent(h);this.buildSkeleton()},buildSkeleton:function(){var h=this.options;this.objectsTable=new c([{text:"PhysicalID",dataIndex:"Id",sortKey:function(i){return i},sortable:true,hidden:true},{text:"",dataIndex:"Symbol",sortKey:function(i){return i},sortable:true},{text:d.title,dataIndex:"Title",sortKey:function(i){return i},sortable:true},{text:d.type,dataIndex:"Type",sortKey:function(i){return i},sortable:true},{text:d.revision,dataIndex:"Revision",sortKey:function(i){return i},sortable:true},{text:b.maturitystate,dataIndex:"Current",sortKey:function(i){return i},sortable:true}],{className:h.className,activeSelection:false,setScroller:true,useNativeScroller:true,maxHeightScroller:""});this.objectsTable.getContent().setAttribute("data-rec-id","dataRecInitialSelectedGridAccess");this.elements.container=this.objectsTable},setObjects:function(j){var i=this;i.objectsTable.clearAllLine();var h=[];j.forEach(function(k){var l=i.AddObjectInTable(k);if(l!=null){h.push(l)}});i.objectsTable.AddDatasInTable(h)},AddObjectInTable:function(i){var l=this;var k=i.hasOwnProperty("typeDisplayName")?i.typeDisplayName:i.type;var j=UWA.createElement("img",{src:i.imageUrl});var h=i.revision;if(h==null){h=""}return{Id:i.physicalid,Title:i.name,Type:k,Revision:h,Current:i.current,Symbol:j}},empty:function(){if(this.objectsTableBody!==null){while(this.objectsTableBody.firstChild){this.objectsTableBody.removeChild(this.objectsTableBody.firstChild)}}}});return f});define("DS/LifecycleServices/EventHandler",[],function(){function a(b,d,c){if(!(this instanceof a)){return new a(b,d,c)}this.element=b;this.event=d;this.fn=c;if(this.fn!==undefined){this.bind()}}a.prototype.bind=function(b){if(typeof b=="function"){this.fn=b}this.element.addEventListener(this.event,this.fn)};a.prototype.unbind=function(){this.element.removeEventListener(this.event,this.fn)};return a});define("DS/LifecycleServices/Utils",[],function(){function a(){}a.prototype={debounce:function(c,e,b){var d;return function(){var i=this,h=arguments;var g=function(){d=null;if(!b){c.apply(i,h)}};var f=b&&!d;clearTimeout(d);d=setTimeout(g,e);if(f){c.apply(i,h)}}},toArray:function(d){var b=[];for(var c in d){if(d.hasOwnProperty(c)){b.push(c)}}return b},toMaturityArray:function(d){var b=[];for(var c in d){if(d.hasOwnProperty(c)){b.push(d[c])}}return b},htmlFromString:function(c){if(this._htmlFromString){return this._htmlFromString(c)}try{this._htmlFromString=function(d){return document.createRange().createContextualFragment(d)};return this._htmlFromString(c)}catch(b){this._htmlFromString=function(e){var d=document.createRange();d.selectNode(document.body);return d.createContextualFragment(e)};return this._htmlFromString(c)}},createDbgNlsProxy:function(b){if(window&&window.showTranslated&&b.isNlsProxy!=42){var c={get:function(e,f,d){if(f==="isNlsProxy"){return 42}return"T("+e[f]+")"}};return new Proxy(b,c)}return b}};return new a()});define("DS/LifecycleServices/LifecycleObjectBlacklist",["UWA/Class"],function(a){var b=a.singleton({init:function(){this.blacklistedTypes=["Person"];this.isBlacklistedStr=function(c){return this.blacklistedTypes.indexOf(c)===-1?false:true};this.isBlacklistedArray=function(c){for(var d=0;d<c.length;++d){var e=c[d].type||c[d].objectType||"";if(this.isBlacklistedStr(e)){return true}}return false}},isBlacklisted:function(c){if(Object.prototype.toString.call(c)==="[object Array]"){return this.isBlacklistedArray(c)}if(typeof c==="string"||c instanceof String){return this.isBlacklistedStr(c)}return false}});return b});define("DS/LifecycleServices/LifecycleAlert",["DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen"],function(a,b){return{_notif_manager:null,displayNotification:function(c){if(this._notif_manager===null){this._notif_manager=a;b.setNotificationManager(this._notif_manager)}var d="info";if(UWA.is(c.eventID)&&c.eventID!=="primary"){d=c.eventID}this._notif_manager.addNotif({level:d,message:c.msg,sticky:false})},clearNotifications:function(){b.removeNotifications("","")}}});define("DS/LifecycleServices/log",["UWA/Class"],function(a){return a.singleton({rootElement:null,inject:function(c,b){c.innerHTML='<div id="_logRoot_"></div>';this.rootElement=c.querySelector("#_logRoot_");this.rootElement.style.height=b+"px";this.rootElement.style.border="1px solid grey";this.rootElement.style.overflow="auto"},info:function(b){this.rootElement.insertAdjacentHTML("beforeend","<div>"+b+"</div>")}})});define("DS/LifecycleServices/XMLDocHelper",["UWA/Utils"],function(a){return{loadXMLDoc:function(b){return a.loadXml(b)},filterNodes:function(g,n){if(typeof n!=="object"){throw Error("XMLDocHelper.filterNodes:Invalid input: Cannot filter nodes")}if(!g||g.length===0){throw Error("XMLDocHelper.filterNodes:nodeList does not contain nodes")}var b=[];for(var j=0,k=g.length;j<k;j++){var l=g[j];var f=(!n.tag||(typeof n.tag==="string"&&l.tagName===n.tag));if(typeof n.attrList==="object"){for(var m in n.attrList){var d=l.getAttribute(m),c=n.attrList[m];f=f&&(typeof d==="string"&&(c.allowPartialMatch===true?(c.value instanceof RegExp?c.value:(new RegExp(c.value))).test(d):(d===c.value)))}}if(typeof n.text==="object"){var h=l.textContent;f=f&&(typeof h==="string"&&(n.text.allowPartialMatch===true?(n.text.value instanceof RegExp?n.text.value:(new RegExp(n.text.value))).test(h):(h===n.text.value)))}f&&b.push(l)}return b},filterDescendants:function(d,c){if(!d||d.length===0){throw Error("XMLDocHelper.filterDescendants:nodeList does not contain nodes")}c=c||{};var h=[];function g(m,n){n.push(m);for(var l=0,e=m.childNodes.length;l<e;l++){(j=m.childNodes[l],j.nodeType===Node.ELEMENT_NODE&&g(j,n))}return n}for(var f=0,b=d.length;f<b;f++){var j=d[f];if(typeof c.tag==="string"){var k=c.tag.split(":");h=k.length===2?j.getElementsByTagNameNS(j.lookupNamespaceURI(k[0]),k[1]):j.getElementsByTagName(k[0])}else{h=g(j,h)}}return(typeof c.attrList==="object"?this.filterNodes(h,{attrList:c.attrList}):h)},filterChildren:function(h,g){if(!h||h.length===0){throw Error("XMLDocHelper.filterChildren:nodeList does not contain nodes")}g=g||{};for(var k=0,b=h.length,d=[];k<b;k++){for(var f=0,l,c=h[k].childNodes.length;f<c;f++){(l=h[k].childNodes[f],l.nodeType===Node.ELEMENT_NODE&&d.push(l))}}return this.filterNodes(d,g)},filterIfDescendantElementExists:function(f,d){if(!f||f.length===0){throw Error("XMLDocHelper.filterIfDescendantElementExists:nodeList does not contain nodes")}d=d||{};var c=[];for(var g=0,h,b=f.length;g<b;g++){(h=f[g],this.filterDescendants([h],d).length>0)&&c.push(h)}return c},filterFirstMatchingAncestor:function(f,d){if(!f||f.length===0){throw Error("XMLDocHelper.filterNodes:nodeList does not contain nodes")}if(typeof d!=="object"){throw Error("XMLDocHelper.filterNodes:Invalid input: Cannot filter nodes")}for(var g=0,c=[],b=f.length;g<b;g++){var h=f[g].parentNode;while((h&&!this.filterNodes([h],d).length)){h=h.parentNode}c.push(h)}return c},getParent:function(b){return b.parentNode},getSiblings:function(d){var c=d.parentNode;var b=c&&this.filterChildren([c])||[];(b.length)&&b.splice(b.indexOf(d),1);return b},getNodeInfo:function(e){var f={tag:undefined,value:undefined,attrList:{},text:undefined};f.tag=e.tagName;f.value=e.nodeValue;f.text=e.textContent;if(e.hasAttributes()){var c=e.attributes;for(var d=0,b=c.length;d<b;d++){f.attrList[c[d].name]=c[d].value}}return f},getChildren:function(b){return this.filterChildren([b])}}});define("DS/LifecycleServices/IllegalCharMapping",["UWA/Controls/Abstract","DS/LifecycleServices/LifecycleServicesSettings","DS/LifecycleCmd/Dictionary"],function(c,b,a){return c.extend({init:function(){this.mappings=new a();this.types=new a()},addCADType:function(d,e){if(this.mappings.find(d)){return false}if(this.types.find(d)){return false}this.types.add(d,e);return true},getMappings:function(){var e=this;var d=[];this.types.each(function(f,g){d.push(e._getTypeIllegalChar(f,g))});this.types.clear();return new Promise(function(g,f){Promise.all(d).then(function(h){h.forEach(function(i){e.mappings.add(i.type,i.chars)});g(e.mappings)})["catch"](function(h){console.log("Some illegal char mapping service failed, error: "+h);g(e.mappings)})})},_getTypeIllegalChar:function(d,e){return new Promise(function(g,f){b.getCADvalidityService(d).then(function(h){return h.getInvalidCharInTitle()}).then(function(h){g({type:d,chars:h})})["catch"](function(h){console.warn("Failed to get illegal char mapping for:"+d+' using default charlist:"'+e+'" error: '+h);g({type:d,chars:e!=null?e:""})})})}})});define("DS/LifecycleServices/DictionaryServices",["UWA/Class","UWA/Class/Options","DS/LifecycleServices/LifecycleServicesSettings","DS/WAFData/WAFData"],function(d,b,e,a){var c=d.singleton(b,{init:function(){this.typeCache.push({type:"Workspace Vault",hierarchy:[]});this.typeCache.push({type:"Workspace",hierarchy:["Project Management"]});this.typeCache.push({type:"Personal Workspace",hierarchy:[]});this.typeCache.push({type:"Folder",hierarchy:[]});this.typeCache.push({type:"RootFolder",hierarchy:[]})},typeCache:[],isTypeInCache:function(f){return this.typeCache.some(function(g){return g.type===f})},isKindOfFromCache:function(h,i){var g=this.typeCache.filter(function(j){return j.type===i})[0];if(g){var f=h.some(function(j){if(g.hierarchy.indexOf(j)>=0){return true}else{return false}});return f}else{console.log("isKindOfFromCache: Called when type is not in cache!");return undefined}},getIsKindOfPromise:function(h,g,i){var f=this;return new UWA.Class.Promise(function(l,k){var j=function(m){l(m)};f.isKindOf(h,g,i,j)})},isKindOf:function(k,g,f,l){var i=this;var j=false;var o=false;var h=g.some(function(p){return p===f});if(h){j=true;o=true}if(!o){if(i.isTypeInCache(f)){j=true;o=i.isKindOfFromCache(g,f)}if(!j){var n=e.get3DSpaceWSUrl(k,"/resources/enong/dico/gettypeshierarchy",null);var m={types:[f]};a.authenticatedRequest(n,{method:"POST",type:"json",timeout:1000*60,data:UWA.Json.encode(m),headers:e.getHeaders(),onComplete:function(r){console.log("gettypeshierarchy: onComplete:"+r);var p=false;if(r.hasOwnProperty("types_hierarchies")&&r.types_hierarchies.length>0){var q=r.types_hierarchies[0];if(!i.isTypeInCache(f)){i.typeCache.push(q)}if(q.type===f){p=g.some(function(s){if(q.hierarchy.indexOf(s)>=0){return true}else{return false}},this)}}l(p)},onFailure:function(p){console.log("gettypeshierarchy: onFailure:"+p)},onTimeout:function(){console.log("gettypeshierarchy: onTimeout: A connection timeout occured.")}})}else{l(o)}}else{l(o)}}});return c});define("DS/LifecycleServices/Notification",["DS/LifecycleServices/LifecycleAlert"],function(a){return{displayError:function(b,c){this.displayNotification(b,{eventID:"error",msg:c})},displayWarning:function(b,c){this.displayNotification(b,{eventID:"warning",msg:c})},displayInfo:function(b,c){this.displayNotification(b,{eventID:"info",msg:c})},displayNotification:function(d,c){if(d){if(UWA.is(d.displayNotification,"function")){var b;if(UWA.is(c,"string")){b={eventID:"warning",msg:c}}else{b=c}d.displayNotification(b);return}}this._displayAlert(c)},_displayAlert:function(b){var c;if(UWA.is(b,"string")){c={msg:b}}else{c=b}a.displayNotification(c)}}});function ReplaceWithPolyfill(){var c=this.parentNode,b=arguments.length,a;if(!c){return}if(!b){c.removeChild(this)}while(b--){a=arguments[b];if(typeof a!=="object"){a=this.ownerDocument.createTextNode(a)}else{if(a.parentNode){a.parentNode.removeChild(a)}}if(!b){c.replaceChild(a,this)}else{c.insertBefore(this.previousSibling,a)}}}if(!Element.prototype.replaceWith){Element.prototype.replaceWith=ReplaceWithPolyfill}if(!CharacterData.prototype.replaceWith){CharacterData.prototype.replaceWith=ReplaceWithPolyfill}if(!DocumentType.prototype.replaceWith){DocumentType.prototype.replaceWith=ReplaceWithPolyfill}var _get=function(b,a){return a.split(".").reduce(function(d,c){return typeof d=="undefined"||d===null?d:d[c]},b)};define("DS/LifecycleServices/HTMLTemplating",["UWA/Class","UWA/Controls/Abstract","DS/LifecycleServices/Utils","DS/LifecycleCmd/Dictionary","DS/Controls/Button","DS/Controls/LineEditor","DS/Controls/Toggle","DS/Controls/ComboBox","DS/Controls/ButtonGroup","DS/Utilities/TouchUtils"],function(a,d,e,f,h,c,i,j,b,g){return a.singleton({_isTouchMode:undefined,Expand:function(n,l,m){var k=l?n.replace(/\{\{(.*?)\}\}/g,function(o){o=o.replace("{{","");o=o.replace("}}","");return typeof l[o]==="function"?l[o]():l[o]}):n;if(m){k=k.replace(/\[\[(.*?)\]\]/g,function(o){o=o.replace("[[","");o=o.replace("]]","");return m[o]?m[o]:o})}return k},ElementFromTemplate:function(q,n,o,m,k){o=e.createDbgNlsProxy(o);var l=this.Expand(q,n,o);var p=e.htmlFromString(l);if(m){Array.prototype.slice.call(p.querySelectorAll("*[id]")).forEach(function(r){r.setAttribute("id",m+r.id)})}p.inject=function(r){r.appendChild(p)};this._replaceControls(p);if(k){this._applyBindings(p,k)}this._setTouchAttribute(p);return p},isTouchMode:function(){if(this._isTouchMode===undefined){this._isTouchMode=g.getTouchMode()?true:false}return this._isTouchMode},_setTouchAttribute:function(k){var l=this;Array.prototype.slice.call(k.querySelectorAll(".is-mobile")).forEach(function(m){if(l.isTouchMode()){m.setAttribute("touch-mode","")}})},_applyBindings:function(o,t){var s={invalid:0,event:1,value:2};var n={invalid:0,click:1,change:2,keydown:3};var q=function(w){var x={click:n.click,change:n.change,keydown:n.keydown};if(x.hasOwnProperty(w)){return x[w]}console.error("Invalid event binding: ",w);console.error("Supported bindings:");for(var v in x){if(x.hasOwnProperty(v)){console.log(v)}}return n.invalid};var r=function(w){var v={type:s.invalid,event:n.invalid,key:-1,fn:null,property:null};w.forEach(function(x){var y=x.split("=");if(y.length!=2){return}var A=y[0].trim();var z=y[1].trim();if(A==="event"){v.event=q(z);v.type=s.event}else{if(A==="function"){v.fn=z}else{if(A==="key"){v.key=parseInt(z)}else{if(A==="attribute"){if(z!=="value"){console.error("Currently unsupported attribute binding: ",z);return}v.type=s.value}else{if(A==="property"){v.property=z}}}}}});return v};var p=function(x,v,w){if(typeof v[w]!=="function"){console.error("Invalid binding, missing function");console.error("Binding function: "+w);console.error("Element ID: "+x.id);return false}return true};var l=function(y,x,w){if(!p(y,w,x)){return}var v=w[x];if(y.wuxControlType==="ComboBox"){v=function(z){if(!z.dsModel){return}w[x]()}}y.addEventListener("click",v)};var m=function(z,y,w){if(!p(z,w,y)){return}var x=[];if(z.wuxControlType==="Toggle"){var v=function(B){w[y](B.dsModel?B.dsModel.checkFlag:undefined,B)};x.push({event:"change",fn:v})}else{if(z.wuxControlType==="ComboBox"){var v=function(B){w[y](B.dsModel?B.dsModel.currentValue:undefined,_get(B,"event.dsModel.elements.popup.visibleFlag"),B)};x.push({event:"change",fn:v})}else{if(z.wuxControlType==="LineEditor"){var v=function(B){w[y](B.dsModel?B.dsModel.value:undefined,true,B)};var A=function(B){w[y](B.dsModel?B.dsModel._properties.valueToCommit.value:undefined,false,B)};x.push({event:"change",fn:v});x.push({event:"uncommittedChange",fn:A})}else{console.error("Fix binding to new type!")}}}x.forEach(function(B){z.addEventListener(B.event,B.fn)})};var k=function(y,w,x,v){if(!p(y,v,x)){return}y.addEventListener("keydown",function(z){if(z.keyCode===w){v[x]()}})};var u=function(w,x,v){if(typeof v.setProperty!=="function"){console.error("Invalid value binding, model missing setProperty()");return}if(w.wuxControlType!=="LineEditor"){console.error("Invalid value binding, element type currently unsupported");console.error("Element ID: "+w.id);return}if(w.wuxControlType==="LineEditor"){w.wuxControl.addEventListener("change",function(y){v.setProperty(x,y.dsModel.value)});w.wuxControl.addEventListener("uncommittedChange",function(y){v.setProperty(x,y.dsModel._properties.valueToCommit.value)})}};Array.prototype.slice.call(o.querySelectorAll("[data-bind]")).forEach(function(w){var v=w.getAttribute("data-bind");var x=v.split(";");x.forEach(function(y){var z=y.split(",");if(z.length<2){return}var A=r(z);if(A.type===s.event){if(A.event===n.click){l(w,A.fn,t)}else{if(A.event===n.change){m(w,A.fn,t)}else{if(A.event===n.keydown){k(w,A.key,A.fn,t)}}}}else{if(A.type===s.value){u(w,A.property,t)}}})})},_replaceControls:function(r){var n=function(v,w){v.className.split(" ").forEach(function(x){w.addClassName(x)})};var u=function(v,w){["data-bind"].forEach(function(x){var y=v.getAttribute(x);if(y){w.setAttribute(x,y)}})};var q=function(v,w){if(!v){return}var x={};v.split(";").forEach(function(z){var y=z.split(":");if(y.length===2){x[y[0].trim()]=y[1].trim()}});w.setStyles(x)};var t=function(w,v,x){var y=v.getContent();y.id=w.id;y.wuxControl=v;y.wuxControlType=x;q(w.getAttribute("data-wuxstyle"),y);n(w,y);u(w,y);w.replaceWith(y)};var o=function(w,z,y){var x=Array.prototype.slice.call(w.querySelectorAll("option")).map(function(A){return{labelItem:A.text,valueItem:A.value}});var v=w.getAttribute("data-wuxDisplayStyle");return new j({elementsList:x,enableSearchFlag:z,actionOnClickFlag:y,displayStyle:v})};var m={LineEditor:function(w){var x=w.getAttribute("data-wuxplaceholder");var v=new c({placeholder:x});t(w,v,"LineEditor");return v},Button:function(x){var w=x.getAttribute("data-wuxlabel");var v=new h({label:w});t(x,v,"Button");return v},Checkbox:function(x){var w=x.getAttribute("data-wuxlabel");var v=new i({type:"checkbox",checkFlag:x.checked,label:w});t(x,v,"Toggle");return v},Radio:function(x){var w=x.getAttribute("data-wuxlabel");var y=x.getAttribute("data-wuxchecked");var v=new i({type:"radio",label:w,checkFlag:y==="true"});t(x,v,"Toggle");return v},Combo:function(w){var v=o(w,false,false);t(w,v,"ComboBox");return v},DropdownBtn:function(w){var v=o(w,false,true);t(w,v,"ComboBox");return v}};var l={Radio:function(x){var w=x.getAttribute("data-wuxlabel");var y=x.getAttribute("data-wuxchecked");var v=new i({type:"radio",label:w,checkFlag:y==="true"});var z=v.getContent();z.id=x.id;z.wuxControl=v;z.wuxControlType="Toggle";return v}};var p=d.extend({init:function(){this.elements=[]},add:function(v){this.elements.push(v)},create:function(){var v=new b({type:"radio"});this.elements.forEach(function(w){v.addChild(w.factory(w.element))});t(this.elements[0].element,v);v.getContent().id="";this.elements.splice(1).forEach(function(x){var w=x.element;w.parentElement.removeChild(w)})}});var s=new f();var k=function(x){var z=x.getAttribute("data-wuxcontrol");var y=x.getAttribute("data-wuxgroup");if(y){var v=s.find(y);if(!v){v=new p();if(v){s.add(y,v)}}if(!v){return null}v.add({element:x,factory:l[z]});return{create:function(){console.error("Dont call")},isGroup:true}}var w=m[z];if(!w){return null}return{create:w,isGroup:false}};Array.prototype.slice.call(r.querySelectorAll("[data-wuxcontrol]")).forEach(function(w){var v=k(w);if(v&&v.isGroup===false){v.create(w)}});s.each(function(x,w){w.create()});Array.prototype.slice.call(r.querySelectorAll("[data-delete-element]")).forEach(function(v){v.parentElement.removeChild(v)})}})});define("DS/LifecycleServices/LifecycleServices",["UWA/Array","UWA/Class","UWA/Class/Options","UWA/Class/Promise","DS/LifecycleServices/LifecycleServicesSettings","DS/WAFData/WAFData","DS/LifecycleServices/AssemblyJson","DS/WidgetServices/WidgetServices","DS/UIKIT/SuperModal","DS/PADUtils/PADSettingsMgt","text!DS/LifecycleServices/assets/x3DSpaceResources.properties","i18n!DS/LifecycleServices/assets/nls/LifecycleServicesNls","i18n!DS/LifecycleWidget/assets/nls/LifecycleWidgetNls"],function(c,a,j,i,e,k,l,n,b,h,g,m,d){var f=a.singleton(j,{init:function(){},getAssemblyInfo:function(s,o,q,p){if(o==""){q(null);return}f.listAttributes(s,[o],["name","owner","modified.generic","originated.generic","attribute[PLMEntity.V_description]"],function r(z){var E=z.results;var y=E[0];var B=y.physicalid;var D=y.name;var v=y.ownerFullName;if(v==null){v=y.owner}var C=y["modified.generic"];var u=y["originated.generic"];var A=y["attribute[PLMEntity.V_description]"];if(A==null){A=""}var x="";var w={physicalid:B,title:D,owner:v,mod:C,originated:u,desc:A,thumbnailUrl:x,};q(w)},function t(u){p(u)})},expandAssembly2:function(v,p,u,t){var s=this;var o=false;this.expandAssembly2D(v,p,function r(w){var x=l.convertFromExpandFormat(w,o);s.expandAssembly3D(v,p,function y(J){var F=l.convertFromExpandFormat(J,o);var D=l.Assembly(F);var E=l.Assembly(x);var A=E.getNodeCount();for(var B=0;B<A;B++){var I=E.getNode(B);var C=I.getAttribute("physicalid");var H=D.getNodeByPhysicalId(C);var G=H.getAttribute("cgrurl");I.setAttribute("cgrurl",G)}u(x)},function z(A){console.log(A);t(A)})},function q(w){console.log(w);t(w)})},expandAssembly:function(t,p,r,q){this.expandAssemblyNoConversion(t,p,function o(w){var v=false;var u=l.convertFromExpandFormat(w,v);r(u)},function s(u){console.log(u);q(u)})},expandAssemblyNoConversion:function(s,o,r,p){var q="compareExpand";this.expandAssemblyWithIntent(s,o,q,r,p)},expandAssembly2D:function(s,o,r,p){var q="explore_2D";this.expandAssemblyWithIntent(s,o,q,r,p)},expandAssembly3D:function(s,o,r,p){var q="explore_3D";this.expandAssemblyWithIntent(s,o,q,r,p)},expandAssemblyWithIntent:function(u,o,s,t,q){var r={intent:s,debug:false,type_filter_bo:["CATProduct","CATProcess","CATPart","CATDrawing","CATAnalysis","VPMReference","VPMRepReference","CATIA Embedded Component","3DShape","CATIA CGR","CATShape","CATIA V4 Model","CATIA Design Table"],roots:[{id:o}],level:"-1",source:"cstorage",select_bo:["did","resourceid","relcount","physicalid","ds6w:label","ds6w:reserved","ds6wg:revision","ds6w:description","ds6w:modified","ds6w:created","ds6w:responsible","type_icon_url","ds6w:type","ds6w:policy","ds6w:organizationResponsible","ds6w:project","ds6w:reservedBy","thumbnail_2d","thumbnail_3d"],authored:true,};var p=e.get3DSpaceWSUrl(u,"/resources/enopad/navigate/expand",null);k.authenticatedRequest(p,{method:"POST",headers:e.getHeaders(),timeout:1000*60*60*24,data:JSON.stringify(r),type:"json",onComplete:function(v){t(v)},onFailure:function(v){q(v)},onTimeout:function(){q("timeout")},})},formatDate:function(o,p){var o=n.formatDate(o,true);o=o.replace(", "," ");return o},listAttributes:function(z,o,q,s,v){var w=this;var A=[];var r=o.length;for(var u=0;u<r;u++){var y=o[u];A.push({physicalid:y})}var t={data:A,attributes:q};var B="/resources/lifecycle/product/attributeList";this.post(z,B,t,function x(C){s(C)},function p(C){v(C)})},listAttributesPromise:function(q,r,p){var o=this;return new UWA.Class.Promise(function(t,s){o.listAttributes(q,r,p,function(u){t(u)},function(u){s(u)})})},getAttributeDisplayName:function(o){if(o=="revision"||o=="code"){return m.rev}if(o=="owner"){return m.resp}if(o=="description"||o=="PLMEntity.V_description"){return m.desc}if(o=="policy"||o=="policyTranslated"||o==="policy_nls"){return m.policy}if(o=="modified"){return m.mDate}if(o=="originated"||o==="creationDate"){return m.cDate}if(o=="type"||o==="type_nls"){return m.type}if(o=="project"){return m.collSpace}if(o=="isdup"){return m.isDup}if(o=="islast"){return m.isLastRev}if(o=="title"||o=="displayName"){return m.title}if(o=="newTitle"){return m.newTitle}if(o=="ispublished"){return m.published}if(o=="current"||o==="maturitystate"){return m.maturitystate}if(o=="maturityNls"||o=="maturity_nls"){return m.maturity}if(o=="PLMReference.V_versionComment"){return m.comment}if(o=="locked"){return m.reserved}if(o=="reserved"){return m.reserved}if(o=="reservedby"){return m.reservedby}if(o=="locker"){return m.reservedby}if(o=="organization"){return m.organization}if(o=="vault"){return m.vault}if(o=="maturity"){return m.maturity}return o},getAttributeDisplayNames:function(r){var q=[];var s=r.length;for(var p=0;p<s;p++){var o=this.getAttributeDisplayName(r[p]);q.push(o)}return q},getTypeIcon:function(t,r){var s=this;var o="x3DSpaceResources.smallIcon.type_"+r.replace(/\s+/g,"");if(s.typeIcons==null){s.typeIcons={};var p=g.split("\n");p.forEach(function(y){if(y.trim()==""){return}var w=y.split(" = ");var x=w[0].trim();var z=w[1].trim();var v=e.get3DSpaceWSUrl(t,"/snresources/images/icons/small/"+z,null);s.typeIcons[x]=v})}var q=s.typeIcons[o];if(q==null){var u=e.get3DSpaceWSUrl(t,"/snresources/images/icons/small/I_CDM_Document.png");q=u}return q},get:function(w,x,q,v,s){var t=this;var t=this;var u=Date.now().toString();var r="timestamp"+u;q[r]=u;f.getSecurityContext(w,function p(A){var z=e.get3DSpaceWSUrl(w,x,null);if(z.indexOf("?")!=-1){z+="&"}else{z+="?"}for(var y in q){var B=q[y];z+=y+"="+B+"&"}k.authenticatedRequest(z,{method:"GET",headers:e.getHeaders(A),timeout:1000*60*60*24,type:"json",onComplete:function(C){v(C)},onFailure:function(C,D){t.onWebServiceError(s,C,D)},onTimeout:function(){t.onWebServiceError(s,null,m.timeout)},})},function o(y){t.onWebServiceError(s,null,y)})},post:function(t,q,s,r,p){var o=this;f.getSecurityContextPromise(t).then(function(v){var u=e.get3DSpaceWSUrl(t,q,null);k.authenticatedRequest(u,{method:"POST",headers:e.getHeaders(v),timeout:1000*60*60*24,data:UWA.Json.encode(s),type:"json",onComplete:function(w){r(w)},onFailure:function(w,x){o.onWebServiceError(p,w,x)},onTimeout:function(){o.onWebServiceError(p,null,m.timeout)}})})},_getSecurityContextFromPreferences:function(p){if(widget.hasPreference("Current_security_credentials")){var o=widget.getPreference("Current_security_credentials");if(o.defaultValueNonNls!==undefined&&o.defaultValueNonNls!==null&&o.hasOwnProperty("defaultValueNonNls")){return"ctx::"+o.defaultValueNonNls}}if(widget.getPreference("pad_security_ctx")!=null){return widget.getPreference("pad_security_ctx").value}return null},_getSecurityContextFromContext:function(p){if(!p){return null}if(typeof p.getSecurityContext!=="function"){return null}var o=p.getSecurityContext();if(o&&o.hasOwnProperty("SecurityContext")){return o.SecurityContext}return null},getSecurityContextPromise:function(q,o){var p=this._getSecurityContextFromContext(o);var r=this._getSecurityContextFromPreferences(q);if(p){return new UWA.Class.Promise.resolve(p)}else{if(r){return new UWA.Class.Promise.resolve(r)}}if(!this._getSecCtxPromise){this._getSecCtxPromise=new UWA.Class.Promise(function(t,s){f.getSecurityContext(q,function(u){t(u)},function(u){s(u)})})}return this._getSecCtxPromise},getSecurityContext:function(s,r,p){var o=this;var q=e.get3DSpaceWSUrl(s,"/resources/pno/person/getsecuritycontext",null);k.authenticatedRequest(q,{type:"json",method:"GET",proxy:"passport",headers:e.getHeaders(),timeout:600000,onComplete:function(u){var t=u.SecurityContext;if(u!=null&&u!=""&&u.hasOwnProperty("SecurityContext")&&u.SecurityContext!=null){var v="";if(u.SecurityContext.indexOf("ctx::")!=0){v="ctx::"}t=v+u.SecurityContext;r(t)}else{p(d.ErrorSecurityContextEmpty)}},onFailure:function(t,u){console.log("getSecurityContext:Failure..."+t);f.onWebServiceError(p,t,u)},ontimeout:function(){console.log("getSecurityContext: A connection timeout occurred.");f.onWebServiceError(p,null,d.connectionTimeout)}})},getSecurityContextList:function(s,r){var p=this;var q=s;var o=e.get3DSpaceWSUrl(s,"/resources/modeler/pno/person","current=true&select=preferredcredentials&select=collabspaces");f.getSecurityContext(s,function(t){var u=q;k.authenticatedRequest(o,{method:"GET",proxy:"passport",headers:e.getHeaders(t),onComplete:function(F){if(UWA.Json.isJson(F)){var v=UWA.Json.decode(F);var C=[];var D=[];var B=[];if(v.hasOwnProperty("collabspaces")){var x=v.collabspaces;x.forEach(function(K){var I=K.name;if(K.hasOwnProperty("couples")){var J=K.couples;J.forEach(function(M){C.push(M.role.name+"."+M.organization.name+"."+I);var L=M.role.nls+"."+M.organization.name+"."+I;D.push(L);B.push({value:L,label:L})})}});var G=null;if(v.hasOwnProperty("preferredcredentials")){var E=v.preferredcredentials;if(E!==undefined&&E!==null&&E.hasOwnProperty("collabspace")&&E.hasOwnProperty("organization")&&E.hasOwnProperty("role")){G=E.role.name+"."+E.organization.name+"."+E.collabspace.name}}if(D.length>0){var z=0;z=C.indexOf(G);var y=D[z];var w=C[z];var A=d.get("currentCredential");var H=y?y:D[0];e.setOption(u,{name:"Current_security_credentials",type:"list",label:A,defaultValue:H,defaultValueNonNls:w,value:y,options:B,optionsNonNls:C});r()}}}},onFailure:function(v){reject("getMaturitySatus:Failure..."+v)},onTimeout:function(){reject("getMaturitySatus: A connection timeout occured.")}})})},getCsrfKeyPromise:function(p){var o=this;return new UWA.Class.Promise(function(r,q){if(o._csrfKey){r(o._csrfKey);return}f.getCsrfKey(p,function(s){o._csrfKey=s;r(o._csrfKey)},function(s){q(s)})})},getCsrfKey:function(r,q,o){var p=e.get3DSpaceWSUrl(r,"/resources/v1/application/E6WFoundation/CSRF",null);k.authenticatedRequest(p,{type:"json",method:"GET",proxy:"passport",headers:e.getHeaders(),timeout:600000,onComplete:function(s){if(s&&s.csrf){q(s.csrf)}else{o(d.ErrorCsrfKeyEmpty)}},onFailure:function(s,t){console.log("getCsrfKey:Failure..."+s);f.onWebServiceError(o,s,t)},ontimeout:function(){console.log("getCsrfKey: A connection timeout occurred.");f.onWebServiceError(o,null,d.connectionTimeout)}})},getOslcConfigPromise:function(){var o=this;return new UWA.Class.Promise(function(q,p){if(o._oslcConfig){q(o._oslcConfig);return}require(["text!DS/OSLCConsumer/assets/OSLCConfig.json"],function(r){var s=JSON.parse(r);o._oslcConfig=s;q(o._oslcConfig)},function(){p(m.ErrorOslcConfig)})})},getHistoryConfigPromise:function(){var o=this;return new UWA.Class.Promise(function(q,p){if(o._historyConfig!=null){q(o._historyConfig)}else{require(["text!DS/HistoryExplorer/assets/HistoryExplorerCustomConfig.json"],function(s){var r=JSON.parse(s);o._historyConfig=r;q(o._historyConfig)},function(){o._historyConfig=null;p()})}})},oslcRequest:function(t,o,r,p){var q=this;var s;this.getOslcConfigPromise().then(function(v){var u=c.detect(v.repositories,function(w){if(w.id&&o==""){console.log("getting default 1rst repository definition ",w.id);return w.id}return w.id===o});if(u){if(r==""){console.log("getting default resourceUrl ",u.resourceUrl);r=u.resourceUrl}if(u.oauth){q.oauthRequest(u.oauth,t,r,p)}else{if(u.parameters&&u.parameters.authorization){p.retryIfUnauthorized=true;s={Accept:"application/rdf+xml",Authorization:u.parameters.authorization};q._makeRequest(r,s,p)}else{s={Accept:"application/rdf+xml"};q._makeRequest(r,s,p)}}}else{p.onError(m.replace(m.ErrorOslcServiceNotFound,{service:o}))}},function(u){p.onError(u)})},_makeRequest:function(s,t,p){var r=this;if(p.headers){for(var u in p.headers){t[u]=p.headers[u]}}var q;var o={method:p.method,proxy:"passport",headers:t,timeout:600000,onComplete:p.onSuccess,onFailure:function(v,x,w){if(((q.xhr.status===401)||(q.xhr.status===0))&&p.retryIfUnauthorized){p.retryIfUnauthorized=false;r._makeRequest(s,t,p)}else{if(((q.xhr.status===401)||(q.xhr.status===0))&&p.oauth){r._oauthAuthenticateUser(p.oauth,p.tenant,p.onError)}else{r.onWebServiceError(p.onError,v,x,q.xhr.status,w)}}},ontimeout:function(){r.onWebServiceError(p.onError,null,m.timeout)}};if(p.data){o.data=p.data}q=k.authenticatedRequest(s,o)},_getAuthorizationHeaderPromise:function(r,q,o,p){return new UWA.Class.Promise(function(u,t){var s="DS/OAuthSimple/OAuthSimple";require([s],function(){var x="xrequestedwith=xmlhttprequest";var w=q.split("?");q=w[0];if(w.length>1){x=w[1]+"&"+x}if(o){Object.keys(o).forEach(function(y){x+="&"+y+"="+encodeURIComponent(o[y])})}var v=(new OAuthSimple()).sign({action:r,path:q,parameters:x,signatures:{consumer_key:p.oauth_consumer_key,shared_secret:p.oauth_consumer_secret,access_token:p.oauth_token,oauth_secret:p.oauth_token_secret}});u(v.header)},function(w){var v=w.requireModules&&w.requireModules[0];if(v===s){t(m.ErrorOAuthSimple)}})})},oauthRequest:function(p,s,r,o){var q=this;this._getOauthInfoPromise(p,s).then(function(t){return q._getAuthorizationHeaderPromise(o.method,r,o.data,t)}).then(function(t){var u={Accept:"application/rdf+xml",Authorization:t};o.oauth=p;o.tenant=s;q._makeRequest(r,u,o)})["catch"](function(t){o.onError(t)})},_getOauthInfoPromise:function(o,p){return new UWA.Class.Promise(function(r,q){f._getOauthInfo(o,p,function(s){r(s)},function(s){q(s)})})},_getOauthInfo:function(o,t,s,q){var p=this;var r=e.getPlatformWSUrl("3DPassport",t,"oauth/access_token/"+o,null);k.authenticatedRequest(r,{type:"json",method:"GET",proxy:"passport",headers:e.getHeaders(),timeout:600000,onComplete:function(u){if(u.error==="no.token.found"){p._oauthAuthenticateUser(o,t,q)}else{if(u.error){q(u.error)}else{s(u)}}},onFailure:function(u,v){console.log("_getOauthInfo:Failure..."+u);f.onWebServiceError(q,u,v)},ontimeout:function(){console.log("_getOauthInfo: A connection timeout occurred.");f.onWebServiceError(q,null,d.connectionTimeout)}})},_oauthAuthenticateUser:function(o,q,p){this._getAuthenticationUrlPromise(o,q).then(function(u){var s=new b({events:{onHide:function(){p(m.authorizationRequired)}},renderTo:document.body});var t=m.replace(m.authorizationDialogBody,{identityProvider:o,authenticationUrl:u});var r=t.indexOf("target=");t=[t.slice(0,r),"onclick=\"if (typeof dscef !== 'undefined') {dscef.sendString('launchOSLCAuthorization', '"+u+"'); return false;}\"",t.slice(r)].join(" ");s.dialog({body:t,title:m.authorizationDialogTitle,buttons:[{className:"primary",value:m.ok,action:function(v){v.hide()}}]})},function(r){p(r)})},_getAuthenticationUrlPromise:function(o,p){return new UWA.Class.Promise(function(r,q){f._getAuthenticationUrl(o,p,function(s){r(s)},function(s){q(s)})})},_getAuthenticationUrl:function(o,s,r,p){var q=e.getPlatformWSUrl("3DPassport",s,"oauth/authenticate/"+o,null);k.authenticatedRequest(q,{type:"json",method:"GET",proxy:"passport",headers:e.getHeaders(),timeout:600000,onComplete:function(t){if(t.redirect_uri){r(t.redirect_uri)}else{p(m.authenticationError)}},onFailure:function(t,u){console.log("_getAuthenticationUrl:Failure..."+t);f.onWebServiceError(p,t,u)},ontimeout:function(){console.log("_getAuthenticationUrl: A connection timeout occurred.");f.onWebServiceError(p,null,d.connectionTimeout)}})},showWebServiceError:function(p,o,t){var s=null;var u=null;if(typeof o==="function"){u=o}else{s=o;u=t}var r=p;if(p.hasOwnProperty("error")){r=p.error}else{if(p.hasOwnProperty("message")){r=p.message}}var q=f.parseWebServiceError(r,s);u(q)},parseWebServiceError:function(o,q){var p=o;if(q&&typeof q==="object"){if(q.error&&q.error.message){p=q.error.message}else{if(q.message){p=q.message}else{if(q.errorMessage){p=q.errorMessage}}}}else{if(typeof o==="string"){if(o.startsWith("NetworkError:")){if(o.endsWith('return ResponseCode with value "0".')){p=m.noConnection}else{if(o.endsWith('return ResponseCode with value "401".')||o.endsWith('return ResponseCode with value "403".')){p=m.unauthorized}else{p=m.webServiceError}}}else{if(o==="null"){p=m.webServiceError}}}}return p},onWebServiceError:function(t,q,p,o,r){var s=f.parseWebServiceError(q,p);t(s,o,r)},getCurrentAppName:function(p){var o=null;if(!p){return o}if(p.hasOwnProperty("widget")&&(typeof p.widget==="object")){if(p.widget.hasOwnProperty("data")&&(p.widget.data.hasOwnProperty("appId")||p.widget.data.hasOwnProperty("x3dAppId"))){if(p.widget.data.hasOwnProperty("appId")){o=p.widget.data.appId}else{if(p.widget.data.hasOwnProperty("x3dAppId")){o=p.widget.data.x3dAppId}}}}else{if(p.hasOwnProperty("options")){if(p.options.hasOwnProperty("x3dAppId")&&(p.options.x3dAppId=="ENOPRSU_AP"||p.options.x3dAppId=="ENOPSTR_AP")){o=p.options.x3dAppId}}else{if(typeof widget!=="undefined"){if(widget.hasOwnProperty("data")&&widget.data.hasOwnProperty("appId")){o=widget.data.appId}}}}return o},getDeletedItems:function(q,o){var p=this;e.app_initialization(function(){f.getSecurityContext(this.tenant,function(t){var s=e.get3DSpaceWSUrl(p.tenant,"/resources/lifecycle/Delete/deleteditems",null);var v=function(w){console.log("getDeletedItems: onComplete:"+w);q(w)};var r=function(w,y){var x=f.parseWebServiceError(w,y);console.log("Failed to retrive data from the server");o(x)};var u=function(w){console.log("Timeout error");o(m.timeout)};k.authenticatedRequest(s,{method:"POST",headers:e.getHeaders(t),timeout:600000,onComplete:v,data:"",onFailure:r,ontimeout:u,type:"json"})})})},isDECType:function(o){return o.startsWith("CAT")},_getAppId:function(o){try{return o.getValue("appId")}catch(p){return""}},isInLifecycleWidget:function(o){if(f._getAppId(o)==="ENOLCMI_AP"){return true}return false},isInPSEditorWidget:function(o){if(f._getAppId(o)==="ENOPSTE_AP"){return true}return false},isInXCADEditorWidget:function(o){if(f._getAppId(o)==="ENOSTDE_AP"){return true}return false},translationServicePromise:function(q,p){var o=this;return new UWA.Class.Promise(function(s,r){o.post(q,"/resources/lifecycle/util/i18n",p,function(t){s(t)},function(t){r(t)})})}});return f});define("DS/LifecycleServices/Refresh",["UWA/Class","DS/LifecycleServices/LifecycleServices","DS/LifecycleServices/LifecycleServicesSettings","DS/LifecycleServices/NotificationPublish","DS/LifecycleCmd/MessageMediator",],function(a,b,f,d,c){var e=a.singleton({init:function(g){c.addEvent("onModification",function(h){this._refreshCb(h)},this)},setContext:function(g){if(g==null){return}this.context=g},_refreshCb:function(h){var g;if(h.context==null){console.warn("No context sent for refresh");g=this.context}else{g=h.context;h.context=null}this._refresh(h,g)},_refresh:function(j,i){var h=b.getCurrentAppName(i);var g=f.getCurrentFolderID();var k=f.getTenant();if(!k){k=(typeof(widget)!=="undefined"&&widget)?widget.getValue("x3dPlatformId"):null}this.refreshEditors(g,j,h,i,function(){var n=["ENOLCMI_AP","DELMGA_AP","DELMFN_AP","X3DRYAP_AP","ENORETV_AP","ENOPSTR_AP","ENXENG_AP"];if(typeof i.refreshView==="function"&&n.indexOf(h)>-1){i.refreshView(j)}var o=null;if(UWA.is(i.getUUID,"function")){o=i.getUUID()}var m="Lifecycle.Modification";var l={};l={From:"Lifecycle",Refresh:j,AppID:h,OriginID:o,tenant:k};d.publish(m,l)})},refreshEditors:function(g,p,i,n,r){var s=0;if(p.hasOwnProperty("created")){s+=p.created.length}if(p.hasOwnProperty("modified")){s+=p.modified.length}if(p.hasOwnProperty("deleted")){s+=p.deleted.length}if(p.hasOwnProperty("restored")){s+=p.restored.length}if(s>0){var q=[];var h=[];if(p.hasOwnProperty("created")){p.created.forEach(function(v){if(v.hasOwnProperty("refreshPSD")&&v.refreshPSD&&i=="ENOPRSU_AP"){h.push(v.physicalid)}var w=true;if(v.hasOwnProperty("folders")&&g){var u=v.folders;if(u.indexOf(g)==-1){w=false}}if(w){if(g==null&&v.hasOwnProperty("folders")&&v.folders.length>0&&v.folders[0]){g=v.folders[0]}if(g){var t=[g,v.physicalid];q.push(t)}}})}if(h.length>0){if(typeof n.author==="function"){if(n&&typeof n.add==="function"){n.author(true);n.add({pids:h})}}}var k=[];var m=[];var o=[];var j="deleted";var l=false;if(p.hasOwnProperty("deleted")){p.deleted.forEach(function(t){m.push(t.physicalid);if(t.operation==="PhysicalDeleteAfterLogical"){j="physicaldeleteafterlogical"}if(t.impl&&(t.impl.contains("Workspace_Vault")||t.impl.contains("Workspace"))){l=true}})}if(p.hasOwnProperty("modified")){p.modified.forEach(function(t){k.push(t.physicalid)})}if(p.hasOwnProperty("restored")){p.restored.forEach(function(t){o.push(t.physicalid)})}require(["DS/PADUtils/PADCommandProxy","DS/PADUtils/PADSession","i18n!DS/PADUtils/assets/nls/PADUtils.json"],function(w,v,x){var z=w.create();if(l){var y={};y.deleted=m;var u={};u.authored=y;n.author(true);n.onRefresh(u);z.destroy()}else{if(v){v.setAuthoringState(true,x.PADSession_disabling_index_authoring,false)}var t={authored:true};z.authored(t);var y={};if(k.length>0){y.modified=k}if(m.length>0){y[j]=m}if(q.length>0){y.connected=q}if(o.length>0){y.restored=o}var u={};u.authored=y;z.refresh(u);z.destroy()}r()},function(t){r()})}},});return e});define("DS/LifecycleServices/LifecycleCommandManager",["css!DS/LifecycleServices/LifecycleServices","UWA/Core","UWA/Controls/Abstract","DS/UIKIT/Input/Button","DS/PlatformAPI/PlatformAPI","DS/LifecycleServices/LifecycleServices","DS/LifecycleServices/LifecycleServicesSettings","DS/UIKIT/Accordion","DS/WAFData/WAFData","i18n!DS/LifecycleWidget/assets/nls/LifecycleWidgetNls"],function(f,g,d,e,j,c,b,k,i,a){var h=d.extend({tenant:null,init:function(){var l=this;this.options=[]},getOptions:function(l,o,m){var n=this;c.getSecurityContextPromise(this.tenant,m).then(function(p){n._getOptions(l,o,p)})["catch"](function(p){o(c.parseWebServiceError(p))})},_getOptions:function(o,n,m){var q=function(s,r){if(typeof(n)==="function"){n(s,r)}};var l=this;var p=b.get3DSpaceWSUrl(l.tenant,"/resources/lifecycle/"+o.command+"/options",null);i.authenticatedRequest(p,{method:"POST",type:"json",headers:b.getHeaders(m),timeout:600000,data:JSON.stringify(o),onComplete:function(s){console.log("options for "+o.command+": COMPLETED");console.log(s);var r={};r.logicalDeleteSupported=false;if(s.results&&s.results.length>0){l.options=s.results[0].options;if(s.results[0].hasOwnProperty("logicalDelete")){r.logicalDeleteSupported=s.results[0].logicalDelete}r.objects=s.results[0].objects||[]}r.options=l.options?l.options:[];r.report=s.report;r.status=s.status;if(r.status==="failure"){q(r.report[0].error,r)}else{l.dispatchEvent("onCompleteGetOptions",r)}},onFailure:function(r,s){console.log("options:Failure..."+r);q(c.parseWebServiceError(r,s))},ontimeout:function(){console.log("options: A connection timeout occured.");q()},})},buildOptionPanel:function(l){var m=this;var n=document.createElement("div");n.className="lifecycle-options";if(typeof l!="undefined"){l.forEach(function(q){var s=q.key;var t=q.type;var p=q.nlsKey;if(typeof p==="undefined"){p=s}var w=q.value;var o=q.availability;if(typeof o==="undefined"){o=true}var v=document.createElement("div");v.className="lifecycle-option";v.dataset.optionType=q.type;v.dataset.optionKey=q.key;var r=document.createElement("div");r.className="lifecycle-textOptionKey";var x=document.createElement("b");x.innerHTML=p;r.appendChild(x);if(t==="text"){if(typeof w==="undefined"){w=""}var y=document.createElement("div");y.className="input-validation-container";var u=document.createElement("input");u.className="lifecycle-option-"+s;u.type=t;u.name=s;u.value=w;u.disabled=!o;u.addEventListener("blur",function(){q.value=u.value;var z={options:m.options};m.dispatchEvent("onModifyOptions",z)},true);v.appendChild(r);y.appendChild(u);v.appendChild(y)}else{if(t==="checkbox"){if(typeof w==="undefined"){w=false}var u=document.createElement("input");u.className="lifecycle-option-"+s;u.type=t;u.name=s;u.disabled=!o;u.checked=w;u.addEventListener("change",function(){q.value=u.checked;var z={options:m.options};m.dispatchEvent("onModifyOptions",z)});v.appendChild(u);v.appendChild(r)}else{if(t==="radio"){}else{if(t==="accordion"){new k({className:"filled",items:[{title:p,content:UWA.createElement("div"),}],events:{onOpen:function(){var z=this.items[0].elements.content||this.items[0].content;m.dispatchEvent("onOpenAccordion",{div:z})},onClose:function(){m.dispatchEvent("onCloseAccordion")}},}).inject(v)}}}}n.appendChild(v)})}return n},findObjectDerivedFromSelection:function(p,t){var s=[];for(var r=0;r<p.length;r++){var m=p[r];if(typeof m!="undefined"){var n=m["attribute[PLMReference.V_DerivedFrom]"];var o=m.derivedFromPhysicalid;if(typeof o==="undefined"){o=m.derivedfromphysicalid}if(typeof n==="undefined"&&typeof o==="undefined"){s.push(m)}else{for(var q=0;q<t.length;q++){var l=t[q];if(typeof l!="undefined"){var u=l.physicalid;if(n===u||o===u){s.push(m);break}}}}}}return s},setTenant:function(l){this.tenant=l}});return h});define("DS/LifecycleServices/TranslationService",["UWA/Core","UWA/Controls/Abstract","UWA/Class/Promise","DS/LifecycleCmd/Set","DS/LifecycleCmd/Dictionary","DS/LifecycleServices/LifecycleServices"],function(e,f,d,c,b,a){return f.extend({translationFailure:false,init:function(g){this.states=new b();this.types=new c();this.handleError=g&&g.handleError||false},addStateAndType:function(h,g){this.states.add(h,{type:g})},addStateAndId:function(g,h){this.states.add(g,{physicalid:h})},addStateAndPolicy:function(g,h){this.states.add(g,{policy:h})},addType:function(g){this.types.add(g)},initAsync:function(h){var g=this;return new UWA.Class.Promise(function(j,i){a.translationServicePromise(h,g._createPayload()).then(function(k){g._parseResponse(k);j()},function(k){if(g.handleError){console.log("TranslationService translation failed: ",k);g.translationFailure=true;j()}else{i(k)}})})},translateState:function(g){if(this.stateNls&&this.stateNls.contains(g)){return this.stateNls.find(g)}return g},translateType:function(g){if(this.typeNls&&this.typeNls.contains(g)){return this.typeNls.find(g)}return g},_createPayload:function(){var g=this;var h={states:[],types:[]};this.states.each(function(j,i){h.states.push(g._createStatePayload(j,i))});this.types.each(function(i){h.types.push(i)});return h},_createStatePayload:function(h,g){var i={state:h};return UWA.merge(i,g)},_parseResponse:function(j){var h=this;this.stateNls=new b();var g=0;this.states.each(function(i){if(j.states&&j.states.length>g){h.stateNls.add(i,j.states[g++])}else{h.stateNls.add(i,i)}});this.typeNls=new b();g=0;this.types.each(function(i){if(j.types&&j.types.length>g){h.typeNls.add(i,j.types[g++])}else{h.typeNls.add(i,i)}})}})});define("DS/LifecycleServices/OSLCServicesHelper",["UWA/Class","DS/LifecycleServices/XMLDocHelper","DS/LifecycleServices/LifecycleServices"],function(b,d,c){var a={ServiceProvider:b.extend({xmlDoc:undefined,operationTypes:{CREATION_DIALOG:"oslc:creationDialog",SELECTION_DIALOG:"oslc:selectionDialog"},init:function(e){this.xmlDoc=d.loadXMLDoc(e)},getServiceDetails:function(m,n,g,s){var h=[],f,m=d.filterDescendants([this.xmlDoc],{tag:"oslc:ServiceProvider",attrList:{"rdf:about":{value:m,allowPartialMatch:true}}});if(m.length===1){f=d.filterDescendants(m,{tag:n});f=d.filterIfDescendantElementExists(f,{tag:"oslc:resourceType",attrList:{"rdf:resource":{value:g}}});if(s){f=d.filterIfDescendantElementExists(f,{tag:"oslc:usage",attrList:{"rdf:resource":{value:"#default",allowPartialMatch:true}}})}for(var q=0,t=f.length;q<t;q++){var e=d.getChildren(d.filterChildren(f.slice(q,q+1))[0]);var r={};for(var p=0,o=e.length;p<o;p++){var k=e[p];var l=d.getNodeInfo(k);r[l.tag]=l}h.push(r)}}return h}}),ProjectAreaCatalog:b.extend({xmlDoc:undefined,serviceProviderList:[],init:function(j){this.serviceProviderList.length=0;this.xmlDoc=d.loadXMLDoc(j);var g=d.filterDescendants([this.xmlDoc],{tag:"oslc:ServiceProvider"});for(var f=0,e=g.length;f<e;f++){var h=d.getNodeInfo(g[f]);var k={};k.url=h.attrList["rdf:about"];k.title=d.getNodeInfo((d.filterChildren([g[f]],{tag:"dcterms:title"}))[0]).text;k.details=d.getNodeInfo((d.filterChildren([g[f]],{tag:"oslc:details"}))[0]).attrList["rdf:resource"];this.serviceProviderList.push(k)}this.serviceProviderList.sort(function(l,i){var n=l.title.toUpperCase();var m=i.title.toUpperCase();if(n<m){return -1}if(n>m){return 1}return 0})}}),getProxyObjectExternalDetails:function(e,g,f){c.oslcRequest(e.tenantId,e.proxyService,e.OSLCResource,{method:"GET",headers:{Accept:"application/rdf+xml"},onSuccess:function(i){var l=d.loadXMLDoc(i);var h=d.filterDescendants([l],{tag:"rdf:Description"});var j=d.getNodeInfo((d.filterChildren(h,{tag:"dcterms:identifier"}))[0]).text;var n=d.getNodeInfo((d.filterChildren(h,{tag:"dcterms:title"}))[0]).text;var k=d.getNodeInfo((d.filterChildren(h,{tag:"dcterms:modified"}))[0]).text;var m;if(e.repositoryRootURL&&e.OSLCResource.startsWith(e.repositoryRootURL)){m=e.OSLCResource.substring(e.repositoryRootURL.length)}else{m=e.OSLCResource}e.onSuccess({type:e.proxyType,dataelements:{Proxy_Id:j,Proxy_Service:e.proxyService,Proxy_Tenant:e.tenantId,Proxy_URL:m,Proxy_Title:n,Proxy_Modified:k,Proxy_State:""}})},onError:e.onError})},updateProxyObject:function(e){UWA.Class.Promise.all([c.getCsrfKeyPromise(e.tenantId),c.getSecurityContextPromise(e.tenantId)]).then(function(f){e.data.csrf=f[0];c.post(e.tenantId,"/resources/v1/modeler/e6wproxy",e.data,e.onSuccess,e.onError)})["catch"](function(f){e.onError(f)})}};return a});