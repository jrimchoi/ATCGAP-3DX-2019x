define("DS/UIBehaviors/Kinetic",["UWA/Core","UWA/Event","DS/Core/Core","DS/Core/Events","UWA/Class","DS/Core/ModelEvents","DS/Core/PointerEvents"],function(g,k,i,c,a,b,h){var j=false;var d=10;function m(o,n){if(o===undefined){o={x:0,y:0}}if(n===undefined){n={x:0,y:0}}return{x:o.x-n.x,y:o.y-n.y}}function l(o,n){return{x:o.x+n.x,y:o.y+n.y}}function f(){return{x:0,y:0}}var e=a.extend({defaultOptions:{scrollX:true,scrollY:true,snap:true,viewport:null,range:{xMin:0,xMax:10000,yMin:0,yMax:10000,},sideBorderSize:30,duration:100,viscosity:0.2},init:function(n){this.options=g.extend(this.defaultOptions,n);this._parent(n);this._view,this._min,this._max,this._offset,this._initialPosition,this._pressed,this._xform,this._velocity=f(),this._frame=f(),this._timestamp,this._ticker,this._amplitude=f(),this._target=f(),this._timeConstant=f(),this._snap;this._isFromBorder=null;this._view=this.options.target;this._max=parseInt(getComputedStyle(this._view).height,10)-innerHeight;this._offset=this._min=f();this._pressed=false;this._timeConstant=this.options.duration;this._x=0;this._y=0;this._px=0;this._py=0;var o=this;this._xform="transform";["webkit","Moz","O","ms"].every(function(p){var q=p+"Transform";if(typeof o._view.style[q]!=="undefined"){o._xform=q;return false}return true});this._modelEvents=new b();this._buildTouchBorders();this._bindEvents()},_buildTouchBorders:function(){var n=this;this.elements={};this.elements.leftBorder=new g.Element("div",{styles:{position:"absolute",height:"100%",width:this.options.sideBorderSize,background:j?"rgba(0,125,0,0.3)":"",top:0}}).inject(this._view);this.elements.leftBorder.addEvent(h.POINTERUP,function(o){this.setStyles({width:n.options.sideBorderSize})});this.elements.leftBorder.addEvent(h.POINTERDOWN,function(o){this.setStyles({width:"100%"})});this.elements.rightBorder=new g.Element("div",{styles:{position:"absolute",height:"100%",width:this.options.sideBorderSize,background:j?"rgba(125,0,0,0.3)":"",top:0,right:0}}).inject(this._view);this.elements.rightBorder.addEvent(h.POINTERUP,function(o){this.setStyles({width:n.options.sideBorderSize});this._isFromBorder="right"});this.elements.rightBorder.addEvent(h.POINTERDOWN,function(o){this.setStyles({width:"100%"});this._isFromBorder="left"})},_bindEvents:function(){if(typeof window.ontouchstart!=="undefined"){this._view.addEventListener("touchstart",this._start.bind(this));this._view.addEventListener("touchmove",this.drag.bind(this));this._view.addEventListener("touchcancel",this._stop.bind(this));this._view.addEventListener("touchend",this._stop.bind(this))}this._view.addEventListener("mousedown",this._start.bind(this));this._view.addEventListener("mousemove",this.drag.bind(this));this._view.addEventListener("mouseleave",this._stop.bind(this));this._view.addEventListener("mouseup",this._stop.bind(this))},onAnimationEnd:function(n){return this._modelEvents.subscribe({event:"ANIMATION_END"},n)},onRelease:function(n){return this._modelEvents.subscribe({event:"_stop"},n)},_getPointerPosition:function(n){if(n.targetTouches&&(n.targetTouches.length>=1)){return{x:n.targetTouches[0].clientX,y:n.targetTouches[0].clientY}}return{x:n.clientX,y:n.clientY}},_registerPosition:function(n){if(this._offset&&this._snap){this._forceBeginPos={x:parseInt(n,10)/100*this._snap.x,y:0}}},_disableInteractions:function(){this._view.setStyles({pointerEvents:"none",background:"red"})},_enableInteractions:function(){this._view.setStyles({pointerEvents:"auto"})},getPosition:function(){return this._offset},getFinalPosition:function(){return this._target},getPositionPercent:function(){return this._offsetPercent},getFinalPositionPercent:function(){return{x:Math.min(Math.max((this._target.x/this._snap.x*100),this._min.x),this._max.x),y:Math.min(Math.max((this._target.y/this._snap.y*100),this._min.y),this._max.y)}},_observeParameters:function(){var p,n,u,s,q;if(this._pressed){p=Date.now();n=p-this._timestamp;this._timestamp=p;if(!this._prevOffset){this._prevOffset={x:0,y:0}}u={x:this._x-this._px,y:this._y-this._py,};this._px=this._x;this._py=this._y;this._prevOffset=this.offset;this._frame=this._offset;var t=1000;s=t*u.x/(1+n);q=t*u.y/(1+n);var r=0.8;var o=0.2;this._velocity={x:r*s+o*this._velocity.x,y:r*q+o*this._velocity.y}}},_resetParams:function(){this._px=0;this._py=0},_inertialScroll:function(){var n,o;if(this._amplitude&&!this._pressed){n=Date.now()-this._timestamp;o={x:-this._amplitude.x*Math.exp(-n/this._timeConstant),y:-this._amplitude.y*Math.exp(-n/this._timeConstant)};if(this.options.duration&&(o.x>5||o.x<-5||o.y>5||o.y<-5)){this.scroll(l(this._target,o));requestAnimationFrame(this._inertialScroll.bind(this))}else{this.scroll(this._target,true);if(this.options.duration){this._view.setStyles({transition:this._oldTransitionValue})}this._modelEvents.publish({context:this,event:"ANIMATION_END",data:{finalPositionInPixel:this.getFinalPosition(),finalPositionInPercent:this.getFinalPositionPercent(),fromBorder:this._isFromBorder?true:false,fromWhichBorder:this._isFromBorder}});this._isFromBorder=false;this._lastOffsetPercent=this._offsetPercent}}else{this._modelEvents.publish({context:this,event:"ANIMATION_END",data:{finalPositionInPixel:this.getFinalPosition(),finalPositionInPercent:this.getFinalPositionPercent(),fromBorder:this._isFromBorder?true:false,fromWhichBorder:this._isFromBorder}});this._isFromBorder=false;this._lastOffsetPercent=this._offsetPercent}},_start:function(o){o.preventDefault();if(j){console.warn("start")}this._pressed=true;this._initialPosition=this._getPointerPosition(o);this._velocity=this._amplitude=f();this._frame=this._offset=this._target;this._timestamp=Date.now();var n=this.options.viewport?this.options.viewport:this._view.getParent().getDimensions();this._min={x:this.options.range.xMin,y:this.options.range.yMin};this._max={x:this.options.range.xMax/100*n.width,y:this.options.range.yMax/100*n.height};this._snap={x:n.width,y:n.height};this._oldTransitionValue=this._view.getStyle("transition");this._view.setStyles({transition:"none"});clearInterval(this._ticker);this._ticker=setInterval(this._observeParameters.bind(this),100);return false},drag:function(n){if(j){console.log("pointermove")}var p,o;if(this._pressed){p=this._getPointerPosition(n);o=m(this._initialPosition,p);if(o.x>d||o.x<-d||o.y>d||o.y<-d){this._initialPosition=p;if(this._forceBeginPos){this._offset=m(this._forceBeginPos,p);this._offset.x=-this._forceBeginPos.x;this._forceBeginPos=null}this.scroll(l(this._offset,o))}}n.preventDefault();return false},scroll:function(o,n){this._x=this._offset.x=(!this.options.scrollX)?0:o.x;this._y=this._offset.y=(!this.options.scrollY)?0:o.y;if(this._x){this._x=this._offset.x=(o.x>this._max.x)?this._max.x:(o.x<this._min.x)?this._min.x:o.x}if(this._y){this._y=this._offset.y=(o.y>this._max.y)?this._max.y:(o.y<this._min.y)?this._min.y:o.y}this._offsetPercent={x:this._offset.x/this._snap.x*100,y:this._offset.y/this._snap.y*100};if(j){console.log("-- scroll --",o.x,":",this._offset.x,this._snap.x,"=",this._offsetPercent.x)}if(this.options.duration||n){this._view.style[this._xform]="translate3d("+(-this._offsetPercent.x)+"%,"+(-this._offsetPercent.y)+"%, 0)"}this.elements.leftBorder.setStyles({left:this._offsetPercent.x+"%"});this.elements.rightBorder.setStyles({right:-this._offsetPercent.x+"%"})},_stop:function(p){if(this._pressed){if(j){console.warn("stop")}this._pressed=false;var o=this.options.viewport?this.options.viewport:this._view.getParent().getDimensions();this._snap={x:o.width,y:o.height};clearInterval(this._ticker);this._target=this._offset;if(j){console.log("target",this._target);console.log("delta",this._delta);console.log("velocity",this._velocity)}if(this._velocity.x>10||this._velocity.x<-10||this._velocity.y>10||this._velocity.y<-10){var n=0.8;this._amplitude={x:n*this._velocity.x,y:n*this._velocity.y,};this._target=l(this._offset,this._amplitude)}this._target={x:Math.round(this._target.x/this._snap.x)*this._snap.x,y:Math.round(this._target.y/this._snap.y)*this._snap.y,};this._amplitude=m(this._target,this._offset);this._timestamp=Date.now();if(this._velocity.x||this._velocity.y){this._modelEvents.publish({context:this,event:"_stop",data:{finalPositionInPixel:this.getFinalPosition(),finalPositionInPercent:this.getFinalPositionPercent(),fromBorder:this._isFromBorder?true:false,fromWhichBorder:this._isFromBorder}});this._isFromBorder=false;requestAnimationFrame(this._inertialScroll.bind(this))}else{this._view.setStyles({transition:this._oldTransitionValue})}}}});return e});define("DS/UIBehaviors/DragAndDropManager",["UWA/Core","UWA/Event","DS/Core/Core","DS/Core/Events","UWA/Class","UWA/Utils"],function(g,b,f,a,e,d){var c=e.singleton({defaultOptions:{},init:function(i,h){this.options=g.extend(this.defaultOptions,h);this._parent(h);this.subUid=-1;this._data=[];this._globalData=null},storeGlobalData:function(h){this._globalData=h},storeData:function(j,i){var h="WEBUX_DND_TOKEN|"+d.getUUID();this._data[h]={data:j,dom:i};return h},isTokenValid:function(h){return h.indexOf("WEBUX_DND_TOKEN|")!==-1},getGlobalData:function(){var h=this._globalData;return h},removeGlobalData:function(){delete this._globalData},getDataFromToken:function(h,i){if(i===undefined){i=true}if(h&&h!==""){if(this.isTokenValid(h)){if(this._data[h]&&this._data[h].data){return this._data[h].data}}else{console.warn("WebUX Drag and Drop Token is not valid. It seems you use setDataTransfer to store customData. Please be aware that, in this case, from, and infos parameters could be wrong in the drag and drop callback of this component.")}}},getDataFromDom:function(k,i){if(i===undefined){i=true}function h(m,l,n){return k===m.dom}function j(m,o,n){var l=null;m.some(function(q,p){return o.call(n,q,p,m)?((l=q),true):false});return l}return j(this._data,h,this)}});return g.namespace("UIBehaviors/DragAndDropManager",c)});define("DS/UIBehaviors/PopupManager",["UWA/Core","UWA/Class","DS/TreeModel/TreeNodeModel","DS/Utilities/Dom"],function(e,b,d,a){var c=b.singleton({defaultOptions:{treePopup:null,lastPopup:null},init:function(f){this._parent(f)},add:function(f){if(!this.find(f)){var g=this.getContainingPopup(f.target);if(g){if(g.getChildren()){this.close(g.getChildren()[0])}this.lastPopup=g}else{this.close(this.treePopup);this.treePopup=null;this.lastPopup=null}var h=new d({grid:{data:f}});(this.lastPopup)?this.lastPopup.addChild(h):this.treePopup=h;this.lastPopup=h}},remove:function(f){this.close(this.find(f))},removeChild:function(f){var g=this.find(f);if(g&&g.getChildren()){this.close(g.getChildren()[0]);this.lastPopup=g}},getContainingPopup:function(h){var g=(e.is(h,"element"))?g=e.extendElement(h):g=h.getContent();if(g){var f=a.firstParentWithClass(g,"wux-controls-popup");if(f&&f.dsModel){return this.find(f.dsModel)}}},find:function(g){if(g==null){return}var f=this.treePopup;while(f&&f.options.grid.data!==g&&f.getChildren()!==null){f=f.getChildren()[0]}if(f&&f.options.grid.data===g){return f}},close:function(g){if(g==null){return}g.options.grid.data.visibleFlag=false;g.options.grid.data=null;g.processDescendants({processNode:function(h){h.nodeModel.options.grid.data.visibleFlag=false;h.nodeModel.options.grid.data=null;if(h.nodeModel.getParent()){h.nodeModel.remove()}}});if(g===this.treePopup){this.treePopup=null;this.lastPopup=null}else{var f=g.getParent();if(f){g.remove();this.lastPopup=f}}},_getTreePopup:function(){return this.treePopup},_getLastPopup:function(){return this.lastPopup}});return c});define("DS/UIBehaviors/ContextualMenuManager",["UWA/Core","UWA/Controls/Abstract","DS/Core/PointerEvents","UWA/Utils"],function(e,d,a,b){var c=d.singleton({defaultOptions:{},init:function(f){this._parent(f);this._buildView();this._listeners=Object.create(null)},_populateContextualMenu:function(g){var f,h;if(g&&g!==document&&g.hasAttribute("wux-contextualmenu-id")){f=g.getAttribute("wux-contextualmenu-id");h=this._listeners[f];this._buildMenu(h);this._populateContextualMenu(g.parentNode)}},_buildView:function(){var j=this;this.elements.container=new e.Element("div",{"class":"wux-uibehaviors-contextualmenu",}).hide().inject(document.body);this.elements.container.addEventListener("contextmenu",function h(k){k.preventDefault()});window.addEventListener(document.body.onwheel!==undefined?"wheel":"mousewheel",function g(k){j._hideContextualMenuIfOutside(k.target)},true);window.addEventListener("mousedown",function f(k){j._hideContextualMenuIfOutside(k.target)},true);window.addEventListener("touchstart",function i(l){Array.prototype.forEach.call(l.changedTouches,function k(m){j._hideContextualMenuIfOutside(m.target)})},true)},_buildMenu:function(k){var f,h,j,g;var i=this;if(k){if(typeof k.nodes==="function"){f=k.nodes()}else{f=k.nodes}if(f){f.forEach(function(n){var m=(n.sensitivity&&n.sensitivity.toLowerCase()==="disabled");if(n.type&&n.type==="separator"){h=new e.Element("ul",{"class":"wux-ui-stack-h wux-uibehaviors-contextualmenu-separator",styles:{display:"block"}}).inject(i.elements.container)}else{h=new e.Element("ul",{"class":"wux-ui-stack-h wux-uibehaviors-contextualmenu-node",styles:{display:"block"}}).inject(i.elements.container);if(m){h.classList.add("wux-uibehaviors-contextualmenu-node-disabled")}j=new e.Element("li",{"class":"wux-uibehaviors-contextualmenu-node-icon",styles:{"background-image":n.icon}}).inject(h);g=new e.Element("li",{"class":"wux-uibehaviors-contextualmenu-node-label",html:n.label,}).inject(h)}if(n.callback&&!m){h.addEventListener("click",function l(o){i.elements.container.hide();n.callback.call(k.context,n.data)})}})}}},_showContextualMenu:function(){var g;var f=true;for(g=this.elements.container.firstChild;g&&f;g=g.nextSibling){if(g.firstChild.style.backgroundImage!==""){f=false}}if(f){this.elements.container.addClassName("wux-uibehaviors-contextualmenu-no-icons")}else{this.elements.container.removeClassName("wux-uibehaviors-contextualmenu-no-icons")}this.elements.container.show()},_hideContextualMenuIfOutside:function(f){for(;f&&f!==this.elements.container;f=f.parentNode){}if(!f){this.elements.container.hide()}},_onFireEvent:function(f){this.show(f.currentTarget,[f.pageX,f.pageY]);f.stopPropagation();f.preventDefault();return false},_onFireEventTouch:function(f){if(a.isTouchEvent(f)){this.show(f.currentTarget,[f.pageX,f.pageY]);f.stopPropagation();f.preventDefault();return false}},onReady:function(f){this.listen(f)},listen:function(g){if(!g.target.hasAttribute("wux-contextualmenu-id")){var f=b.getUUID();this._listeners[f]=g;g.target.setAttribute("wux-contextualmenu-id",f);g.target.addEventListener("contextmenu",this._onFireEvent.bind(this));g.target.addEventListener(a.LONGHOLD,this._onFireEventTouch.bind(this))}else{}},forget:function(g){if(g.target.hasAttribute("wux-contextualmenu-id")){var f=g.target.getAttribute("wux-contextualmenu-id");delete this._listeners[f];g.target.removeAttribute("wux-contextualmenu-id");g.target.removeEventListener("contextmenu",this._onFireEvent.bind(this));g.target.removeEventListener(a.LONGHOLD,this._onFireEventTouch.bind(this))}},show:function(m,l,i){var j=35;var n=-18;i=false;this.elements.container.hide();this.elements.container.empty();if(m.nodes){this._buildMenu(m)}else{this._populateContextualMenu(m)}if(this.elements.container.childElementCount>0){var h=l[0];var k=l[1];if(i){h+=j;k+=n}this.elements.container.setStyles({left:h,top:k});this._showContextualMenu();var o=window.innerWidth;var g=window.innerHeight;var f=this.elements.container.getBoundingClientRect();if(f.right>o||f.bottom>g){console.log("reposition");h=l[0];k=l[1];if(f.right>o){h-=f.width;j=-j}if(f.bottom>g){k-=f.height}if(i){h+=j;k+=n}if(h<0){h=0}if(k<0){k=0}this.elements.container.setStyles({left:h,top:k})}}}});return c});define("DS/UIBehaviors/SwipeableMenu",["UWA/Core","DS/Core/Core","UWA/Controls/Abstract","DS/Core/PointerEvents"],function(g,d,f,c){var e=["webkit","moz","MS","o",""];function b(h,i,k){for(var j=0;j<e.length;j++){if(!e[j]){i=i.toLowerCase()}h.addEventListener(e[j]+i,k,false)}}var a=f.extend({defaultOptions:{target:null,menu:[],menuItemWidth:60},init:function(h){this._parent(h);this._isOpen=false;this._buildView();var i=this;this.options.menu.reverse().forEach(function(k,j){i._addMenuItem(k,j)});this._listenEvents();this._indexPositions(true);this.close()},_buildView:function(){this.elements.container=new g.Element("div",{"class":"wux-swipeablemenu",styles:{overflow:"hidden"}});this.elements.layersContainer=new g.Element("ul",{"class":"wux-ui-stack-h",styles:{position:"relative"}}).inject(this.elements.container);this.elements.layers=[];this.elements.cover=new g.Element("li",{"class":"",styles:{position:"relative",display:"block",width:this.options.target.getStyle("width"),height:this.options.target.getStyle("height"),zIndex:this.options.menu.length+1}}).inject(this.elements.layersContainer);this.options.target.inject(this.elements.cover)},_indexPositions:function(h){this._listOfMenuPositionAtBegin=[];this._listOfMenuPositionAtEnd=[];var l=0;for(var j=0;j<this.options.menu.length;j++){var k=this.options.menuItemWidth;this._listOfMenuPositionAtBegin[j]=-k;if(!h){this.elements.layers[j].setStyles({width:k,right:this._listOfMenuPositionAtBegin[j]})}l=k*(j+1);this._listOfMenuPositionAtEnd[j]=l;this._endPosition=l}return l},_listenEvents:function(){var n=this;var q,k;n._isPressed=false;var l;var o=this.options.menu.length;var j=false;function i(r){j=false;n._isPressed=true;l=n._indexPositions();q={x:r.clientX,y:r.clientY};n.elements.cover.setStyles({transition:"none",});n.options.menu.forEach(function(t,s){n.elements.layers[s].setStyles({transition:"none",})})}function m(r){if(n._isPressed&&n.options.menu.length>0){k={x:r.clientX-q.x,y:r.clientY-q.y};if(n.elements.cover.getPosition().x<20){if(Math.abs(k.x)>10&&-k.x<l){n.elements.cover.setStyles({transform:"translate3d("+k.x+"px, 0,0)"});n.options.menu.forEach(function(v,t){var u=n.options.menuItemWidth;var s=Math.abs(k.x)/o*(t+1)-u;if(s<n._listOfMenuPositionAtEnd[t]){n.elements.layers[t].setStyles({right:s})}})}else{if(-k.x>=l){j=true;n.open()}}}else{h()}}}function h(r){n._isPressed=false;n._indexPositions(true);if(!j&&n._listOfMenuPositionAtBegin){n.close();n.options.menu.forEach(function(t,s){n.elements.layers[s].setStyles({transition:"all ease-in-out 0.2s",right:n._listOfMenuPositionAtBegin[s]})})}}var p=g.extendElement(document);this.elements.cover.addEvent(c.POINTERDOWN,i);p.addEvent(c.POINTERMOVE,m);p.addEvent(c.POINTERUP,h)},open:function(){var i=this;this.elements.cover.addEventListener("animationend",function(){console.log("--",i.elements.cover.getOffset())},false);b(this.elements.cover,"animationIteration",function(){console.log("--",i.elements.cover.getOffset())});this.elements.cover.setStyles({transition:"all ease-in-out 0.2s",transform:"translate3d("+-this._endPosition+"px, 0,0)"});var h={x:-this._endPosition};var j=this.options.menu.length;i.options.menu.forEach(function(n,l){var m=i.options.menuItemWidth;var k=Math.abs(h.x)/j*(l+1)-m;if(k<i._listOfMenuPositionAtEnd[l]){i.elements.layers[l].setStyles({right:k})}});this._isOpen=true},close:function(){var h=this;h._isPressed=false;h.elements.cover.setStyles({transition:"all ease-in-out 0.2s",transform:"translate3d(0, 0,0)"});this._isOpen=false},toggle:function(){if(this._isOpen){this.close()}else{if(this.options.menu.length>0){this.open()}}},_addMenuItem:function(i,h){var k=this;var j=g.extend({position:"absolute",padding:"0 10px",top:0,bottom:0,right:0,boxSizing:"border-box",lineHeight:this.options.target.getStyle("height"),background:i.styles.backgroundColor},i.styles);this.elements.layers[h]=new g.Element("li",{html:i.label,"class":"",styles:j}).inject(this.elements.layersContainer);this.elements.layers[h].addEvent(c.POINTERUP,function(){k.elements.cover.setStyles({transition:"all ease-in-out 0.2s",transform:"translate3d(0, 0,0)"});if(i.callback){i.callback.call(this)}})}});return a});define("DS/UIBehaviors/TooltipManager",["UWA/Core","UWA/Class"],function(d,a){var b=undefined;var c=a.singleton({_tooltipFrame:undefined,defaultOptions:{},init:function(e){this._parent(e);if(d.getGlobal().WUX!==undefined){b=WUX.PointerEvents}if(!b){require(["DS/Core/PointerEvents"],function(f){b=f})}},enable:function(){var e=this;if(b){e._handleEvents()}else{require(["DS/Core/PointerEvents"],function(f){b=f;e._handleEvents()})}},_getTooltipFrame:function(){if(this._tooltipFrame!==undefined){return this._tooltipFrame}},show:function(f){var e=this._getTooltipFrame();if(e&&f&&(f.dsModel||f.tooltipInfos)){if(f.dsModel&&e.target!==f.dsModel){e.target=f.dsModel}else{if(f.tooltipInfos&&e.target!==f){e.target=f}}e.touchMode=this.touchMode;e.show()}},hide:function(){var e=this._getTooltipFrame();if(e){e.visibleFlag=false}},_handleEvents:function(){var e=this;document.addEventListener(b.LONGHOLD,function(f){e.hide()});document.addEventListener(b.HOLD,function(i){if(b.isTouchEvent(i)){var f=e._getTooltipFrame();if(f){f.mousePosition={x:i.clientX,y:i.clientY}}var h=undefined;for(var g=i.target;g;g=g.parentNode){if(g.dsModel&&g.dsModel.tooltipInfos){h=g.dsModel;break}if(g.tooltipInfos){h=g;break}}if(h!==undefined){h.tooltipInfos.initialDelay=0;e.touchMode=true;f._lastShowPosition={x:i.clientX,y:i.clientY};e.show(h)}}});document.addEventListener(b.POINTERDOWN,function(k){var j=k.target;var f=e._getTooltipFrame();if(f&&f.visibleFlag){var i=false;if(f.target&&f.target.tooltipInfos){i=f.target.tooltipInfos._reachableState}if(!i){e.hide();return}var h=false;var l=false;for(var g in f.elements){if(f.elements.hasOwnProperty(g)&&f.elements[g]===j){h=true;l=(g==="moreHelp");break}}if(l){f.target.tooltipInfos.moreHelpCB()}else{if(!h){e.hide()}}}},true);document.addEventListener(b.POINTERMOVE,function(i){var f=e._getTooltipFrame();if(f&&f.visibleFlag){var j={x:i.clientX+window.pageXOffset,y:i.clientY+window.pageYOffset};var h=f.isPositionInRZ(j,"target");var g=f.isPositionInRZ(j,"tooltip");if(!h&&!g){f.mousePosition={x:i.clientX,y:i.clientY};if(f.target&&f.target.tooltipInfos&&f.target.tooltipInfos._reachableState){e.hide()}}}});document.addEventListener(b.POINTERUP,function(g){if(!b.isTouchEvent(g)){for(var f=g.target;f;f=f.parentNode){if((f.dsModel&&f.dsModel.tooltipInfos)||f.tooltipInfos){e.hide();break}}}},true);document.addEventListener("mouseleave",function(j){var f=e._getTooltipFrame();if(!f){return}var g=false;if(f.target&&f.target.tooltipInfos){g=f.target.tooltipInfos._reachableState}var k={x:j.clientX+window.pageXOffset,y:j.clientY+window.pageYOffset};var i=f.isPositionInRZ(k,"target");var h=f.isPositionInRZ(k,"tooltip");if(!i&&(!g||!h)){e.hide()}},true);document.addEventListener("mouseenter",function(j){if(b.isTouchEvent(j)){return}var g=e._getTooltipFrame();var h=false;if(g&&g.target&&g.target.tooltipInfos){h=g.target.tooltipInfos._reachableState}var k={x:j.clientX+window.pageXOffset,y:j.clientY+window.pageYOffset};if(h&&g.isPositionInRZ(k,"tooltip")){return}if(g){g.mousePosition={x:j.clientX,y:j.clientY}}var f=undefined;for(var i=j.target;i;i=i.parentNode){if(i.dsModel&&i.dsModel.tooltipInfos){f=i.dsModel.tooltipInfos;break}else{if(i.tooltipInfos){f=i.tooltipInfos;break}}}if(f){if(g&&(i.dsModel&&g.target!==i.dsModel||!i.dsModel&&i!==g.target)){e.hide();g._lastShowPosition={x:j.clientX,y:j.clientY};e.show(i)}}},true);document.addEventListener("keydown",function(f){e.hide()},true)}});return c});define("DS/UIBehaviors/CommandsRegistry",["UWA/Core"],function(b){function a(c){this._commands={};this._linkedCommandRegistry=c;return this}a.prototype.getLinkedCommandRegistry=function(){return this._linkedCommandRegistry};a.prototype.getCommand=function(c){if(this._commands[c]){return this._commands[c]}else{if(this._linkedCommandRegistry){return this._linkedCommandRegistry.getCommand()}}return null};a.prototype.dispatch=function(e,f){var d;var c=this.getCommand(e);if(c){d=c.call(f)}return d};a.prototype.registerCommand=function(c,d){this._commands[c]=d};a.prototype.destroy=function(){this._target=null};return a});define("DS/UIBehaviors/KeymapManager",["UWA/Core","DS/Utilities/Utils","DS/UIBehaviors/CommandsRegistry","DS/Utilities/Dom"],function(c,f,h,a){var b=30;var d=false;var e=null;var i=false;var j=function(r,l,z,k){if(r._domTarget){if(l!==undefined){if(d===false&&r._shouldProcessEvent({event:k})){var o=r._keymap.all;var m=r._keymap.defaultKey;var p=r._keymap[z];var x=false;var u,n,v,A,w,q;if(o){u=o[k.type];if(u){n=l.getCommand(u)}}if(p){v=p[k.type];if(v){A=l.getCommand(v)}}else{if(m){w=m[k.type];if(w){q=l.getCommand(w)}}}if(n||A||q){var t,y;a._pushUserInteractionContext();if(n){y=a._callMethodFromUIInteraction(r._jsModel,n,[k]);if(r._spyCB){r._spyCB({keymap:z,commandForKey:u})}}if(A){t=a._callMethodFromUIInteraction(r._jsModel,A,[k]);if(r._spyCB){r._spyCB({keymap:z,commandForKey:v})}}else{if(m){t=a._callMethodFromUIInteraction(r._jsModel,q,[k]);if(r._spyCB){r._spyCB({keymap:z,commandForKey:w})}}}a._popUserInteractionContext();if((t&&t.preventDefault)||(z==="space"&&(!k.target||(k.target.type&&k.target.type.indexOf("text")===-1)))){k.preventDefault()}if(k.type==="keyup"){if(r._infosOnKeyDown&&r._infosOnKeyDown[z]){for(var s in r._infosOnKeyDown[z]){if(typeof r._infosOnKeyDown[z][s]!=="undefined"){k[s]=r._infosOnKeyDown[z][s]}}r._infosOnKeyDown[z]=undefined;delete r._infosOnKeyDown[z]}}if(y&&y.infos){for(var s in y.infos){if(typeof y.infos[s]!=="undefined"){k[s]=y.infos[s]}}if(k.type==="keydown"){if(!r._infosOnKeyDown){r._infosOnKeyDown={};r._infosOnKeyDown[z]=t.infos}else{if(r._infosOnKeyDown[z]){for(var s in y.infos){r._infosOnKeyDown[z][s]=y.infos[s]}}else{r._infosOnKeyDown[z]=y.infos}}}}if(t&&t.infos){if(k.type==="keydown"){if(!r._infosOnKeyDown){r._infosOnKeyDown={};r._infosOnKeyDown[z]=t.infos}else{if(r._infosOnKeyDown[z]){for(var s in t.infos){r._infosOnKeyDown[z][s]=t.infos[s]}}else{r._infosOnKeyDown[z]=t.infos}}}for(var s in t.infos){if(typeof t.infos[s]!=="undefined"){k[s]=t.infos[s]}}}x=!(t&&t.stopPropagation===false)}else{if(k.type==="keyup"){if(r._infosOnKeyDown&&r._infosOnKeyDown[z]){for(var s in r._infosOnKeyDown[z]){if(typeof r._infosOnKeyDown[z][s]!=="undefined"){k[s]=r._infosOnKeyDown[z][s]}}r._infosOnKeyDown[z]=undefined;delete r._infosOnKeyDown[z]}}}if(x){k.stopPropagation();k.stopImmediatePropagation()}}}}};function g(m){this._keymap={};this._domTarget=m.target;this._jsModel=m.jsModel;if(!m.jsModel&&this._domTarget){this._jsModel=this._domTarget.dsModel}this._commandsRegistry=m.commandsRegistry;this._shouldProcessEvent=m.shouldProcessEvent||function(){return true};var l=0;var k;var n=this;this._processCB=function(q){var p=window.performance?performance.now():Date.now();var o=c.Event.whichKey(q);if((window.__karma__!==undefined)||(o!==k)||(e||q.type!==e.type)||(p-l>=b)){e=q;if(i){console.group("keystroke:"+o);console.time("process "+o)}j(n,n._commandsRegistry,o,q);if(i){console.groupEnd("keystroke:"+o);console.timeEnd("process "+o)}l=window.performance?performance.now():Date.now();k=o}else{if(i){console.log("Ignore keydown",p,l,p-l)}q.preventDefault();q.stopPropagation();q.stopImmediatePropagation()}};c.Element.addEvent.call(this._domTarget,"keydown",this._processCB);c.Element.addEvent.call(this._domTarget,"keyup",this._processCB);return this}g.prototype.destroy=function(){this._keymap=null;c.Element.removeEvent.call(this._domTarget,"keydown",this._processCB);c.Element.removeEvent.call(this._domTarget,"keyup",this._processCB)};g.prototype.wait=function(){d=true};g.prototype.listen=function(){d=false};g.prototype._getCurrentEvent=function(){return e};g.prototype.registerKeymap=function(l,m,k){this._keymap[l]={keydown:m,keyup:k}};g.prototype.spy=function(k){this._spyCB=k};g.prototype.unregisterKeymap=function(k){if(this._keymap[k]){delete this._keymap[k]}};g.prototype._getKeymap=function(){return this._keymap};return g});define("DS/UIBehaviors/Droppable",["UWA/Core","UWA/Event","DS/Core/Core","DS/Core/Events","UWA/Class","DS/UIBehaviors/DragAndDropManager"],function(g,b,f,a,c,d){var e=c.extend({defaultOptions:{scope:"",dataTransfer:{type:"Text"},onDragLeave:null,onDragOver:null},init:function(j,i,h){this.options=g.extend(this.defaultOptions,h);this._parent(h);this._uiTarget=i;this._objectTarget=j;this.enable()},_attachBehavior:function(h,i){if(this._uiTarget){this._uiTarget.addEventListener(h,i)}},_dettachBehavior:function(h){if(this._uiTarget){this._uiTarget.removeEventListener(h)}},enable:function(){var h=this;this._attachBehavior("dragover",function(i){i.preventDefault()});this._attachBehavior("dragover",function(i){if(h.options.onDragOver){h.options.onDragOver.call(h._objectTarget,i,h._uiTarget)}});this._attachBehavior("dragenter",function(i){if(h.options.onDragEnter){h.options.onDragEnter.call(h._objectTarget,i,h._uiTarget)}});this._attachBehavior("dragleave",function(i){if(h.options.onDragLeave){h.options.onDragLeave.call(h._objectTarget,i,h._uiTarget)}});this._attachBehavior("drop",function(k){k.preventDefault();k.stopPropagation();var i=k.dataTransfer.getData(h.options.dataTransfer.type);var j=d.getDataFromToken(i);d.removeGlobalData();if(h.options.drop){h.options.drop.call(h._objectTarget,k,h._uiTarget,j)}})},disable:function(){this._toggleBehaviors(false)}});return g.namespace("UIBehaviors/Droppable",e)});define("DS/UIBehaviors/Draggable",["UWA/Core","UWA/Event","DS/Core/Core","DS/Core/Events","UWA/Class","DS/UIBehaviors/DragAndDropManager","UWA/Controls/Abstract"],function(d,i,f,c,b,a,e){var g=false;var h=e.extend({defaultOptions:{scope:"",helper:null,onDragStart:null,onDrop:null,onDrag:null,onDragStop:null,onDragOver:null,dataTransfer:{type:"Text",data:null},data:null},init:function(l,k,j){this._parent(j);this._uiTarget=k;this._objectTarget=l;if(j){this._from=j.from||l;this._data=j.data;this.updateDataToBeTransferred({from:j.from||l,data:j.data});this._dataTransfer=this.options.dataTransfer}this.enable()},_toggleBehaviors:function(j){if(this._uiTarget){if(j){j="true"}else{j="false"}this._uiTarget.setAttribute("draggable",j)}},_attachBehavior:function(j,k){if(this._uiTarget){this._uiTarget.addEventListener(j,k)}},_dettachBehavior:function(j){if(this._uiTarget){this._uiTarget.removeEventListener(j)}},updateDataToBeTransferred:function(j){this._dataToBeTransferred=j},getTransferredData:function(){return this._dataToBeTransferred},addDataTransfer:function(j,k){},enable:function(){this._toggleBehaviors(true);var j=this;if(!this.options.helper){this.options.helper=this._uiTarget}this._uiTarget.addEventListener("dragstart",function(m){if(g){console.warn("DRAG",j.getTransferredData())}if(j._dataTransfer){var l=j.getTransferredData();var k=a.storeData(l,j._uiTarget);if(g){console.warn("DRAGGED DATA",l)}a.storeGlobalData(l);m.dataTransfer.setData(j._dataTransfer.type,k)}else{alert()}if(j.options.onDragStart){j.options.onDragStart.call(m,m,j.options.helper,j._uiTarget)}},true);this._attachBehavior("drag",function(k){if(j.options.onDrag){j.options.onDrag.call(k,k,j.options.helper)}});this._attachBehavior("drop",function(k){if(j.options.onDrop){j.options.onDrop.call(k,k,j.options.helper,j._objectTarget)}});this._attachBehavior("dragend",function(k){if(j.options.onDrag){j.options.onDragStop.call(k,k,j.options.helper)}})},disable:function(){this._toggleBehaviors(false)}});return h});