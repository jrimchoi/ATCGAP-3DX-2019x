define("DS/MPFActivationTokenModalComponent/ActivationTokenModal",["UWA/Core","UWA/String","UWA/Class/View","DS/UIKIT/Input/Button","DS/UIKIT/Input/Text","DS/UIKIT/Spinner","DS/UIKIT/Alert","i18n!DS/MPFActivationTokenModalComponent/assets/nls/ActivationTokenModalComponent"],function(h,b,a,f,c,d,e,i){var g=a.extend({className:"mpf-token-input",setup:function(j){var k=this;if(!(j)){j={}}this._parent(j);this.codeInput=new c({placeholder:i.get("enterCode"),multiline:false,maxlength:12,id:"token",events:{onKeyDown:k._checkStateButton.bind(this)}});this.button=new f({value:i.get("verify"),className:"verify",disabled:"true",events:{onClick:k._onClick.bind(this)}});this.alert=new e({closable:false,visible:true,maximumVisibleMessages:1})},render:function(){var j;j=h.createElement("form",{html:[this.codeInput,this.button,this.alert]});this.container.setContent(j);this.dispatchEvent("onRender");return this},_onClick:function(){var j=this;var k;k=new d();k.inject(document.getElement(".mpf-token-input button.verify"),"after");k.show();setTimeout(function(){k.hide();if(j.codeInput.getValue()==="000000000000"){j._displayAlreadyRegistratedMessage()}else{if(j.isCodeOK()){j._displayValidationMessage();j.codeInput.disable();j.dispatchEvent("validated")}else{j._displayErrorMessage()}}},2000)},_displayValidationMessage:function(){var j=this.alert.getMessages();if(j.length>0){this.alert.remove(j[0])}this.alert.add({className:"success",message:i.get("tokenSuccess")})},isCodeOK:function(){return this.codeInput.getValue().test(/[a-zA-Z0-9]{12}/)},_checkStateButton:function(){if(this.codeInput.getValue().length>0){this.button.enable()}else{this.button.disable()}},_displayErrorMessage:function(){var j=this.alert.getMessages();if(j.length>0){this.alert.remove(j[0])}this.alert.add({className:"error",message:i.get("tokenError")})},_displayAlreadyRegistratedMessage:function(){var j=this.alert.getMessages();if(j.length>0){this.alert.remove(j[0])}this.alert.add({className:"error",message:i.get("tokenAlreaydyUsed")})}});return g});