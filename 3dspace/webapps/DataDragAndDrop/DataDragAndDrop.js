/*! Copyright 2014 Dassault SystÃ¨mes */
define("DS/DataDragAndDrop/DataDragAndDrop",function(){function a(o,l){var m=l?"":"none",n=["WebkitTouchCallout","WebkitUserSelect","KhtmlUserSelect","MozUserSelect","MsUserSelect","UserSelect"];n.forEach(function(p){try{o.style[p]=m}catch(q){}})}function h(m,l){m.className=m.className.replace(new RegExp("(^|\\s)"+l+"(?:\\s|$)"),"$1")}function k(m,l){if(!e(m,l)){m.className=(m.className.trim()+" "+l).trim()}}function b(l,n,m){return(m)?(m+l+m).indexOf(m+n+m)>-1:l.indexOf(n)>-1}function e(m,l){return !!(m.className&&b(m.className,l," "))}function d(n,m,l){if(m.addEventListener){m.addEventListener(n,l,false)}else{if(m.attachEvent){m.attachEvent("on"+n,l,false)}}}function g(n,m,l){if(m.removeEventListener){m.removeEventListener(n,l,false)}else{if(m.detachEvent){m.detachEvent("on"+n,l)}}}function f(l){l.preventDefault&&l.preventDefault();l.returnValue=false;if((l.cancelable===undefined||l.cancelable===true)&&l.defaultPrevented===undefined){l.defaultPrevented=true}}function j(l){l.stopPropagation&&l.stopPropagation();l.cancelBubble=true}function i(l){j(l);f(l)}var c={draggable:function(m,l){var n;if(m&&m.nodeType!==1||(m._evts&&m._evts.drg)){return}m.setAttribute("draggable",true);m._evts=m._evts||{};m._evts.drg={};n={dragstart:function(o){a(this,false);o.dataTransfer.effectAllowed="all";try{if(l.data){o.dataTransfer.setData("text",l.data)}else{o.dataTransfer.setData("text",this.innerHTML)}}catch(p){}l.start&&l.start(this,o);k(this,"dragging")},dragend:function(o){a(this,true);l.stop&&l.stop(this,o);h(this,"dragging")}};Object.keys(n).forEach(function(o){m._evts.drg[o]=n[o];d(o,m,m._evts.drg[o])})},droppable:function(m,l){var n;if(m&&[1,9].indexOf(m.nodeType)===-1||(m._evts&&m._evts.drp)){return}m._evts=m._evts||{};m._evts.drp={};n={dragenter:function(o){l.enter&&l.enter(this,o)},dragover:function(o){if(!l.over||l.over&&l.over(this,o)!==false){f(o)}},dragleave:function(o){l.leave&&l.leave(this,o)},drop:function(o){i(o);l.drop&&l.drop(o.dataTransfer.getData("text"),this,o)}};Object.keys(n).forEach(function(o){m._evts.drp[o]=n[o];d(o,m,m._evts.drp[o])})},clean:function(l,m){function n(q,p){for(var o in q._evts[p]){if(q._evts[p].hasOwnProperty(o)){g(o,q,q._evts[p][o])}}}if(l&&l.nodeType!==1||!l._evts){return}if(!m||m==="drop"){n(l,"drp")}if(!m||m==="drag"){n(l,"drg");l.removeAttribute("draggable")}!m&&delete l._evts},on:function(n,l,m){[].forEach.call(n,function(o){c.draggable(o,m)});[].forEach.call(l,function(o){c.droppable(o,m)})},off:function(m,l){[].slice.call(m).concat([].slice.call(l)).forEach(function(n){c.clean(n)})}};return c});