/*!  Copyright 2014 Dassault Systemes. All rights reserved. */
define("DS/Web3DUXUtils/Web3DUXArrow",["DS/Visualization/ThreeJS_DS","DS/Visualization/Node3D","DS/WebappsUtils/WebappsUtils","DS/SceneGraphNodes/BillBoardNode3D","DS/Mesh/MeshUtils","DS/SceneGraphNodes/FixedSizeNode3D","DS/Visualization/SceneGraphFactory"],function(e,h,g,a,f,c,d){var b=h.extend({init:function(r){this._parent(r.name);var j=r.width;var l=j*95/60;var p=new c({name:"arrowFixedSizeNode3D",ratio:1});var q=g.getWebappsAssetUrl("Web3DUXUtils","");var o=new e.ImageUtils.loadTexture(q+"textures/I_Web3DUXArrow.png",undefined,null,null,true);o.flipY=false;var n=new e.MeshBasicMaterial({map:o,side:e.DoubleSide,transparent:true,enableClipPlanes:false});n.force=true;n.depthTest=false;var k={width:j,height:l,fill:true,material:n,layerNb:1};var i=d.createRectangleNode(k);i.setShadow(false,false);i.excludeFromCSO(true);i.excludeFromHighlight(true,true);i.setPickable(f.NOPICKABLE);i.setMatrix(new e.Matrix4().rotateX(-0.5*Math.PI).translate(new e.Vector3(-j/2,0,0)));var k={axis:new e.Vector3(0,0,1),name:"Web3DUXArrowBillboardNode",type:"Cylindrical",viewpoint:r.viewer.currentViewpoint};var m=new a(k);m.add(i);p.add(m);this.add(p);this.setVisibilityInTree(false);this.exludeFromBounding(true);this.getScaledHeight=function(){return l*p.scaleFactor}}});return b});