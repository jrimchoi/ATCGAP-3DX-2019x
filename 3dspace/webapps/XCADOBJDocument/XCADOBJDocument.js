define("DS/XCADOBJDocument/XCADOBJTessellatedRepresentation",["DS/XCADInputDocuments/XCADTessellatedRepresentation","DS/XCADInputDocuments/XCADRepresentation","DS/XCADInputDocuments/XCADFaceData"],function(b,c,a){var d=b.extend(function d(){this._representationType=c.XCAD_TESSELLATED_REPRESENTATION;this._NodeList=[];this._NodeList.push({_NodeType:b.KindOfNode.NOD_ContainerNode,_ChildList:[]})},{getChild:function(f,e){var g=null;if((f>=0)&&(f<=this._NodeList.length)){if(b.KindOfNode.NOD_GP!==this._NodeList[f]._NodeType){if((e>=0)&&(e<this._NodeList[f]._ChildList.length)){g=this._NodeList[f]._ChildList[e]}}else{throw'Error: Current node is not a kind of "Container Node " !'}}else{throw"Error: Invalid NodeID !"}return g},getChildCount:function(f){var e=-1;if((f>=0)&&(f<=this._NodeList.length)){if(b.KindOfNode.NOD_GP!==this._NodeList[f]._NodeType){e=this._NodeList[f]._ChildList.length}else{throw'Error: Current node is not a kind of "Container Node " !'}}else{throw"Error: Invalid NodeID !"}return e},getCircleData:function(e){throw"Error: not implemented method"},getConeData:function(e){throw"Error: not implemented method"},getCoordinateSystem:function(e){throw"Error: not implemented method"},getCylinderData:function(e){throw"Error: not implemented method"},getEdgeData:function(e){throw"Error: not implemented method"},getFaceData:function(f){var e=null;if((f>=0)&&(f<=this._NodeList.length)){if((b.KindOfNode.NOD_GP===this._NodeList[f]._NodeType)&&(b.KindOfGP.GP_Face===this._NodeList[f]._GPType)){e=this._NodeList[f]._GPData}else{throw"Error: Current node is not a GP_Face"}}else{throw"Error: Invalid NodeID"}return e},getGPType:function(e){var f=b.KindOfGP.GP_Unknown;if((e>=0)&&(e<=this._NodeList.length)){if(b.KindOfNode.NOD_GP===this._NodeList[e]._NodeType){f=this._NodeList[e]._GPType}else{throw"Error: Current node is not a NOD_GP"}}else{throw"Error: Invalid NodeID"}return f},getNodeBoundingSphere:function(e){throw"Error: not implemented method"},getNodeColor:function(e){return[0.825,0.825,1,1]},getNodeOrientationMatrix:function(e){throw"Error: not implemented method"},getNodeType:function(f){var e=b.KindOfNode.NOD_Unknown;if((f>=0)&&(f<=this._NodeList.length)){e=this._NodeList[f]._NodeType}else{throw"Error: Invalid NodeID !"}return e},getNodeUID:function(e){throw"Error: not implemented method"},getPlaneData:function(e){throw"Error: not implemented method"},getPointData:function(e){throw"Error: not implemented method"},getPolyLineData:function(e){throw"Error: not implemented method"},getRootNode:function(e){return 0},getRootNodesCount:function(){return 1},getSAG:function(e){throw"Error: not implemented method"},getSphereData:function(e){throw"Error: not implemented method"},isIndexed:function(){return true},createContainerNode:function(g,f){var e=null;if(b.KindOfNode.NOD_GP!==this._NodeList[f]._NodeType){this._NodeList.push({_NodeType:g,_ChildList:[]});e=this._NodeList.length-1;this._NodeList[f]._ChildList.push(e)}else{throw"Error: cannot add child to a GP node !"}return e},createGPNode:function(g,h,f){var e=null;if(b.KindOfNode.NOD_GP!==this._NodeList[f]._NodeType){this._NodeList.push({_NodeType:b.KindOfNode.NOD_GP,_GPType:g,_GPData:h});e=this._NodeList.length-1;this._NodeList[f]._ChildList.push(e)}else{throw"Error: cannot add child to a GP node !"}return e}});return d});define("DS/XCADOBJDocument/XCADOBJInputDocument",["DS/XCADInputDocuments/XCADInputDocument","DS/XCADInputDocuments/XCADRepresentation","DS/XCADInputDocuments/XCADTessellatedRepresentation","DS/XCADInputDocuments/XCADFaceData","DS/XCADOBJDocument/XCADOBJTessellatedRepresentation"],function(c,d,b,a,f){var e=c.extend(function e(){this._TessellatedRep=null},{close:function(){this._TessellatedRep=null},getRepresentation:function(h){var g=null;if(h===d.XCAD_TESSELLATED_REPRESENTATION){g=this._TesselatedRepresentation}return g},initialize:function(B){function I(N){var R=null;var M=[],L=[];M[0]=N[1]._x-N[0]._x;M[1]=N[1]._y-N[0]._y;M[2]=N[1]._z-N[0]._z;L[0]=N[2]._x-N[0]._x;L[1]=N[2]._y-N[0]._y;L[2]=N[2]._z-N[0]._z;var Q=M[1]*L[2]-M[2]*L[1];var P=M[2]*L[0]-M[0]*L[2];var O=M[0]*L[1]-M[1]*L[0];var K=Q*Q+P*P+O*O;var J=0;if(K!==0){J=1/Math.sqrt(K)}Q*=J;P*=J;O*=J;R={_dx:Q,_dy:P,_dz:O};M=null;L=null;return R}this._TesselatedRepresentation=null;var x=B.split("\n");var l=x.length;B="";var p=[];var k=0;var v=[];var q=[];var y=-1;var D=-1;var m=new a();var n=[];var w=/v( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/;var z=/vn( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/;var F=/vt( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/;var H=/f( +\d+)( +\d+)( +\d+)( +\d+)?/;var G=/f( +(\d+)\/(\d+))( +(\d+)\/(\d+))( +(\d+)\/(\d+))( +(\d+)\/(\d+))?/;var E=/f( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))?/;var C=/f( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))?/;if(l>0){this._TesselatedRepresentation=new f();for(var t=0;t<l;t++){var s=x[t].trim();var r;if(s.length===0||s.charAt(0)==="#"){continue}else{if((r=w.exec(s))!==null){p.push({_x:parseFloat(r[1]),_y:parseFloat(r[2]),_z:parseFloat(r[3])})}else{if((r=z.exec(s))!==null){v.push({_dx:parseFloat(r[1]),_dy:parseFloat(r[2]),_dz:parseFloat(r[3])})}else{if((r=F.exec(s))!==null){continue}else{if((r=H.exec(s))!==null){var o=[];o.push(p[parseInt(r[1])-1],p[parseInt(r[2])-1],p[parseInt(r[3])-1]);var j=I(o);if(r[4]===undefined){for(var A=1;A<=3;A++){if(parseInt(r[A])<0){throw"ERROR: Negative vertex indices are currently not supported !"}var u=parseInt(r[A])-1;var h=n.indexOf(u);if(-1===h){m.vertices.push(p[u]._x,p[u]._y,p[u]._z);m.normals.push(j._dx,j._dy,j._dz);var h=(m.vertices.length/3)-1;n.push(u)}m.singleTrianglesIndices.push(h)}}else{var g=[];for(var A=1;A<=4;A++){if(parseInt(r[A])<0){throw"ERROR: Negative vertex indices are currently not supported !"}var u=parseInt(r[A])-1;var h=n.indexOf(u);if(-1===h){m.vertices.push(p[u]._x,p[u]._y,p[u]._z);m.normals.push(j._dx,j._dy,j._dz);var h=(m.vertices.length/3)-1;n.push(u)}g.push(h)}m.stripTrianglesIndices.push(g[0]);m.stripTrianglesIndices.push(g[1]);m.stripTrianglesIndices.push(g[3]);m.stripTrianglesIndices.push(g[2]);m.nbVertexPerStripTriangle.push(4)}}else{if((r=G.exec(s))!==null){var o=[];o.push(p[parseInt(r[2])-1],p[parseInt(r[5])-1],p[parseInt(r[8])-1]);var j=I(o);if(r[10]===undefined){for(var A=2;A<10;A=A+3){if(parseInt(r[A])<0){throw"ERROR: Negative vertex indices are currently not supported !"}var u=parseInt(r[A])-1;var h=n.indexOf(u);if(-1===h){m.vertices.push(p[u]._x,Vertices[u]._y,p[u]._z);m.normals.push(j._dx,j._dy,j._dz);var h=(m.vertices.length/3)-1;n.push(u)}m.singleTrianglesIndices.push(h)}}else{var g=[];for(var A=2;A<12;A=A+3){if(parseInt(r[A])<0){throw"ERROR: Negative vertex indices are currently not supported !"}var u=parseInt(r[A])-1;var h=n.indexOf(u);if(-1===h){m.vertices.push(p[u]._x,p[u]._y,p[u]._z);m.normals.push(j._dx,j._dy,j._dz);var h=(m.vertices.length/3)-1;n.push(u)}g.push(h)}m.stripTrianglesIndices.push(g[0]);m.stripTrianglesIndices.push(g[1]);m.stripTrianglesIndices.push(g[3]);m.stripTrianglesIndices.push(g[2]);m.nbVertexPerStripTriangle.push(4)}}else{if((r=E.exec(s))!==null){if(r[13]===undefined){for(var A=2;A<13;A=A+4){if(parseInt(r[A])<0){throw"ERROR: Negative vertex indices are currently not supported !"}var u=parseInt(r[A])-1;var i=parseInt(r[A+2])-1;var h=n.indexOf(u);if(-1===h){m.vertices.push(p[u]._x,p[u]._y,p[u]._z);m.normals.push(v[i]._dx,v[i]._dy,v[i]._dz);var h=(m.vertices.length/3)-1;n.push(u)}m.singleTrianglesIndices.push(h)}}else{var g=[];for(var A=2;A<16;A=A+4){if(parseInt(r[A])<0){throw"ERROR: Negative vertex indices are currently not supported !"}var u=parseInt(r[A])-1;var i=parseInt(r[A+2])-1;var h=n.indexOf(u);if(-1===h){m.vertices.push(p[u]._x,p[u]._y,p[u]._z);m.normals.push(v[i]._dx,v[i]._dy,v[i]._dz);var h=(m.vertices.length/3)-1;n.push(u)}g.push(h)}m.stripTrianglesIndices.push(g[0]);m.stripTrianglesIndices.push(g[1]);m.stripTrianglesIndices.push(g[3]);m.stripTrianglesIndices.push(g[2]);m.nbVertexPerStripTriangle.push(4)}}else{if((r=C.exec(s))!==null){if(r[10]===undefined){for(var A=2;A<10;A=A+3){if(parseInt(r[A])<0){throw"ERROR: Negative vertex indices are currently not supported !"}var u=parseInt(r[A])-1;var i=parseInt(r[A+1])-1;var h=n.indexOf(u);if(-1===h){m.vertices.push(p[u]._x,p[u]._y,p[u]._z);m.normals.push(v[i]._dx,v[i]._dy,v[i]._dz);var h=(m.vertices.length/3)-1;n.push(u)}m.singleTrianglesIndices.push(h)}}else{var g=[];for(var A=2;A<12;A=A+4){if(parseInt(r[A])<0){throw"ERROR: Negative vertex indices are currently not supported !"}var u=parseInt(r[A])-1;var i=parseInt(r[A+1])-1;var h=n.indexOf(u);if(-1===h){m.vertices.push(p[u]._x,p[u]._y,p[u]._z);m.normals.push(v[i]._dx,v[i]._dy,v[i]._dz);var h=(m.vertices.length/3)-1;n.push(u)}g.push(h)}m.stripTrianglesIndices.push(g[0]);m.stripTrianglesIndices.push(g[1]);m.stripTrianglesIndices.push(g[3]);m.stripTrianglesIndices.push(g[2]);m.nbVertexPerStripTriangle.push(4)}}else{if(/^o /.test(s)){if(m.vertices.length>0){y=this._TesselatedRepresentation.createContainerNode(b.KindOfNode.NOD_SolidNode,0);D=this._TesselatedRepresentation.createGPNode(b.KindOfGP.GP_Face,m,y)}y=-1;m=new a();n=[]}else{if(/^g /.test(s)){continue}else{if(/^usemtl /.test(s)){continue}else{if(/^mtllib /.test(s)){continue}else{if(/^s /.test(s)){continue}else{console.log("XCADOBJInputDocument: Unhandled record "+s)}}}}}}}}}}}}}}if(m.vertices.length>0){y=this._TesselatedRepresentation.createContainerNode(b.KindOfNode.NOD_SolidNode,0);D=this._TesselatedRepresentation.createGPNode(b.KindOfGP.GP_Face,m,y)}}}});return e});