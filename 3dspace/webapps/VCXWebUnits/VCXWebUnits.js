define("DS/VCXWebUnits/VCXUnitType",["UWA/Class"],function(a){var b=a.extend({init:function(c){this._name=c;this._units={};this._formaterOptions={};this._symbolDisplay=b.ESymbolDisplay.Short;this._decimalSeparator=true;this._precision=2;this._languageDisplay=b.ELanguageDisplay.local},getFormater:function(){if(!this._formater){if(this._formaterClass){var c;if(this.getDisplayUnit()&&this.getDisplayUnit().FormaterOptions){c=UWA.merge(this.getDisplayUnit().FormaterOptions,this.FormaterOptions)}else{c=UWA.clone(this.FormaterOptions)}c.minimumFractionDigits=this.Precision;c.maximumFractionDigits=this.Precision;c.useGrouping=this.DecimalSeparator;var d=navigator.language;if(this._languageDisplay===b.ELanguageDisplay.fr){d="fr"}else{if(this._languageDisplay===b.ELanguageDisplay.en){d="en"}}this._formater=new this._formaterClass(d,c)}}return this._formater},addUnit:function(c){this._units[c.Name]=c},getDisplayUnit:function(){return this._displayUnit},getInternUnit:function(){return this._internUnit},internToDisplayUnitValue:function(c){console.error("Should be overriden")},displayToInternUnitValue:function(c){console.error("Should be overriden")},getString:function(h){var c=this.internToDisplayUnitValue(h);var f=this.getDisplayUnit();if(f){var d="";if(typeof c==="number"){var e;if(this.getFormater()){e=this.getFormater().format(c)}else{e=""+c}d+=e;var g="";if(this.SymbolDisplay!==b.ESymbolDisplay.None){g=f.ShortSymbol;if(this.SymbolDisplay===b.ESymbolDisplay.Long&&f.LongSymbol){g=f.LongSymbol}}if(g){d+=" "+g}}return d}}});b.ESymbolDisplay={Short:0,Long:1,None:2};b.ELanguageDisplay={local:0,fr:1,en:2};Object.defineProperty(b.prototype,"Name",{enumerable:true,get:function(){return this._name},});Object.defineProperty(b.prototype,"SymbolDisplay",{enumerable:true,get:function(){return this._symbolDisplay},set:function(c){this._symbolDisplay=c}});Object.defineProperty(b.prototype,"LanguageDisplay",{enumerable:true,get:function(){return this._languageDisplay},set:function(c){if(this._formater){delete this._formater}this._languageDisplay=c}});Object.defineProperty(b.prototype,"Precision",{enumerable:true,get:function(){return this._precision},set:function(c){if(this._formater){delete this._formater}this._precision=c}});Object.defineProperty(b.prototype,"DecimalSeparator",{enumerable:true,get:function(){return this._decimalSeparator},set:function(c){if(this._formater){delete this._formater}this._decimalSeparator=c}});Object.defineProperty(b.prototype,"FormaterClass",{enumerable:true,get:function(){return this._formaterClass},set:function(c){if(this._formater){delete this._formater}this._formaterClass=c}});Object.defineProperty(b.prototype,"FormaterOptions",{enumerable:true,get:function(){return this._formaterOptions},set:function(c){if(this._formater){delete this._formater}this._formaterOptions=c}});Object.defineProperty(b.prototype,"DisplayUnit",{enumerable:true,get:function(){if(this._displayUnit){return this._displayUnit.Name}else{for(var c in this._units){return this._units[c]}}},set:function(c){if(this._formater){delete this._formater}this._displayUnit=this._units[c]}});Object.defineProperty(b.prototype,"InternUnit",{enumerable:true,get:function(){if(this._internUnit){return this._internUnit.Name}else{for(var c in this._units){return this._units[c]}}},set:function(c){if(this._formater){delete this._formater}this._internUnit=this._units[c]}});return b});define("DS/VCXWebUnits/VCXUnit",["UWA/Class"],function(a){var b=a.extend({init:function(c){this._name=c},});b.ESymbolPosition={Before:0,Decimal:1,After:2};Object.defineProperty(b.prototype,"Name",{enumerable:true,get:function(){return this._name},});Object.defineProperty(b.prototype,"ConversionData",{enumerable:true,get:function(){return this._conversionData},set:function(c){this._conversionData=c}});Object.defineProperty(b.prototype,"LongSymbol",{enumerable:true,get:function(){return this._longSymbol},set:function(c){this._longSymbol=c}});Object.defineProperty(b.prototype,"ShortSymbol",{enumerable:true,get:function(){return this._shortSymbol},set:function(c){this._shortSymbol=c}});Object.defineProperty(b.prototype,"FormaterOptions",{enumerable:true,get:function(){return this._formaterOptions},set:function(c){this._formaterOptions=c}});return b});define("DS/VCXWebUnits/VCXUnitManagerModifiable",["DS/VCXWebModifiables/VCXModifiable","DS/VCXWebUnits/VCXUnitType","DS/VCXWebUnits/VCXUnit","DS/VCXWebProperties/VCXProperty","DS/VCXWebProperties/VCXPropertyInfo","DS/VCXWebProperties/VCXPropertyInfoEnum","DS/VCXWebProperties/VCXPropertyValueString","DS/VCXWebProperties/VCXPropertyValueInt","DS/VCXWebProperties/VCXPropertyValueEnum","DS/VCXWebProperties/VCXPropertyValueBoolean"],function(d,f,g,h,e,c,j,i,b,a){var k=d.extend({init:function(){this._parent();this._actorName="UnitManager"},initialize:function(){this._unitTypes={}},OnChangeProperty:function(q,m,p){if(p){}else{p={}}if(p.fromChildClass){}else{if(this.OnChangePropertyBegin(q,m)){return true}}var r=q.indexOf(".",10);var n=q.substr(0,r);var l=q.substr(r+1);var o=this.GetObject().getUnitType(l);if(o){switch(n){case"Unit.Type.SymbolDisplay":o.SymbolDisplay=m.Value;break;case"Unit.Type.LanguageDisplay":o.LanguageDisplay=m.Value;break;case"Unit.Type.Precision":o.Precision=m.Value;break;case"Unit.Type.DecimalSeparator":o.DecimalSeparator=m.Value;break;case"Unit.Type.DisplayUnit":o.DisplayUnit=m.Value;break;case"Unit.Type.InternUnit":o.InternUnit=m.Value;break;default:p.fromChildClass=true;return this._parent(q,m,p)}return true}return false},GetProperty:function(o){var p=null;var m=o.indexOf(".",10);var q=o.substr(0,m);var t=o.substr(m+1);var u=this.GetObject().getUnitType(t);var v="Group.Unit.Type."+t;if(o==="Actor.Name"){var n=new j(this._actorName);var r=new e(o,e.EBehaviorType.Singleton,true,"VCXWebModifiables/VCXWebModifiables");p=new h(r,n)}else{if(q==="Unit.Type.SymbolDisplay"){var n=new b();n.SetValue(u.SymbolDisplay);var s=new c(o,e.EBehaviorType.Singleton,true,"VCXWebUnits/VCXWebUnits");s.AddOrModifyChoice(f.ESymbolDisplay.None,"Unit.ESymbolDisplay.None");s.AddOrModifyChoice(f.ESymbolDisplay.Short,"Unit.ESymbolDisplay.Short");s.AddOrModifyChoice(f.ESymbolDisplay.Long,"Unit.ESymbolDisplay.Long");s.SetGroupId(v);s.SetNLSID(q);p=new h(s,n)}else{if(q==="Unit.Type.LanguageDisplay"){var n=new b();n.SetValue(u.LanguageDisplay);var s=new c(o,e.EBehaviorType.Singleton,true,"VCXWebUnits/VCXWebUnits");s.AddOrModifyChoice(f.ELanguageDisplay.local,"Unit.ELanguageDisplay.local");s.AddOrModifyChoice(f.ELanguageDisplay.fr,"Unit.ELanguageDisplay.fr");s.AddOrModifyChoice(f.ELanguageDisplay.en,"Unit.ELanguageDisplay.en");s.SetGroupId(v);s.SetNLSID(q);p=new h(s,n)}else{if(q==="Unit.Type.Precision"){var n=new i();n.SetValue(u.Precision);var s=new e(o,e.EBehaviorType.Singleton,true,"VCXWebUnits/VCXWebUnits");s.SetGroupId(v);s.SetNLSID(q);p=new h(s,n)}else{if(q==="Unit.Type.DecimalSeparator"){var n=new a();n.SetValue(u.DecimalSeparator);var s=new e(o,e.EBehaviorType.Singleton,true,"VCXWebUnits/VCXWebUnits");s.SetGroupId(v);s.SetNLSID(q);p=new h(s,n)}else{if(q==="Unit.Type.DisplayUnit"){var n=new j();n.SetValue(u.DisplayUnit);var s=new c(o,e.EBehaviorType.Singleton,true,"VCXWebUnits/VCXWebUnits");for(var l in u._units){s.AddOrModifyChoice(l,t+"."+l+".Long")}s.SetGroupId(v);s.SetNLSID(q);p=new h(s,n)}else{if(q==="Unit.Type.InternUnit"){var n=new j();n.SetValue(u.InternUnit);var s=new c(o,e.EBehaviorType.Singleton,true,"VCXWebUnits/VCXWebUnits");for(var l in u._units){s.AddOrModifyChoice(l,t+"."+l+".Long")}s.SetGroupId(v);s.SetNLSID(q);p=new h(s,n)}else{p=this._parent(o)}}}}}}}return p},GetProperties:function(){var m=this._parent();for(var l in this.GetObject()._unitTypes){m.AddOrModifyProperty(this.GetProperty("Unit.Type.SymbolDisplay."+l));m.AddOrModifyProperty(this.GetProperty("Unit.Type.LanguageDisplay."+l));m.AddOrModifyProperty(this.GetProperty("Unit.Type.Precision."+l));m.AddOrModifyProperty(this.GetProperty("Unit.Type.DecimalSeparator."+l));m.AddOrModifyProperty(this.GetProperty("Unit.Type.DisplayUnit."+l));m.AddOrModifyProperty(this.GetProperty("Unit.Type.InternUnit."+l))}m.AddOrModifyProperty(this.GetProperty("Actor.Name"));return m},OnChangePropertiesEnd:function(){this._parent();this.GetObject()._experienceBase.getManager("VCXDressupManager").RefreshVisuAfterDressupChange()}});return k});define("DS/VCXWebUnits/VCXProportionalUnitType",["DS/VCXWebUnits/VCXUnitType"],function(b){var a=b.extend({init:function(c){this._parent(c)},GetType:function(){return"VCXProportionalUnitType"},_valueConversion:function(j,h){var i=this.getDisplayUnit();var d=this.getInternUnit();if(i&&d){var g=(i.ConversionData&&i.ConversionData.a)||1;var f=(i.ConversionData&&i.ConversionData.b)||0;var e=(d.ConversionData&&d.ConversionData.a)||1;var c=(d.ConversionData&&d.ConversionData.b)||0;if(h){return(j*(e/g)+((c-f)/g))}else{return(j*(g/e)+((f-c)/e))}}return 0},internToDisplayUnitValue:function(c){return this._valueConversion(c)},displayToInternUnitValue:function(c){return this._valueConversion(iInternValue,true)},});return a});define("DS/VCXWebUnits/VCXUnitManager",["DS/WebApplicationBase/W3AAManager","DS/VCXWebUnits/VCXUnitType","DS/VCXWebUnits/VCXProportionalUnitType","DS/VCXWebUnits/VCXUnit"],function(e,d,b,a){var c=e.extend({initialize:function(){this._unitTypes={}},postInitialize:function(){var h=this._experienceBase.getManager("VCXNLSManager");if(h){this._nls=h.GetNLS(["VCXWebUnits/VCXWebUnits"])}var f;var g;var f=new b("Length");g=new a("Micrometers");f.addUnit(g);this._setUnitNLS(f,g);g.ConversionData={a:1000000,b:0};g=new a("Millimeters");f.addUnit(g);this._setUnitNLS(f,g);g.ConversionData={a:1000,b:0};g=new a("Centimeters");f.addUnit(g);this._setUnitNLS(f,g);g.ConversionData={a:100,b:0};g=new a("Decimeters");f.addUnit(g);this._setUnitNLS(f,g);g.ConversionData={a:10,b:0};g=new a("Meters");f.addUnit(g);this._setUnitNLS(f,g);g=new a("Kilometers");f.addUnit(g);this._setUnitNLS(f,g);g.ConversionData={a:0.001,b:0};g=new a("Inches");f.addUnit(g);this._setUnitNLS(f,g);g.ConversionData={a:39.37007874,b:0};g=new a("Feet");f.addUnit(g);this._setUnitNLS(f,g);g.ConversionData={a:3.28084,b:0};g=new a("Yards");f.addUnit(g);this._setUnitNLS(f,g);g.ConversionData={a:1.09361,b:0};f.InternUnit="Millimeters";f.DisplayUnit="Centimeters";if(typeof widget!="undefined"&&widget.getValue("LengthUnit")){f.DisplayUnit=widget.getValue("LengthUnit")}if(window.Intl){f.FormaterClass=window.Intl.NumberFormat}f.SymbolDisplay=d.ESymbolDisplay.Long;f.LanguageDisplay=d.ELanguageDisplay.en;f.Precision=2;f.DecimalSeparator=true;this.addUnitType(f);var f=new b("Area");if(window.Intl){f.FormaterClass=window.Intl.NumberFormat}g=new a("SquareMicrometers");f.addUnit(g);this._setUnitNLS(f,g);g.ConversionData={a:1000000000000,b:0};g=new a("SquareMillimeters");f.addUnit(g);this._setUnitNLS(f,g);g.ConversionData={a:1000000,b:0};g=new a("SquareCentimeters");f.addUnit(g);this._setUnitNLS(f,g);g.ConversionData={a:10000,b:0};g=new a("SquareDecimeters");f.addUnit(g);this._setUnitNLS(f,g);g.ConversionData={a:100,b:0};var g=new a("SquareMeters");f.addUnit(g);this._setUnitNLS(f,g);g=new a("SquareInches");f.addUnit(g);this._setUnitNLS(f,g);g.ConversionData={a:1550.0030999938,b:0};g=new a("SquareFeet");f.addUnit(g);this._setUnitNLS(f,g);g.ConversionData={a:10.7639111056,b:0};f.InternUnit="SquareCentimeters";f.DisplayUnit="SquareInches";this.addUnitType(f);var f=new b("Volume");if(window.Intl){f.FormaterClass=window.Intl.NumberFormat}g=new a("CubicMicrometers");f.addUnit(g);this._setUnitNLS(f,g);g.ConversionData={a:1000000000000000000,b:0};g=new a("CubicMillimeters");f.addUnit(g);this._setUnitNLS(f,g);g.ConversionData={a:1000000000,b:0};g=new a("CubicCentimeters");f.addUnit(g);this._setUnitNLS(f,g);g.ConversionData={a:1000000,b:0};g=new a("CubicDecimeters");f.addUnit(g);this._setUnitNLS(f,g);g.ConversionData={a:1000,b:0};var g=new a("CubicMeters");f.addUnit(g);this._setUnitNLS(f,g);g=new a("CubicInches");f.addUnit(g);this._setUnitNLS(f,g);g.ConversionData={a:61023.744094,b:0};g=new a("CubicFeet");f.addUnit(g);this._setUnitNLS(f,g);g.ConversionData={a:35.3146701116967,b:0};f.InternUnit="CubicCentimeters";f.DisplayUnit="CubicInches";this.addUnitType(f);var f=new b("Angle");if(window.Intl){f.FormaterClass=window.Intl.NumberFormat}var g=new a("Radians");f.addUnit(g);this._setUnitNLS(f,g);g=new a("Degrees");f.addUnit(g);this._setUnitNLS(f,g);g.ConversionData={a:180/(Math.PI),b:0};g=new a("Turns");f.addUnit(g);g.ConversionData={a:1/(Math.PI*2),b:0};g.FormaterOptions={style:"percent"};g=new a("Grades");f.addUnit(g);g.ConversionData={a:1/(Math.PI*200),b:0};f.InternUnit="Radians";f.DisplayUnit="Degrees";if(typeof widget!="undefined"&&widget.getValue("AngleUnit")){f.DisplayUnit=widget.getValue("AngleUnit")}this.addUnitType(f);var f=new b("Temperature");if(window.Intl){f.FormaterClass=window.Intl.NumberFormat}g=new a("Kelvin");f.addUnit(g);this._setUnitNLS(f,g);g=new a("Celsius");f.addUnit(g);this._setUnitNLS(f,g);g.ConversionData={a:1,b:-273.15};g=new a("Fahrenheit");f.addUnit(g);this._setUnitNLS(f,g);g.ConversionData={a:9/5,b:-459.67};f.InternUnit="Kelvin";f.DisplayUnit="Celsius";this.addUnitType(f);var f=new b("Currency");if(window.Intl){f.FormaterClass=window.Intl.NumberFormat}g.FormaterOptions={style:"currency"};g=new a("USD");f.addUnit(g);g.FormaterOptions={currency:"USD"};g=new a("EUR");f.addUnit(g);g.ConversionData={a:0.917431193,b:0};g.FormaterOptions={currency:"EUR"};f.InternUnit="EUR";f.DisplayUnit="EUR";this.addUnitType(f)},_setUnitNLS:function(i,h){if(this._nls){var f=this._nls.getTitle({key:i.Name+"."+h.Name+".Short"});if(f){h.ShortSymbol=f}var g=this._nls.getTitle({key:i.Name+"."+h.Name+".Long"});if(g){h.LongSymbol=g}}},addUnitType:function(f){this._unitTypes[f.Name]=f},getUnitType:function(f){return this._unitTypes[f]},unInitialize:function(){},internToDisplayUnitValue:function(g,h){var f=this._unitTypes[h];if(f){return f.internToDisplayUnitValue(g)}},displayToInternUnitValue:function(g,h){var f=this._unitTypes[h];if(f){return f.displayToInternUnitValue(g)}},getString:function(g,h){var f=this._unitTypes[h];if(f){return f.getString(g)}},getUpdatePriority:function(){return -1},});Object.defineProperty(c.prototype,"componentType",{enumerable:true,get:function(){return"VCXUnitManager"}});return c});