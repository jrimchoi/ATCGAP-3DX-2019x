define("DS/CfgAutoCompleteComponent/Model/CfgAutoCompleteModel",["UWA/Class/Model"],function(a){var b=a.extend({editable:null,dictionary:null,currentExpression:null,withAdvancedOperator:null,});return b});define("DS/CfgAutoCompleteComponent/Presenter/CfgAutoCompleteUtils",[,],function(){var a="S_OK";var b="S_FALSE";var c={};c.getDatasetItemFromId=function(f,g){var e=0,d=0;for(e=0;e<f.datasets.length;e+=1){for(d=0;d<f.datasets[e].items.length;d+=1){if(f.datasets[e].items[d].id_===g){return f.datasets[e].items[d]}}}return null};c.getDatasetItemFrom=function(f,g){var e=0,d=0;for(e=0;e<f.datasets.length;e+=1){for(d=0;d<f.datasets[e].items.length;d+=1){if(f.datasets[e].items[d].id_===g||(f.datasets[e].items[d].value&&(f.datasets[e].items[d].value.toUpperCase()===g.toUpperCase()))||(f.datasets[e].items[d].name&&(f.datasets[e].items[d].name.toUpperCase()===g.toUpperCase()))){return f.datasets[e].items[d]}}}return null};c.getFlatListOfIds=function(h){var e=[];var d;d=h.dataTransfer.getData("Text");d=JSON.parse(d);if(!d){return[]}var g=0,f=0;if(d._version==="2.0"||d._version===2){if(d.variantClasses&&d.variantClasses!==[]){for(g=0;g<d.variantClasses.length;g+=1){if(d.variantClasses[g].variants&&d.variantClasses[g].variants.length>0){for(f=0;f<d.variantClasses[g].variants.length;f+=1){e.push(d.variantClasses[g].variants[f].id)}}else{e.push(d.variantClasses[g].id)}}}if(d.options&&d.options!==[]){for(g=0;g<d.options.length;g+=1){e.push(d.options[g].id)}}if(d.packs){for(g=0;g<d.packs.length;g+=1){e.push(d.packs[g].id)}}}else{if(d.features&&d.features!==[]){for(g=0;g<d.features.length;g+=1){if(d.features[g].options&&d.features[g].options.length>0){for(f=0;f<d.features[g].options.length;f+=1){e.push(d.features[g].options[f].id)}}else{e.push(d.features[g].id)}}}}return e};return c});define("DS/CfgAutoCompleteComponent/Presenter/CfgAutoCompleteChecks",["DS/CfgDictionary/CfgDictionaryTypeEnum","DS/CfgDictionary/CfgDictionaryOperatorEnum","i18n!DS/CfgAutoCompleteComponent/assets/nls/CfgAutoCompleteComponent",],function(c,h,i){var d="S_OK";var g="S_FALSE";var a="ERROR";var j={};j.dicoCheck=function(s,p,r){var v={};var u;v._rc=d;v.discrepancyElements=[];var l=[];var k={};for(u in s){if(s.hasOwnProperty(u)){l.push(u);var q=s[u].name;k[q]="operand"}}for(u in p){if(p.hasOwnProperty(u)){l.push(u);var q=p[u].value;k[q]="operator"}}if(r&&r.selectedItems){var m=0;for(m=0;m<r.selectedItems.length;m+=1){var t=r.selectedItems[m].value;var n=r.selectedItems[m].id_;if(l.indexOf(n)===-1){v._rc=a;var o=t+" "+i.isUnknown;v.discrepancyElements.push({id:null,idx:m,description:o})}}}if(r&&r.badges){for(m=0;m<r.badges.length;m+=1){r.badges[m].elements.container.classList.remove("badge-operator");r.badges[m].elements.container.classList.remove("badge-operand");r.badges[m].elements.container.classList.remove("badge-unknown");if(k[r.badges[m].options.content]==="operator"){r.badges[m].elements.container.classList.add("badge-operator")}else{if(k[r.badges[m].options.content]==="operand"){r.badges[m].elements.container.classList.add("badge-operand")}else{r.badges[m].elements.container.classList.add("badge-unknown")}}}}return v};j.grammarCheck=function(x,v,w){var z={};z._rc=d;z.discrepancyElements=[];var t=false;var u=null;var k=false;var n=[];if(w&&w.selectedItems){var o=0;for(o=0;o<w.selectedItems.length;o+=1){t=false;u=null;k=false;var m=null;var r=w.selectedItems[o];var q=null;if(o>0){q=w.selectedItems[o-1]}if(!q){switch(r.type){case c.VARIANT:case c.OPTION:case c.PACK:case h.opening_separator:break;case h.unary_operator:t=(w.selectedItems.length===1)?true:false;break;default:t=true;break}}else{switch(r.type){case c.VALUE:switch(q.type){case c.VALUE:if(q.parent_!==r.parent_){t=true}break;case c.VARIANT:if(q.id_!==r.parent_){t=true}break;default:t=true;break}break;case c.VARIANT:case c.PACK:case c.OPTION:if(q.type!==h.opening_separator&&q.type!==h.unary_operator&&q.type!==h.binary_operator){t=true}break;case h.binary_operator:if(q.type!==c.PACK&&q.type!==c.OPTION&&q.type!==c.VARIANT&&q.type!==c.VALUE&&q.type!==h.closing_separator){t=true}m=null;m=w.selectedItems[o+1];if(!t){if(!m||!m.id_){t=true;u=i.unknown}else{if(m.type!==c.PACK&&m.type!==c.OPTION&&m.type!==c.VARIANT&&m.type!==h.opening_separator&&m.type!==h.unary_operator){t=true;u=m.type}}}break;case h.unary_operator:if(q.type!==h.binary_operator&&q.type!==h.opening_separator&&q.type!==h.unary_operator){t=true}m=null;m=w.selectedItems[o+1];if(!t){if(!m||!m.id_){t=true;u=i.unknown}else{if(m.type!==c.PACK&&m.type!==c.OPTION&&m.type!==c.VARIANT&&m.type!==h.opening_separator&&m.type!==h.unary_operator){t=true;u=m.type}}}break;case h.opening_separator:if(q.type!==h.binary_operator&&q.type!==h.opening_separator&&q.type!==h.unary_operator){t=true}m=null;m=w.selectedItems[o+1];if(!t){if(!m||!m.id_){t=true;u=i.unknown}else{if(m.type!==c.PACK&&m.type!==c.OPTION&&m.type!==c.VARIANT&&m.type!==h.opening_separator&&m.type!==h.unary_operator){t=true;u=m.type}}}break;case h.closing_separator:if(q.type!==c.PACK&&q.type!==c.OPTION&&q.type!==c.VARIANT&&q.type!==c.VALUE&&q.type!==h.closing_separator){t=true}break;default:t=true;k=true;break}}if(t){n.push(o);z._rc=a;var s=r.id_;var y=(q&&q.value)?i.inContextOF+" : "+q.value:i.error;if(u){y=i.notExpectingToBeFollowedBy+" : "+u}if(k){y=r.value+" "+i.isUnknownFromDictionary}z.discrepancyElements.push({id:s,idx:o,description:y})}}var p=e(w);if(p._rc===a){z._rc=a;o=0;for(o=0;o<p.discrepancyElements.length;o+=1){var l=f(z,p.discrepancyElements[o].idx);if(l){l.description+=" "+p.discrepancyElements[o].description}else{z.discrepancyElements.push(p.discrepancyElements[o])}}}}return z};j.dicoAndGrammarCheckAndUpdateUI=function(k,o,p){var n=j.dicoCheck(k,o,p);var m=j.grammarCheck(k,o,p);var l={};l._rc=d;l._rc=(n._rc===a)?a:l._rc;l._rc=(m._rc===a)?a:l._rc;l.discrepancyElements=n.discrepancyElements.concat(m.discrepancyElements);b(l,p,"badge-error");return l};j.getGlobalErrorCounts=function(t,q,r){var l=j.dicoCheck(t,q,r);var k=j.grammarCheck(t,q,r);var o={};o._rc=d;o._rc=(l._rc===a)?a:o._rc;o._rc=(l._rc===a)?a:o._rc;var s=[];var n=0;for(n=0;n<l.discrepancyElements.length;n+=1){s.push(l.discrepancyElements[n].idx)}var p=[];for(n=0;n<k.discrepancyElements.length;n+=1){p.push(k.discrepancyElements[n].idx)}var m=s.concat(p);m=m.filter(function(u,v){return m.indexOf(u)===v});return m.length};var e=function(p){var s={};s._rc=d;s.discrepancyElements=[];var r=p.selectedItems.length;var m=[];var q=[];var n=0;var l=0,k=0;var o=-1;for(l=0;l<r;l+=1){if(p.selectedItems[l].type===h.opening_separator){n=1;for(k=l+1;k<r;k+=1){if(p.selectedItems[k].type===h.opening_separator){n+=1}else{if(p.selectedItems[k].type===h.closing_separator){n-=1}}if(n===0){m.push(l);q.push(k);break}}if(n!==0){s._rc=a;s.discrepancyElements.push({id:p.selectedItems[l].id_,idx:l,description:i.correspondingClosingOperatorNotFound})}}}for(l=0;l<r;l+=1){if(p.selectedItems[l].type===h.closing_separator&&q.indexOf(l)===-1){s._rc=a;s.discrepancyElements.push({id:p.selectedItems[l].id_,idx:l,description:i.correspondingOpeningOperatorNotFound})}}return s};var b=function(l,n,k){var m=0;for(m=0;m<n.badges.length;m+=1){n.badges[m].getContent().title="";n.badges[m].getContent().classList.remove(k);n.badges[m].getContent().classList.remove("badge-default");n.badges[m].getContent().classList.remove("badge-closable");n.badges[m].getContent().classList.remove("badge-selected");if(f(l,m)!=null){n.badges[f(l,m).idx].getContent().classList.add(k);n.badges[m].getContent().title=f(l,m).description}else{n.badges[m].getContent().classList.add("badge-default")}}return l.discrepancyElements};var f=function(l,k){var m=0;for(m=0;m<l.discrepancyElements.length;m+=1){if(l.discrepancyElements[m].idx===k){return l.discrepancyElements[m]}}return null};return j});define("DS/CfgAutoCompleteComponent/Presenter/CfgAutoCompletePresenter",["UWA/Class/View","DS/Handlebars/Handlebars","DS/CfgAutoCompleteComponent/Presenter/CfgAutoCompleteChecks","DS/CfgAutoCompleteComponent/Presenter/CfgAutoCompleteUtils","DS/UIKIT/Autocomplete","DS/CfgDictionary/CfgDictionaryMapperUtils","DS/CfgDictionary/CfgDictionaryOperatorEnum","DS/CfgDictionary/CfgDictionaryTypeEnum","DS/CfgAutoCompleteComponent/Model/CfgAutoCompleteModel","i18n!DS/CfgAutoCompleteComponent/assets/nls/CfgAutoCompleteComponent","text!DS/CfgAutoCompleteComponent/View/CfgAutoCompleteTemplate.html","css!DS/CfgAutoCompleteComponent/View/CfgAutoComplete.css","css!DS/UIKIT/UIKIT.css"],function(p,h,c,q,o,a,f,j,d,b,n,g,r){var m=false;var e="S_OK";var s="S_FALSE";var l=true;var k=h.compile(n);var i=p.extend({name:"autocomplete-rule-view",tagName:"div",init:function(t){var v=this;for(var u in t){this[u]=t[u]}this._minLengthBeforeSearch=(t.minLengthBeforeSearch!=null)?t.minLengthBeforeSearch:1;this._showOptionGroup=(t.showOptionGroup)?true:false;this._parent(t);this.container.setHTML(k(t));v._autocomplete.inject(v.container.getElement(".autocomplete-rule-content-section"));v.container.getElement(".autocomplete-rule-content-section").ondrop=function(D){D.preventDefault();var G=[];G=q.getFlatListOfIds(D);var y=null;var B=0;var C=D.target;var E=-1;var B=0;for(B=0;B<v._autocomplete.innerInputs.length;B+=1){if(C===v._autocomplete.innerInputs[B]){E=B;break}}var A=(E>=0)?E:v._autocomplete.badges.length;for(B=0;B<G.length;B+=1){y=G[B];if(y){var F=q.getDatasetItemFromId(v._autocomplete,y);if(F){if(F.type===j.VALUE){var x=v.getRelativeContext(A);if(x&&x.id_===F.parent_){v._autocomplete.onSelect(F,A);A+=1}else{v._autocomplete.onSelect(F,A);var w=q.getDatasetItemFromId(v._autocomplete,F.parent_);v._autocomplete.onSelect(w,A);A+=2}}else{v._autocomplete.onSelect(F,A);A+=1}var z=c.dicoAndGrammarCheckAndUpdateUI(v._mapDico,v._mapOperator,v._autocomplete);v._errorDicoOrGrammar=(z._rc!==e);v.updateExpression();if(v._localModelEvent){v._localModelEvent.publish({event:"onChangeExpression",data:null})}}else{if(l){console.log("object with id "+y+" not found in dictionary")}}}else{if(l){console.log("object dropped not supported")}}}v._autocomplete.onHideSuggests()};v.container.getElement(".autocomplete-rule-content-section").onpaste=function(B){if(l){console.log("paste")}var E="";var F=[];if(B.clipboardData){E=B.clipboardData.getData("text/plain");F=E.split("|")}else{if(window.clipboardData){E=window.clipboardData.getData("text");F=E.split("|")}}var A=B.target;var C=-1;var z=0;for(z=0;z<v._autocomplete.innerInputs.length;z+=1){if(A===v._autocomplete.innerInputs[z]){C=z;break}}var x=(C>=0)?C:v._autocomplete.badges.length;var y=0;for(y=0;y<F.length;y+=1){var D=q.getDatasetItemFrom(v._autocomplete,F[y]);if(D){v._autocomplete.onSelect(D,x)}else{v._autocomplete.onSelect({label:F[y],value:F[y],id_:null},x)}if(x>=0){x+=1}}var w=c.dicoAndGrammarCheckAndUpdateUI(v._mapDico,v._mapOperator,v._autocomplete);v._errorDicoOrGrammar=(w._rc!==e);v.updateExpression();if(v._localModelEvent&&F.length>0){v._localModelEvent.publish({event:"onChangeExpression",data:null})}B.preventDefault();v._autocomplete.currentPosition+=F.length-1;if(v._autocomplete.innerInputs[v._autocomplete.currentPosition]){v._autocomplete.innerInputs[v._autocomplete.currentPosition].focus();v._autocomplete.innerInputs[v._autocomplete.currentPosition].select()}else{v.container.querySelector(".autocomplete-input").focus();v.container.querySelector(".autocomplete-input").select()}};v.createInitialExpression();v._autocomplete.onHideSuggests()},setup:function(v){var y=this;y._mapDico={};y._mapOperator={};y._errorDicoOrGrammar=true;y._editable=v.editable;y.container.addClassName(this.getClassNames("-container"));y._context=null;y._badgeOnLeft=null;y._lastPosition=-1;y.model=new d(v);y._localModelEvent=v._localModelEvent;var w=function(C){if(C.clickedId){var E=q.getDatasetItemFromId(y._autocomplete,C.clickedId);if(E){var A=y._lastPosition;if(E.type===j.VALUE){var B=y.getRelativeContext(A);if(B&&B.id_===E.parent_){y._autocomplete.onSelect(E,A);if(y._lastPosition>=0){y._lastPosition+=1}}else{if(A>=0){y._autocomplete.onSelect(E,A);if(y._lastPosition>=0){y._lastPosition+=1}var D=q.getDatasetItemFromId(y._autocomplete,E.parent_);y._autocomplete.onSelect(D,A);if(y._lastPosition>=0){y._lastPosition+=1}}else{y._autocomplete.onSelect(E,A);if(y._lastPosition>=0){y._lastPosition+=1}var D=q.getDatasetItemFromId(y._autocomplete,E.parent_);y._autocomplete.onSelect(D,y._autocomplete.badges.length-1);if(y._lastPosition>=0){y._lastPosition+=1}}}}else{y._autocomplete.onSelect(E,A);if(y._lastPosition>=0){y._lastPosition+=1}}var z=c.dicoAndGrammarCheckAndUpdateUI(y._mapDico,y._mapOperator,y._autocomplete);y._errorDicoOrGrammar=(z._rc!==e);y.updateExpression();if(y._localModelEvent){y._localModelEvent.publish({event:"onChangeExpression",data:null})}}else{if(l){console.log("object with id "+C.clickedId+" not found in dictionary")}}}y._autocomplete.onHideSuggests()};if(y._localModelEvent&&y._editable){y._localModelEvent.subscribe({event:"onPlus"},w)}var u=function(C){if(!UWA.is(y._autocomplete.currentPosition,"number")){return(C.id_autocomplete!=="binary_operator_id"&&C.id_autocomplete!=="closing_separator_id")}var B=y.getRelativeBadgeAndIndexOnLeft(y._autocomplete.currentPosition);var z=true;if(!B){return(C.id_autocomplete!=="binary_operator_id"&&C.id_autocomplete!=="closing_separator_id")}switch(B.badge.type){case j.VARIANT:z=(C.id_autocomplete===B.badge.id_autocomplete||C.id_autocomplete==="binary_operator_id"||C.id_autocomplete==="closing_separator_id");break;case j.VALUE:var A=y.getRelativeContext(y._autocomplete.currentPosition);if(A){z=(C.id_autocomplete===B.badge.parent_||C.id_autocomplete==="binary_operator_id"||C.id_autocomplete==="closing_separator_id")}break;case j.OPTION:case j.PACK:z=(C.id_autocomplete==="binary_operator_id"||C.id_autocomplete==="closing_separator_id");break;case"binary_operator":z=(C.id_autocomplete!=="binary_operator_id"&&C.id_autocomplete!=="closing_separator_id");break;case"unary_operator":z=(C.id_autocomplete!=="binary_operator_id"&&C.id_autocomplete!=="closing_separator_id");break;case"opening_separator":z=(C.id_autocomplete!=="binary_operator_id"&&C.id_autocomplete!=="closing_separator_id");break;case"closing_separator":z=(C.id_autocomplete==="binary_operator_id"||C.id_autocomplete==="closing_separator_id");break;default:break}return z};var x=function(z){z=z.filter(u);return z};var t=false;if(y._minLengthBeforeSearch===0){t=true}y._autocomplete=new o({showSuggestsOnFocus:t,minLengthBeforeSearch:y._minLengthBeforeSearch,floatingSuggestions:true,multiSelect:true,itemMultiSelect:true,placeholder:"",noResultsMessage:false,closableItems:false,allowFreeInput:true,filterEngine:x,events:{onSelectBadge:function(A,z){y._autocomplete.onHideSuggests()},onUnSelectBadge:function(z){},onFocus:function(){},onClick:function(){y._autocomplete.onHideSuggests()},onClickOutside:function(){},onSelect:function(C){var B=document.activeElement;if(C.type===j.VALUE){if(y.getRelativeContext(y._autocomplete.currentPosition)===null||y.getRelativeContext(y._autocomplete.currentPosition).type!==j.VARIANT||y.getRelativeContext(y._autocomplete.currentPosition).id_!==C.parent_){if(y._autocomplete.currentPosition!==-1){var A=y._autocomplete.currentPosition;var D=q.getDatasetItemFromId(y._autocomplete,C.parent_);y._autocomplete.onSelect(D,A);y._autocomplete.currentPosition+=1}else{var D=q.getDatasetItemFromId(y._autocomplete,C.parent_);y._autocomplete.onSelect(D,y._autocomplete.badges.length-1);y._autocomplete.currentPosition=-1}}}y._autocomplete.onHideSuggests();var z=c.dicoAndGrammarCheckAndUpdateUI(y._mapDico,y._mapOperator,y._autocomplete);y._errorDicoOrGrammar=(z._rc!==e);y.updateExpression();if(y._localModelEvent){y._localModelEvent.publish({event:"onChangeExpression",data:null})}B.focus()},onUnselect:function(A){var z=c.dicoAndGrammarCheckAndUpdateUI(y._mapDico,y._mapOperator,y._autocomplete);y._errorDicoOrGrammar=(z._rc!==e);y.updateExpression();if(y._localModelEvent){y._localModelEvent.publish({event:"onChangeExpression",data:null})}},onUpdateInputPosition:function(z){},onBlur:function(z){y._lastPosition=y._autocomplete.currentPosition}}});y.createMapDico();y.createDataSet();if(y._editable===false){y._autocomplete.disable()}},getRelativeContext:function(u){var A=this;var t=A.getRelativeBadgeAndIndexOnLeft(u);if(!t){return null}var y=t.badge;var v=t.index;if(y.type===j.VALUE){var w=y.parent_;var x=v-1;var z=(x>=0);while(z){switch(A._autocomplete.selectedItems[x].type){case j.VALUE:if(w!==A._autocomplete.selectedItems[x].parent_){return null}break;case j.VARIANT:if(w===A._autocomplete.selectedItems[x].id_){return A._autocomplete.selectedItems[x]}else{return null}break;default:return null}x--;if(x<0){z=false}}}else{return y}return null},getRelativeBadgeAndIndexOnLeft:function(t){var u=this;if(t===0){return null}if(t===-1){return(u._autocomplete.selectedItems.length>0)?{badge:u._autocomplete.selectedItems[u._autocomplete.selectedItems.length-1],index:u._autocomplete.selectedItems.length-1}:null}return{badge:u._autocomplete.selectedItems[t-1],index:t-1}},render:function(){var t=this},onRender:function(){},createMapDico:function(){var t=this;t._mapDico=a.dicoMinifiedV3ToMap(t.model.get("dictionary"))},createDataSet:function(){var z=this;var y=0;var x=z._mapDico;var C=null;var t=[];for(C in x){var w=null;if(x.hasOwnProperty(C)){switch(x[C].type){case j.VALUE:break;case j.VARIANT:w={};w.name="datasetname"+x[C].name;w.id_autocomplete=C;w.id_=C;w.displayName=m;w.items=[];w.items.push({value:x[C].name,id_autocomplete:C,id_:C,type:j.VARIANT});w.items[0].items=[];for(y=0;y<x[C].values.length;y+=1){var A=x[C].values[y];w.items[0].items.push({parent_:C,value:x[A].name,id_:A,type:j.VALUE})}break;case j.VARIABILITY_GROUP:w={};w.name="datasetname"+x[C].name;w.id_autocomplete=C;w.id_=C;w.displayName=m;w.items=[];w.items.push({value:x[C].name,id_autocomplete:C,id_:C,type:j.VARIABILITY_GROUP});w.items[0].items=[];for(y=0;y<x[C].content.length;y+=1){var A=x[C].content[y];w.items[0].items.push({parent_:C,value:x[A].name,id_:A,type:j.OPTION})}break;case j.OPTION:case j.PACK:break;default:break}if(w!==null){t.push(w)}}}for(y=0;y<t.length;y+=1){z._autocomplete.addDataset(t[y])}var v={name:"datasetoperator",displayName:m,id_autocomplete:f.binary_operator_id,items:[{id_:f.and_id,value:"AND",type:f.binary_operator,"class":"toto"},{id_:f.or_id,value:"OR",type:f.binary_operator,"class":"toto"}]};z._mapOperator.and_id={value:"AND",type:f.binary_operator};z._mapOperator.or_id={value:"OR",type:f.binary_operator};if(z.model.get("withAdvancedOperator")===true){v.items.push({id_:f.imply_id,value:"IMPLY",type:f.binary_operator,"class":"toto"});v.items.push({id_:f.eqvlt_id,value:"EQUIVALENT",type:f.binary_operator,"class":"toto"});z._mapOperator.imply_id={value:"IMPLY",type:f.binary_operator};z._mapOperator.eqvlt_id={value:"EQUIVALENT",type:f.binary_operator}}z._autocomplete.addDataset(v);var B={name:"datasetnot",id_autocomplete:f.unary_operator_id,displayName:m,items:[{id_:f.not_id,value:"NOT",type:f.unary_operator,"class":"toto"}]};z._mapOperator.not_id={value:"NOT",type:f.unary_operator};z._autocomplete.addDataset(B);var D={name:"OpeningSeparators",id_autocomplete:f.opening_separator_id,displayName:m,items:[{id_:f.open_id,value:"(",type:f.opening_separator,"class":"toto"}]};z._mapOperator.open_id={value:"(",type:f.opening_separator};var u={name:"ClosingSeparators",id_autocomplete:f.closing_separator_id,displayName:m,items:[{id_:f.close_id,value:")",type:f.closing_separator,"class":"toto"}]};z._mapOperator.close_id={value:")",type:f.closing_separator};z._autocomplete.addDataset(D);z._autocomplete.addDataset(u)},updateExpression:function(){var y=this;var t=y._autocomplete.selectedItems;var v=0;var u=[];for(v=0;v<t.length;v+=1){var x={};x.id=t[v].id_?t[v].id_:"undefined";x.label=t[v].label?t[v].label:"undefined";x.type=t[v].type?t[v].type:"dummy";x.value=t[v].value?t[v].value:"undefined";u.push(x)}var w=y.model.get("currentExpression");if(w===null||w===undefined){w={}}w.items=u;if(u.length>0){y.container.querySelector(".autocomplete-input").placeholder=""}else{y.container.querySelector(".autocomplete-input").placeholder=b._type_expression+"..."}y.model.set("currentExpression",w)},getExpression:function(){var t=this.model.get("currentExpression");return(t&&t.items?t.items:[])},setExpression:function(t){this.model.set("currentExpression",t)},createInitialExpression:function(){var w=this;w._autocomplete.unselectAll();var y=w.model.get("currentExpression");var x=JSON.parse(JSON.stringify(y));if(y&&y.items&&y.items.length!==0){var u=0;w.container.querySelector(".autocomplete-input").placeholder="";for(u=0;u<x.items.length;u+=1){if(x.items[u].type===j.VARIABILITY_GROUP){}else{var v=q.getDatasetItemFromId(w._autocomplete,x.items[u].id);if(v&&v.type===j.VARIABILITY_GROUP){}else{if(v){w._autocomplete.onSelect(v,w._autocomplete.badges.length)}else{w._autocomplete.onSelect({label:y.items[u].value,value:y.items[u].value,id_:null},w._autocomplete.badges.length)}}}}}else{w.container.querySelector(".autocomplete-input").placeholder=b._type_expression+"..."}var t=c.dicoAndGrammarCheckAndUpdateUI(w._mapDico,w._mapOperator,w._autocomplete);w._errorDicoOrGrammar=(t._rc!==e)},getErrorsCount:function(){var t=this;return c.getGlobalErrorCounts(t._mapDico,t._mapOperator,t._autocomplete)},isThereError:function(){return this._errorDicoOrGrammar}});return i});