define("DS/MPFShopCardComponent/ShopCardHeader",["UWA/Core","UWA/Class/View","DS/MPFView/InitialsDot","DS/UIKIT/Tooltip","DS/MPFView/RatingStarsTile","DS/MPFServices/ObjectService","DS/MPFShopModel/ShopModel","WebappsUtils/WebappsUtils","i18n!DS/MPFShopCardComponent/assets/nls/ShopCardComponent","css!DS/MPFShopCardComponent/MPFShopCardComponent"],function(f,a,b,e,d,g,i,c,j){var h;h=a.extend({className:"mpf-shopcard-header",setup:function(k){g.requiredOfPrototype(k.shop,i,"options.shop must be a ShopModel");this.shop=k.shop;this.hideRating=k.hideRating===true},render:function(){var l=f.createElement("div",{"class":"logo-container",html:this._createLogo()});var k=f.createElement("div",{"class":"infos-container",html:[{tag:"div","class":"mpf-row",html:[this._createNameTile(),this._createRatingOrIconTile()]},{tag:"div","class":"mpf-row",html:[this._createCountryTile(),this._createInfoBadge()]}]});this.container.setContent([l,k]);return this},destroy:function(){this.shop=null;this.nameTooltip.destroy();this._parent();this.container=null},_createLogo:function(){return new b({title:this.shop.getName(),image:this.shop.getLogo()})},_createNameTile:function(){var k=f.createElement("div",{"class":"shop-name-tile",text:this.shop.getName()});this.nameTooltip=new e({target:k,body:this.shop.getName()});return k},_createCountryTile:function(){var k=this.shop.getCountry();if(k){return f.createElement("div",{"class":"country-tile",html:[{tag:"span",html:this._createLocationIcon()},{tag:"span","class":"country-text",text:k}]})}},_createLocationIcon:function(){var k=document.createElementNS("http://www.w3.org/2000/svg","svg");k.setAttributeNS(null,"viewBox","-1 -1 25 25");k.setAttributeNS(null,"height","18");k.setAttributeNS(null,"width","18");var l=document.createElementNS("http://www.w3.org/2000/svg","path");l.setAttributeNS(null,"d","M12 10c-1.104 0-2-.896-2-2s.896-2 2-2 2 .896 2 2-.896 2-2 2m0-5c-1.657 0-3 1.343-3 3s1.343 3 3 3 3-1.343 3-3-1.343-3-3-3m-7 2.602c0-3.517 3.271-6.602 7-6.602s7 3.085 7 6.602c0 3.455-2.563 7.543-7 14.527-4.489-7.073-7-11.072-7-14.527m7-7.602c-4.198 0-8 3.403-8 7.602 0 4.198 3.469 9.21 8 16.398 4.531-7.188 8-12.2 8-16.398 0-4.199-3.801-7.602-8-7.602");k.appendChild(l);return k},_createRatingOrIconTile:function(){if(this.shop.isInternal()){return this._createPrivateShopIcon()}else{if(!this.hideRating){return this._createRatingTile()}}},_createPrivateShopIcon:function(){return f.createElement("img",{"class":"internal-icon-tile",src:c.getWebappsAssetUrl("MPFShopCardComponent","img/Small_Factory_Img.png")})},_createRatingTile:function(){var l=this.shop.get(i.Fields.RATING);var k=this.shop.get(i.Fields.NUMBER_RATINGS)||0;return f.createElement("div",{"class":"rating-stars-tile",html:[new d({rating:l,starSize:"18px"}).render(),f.createElement("span",{"class":"number-reviews",text:"("+k+" "+j.get("reviews")+")"})]})},_createInfoBadge:function(){var k=this.shop.hasAutomatedPricing();k=(k===true)||(k==="true");if(k){return f.createElement("div",{"class":"info-badge",text:j.get("directPurchase")})}}});return h});define("DS/MPFShopCardComponent/SmallShopCardComponent",["UWA/Core","UWA/Event","UWA/Class/View","DS/MPFServices/ObjectService","DS/MPFShopModel/ShopModel","DS/MPFView/InitialsDot","DS/UIKIT/Input/Button","DS/UWPClientCode/Navigation","i18n!DS/MPFShopCardComponent/assets/nls/ShopCardComponent","css!DS/MPFShopCardComponent/MPFShopCardComponent"],function(f,i,c,g,j,b,h,a,d){var e=c.extend({className:"mpf-small-shop-card",setup:function(k){k=(k||{});this._parent(k);g.requiredOfPrototype(k.shop,j,"options.shopModel should be a ShopModel");this.shop=k.shop;this.displayEMPIcon=k.displayEMPIcon===true;this.isSelected=k.isSelected===true;if(f.is(k.button)){this.button=this._createButton(k.button)}this.logo=this._createLogo();this.moreInfoButton=this._createMoreInfoButton();this.topContainer=this._createTopContainer();this.bottomContainer=this._createBottomContainer()},render:function(){var k;k=f.createElement("div",{"class":"mpf-shop-content",html:[this.topContainer,this.bottomContainer]});this.container.setContent([this.logo,k]);if(this.isSelected&&!this.container.hasClassName("selected")){this.container.addClassName("selected");this.container.addContent(f.createElement("span",{"class":"fonticon fonticon-check lab-selected"}))}return this},setSelected:function(k){var l;this.isSelected=k!==false;this.isSelected?this.container.addClassName("selected"):this.container.removeClassName("selected");l=this.container.getElement("fonticon-check.lab-selected");if(!f.is(l)){this.container.addContent(f.createElement("span",{"class":"fonticon fonticon-check lab-selected"}))}},_createButton:function(k){var l=this;return new h({className:"link",value:k.label,events:{onClick:function(){l.dispatchEvent("buttonClicked",l);if(f.is(k.onClickCallback)&&typeof k.onClickCallback==="function"){k.onClickCallback()}}}})},_createMoreInfoButton:function(){var k=this;return new h({className:"link",value:d.get("moreInformation"),events:{onClick:function(m){var l;i.stopPropagation(m);k.dispatchEvent("moreInformationClicked",k);l="/lab/"+k.shop.get("id")+window.location.search+"&explore=true";a.routeTo(l)}}})},_createTopContainer:function(){var l;var k;l=f.createElement("span",{text:this.shop.getName()});if(this.displayEMPIcon){k=this._getIcon()}return f.createElement("div",{"class":"mpf-small-shop-card-top",html:[l,k]})},_getIcon:function(){if(this.shop.isInternal()){return f.createElement("div",{"class":"factory-icon"})}else{return f.createElement("span",{"class":"fonticon fonticon-check"})}},_createBottomContainer:function(){return f.createElement("div",{"class":"mpf-small-shop-card-bottom",html:[this.moreInfoButton,this.button]})},_createLogo:function(){return new b({title:this.shop.getName(),image:this.shop.getLogo()})},destroy:function(){this.shop=null;this.displayEMPIcon=null;this.isSelected=null;this.button=null;this.logo=null;this.moreInfoButton=null;this.topContainer=null;this.bottomContainer=null;this._parent();this.container=null}});return e});define("DS/MPFShopCardComponent/MultiBiddingShopCard",["UWA/Core","UWA/Class/View","UWA/Event","DS/MPFShopModel/ShopModel","DS/MPFShopCardComponent/ShopCardHeader","DS/MPFServices/ObjectService","DS/UIKIT/Input/Button","DS/MPFError/BadArgumentError","DS/UWPClientCode/Navigation","i18n!DS/MPFShopCardComponent/assets/nls/ShopCardComponent","css!DS/MPFShopCardComponent/MPFShopCardComponent"],function(d,c,h,j,g,f,e,i,b,k){var a=c.extend({className:"mpf-shop-card",setup:function(l){f.requiredOfPrototype(l.shop,j,"options.shop should be a ShopModel");if(Array.isArray(l.items)&&l.items.length>0){for(var m=0;m<l.items.length;m++){f.requiredOfPrototype(l.items[m],c,"options.items should be an array containing only instances of UWA/Class/View")}}else{throw new i("options.items should be an array of instances of UWA/Class/View")}this.shop=l.shop;this.isSelected=l.isSelected===true;this.hideRating=l.hideRating===true;this.shopName=this.shop.get("shopName");this.shopId=this.shop.get("id");this.items=this._addItemSizeClassNames(l.items);if(!d.is(this.shopName,"string")||!d.is(this.shopId,"string")){throw new i("id and shopName of ShopModel must be strings.")}if(this.isSelected){this.container.addClassName("selected")}this.header=this._createHeader();this.footer=this._createFooter();this.selectionMark=this._createSelectionMark()},render:function(){var m=[];for(var l=0;l<this.items.length;l++){m.push(this.items[l].render())}this.container.setContent([this.header.render(),{tag:"div","class":"mpf-card-body",html:m},this.footer,this.selectionMark]);return this},destroy:function(){if(this.directPurchaseButton){this.directPurchaseButton.removeEvents()}this.selectButton.removeEvents();this.infoLink.removeEvents();for(var l=0;l<this.items.length;l++){if(d.is(this.items[l].destroy,"function")){this.items[l].destroy()}}this.shop=null;this._parent();this.shopName=null;this.shopId=null;this.items=null;this.selectButton=null;this.infoLink=null;this.header=null;this.footer=null;this.container=null},_addItemSizeClassNames:function(l){for(var m=0;m<l.length;m++){var n=l[m];var o;if(d.is(n.size)&&n.size==="big"){o="mpf-card-body-element big-item"}else{o="mpf-card-body-element small-item"}n.container.addClassName(o)}return l},_createHeader:function(){return new g({shop:this.shop,hideRating:this.hideRating})},_createFooter:function(){var m=d.createElement("div",{"class":"mpf-card-footer"});this.infoLink=d.createElement("a",{"class":"mpf-card-moreinfos-link",html:k.get("viewMore")}).inject(m);this.infoLink.addEvent("click",this._openLabPage.bind(this));var l=d.createElement("div",{"class":"footer-button-container"}).inject(m);if(this.shop.hasAutomatedPricing()){this.directPurchaseButton=new e({className:"direct-purchase-button",icon:"fonticon-shopping-cart",value:k.get("buyNow")}).inject(l);this.directPurchaseButton.addEvent("onClick",this._buyNow.bind(this))}this.selectButton=new e({className:"primary select-button",value:this.isSelected?k.get("deselect"):k.get("selectForQuote")}).inject(l);this.selectButton.addEvent("onClick",this._selectForQuote.bind(this));return m},_createSelectionMark:function(){return d.createElement("div",{"class":"selection-mark",html:[{tag:"div","class":"blue-triangle"},{tag:"span","class":"fonticon fonticon-check"}]})},_buyNow:function(l){h.preventDefault(l);this.dispatchEvent("buyNowClicked",this.shop)},_openLabPage:function(l){h.preventDefault(l);this.dispatchEvent("viewMoreClicked",this.shop);if(d.is(b.routeTo,"function")){b.routeTo("/lab/"+this.shopId+"?explore=true")}},_selectForQuote:function(){this.isSelected=!this.isSelected;this.container.toggleClassName("selected");if(this.isSelected){this.selectButton.setValue(k.get("deselect"))}else{this.selectButton.setValue(k.get("selectForQuote"))}this.dispatchEvent("selectionChanged",[this.shop,{isSelected:this.isSelected}])}});return a});define("DS/MPFShopCardComponent/ShopCardComponent",["UWA/Core","UWA/Class/View","UWA/Event","DS/MPFShopModel/ShopModel","DS/MPFShopCardComponent/ShopCardHeader","DS/MPFServices/ObjectService","DS/UIKIT/Input/Button","DS/MPFError/BadArgumentError","DS/UWPClientCode/Navigation","i18n!DS/MPFShopCardComponent/assets/nls/ShopCardComponent","css!DS/MPFShopCardComponent/MPFShopCardComponent"],function(d,b,h,j,g,f,e,i,a,k){var c=b.extend({className:"mpf-shop-card",setup:function(l){f.requiredOfPrototype(l.shop,j,"options.shop should be a ShopModel");if(Array.isArray(l.items)&&l.items.length>0){for(var m=0;m<l.items.length;m++){f.requiredOfPrototype(l.items[m],b,"options.items should be an array containing only instances of UWA/Class/View")}}else{throw new i("options.items should be an array of instances of UWA/Class/View")}this.shop=l.shop;this.items=this._addItemSizeClassNames(l.items);this.hideRating=l.hideRating===true;if(!d.is(this.shop.getName(),"string")||!d.is(this.shop.get("id"),"string")){throw new i("id and shopName of ShopModel must be strings.")}this.header=this._createHeader();this.footer=this._createFooter()},render:function(){var m=[];for(var l=0;l<this.items.length;l++){m.push(this.items[l].render())}this.container.setContent([this.header.render(),{tag:"div","class":"mpf-card-body",html:m},this.footer]);return this},destroy:function(){this.selectButton.removeEvents();this.infoLink.removeEvents();for(var l=0;l<this.items.length;l++){if(d.is(this.items[l].destroy,"function")){this.items[l].destroy()}}this.shop=null;this._parent();this.items=null;this.selectButton=null;this.infoLink=null;this.initialsDot=null;this.header=null;this.footer=null;this.container=null},_addItemSizeClassNames:function(l){for(var m=0;m<l.length;m++){var n=l[m];var o;if(d.is(n.size)&&n.size==="big"){o="mpf-card-body-element big-item"}else{o="mpf-card-body-element small-item"}n.container.addClassName(o)}return l},_createHeader:function(){return new g({shop:this.shop,hideRating:this.hideRating})},_createFooter:function(){var m=d.createElement("div",{"class":"mpf-card-footer"});this.infoLink=d.createElement("a",{"class":"mpf-card-moreinfos-link",html:k.get("viewMore")}).inject(m);var l=d.createElement("div",{"class":"footer-button-container"}).inject(m);this.selectButton=new e({className:"primary select-button",value:k.get("getAQuote")}).inject(l);this.infoLink.addEvent("click",this._openLabPage.bind(this));this.selectButton.addEvent("onClick",this._getAQuote.bind(this));return m},_openLabPage:function(l){h.preventDefault(l);this.dispatchEvent("viewMoreClicked",this.shop);if(d.is(a.routeTo,"function")){a.routeTo("/lab/"+this.shop.get("id")+"?explore=true")}},_getAQuote:function(){this.dispatchEvent("getAQuoteClicked",this.shop);if(d.is(a.routeTo,"function")){a.routeTo("/print/model?labId="+this.shop.get("id")+"&explore=true")}}});return c});