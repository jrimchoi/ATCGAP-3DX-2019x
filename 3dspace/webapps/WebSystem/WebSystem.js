/*!  COPYRIGHT DASSAULT SYSTEMES 2015   */
define("DS/WebSystem/Rsc",["DS/RuntimeView/RSCManager","UWA/Class"],function(c,a){var b=a.singleton({init:function(d){},loadRsc:function(d){c.loadResource({resourceFile:d,})},rsc:function(d,e,f){c.onResourceLoaded({resourceFile:d},function(){if(Array.isArray(e)){var h=[];for(var g=0;g<e.length;g++){h[g]=this.getIcon({key:e[g].iconName,size:e[g].iconSize})}f(h)}else{f(this.getIcon({key:e.iconName,size:e.iconSize}))}});if(!c._listOfResources||!c._listOfResources[d]){this.loadRsc(d)}}});return b});define("DS/WebSystem/Css",["DS/WebappsUtils/WebappsUtils"],function(b){return function a(d,c){if(Array.isArray(d)){for(var e=0;e<d.length;e++){this.loadCssFile(d[e],c)}return this}var f=document.createElement("link");f.type="text/css";f.rel="stylesheet";if(c===undefined){f.href=d}else{f.href=b.getWebappsBaseUrl()+d}document.getElementsByTagName("head")[0].appendChild(f)}});define("DS/WebSystem/Preference",["UWA/Class"],function(a){return a.singleton({init:function(){},set:function(b,c){if(typeof widget!=="undefined"&&widget.setValue){widget.setValue(b,c)}},get:function(b){var c;if(typeof widget!=="undefined"&&widget.getValue){c=widget.getValue(b)}return c}})});define("DS/WebSystem/UrlTools",["UWA/Class"],function(a){return a.singleton({getURLParameters:function(){var b={},c,d=/([^&=]+)=?([^&]*)/g,e=window.location.toString();e=e.substring(e.indexOf("?")+1);while(c=d.exec(e)){b[decodeURIComponent(c[1])]=decodeURIComponent(c[2])}return b}})});define("DS/WebSystem/FpsInfo",["UWA/Class"],function(a){return a.extend({min:Infinity,max:0,avg:0,init:function(){this.clear()},clear:function(){this.avg=this.max=0;this.min=Infinity},toString:function(){var b=""+Math.round(this.min)+"/"+Math.round(this.max)+"/"+Math.round(this.avg);return b}})});define("DS/WebSystem/DataUrlTools",["UWA/Class"],function(a){return a.singleton({toBlob:function(h){var g=h.match(/data:([^;]*)(;base64)?,([0-9A-Za-z+/]+)/);var b=atob(g[3]);var e=new ArrayBuffer(b.length);var c=new Uint8Array(e);for(var f=0;f<c.length;f++){c[f]=b.charCodeAt(f)}var d=new Blob([c],{type:g[1]});return window.URL.createObjectURL(d)}})});define("DS/WebSystem/MemoryInfo",[],function(){var a=1048576;return function(c){var b=c&&c.size||a;if(typeof gc!==undefined){gc()}return(window.performance&&window.performance.memory&&window.performance.memory.usedJSHeapSize)?Math.floor(window.performance.memory.usedJSHeapSize/b):0}});define("DS/WebSystem/Downloader",function(){return function(c,b){var a=document.createElement("a");a.download=c;a.innerHTML="Download File";a.href=window.URL.createObjectURL(b);a.onclick=function(d){document.body.removeChild(d.target)};a.style.display="none";document.body.appendChild(a);a.click()}});define("DS/WebSystem/Scripting",["UWA/Class"],function(a){var b=a.extend({name:"Scripting",init:function(){this._parent();this.scriptableAPIdef={};this._subscribers=[]},dispose:function(){this.disposeAllScriptingFunctions()},disposeAllScriptingFunctions:function(){for(var c in this.scriptableAPIdef){this.removeScriptingFunction(c)}this.scriptableAPIdef=null},addScriptingFunction:function(e,i,c,f,h){this.scriptableAPIdef[e]={callback:i,documentation:c,declare:f,dispose:h};var g=this;if(f){var d=function(){return g.executeScriptingFunction(e,arguments)};if(!Array.isArray(f)){f[e]=d}else{f.forEach(function(j){j[e]=d})}}return this},removeScriptingFunction:function(c){if(this.scriptableAPIdef[c]){if(this.scriptableAPIdef[c]["declare"]){if(!Array.isArray(this.scriptableAPIdef[c]["declare"])){this.scriptableAPIdef[c]["declare"][c]=undefined}else{this.scriptableAPIdef[c]["declare"].forEach(function(e){e[c]=undefined})}}if(this.scriptableAPIdef[c].dispose){this.scriptableAPIdef[c].dispose()}if(this._subscribers[c]){for(var d in this._subscribers[c]){this._subscribers[c][d]=null}this._subscribers[c]=null}this.scriptableAPIdef[c]=undefined;delete this.scriptableAPIdef[c]}return this},getScriptingFunctions:function(){return this.scriptableAPIdef},hasScriptingFunction:function(c){return this.scriptableAPIdef[c]},getFunctionsDoc:function(){var c={};for(var d in this.scriptableAPIdef){c[d]=this.scriptableAPIdef[d].documentation||"noDoc"}return c},subscribeScriptingFunction:function(d,c){if(!this._subscribers[d]){this._subscribers[d]=[]}this._subscribers[d].push(c);return this},unsubscribeScriptingFunction:function(d,c){if(this._subscribers[d]){for(var e in this._subscribers[d]){if(this._subscribers[d][e]==c){this._subscribers[d][e]=null}}}return this},subscribeAllScriptingFunctions:function(c){for(var d in this.scriptableAPIdef){this.subscribeScriptingFunction(d,c)}},unsubscribeAllScriptingFunctions:function(c){for(var d in this.scriptableAPIdef){this.unsubscribeScriptingFunction(d,c)}},notifyScriptingFunction:function(d,c){if(this.scriptableAPIdef[d]&&this._subscribers[d]){for(var e in this._subscribers[d]){if(this._subscribers[d][e]){this._subscribers[d][e](d,c)}}}return this},executeScriptingFunction:function(d,c){var e=this.scriptableAPIdef[d];if(!e){throw"Unkown command"}if(!e.callback){throw"internal error: callback not present"}return e.callback.apply(this,c)}});return b});define("DS/WebSystem/Context",["UWA/Class"],function(a){var b={};return a.singleton({createContext:function(d){var e=d||"Context";if(b[e]===undefined){b[e]=-1}b[e]++;var c=b[e]>0?"_"+b[e]:"";return e+c}})});define("DS/WebSystem/DetectBrowser",[],function(){return function(){var c={browser:{},os:{}};var a=navigator.userAgent,d;var h=a.match(/(opr|opera(?=\/))\/?\s*([\d\.]+)/i)||[];if(h[0]){h[1]="opera"}else{h=a.match(/(edge(?=\/))\/?\s*([\d\.]+)/i)||[];if(h[0]){h[1]="ie"}else{h=a.match(/(edge|chrome|safari|firefox|msie|trident(?=\/))\/?\s*([\d\.]+)/i)||[];if(/trident/i.test(h[1])){d=/\brv[ :]+(\d+(\.\d+)?)/g.exec(a)||[];h[1]="ie";h[2]=d[1]||""}if(/edge/i.test(h[1])){d=/\brv[ :]+(\d+(\.\d+)?)/g.exec(a)||[];h[1]="ie";h[2]=d[1]||""}}}h=h[2]?[h[1],h[2]]:[navigator.appName,navigator.appVersion,"-?"];c.browser.name=h[0].toLowerCase();c.browser.version=h[1].split(".")[0];c.browser.mobile=/IEMobile|Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(navigator.appVersion);c.browser.arm=/ARM/.test(a);c.browser.hasTouch=("ontouchstart" in document.documentElement)||c.browser.mobile;var i=[{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows Vista",r:/Windows NT 6.0/},{v:"7",s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{v:"8",s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{v:"8.1",f:"winphone",s:"Windows Phone 8.1",r:/Windows Phone 8.1/},{v:"8",s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{v:"10",s:"Windows 10",r:/(Windows 10|Windows NT 10.0|Windows NT 6.3)/},{s:"android",r:/Android/},{s:"linux",r:/(Linux|X11)/},{s:"ios",r:/iP(hone|ad|od)/},{s:"macosx",r:/Mac OS X/},{s:"cros",r:/CrOS/}];for(var b in i){if(i.hasOwnProperty(b)){var f=i[b];if(f.r.test(a)){c.os.name=f.s;if(f.v){c.os.version=f.v}if(f.f){c.os.name=f.f}break}}}var g="";if(/Windows/.test(c.os.name)){if(c.os.version!==undefined){g=/Windows (\d.\d)/.exec(c.os.name);if(g!==null){g=g[1]}}c.os.name="win"}else{switch(c.os.name){case"macosx":var e=/Mac OS X (\d+)_(\d+)_?(\d+)?/.exec(a);if(e!==null){g=e[1]+"."+e[2]}else{e=/Mac OS X (\d+.\d+)/.exec(a);if(e!==null){g=e[1]}}break;case"android":g=/Android ([\.\_\d]+)/.exec(a);if(g!==null){g=g[1].split(".");g=g[0]}else{g=4}break;case"ios":var e=/OS (\d+)_(\d+)_?(\d+)?/.exec(navigator.appVersion);g=e[1]+"."+e[2];break}}if(c.os.version===undefined){c.os.version=g}return c}});define("DS/WebSystem/Settings",["UWA/Core","UWA/Class"],function(c,a){var b=a.singleton({init:function(){this.storageSystem=null;var f=false;try{f="localStorage" in window&&window.localStorage!==null&&window.localStorage!==undefined}catch(d){f=false}if(f&&this.localStorage.get("ODT_SETTINGS_COOKIE")===undefined){this.storageSystem=this.localStorage}else{this.storageSystem=this.cookies}},set:function(d,e){this.storageSystem.set(d,e)},get:function(e,d){var f=this.storageSystem.get(e);if(f===undefined){f=d}return f},remove:function(d){this.storageSystem.remove(d)},localStorage:{set:function(d,e){localStorage[d]=e},get:function(d){return localStorage[d]},remove:function(d){localStorage.removeItem(d)}},cookies:{set:function(d,e){document.cookie=d+"="+e},get:function(e){var f=document.cookie;var g=f.indexOf(" "+e+"=");if(g==-1){g=f.indexOf(e+"=")}if(g==-1){f=null}else{g=f.indexOf("=",g)+1;var d=f.indexOf(";",g);if(d==-1){d=f.length}f=unescape(f.substring(g,d))}if(f===null||f===""){f=undefined}return f},remove:function(d){document.cookie=d+"="}}});return c.namespace("SHARE/Settings",b)});define("DS/WebSystem/Environment",["UWA/Class","UWA/Core","UWA/Utils","DS/WebSystem/Settings","DS/WebSystem/Preference"],function(b,d,a,g,f){var c="Env";var e=b.singleton({_parseURL:function(j){if(j!==""){var h=d.extend({},a.parseQuery(j));for(var k in h){this.set(k,h[k])}}},init:function(){this.data={};try{this._parseURL(window.top.location.search)}catch(h){}this._parseURL(window.location.search)},set:function(h,i){if(h!==undefined&&h!==null&&h!=""){this.data[h]=i.toString()}},isSet:function(h,j){var i=this.get(h);if(j!==undefined){return i===j}return i!==undefined},get:function(i){var h=this.data[i];if(h===undefined&&g!==undefined){h=g.get(i)}if(h===undefined&&g!==undefined){h=f.get(i)}return h},remove:function(h){if(this.data[h]!==undefined){delete this.data[h]}},isBoolActive:function(h){return this.isSet(h,"true")||this.isSet(h,"1")}});return e});define("DS/WebSystem/Nls",["DS/RuntimeView/NLSManager","UWA/Class","DS/WebSystem/Environment"],function(d,b,c){var a=b.singleton({init:function(e){if(c.isSet("3DPlay.Nls.Lang")){this._setLang(c.get("3DPlay.Nls.Lang"))}},_setLang:function(e){if(e){this.lang=e}},loadNls:function(e,f){if(f!==this.lang&&f!==undefined){this.lang=f}d.loadResource({resourceFile:e,language:this.lang})},nls:function(f,e,g,h){d.onResourceLoaded({resourceFile:f},function(){if(Array.isArray(e)){var k=[];for(var j=0;j<e.length;j++){k[j]=this.getKey({key:e[j]})}g(k)}else{g(this.getKey({key:e}))}});if(!d._listOfResources[f]){this.loadNls(f,h)}}});return a});define("DS/WebSystem/Assert",["DS/WebSystem/DetectBrowser","DS/WebSystem/Environment"],function(b,a){return function(d,c){if(a.isSet("System.Assert.EnableAsserts")){var g=true;var f;switch(arguments.length){case 2:if(typeof arguments[1]=="string"){if(typeof arguments[0]=="string"){g=arguments[1]==arguments[0]}else{g=arguments[0];f=arguments[1]}}else{g=arguments[1]==arguments[0]}break;case 1:g=arguments[0];break;default:return}if(g==false){var e="Assert Failed !!!\n";if(f){e+=f}else{e+="Tested value: "+arguments[0]+"\n";e+="Expected value: "+arguments[1]}console.error(e)}return g}}});