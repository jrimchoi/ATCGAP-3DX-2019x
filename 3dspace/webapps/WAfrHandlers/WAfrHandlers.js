define("DS/WAfrHandlers/mod_Handler",[],function(){function b(c){if(!this._private){this._private=Object.create(null)}this._private._currentAvailability=true;if(c){if(!c.id){throw new Error("Missing parameter. id has to be defined.")}this._private._id=c.id;if(c.i18n){this._private._i18n=c.i18n}}else{throw new Error("Missing parameters. Please see the Handler documentation to see the required parameters.")}}b.prototype.getId=function(){return this._private._id};b.prototype.setI18n=function(c){if(!c||!c.title||!c.shortHelpImage||!c.shortHelpImage.uri||!c.longHelpImage||!c.longHelpImage.uri){throw new Error("One or many parameters are missing.")}if(c){this._private._i18n=c}};b.prototype.getI18n=function(){return this._private._i18n};b.prototype.beingInitialized=function(){var c=false;var d=this.getHandlerComponent();if(d&&d.getInitializedState()){c=true}return c};b.prototype.getHandlerComponent=function(){throw new Error("getHandlerComponent has to be implemented on subclasses.")};b.prototype.onAvailabilityChanged=function(){throw new Error("onAvailabilityChanged has to be implemented on subclasses")};b.prototype.onAvailabilityEvent=function(c){if(!c||typeof c!=="function"){throw new Error("cb has to be a function",c)}var e=this.getHandlerComponent();if(!e){throw new Error("There is no HandlerComponent related to this Handler",this)}var d=e.getEventChannel();if(!d){throw new Error("Retrieved eventChannel is undefined")}var f=this.getId();if(!f){throw new Error("handlerIdentfier has to be a non empty string.")}return d.subscribe({event:f+"/AVAILABILITY"},c)};b.prototype.removeAvailabilityEventSubscription=function(c){if(undefined===c){throw new Error("token has to be defined")}var e=this.getHandlerComponent();if(!e){throw new Error("There is no HandlerComponent related to this Handler",this)}var d=e.getEventChannel();if(!d){throw new Error("Retrieved eventChannel is undefined")}var f=this.getId();if(!f){throw new Error("handlerIdentfier has to be a non empty string.")}return d.unsubscribe(c)};b.prototype.isAvailable=function(){return this._private._currentAvailability};b.prototype.isExecutable=function(){return this._private._currentAvailability};b.prototype.destroy=function(){};var a=Object.create(null);a.Handler=b;a.enums=Object.create(null);return a});define("DS/WAfrHandlers/private/private_Utilities",[],function(){var a=Object.create(null);a.enums=Object.create(null);a.enums.HandlerType={};a.inherit=function(d,c){d.prototype=Object.create(c.prototype,{constructor:{value:d,enumerable:false}})};a.executeHandlerFunctions=[];a.registerLeafHandler=function b(g,e){var d=a.enums.HandlerType;if(d.hasOwnProperty(g)){throw new Error("There already are a handler registered using the same handlerId",g)}if(!e||!e.executeFunc){throw new Error("Missing parameters")}var c=-1;for(var f in d){if(d.hasOwnProperty(f)){c=c>d[f]?c:d[f]}}++c;d[g]=c;a.executeHandlerFunctions[c]=e.executeFunc};a.publishHandlerAvailability=function(e){var d=e.getHandlerComponent();if(!d){throw new Error("There is no HandlerComponent related to this Handler",e)}var c=d.getEventChannel();if(!c){throw new Error("Retrieved eventChannel is undefined")}var f=e.getId();if(!f){throw new Error("handlerIdentfier has to be a non empty string.")}setTimeout(function(){c.publish({event:f+"/AVAILABILITY",data:{newValue:e.isAvailable()}})},0)};a.computeArgs=function(e,c){var d=e.getArgs();if(c&&d){for(var f in d){if(d.hasOwnProperty(f)&&!c.hasOwnProperty(f)){c[f]=d[f]}}}else{if(d){c=d}}return c};return a});define("DS/WAfrHandlers/private/private_CheckHandlerUtilities",["DS/CoreUtilities/ErrorManagement","DS/WAfrHandlers/private/private_Utilities"],function(d,c){var a=Object.create(null);function b(g){var f=g.getHandlerComponent();if(!f){throw new Error("There is no HandlerComponent related to this CheckHandler",g)}var e=f.getEventChannel();if(!e){throw new Error("Retrieved eventChannel is undefined")}var h=g.getId();if(!h){throw new Error("handlerIdentfier has to be a non empty string.")}var i=g._private._isChecked?"/CHECK":"/UNCHECK";e.publish({event:h+i})}a.executeCheckHandler=function(g,h){if(!g){throw new Error("checkHandler has to be defined and cannot be null")}var f=g.getHandlerComponent();if(!f){console.warn("NO HANDLER COMPONENT SET");throw new Error()}else{if(!f.getExecutionContext()){console.warn("NO EXECUTION CONTEXT SET");throw new Error()}}if(!h||h.action===undefined||typeof h.action!=="boolean"){throw new Error("Wrong parameters")}var e=true;if(g.beingInitialized()||g._private._isChecked!==h.action){g._private._isChecked=h.action;b(g);if(g._private._isChecked){if(g._private._check&&g._private._check._private._type!==undefined){e=false;c.executeHandlerFunctions[g._private._check._private._type]({handler:g._private._check,cb:h.cb,args:h.args})}}else{if(g._private._uncheck&&g._private._uncheck._private._type!==undefined){e=false;c.executeHandlerFunctions[g._private._uncheck._private._type]({handler:g._private._uncheck,cb:h.cb,args:h.args})}}}if(e&&h.cb){setTimeout(function(){var j=d.getErrorManager();var i=d.createReturnObject(j.SUCCEEDED);h.cb(i)},0)}};return a});define("DS/WAfrHandlers/mod_HandlerComponent",["DS/CoreUtilities/ErrorManagement","UWA/Class/Promise","DS/CoreEvents/ModelEvents","DS/WAfrHandlers/private/private_Utilities","DS/WAfrDebug/mod_Performances"],function(e,n,d,i,g){var p=g.Performances,f="[DS/WAfrHandlers/mod_HandlerComponent]";var k=Object.create(null);k.DEFAULT_COMPONENT_NAME="AFR_HandlerComponent";function m(r){if(!this||!this.resolve||!this.reject||!r){throw new Error()}if(e.hasSucceeded(r)){this.resolve(r)}else{this.reject(r)}}var a=Object.create(null);a.HandlerMap={HANDLER:"_hdlrMap",CHECK_HANDLER:"_chkHdlrMap",RADIO_HANDLER:"_radioHdlrMap"};function l(t,r,s){if(!t||!r||!s||!t._private.hasOwnProperty(r)){throw new Error()}var v=t._private[r];var u=s.getId();if(!v||!u){throw new Error()}if(s.setHandlerComponent(t)){v[u]=s}else{throw new Error()}}function o(t,r,s){if(!t||!r||!s||!t._private.hasOwnProperty(r)){throw new Error()}var v=t._private[r];var u=s.getId();if(!v||!u){throw new Error()}if(s.setHandlerComponent(null)){delete v[u]}else{throw new Error()}}function c(t,s,r){if(!t(r)){return r}return s(r).then(c.bind(null,t,s))}k.HandlerComponent=function(){this._perf=new p();this._private={};var s=a.HandlerMap;for(var t in s){if(s.hasOwnProperty(t)){var r=s[t];this._private[r]={}}}};k.HandlerComponent.DEFAULT_COMPONENT_NAME=k.DEFAULT_COMPONENT_NAME;function q(){return n.resolve()}k.HandlerComponent.prototype.getExposedComponentCtor=function(){var s=this;function r(){}r.prototype.initialize=q;r.prototype.clean=q;r.prototype.destroy=q;r.prototype.executeHandler=s.executeHandler.bind(s);r.prototype.toggleCheck=s.toggleCheck.bind(s);r.prototype.setCheckState=s.setCheckState.bind(s);r.prototype.getCheckState=s.getCheckState.bind(s);r.prototype.toggleRadioItemState=s.toggleRadioItemState.bind(s);r.prototype.setRadioItemState=s.setRadioItemState.bind(s);r.prototype.getRadioItemState=s.getRadioItemState.bind(s);return r};k.HandlerComponent.prototype.initialize=function(){this._private._eventChannel=new d();return n.resolve()};function b(u){if(!u){throw new Error("handlerComponent has to be defined")}var s=u._perf;var r=s.start([f,"manageDefaultCommand"].join(" "));var t=u._private._defaultCommandIdentifier;return new n(function(x,w){if(t){var v=u.getExecutionContext();if(v){require(["DS/WAfrCommandsArchitecture/mod_CommandsManagerComponent"],function(y){var z=v.getComponent(y.CommandsManagerComponent.DEFAULT_COMPONENT_NAME);if(z){z.setDefaultCommand(t);delete u._private._defaultCommandIdentifier;s.stop(r);x()}else{s.stop(r);w(new Error("No commandsManagerComponent found using this executionContext",v))}},function(){s.stop(r);w(new Error("Require failed (DS/WAfrCommandsArchitecture/mod_CommandsManagerComponent)"))})}else{s.stop(r);w(new Error("executionContext is undefined"))}}else{s.stop(r);x()}})}k.HandlerComponent.prototype.configure=function(){var r=this;var t={ActionHandler:"executeHandler",CommandHandler:"executeHandler",CheckHandler:"setCheckState",RadioHandler:"setRadioItemState"};var s=this._private._initializationData;if(!s||s.length<=0){return b(r)}else{return c(function(u){return u<s.length},function(v){var u=s[v];var w=t[u.type];return r[w](u).then(function(){return ++v})},0).then(function(){return b(r)})["catch"](function(u){return n.reject(u)})}};function j(x,t){var w=x._perf.start([f,"cleanUpHandlers"].join(" "));var s=a.HandlerMap;for(var v in s){if(s.hasOwnProperty(v)){var r=s[v];var y=x._private[r];for(var u in y){if(y.hasOwnProperty(u)){y[u].destroy()}}delete x._private[r];if(t){x._private[r]={}}}}x._perf.stop(w)}k.HandlerComponent.prototype.clean=function(){j(this,true);this._private._eventChannel.destroy();this._private._eventChannel=new d();this._private._availabilityModesComponent=null;return n.resolve()};k.HandlerComponent.prototype.destroy=function(){j(this,false);this._private._eventChannel.destroy();delete this._private._eventChannel;delete this._private._availabilityModesComponent;return n.resolve()};k.HandlerComponent.prototype.getEventChannel=function(){return this._private._eventChannel};k.HandlerComponent.prototype.setInitializedState=function(r){if(r===undefined){throw new Error("state has to be defined")}else{this._private._initializedState=r}};k.HandlerComponent.prototype.setInitializationDefaultCommand=function(r){if(!r||typeof r!=="string"){throw new Error("commandIdentifier has to be a string")}this._private._defaultCommandIdentifier=r};k.HandlerComponent.prototype.getInitializedState=function(){return Boolean(this._private._initializedState)};k.HandlerComponent.prototype.setInitializationData=function(r){if(Array.isArray(r)){this._private._initializationData=r}else{throw new Error("data has to be an array")}};k.HandlerComponent.prototype.setAvailabilityModesComponent=function(r){if(r===undefined){throw new Error("component has to be defined")}if(r!==null&&this._private._availabilityModesComponent){throw new Error("There is already one AvailabilityModesComponent attached to this HandlerComponent")}this._private._availabilityModesComponent=r};k.HandlerComponent.prototype.getAvailabilityModesComponent=function(){return this._private._availabilityModesComponent};k.HandlerComponent.prototype.addHandler=function(r){l(this,a.HandlerMap.HANDLER,r)};k.HandlerComponent.prototype.removeHandler=function(r){o(this,a.HandlerMap.HANDLER,r)};k.HandlerComponent.prototype.addCheckHandler=function(r){l(this,a.HandlerMap.CHECK_HANDLER,r)};k.HandlerComponent.prototype.removeCheckHandler=function(r){o(this,a.HandlerMap.CHECK_HANDLER,r)};k.HandlerComponent.prototype.addRadioHandler=function(r){l(this,a.HandlerMap.RADIO_HANDLER,r)};k.HandlerComponent.prototype.removeRadioHandler=function(r){o(this,a.HandlerMap.RADIO_HANDLER,r)};k.HandlerComponent.prototype.executeHandler=function(s){if(s&&s.cb){throw new Error()}var r=this;return new n(function(v,u){var w=e.getErrorManager();if(!s){u(e.createReturnObject(w.MISSING_PARAMETERS,{description:"parameters has to be defined"}))}var t=s.id;if(!t||typeof t!=="string"){u(e.createReturnObject(w.MISSING_PARAMETERS,{description:"parameters.id has to be defined"}))}if(r._private._hdlrMap.hasOwnProperty(t)){r._private._hdlrMap[t].execute({cb:m.bind({resolve:v,reject:u}),args:s.args})}else{u(e.createReturnObject(w.FAILED,{description:"No Handler corresponding to the following id: "+t}))}})};k.HandlerComponent.prototype.toggleCheck=function(s){if(s&&s.cb){throw new Error()}var r=this;return new n(function(y,x){var z=e.getErrorManager();if(!s){x(e.createReturnObject(z.MISSING_PARAMETERS,{description:"parameters has to be defined"}))}var t=s.id;var v=s.args;if(!t||typeof t!=="string"){x(e.createReturnObject(z.MISSING_PARAMETERS,{description:"parameters.id has to be defined"}))}if(r._private._chkHdlrMap.hasOwnProperty(t)){var u=r._private._chkHdlrMap[t];var w=u.getState();u.setState({state:!w,cb:m.bind({resolve:y,reject:x}),args:v})}else{x(e.createReturnObject(z.FAILED,{description:"No CheckHandler corresponding to the following id: "+t}))}})};k.HandlerComponent.prototype.setCheckState=function(s){if(s&&s.cb){throw new Error()}var r=this;return new n(function(x,w){var y=e.getErrorManager();if(!s){w(e.createReturnObject(y.MISSING_PARAMETERS,{description:"parameters has to be defined"}))}var t=s.id;var v=s.state;var u=s.args;if(!t||typeof t!=="string"){w(e.createReturnObject(y.MISSING_PARAMETERS,{description:"parameters.id has to be defined"}))}if(v===undefined||typeof v!=="boolean"){w(new Error())}if(r._private._chkHdlrMap.hasOwnProperty(t)){r._private._chkHdlrMap[t].setState({state:v,cb:m.bind({resolve:x,reject:w}),args:u})}else{w(e.createReturnObject(y.FAILED,{description:"No CheckHandler corresponding to the following id: "+t}))}})};k.HandlerComponent.prototype.getCheckState=function(s){if(!s){throw new Error()}var r=s.id;if(!r||typeof r!=="string"){throw new Error()}if(!this._private._chkHdlrMap.hasOwnProperty(r)){throw new Error()}return this._private._chkHdlrMap[r].getState()};k.HandlerComponent.prototype.toggleRadioItemState=function(s){if(s&&s.cb){throw new Error()}var r=this;return new n(function(y,x){var z=e.getErrorManager();if(!s){x(e.createReturnObject(z.MISSING_PARAMETERS,{description:"parameters has to be defined"}))}var A=s.id;var w=s.radioId;var t=s.args;if(!A||typeof A!=="string"){x(e.createReturnObject(z.MISSING_PARAMETERS,{description:"parameters.id has to be defined"}))}if(!w||typeof w!=="string"){x(e.createReturnObject(z.MISSING_PARAMETERS,{description:"parameters.radioId has to be defined"}))}var u=r._private._radioHdlrMap;if(u.hasOwnProperty(w)){var v=!u[w].getRadioItemState(A);u[w].setRadioItemState({radioHdlrItemId:A,state:v,cb:m.bind({resolve:y,reject:x}),args:t})}else{x(e.createReturnObject(z.FAILED,{description:"No item corresponding to the following id: "+w}))}})};k.HandlerComponent.prototype.setRadioItemState=function(s){if(s&&s.cb){throw new Error()}var r=this;return new n(function(y,x){var z=e.getErrorManager();if(!s){x(e.createReturnObject(z.MISSING_PARAMETERS,{description:"parameters has to be defined"}))}var A=s.id;var w=s.radioId;var v=s.state;var t=s.args;if(!A||typeof A!=="string"){x(new Error())}if(!w||typeof w!=="string"){x(e.createReturnObject(z.MISSING_PARAMETERS,{description:"parameters.id has to be defined"}))}if(v===undefined||typeof v!=="boolean"){x(e.createReturnObject(z.MISSING_PARAMETERS,{description:"parameters.state has to be defined"}))}var u=r._private._radioHdlrMap;if(u.hasOwnProperty(w)){u[w].setRadioItemState({radioHdlrItemId:A,state:v,cb:m.bind({resolve:y,reject:x}),args:t})}else{x(e.createReturnObject(z.MISSING_PARAMETERS,{description:"No CheckHandler corresponding to the following id: "+A}))}})};k.HandlerComponent.prototype.getRadioItemState=function(s){if(!s){throw new Error()}var u=s.id;var t=s.radioId;if(!u||typeof u!=="string"){throw new Error()}if(!t||typeof t!=="string"){throw new Error()}var r=this._private._radioHdlrMap;if(!r.hasOwnProperty(t)){throw new Error()}return r[t].getRadioItemState(u)};function h(u,t){var w={};if(t!==undefined&&u&&u._private&&u._private._hdlrMap){var r=u._private._hdlrMap;for(var v in r){var s=r[v]._private._type;if(u._private._hdlrMap.hasOwnProperty(v)){if(s===t){w[v]=u._private._hdlrMap[v]}}}}return w}k.HandlerComponent.prototype.getActionHandlerMap=function(){return h(this,i.enums.HandlerType.ACTION_HANDLER)};k.HandlerComponent.prototype.getCommandHandlerMap=function(){return h(this,i.enums.HandlerType.COMMAND_HANDLER)};k.HandlerComponent.prototype.getLeafHandlerMaps=function(){var u=Object.create(null);u.actionHandlers={};u.commandHandlers={};if(this._private&&this._private._hdlrMap){var r=this._private._hdlrMap;for(var t in r){if(r.hasOwnProperty(t)){var s=r[t]._private._type;if(s===i.enums.HandlerType.ACTION_HANDLER){u.actionHandlers[t]=r[t]}else{if(s===i.enums.HandlerType.COMMAND_HANDLER){u.commandHandlers[t]=r[t]}else{console.warn("Unknown LeafHandler type",r[t]._private._type)}}}}}return u};return k});define("DS/WAfrHandlers/mod_LeafHandler",["DS/WAfrHandlers/private/private_Utilities","DS/WAfrHandlers/mod_Handler"],function(f,g){var d=g.Handler;function c(h){d.call(this,h);if(h){if(h.availabilityMode){this._private._availabilityMode=h.availabilityMode}this._private._currentAvailability=true;if(h.icon&&h.icon.uri){this._private._icon=h.icon}}else{throw new Error("Missing parameters. Please see the LeafHandler documentation to see the required parameters.")}}f.inherit(c,d);c.prototype.initAvailabilityModesSubscription=function(){var h=this.getHandlerComponent();if(!h){throw new Error("Impossible to retieve the HandlerComponent.")}var i=h.getAvailabilityModesComponent();if(!i){throw new Error("Impossible to retieve the AvailabilityModesComponent.")}this._private._availabilityModesSubscriptionToken=i.subscribe(this)};c.prototype.destroy=function(){var h=this.getHandlerComponent();if(!h){throw new Error("Impossible to retieve the HandlerComponent.")}var i=h.getAvailabilityModesComponent();if(i){i.unsubscribe(this._private._availabilityModesSubscriptionToken)}};c.prototype.getAvailabilityModesInfo=function(){return{modes:this._private._availabilityMode,currentAvailability:this._private._currentAvailability}};c.prototype.onAvailabilityChanged=function(i,h){this._private._currentAvailability=i;return this._private._handlerState.onAvailabilityChanged(i,h)};c.prototype.getIcon=function(){return this._private._icon};c.prototype.makeManaged=function(h){if(!(this._private._handlerState instanceof e)){this._private._handlerState=new e(this,h)}else{throw new Error("Call makeManaged method on an LeafHandler which is already managed")}};c.prototype.isExecutable=function(){return this._private._handlerState.isExecutable()};c.prototype.execute=function(h){if(h&&typeof h!=="object"){throw new Error("parameters has to be an object if defined")}if(!this.isExecutable()){if(h&&h.cb){setTimeout(function(){h.cb(new Error("This LeafHandler is not executable"))},0)}else{console.warn("This LeafHandler is not executable",this.getId())}}else{return this._private._handlerState.execute(h)}};c.prototype.setArgs=function(h){if(typeof h!=="object"){throw new Error("args has to be an object")}this._private._args=h};c.prototype.getArgs=function(){return this._private._args};function b(h){if(h){this._handler=h}else{throw new Error("handler has to be defined")}}b.prototype.execute=function(){throw new Error("execute has to be implemented on subclasses")};b.prototype.setHandlerComponent=function(h){if(h===undefined){throw new Error("component has to be defined")}this._handler._private._handlerComponent=h;return true};b.prototype.getHandlerComponent=function(){return this._handler._private._handlerComponent};b.prototype.onAvailabilityChanged=function(l){var j=this._handler;j._private._currentAvailability=l;var i=j.getHandlerComponent();if(!i){throw new Error("There is no HandlerComponent related to this LeafHandler",j)}var h=i.getEventChannel();if(!h){throw new Error("Retrieved eventChannel is undefined")}var k=j.getId();if(!k){throw new Error("handlerIdentfier has to be a non empty string.")}h.publish({event:k+"/AVAILABILITY",data:{newValue:l}})};b.prototype.isExecutable=function(){return this._handler._private._currentAvailability};function e(i,h){if(i&&h){this._handler=i;this._manager=h}else{throw new Error("handler and manager have to be defined")}}e.prototype.execute=function(h){return this._manager.handleExecute({cb:h.cb,manageable:this._handler,args:h.args})};e.prototype.setHandlerComponent=function(){console.warn("Impossible to set a HandlerComponent to a LeafHandler which is managed.");return false};e.prototype.getHandlerComponent=function(){return this._manager.getHandlerComponent()};e.prototype.onAvailabilityChanged=function(k,j){var i=this._handler;var h=this._manager;return h.handleOnAvailabilityChanged({manageable:i,args:{newValue:k,info:j}})};e.prototype.isExecutable=function(){return this._manager.handleIsExecutable({manageable:this._handler})};var a=Object.create(null);a.LeafHandler=c;a.StandaloneLeafHandlerState=b;a.ManagedLeafHandlerState=e;return a});define("DS/WAfrHandlers/private/private_RadioHandlerUtilities",["DS/CoreUtilities/ErrorManagement","DS/WAfrHandlers/private/private_CheckHandlerUtilities"],function(c,b){var a=Object.create(null);a.fireEvent=function(g,e,j){if(!g||!e||j===undefined){throw new Error("radioHandler, itemIdentifier and state has to be defined")}var i=g.getHandlerComponent();if(!i){throw new Error("There is no HandlerComponent related to this RadioHandler",g)}var h=i.getEventChannel();if(!h){throw new Error("Retrieved eventChannel is undefined")}var f=g.getId();if(!f){throw new Error("radioHandlerIdentifier has to be a non empty string.")}var d="/"+e;var k=j?"/SELECT":"/UNSELECT";h.publish({event:f+d+k})};a.checkOnUncheck=function(d){if(this&&this.manager&&this.manageable&&d){if(c.hasSucceeded(d)){a.fireEvent(this.manager,this.manageable.getId(),true);b.executeCheckHandler(this.manageable,{cb:this.cb,action:true,args:this.args})}else{if(this.cb){this.cb(d)}else{throw d.getError()}}}else{throw new Error("Internal error. Manageable has to be defined")}};a.isManagedByRadioHandler=function(e,g){var h=false;var d=0;var f=g._private._elements.length;while(!h&&d<f){if(g._private._elements[d]===e){h=true}++d}return h};return a});define("DS/WAfrHandlers/private/private_CommandHandlerUtilities",["DS/CoreUtilities/ErrorManagement","DS/WAfrHandlers/private/private_Utilities"],function(d,c){var a=Object.create(null);a.CmdMode={EXCLUSIVE:0,NESTED:1};a.RepeatMode={NEVER:0,STANDARD:1,ALWAYS:2};a.LifeCycleEvents={BEGIN:"BEGIN",PAUSE:"PAUSE",RESUME:"RESUME",CANCEL:"CANCEL",END:"END"};a.HandlerState={EXECUTING:"EXECUTING",PAUSED:"PAUSED",CANCELED:"CANCELED",ENDING:"ENDING",ENDED:"ENDED"};a.isValidHandlerState=function(e){return Boolean(e)&&this.HandlerState.hasOwnProperty(e)};function b(e){if(!this){throw new Error("this (commandHandler) is undefined.")}if(this.getState()!==a.HandlerState.ENDED){throw new Error("The command ended with the status Stated")}if(!e||!e.notStarted){for(var f=0;f<this._private._appCB.length;f++){if(this._private._appCB[f]&&typeof this._private._appCB[f]==="function"){if(!e){var g=d.getErrorManager();e=d.createReturnObject(g.SUCCEEDED)}this._private._appCB[f](e)}}}}a.executeCommandHandler=function(e){if(!e||!e.handler){throw new Error("parameters.handler has to be defined")}e.args=c.computeArgs(e.handler,e.args);e.handler._private._cmdsManager.stackCommandExecutionRequest(b.bind(e.handler),e)};return a});define("DS/WAfrHandlers/mod_CommandHandler",["DS/WAfrHandlers/private/private_Utilities","DS/WAfrHandlers/private/private_CommandHandlerUtilities","DS/WAfrHandlers/mod_LeafHandler"],function(c,b,a){var i=a.LeafHandler;var d=a.StandaloneLeafHandlerState;var g="COMMAND_HANDLER";c.registerLeafHandler(g,{executeFunc:b.executeCommandHandler});var e=Object.create(null);e.CmdMode={EXCLUSIVE:b.CmdMode.EXCLUSIVE,NESTED:b.CmdMode.NESTED};e.RepeatMode={NEVER:b.RepeatMode.NEVER,STANDARD:b.RepeatMode.STANDARD,ALWAYS:b.RepeatMode.ALWAYS};e.LifeCycleEvents={BEGIN:b.LifeCycleEvents.BEGIN,PAUSE:b.LifeCycleEvents.PAUSE,RESUME:b.LifeCycleEvents.RESUME,CANCEL:b.LifeCycleEvents.CANCEL,END:b.LifeCycleEvents.END};function j(k){return Boolean(k)&&e.LifeCycleEvents.hasOwnProperty(k)}function h(k){d.call(this,k)}c.inherit(h,d);h.prototype.execute=function(m){var k=m?m.cb:undefined;var l=m?m.args:undefined;return b.executeCommandHandler({handler:this._handler,cb:k,args:l})};function f(k){i.call(this,k);if(!k){throw new Error("DS/WAfrHandlers/mod_CommandHandler.CommandHandler: parameters has to be defined")}if(!k.module||typeof k.module!=="string"){throw new Error("DS/WAfrHandlers/mod_CommandHandler.CommandHandler: parameters.module has to be defined and to be a non empty string")}if(!k.cmdsManager||typeof k.cmdsManager!=="object"){throw new Error("DS/WAfrHandlers/mod_CommandHandler.CommandHandler: parameters.cmdsManager has to be defined and to be Object of type DS/WAfrCommandsArchitecture/mod_CommandsManagerComponent")}if(!this._private){this._private=Object.create(null)}this._private._type=c.enums.HandlerType[g];this._private._command=Object.create(null);this._private._command._module=k.module;this._private._command._instance=null;this._private._command._mode=k.cmdMode?k.cmdMode:e.CmdMode.EXCLUSIVE;this._private._repeatMode=k.repeatMode?k.repeatMode:e.RepeatMode.NEVER;this._private._cmdsManager=k.cmdsManager;this._private._useComputeServer=k.computeServer?k.computeServer:false;this._private._cb=null;this._private._handlerState=new h(this)}c.inherit(f,i);f.prototype.makeStandalone=function(){if(!(this._private._handlerState instanceof h)){this._private._handlerState=new h(this)}else{throw new Error("Call makeStandalone method on an CommandHandler which is already a standalone item")}};f.prototype.execute=function(k){i.prototype.execute.call(this,k)};f.prototype.getMode=function(){return this._private._command._mode};f.prototype.setMode=function(k){if((typeof k!=="string"&&typeof k!=="number")||(!b.CmdMode.hasOwnProperty(k)&&(k<0||k>b.CmdMode.NESTED))){throw new Error("CommandHandler.setMode : command mode value illegal. The command mode must be defined on mod_CommandHandler.CmdMode")}if(!this._private._command._instance){this._private._command._mode=k}else{throw new Error("CommandHandler.setMode : command mode cannot be changed durring command execution")}};f.prototype.getRepeatMode=function(){return this._private._repeatMode};f.prototype.setRepeatMode=function(k){if(typeof k!=="number"||k<0||k>b.RepeatMode.ALWAYS){throw new Error("CommandHandler.setRepeatMode : command repeat mode value illegal. The command repeat mode must be defined on mod_CommandHandler.RepeatMode")}this._private._repeatMode=k};f.prototype.getCSIdentifier=function(){return this._private._command._instance};f.prototype.isUsingComputeServer=function(){return this._private._useComputeServer};f.prototype.setHandlerComponent=function(k){return this._private._handlerState.setHandlerComponent(k)};f.prototype.getHandlerComponent=function(){return this._private._handlerState.getHandlerComponent()};f.prototype.setStateAndSendEvent=function(n){if(!n||!n.state){throw new Error("parameters has to be defined with a non empty and valid state property (mod_CommandHandler.HandlerState) ")}var p=n.state.toUpperCase();if(!b.isValidHandlerState(n.state)){throw new Error("There is no state corresponding to the event "+n.state+" for a CommandHandler")}this._private._command._state=b.HandlerState[p];if(n.event){var o=n.event.toUpperCase();if(j(o)){var l=this.getHandlerComponent();if(!l){throw new Error("There is no HandlerComponent related to this CommandHandler",this)}var k=l.getEventChannel();if(!k){throw new Error("Retrieved eventChannel is undefined")}var m=this.getId();if(!m){throw new Error("handlerIdentfier has to be a non empty string.")}k.publish({event:m+"/"+b.LifeCycleEvents[o],data:{repeated:n.repeated,canceled:n.canceled,notStarted:n.notStarted}})}}};f.prototype.getState=function(){return this._private._command._state};f.prototype.onLifeCycleEvent=function(l,k){if(!l||typeof l!=="string"){throw new Error("identifier has to be a non empty string")}var o=l.toUpperCase();if(!j(o)){throw new Error("The given identifier is not supported by an CommandHandler",l)}if(!k||typeof k!=="function"){throw new Error("cb has to be a function",k)}var n=this.getHandlerComponent();if(!n){throw new Error("There is no HandlerComponent related to this CommandHandler",this)}var m=n.getEventChannel();if(!m){throw new Error("Retrieved eventChannel is undefined")}var p=this.getId();if(!p){throw new Error("handlerIdentfier has to be a non empty string.")}return m.subscribe({event:p+"/"+o},k)};f.prototype.removeLifeCycleEventSubscription=function(k){if(undefined===k){throw new Error("token has to be defined")}var m=this.getHandlerComponent();if(!m){throw new Error("There is no HandlerComponent related to this CommandHandler",this)}var l=m.getEventChannel();if(!l){throw new Error("Retrieved eventChannel is undefined")}var n=this.getId();if(!n){throw new Error("handlerIdentfier has to be a non empty string.")}return l.unsubscribe(k)};e.CommandHandler=f;return e});define("DS/WAfrHandlers/private/private_ActionHandlerUtilities",["DS/CoreUtilities/ErrorManagement","DS/WAfrHandlers/private/private_Utilities"],function(d,b){var a=Object.create(null);function c(e){if(!this.actionHandler){throw new Error("this.action is undefined. A problem occurred when calling this function.")}var i=this.actionHandler;var g=i.getHandlerComponent();if(!g){throw new Error("There is no HandlerComponent related to this ActionHandler",i)}var f=g.getEventChannel();if(!f){throw new Error("Retrieved eventChannel is undefined")}var h=i.getId();if(!h){throw new Error("handlerIdentfier has to be a non empty string.")}f.publish({event:h+"/END"});console.log("Action "+i.getId()+" view updated: action Ended");if(!e){var j=d.getErrorManager();e=d.createReturnObject(j.SUCCEEDED)}if(this.cb&&typeof this.cb==="function"){this.cb(e)}else{if(e&&!d.hasSucceeded(e)){throw e.getError()}}}a.executeActionHandler=function(g){var h=g.handler;var e=g.cb;if(!h){throw new Error("actionHandler has to be defined and cannot be null")}var f=h.getHandlerComponent();if(!f){console.warn("NO HANDLER COMPONENT SET");throw new Error()}else{if(!f.getExecutionContext()){console.warn("NO EXECUTION CONTEXT SET");throw new Error()}}if(e===null||typeof e!=="function"){e=undefined}require([h._private._action._module],function(p){var m=d.getErrorManager();var o;if(p){var j=p[h._private._action._func];if(j&&typeof j==="function"){var k=Object.create(null);k.cb=e;k.actionHandler=h;var i=h.getHandlerComponent();var n=Object.create(null);n.executionContext=i.getExecutionContext().applicationContext;n.args=b.computeArgs(h,g.args);var i=h.getHandlerComponent();if(!i){throw new Error("There is no HandlerComponent related to this ActionHandler",h)}var q=i.getEventChannel();if(!q){throw new Error("Retrieved eventChannel is undefined")}var l=h.getId();if(!l){throw new Error("handlerIdentfier has to be a non empty string.")}q.publish({event:l+"/BEGIN"});j(c.bind(k),n)}else{o=d.createReturnObject(m.FAILED,{description:"Unknown function "+h._private._action._func+" in "+h._private._action._module})}}else{o=d.createReturnObject(m.WRONG_VALUE,{description:"Module require return undefined"})}if(o){if(e){e(o)}else{if(!d.hasSucceeded(o)){throw o.getError()}}}},function(){if(e&&typeof e==="function"){var j=d.getErrorManager();var i=d.createReturnObject(j.FAILED,{description:"Require failed ("+h._private._action._module+")"});e(i)}else{throw i.getError()}})};return a});define("DS/WAfrHandlers/mod_ActionHandler",["DS/WAfrHandlers/private/private_Utilities","DS/WAfrHandlers/private/private_ActionHandlerUtilities","DS/WAfrHandlers/mod_LeafHandler","DS/WAfrHandlers/mod_HandlerComponent"],function(d,j,c){var e=Object.create(null);var i=c.LeafHandler;var f=c.StandaloneLeafHandlerState;var g="ACTION_HANDLER";d.registerLeafHandler(g,{executeFunc:j.executeActionHandler});e.LifeCycleEvents={BEGIN:"BEGIN",END:"END"};function h(k){return Boolean(k)&&e.LifeCycleEvents.hasOwnProperty(k)}function b(k){f.call(this,k)}d.inherit(b,f);b.prototype.execute=function(m){var k=m?m.cb:undefined;var l=m?m.args:undefined;return j.executeActionHandler({handler:this._handler,cb:k,args:l})};function a(k){i.call(this,k);if(!k){throw new Error("parameters has to be defined")}if(!k.module||typeof k.module!=="string"){throw new Error("parameters.module has to be defined and to be a non empty string")}if(!k.func||typeof k.func!=="string"){throw new Error("parameters.func has to be defined and to be a non empty string")}if(!this._private){this._private=Object.create(null)}this._private._type=d.enums.HandlerType[g];this._private._action=Object.create(null);this._private._action._module=k.module;this._private._action._func=k.func;this._private._handlerState=new b(this)}d.inherit(a,i);a.prototype.makeStandalone=function(){if(!(this._private._handlerState instanceof b)){this._private._handlerState=new b(this)}else{throw new Error("Call makeStandalone method on an ActionHandler which is already a standalone item")}};a.prototype.execute=function(k){i.prototype.execute.call(this,k)};a.prototype.setHandlerComponent=function(k){return this._private._handlerState.setHandlerComponent(k)};a.prototype.getHandlerComponent=function(){return this._private._handlerState.getHandlerComponent()};a.prototype.onLifeCycleEvent=function(l,k){if(!l){throw new Error("identifier has to be a non empty string")}var o=l.toUpperCase();if(!h(o)){throw new Error("The given identifier is not supported by an ActionHandler",l)}if(!k||typeof k!=="function"){throw new Error("cb has to be a function",k)}var n=this.getHandlerComponent();if(!n){throw new Error("There is no HandlerComponent related to this ActionHandler",this)}var m=n.getEventChannel();if(!m){throw new Error("Retrieved eventChannel is undefined")}var p=this.getId();if(!p){throw new Error("handlerIdentfier has to be a non empty string.")}return m.subscribe({event:p+"/"+o},k)};a.prototype.removeLifeCycleEventSubscription=function(k){if(undefined===k){throw new Error("token has to be defined")}var m=this.getHandlerComponent();if(!m){throw new Error("There is no HandlerComponent related to this ActionHandler",this)}var l=m.getEventChannel();if(!l){throw new Error("Retrieved eventChannel is undefined")}var n=this.getId();if(!n){throw new Error("handlerIdentfier has to be a non empty string.")}return l.unsubscribe(k)};e.ActionHandler=a;return e});define("DS/WAfrHandlers/mod_CheckHandler",["DS/CoreUtilities/ErrorManagement","DS/WAfrHandlers/private/private_Utilities","DS/WAfrHandlers/private/private_CheckHandlerUtilities","DS/WAfrHandlers/mod_Handler","DS/WAfrHandlers/mod_ActionHandler","DS/WAfrHandlers/mod_CommandHandler"],function(d,g,f,n,p,e){var k=n.Handler;var a=p.ActionHandler;var i=e.CommandHandler;var h=Object.create(null);h.StateEvents={CHECK:"CHECK",UNCHECK:"UNCHECK"};function j(q){return Boolean(q)&&h.StateEvents.hasOwnProperty(q)}function c(s,r){var q=false;if(s.beingInitialized()){q=true}else{if((r===s._private._check&&!s._private._isChecked)||(r===s._private._uncheck&&s._private._isChecked)){q=true}}return q}function b(s){var r=false;var q=true;if((s._private._check&&!s._private._check.isAvailable())||(s._private._uncheck&&!s._private._uncheck.isAvailable())){q=false}if(s.isAvailable()!==q){s._private._currentAvailability=q;r=true}return r}function l(r,q){if(r&&q){this._checkHandler=r;this._manager=q}else{throw new Error("manageable and handlerManager have to be define")}}l.prototype.handleExecute=function(t){if(t){var q=t.cb;var s=t.manageable;var r=t.args;if(s!==this._checkHandler._private._check&&s!==this._checkHandler._private._uncheck){throw new Error("Internal error. The manageable calling handle is not managed by this manager.")}if(c(this._checkHandler,s)){this._manager.handleExecute({cb:t.cb,manageable:this._checkHandler,action:!this._checkHandler._private._isChecked,args:r})}else{if(q&&typeof q==="function"){setTimeout(function(){var u=d.getErrorManager();q(d.createReturnObject(u.SUCCEEDED))},0)}}}else{throw new Error("Wrong parameters")}};l.prototype.handleOnAvailabilityChanged=function(s){var r=this._checkHandler;var q=this._manager;var t=b(r);if(t){s.args.newValue=r.isAvailable();s.manageable=r;q.handleOnAvailabilityChanged(s)}};l.prototype.handleIsExecutable=function(){return this._manager.handleIsExecutable({manageable:this._checkHandler})};l.prototype.setState=function(){throw new Error("You can not directly change the state of a CheckHandler which is managed")};l.prototype.setHandlerComponent=function(){console.warn("Impossible to set a HandlerComponent to a CheckHandler which is managed.");return false};l.prototype.getHandlerComponent=function(){return this._manager.getHandlerComponent()};function o(q){if(!q){throw new Error("checkHandler has to be defined")}this._checkHandler=q}o.prototype.handleExecute=function(t){if(t){var q=t.cb;var s=t.manageable;var r=t.args;if(s!==this._checkHandler._private._check&&s!==this._checkHandler._private._uncheck){throw new Error("Internal error. The manageable calling handleExecute is not managed by this manager.")}if(c(this._checkHandler,s)){f.executeCheckHandler(this._checkHandler,{cb:q,action:!this._checkHandler._private._isChecked,args:r})}else{if(q&&typeof q==="function"){setTimeout(function(){var u=d.getErrorManager();q(d.createReturnObject(u.SUCCEEDED))},0)}}}else{throw new Error("Wrong parameters")}};o.prototype.setState=function(t){var u=t.state;var q=t.cb;var r=t.args;if(u!==this._checkHandler._private._isChecked){var s;if(this._checkHandler._private._isChecked){s=this._checkHandler._private._uncheck}else{s=this._checkHandler._private._check}this.handleExecute({cb:q,manageable:s,args:r})}else{setTimeout(function(){var v=d.getErrorManager();q(d.createReturnObject(v.SUCCEEDED))},0)}};o.prototype.setHandlerComponent=function(q){if(q===undefined){throw new Error("component has to be defined")}this._checkHandler._private._handlerComponent=q;return true};o.prototype.getHandlerComponent=function(){return this._checkHandler._private._handlerComponent};o.prototype.handleOnAvailabilityChanged=function(){var q=this._checkHandler;var r=b(q);if(r){g.publishHandlerAvailability(q)}};o.prototype.handleIsExecutable=function(){return this.isAvailable()};function m(q){k.call(this,q);this._private._check=null;this._private._uncheck=null;if(!q||!q.id){throw new Error("Wrong parameters")}this._private._id=q.id;this._private._isChecked=false;this._private._handlerState=new o(this)}g.inherit(m,k);m.prototype.makeStandalone=function(){if(!(this._private._handlerState instanceof o)){this._private._handlerState=new o(this)}else{throw new Error("Call makeStandalone method on an CheckHandler which is already a standalone item")}};m.prototype.makeManaged=function(q){if(!(this._private._handlerState instanceof l)){this._private._handlerState=new l(this,q);delete this._private._handlerComponent}else{throw new Error("Call makeManaged method on an CheckHandler which is already managed")}};m.prototype.validateElement=function(q){return(q instanceof a||q instanceof i)};m.prototype.addElement=function(t,s){var q=false;if(!t||!s||!s.state||(s.state!=="check"&&s.state!=="uncheck")){throw new Error("Imcompatible parameters")}var r="_"+s.state;if(this.validateElement(t)&&!this._private[r]){this._private[r]=t;t.makeManaged(this);this._private._handlerState.handleOnAvailabilityChanged({manageable:this,args:{newValue:t.isAvailable()}});q=true}return q};m.prototype.handleExecute=function(q){return this._private._handlerState.handleExecute(q)};m.prototype.handleIsExecutable=function(q){if(!q||!q.manageable){throw new Error("Wrong parameters")}if(q.manageable!==this._private._check&&q.manageable!==this._private._uncheck){throw new Error("The given manageable is not managed by this CheckHandler")}return this._private._handlerState.handleIsExecutable(q)};m.prototype.getCheckHandler=function(){return this._private._check};m.prototype.getUncheckHandler=function(){return this._private._uncheck};m.prototype.setState=function(r){if(!this.isExecutable()){var s=d.getErrorManager();var q=d.createReturnObject(s.FAILED,{description:"This CheckHandler is not executable"});if(r&&r.cb){setTimeout(function(){r.cb(q)},0)}else{throw q.getError()}}else{this._private._handlerState.setState(r)}};m.prototype.getState=function(){return this._private._isChecked};m.prototype.setHandlerComponent=function(q){return this._private._handlerState.setHandlerComponent(q)};m.prototype.getHandlerComponent=function(){return this._private._handlerState.getHandlerComponent()};m.prototype.handleOnAvailabilityChanged=function(q){if(!q||!q.manageable||!q.args||q.args.newValue===undefined){throw new Error("handleExecute was called using wrong parameters",q)}return this._private._handlerState.handleOnAvailabilityChanged(q)};m.prototype.onStateEvent=function(r,q){if(!r){throw new Error("identifier has to be a non empty string")}var u=r.toUpperCase();if(!j(u)){throw new Error("The given identifier is not supported by a CheckHandler",r)}if(!q||typeof q!=="function"){throw new Error("cb has to be a function",q)}var t=this.getHandlerComponent();if(!t){throw new Error("There is no HandlerComponent related to this CheckHandler",this)}var s=t.getEventChannel();if(!s){throw new Error("Retrieved eventChannel is undefined")}var v=this.getId();if(!v){throw new Error("handlerIdentfier has to be a non empty string.")}return s.subscribe({event:v+"/"+u},q)};m.prototype.removeStateEventSubscription=function(q){if(undefined===q){throw new Error("token has to be defined")}var s=this.getHandlerComponent();if(!s){throw new Error("There is no HandlerComponent related to this CheckHandler",this)}var r=s.getEventChannel();if(!r){throw new Error("Retrieved eventChannel is undefined")}var t=this.getId();if(!t){throw new Error("handlerIdentifier has to be a non empty string.")}return r.unsubscribe(q)};m.prototype.destroy=function(){if(this._private._check){this._private._check.destroy()}if(this._private._uncheck){this._private._uncheck.destroy()}};h.CheckHandler=m;return h});define("DS/WAfrHandlers/mod_RadioHandler",["DS/CoreUtilities/ErrorManagement","DS/WAfrHandlers/private/private_Utilities","DS/WAfrHandlers/mod_Handler","DS/WAfrHandlers/mod_CheckHandler"],function(b,d,h,j){var f=h.Handler;var i=j.CheckHandler;var e=Object.create(null);e.ItemStateEvents={SELECT:"SELECT",UNSELECT:"UNSELECT"};function g(k){return Boolean(k)&&e.ItemStateEvents.hasOwnProperty(k)}function a(n){var m=false;var l=true;var p=n._private._elements;var o=p.length;var k=0;while(k<o&&l){l=p[k].isAvailable();++k}if(l!==n.isAvailable()){n._private._currentAvailability=l;m=true}return m}function c(k){f.call(this,k);this._private._checkedElement=null;this._private._elements=[]}d.inherit(c,f);c.prototype.validateElement=function(k){return k instanceof i};c.prototype.addElement=function(l){var k=false;if(!l||l===this||!l.makeManaged||typeof l.makeManaged!=="function"){throw new Error()}if(this.validateElement(l)){this._private._elements.push(l);l.makeManaged(this);this.handleOnAvailabilityChanged({manageable:this,args:{newValue:l.isAvailable()}});k=true}else{throw new Error("elt is not a valide element to add to a RadioHandler")}return k};c.prototype.getElements=function(){if(!this._private||!this._private._elements||!Array.isArray(this._private._elements)){throw new Error("Internal error")}return this._private._elements};c.prototype.getElementById=function(n){var p=this._private._elements.length;var l=0;var o=false;var k=null;while(!o&&l<p){var m=this._private._elements[l];if(m.getId()===n){o=true;k=m}++l}return k};c.prototype.getSelectedItem=function(){var k=null;var l=this.getSelectedItemId();if(l){k=this.getElementById(l)}return k};c.prototype.setRadioItemState=function(t){var r=t.radioHdlrItemId;var k=t.state;var l=t.cb;var q=t.args;var o=b.getErrorManager();var p;var n;var s=0;var u=this._private._elements.length;for(s=0;s<u;++s){if(this._private._elements[s].getId()===r){n=this._private._elements[s]}}if(!n){p=b.createReturnObject(o.FAILED,{description:"Unknown item: "+r});if(l){setTimeout(function(){l(p)},0)}else{throw p.getError()}}else{if(!this.isExecutable()){p=b.createReturnObject(o.FAILED,{description:"This RadioHandler is not executable"});if(t&&t.cb){setTimeout(function(){l(p)},0)}else{throw p}}else{var m=Object.create(null);m.cb=l;m.manageable=n;m.action=k;m.args=q;this.handleExecute(m)}}};c.prototype.getRadioItemState=function(n){if(!n||typeof n!=="string"){throw new Error("itemId has to be a non empty string")}var l;var m=this._private._elements.length;for(var k=0;k<m;++k){if(this._private._elements[k].getId()===n){l=this._private._elements[k].getState()}}if(l===undefined){throw new Error("This item does not belong to this RadioHandler")}return l};c.prototype.getSelectedItemId=function(){var k;if(this._private._checkedElement){k=this._private._checkedElement.getId()}return k};c.prototype.setHandlerComponent=function(k){if(k===undefined){throw new Error("component has to be define")}this._private._handlerComponent=k;return true};c.prototype.getHandlerComponent=function(){return this._private._handlerComponent};c.prototype.handleOnAvailabilityChanged=function(k){if(!k||!k.manageable||!k.args||k.args.newValue===undefined){throw new Error("handleExecute was called using wrong parameters",k)}var l=a(this);if(l){d.publishHandlerAvailability(this)}};c.prototype.handleIsExecutable=function(k){if(!k||!k.manageable){throw new Error("Wrong parameters")}return this.isAvailable()};c.prototype.onItemStateEvent=function(m,l,k){if(!m){throw new Error("identifier has to be a non empty string")}if(!l){throw new Error("itemIdentifier has to be a non empty string")}var p=m.toUpperCase();if(!g(p)){throw new Error("The given identifier is not supported by an RadioHandler",m)}if(!k||typeof k!=="function"){throw new Error("cb has to be a function",k)}var o=this.getHandlerComponent();if(!o){throw new Error("There is no HandlerComponent related to this RadioHandler",this)}var n=o.getEventChannel();if(!n){throw new Error("Retrieved eventChannel is undefined")}var q=this.getId();if(!q){throw new Error("handlerIdentfier has to be a non empty string.")}return n.subscribe({event:q+"/"+l+"/"+p},k)};c.prototype.removeItemStateEventSubscription=function(k){if(undefined===k){throw new Error("token has to be defined")}var m=this.getHandlerComponent();if(!m){throw new Error("There is no HandlerComponent related to this RadioHandler",this)}var l=m.getEventChannel();if(!l){throw new Error("Retrieved eventChannel is undefined")}var n=this.getId();if(!n){throw new Error("handlerIdentifier has to be a non empty string.")}return l.unsubscribe(k)};c.prototype.destroy=function(){var m=this._private._elements;var l=this._private._elements.length;for(var k=0;k<l;++k){m[k].destroy()}};e.RadioHandler=c;return e});define("DS/WAfrHandlers/mod_RadioHandlerZERO",["DS/WAfrHandlers/private/private_Utilities","DS/WAfrHandlers/private/private_CheckHandlerUtilities","DS/WAfrHandlers/private/private_RadioHandlerUtilities","DS/WAfrHandlers/mod_RadioHandler"],function(e,g,f,b){var d=b.RadioHandler;function c(h){d.call(this,h)}e.inherit(c,d);c.prototype.isUnselectAuthorized=function(){return true};c.prototype.handleExecute=function(j){if(j&&j.manageable){var i=j.manageable;if(!f.isManagedByRadioHandler(i,this)){throw new Error("Internal error. The manageable calling handleExecute is not managed by this RadioHandler.")}if(!j.action){if(j.manageable.getState()!==j.action){f.fireEvent(this,j.manageable.getId(),j.action);g.executeCheckHandler(j.manageable,{cb:j.cb,action:j.action,args:j.args});this._private._checkedElement=null}}else{if(this._private._checkedElement){if(this._private._checkedElement!==j.manageable){var h=Object.create(null);h.cb=j.cb;h.manager=this;h.manageable=j.manageable;h.args=j.args;f.fireEvent(this,this._private._checkedElement.getId(),false);g.executeCheckHandler(this._private._checkedElement,{cb:f.checkOnUncheck.bind(h),action:false});this._private._checkedElement=j.manageable}}else{f.fireEvent(this,j.manageable.getId(),j.action);g.executeCheckHandler(j.manageable,{cb:j.cb,action:j.action,args:j.args});this._private._checkedElement=j.manageable}}}else{throw new Error("Wrong parameters")}};var a=Object.create(null);a.RadioHandlerZERO=c;return a});define("DS/WAfrHandlers/mod_RadioHandlerONE",["DS/CoreUtilities/ErrorManagement","DS/WAfrHandlers/private/private_Utilities","DS/WAfrHandlers/private/private_CheckHandlerUtilities","DS/WAfrHandlers/private/private_RadioHandlerUtilities","DS/WAfrHandlers/mod_RadioHandler"],function(h,d,g,e,b){var c=b.RadioHandler;function f(i){c.call(this,i)}d.inherit(f,c);f.prototype.isUnselectAuthorized=function(){return false};f.prototype.handleExecute=function(l){if(l&&l.manageable){var k=l.manageable;if(!e.isManagedByRadioHandler(k,this)){throw new Error("Internal error. The manageable calling handleExecute is not managed by this RadioHandler.")}if(!l.action){var m=h.getErrorManager();var i=h.createReturnObject(m.FAILED,{description:"It is impossible to uncheck the checked element for RadioHandler of type ONE"});if(l.cb&&typeof l.cb==="function"){setTimeout(function(){l.cb(i)},0)}else{throw i.getError()}}if(!this._private._checkedElement){e.fireEvent(this,l.manageable.getId(),true);g.executeCheckHandler(l.manageable,{cb:l.cb,action:true,args:l.args});this._private._checkedElement=l.manageable}else{if(l.manageable!==this._private._checkedElement){var j=Object.create(null);j.cb=l.cb;j.manageable=l.manageable;j.manager=this;j.args=l.args;e.fireEvent(this,this._private._checkedElement.getId(),false);g.executeCheckHandler(this._private._checkedElement,{cb:e.checkOnUncheck.bind(j),action:false});this._private._checkedElement=l.manageable}else{if(this.beingInitialized()){e.fireEvent(this,l.manageable.getId(),true);g.executeCheckHandler(l.manageable,{cb:l.cb,action:true,args:l.args});this._private._checkedElement=l.manageable}}}}else{throw new Error("Wrong parameters")}};var a=Object.create(null);a.RadioHandlerONE=f;return a});define("DS/WAfrHandlers/mod_HandlerInterpreter",["UWA/Class/Promise","DS/WAfrHandlers/mod_ActionHandler","DS/WAfrHandlers/mod_CommandHandler","DS/WAfrHandlers/mod_CheckHandler","DS/WAfrHandlers/mod_RadioHandlerZERO","DS/WAfrHandlers/mod_RadioHandlerONE","DS/WAfrHandlers/mod_HandlerComponent","DS/WAfrHandlers/private/private_Utilities","DS/WAfrAvailabilityModes/mod_AvailabilityModesComponent"],function(e,v,c,a,u,h,i,t,r){var o=v.ActionHandler;var b=c.CommandHandler;var q=a.CheckHandler;var p=u.RadioHandlerZERO;var k=h.RadioHandlerONE;var d={};function g(y){var x={id:y.identifier,i18n:y.internationalization,icon:y.icon,availabilityMode:y.availability,accelerator:y.accelerator};return x}function l(y){var x={id:y.identifier,i18n:y.internationalization,icon:y.icon,availabilityMode:y.availability};return x}function m(z,y){var x=y(z);x.module=z.code.module;x.func=z.code.func;x.args=z.argument;return x}function s(A,z,y){var x=y(z);x.module=z.code.module;var B=A.getComponent("AFR_CommandsManager");x.cmdsManager=B;x.cmdMode=c.CmdMode[z.mode];x.repeatMode=c.RepeatMode[z.repeatability];x.args=z.argument;x.computeServer=z.computeServer;return x}function j(B,z,A){var x=null;var y;if(z.type==="Action"){y=m(z,A);x=new o(y)}else{if(z.type==="Command"){y=s(B,z,A);x=new b(y)}else{throw new Error("Unknown handler type",z.type)}}if(y&&y.args){x.setArgs(y.args)}return x}function n(){this._initializationValues=[];this._handler=[];this._chkHandler=[];this._radioHandler=[]}n.prototype.interpretLeafHandler=function(B,y){if(!y){return}var C=y.length;var A;var z;for(var x=0;x<C;++x){A=y[x];z=j(B,A,g);this._handler.push(z);this.addToAvailabilityModesSubscribers(z)}};n.prototype.interpretCheckHandler=function(D,A){if(!A){return}var x=A.length;var E;var F;var y;var z;var B;for(var C=0;C<x;++C){E=A[C];F=new q({id:E.identifier});y=j(D,E.check,l);F.addElement(y,{state:"check"});this.addToAvailabilityModesSubscribers(y);z=j(D,E.uncheck,l);F.addElement(z,{state:"uncheck"});this.addToAvailabilityModesSubscribers(z);this._chkHandler.push(F);if(E.defaultState!==undefined&&typeof E.defaultState==="string"){E.defaultState=E.defaultState==="true"}if(E.defaultState!==undefined&&E.defaultState){B={type:"CheckHandler",id:E.identifier,state:true};this._initializationValues.push(B)}}};n.prototype.interpretRadioHandler=function(I,M){if(!M){return}var E=M.items;if(!Array.isArray(E)){return}if(E.length===0){return}var K=0;var A=E.length;var L;var G;var J;var F;for(K=0;K<A;++K){J=E[K];L={id:J.identifier};if(J.radioType==="ONE"){G=new k(L)}else{if(J.radioType==="ZERO"){G=new p(L)}else{throw new Error()}}var x=0;var C=J.items;var D=C.length;var z;var H;var y;var B;for(x=0;x<D;++x){H=C[x];z=new q({id:H.identifier});if(H.check){y=j(I,H.check,l);z.addElement(y,{state:"check"});this.addToAvailabilityModesSubscribers(y)}if(H.uncheck){B=j(I,H.uncheck,l);z.addElement(B,{state:"uncheck"});this.addToAvailabilityModesSubscribers(B)}G.addElement(z)}this._radioHandler.push(G);if(J["default"]){F={type:"RadioHandler",id:J["default"],radioId:J.identifier,state:true};this._initializationValues.push(F)}}};n.prototype.interpret=function(D,C,z){if(!D||!C){throw new Error("Missing parameters")}var y=i.DEFAULT_COMPONENT_NAME;if(z&&z.componentId){y=z.componentId}else{console.warn("Caution! You are using the default component name. This is not recommended")}this._executionContext=C;this._handlerComponent=C.getComponent(y);if(!this._handlerComponent){throw new Error("HandlerComponent not found")}if(D){if(D.handlers){if(D.handlers&&D.handlers["default"]){var x=D.handlers["default"];this.interpretLeafHandler(C,x)}if(D.handlers&&D.handlers.check){var B=D.handlers.check;this.interpretCheckHandler(C,B)}if(D.handlers.defaultCommand){this._defaultCommandIdentifier=D.handlers.defaultCommand}}if(D.radioGroup){var A=D.radioGroup;this.interpretRadioHandler(C,A)}}return e.resolve()};n.prototype.commit=function(z){var x=0;var A=this._handler.length;var B=null;for(x=0;x<A;++x){B=this._handler[x];this._handlerComponent.addHandler(B)}this._handler.splice(0,A);delete this._handler;A=this._chkHandler.length;for(x=0;x<A;++x){B=this._chkHandler[x];this._handlerComponent.addCheckHandler(B)}this._chkHandler.splice(0,A);delete this._chkHandler;A=this._radioHandler.length;for(x=0;x<A;++x){B=this._radioHandler[x];this._handlerComponent.addRadioHandler(B)}this._radioHandler.splice(0,A);delete this._radioHandler;this._handlerComponent.setInitializationData(this._initializationValues);if(this._defaultCommandIdentifier){this._handlerComponent.setInitializationDefaultCommand(this._defaultCommandIdentifier)}if(this._availabilityModesSubscribers&&this._availabilityModesSubscribers.length>0){var y=r.DEFAULT_COMPONENT_NAME;if(z&&z[r.DEFAULT_COMPONENT_NAME]){y=z[r.DEFAULT_COMPONENT_NAME]}var C=this._executionContext.getComponent(y);if(C){this._handlerComponent.setAvailabilityModesComponent(C);this.commitAvailabilityModesSubsribers()}}delete this._handlerComponent;delete this._executionContext;delete this._initializationValues;delete this._availabilityModesSubscribers};n.prototype.addToAvailabilityModesSubscribers=function(x){if(!x||!this._executionContext){throw new Error("element and this._executionContext has to be defined")}if(!this._availabilityModesSubscribers){this._availabilityModesSubscribers=[]}this._availabilityModesSubscribers.push(x)};n.prototype.commitAvailabilityModesSubsribers=function(){var x=0;var y=0;var z=null;if(this._availabilityModesSubscribers){y=this._availabilityModesSubscribers.length;for(x=0;x<y;++x){z=this._availabilityModesSubscribers[x];z.initAvailabilityModesSubscription()}}};function f(x){var y=n;if(d[x]!==undefined){y=d[x]}return new y()}var w=Object.create(null);w.generateInterpreter=f;return w});