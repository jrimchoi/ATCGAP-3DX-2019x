define("DS/TopFrame/Frame",["UWA/Core","UWA/Element","UWA/Class","UWA/Class/Promise","UWA/Controls/Abstract","UWA/Controls/Drag","UWA/Utils/Client"],function(f,b,a,h,e,i,d){function j(q,s){var o,n,r,l,p=0;function m(){p=new Date();r=null;l=q.apply(o,n)}return function(){var t=new Date(),u=s-(t-p);o=this;n=arguments;if(u<=0){clearTimeout(r);r=null;p=t;l=q.apply(o,n)}else{if(!r){r=setTimeout(m,u)}}return l}}function c(m,l,n){b.addEvent.call(m,l,function(o){b.removeEvent.call(m,l);n(o)})}function g(l){if(!l){return}Array.prototype.slice.call(arguments,1).forEach(function(m){m&&l.removeClassName(m)})}var k=e.extend({name:"frame",_ANIM_TIME:300,_HANDLE_WIDTH:14,_MODES:{SINGLE:"singlePanel"},_UI_BREAKS:{SMALL:639,MEDIUM:1104,LARGE:1920},_dragControls:null,_content:null,_shownTags:null,_shownPanels:null,_isAnimating:false,_sizeCache:null,defaultOptions:{className:"",mode:"singlepanel",resizablePanels:{},swipeToClose:false,pushMainContent:{left:true,right:true},pushBeforeResize:{left:true,right:true},smallScreenMainContent:null,useWindowResize:true,useDragOverlay:false,smallScreenPanelPriority:"right",panelContentMinSize:300,mainContentMinSize:300},init:function(n,l){l||(l={});if(!n){throw new Error("Missing content map.")}var m=this;m._parent(l);l=m.options;m._shownPanels={};m._shownTags={left:null,right:null};m.elements=m._getFrame(f.extend(m.options,{name:m.name}));m._dragControls=m._initDrag(m.elements,{start:m._onDragStart,move:m._onDragMove,stop:m._onDragStop},l);m._content=m._addContent(n,m.elements);m._onResize=j(m._onResize.bind(m),350);if(l.renderTo){b.inject.call(m.elements.container,l.renderTo);m.elements.container=l.renderTo;m._initEvents();m._onResize()}},_getBreakpoint:function(l){var n=this._UI_BREAKS,m;if(l.width<=n.SMALL){m=n.SMALL}else{if(l.width<=n.MEDIUM){m=n.MEDIUM}else{m=n.LARGE}}return m},_hasLayoutChange:function(m,l){var n=this._UI_BREAKS;if(l<n.LARGE&&m<n.LARGE&&l>n.MEDIUM&&m>n.MEDIUM){return false}return true},_onResize:function(){var r=this,t=r._sizeCache,m=b.getSize.call(r.elements.container),s=r._getBreakpoint(m),l=r.isPanelOpen("left")&&r.isPanelFitted("left"),q=r.isPanelOpen("right")&&r.isPanelFitted("right"),n=s<=r._UI_BREAKS.SMALL,u,o,p;if(!t){r._sizeCache=m}else{if(m.width!==t.width){r._sizeCache=m;if(r._hasLayoutChange(s,r._getBreakpoint(t))||(l||q)){p={animate:false,force:true};if(n&&!r.options.addinMode){u=r.options.smallScreenPanelPriority;o=u==="right"?"left":"right";if(r.isPanelOpen(u)){r.isPanelOpen(o)&&r._doPanelAction("close",o,p);r._doPanelAction("open",u,p)}else{if(r.isPanelOpen(o)){r._doPanelAction("open",o,p)}}}else{r.isPanelOpen("left")&&r._doPanelAction("open","left",f.merge({fit:l},p));r.isPanelOpen("right")&&r._doPanelAction("open","right",f.merge({fit:q},p))}}}}if(s>r._UI_BREAKS.SMALL){r._dragControls.rightPanel&&r._dragControls.rightPanel.detach();r._dragControls.leftPanel&&r._dragControls.leftPanel.detach()}else{r._dragControls.rightPanel&&r._dragControls.rightPanel.attach();r._dragControls.leftPanel&&r._dragControls.leftPanel.attach()}},_initDrag:function(l,q,t){t||(t={});var p=this,s=t.resizablePanels,r=Object.create(null),n=i.extend(q),o=d.Features.touchEvents&&!d.Features.pointerEvents,m=o?30:0;if(s.left){r.left=new n({snap:m,element:l.leftHandle});r.left._column="left";r.left._frame=p;r.left._dragInfo={};r.left._type="handle"}if(s.right){r.right=new n({snap:m,element:l.rightHandle,type:"handle"});r.right._column="right";r.right._frame=p;r.right._dragInfo={};r.right._type="handle"}if(o&&t.swipeToClose){r.leftPanel=new n({snap:10,element:l.leftPanel});r.rightPanel=new n({snap:10,element:l.rightPanel});r.leftPanel._column="left";r.rightPanel._column="right";r.leftPanel._frame=r.rightPanel._frame=p;r.leftPanel._type=r.rightPanel._type="panel";r.leftPanel._dragInfo={};r.rightPanel._dragInfo={}}return r},_getFrame:function(m){m||(m={});var p={},o=f.createElement,n=m.resizablePanels,l;p.container=f.is(m.renderTo,"element")?document.createDocumentFragment():o("div",{"class":m.name+(m.className?" "+m.className:"")});p.leftPanel=o("div",{"class":"column left"}).inject(p.container);p.main=o("div",{"class":"main"}).inject(p.container);p.rightPanel=o("div",{"class":"column right"}).inject(p.container);p.leftPanelCtn=o("div",{"class":"column-ctn"}).inject(p.leftPanel);p.rightPanelCtn=o("div",{"class":"column-ctn"}).inject(p.rightPanel);l='<span class="fonticon fonticon-menu-dot"></span>';if(n.left){p.leftHandle=o("div",{"class":"handle",html:l}).inject(p.leftPanelCtn,"before");p.leftPanel.addClassName("resizable")}if(n.right){p.rightHandle=o("div",{"class":"handle",html:l}).inject(p.rightPanelCtn,"before");p.rightPanel.addClassName("resizable")}return p},_onDragStart:function(r){var n=this,m=n._frame,l=m.elements,q=l[n._column+"Panel"],s=b.getSize.call(l.container).width,p=n._column,t=p==="left"?"right":"left",v,o,u;if(n._type==="panel"){o=s;v=-s}else{o=p==="left"?0:s-m._HANDLE_WIDTH;v=p==="left"?m._HANDLE_WIDTH-s:0;if(m.isPanelOpen(t)){if(t==="left"){v+=m.elements.leftPanelCtn.getSize().width}else{v-=m.elements.rightPanelCtn.getSize().width}}u=j(m._resizePanelContent.bind(m,p,l[p+"PanelCtn"],q,l.container),1000)}n._dragInfo={draggedColumn:q,oppositeColumn:t,startPos:r,containerWidth:s,containerOffset:b.getPosition.call(l.container,document.body),minPosX:o,maxPosX:v,throttledResizeContent:u,draggedElXOffset:n._type==="panel"?0:b.getPosition.call(q,l.container).x}},_onDragMove:function(t,u){var n=this,q=n._dragInfo,m=n._frame,l=m.elements,r=q.draggedColumn,s=u.x+q.draggedElXOffset,p=q.minPosX,v=q.maxPosX,o=s>=p?Math.min(s,p):Math.max(s,v);if(m.options.useDragOverlay&&!n.overlay){n.overlay=f.createElement("div",{"class":"frame-overlay"});n.overlay.inject(l.container)}if(!q.hasDraggingClass){r.addClassName("dragging");q.hasDraggingClass=true}q.endPos=t;if(n._type==="panel"){m._setElementStyles(m.options.smallScreenMainContent,{left:o},{animate:false})}else{q.throttledResizeContent();m._setElementStyles(r,{left:o,transform:"translateX(0)"},{animate:false})}},_onDragStop:function(){var n=this,m=n._frame,o=n._dragInfo,l=n._column,q=o.draggedColumn,r=0.3,s=0.8,u,v,p,t;if(n._type==="panel"){if(l==="left"){if(o.startPos.x>o.endPos.x){m._doPanelAction("close","left")}else{m._doPanelAction("open","left",{force:true})}}else{if(o.startPos.x>o.endPos.x){m._doPanelAction("open","right",{force:true})}else{m._doPanelAction("close","right")}}}else{u=o.endPos.x/o.containerWidth;if(l==="left"){if(m.isPanelOpen(o.oppositeColumn)){s=0.6}p=(u>=s)?"right":(u<=r)?"left":undefined}else{if(m.isPanelOpen(o.oppositeColumn)){r=0.4}p=(u<=r)?"left":(u>=s)?"right":undefined}t=m.isPanelOpen(o.oppositeColumn)?{fit:true}:{maximize:true};if(p==="left"){if(l==="left"){v=m._doPanelAction("close","left")}else{v=m._doPanelAction("open","right",t)}v.then(function(){if(t.fit){o.throttledResizeContent()}else{m._setElementStyles(m.elements[l+"PanelCtn"],{width:""})}})}else{if(p==="right"){if(l==="left"){v=m._doPanelAction("open","left",t)}else{v=m._doPanelAction("close","right")}v.then(function(){if(t.fit){o.throttledResizeContent()}else{m._setElementStyles(m.elements[l+"PanelCtn"],{width:""})}})}else{g(q,"maximized","fitted");m.dispatchEvent("onPanelResize",{panel:l,tag:m._shownTags[l],position:"resized"})}}}if(n.overlay){n.overlay.destroy();n.overlay=null}q.removeClassName("dragging");n._dragInfo={}},_resizePanelContent:function(m,r,p,n,t){t||(t={});var q=this,l=q.elements,s=q.options;f.merge(t,{pushMainContent:s.pushMainContent,panelContentMinSize:s.panelContentMinSize,mainContentMinSize:s.mainContentMinSize});function o(){var y=b.getPosition.call(p,n),x=b.getSize.call(n),w=b.getPosition.call(r,n),v=Math.floor((m==="left")?(x.width-Math.abs(y.x)):(x.width-w.x)),u={};q._setElementStyles(r,{width:Math.max(v,t.panelContentMinSize)},{useAnimationFrame:false});if(t.pushMainContent&&t.pushMainContent[m]){u["margin-"+m]=(m==="left")?Math.max(v,t.mainContentMinSize):Math.min(x.width-t.mainContentMinSize,v);q._setElementStyles(l.main,u,{useAnimationFrame:false})}}if(window.requestAnimationFrame){window.requestAnimationFrame(o)}else{o()}},_addContent:function(o,p){var n=Object.create(null);function l(t,q){var u=Object.create(null),r=document.createDocumentFragment();for(var s in t){if(t.hasOwnProperty(s)){u[s]=m(t[s]);b.grab.call(r,u[s])}}q.grab(r);return u}function m(r){var q=document.createDocumentFragment();return f.is(r,"element")?r:b.setContent.call(q,r)}(o.left)&&(n.left=l(o.left,p.leftPanelCtn));(o.right)&&(n.right=l(o.right,p.rightPanelCtn));(o.main)&&(n.main=l(o.main,p.main));return n},_doPanelAction:function(o,l,u){u||(u={});var p=this,t=p.options,n=p.elements[l+"Panel"],v=u.tag,r={},m=l==="left"?"right":"left",s;if(!n){f.log("Frame: Panel does not exist")}function q(y,x,z,w){return function(){p._isAnimating=false;var C=t.smallScreenMainContent,A="normal",B;if(y==="open"){B="pushed "+(x==="left"?"right":"left");z.addClassName("shown");if(p._getBreakpoint(p._sizeCache)===p._UI_BREAKS.SMALL&&C){C.addClassName(B)}else{p.elements.main.addClassName(B)}if(u.maximize){z.addClassName("maximized");A="maximized"}else{z.removeClassName("maximized")}if(u.fit){z.addClassName("fitted");A="fitted"}else{z.removeClassName("fitted")}p.dispatchEvent("onPanelOpen",{panel:x,tag:p._shownTags[x],position:A})}else{g(z,"shown","maximized","fitted");if(C){C.removeClassName("maximized");if(!p._shownPanels[m]){g(C,"pushed",m)}}g(p.elements.main,"pushed",m,"maximized");p.dispatchEvent("onPanelClose",{panel:x,tag:p._shownTags[x],position:null})}w&&w();return h.resolve()}}if((!u.force&&!u.maximize&&!u.minimize&&!u.fit)&&(p.isPanelOpen(l)&&o==="open")){return h.resolve()}if(!p._shownPanels[m]&&u.fit){u.maximize=true;delete u.fit}p._isAnimating=true;if(o==="open"){if(!p._shownPanels[l]||u.force||u.maximize||u.minimize||u.fit){v&&p.showPanelContent(l,v);r.animate=!f.is(u.force);r.maximize=u.maximize;r.minimize=u.minimize;r.fit=u.fit;if(p.isPanelOpen(m)&&((p.options.mode==="singlepanel")||(p._sizeCache.width<=p._UI_BREAKS.SMALL))){s=p._hidePanel(m,p.elements[m+"Panel"]).then(q("close",m,p.elements[m+"Panel"])).then(p._showPanel.bind(p,l,n,r)).then(q(o,l,n,u.cb))}else{if(u.fit&&p.isPanelOpen(m)&&(p.elements[m+"Panel"].hasClassName("maximized")||p.elements[m+"Panel"].hasClassName("fitted"))){r.fit=u.fit=false;window.requestAnimationFrame(p._doPanelAction.bind(p,"open",m,{fit:true}))}s=p._showPanel(l,n,r).then(function(){var w;if(r.fit){w=p._resizePanelContent(l,p.elements[l+"PanelCtn"],n,p.elements.container,{pushMainContent:false})}else{w=h.resolve()}return w}).then(q(o,l,n,u.cb))}}else{s=h.resolve()}p._shownPanels[l]=true}else{if(o==="close"&&p._shownPanels[l]){s=p._hidePanel(l,n).then(q(o,l,n,u.cb));if(p.isPanelOpen(m)&&(p._sizeCache.width>p._UI_BREAKS.SMALL)&&p.elements[m+"Panel"].hasClassName("fitted")){window.requestAnimationFrame(p._doPanelAction.bind(p,"open",m,{maximize:true}))}p._shownPanels[l]=false}}if(!s){s=h.resolve()}return s},_movePanel:function(B,v,u,m){m||(m={});var r=this,x=r.elements,l=r.options,C=r._getContainerSize().width<=r._UI_BREAKS.SMALL,s=C&&!!l.smallScreenMainContent,p,y,D,t,E,o,n,z,A;function q(){var F;if(s){if(B==="hide"){t.transform=""}F=h.all([r._setElementStyles(x.main,{transform:"",marginLeft:"",marginRight:""},m),r._setElementStyles(l.smallScreenMainContent,t,m),r._setElementStyles(u,{transform:""},{animate:false})])}else{F=h.all([r._setElementStyles(u,A,m),r._setElementStyles(x.main,z,m),r._setElementStyles(l.smallScreenMainContent,{transform:""},{animate:false})])}return F}function w(){return h.all([r._setElementStyles(x.main,o,{animate:false}),r._setElementStyles(u,E,{animate:false}),r._setElementStyles(x[v+"PanelCtn"],{width:""},m),r._setElementStyles(l.smallScreenMainContent,{left:""},m)])}if(B==="open"&&!C&&(m.maximize||m.fit)){p=r.options.resizablePanels[v]||m.maximize;if(v==="left"){n=m.maximize?"100%":b.getSize.call(x.container).width-r.elements.rightPanelCtn.getSize().width+"px";D={left:n,transform:"translateX("+n+")"}}else{n=m.maximize?"0":r.elements.leftPanelCtn.getSize().width+"px";D={left:"",transform:"translateX("+n+")"}}y=h.all([r._setElementStyles(u,D,m)]).then(function(){return h.all[r._setElementStyles(u,{left:""},{animate:false}),r._setElementStyles(x[v+"PanelCtn"],(p?{width:""}:{}),m)]})}else{D=B==="open"?r._getPanelOpenedStyles(v,v,m):r._getPanelClosedStyles(v,v,m);t=B==="open"?r._getPanelOpenedStyles("main",v,m):r._getPanelClosedStyles("main",v,m);if(l.pushBeforeResize&&l.pushBeforeResize[v]){z={transform:t.transform}}else{z={}}if(l.resizablePanels[v]){A={transform:D.transform};E={left:D.left}}else{A=D;E={}}o={transform:""};o["margin"+v.capitalize()]=t["margin"+v.capitalize()];y=q().then(w)}return y},_getContainerSize:function(){return b.getSize.call(this.elements.container)},_showPanel:function(l,n,m){return this._movePanel("open",l,n,m)},_hidePanel:function(l,n,m){return this._movePanel("hide",l,n,m)},_getPanelPosition:function(m,s){var q=this,p=q._UI_BREAKS,r=this._getContainerSize().width,n=o(),l;function o(){var u="px",x="%",w=q._getContainerSize().width,v=480,t=Math.round(0.125*w+240);if(w>=p.LARGE){return{panel:w-v+u,main:v+u}}else{if(w>p.SMALL){return{panel:w-t+u,main:t+u}}else{return{panel:0,main:100+x}}}}switch(m){case"left":l="-"+n.panel;break;case"right":l=n.panel;break;case"main":l={position:(s==="left")?n.main:"-"+n.main,margin:(r<=q._UI_BREAKS.SMALL)?"":n.main};break}return l},_getPanelOpenedStyles:function(l,r){var q=this,n=q.options,p={},o;function m(s){var t="";if(Array.isArray(s)){s.forEach(function(u){t+="translateX("+u+") "})}else{t="translateX("+s+")"}return t}if(l==="main"){o=q._getPanelPosition("main",r);if(n.pushMainContent&&n.pushMainContent[r]){p[r==="left"?"marginLeft":"marginRight"]=o.margin}p.transform=m(o.position)}else{p.left="";p.transform=m(q._getPanelPosition(l,r))}return p},_getPanelClosedStyles:function(m,r){var p=this,q=p.elements,o={},l,n;if(m==="left"){o.transform=""}else{if(m==="right"){o.transform=""}else{n="margin"+r.capitalize();l=q[m].getStyle(n);o[n]="";o.transform="translateX("+(r==="left"?"-"+l:l)+")"}}o.left="";return o},_setElementStyles:function(m,n,l){l=f.extend({useAnimationFrame:true,animate:true},l||{});if(!m){return}return new h(function(p){function o(){var q;if(f.is(n.transform)&&l.animate){n.transitionProperty=Object.keys(n).join(", ");n.transitionDuration="300ms";q=setTimeout(p,l.animDuration||400);c(m,"transitionEnd",function(){clearTimeout(q);m.setStyle("transitionDuration","");m.setStyle("transitionProperty","");p()});m.setStyles(n)}else{m.setStyle("transitionDuration","");m.setStyle("transitionProperty","");m.setStyles(n);p()}}if(window.requestAnimationFrame&&l.useAnimationFrame){window.requestAnimationFrame(o)}else{o()}})},_initEvents:function(){var l=this;if(l.options.useWindowResize){window.onresize=l._onResize.bind(l)}else{b.addEvent.call(l.elements.container,"resize",l._onResize.bind(this))}},onPostInject:function(l){var m=this;if(l){m.elements.container=l;m._initEvents();m._onResize()}},isAnimating:function(){return this._isAnimating},isPanelOpen:function(l){return this._shownPanels[l]||null},isPanelFitted:function(l){if(!l){return}var m=this;return m.elements[l+"Panel"].hasClassName("fitted")},isPanelMaximized:function(l){if(!l){return}var m=this;return m.elements[l+"Panel"].hasClassName("maximized")},openPanel:function(l,m){m||(m={});return this._doPanelAction("open",l.toLowerCase(),m)},closePanel:function(l,m){m||(m={});return this._doPanelAction("close",l.toLowerCase(),m)},showPanelContent:function(m,l){var p=this,o=p._content[m],n;if(o){for(n in p._content[m]){o[n].hide()}if(o[l]){o[l].show();p._shownTags[m]=l}else{o[n].show();p._shownTags[m]=n}}},getShownTag:function(l){var m=this;return m._shownTags[l]||null},destroy:function(){var m=this;m._parent();for(var l in m._dragControls){if(m._dragControls.hasOwnProperty(l)){m._dragControls[l].destroy&&m._dragControls[l].destroy()}}}});return k});define("DS/TopFrame/Utils",["UWA/Core"],function(c){var a,b;a=Array.prototype;b=(function(){function d(e){if(e==null){throw new TypeError("assign cannot be called with null or undefined")}return Object(e)}return Object.assign?Object.assign:function(k){var g,e,m,h,f,l=d(k);if(arguments.length===1){return l}for(g=1;g<arguments.length;g++){e=arguments[g];if(e===null||e===undefined){continue}m=d(e);h=Object.keys(m);for(f=0;f<h.length;f++){l[h[f]]=m[h[f]]}}return l}}());return{pick:function(f){var d,g,e;g={};e=c.is;d=b.apply(null,a.concat.apply(a,a.slice.call(arguments,1)).map(function(h){var i;if(e(h,"string")){i={};i[h]=h}else{if(e(h,"plain")){i=h}}return i}));Object.keys(d).forEach(function(h){var j,i;if(h in f){j=f[h];if(null!==j&&undefined!==j&&""!==j){i=d[h];if(e(i,"string")){g[i]=f[h]}}}});return g},resolve:function(d,e,g){var f=d;if(false===e.every(function(i){var h=c.is(f);if(h){f=f[i]}return h})||f===undefined){f=g}return f},always:function(d){return function(){return d}},getCurrentLanguage:function(){var f="swymlang",e=[];function d(){var g=null,h=document.cookie.split(";");e=h.filter(function(i){return i.toLowerCase().indexOf(f.toLowerCase())>=0});if(e.length>0){g=e[0].split("=")[1]}return g}return d()||window.dsLang||Client.Locale.lang}}});define("DS/TopFrame/Environment",["UWA/Core","UWA/Element","UWA/Environment","UWA/Storage","DS/TopFrame/Utils"],function(g,b,d,e,c){var a=d.extend({name:"boot",init:function(h){this.wp=g.merge({isVisible:true},h);this.html={};this.Features={};this.view={};this.data=h&&h.data||{};this.options={defaultView:{type:"windowed"}};this.html.module=h.el;this.buildSkeleton();this.dispatchInit()},loadWidget:function(j,i){var h={onFailure:function(k){throw k},onTimeout:function(k){throw k},onComplete:function(){}};i=g.extend(h,i);if(this.wp.isolationLevel){this.loadEmbeddedWidget(this.wp.widgetId||j,i);this.dispatchEvent("onRegisterWidget")}else{this.loadInlinedWidget(this.wp.widgetId||j,i)}return this},loadInlinedWidget:function(i,h){var k=this.getWidget(),j=h.fetcher;k.id=this.wp.id;j.title=this.wp.title;k.setStyle(j.style);delete h.fetcher.style;return this._parent(i,h)},loadEmbeddedWidget:function(k,j){var l=this.getWidget(),h,i;l.id=this.wp.id;j.cache=this.wp.checksum;h={id:this.wp.id,appId:this.wp.appId,token:this.wp.token,lang:c.getCurrentLanguage(),displayEdit:false,exposition:this.wp.isolationLevel===2?g.hosts.untrustedExposition:g.hosts.exposition,debugMe:g.debug?1:null};j.embedded=g.extend(j.embedded||{},h);this._parent(k,j);i=this.embedded.elements.iframe;b.setAttributes.call(i,{width:"",height:"",scrolling:"auto"});b.setStyles.call(i,{width:"0",height:"0",minWidth:"100%",minHeight:"100%"});return this},buildSkeleton:function(){var i=this.wp,j=g.createElement,h=this.html;if(!h.module.hasClassName("module")){h.module=j("div",{"class":"module"}).inject(h.module)}h.module.addClassName("wi-"+this.wp.id);h.wrapper=j("div",{"class":"moduleWrapper"}).inject(h.module);if(!i.isContainer){h.body=j("div",{"class":"moduleContent w-"+i.widgetId}).inject(h.wrapper)}else{h.body=h.wrapper;h.module.addClassName("moduleLayout")}},setVisible:function(k,j){var h=this.wp,i=this.getWidget();if(h.isVisible!==k||j){h.isVisible=!!k;i.dispatchEvent(k?"onShow":"onHide")}},onRegisterWidget:function(){if(this.registered){return}this._parent()},propagateSearch:function(l){var k=this.wp,m=this.widget,j,h;if(!k){return}j=k.children;if(m){if(l){m.dispatchEvent("onSearch",l)}else{m.dispatchEvent("onResetSearch")}m.shouldPropagateSearch=true;m.shouldPropagateSearchArg=l}if(k.isContainer){k.shouldPropagateSearch=true;k.shouldPropagateSearchArg=l;if(j!==undefined){for(h=j.length-1;h>=0;h--){if(j[h].widget){j[h].widget.environment.propagateSearch(l)}}}}}});var f=a.extend({name:"sidepanel",init:function(){var h=this;h._parent.apply(h,arguments);g.extend(h.options,{defaultView:{type:"sidepanel"}})},buildSkeleton:function(){var j=this,h=j.html,k=j.data,i=g.createElement;j._parent.apply(j,arguments);h.header=i("div",{"class":"moduleHeader",html:'<span class="moduleHeader__title"><span class="moduleHeader__title__text"></span></span>'}).inject(h.wrapper,"top");h.title=h.header.getElement(".moduleHeader__title__text");h.titleWrapper=h.header.getElement(".moduleHeader__title");if(k.enableTenantSelection){j.buildTenantSelector()}},buildTenantSelector:function(){var l=this,j=l.html,k=g.createElement,h=require;function i(n){var o=l.widget,m=o&&o.environment,p=m&&m.dispatchEvent;if(p){o.setValue("x3dPlatformId",n.name);o.setTitle(n.text+" Communities");m.dispatchEvent("onRefresh")}}h(["DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices"],function(m){m.getPlatformServices({onComplete:function(o){var n=[];o.forEach(function(p){n.push({text:p.displayName,name:p.platformId,selectable:true})});if(n.length>0){i(n[0])}if(n.length>1){j.tenant=k("span",{"class":"moduleHeader__title__tenant fonticon fonticon-chevron-down",}).inject(j.titleWrapper,"bottom");require(["DS/UIKIT/DropdownMenu"],function(p){new p({target:j.tenant,items:n,events:{onClick:function(r,q){i(q)}}})})}}})})},onRegisterWidget:function(){var h=this;if(this.registered){return}h.data=new e({adapter:"Object",database:"preference"+this.wp.id});h.widget.addEventOnce("onLoad",h.onViewRequest.bind(h,h.options.defaultView))},afterLoad:function(){var i,h;try{i=this.embedded&&this.embedded.elements.iframe.contentDocument}catch(j){}if(i){h=i.querySelector(".moduleContent");h&&h.classList.add("environment-"+this.name)}},toggleFit:function(){var h=this;if(!h.view.next){h.onViewRequest({type:h.isFitted()?"windowed":"fitted"})}},isFitted:function(){var h=this.view.current;return h?h.event.type==="fitted":false},onUpdateTitle:function(i){i=i||"";var h=this.html;i=i.trim();this.wp.title=i;if(h.title){h.title.setText(i);if(h.titleWrapper.offsetWidth<h.titleWrapper.scrollWidth){h.title.setAttribute("title",i)}}}});f.prototype.views.sidepanel=d.AbstractView.extend({enter:function(){this.dispatchEvent("onEnter")},onEnter:function(){}});return f});define("DS/TopFrame/TopFrame",["DS/TopFrame/Utils","UWA/Core","UWA/Event","UWA/Class","UWA/Class/Options","UWA/Class/Events","UWA/Element","UWA/Utils","UWA/Class/Promise","DS/TopFrame/Frame","DS/TopBar/TopBar","DS/TopBar/model/MainMenuBar","DS/TopBarProxy/TopBarProxy","DS/i3DXCompass/i3DXCompass","DS/TagNavigator/TagNavigator","DS/W3DLegal/W3DLegal","DS/WebappsUtils/WebappsUtils","DS/UIKIT/Modal","DS/UIKIT/Input/Button","DS/UIKIT/Tooltip","i18n!DS/TopFrame/assets/nls/topFrame"],function(c,a,w,s,p,k,o,b,d,r,j,e,t,l,n,m,f,i,u,q,g){var h,v;v={activateFederatedSearch:true,showCoachmark:true,activateLegal:true,activateInstantMessaging:true,helpMenu:{brandAbout:"",appNameAbout:"",numberAbout:"",getStartedUrl:"",communityUrl:"",supportPublicCloudUrl:"",topBarId:"helpMenu"},search:{ressources:{},userId:null,topBarId:"searchMenu",searchInputTarget:"input_search_div",searchContentTarget:"search-content",events:{}}};h=s.singleton(k,p,{TOPBAR_HEIGHT:44,COMPASS_BREAKPOINT:959,viewportHeight:0,resizeHandler:null,XAPPS:{notification:{id:"X3DNTFC_AP",loadPromise:null,isLoaded:false,content:null,widget:null},content:{id:"X3PDRIV_AP",loadPromise:null,isLoaded:false,content:null,widget:null},social:{id:"X3DWNEW_AP",loadPromise:null,isLoaded:false,content:null,widget:null},search:{id:"X3DSEAR_AP",loadPromise:null,isLoaded:false,content:null,widget:null},messaging:{id:"X3DIMSG_AP",loadPromise:null,isLoaded:false,content:null,widget:null},make:{id:"Make",loadPromise:null,isLoaded:false,content:null,widget:null}},_frame:null,isInitialized:false,_isTaggerVisible:false,_isCompassVisible:false,_isDataFilterPanelVisible:false,_isDashboardMenuVisible:false,_legalPromise:d.deferred(),_visibleXApp:null,_currentSearchQuery:"",_passportUrl:"",init:function(Y){var E=this;E._parent(Y);E.setOptions(Y);var H=E.options,A,L,J,U,P=H.swymUrl||c.resolve(H,["startupParams","swym","0","url"],null),K=H.startupParams,V=window.location.href,B=(a.is(H.activateFederatedSearch)?H.activateFederatedSearch:v.activateFederatedSearch)||b.getQueryString(V,"universal_search"),F=a.is(H.showCoachmark)?H.showCoachmark:v.showCoachmark,O=a.is(H.activateLegal)?H.activateLegal:v.activateLegal,X=a.is(H.activateInstantMessaging)?H.activateInstantMessaging:v.activateInstantMessaging,N="instantMessagingMenu",M=E._updateColumn.bind(E),I=E._manageCompass.bind(E),D=E.XAPPS,W="compassMenu",G="notificationsMenu",x=H.dashboardSwitch;if(H&&(H.useTagger===false)){n=undefined}E._tenantId=H.tenant;E._communityId=H.community;E._passportUrl=H.passportUrl;E.toggleTagger=function(aa){E._isTaggerVisible=(undefined===aa)?!E._isTaggerVisible:aa;if(E._isTaggerVisible){if(E._isCompassVisible){l.hideAccordion()}E._isCompassVisible=false}M("left","taggerCtn");if(n){n.toggle6WTaggerViewVisibility(E._isTaggerVisible)}};function Z(){E.toggleTagger(true)}function S(aa){if(n&&n.view&&aa){n.view.setTaggerMode(aa)}}function T(){E._isTaggerVisible&&E.toggleTagger(false)}E.helpMenuOptions=v.helpMenu;E.searchOptions=v.search;if(a.is(E.searchOptions,"object")){E.searchOptions.x3dPlatformId=E._tenantId}if(H.events){E.searchOptions.events={search:H.events.search,clearSearch:H.events.clearSearch}}if(H.userId){E.searchOptions.userId=H.userId}E.searchOptions.addinMode=H.addinMode;if(K){E.searchOptions.ressources=K}H.myAppsBaseUrl=H.myAppsBaseUrl||H.myAppsBaseURL;if(H.brandAbout){E.helpMenuOptions.brandAbout=H.brandAbout}if(H.appNameAbout){E.helpMenuOptions.appNameAbout=H.appNameAbout}if(H.numberAbout){E.helpMenuOptions.numberAbout=H.numberAbout}if(H.getStartedUrl){E.helpMenuOptions.getStartedUrl=H.getStartedUrl}if(H.communityUrl){E.helpMenuOptions.communityUrl=H.communityUrl}if(H.supportPublicCloudUrl){E.helpMenuOptions.supportPublicCloudUrl=H.supportPublicCloudUrl}if(H.searchParams){E.searchOptions.searchParams=H.searchParams}E.searchOptions.events.openTagger=Z.bind(E);E.searchOptions.events.closeTagger=T.bind(E);E.searchOptions.events.setTaggerMode=S.bind(E);function z(ad,aa){var ab=aa.panel,ae=j.view.children.rightMenuBar,ac="on"+ab.capitalize()+"Panel";if(ad==="open"){ac+="Opened"}else{if(ad==="close"){ac+="Closed";if(ab==="right"){ae._onItemViewActivate()}if(ab==="left"){E._isTaggerVisible=false;E._isCompassVisible=false;E._isDataFilterPanelVisible=false;n.toggle6WTaggerViewVisibility(false);requestAnimationFrame(I)}}else{ac+="Resized"}}this.dispatchEvent(ac,[ad,aa.panel])}function R(){var ab=this._frame.elements,ac,aa;function ad(ag){var af=this,ah=w.getElement(ag);function ae(ai){return o.hasClassName.call(ah,ai)}if(ae("fonticon-cancel")){if(L.isPanelOpen("right")){L.closePanel("right");af._onRightPanelStateChange("closed")}}else{if(ae("fonticon-resize-full")){L.openPanel("right",{fit:true}).then(function(){af._onRightPanelStateChange("fitted")})}else{if(ae("fonticon-resize-small")){L.openPanel("right",{minimize:true}).then(function(){af._onRightPanelStateChange("minimized")})}}}}if(!ab){return}ac='<span class="column-action fit fonticon fonticon-resize-full"></span><span class="column-action minimize fonticon fonticon-resize-small"></span><span class="column-action close fonticon fonticon-cancel"></span>';aa=a.createElement("span",{"class":"column-actions",html:ac}).inject(ab.rightPanelCtn);new q({position:"bottom",target:aa.getElement(".column-action.fit"),body:g.actionFit,offset:{x:0,y:0}});new q({position:"bottom",target:aa.getElement(".column-action.minimize"),body:g.actionMinimize,offset:{x:0,y:0}});new q({position:"bottom",target:aa.getElement(".column-action.close"),body:g.actionClose,offset:{x:0,y:0}});aa.addEvent("click",ad.bind(this))}(function(){var aa;J=a.extend({userName:"",brand:"",appName:"",application:"",lang:"en",isShared:false,useTagger:true,picture:"",events:{menu:function(){E.appContainer.toggleClassName("right");E.searchContentContainer.toggleClassName("right")},logo:function(){var ad=o.getSize.call(document);if(E._isCompassVisible||(H.lockedAppMode)||(((H.addinMode||(!H.addinMode&&!H.lockedAppMode))&&(ad.width>E.COMPASS_BREAKPOINT)))){return}l.showAccordion(true)}}},c.pick(H,"userName","appIcon","brand","appName","application","isShared","topMenus","useTagger","lang","events","signupUrl","loginUrl"),true);var ac=J.topMenus,ab={};if(Array.isArray(ac)){ac.forEach(function(ad){ab[ad]=true});ac=ab}if(ac){ac.notification&&(ac.notification=M.bind(E,"right","notification"));ac.content&&(ac.content=M.bind(E,"right","content"));if(ac.social){ac.social=M.bind(E,"right","social")}else{ac.social=undefined}J.topMenus=ac}J.activateNewSearch=!!B;if(H.picture){J.picture=H.picture}else{if(H.userId&&P){aa=b.parseUrl(P);if(aa.authority){J.picture="{0}://{1}{2}api/user/getpicture/login/{3}/format/normal".format(aa.protocol||"https",aa.authority,aa.directoryPath||"/",H.userId)}}}J.addinMode=H.addinMode;J.lockedAppMode=H.lockedAppMode;j.init(J)}());if(B){require(["DS/SNSearchUX/SearchUX_TopBar"],function(aa){aa.init(E.searchOptions)})}if(X&&!H.lockedAppMode){require(["DS/InstantMessaging/InstantMessaging"],function(aa){aa.init(a.extend({userId:null,topBarId:N,appName:H.brand,userName:H.userName,passportUrl:E._getPassportUrl(),ressources:P?{swym:[{id:E._tenantId,displayName:E._tenantId,url:P}],instantMessaging:K?K.instantMessaging:null}:{}},c.pick(H,"xswym","realtime","userId",{startupParams:"ressources"})))})}this.myAppsCtn=a.createElement("div",{id:"my-apps-ct","class":"column-container"});this.taggerCtn=a.createElement("div",{id:"tagger-ct","class":"column-container"});this.dataFilterPanelCtn=a.createElement("div",{id:"data-filter-panel-ct","class":"column-container"});this.searchContentContainer=new o("div",{"class":"search-content",id:"search-content"});this.appContainer=new o("div",{"class":"app-content"});if(x){this.dashboardMenuContainer=a.createElement("div",{id:"dashboard-menu-panel-ct","class":"column-container"});require([["DS","Dashboard","NewDashboardMenu"].join("/")],function(aa){aa.init({container:E.dashboardMenuContainer,onClose:function(){E._isDashboardMenuVisible=false;M("left","dashboardMenuCtn")},onOpen:function(){E._isDashboardMenuVisible=true;M("left","dashboardMenuCtn")},})})}var Q={left:{myAppsCtn:this.myAppsCtn,taggerCtn:this.taggerCtn,dataFilterPanel:this.dataFilterPanelCtn},main:{appContainer:this.appContainer,searchContentContainer:this.searchContentContainer},right:{}};if(x){Q.left.dashboardMenuCtn=this.dashboardMenuContainer}var C=J.topMenus;if(C){Q.right={loading:a.createElement("div",{"class":"x-app spinner",text:g.loading}),error:a.createElement("div",{"class":"x-app error",text:g.xAppError})};if(C.notification||H.addinMode){(function(){require(["DS/NotificationManager/notificationManager"],function(aa){var ab=a.extend({notifServer:"",topBarID:G,swymServer:P,passportServer:"",login:""},c.pick(H,{passportUrl:"passportServer",userId:"login"},"notifServer"));new aa(ab)})}());Q.right.notification=D.notification.content=a.createElement("div",{"class":"x-app notification"})}if(C.social){Q.right.social=D.social.content=a.createElement("div",{"class":"x-app social"})}if(C.content){Q.right.content=D.content.content=a.createElement("div",{"class":"x-app content"})}}if(B){Q.right.search=D.search.content=a.createElement("div",{"class":"x-app search"})}Q.right.messaging=D.messaging.content=a.createElement("div",{"class":"x-app messaging"});Q.right.make=D.make.content=a.createElement("div",{"class":"x-app make"});r.prototype.movePanelContent=function(aa,ab,ac){ac||(ac={});var ag=this,ae=ag.elements,ad=ag._content,af=ad[ab==="right"?"left":"right"];if(!af[aa]||(af[aa].getParent()===ae[ab+"PanelCtn"])){return false}ad[ab][aa]=af[aa].remove();ad[ab][aa].inject(ae[ab+"PanelCtn"]);delete af[aa];return true};E.options.addinMode&&document.body.addClassName("addinmode");E.options.lockedAppMode&&document.body.addClassName("lockedapp");E._frame=L=new r(Q,{mode:"doublepanel",renderTo:document.body,useDragOverlay:true,smallScreenMainContent:document.body,addinMode:E.options.addinMode,pushMainContent:{right:true},pushBeforeResize:{left:true,right:false},events:{onPanelOpen:z.bind(E,"open"),onPanelClose:z.bind(E,"close"),onPanelResize:z.bind(E,"resize")}});(R.bind(E))();this.getApplicationContainer=function(){return this.appContainer};if(O){E._activateLegal(H)}(function(){if(n){var aa=a.extend({disableAutoComplete:true,taggerIconId:"btn_tag_nav",appsTarget:"tagger-ct",events:{onFilterChange:c.always(false)},lang:"en",userId:null,x3dPlatformId:E._tenantId},c.pick(H,"myAppsBaseUrl","tagsServerUrl","onFilterChange","getContextIdFromWidgetId","displayFilteredState","getWidgetTitleFromWidgetId","lang","brand","tenant","userId"));if(K){aa.startupParams=K}else{if(H.taggerService&&H.cStorageService&&E._tenantId){a.extend(aa,c.pick(H,"taggerService","cStorageService","tenant"))}else{if(H.tagsServerUrl){aa.tagsServerUrl=H.tagsServerUrl;if(H.envId){aa.tagsServerUrlParams={tenant:H.envId}}}}}n.set6WTaggerOptions(aa);n.create6WTaggerView(n.get6WTagger("default"),aa.appsTarget,{onClose:function(){E._isTaggerVisible=false;M("left","taggerCtn")},onOpen:function(){E._isCompassVisible=false;E._isDataFilterPanelVisible=false;E._isDashboardMenuVisible=false;if(E._isTaggerVisible){return}E._isTaggerVisible=true;M("left","taggerCtn")},onFilterChange:aa.events.onFilterChange,displayTaggerOnFocus:Z.bind(E),hideTaggerOnFocus:T.bind(E)});n.toggle6WTaggerViewVisibility(false)}}());if(l){l.initialize(a.extend({compassTarget:"compass_ctn",appsTarget:"my-apps-ct",closable:true,enableWidgetDrag:null,closeOnLaunch:false,launchOnSameDomain:c.always(false),onOpen:function(){E._isDataFilterPanelVisible=false;E._isCompassVisible=true;T("compass");M("left","myAppsCtn")},onClose:function(){E._isCompassVisible=false;M("left","myAppsCtn")},lang:"en",myAppsBaseUrl:"",userId:null,passportUrl:E._getPassportUrl(),proxyTicketUrl:null,topBarId:W,x3dPlatformId:E._tenantId},c.pick(H,"launchOnSameDomain","closeOnLaunch","enableWidgetDrag","userId","myAppsBaseUrl","proxyTicketUrl","lang","addinMode")))}function y(aa){aa.init({container:E.dataFilterPanelCtn,open:function(){E._isDataFilterPanelVisible=true;E._isCompassVisible=false;T("compass");M("left","dataFilterPanelCtn")},close:function(){E._isDataFilterPanelVisible=false;M("left","dataFilterPanelCtn")}})}require(["DS/Frame3DXInfra/Frame3DXController"],function(aa){if(aa){y(aa)}});e.setStaticMenuProviders([W,G,E.searchOptions.topBarId,N,E.helpMenuOptions.topBarId]);U=function(aa){require(["DS/Coachmark/Coachmark"],function(ab){aa.events=aa.events||{};a.merge(aa.events,{onDNSAChange:H.onCoachmarkDNSAChange});ab.init(aa);if(a.is(aa.callback,"Function")){aa.callback()}})};if(F&&!H.lockedAppMode&&(K&&K.showCoachmark)){U(a.extend({myAppsBaseURL:"",parentEltSelector:"body",forceDisplay:false,lang:"en",dnsa:K?!K.showCoachmark:null,xappsMode:H.xappsMode||false},c.pick(H,{myAppsBaseUrl:"myAppsBaseURL"},"lang")))}E.resizeHandler=E.resize.bind(this);E.resizeHandler();j.addEvent({events:{search:function(aa){E._onSearch(aa.value||"")},clearSearch:function(){E._onSearch("")}}});A=new t({id:E.helpMenuOptions.topBarId});A.setContent({help:[{label:g.getStartedItem,onExecute:function(){U({myAppsBaseURL:E.helpMenuOptions.getStartedUrl,parentEltSelector:"#coachmark",forceDisplay:true,lang:H.lang||"en",xappsMode:H.xappsMode||false})}},{label:g.supportCommunitiesItem,onExecute:function(){E._openUrlInBlankTab({url:E.helpMenuOptions.communityUrl||"https://r1132100503382-eu1-3dswym.3dexperience.3ds.com/#home",modalTitle:g.supportCommunitiesItem,modalButton:g.supportCommunitiesItem})}},{label:g.aboutItem,onExecute:function(){function aa(){var ac,ab=o.getElement.call(document.body,[".ds-coachmark"]);if(ab){ac=ab.getElement(".ds-coachmark-close");if(ac){ac.triggerEvent("click")}}}aa();E.openAboutDialog()}}]});E._isPublicCloud().then(function(aa){if(!aa){return}A.addContent({help:[{label:g.getSupportItem,onExecute:function(){E._openUrlInBlankTab({url:E.helpMenuOptions.supportPublicCloudUrl||"https://www.3ds.com/support/3dexperience-platform-on-cloud-support/",modalTitle:g.getSupportItem,modalButton:g.getSupportItem})}}]})});require([["DS","PlatformAPI","PlatformAPI"].join("/")],function(aa){aa.subscribe("marketplace.make.sendContent",function(ab){E.makeQueryParams=ab||{};E.openPanel("right",{appId:"Make",tag:"make"})})});E.isInitialized=true;H.onEndInit&&H.onEndInit()},_openUrlInBlankTab:function(x){if(b.Client.Engine.safari){var y=new i({header:x.modalTitle,body:a.createElement("div",{styles:{"text-align":"center"},html:new u({value:x.modalButton,className:"primary",icon:"login",events:{onClick:function(){window.open(x.url,"_blank");y.hide()}}})}),visible:true,closable:true,renderTo:document.body,events:{onHide:function(){y=null}}});return}window.open(x.url,"_blank")},_loadModules:function(x){var y=[];if(a.is(x,"string")){y[0]=x}else{y=x}return new d(function(A,z){require(y,function(){A(Array.prototype.slice.call(arguments))},function(B){z("Error loading modules."+((B&&B.requireModules)?B:""))})})},_getAppInfo:function(x){return new d(function(z,y){if(l){l.getAppInfo({appId:x,onComplete:function(A){if(A){z(A)}else{y("Could not locate app information.")}},onFailure:y})}else{y()}})},_instantiateApp:function(z,x,y){z=z||{};var A=this;A.appPrefs=y||{};return new d(function(B){A._loadModules(["DS/UWPClientCode/WidgetFactory","DS/TopFrame/Environment"]).then(function(D){var E=D[0],C=D[1],L=z.id,H=A._tenantId&&{x3dPlatformId:A._tenantId}||{},F={enableTenantSelection:(L===A.XAPPS.social.id)},G=a.merge(A.appPrefs,F),I=A._communityId&&{community:A._communityId}||{},K=a.merge(G,a.merge(H,I)),J=JSON.stringify(K),M={el:x,parent:false,preview:true,appId:L,data:J,header:true};if(z.platforms&&A._tenantId){z.platforms.forEach(function(N){if(N.id===A._tenantId){z.launchInfos=N.launchInfos;z.checksum=N.checksum||z.checksum;z.isolationLevel=N.isolationLevel||z.isolationLevel}})}if((z.checksum&&z.launchInfos)||(z.platforms&&z.platforms[0]&&z.platforms[0].checksum&&z.platforms[0].launchInfos)){M=a.extend(M,{widgetId:a.is(z.launchInfos)?z.launchInfos:z.platforms[0].launchInfos,isolationLevel:a.is(z.isolationLevel)?z.isolationLevel:z.platforms[0].isolationLevel,token:a.is(z.checksum)?z.checksum:z.platforms[0].checksum})}else{throw new Error("Could not get valid Config from MyApps for the App "+M.appId)}E.load(M,function(){B(M.widget)},C)})})},_showApp:function(x,y){var A=this,C=A._frame,B=A.XAPPS[x];function z(){var D;if(y){return y}else{switch(x){default:D={}}return D}}if(!B||!B.content){return d.resolve()}if(x==="make"){require([["DS","i3DXCompassPlatformServices","i3DXCompassPlatformServices"].join("/")],function(D){function E(G,F){return Object.keys(G).map(function(H){if(H==="originalAsset"){return E(G[H],"originalAsset_")}return F+encodeURIComponent(H)+"="+encodeURIComponent(G[H])}).join("&")}D.getPlatformServices({onComplete:function(K){var H=K&&K.filter(function(L){return L.mppresentation}),G=H&&H[0]&&H[0].mppresentation||"https://make.3dexperience.3ds.com",J=E(A.makeQueryParams,""),I=G+"/addin?"+J;var F=document.createElement("iframe");F.setAttribute("src",I);F.style.width="100%";F.style.height="100%";F.style.paddingTop="38px";F.style.border="none";while(B.content.firstChild){B.content.removeChild(B.content.firstChild)}B.content.appendChild(F);B.isLoaded=true;C.showPanelContent("right",x)}})});return d.resolve()}else{if(!B.isLoaded&&!B.loadPromise){C.showPanelContent("right","loading");B.loadPromise=A._getAppInfo(B.id).then(function(D){return A._instantiateApp(D,B.content,z(x))}).then(function(D){B.isLoaded=true;B.widget=D;C.showPanelContent("right",x);return d.resolve()})["catch"](function(D){B.loadPromise=null;a.log("Error:"+D?(D.stackTrace||D):"");C.showPanelContent("right","error")});return B.loadPromise}else{C.showPanelContent("right",x);return B.loadPromise||d.resolve()}}},_updateColumn:function(y,x){var z=this,C=z._frame,D=true,B=false;if(y==="left"){var A;if(z._isTaggerVisible){C.showPanelContent(y,"taggerCtn")}else{if(z._isCompassVisible){C.showPanelContent(y,"myAppsCtn")}else{if(z._isDataFilterPanelVisible){C.showPanelContent(y,"dataFilterPanelCtn")}else{if(z._isDashboardMenuVisible){C.showPanelContent(y,"dashboardMenuCtn")}}}}if((z._isTaggerVisible||z._isCompassVisible||z._isDataFilterPanelVisible||z._isDashboardMenuVisible)&&!C.isPanelOpen(y)){A=C.openPanel(y,{fit:(C.isPanelOpen("right")&&C.isPanelMaximized("right"))})}else{if(!z._isTaggerVisible&&!z._isCompassVisible&&!z._isDataFilterPanelVisible&&!z._isDashboardMenuVisible){A=C.closePanel(B?"right":"left")}else{A=d.resolve()}}A.then(z._manageCompass.bind(z))}if(y==="right"&&!C.isAnimating()){if(C.isPanelOpen(y)){if(z._visibleXApp!==x){z._visibleXApp=x;z._showApp(x).then(function(){if(C.isPanelFitted("right")||C.isPanelMaximized("right")){z._onRightPanelStateChange("maximized")}})}else{C.closePanel(y).then(function(){z._onRightPanelStateChange("closed")})}}else{z._visibleXApp=x;C.openPanel(y,{fit:(C.isPanelOpen("left")&&C.isPanelMaximized("right")),tag:x}).then(z._showApp.bind(z,x)).then(function(){if(C.isPanelFitted("right")||C.isPanelMaximized("right")){z._onRightPanelStateChange("maximized")}})}}else{D=false}return D},_manageCompass:function(){var A=this,B,y,C,x=350;function z(){clearTimeout(C);B.removeClassName("compass-force-show");y.removeEvent("transitionEnd",z)}if(l){B=B||document.querySelector("#compass_ctn");if(!A._isCompassVisible){l.hideAccordion();if(B){y=B.getElement(".compass-base");if(y){y.addEvent("transitionEnd",z);C=setTimeout(z,x)}}}else{B&&B.addClassName("compass-force-show")}}},_activateLegal:function(E){var C=this,A=E.startupParams||{},B=E.myAppsBaseUrl||"",y=E.legal&&a.is(E.legal,"array"),F=y&&E.legal,x={myAppsBaseUrl:B,renderFooter:true,footerContainer:C.appContainer,onAccept:null,legal:A.legal,swym:A.swym,onFailure:null,onAboutClick:C.openAboutDialog.bind(C),legalTenantId:C._tenantId},D=c.pick(E,{onFailLegal:"onFailure",onAcceptLegal:"onAccept",myAppsBaseURL:"myAppsBaseUrl"},"renderFooter","legal");E=a.extend(x,D);function z(G){var H=false;if(a.is(G,"array")){H=G.some(function(I){return I.footerDisplay===true})}return H}C._isPublicCloud().then(function(G){if(y&&G){F.push({id:"3DS",displayName:"Dassault Systèmes",acceptedDP:true,dp:"https://www.3ds.com/privacy-policy/",ressourceType:"url",footerDisplay:z(F)})}m.init(E);C._legalPromise.resolve()})["catch"](function(){})},_onSearch:function(z){var x=this,y=x._frame;x._currentSearchQuery=z||"";(y.isPanelMaximized("right")||y.isPanelFitted("right"))&&x._propagateSearch(z)},_onRightPanelStateChange:function(A){var y=this,x=y.options||{};function z(C){var B="RightPanelContext",E=y.XAPPS,G=y._visibleXApp,D=((E&&G&&E[G])||{}).widget,F=n.get6WTagger(B);if(!F){return}if(C){D&&D.id&&F.setAsCurrent().focusOnCC(D.id)}else{F.unfocusCC()}}switch(A){case"maximized":case"fitted":z(true);y._propagateSearch();x.onRightPanelMaximize&&x.onRightPanelMaximize();break;case"minimized":case"closed":z(false);y._propagateSearch("");x.onRightPanelMinimize&&x.onRightPanelMinimize();break}},_propagateSearch:function(B){var A=this,z=(a.Widgets||{}).instances||[],y,x;for(y=0;y<z.length;y++){x=z[y].environment;if(x.name==="boot"){x.propagateSearch(a.is(B,"string")?B:A._currentSearchQuery)}}},_isOffline:function(){return !h.options.userId},_isPublicCloud:(function(){var x=null,y=[],z=false;return function(){var B=this;if(B._isOffline()){return d.resolve(false)}if(typeof x==="boolean"){return d.resolve(x)}if(z){var A=d.deferred(),C=A.promise;y.push(A);return C}z=true;return new d(function(G,F){function E(I,H){y.forEach(function(J){J[I](H)});y=[]}var D=B._getPassportUrl()+"/api/authenticated/user/fields";require([["DS","WAFData","WAFData"].join("/")],function(H){H.authenticatedRequest(D,{method:"GET",headers:{Accept:"application/json","Content-type":"application/json"},onComplete:function(J){try{x=!!JSON.parse(J).fields.dpp_consent}catch(I){x=false}z=false;E("resolve",x);G(x)},onFailure:function(I){window.console&&window.console.error(I);z=false;E("reject",I);F(I)}})},function(H){if(window.console){window.console.error("WAFData can not be required ...");window.console.error(H)}z=false;E("reject",H);F(H)})})}}()),_getPassportUrl:function(){return this._passportUrl},activateLegal:function(){this._activateLegal(this.options)},openPanel:function(x,G){G||(G={});var B=this,z=B._frame,C=G&&G.fit,A=!C&&G&&G.maximize,D,H,F;if(!x){a.log("Must specify a panel");F=d.reject()}else{if(x==="left"){a.log("Left panel currently not permitted.");F=d.reject()}}for(var y in B.XAPPS){if(B.XAPPS.hasOwnProperty(y)){var E=B.XAPPS[y];if(G.appId===E.id){D=E.id;H=y}}}if(!D||!H){a.log("App does not exist in side panel.");F=d.reject()}else{F=z.openPanel("right",{tag:H,fit:C,maximize:A}).then(B._showApp(H,G.data)).then(function(){var J=j.view.children.rightMenuBar,I=J.subViews.filter(function(K){return K.model.id===H});J._onItemViewActivate();I[0]&&I[0].activate();return d.resolve()})}return F},minimizeSidePanel:function(){var x=this,y=x._frame;if(y.isPanelMaximized("right")||y.isPanelFitted("right")){y.openPanel("right",{minimize:true})}},initResizeEvent:function(){o.addEvent.call(window,"resize",this.resizeHandler)},removeResizeEvent:function(){o.removeEvent.call(window,"resize",this.resizeHandler)},resize:function(){var y=this,x=window.innerHeight||document.documentElement.clientHeight;if(x===y.viewportHeight){return}y.appContainer.setStyle("height",x-y.TOPBAR_HEIGHT);y.viewportHeight=x},openAboutDialog:function(){var B=this,y=a.createElement,C=null,D=y("div",{"class":"template-cont"}),z=y("div",{"class":"template-header"});function E(){require(["DS/Latency/SupportDialogBuilder"],function(G){G.build({container:C,tenantId:B._tenantId,buildDeploy:B.helpMenuOptions.numberAbout})})}function A(){B._legalPromise.promise.then(function(){var G,H=m._legal,I=H.buildFooter({acceptedTou:H.acceptedTou,acceptedDp:H.acceptedDp,acceptedCookies:H.acceptedCookies});D.empty();D.removeClassName("support");D.removeClassName("mobile-pairing");D.addClassName("about");D.setStyle("padding","0px");D.setStyle("height","auto");C.getFooter().hide();G=[B.helpMenuOptions.appNameAbout,B.helpMenuOptions.numberAbout].filter(function(J){return J}).join(" - ");y("img",{"class":"info-img",src:f.getWebappsAssetUrl("TopFrame","images/about-empty.png"),alt:g.aboutItem}).inject(D);y("div",{html:B.helpMenuOptions.brandAbout,"class":"message title"}).inject(D);y("div",{text:G,"class":"message"}).inject(D);I.inject(D)})}function F(){require(["DS/MobilePairing/MobilePairing"],function(G){G.buildMobilePairingDialog(C,B.options)})}function x(){var G=a.createElement,J;G("h4",{text:g.aboutItem}).inject(z);function H(L,K,M,N){return{tag:"div","class":"about-tab-element "+L,html:[{tag:"span","class":"fonticon fonticon-"+K},{tag:"span","class":"title",text:M,title:M}],events:{mouseenter:function(){this.addClassName("bg-primary")},mouseleave:function(){if(!this.hasClassName("selected")){this.removeClassName("bg-primary")}},click:N}}}function I(L){var K=z.getElementsByClassName("about-tab-element selected");K[0].removeClassName("bg-primary");K[0].removeClassName("selected");this.addClassName("selected");L()}J=[H("aboutElement bg-primary selected","info",g.about,function(){I.call(this,A)}),H("supportElement","lifebuoy",g.support,function(){I.call(this,E)}),H("mobilePairing","component",g.mobilePairing,function(){I.call(this,F)})];G("div",{html:J,"class":"info-tab"}).inject(z)}if(!(C instanceof i)){C=new i({header:z,body:D,visible:true,closable:true,className:"ifwe-about-dialog",renderTo:document.body,events:{onHide:function(){C.destroy()}}});x();A()}else{C.show()}},isTaggerVisible:function(){return this._isTaggerVisible},uninitializedCalls:"throw"});return h});define("TopFrame",["TopFrame/TopFrame"],function(a){return a});define("TopFrame/TopFrame",["DS/TopFrame/TopFrame"],function(a){return a});define("TopFrame",["TopFrame/TopFrame"],function(a){return a});define("TopFrame/TopFrame",["DS/TopFrame/TopFrame"],function(a){return a});