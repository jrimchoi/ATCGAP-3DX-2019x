define("DS/MPFStepNavigationComponent/StepNavigationComponent",["UWA/Core","DS/MPFView/MPFView","i18n!DS/MPFStepNavigationComponent/assets/nls/StepNavigationComponent","css!DS/MPFUI/MPFUI"],function(c,d,a){var b=d.extend({setup:function(e){this._parent(e);this.currentStep=0;this.stepArray=[];this.steps=e.steps;this.stepMap={};this.stepChangeCallBack=e.stepChangeCallBack},render:function(){var i=this;var o=Object.keys(this.steps);var e=c.createElement("div");for(var n=0;n<o.length;n++){var m=Object.keys(this.steps[o[n]]);var f=c.createElement("div",{"class":"mpf-menuSectionHeader",html:a.get(o[n])});var h=[];for(var g=0;g<m.length;g++){var l;if(this.steps[o[n]][m[g]].completed){l="mpf-completedMenuIcon fonticon-check"}else{if(g===0){l="mpf-activeMenuIcon state fonticon-record unchecked"}else{l="mpf-inactiveMenuIcon state fonticon-record unchecked "}}var k=c.createElement("span",{"class":"fonticon "+l});var j=c.createElement("span",{"class":"mpf-menuStepSpan",html:a.get(m[g])});h.push(c.createElement("div",{"class":g===0?"mpf-companyActiveMenuLabelDiv":"mpf-companyMenuLabelDiv",events:{click:function(p){if(i.validateStep()){i.saveStep({onComplete:function(){var r=i.stepMap[p.target.innerText];var q=p.target.getParent().getParent().innerText.split("\n")[0].replace("\r","");i.changeStep({chosenSection:q,chosenStep:r});i.stepChangeCallBack(r)}})}},mouseenter:function(q){if(!this.hasClassName("mpf-companyActiveMenuLabelDiv")){this.addClassName("mpf-companyHoverMenuLabelDiv");var p=this.getElementsByClassName("mpf-inactiveMenuIcon")[0];if(p){p.removeClassName("mpf-inactiveMenuIcon");p.addClassName("mpf-companyHoverMenuIcon")}}},mouseleave:function(q){this.removeClassName("mpf-companyHoverMenuLabelDiv");var p=this.getElementsByClassName("mpf-companyHoverMenuIcon")[0];if(p){p.removeClassName("mpf-companyHoverMenuIcon");if(!p.hasClassName("mpf-activeMenuIcon")){p.addClassName("mpf-inactiveMenuIcon")}}}},html:[k,j]}));this.stepMap[a.get(m[g])]=m[g];this.stepArray.push({icon:k,name:m[g],step:this.steps[o[n]][m[g]],stepSpan:j});if(g===0){this.steps[o[n]][m[g]].render()}}f.inject(e);e.setHTML([e.getHTML(),h])}this.container.setContent(e);return this},destroy:function(){this.model=null;this._parent();this.container=null},changeStep:function(e){this.stepArray[this.currentStep].icon.removeClassName("fonticon-record");this.stepArray[this.currentStep].icon.removeClassName("mpf-activeMenuIcon");this.stepArray[this.currentStep].icon.getParent().removeClassName("mpf-companyActiveMenuLabelDiv");this.stepArray[this.currentStep].icon.getParent().addClassName("mpf-companyMenuLabelDiv");if(this.stepArray[this.currentStep].step.completed){this.stepArray[this.currentStep].icon.addClassName("fonticon-check");this.stepArray[this.currentStep].icon.addClassName("mpf-completedMenuIcon")}else{this.stepArray[this.currentStep].icon.addClassName("fonticon-record");this.stepArray[this.currentStep].icon.addClassName("mpf-inactiveMenuIcon")}if(e&&e.chosenStep&&e.chosenSection){this.steps[e.chosenSection][e.chosenStep].render();for(var f=0;f<this.stepArray.length;f++){if(this.stepArray[f].name===e.chosenStep){this.currentStep=f;if(!this.stepArray[this.currentStep].step.completed){this.stepArray[this.currentStep].icon.removeClassName("mpf-inactiveMenuIcon");this.stepArray[this.currentStep].icon.removeClassName("companyHoverMenuIcon");this.stepArray[this.currentStep].icon.addClassName("mpf-activeMenuIcon")}this.stepArray[this.currentStep].icon.getParent().addClassName("mpf-companyActiveMenuLabelDiv");this.stepArray[this.currentStep].icon.getParent().removeClassName("mpf-companyMenuLabelDiv");break}}}else{if(e.direction==="next"){this.currentStep++}else{this.currentStep--}this.stepArray[this.currentStep].icon.getParent().addClassName("mpf-companyActiveMenuLabelDiv");this.stepArray[this.currentStep].icon.getParent().removeClassName("mpf-companyMenuLabelDiv");if(this.stepArray[this.currentStep].icon.hasClassName("mpf-inactiveMenuIcon")){this.stepArray[this.currentStep].icon.removeClassName("mpf-inactiveMenuIcon");this.stepArray[this.currentStep].icon.addClassName("mpf-activeMenuIcon")}this.stepArray[this.currentStep].step.render()}},validateStep:function(){var e=true;if(this.stepArray[this.currentStep].step.validate){e=this.stepArray[this.currentStep].step.validate()}return e},saveStep:function(e){if(this.stepArray[this.currentStep].step.validate&&this.stepArray[this.currentStep].step.save){this.stepArray[this.currentStep].step.save(e)}else{if(e.onComplete){e.onComplete()}}}});return b});