define("DS/CSIViewModelWebImplement/CSIVMClientObject",["DS/CSIViewModelWebInterfaces/CSIVMClientStateMode"],function(a){function c(e,d,f){this.clear();this._localId=d;this._idPattern=f;this._nameSpace=e}c.prototype.stateMode=a;function b(){}b.prototype.initTempoChildren=function(){if(this._childrenTempo===undefined){this._childrenTempo=[];if(this._children!==undefined){var e=this._children.length;this._childrenTempo.length=e;var d=0;for(d=0;d<e;d++){this._childrenTempo[d]=this._children[d]}}this._withTempoState=true}};b.prototype.initTempoParents=function(){if(this._parentsTempo===undefined){this._parentsTempo=[];if(this._parents!==undefined){var e=this._parents.length;this._parentsTempo.length=e;var d=0;for(d=0;d<e;d++){this._parentsTempo[d]=this._parents[d]}}this._withTempoState=true}};b.prototype.abort=function(){this._childrenTempo=undefined;this._parentsTempo=undefined;this._associatedObjectTempo=undefined;this._withTempoState=false};b.prototype.commit=function(){if(this._withTempoState){if(this._childrenTempo!==undefined){this._children=this._childrenTempo}if(this._parentsTempo!==undefined){this._parents=this._parentsTempo}if(this._associatedObjectTempo!==undefined){this._associatedObject=this._associatedObjectTempo}this.abort()}};b.prototype.getProperty=function(e,d){var f=undefined;if(d===c.prototype.stateMode.Tempo||d===c.prototype.stateMode.TempoOrPermanent){f=this[e+"Tempo"]?this[e+"Tempo"]:this[e]}else{if(d===c.prototype.stateMode.Permanent){f=this[e]}}return f};b.prototype.setAssociatedObject=function(d){this._withTempoState=true;this._associatedObjectTempo=d};b.prototype.getAssociatedObject=function(d){return this.getProperty("_associatedObject",d)};b.prototype.addChild=function(d){this.initTempoChildren();this._childrenTempo.push(d)};b.prototype.addChildren=function(d){this.initTempoChildren();var g=d.length;var f=this._childrenTempo.length;g+=f;this._childrenTempo.length=g;var e=0;for(e=f;e<g;e++){this._childrenTempo[e]=d[e-f]}};b.prototype.removeChild=function(d){this.initTempoChildren();var e=this._childrenTempo.indexOf(d);if(e>-1){this._childrenTempo.splice(e,1)}};b.prototype.getChildren=function(d){return this.getProperty("_children",d)};b.prototype.addParent=function(d){this.initTempoParents();this._parentsTempo.push(d)};b.prototype.removeParent=function(e){this.initTempoParents();var d=this._parentsTempo.indexOf(e);if(d>-1){this._parentsTempo.splice(d,1)}};b.prototype.getParents=function(d){return this.getProperty("_parents",d)};c.prototype.clear=function(){if(this._ViewDatas!==undefined){delete this._ViewDatas}};c.prototype.getLocalId=function(){return this._localId};c.prototype.getIdPattern=function(){return this._idPattern};c.prototype.getNameSpace=function(){return this._nameSpace};c.prototype.getMainObject=function(){return this._mainObj};c.prototype.addObject=function(){if(this._additionalObjects===undefined){this._additionalObjects=[]}var d=new c(this._nameSpace,this._localId,this._idPattern);d._mainObj=this;d._dualObj=this._dualObj;d._dualViewType=this._dualViewType;this._additionalObjects.push(d);return d};c.prototype.getAdditionalObjects=function(){return this._additionalObjects};c.prototype.getViewData=function(d){var e=undefined;if(this._ViewDatas!==undefined){e=this._ViewDatas[d.getViewType()]}return e};c.prototype.getOrCreateViewData=function(d){var f=undefined;var e=d.getViewType();if(this._ViewDatas!==undefined){f=this._ViewDatas[e]}if(f===undefined){if(this._ViewDatas===undefined){this._ViewDatas={}}f=new b();this._ViewDatas[e]=f}return f};c.prototype.deleteViewData=function(d){if(this._ViewDatas!==undefined&&d!==undefined){delete this._ViewDatas[d.getViewType()];if(Object.keys(this._ViewDatas).length===0){delete this._ViewDatas}if(this._dualObj!==undefined){var e=this._dualObj.getDualObject(d.getViewType());if(e===this){e.setDualObject()}}}};c.prototype.isEmpty=function(){if(this._additionalObjects!==undefined){var d=0;var e=this._additionalObjects.length;for(d=0;d<e;d++){if(!(this._additionalObjects[d].isEmpty())){return false}}}return((this._ViewDatas===undefined)&&(!this.isRoot()))};c.prototype.isTemporary=function(){var f=undefined;var e=undefined;var d=undefined;if(this._ViewDatas!==undefined){for(f in this._ViewDatas){e=this._ViewDatas[f];if(this.isRoot()){d=e.getChildren(c.prototype.stateMode.Permanent)}else{d=e.getParents(c.prototype.stateMode.Permanent)}if(d!==undefined){return false}}}return true};c.prototype.associateViewElt=function(d,e){var f=this.getOrCreateViewData(d);if(f!==undefined){f.setAssociatedObject(e)}};c.prototype.getAssociatedViewElt=function(d){var f=undefined;var e=this.getViewData(d);if(e!==undefined){f=e.getAssociatedObject(c.prototype.stateMode.TempoOrPermanent)}return f};c.prototype.getKey=function(d){var g=undefined;var f=null;if(this._ViewDatas!==undefined){for(var e in this._ViewDatas){f=this._ViewDatas[e].getAssociatedObject(c.prototype.stateMode.Tempo);if(f===d){g=this.getNameSpace().getTreeKeyFromViewType(e);break}f=this._ViewDatas[e].getAssociatedObject(c.prototype.stateMode.Permanent);if(f===d){g=this.getNameSpace().getTreeKeyFromViewType(e);break}}}return g};c.prototype.setRoot=function(){this._isRoot=true};c.prototype.isRoot=function(){var d=false;if(this._isRoot!==undefined){d=true}return d};c.prototype.isLeaf=function(d){var f=true;var e=this.getChildren(d,this.stateMode.TempoOrPermanent);if(e!==undefined&&e.length>0){f=false}};c.prototype.addChild=function(e,d){var f=this.getOrCreateViewData(e);if(f!==undefined){f.addChild(d);d.addParent(e,this)}};c.prototype.addChildren=function(d,f){var h=this.getOrCreateViewData(d);if(h!==undefined){h.addChildren(f);var g=f.length;var e=0;for(e=0;e<g;e++){f[e].addParent(d,this)}}};c.prototype.addParent=function(d,f){var e=this.getOrCreateViewData(d);if(e!==undefined){e.addParent(f)}};c.prototype.removeChild=function(e,d){var f=this.getOrCreateViewData(e);if(f!==undefined){f.removeChild(d);d.removeParent(e,this)}};c.prototype.removeParent=function(d,f){var e=this.getOrCreateViewData(d);if(e!==undefined){e.removeParent(f)}};c.prototype.getChildren=function(e,d){var g=undefined;var f=this.getViewData(e);if(f!==undefined){g=f.getChildren(d)}return g};c.prototype.getAllChildren=function(f){var l=[];var k=undefined;var j=undefined;var e=undefined;var h,g,d;if(this._ViewDatas!==undefined){for(k in this._ViewDatas){j=this._ViewDatas[k];e=j.getChildren(f);if(e!==undefined){h=e.length;for(g=0;g<h;g++){d=e[g];if(l.indexOf(d)<0){l.push(d)}}}}}return l};c.prototype.getAllParents=function(d){var l=[];var k=undefined;var j=undefined;var e=undefined;var h,g,f;if(this._ViewDatas!==undefined){for(k in this._ViewDatas){j=this._ViewDatas[k];e=j.getParents(d);if(e!==undefined){h=e.length;for(g=0;g<h;g++){f=e[g];if(l.indexOf(f)<0){l.push(f)}}}}}return l};c.prototype.getFirstParentsDefiningNameSpaceOfThis=function(h){var l=[];var k;if(h===undefined){k=(this.getIdPattern())._idSpace;if(k===(this.getIdPattern())._idContext){return l}}else{k=h}var e=this.getAllParents(this.stateMode.Tempo);var g=e.length;if(g){if((e[0].getIdPattern())._idContext===k){for(var f=0;f<g;f++){if((e[f].getIdPattern())._idContext!==k){return undefined}l.push(e[f])}}else{var d=0;while(!(l.length)&&(d<g)){l=e[d].getFirstParentsDefiningNameSpaceOfThis(k);d++}}}return l};c.prototype.getParents=function(e,d){var g=undefined;var f=this.getViewData(e);if(f!==undefined){g=f.getParents(d)}return g};c.prototype.getChildrenWithId=function(p,k,d){var g=[];var f=this.getChildren(p,k);if(f){var q=f.length;var n=d.length;if(q==n){g=f;return g}var o=new Map();for(var l=0;l<q;l++){var e=f[l];var m=e.getLocalId().toString();o.set(m,e)}for(var h=0;h<n;h++){var e=o.get(d[h]);if(e){g.push(e)}}}return g};c.prototype.preCommit=function(m){this._nameSpace._errManager.addContext({name:"preCommit","arguments":arguments});if(this._additionalObjects!==undefined){var h=0;var j;var d=this._additionalObjects.length;for(h=0;h<d;h++){j=this._additionalObjects[h];j.preCommit(m)}}var f=this.getViewData(m);if(f!==undefined){var l=f.getParents(c.prototype.stateMode.Tempo);if((!this.isRoot())&&((l===undefined)||(l!==undefined&&l.length==0))){var h=0;var e=f.getChildren(c.prototype.stateMode.Tempo);if(e!==undefined){var g=e.length;var k;for(h=0;h<g;h++){k=e[h];k.removeParent(m,this);k.preCommit(m)}}this.deleteViewData(m)}}this._nameSpace._errManager.cleanContext(arguments)};c.prototype.commit=function(e){this._nameSpace._errManager.addContext({name:"commit","arguments":arguments});if(this._additionalObjects!==undefined){var f=0;var d;var g=this._additionalObjects.length;for(f=0;f<g;f++){d=this._additionalObjects[f];d.commit(e)}}var h=this.getViewData(e);if(h!==undefined){h.commit()}this._nameSpace._errManager.cleanContext(arguments)};c.prototype.abort=function(d){this._nameSpace._errManager.addContext({name:"abort","arguments":arguments});if(this._additionalObjects!==undefined){var e=0;var f=this._additionalObjects.length;for(e=f-1;e>=0;e--){if(this._additionalObjects[e].isTemporary()){this._additionalObjects.splice(e,1)}else{this._additionalObjects[e].abort(d)}}}var g=this.getViewData(d);if(g!==undefined){g.abort()}this._nameSpace._errManager.cleanContext(arguments)};c.prototype.setDualObject=function(e,d){this._dualObj=d||undefined;this._dualViewType=e};c.prototype.getDualObject=function(d){var e=undefined;if(d===this._dualViewType||d===undefined){e=this._dualObj}return e};return c});