define("DS/3DPlayConnectors/3DPlayInputPreProcessor",["UWA/Core","DS/WebUtils/StringUtils","DS/WebSystem/Environment","DS/3DPlaySupport/ExperiencesList","DS/3DPlaySupport/SupportList","DS/WebUtils/ProbesManager","DS/WebUtils/Tracker"],function(b,c,h,f,g,d,e){var a=0;function i(){var k="";var n=["easm","eprt","edrw","easmx","eprtx","edrwx","hwf","sldasm","sldprt","dwg","dxf","slddrw"];var j=function(s,p,r,w){var t,u;if(s!==null&&(s.error===null||s.error===undefined)){var x=function(A){var B;var z=function(C){if(s&&s.tenant){C.tenant=s.tenant}if(s._3DPlayDatas!==undefined&&s._3DPlayDatas!==null){C._3DPlayDatas=s._3DPlayDatas}if(C){var D=null;if(s){D=s.originalAsset||s}if(C.asset){C.asset.originalAsset=D}else{C.originalAsset=D}}B.end();r(C,p,w)};var y=function(C){s.error=C;w(s,p)};B=d.createProbe("Connector:open");B.begin();if((typeof A)==="string"){require([A],function(C){A=g[t][u].connector=new C();A.open(s,z,y)},function(){y({NLS_File:"3DPlay/Core",NLS_ID:"Preproc_REQUIRE_FAIL"})})}else{A.open(s,z,y)}};t=s.provider;var o=g[t];if(o){if(o.connector){x(o.connector);return}else{if(o.resolveParenting){var v=d.createProbe("resolveParenting");v.begin();o.resolveParenting(s,function(z){v.end();if(z!==null&&z!==undefined&&o[z]!==null&&o[z]!==undefined){u=z;var y=o[u].connector;if(y){x(y);return}}w(s,p)});return}else{u=s.type;var q=(o[u])?o[u].connector:undefined;if(q){k=s.provider+"-"+s.type;x(q);return}}}}}w(s,p)};var m=function(t,s,o){var q={error:{NLS_File:"3DPlay/Core",NLS_ID:"BadUrl"}};if(Array.isArray(t)||(typeof t==="function")||t===undefined||t===null){o(q,s);return}else{if((typeof t)==="string"){q={};q.filename=t;q.provider="FILE"}else{if((typeof t)==="object"&&(typeof t.asset)==="object"){q={};q=t.asset}else{if((typeof t)==="object"&&(typeof t.asset)==="string"){q={};q.filename=t.asset;q.provider="FILE"}else{q=t||q}}}}q.provider=(q.provider||"FILE").toUpperCase();if(q.provider==="FILE"){if(q.filename===undefined||q.filename===null){q.error={NLS_File:"3DPlay/Core",NLS_ID:"BadUrl"}}else{if(q.format!==undefined&&q.format!==null&&(typeof q.format)==="string"){q.mimetype=q.format.toLowerCase()}else{var p=c.getExtension(q.filename);if(p===""){q.mimetype="3dxml"}else{q.mimetype=p.toLowerCase()}if(q.url){q.serverurl="";q.filename=q.url}}}q.format=q.mimetype;q.type=q.mimetype}else{if(q.provider==="BUFFER"){if(q.dataFormat===undefined||q.dataFormat===null||q.dataFormat===""||!((typeof q.dataFormat)==="string"||(typeof q.dataFormat)==="svg")){q=null}q.type=q.dataFormat}else{if(q.provider==="EV6"||q.provider==="GEOVIA"||q.provider==="EV5"){if(q.physicalid===undefined||q.physicalid===null||q.physicalid===""||(typeof q.physicalid)!=="string"||q.serverurl===undefined||q.serverurl===null||q.serverurl===""||(typeof q.serverurl)!=="string"){q.error={NLS_File:"3DPlay/Core",NLS_ID:"BadUrl"}}else{if(q.dtype===undefined||q.dtype===null||q.dtype===""||(typeof q.dtype)!=="string"){q.dtype="DeFaUltDtYpE"}}q.type=q.dtype}else{if(q.provider==="DROPBOX"||q.provider==="GOOGLE2"){q={error:{NLS_File:"3DPlay/Core",NLS_ID:"NoSupportExtDriveDnD"}}}}}}var r=(q._3DPlayDatas&&q._3DPlayDatas.externalDrive)||q.provider==="DROPBOX"||q.provider==="GOOGLE2"||q.provider==="ONEDRIVE"||(q.filename&&q.filename.match(/drive\/v1\/onedrive/g)&&q.filename.match(/drive\/v1\/onedrive/g)[0]&&q.filename.match(/drive\/v1\/onedrive/g)[0].slice(-8).toUpperCase())||(q.requestsOptions&&q.requestsOptions.authentication&&q.requestsOptions.authentication.Adapter&&q.requestsOptions.authentication.Adapter.options&&q.requestsOptions.authentication.Adapter.options.provider);if(r!==undefined&&r!==null){q._3DPlayDatas=q._3DPlayDatas||{};q._3DPlayDatas.externalDrive=r}q.type=q.type||q.dataFormat||q.dtype;if(k!==q.provider+"-"+q.type){j(q,s,m,o);return}o(q,s)};var l=function(t,p){var r=[null];if(t!==undefined&&t!==null){if(Array.isArray(t)){if(t.length>0){r=t}}else{r=new Array();r.push(t)}var o=0;var s=function(v,u){r[u]=v;if(++o===r.length){p(r)}};for(var q=0;q<r.length;q++){m(r[q],q,s)}}else{p(r)}};this.run=function(s,r){var p=d.createProbe("PreProcessor/"+a);p.begin();var v=function(w){p.end();a++;r(w)};var q={asset:null};var o=window.localStorage["3DPlay.OverrideSettings"];if(o!==undefined){console.warn("!! 3DPlay OverrideSetting variable environment Active");console.warn("Current inputs :"+JSON.stringify(s));try{o=JSON.parse(o);if(o){console.warn("Found inputs :"+JSON.stringify(o));s=b.extend(s,o.input,true)}}catch(u){console.error("Override failed : JSON.parse error"+u)}console.warn("Resulting inputs :"+JSON.stringify(s))}if(s!==undefined&&s!==null&&b.equals({},s)===false&&(!Array.isArray(s)||s.length>0)){if((typeof s)==="object"&&s.preProcessed===true){q=s}else{var t=function(w){k="";if(w.length===1){q.asset=w[0]}else{q.asset=w}q.preProcessed=true;v(q)};if((typeof s)==="object"&&(s.asset||s.experience||s.usage)){q=s;if(s.asset!==undefined&&s.asset!==null&&b.equals({},s.asset)===false&&(!Array.isArray(s.asset)||s.asset.length>0)){if(Array.isArray(s.asset)){l(s.asset,t)}else{m(s.asset,0,t)}return}else{q.asset=null}}else{l(s,t);return}}}q.preProcessed=true;v(q)}}return i});define("DS/3DPlayConnectors/CAT3DPlayConnector",["UWA/Class"],function(a){return a.extend({init:function(b){this._parent(b)},open:function(b,d,f){console.warn("Use of abstract connector.");try{d(b)}catch(c){console.log(c);f()}}})});define("DS/3DPlayConnectors/SVGConnector",["DS/3DPlayConnectors/CAT3DPlayConnector","DS/WAFData/WAFData","DS/WebSystem/Settings"],function(b,a,f){var h=function(l){var n=new DOMParser();var q=n.parseFromString(l,"application/xml");var p,k;var j=q.getElementsByTagName("svg")[0];for(var m=0;m<j.childNodes.length;m++){var o=j.childNodes[m];if(o.nodeName.toLowerCase()==="model"){p=JSON.parse(o.textContent)}else{if(o.nodeName.toLowerCase()==="annotations"){k=o.textContent}}}if(p&&k){return{modelInfo:p,annotData:k}}else{return null}};var c=function(k){var i=k.filename;var j={method:"GET",authentication:"passport",proxy:"none",timeout:7200000,requestsOptions:{proxy:"none"},onComplete:function(l){var m=h(l);var n;if(m&&f.get("3DPlay.PersistedAnnotationsEnabled")){n=m.modelInfo;n.annotData=m.annotData}else{n={data:l,dataFormat:"svg",provider:"BUFFER"}}e(n)},onCancel:function(l){console.log("Error: "+l);g({NLS_File:"3DPlay/Core",NLS_ID:"LoadingDocumentError"})},onFailure:function(l){console.log("Error: "+l);g({NLS_File:"3DPlay/Core",NLS_ID:"LoadingDocumentError"})}};a.handleRequest(i,j)};var e,g;var d=b.extend({init:function(i){this._parent(i)},open:function(k,j,i){e=j;g=function(l){i(l)};c(k)}});return d});define("DS/3DPlayConnectors/OneDriveConnector",["DS/3DPlayConnectors/CAT3DPlayConnector","DS/WAFData/WAFData","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices"],function(b,a,c){return b.extend({init:function(d){this._parent(d);this.xOneDriveId=null;this.currentDataTitle=null;this.xOneDriveParentUri1="/drive/v1/onedrive/contents/";this.xOneDriveParentUri2="/stream?xrequestedwith=xmlhttprequest";this.monoFileUri=null;this.assemblyUri=null;this.onFailCB=null;this.connectorsOnSuccessCB=null},open:function(e,f,g){var d=this;this.rawAsset=e;this.xOneDriveId=e.physicalid;this.onFailCB=g;this.connectorsOnSuccessCB=f;this._startOneDriveBusinessExpand(e,e.serverurl||false,function(h){d._returnNewOneDriveAsset(h,f)})},_setOneDriveWSUri:function(g,e){var f=e[0].url;var d=g.physicalid;this.metaDataWsUri=f+this.xOneDriveParentUri1+d;this.monoFileUri=f+this.xOneDriveParentUri1+d+this.xOneDriveParentUri2;this.assemblyUri=this.monoFileUri},_getOneDriveServiceURL:function(d,f){var e=this;c.getServiceUrl({serviceName:"driveshub",platformId:d,onComplete:function(g){f(g)},onFailure:function(){e.onFailCB("Error in  OneDriveConnector._getOneDriveServiceURL")}})},_startOneDriveBusinessExpand:function(f,d,g){var e=this;if(d&&UWA.is(d[0].url,"string")){this._setOneDriveWSUri(f,d);this._getPartMetaData(g)}else{this._getOneDriveServiceURL("",function(h){if(UWA.is(h),"string"){e._startOneDriveBusinessExpand(f,h,g)}else{e.onFailCB({NLS_File:"3DPlay/Core",NLS_ID:"LoadingError_LOAD"})}})}},_getPartMetaData:function(){var e=this;var d=this.metaDataWsUri;a.authenticatedRequest(d,{method:"GET",type:"json",onComplete:function(f){e.currentDataTitle=f.title;e._returnNewOneDriveAsset(f)},onFailure:function(f){if(f.message.indexOf("404")!==-1){e.onFailCB({NLS_File:"3DPlay/Core",NLS_ID:"LoadingDocument404"})}else{e.onFailCB({NLS_File:"3DPlay/Core",NLS_ID:"LoadingError_LOAD"})}}})},_returnNewOneDriveAsset:function(f){var e=this.monoFileUri;var g=f.extension;var d={provider:"FILE",filename:e,format:g,type:g,url:e,mimetype:g,requestsOptions:{proxy:"none",method:"GET",authentication:"passport"}};this.connectorsOnSuccessCB(d)},})});define("DS/3DPlayConnectors/FilterConnector",["DS/3DPlayConnectors/CAT3DPlayConnector"],function(a){var b=a.extend({_createProxy:function(){var d=["DS/PADUtils/PADUtilsServices","DS/ENOFilterBIUX/FilterBIComponentProxy"];var c=this;require(d,function(h,e){c._args={widgetId:h.getWidgetId()||"preview",appId:h.getAppId()||"preview"};var g={tenant:h.getPlatformId(),processingMode:"appProcessing",colorize:true,widgetId:c._args.widgetId,appId:c._args.appId};c._biFilter=new e(g);var f={expandServices:"expand",appID:c._args.appId};c._biFilter.setNGFilterOptions(f);c._addFilter(c._asset)})},_addFilter:function(d){var c=this;c._input=d;d.filter_objects=[{contextId:"",displayName:d.displayname,displayType:"",envId:d.tenant,objectId:d.physicalid,objectType:d.type,serviceId:"3DSpace"}];c._biFilter.retrieveFilters({filterObjects:d.filter_objects,callback:function(f){if(f.success.length){c.onComplete({me:c,content:"filters",rootsWithFilters:f.success,callback:function(g){if(d.callback){d.callback()}}});c._args.rootIds=[f.success[0].rootId];c._biFilter.resetNGFilterUI(c._args)}if(f.failure.length){for(var e=0;e<f.failure.length;e++){console.log({msg:f.failure[e].msg,eventID:f.failure[e].eventID});c.onFailure({data:f,me:c})}}}})},onComplete:function(d){var c;c={contextid:d.me._input.contextid,displayname:"",dtype:d.rootsWithFilters[0].rootType,type:d.rootsWithFilters[0].rootType,physicalid:d.rootsWithFilters[0].rootId,provider:d.me._input.provider,requiredAuth:d.me._input.requiredAuth,serverurl:d.me._input.serverurl,tenant:d.me._input.tenant,rootsWithFilters:d.rootsWithFilters};d.me.onConnectorOpenSuccess(c)},onCancel:function(c){console.log("Error: "+c);c.me.onConnectorOpenFail({NLS_File:"3DPlay/Core",NLS_ID:"LoadingDocumentError"})},onFailure:function(c){console.log("Error: "+c);c.me.onConnectorOpenFail({NLS_File:"3DPlay/Core",NLS_ID:"LoadingDocumentError"})},init:function(c){this._parent(c)},open:function(e,d,c){this.onConnectorOpenSuccess=d;this.onConnectorOpenFail=c;this._asset=e;this._createProxy()}});return b});define("DS/3DPlayConnectors/3DSwymConnector",["DS/3DPlayConnectors/CAT3DPlayConnector","DS/WAFData/WAFData","DS/i3DXCompassServices/i3DXCompassServices"],function(b,a,c){return b.extend({init:function(d){this._parent(d);this.x3DSwymMediaId=null;this.x3DSwymURI=null;this.x3DSwymServerToken=null;this.x3DSwymServerTokenUrl="/api/index/tk";this.x3DSwymGetMediaUrl="/api/media/get";this.x3DSearchWakeUpUrl="/3dsearch/cas/BasicUserInfo?_format=json";this.inConnectorMode=true;this.onFailCB=null},open:function(e,f,g){if(e&&e.objectId){var d=e.objectId.lastIndexOf(":");if(d>-1){this.x3DSwymMediaId=e.objectId.substring(d+1)}else{this.x3DSwymMediaId=e.objectId}}this.onFailCB=g;if(e.serverurl&&UWA.is(e.serverurl,"string")){this.x3DSwymURI=e.serverurl;this._getCSRFToken(this.x3DSwymURI,f)}else{this._get3DSwymServiceURL(e.envId,f)}},_get3DSwymServiceURL:function(d,f){var e=this;c.getServiceUrl({serviceName:"3DSwym",platformId:d,onComplete:function(g){e.x3DSwymURI=g;e._getCSRFToken(e.x3DSwymURI,f)},onFailure:function(){e.onFailCB("Unable to retrieve 3DSwym Service URL")}})},_getCSRFToken:function(d,h){var f=d;var g=f+this.x3DSwymServerTokenUrl;var e=this;a.authenticatedRequest(g,{method:"GET",type:"json",onComplete:function(i){if(i&&i.result&&i.result.ServerToken){var j=i.result.ServerToken;e.x3DSwymServerToken=i.result["ServerToken"];e._getMediaInfosAndStreamUri(h)}else{console.error("Services Reach, but Error in return ");e.onFailCB("Unable to retrieve 3DSwym Service URL")}},onFailure:function(i){console.error("Service unReach",i)}})},_getMediaInfosAndStreamUri:function(g){var e=this;var f=this.x3DSwymURI+this.x3DSwymGetMediaUrl;var d=e.x3DSwymMediaId;a.authenticatedRequest(f,{method:"POST",type:"json",data:JSON.stringify({request_id:"0",params:{id_media:d}}),headers:{"Content-Type":"application/json","X-DS-SWYM-CSRFTOKEN":e.x3DSwymServerToken},onComplete:function(i){if(i.errorcode||i.errorcode==""){console.error(i.errorcode,i.errormsg);e.onFailCB("Unable to get Meta Data for this model")}else{var h=i.result;if(e.inConnectorMode){e._wakeUpCallBeforeReturn(h,g)}else{g(h)}}},onFailure:function(h){e.onFailCB("Unable to get Meta Data for this model")}})},_wakeUpCallBeforeReturn:function(d,g){var f=this.x3DSwymURI+this.x3DSearchWakeUpUrl;var e=this;a.authenticatedRequest(f,{method:"GET",type:"json",onComplete:function(h){var i=e.returnSwymNewAsset(d);g(i)},onFailure:function(h){e.onFailCB("Wake up Services unreachable")}})},get3DSwymMetaData:function(f,g,e){this.onFailCB=e;this.inConnectorMode=false;var d=f.data["items"][0];this.x3DSwymMediaId=d.objectId;this._get3DSwymServiceURL(d.envId,g)},returnSwymTransientUrl:function(d){var e=d.play;if(e.hasOwnProperty("3d_streams")&&Array.isArray(e["3d_streams"])){return e["3d_streams"][0]["transient_url"]}else{return e.download_original_url["transient_url_as_attachment"]}},returnSwymAssetInfo:function(h,i){var k;var l;var e=h.play;if(e){if(e.hasOwnProperty("best_streams")){var f=e.best_streams;if(f){var d=e[f];if(Array.isArray(d)&&d.length>0){var j=e[f]["0"];if(j){k=j.format;l=j.transient_url}}}}if(l==null){var g=e.download_original_url;if(g){k=g.format;if(k){l=g.transient_url_as_attachment}}}if(l){i.format=k;i.filename=l;if(k==="3dxml"){i.type=i.format=i.mimetype="XMLV43"}return i}}},returnSwymNewAsset:function(e){var d={provider:"FILE",requestsOptions:{authentication:"passport",proxy:"none"}};var f=this.returnSwymAssetInfo(e,d);return f}})});define("DS/3DPlayConnectors/DrawingConnector",["DS/3DPlayConnectors/CAT3DPlayConnector","DS/WAFData/WAFData","DS/WebUtils/3DPlayState"],function(j,h,f){var i=function(p){var q=null;var n=UWA.is(p,"string")?JSON.parse(p):p;if(n.results.length!==1){console.log("ERROR: Incorrect data received for service.");b({NLS_File:"3DPlay/Core",NLS_ID:"LoadingError_LOAD_ENTRY"});return}if(n.results[0]){var m=false;var l=n.results[0].attributes;for(var o=0;o<l.length;o++){if(l[o].name==="svg"){m=true;if(l[o].value!==undefined&&l[o].value!==null&&l[o].value!==""){q=l[o].value;c(q)}else{k({asset:{data:null,dataFormat:"svg",provider:"BUFFER"}})}break}}if(m===false){console.log("ERROR: SVG attribute not available.");k({asset:{data:null,dataFormat:"svg",provider:"BUFFER"}})}}};var d=function(p){var n;var m=UWA.is(p,"string")?JSON.parse(p):p;if(m.results.length==1&&m.results[0]){var l=m.results[0].attributes;if(l){for(var o=0;o<l.length;++o){if(l[o].name=="udl"){n=l[o].value;break}}}}return n};var c=function(l){if(l){var n={method:"POST",authentication:"passport",proxy:"none"};var o={type:"text",timeout:7200000,cache:3600,onComplete:function(p){k({asset:{data:p,dataFormat:"svg",provider:"BUFFER"}})},onCancel:function(p){console.log("ERROR: WAFData request cancelled while loading SVG file.");b({NLS_File:"3DPlay/Core",NLS_ID:"LoadingError_LOAD_ENTRY"})},onFailure:function(p){console.log("ERROR: WAFData request failed while loading SVG file.");b({NLS_File:"3DPlay/Core",NLS_ID:"LoadingError_LOAD_ENTRY"})}};UWA.merge(o,n);var m=h.handleRequest(l,o)}else{console.log("Invalid URL.");b({NLS_File:"3DPlay/Core",NLS_ID:"BadUrl"})}};var g=function(o){var p=false;var m=UWA.is(o,"string")?JSON.parse(o):o;if(m.results.length==1&&m.results[0]){var l=m.results[0].attributes;if(l){for(var n=0;n<l.length;++n){if(l[n].name=="ds6w:cadMaster"){console.log("ds6w:cadMaster - "+l[n].value);if(l[n].value=="SOLIDWORKS"||l[n].value=="AUTOCAD"){p=true;break}break}}}}return p};var e=function(l){var o={label:"3DPlay_"+Date.now(),physicalid:[l.physicalid],select_file:["svg","udl"],select_predicate:["ds6w:cadMaster","ds6w:type"]};var m=l.serverurl+"/cvservlet/fetch/v2?SecurityContext=preferred";var n={headers:{"Content-Type":"application/json"},method:"POST",type:"json",onComplete:function(p){if(g(p)==true){i(p)}else{var r=d(p);if(r){k({asset:{data:r,dataFormat:"udl",provider:"BUFFER"}})}else{var q=JSON.parse(JSON.stringify(l));q.backup_type=l.type;q.backup_dtype=l.dtype;q.type="V6Drawing";q.dtype="V6Drawing";k({asset:q})}}},onCancel:function(p){console.log("ERROR: WAFData request failed while opening Drawing.");b({NLS_File:"3DPlay/Core",NLS_ID:"LoadingError_LOAD_ENTRY"})},onFailure:function(p){console.log("ERROR: WAFData request failed while opening Drawing.");b({NLS_File:"3DPlay/Core",NLS_ID:"LoadingError_LOAD_ENTRY"})}};if(f.isWebinWin()){n.authentication=l.requiredAuth}n.data=JSON.stringify(o);h.authenticatedRequest(m,n)};var k;var b;var a=j.extend({init:function(l){this._parent(l)},open:function(o,m,l){var n=this;this.preventDoubleCallBack=false;k=m;b=function(p){if(!n.preventDoubleCallBack){n.preventDoubleCallBack=true;l(p)}};e(o)}});return a});define("DS/3DPlayConnectors/3DDriveConnector",["DS/3DPlayConnectors/CAT3DPlayConnector","DS/WAFData/WAFData","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices"],function(b,a,c){return b.extend({init:function(d){this._parent(d);this.x3DDriveId=null;this.currentDataTitle=null;this.x3DDriveParentUri1="/resources/3ddrive/v1/bos/";this.x3DDriveParentUri2="/fileurl?tenant=";this.monoFileUri=null;this.assemblyUri=null;this.onFailCB=null;this.connectorsOnSuccessCB=null},open:function(d,f,g){var e=this;this.rawAsset=d;this.x3DDriveId=d.physicalid;this.x3DriveTenantId=d.tenant;this.onFailCB=g;this.connectorsOnSuccessCB=f;this._start3DDriveBusinessExpand(d,d.serverurl||false,function(h){e._returnNew3DDriveAsset(h,f)})},_set3DDriveWSUri:function(h,e){var g=e;var d=h.physicalid;var f=h.tenant;this.metaDataWsUri=g+this.x3DDriveParentUri1+d+"?tenant="+f;this.monoFileUri=g+this.x3DDriveParentUri1+d+this.x3DDriveParentUri2+f;this.assemblyUri=this.monoFileUri+"&expand=true";this.serviceUri=g},_get3DDriveServiceURL:function(d,f){var e=this;c.getServiceUrl({serviceName:"3DDrive",platformId:d,onComplete:function(g){f(g)},onFailure:function(){e.onFailCB("Error in  3DDriveConnector._get3DDriveServiceURL")}})},_start3DDriveBusinessExpand:function(e,d,g){var f=this;if(d&&UWA.is(d,"string")){this._set3DDriveWSUri(e,d);this._getPartMetaData(g)}else{this._get3DDriveServiceURL(e.tenant,function(h){if(UWA.is(h),"string"){f._start3DDriveBusinessExpand(e,h,g)}else{f.onFailCB({NLS_File:"3DPlay/Core",NLS_ID:"LoadingError_LOAD"})}})}},_getRealAssetUri:function(e){var g=this;var f=this.monoFileUri;var d=false;if(e.extension.toLowerCase()==="catproduct"){f+="&expand=true";d=true}a.authenticatedRequest(f,{method:"GET",type:"json",onComplete:function(h){g._returnNew3DDriveAsset(h,d)},onFailure:function(){g.onFailCB({NLS_File:"3DPlay/Core",NLS_ID:"LoadingError_LOAD"})}})},_getPartMetaData:function(){var e=this;var d=this.metaDataWsUri;a.authenticatedRequest(d,{method:"GET",type:"json",onComplete:function(f){e.currentDataTitle=f.title;e._getRealAssetUri(f)},onFailure:function(f){if(f.message.indexOf("404")!==-1){e.onFailCB({NLS_File:"3DPlay/Core",NLS_ID:"LoadingDocument404"})}else{e.onFailCB({NLS_File:"3DPlay/Core",NLS_ID:"LoadingError_LOAD"})}}})},_returnNew3DDriveAsset:function(g,d){var e=g.url;var h=g.extension;var f={provider:"FILE",filename:e,format:h,type:h,url:e,mimetype:h,requestsOptions:{proxy:"none",method:"GET"},serviceURL:this.serviceUri};if(d){f.format=f.type="CATProduct";f.filename=this.currentDataTitle+".zip";f.mimetype="CATProduct"}this.connectorsOnSuccessCB(f)}})});