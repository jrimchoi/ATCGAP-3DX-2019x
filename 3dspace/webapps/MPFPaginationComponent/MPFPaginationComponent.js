define("DS/MPFPaginationComponent/PaginationComponent",["UWA/Core","UWA/Class/View","DS/MPFModel/MPFCollection","DS/MPFServices/ObjectService","css!DS/MPFPaginationComponent/MPFPaginationComponent.css"],function(h,g,e,d){var f;var c={};var b=5;var a=2;c.CHANGE_PAGE="changePage";f=g.extend({className:"mpf-pagination",tagName:"nav",setup:function(i){i||(i={});d.requiredOfPrototype(this.collection,e,"options.collection must be a MPFCollection");this.pageSize=i.pageSize||20;this.pageCount=this._computePageCount();this.currentPage=i.currentPage||1;this.backArrow=this._createBackArrow();this.nextArrow=this._createNextArrow();this.pages=this._createPages();this._refreshControls();this.listenTo(this.collection,"onReset",this._onCollectionUpdate.bind(this))},render:function(){this.container.setContent(h.createElement("ol",{"class":"mpf-page-selection",html:[this.backArrow,this.pages,this.nextArrow]}));return this},destroy:function(){this.stopListening(this.collection);this.collection=null;this._parent()},_createBackArrow:function(){return h.createElement("li",{"class":"mpf-pagination-item",html:{tag:"a","class":"mpf-link fonticon fonticon-chevron-left"},events:{click:this._goToPreviousPage.bind(this)}})},_goToPreviousPage:function(){var i;i=this.currentPage-1;if(i>0){this.changePage(i)}},_createNextArrow:function(){return h.createElement("li",{"class":"mpf-pagination-item",html:{tag:"a","class":"mpf-link fonticon fonticon-chevron-right"},events:{click:this._goToNextPage.bind(this)}})},_goToNextPage:function(){var i;i=this.currentPage+1;if(i<=this.pageCount){this.changePage(i)}},_createPages:function(){var n;var j=[];var o;var m;var k;var l;o=Math.max(2,this.currentPage-b);m=Math.max(2,this.currentPage-a);k=Math.min(this.pageCount,this.currentPage+b+1);l=Math.min(this.pageCount,this.currentPage+a+1);j.push(this._createPage(1));if(o>2){j.push(this._createEllipsis())}if(m>2){j.push(this._createEllipsis({xsOnly:true}))}for(n=o;n<k;n++){j.push(this._createPage(n))}if(k<this.pageCount){j.push(this._createEllipsis())}if(l<this.pageCount){j.push(this._createEllipsis({xsOnly:true}))}if(this.pageCount>1){j.push(this._createPage(this.pageCount))}return h.createElement("li",{"class":"mpf-pagination-item",html:{tag:"ol","class":"mpf-pages",html:j}})},_createEllipsis:function(i){var j;j=["mpf-pagination-item"];if(i&&i.xsOnly===true){j.push("mpf-visible-xs")}else{j.push("mpf-hidden-xs")}return h.createElement("li",{"class":j.join(" "),text:"\u2026"})},_createPage:function(j){var l;var m;var n;var i;var k;m=["mpf-pagination-item"];n=Math.abs(this.currentPage-j);i=j===1;k=j===this.pageCount;if(!(i)&&!(k)&&(n>a)){m.push("mpf-hidden-xs")}l=h.createElement("li",{"class":m.join(" "),html:[{tag:"a","class":"mpf-link",text:j}],events:{click:this.changePage.bind(this,j)}});l.setData("pageNumber",j);return l},_computePageCount:function(){var i;i=this.collection.getTotalModelCount();return Math.ceil(i/this.pageSize)},changePage:function(j,i){i||(i={});if((j>0)&&(j<=this.pageCount)){this.currentPage=j;if(!(i.silent===true)){this.dispatchEvent(c.CHANGE_PAGE,{page:this.currentPage})}this._refreshControls()}},_refreshControls:function(){this.backArrow.removeClassName("mpf-disabled");this.nextArrow.removeClassName("mpf-disabled");if(this.currentPage===1){this.backArrow.addClassName("mpf-disabled")}if(this.currentPage===this.pageCount){this.nextArrow.addClassName("mpf-disabled")}this._highlightSelectedPage()},_highlightSelectedPage:function(){this.pages.getElements(".mpf-pagination-item").forEach(function(i){if(i.getData("pageNumber")===this.currentPage){i.addClassName("mpf-selected")}else{i.removeClassName("mpf-selected")}},this)},_onCollectionUpdate:function(){this.pageCount=this._computePageCount();this.backArrow=this._createBackArrow();this.nextArrow=this._createNextArrow();this.pages=this._createPages();this._refreshControls();this.render()}});f.Events=Object.freeze(c);return f});