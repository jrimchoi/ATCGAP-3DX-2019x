define("DS/MPFLegalEntityType/LegalEntityType",["UWA/Class","DS/MPFPersonModel/PersonModel","DS/MPFCompanyModel/CompanyModel"],function(c,b,d){var a=c.extend({init:function(e){this.type=e||"unknown"},getType:function(){return this.type}});a.INDIVIDUAL=new a("individual");a.COMPANY=new a("company");a.UNKNOWN=new a("unknown");a.fromModel=function(e){var f;if(d.prototype.isPrototypeOf(e)){f=a.COMPANY}else{if(b.prototype.isPrototypeOf(e)){f=a.INDIVIDUAL}else{f=a.UNKNOWN}}return f};a.fromPerson=function(f){var g;var e;e=f.getBuyerType();if(e==="company"){g=a.COMPANY}else{if(e==="individual"){g=a.INDIVIDUAL}else{g=a.UNKNOWN}}return g};return a});define("DS/MPFLegalEntityType/LegalEntity",["UWA/Class","UWA/Promise","DS/MPFDataProxy/MarketplaceConnector","DS/MPFModelFactory/MPFFactoriesV2","DS/MPFModelFactory/PersonFactory","DS/MPFModelFactory/CompanyFactory","DS/MPFPersonModel/PersonModel","DS/MPFServices/ObjectService","DS/MPFLegalEntityType/LegalEntityType"],function(a,g,c,j,f,b,e,h,d){var i=a.extend({init:function(k){this.model=k.model;this.type=d.fromModel(this.model)},getModel:function(){return this.model},getType:function(){return this.type}});i.fromPerson=function(m){var l;var k;var n;h.requiredOfPrototype(m,e,"person must be a PersonModel");return c.fetchPromise().then(function(o){n=j.getInstance(o);return n.getFactory(j.Types.COMPANY)}).then(function(o){l=m.getCompanyId();if(l){k=o.createModel(b.Types.COMPANY);k.set("id",l);return k.fetchPromise()}else{return g.resolve(m)}}).then(function(o){return new i({model:o})})};i.fromMe=function(){var l;var k;return c.fetchPromise().then(function(m){l=j.getInstance(m);return l.getFactory(j.Types.PERSON)}).then(function(m){k=m.createModel(f.Types.ME);return k.fetchPromise()}).then(function(m){return i.fromPerson(m)})};return i});