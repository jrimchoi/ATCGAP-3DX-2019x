define("DS/VCXWebKernel/VCXModelNavigableActorList",["DS/WebApplicationBase/VCXAModelNavigable"],function(b){var a=b.extend({init:function(){},getChildren:function(){var h=this.QueryInterface("VCXIModifiable");var f=h.GetProperty("Actor.ListActors").GetPropertyValue().GetValue();var g=[];for(var e=0;e<f.length;e++){var c=f[e];var d=this.GetObject()._experienceBase.ComponentsMap.GetComponentFromLink(c);if(d){g.push(d)}}return g},isSelfOrganized:function(){return true}});return a});define("DS/VCXWebKernel/VCXCmdChangeMarker",["DS/CoreEvents/Events","DS/VCXWebKernelCommands/VCXCommand","DS/VCXWebKernelCommands/VCXCmdChangeModifiable","DS/VCXWebKernelCommands/VCXCmdChangeComponent"],function(a,d,c,b){var e=d.extend({init:function(h,f,g){this._parent();this._scenarioManager=h;this._commandManager=f;this._ComponentsMap=g;this._markersToAdd={};this._markerToRemove={};this._scenario=null;this._bLockEvents=false;this._type="VCXCmdChangeMarker"},GetType:function(){return this._type},GetTitle:function(){return"Change markers"},AddMarkerToScenario:function(f,g,h){if(f&&h!=="undefined"){this._markersToAdd[h]=f}this._scenario=g},RemoveMarkerFromScenario:function(f,g){if(f){var h=f.QueryInterface("VCXIModifiable").GetProperty("Actor.TimePos").GetPropertyValue().GetValue();this._markerToRemove[h]=f}this._scenario=g},Do:function(){var k=this;if(this._scenario){}else{console.log("VCXCmdChangeMarker: scenario not found");return}var h=new c(this._scenarioManager);var g=new b(this._commandManager,this._ComponentsMap);for(var j in this._markersToAdd){if(this._markersToAdd.hasOwnProperty(j)){var f=this._markersToAdd[j];g.AddComponents(f);h.AddModifiables(f.QueryInterface("VCXIModifiable"))}}for(var j in this._markerToRemove){if(this._markerToRemove.hasOwnProperty(j)){var f=this._markerToRemove[j];g.RemoveComponents(f);h.RemoveModifiables(f.QueryInterface("VCXIModifiable"))}}this._commandManager.Push(g);this._commandManager.Push(h);for(var j in this._markersToAdd){if(this._markersToAdd.hasOwnProperty(j)){var f=this._markersToAdd[j];k._scenario.AddMarker(j,f);f.SetParentScenario(k._scenario.GetID())}}for(var j in this._markerToRemove){if(this._markerToRemove.hasOwnProperty(j)){k._scenario.RemoveMarker(j)}}if(this._bLockEvents){}else{var i={arrayToAdd:this._markersToAdd,arrayToRemove:this._markerToRemove};a.publish({event:"VCX_MARKERS_CHANGED",data:i})}},Invert:function(){var f=this._markersToAdd;this._markersToAdd=this._markerToRemove;this._markerToRemove=f},SetLockEvents:function(f){this._bLockEvents=f}});return e});define("DS/VCXWebKernel/VCXComponentActorList",["DS/VCXWebExperienceBase/VCXComponentOccurrenceExperience"],function(a){var b=a.extend({init:function(){this._arrayActors=[];this._bEnable=true},SetName:function(c){if(c){this._name=c}},GetName:function(){return this._name},SetArrayActors:function(e){if(Array.isArray(e)&&e.length!==0){for(var c=0;c<e.length;c++){var d=e[c];this.AddActor(d)}}},GetArrayActors:function(){return this._arrayActors},AddActor:function(c){var e=false;for(var d=0;d<this._arrayActors.length;d++){var f=this._arrayActors[d];if(f===c){e=true;break}}if(!e){this._arrayActors.push(c)}},RemoveActor:function(c){for(var d=0;d<this._arrayActors.length;d++){var e=this._arrayActors[d];if(e===c){this._arrayActors.splice(d,1);break}}}});Object.defineProperty(b.prototype,"enable",{enumerable:true,get:function(){return this._bEnable},set:function(c){this._bEnable=c}});Object.defineProperty(b.prototype,"componentType",{enumerable:true,get:function(){return"VCXComponentActorList"}});return b});define("DS/VCXWebKernel/VCXModifiableMarker",["DS/VCXWebModifiables/VCXModifiable","DS/VCXWebProperties/VCXPropertySet","DS/VCXWebProperties/VCXProperty","DS/VCXWebProperties/VCXPropertyInfo","DS/VCXWebProperties/VCXPropertyValueInt","DS/VCXWebProperties/VCXPropertyValueString","DS/VCXWebProperties/VCXPropertyValueBoolean"],function(b,h,c,d,g,a,e){var f=b.extend({init:function(){this._parent()},OnChangeProperty:function(m,j,l){if(!l){l={}}if(l.fromChildClass){}else{if(this.OnChangePropertyBegin(m,j)){return true}}if(m==="Actor.Name"){var k=j.GetValue();if(this.GetObject().name!==k){this.GetObject().name=k}}else{if(m==="Actor.TimePos"){var o=j.GetValue();if(this.GetObject().timePos!==o){this.GetObject().timePos=o}}else{if(m==="Actor.IsMilestone"){var i=j.GetValue();if(this.GetObject().isMileStone!==i){this.GetObject().isMileStone=i}}else{l.fromChildClass=true;var n=this._parent(m,j,l);if(!n){console.log("property not found : '"+m+"'")}return n}}}return true},GetProperty:function(k){var i=null;if(k==="Actor.Name"){var j=this.GetObject().name;if(j){var m=new a();m.SetValue(j);i=new c(new d(k,2,true,"VCXWebModifiables/VCXWebModifiables"),m)}}else{if(k==="Actor.TimePos"){var p=this.GetObject().timePos;if(p!==null){var l=new g();l.SetValue(p);i=new c(new d(k,0,true,"VCXWebModifiables/VCXWebModifiables"),l)}}else{if(k==="Actor.IsMilestone"){var o=this.GetObject().isMileStone;if(o!==null){var n=new e();n.SetValue(o);i=new c(new d(k,0,true,"VCXWebModifiables/VCXWebModifiables"),n)}}}}return i},GetProperties:function(){var i=new h();i.AddOrModifyProperty(this.GetProperty("Actor.TimePos"));i.AddOrModifyProperty(this.GetProperty("Actor.Name"));i.AddOrModifyProperty(this.GetProperty("Actor.IsMilestone"));return i}});return f});define("DS/VCXWebKernel/VCXCmdChangeSelection",["DS/CoreEvents/Events","DS/VCXWebKernelCommands/VCXCommand"],function(b,e){var d=3;var a={AddToSelection:d,RemoveFromSelection:d,SetSelection:d,SetModifiablesSelection:d};var c=e.extend({init:function(g,f){this._DoNotUpdateCSO=false;if(f){this._DoNotUpdateCSO=true}this._parent();this._compToAdd=[];this._compToRemove=[];this._selectionManager=g;this._bLockEvents=false;this._type="VCXCmdChangeSelection"},_sendWarningIfNecessary:function(g,f){if(a[f]>0){console.warn(g);--a[f]}},GetType:function(){return this._type},GetTitle:function(){return"Change selection"},Do:function(){this._selectionManager.addComponentsToSelection(this._compToAdd,this._DoNotUpdateCSO);this._selectionManager.removeComponentsFromSelection(this._compToRemove,this._DoNotUpdateCSO);if(this._bLockEvents){}else{b.publish({event:"VCX_SELECTION_CHANGED"})}},Redo:function(){this._selectionManager.addComponentsToSelection(this._compToAdd,this._DoNotUpdateCSO);this._selectionManager.removeComponentsFromSelection(this._compToRemove,this._DoNotUpdateCSO);if(this._bLockEvents){}else{b.publish({event:"VCX_SELECTION_CHANGED"})}},Invert:function(){var f=this._compToAdd;this._compToAdd=this._compToRemove;this._compToRemove=f},SaveContext:function(){},AddComponentsToSelection:function(f){if(!f){return false}this._compToAdd=this._compToAdd.concat(f)},AddToSelection:function(f){if(f.QueryInterface("VCXIModifiable")===f){var g="The method 'AddToSelection' used with a modifiable as parameter is now deprecated. Please use a component instead of a modifiable.";this._sendWarningIfNecessary(g,"AddToSelection");f=f.GetObject()}this._compToAdd.push(f)},RemoveComponentsFromSelection:function(f){if(!f){return false}this._compToRemove=this._compToRemove.concat(f)},RemoveFromSelection:function(f){if(f.QueryInterface("VCXIModifiable")===f){var g="The method 'RemoveFromSelection' used with a modifiable as parameter is now deprecated. Please use a component instead of a modifiable.";this._sendWarningIfNecessary(g,"RemoveFromSelection");f=f.GetObject()}this._compToRemove.push(f)},SetSelection:function(g){if(g&&g.QueryInterface("VCXIModifiable")===g){var l="The method 'SetSelection' used with a modifiable as parameter is now deprecated. Please use a component instead of a modifiable.";this._sendWarningIfNecessary(l,"SetSelection");g=g.GetObject()}var j=this._selectionManager.GetComponentsFromCurrentSelection();if(!g){this.RemoveComponentsFromSelection(j)}else{var k=false;var m="";m=g.GetID();if(!m){console.log("VCXCmdChangeSelection: id is not defined for this component !")}for(var h=0;h<j.length;h++){var f=j[h].GetID();if(f){if(f!==m){this.RemoveFromSelection(j[h])}else{k=true}}else{console.log("VCXCmdChangeSelection: currentId is empty !")}}if(!k&&m){this.AddToSelection(g)}}},SetComponentsSelection:function(j){var f=this._selectionManager.GetComponentsFromCurrentSelection();for(var i=0;i<f.length;i++){var l=f[i];if(!l){continue}var h=false;for(var g=0;g<j.length;g++){var k=j[g];if(!k){continue}if(k===l){h=true;break}}if(!h){this.RemoveFromSelection(l)}}this.AddComponentsToSelection(j)},SetModifiablesSelection:function(g){var i="/!\\ The method SetModifiablesSelection(arrModifiables) is DEPRECATED /!\\\nPlease use method cmdChangeSelection.SetComponentsSelection(arrComponents) instead.";this._sendWarningIfNecessary(i,"SetModifiablesSelection");var h=g.map(function f(j){return j.GetObject()});this.SetComponentsSelection(h)},SetLockEvents:function(f){this._bLockEvents=f}});return c});define("DS/VCXWebKernel/VCXMarkerManager",["UWA/Core","DS/WebApplicationBase/W3AAManager","DS/CoreEvents/Events"],function(d,c,a){var b=c.extend({initialize:function(){this._callback=null;var e=this;this._tokenMarkerSeq=a.subscribe({event:"VCX_UPDATE_MARKER_SEQ"},function(f){e.UpdateMarkerSequence(f)})},unInitialize:function(){this._callback=null;if(this._tokenMarkerSeq){a.unsubscribe(this._tokenMarkerSeq);this._tokenMarkerSeq=null}},UpdateMarkerSequence:function(j){if(this._callback){}else{return}var k=j.scenarioID;var l=this._experienceBase.ComponentsMap.GetComponentFromID(k);if(!l){return}var g=l.GetTrackMarkers();if(g){var m=g.GetPreviousKey(j.time);if(m){var n=m.GetValue();var i=l.GetCurrentMarkerSequence();if(i!==n){l.SetCurrentMarkerSequence(n);if(this._callback){var o=this._experienceBase.ComponentsMap.GetComponentFromID(n);if(o){var h=o.GetTimePos();var e=o.GetName();var f=o.IsMilestone();this._callback(e,h,f,k,n)}}}}}},RegisterMarkerSequenceCB:function(e){this._callback=e}});Object.defineProperty(b.prototype,"componentType",{enumerable:true,get:function(){return"VCXMarkerManager"}});return b});define("DS/VCXWebKernel/VCXMultiUserInputManager",["DS/WebApplicationBase/W3AAManager",],function(b){var a=b.extend({postInitialize:function(){this._parent();this._runningCommand=[]},unInitialize:function(){this._parent()},update:function(d){for(var c=0;c<this._runningCommand.length;c++){if(this._runningCommand[c].update){this._runningCommand[c].update(d)}}},preRender:function(d){for(var c=0;c<this._runningCommand.length;c++){if(this._runningCommand[c].preRender){this._runningCommand[c].preRender(d)}}},postRender:function(d){for(var c=0;c<this._runningCommand.length;c++){if(this._runningCommand[c].postRender){this._runningCommand[c].postRender(d)}}},postUpdate:function(d){for(var c=0;c<this._runningCommand.length;c++){if(this._runningCommand[c].postUpdate){this._runningCommand[c].postUpdate(d)}}},registerCommand:function(c){this._runningCommand.push(c)},unRegisterCommand:function(c){this._runningCommand.pop(c)},});Object.defineProperty(a.prototype,"componentType",{enumerable:true,get:function(){return"VCXMultiUserInputManager"}});return a});define("DS/VCXWebKernel/VCXCmdGoToMarker",["DS/CoreEvents/Events","DS/VCXWebKernelCommands/VCXCommand","DS/VCXWebKernelCommands/VCXCmdChangeTimePos","DS/VCXWebKernelCommands/VCXCmdGoToScenario","DS/WebRBTree/WebRBIterator"],function(a,f,c,e,b){var d=f.extend({init:function(i,g,h){this._parent();this._scenarioManager=i;this._commandManager=g;this._ComponentsMap=h;this._bLockEvents=false;this._targetMarker=null;this._frameForDo=null;this._frameForUndo=null;this._type="VCXCmdGoToMarker"},GetType:function(){return this._type},GetTitle:function(){return"Go to markers"},GoToMarker:function(g){this._targetMarker=this._ComponentsMap.GetComponentFromID(g);if(this._targetMarker){this._frameForDo=this._targetMarker.QueryInterface("VCXIModifiable").GetProperty("Actor.TimePos").GetPropertyValue().GetValue()}},GoToNextMarker:function(){var k=this._scenarioManager.GetCurrentFrame();var n=this._scenarioManager.GetCurrentScenario();var j=this._ComponentsMap.GetComponentFromID(n);var h=j.GetTrackMarkers();var i=false;if(h){var g=h.GetNextStrictKey(k);if(g!==null){var m=g.GetValue();var l=g.GetFrame();this._targetMarker=this._ComponentsMap.GetComponentFromID(m);this._frameForDo=l;i=true}}if(i){}else{this._frameForDo=j.GetMaxFrame()}},GoToPreviousMarker:function(){var l=this._scenarioManager.GetCurrentFrame();var n=this._scenarioManager.GetCurrentScenario();var k=this._ComponentsMap.GetComponentFromID(n);var h=k.GetTrackMarkers();var j=false;if(h){var i=h.GetPreviousStrictKey(l);if(i!==null){var g=i.GetValue();var m=i.GetFrame();this._targetMarker=this._ComponentsMap.GetComponentFromID(g);this._frameForDo=m;j=true}}if(j){}else{this._frameForDo=0}},Do:function(){if(this._targetMarker){var i=this._targetMarker.GetParentScenario();var k=this._scenarioManager.GetCurrentScenario();if(i!==k){var h=new e(this._scenarioManager,this._commandManager);h.GoToScenario(i);this._commandManager.Push(h)}}var g=new c(this._scenarioManager);g.ChangeTimePos(this._frameForDo);this._commandManager.Push(g);var j=this;if(this._bLockEvents){}else{a.publish({event:"VCX_GOTO_MARKER",data:j._frameForDo})}if(this._callback){this._callback(this._parameter)}},SaveContext:function(){this._frameForUndo=this._scenarioManager.GetCurrentFrame()},Redo:function(){var g=this;if(this._bLockEvents){}else{a.publish({event:"VCX_GOTO_MARKER",data:g._frameForDo})}},Undo:function(){var g=this;if(this._bLockEvents){}else{a.publish({event:"VCX_GOTO_MARKER",data:g._frameForUndo})}},Invert:function(){},SetLockEvents:function(g){this._bLockEvents=g}});return d});define("DS/VCXWebKernel/VCXDRMManager",["DS/Core/Core","DS/WebApplicationBase/W3AAManager",],function(a,c){var b=c.extend({init:function(){},initialize:function(){this._bDisplayWatermark=false;this._bDisplaySignature=false;this._bValidSignature=true;this._bDisplayTree=true;this._bValidDate=true},SetDisplayWatermark:function(d){this._bDisplayWatermark=d},GetDisplayWatermark:function(){return this._bDisplayWatermark},SetDisplaySignature:function(d){this._bDisplaySignature=d},GetDisplaySignature:function(){return this._bDisplaySignature},SetValidSignature:function(d){this._bValidSignature=d},GetValidSignature:function(){return this._bValidSignature},SetDisplayTree:function(d){this._bDisplayTree=d},GetDisplayTree:function(){return this._bDisplayTree},SetValidDate:function(d){this._bValidDate=d},GetValidDate:function(){return this._bValidDate},GetType:function(){return"VCXDRMManager"}});b.LitSignatureMode={LIT_SIGNATURE_DISPLAY_AND_BLOCK:0,LIT_SIGNATURE_DISPLAY_AND_PASS:1,LIT_SIGNATURE_NO_DISPLAY:2};return b});define("DS/VCXWebKernel/VCXModifiableActorList",["DS/VCXWebExperienceBase/VCXModifiableOccurrenceExperience","DS/VCXWebProperties/VCXPropertySet","DS/VCXWebProperties/VCXProperty","DS/VCXWebProperties/VCXPropertyInfo","DS/VCXWebProperties/VCXPropertyValueBoolean","DS/VCXWebProperties/VCXPropertyValueLink","DS/VCXWebProperties/VCXPropertyValueList"],function(d,h,c,e,f,a,b){var g=d.extend({init:function(){this._parent()},OnChangeProperty:function(m,l,s){if(!s){s={}}if(s.fromChildClass){}else{if(this.OnChangePropertyBegin(m,l)){return true}}var p=l.GetValue();if(m==="Actor.Enable"){if(this.GetObject().enable!==p){this.GetObject().enable=p}}else{if(m==="Actor.ListActors"){var j=[];var o=l.GetValue();for(var n=0;n<o.length;n++){var r=o[n];var k=r.GetValue();this.GetObject().AddActor(k)}}else{if(m==="Actor.GroupID"){this.GetObject()._groupID=l.GetValue()}else{s.fromChildClass=true;var q=this._parent(m,l,s);if(!q){console.log("property not found : '"+m+"'")}return q}}}return true},GetProperty:function(m){var o=null;if(m==="Actor.Enable"){var j=new f();j.SetValue(this.GetObject().enable);o=new c(new e(m,2,true,"VCXWebModifiables/VCXWebModifiables"),j)}else{if(m==="Actor.ListActors"){var s=new b();var q=this.GetObject().GetArrayActors();if(q){for(var n=0;n<q.length;n++){var l=q[n];var t=new a();t.SetValue(l);s.PushPropertyValue(t)}}var p=new e(m,2,true,"VCXWebModifiables/VCXWebModifiables");p.SetVisible(false);o=new c(p,s)}else{if(m==="Actor.GroupID"){var k=new a();var r=this.GetObject()._groupID;if(r){k.SetValue(r)}var p=new e(m,0,true,"VCXWebModifiables/VCXWebModifiables");p.SetVisible(false);o=new c(p,k)}else{o=this._parent(m)}}}return o},GetProperties:function(){var i=new h();i.AddOrModifyProperty(this.GetProperty("Actor.Name"));i.AddOrModifyProperty(this.GetProperty("Actor.Color"));i.AddOrModifyProperty(this.GetProperty("Actor.Enable"));i.AddOrModifyProperty(this.GetProperty("Actor.ToolTip"));i.AddOrModifyProperty(this.GetProperty("Actor.Hyperlink"));i.AddOrModifyProperty(this.GetProperty("Actor.ListActors"));return i}});return g});define("DS/VCXWebKernel/VCXComponentMarker",["UWA/Class"],function(a){var b=a.extend({init:function(){this._parentScenarioID="";this._timePos=null;this._isMileStone=false;this._name=null},GetType:function(){return this.componentType},SetName:function(c){if(this.name!==c){this.name=c}},GetName:function(){return this.name},GetTimePos:function(){return this.timePos},IsMilestone:function(){return this.isMileStone},SetParentScenario:function(c){this._parentScenarioID=c},GetParentScenario:function(){return this._parentScenarioID},});Object.defineProperty(b.prototype,"name",{enumerable:true,get:function(){return this._name},set:function(c){if(this._name!==c){this._name=c}}});Object.defineProperty(b.prototype,"timePos",{enumerable:true,get:function(){return this._timePos},set:function(c){this._timePos=c}});Object.defineProperty(b.prototype,"isMileStone",{enumerable:true,get:function(){return this._isMileStone},set:function(c){this._isMileStone=c}});Object.defineProperty(b.prototype,"componentType",{enumerable:true,get:function(){return"VCXComponentMarker"}});return b});define("DS/VCXWebKernel/VCXActorDocManager",["UWA/Class","DS/VCXWebKernelTools/VCXFileServices"],function(b,a){var c=b.extend({init:function(){this._mapDataB64=[]},Build:function(){var d=this._experienceBase.getManager("VCXDocManager");d.actorDocManager=this},GetType:function(){return this.componentType},RemoveDocument:function(d){delete this._mapDataB64[d]},AddDocToBase64Map:function(g,f,e){if(typeof e!=="undefined"){this._mapDataB64[g]=e;return}var j=this;var i=function(k,l){if(k){j._mapDataB64[l]=k}};var h=f.GetValueURL().GetValue();var d=f.GetFileName().GetValue();a.BlobURLToBase64(h,d,i,g)}});Object.defineProperty(c.prototype,"componentType",{enumerable:true,get:function(){return"VCXActorDocManager"}});return c});define("DS/VCXWebKernel/ExpTrackManager_Spec",["UWA/Class"],function(b){var a=b.extend({init:function(){},GetType:function(){return this.componentType}});Object.defineProperty(a.prototype,"componentType",{enumerable:true,get:function(){return"ExpTrackManager_Spec"}});return a});define("DS/VCXWebKernel/VCXModifiableActorDocManager",["UWA/Core","DS/VCXWebModifiables/VCXModifiable","DS/VCXWebProperties/VCXProperty","DS/VCXWebProperties/VCXPropertyInfo","DS/VCXWebProperties/VCXPropertySet","DS/VCXWebProperties/VCXPropertyValueMap","DS/VCXWebProperties/VCXPropertyValueBin","DS/VCXWebProperties/VCXPropertyValueInt","DS/VCXWebProperties/VCXPropertyValueString","DS/VCXWebProperties/VCXPropertyValuePath","DS/VCXWebProperties/VCXPropertyValueBoolean","DS/VCXWebProperties/VCXPropertyValueDocId","DS/VCXWebKernelTools/VCXFileServices"],function(e,c,j,h,g,f,d,l,m,n,a,i,b){var k=c.extend({init:function(){this._parent()},OnChangeProperty:function(s,r,B){if(B){}else{B={}}if(B.fromChildClass){}else{if(this.OnChangePropertyBegin(s,r)){return true}}switch(s){case"DocManager.defaultIndex":var y=this.GetObject()._experienceBase.getManager("VCXDocManager");y.SetDefaultImageIndex(r.GetValue());break;case"DocManager.documents":var y=this.GetObject()._experienceBase.getManager("VCXDocManager");if(r instanceof f){for(var t=0;t<r._value.length;t++){var p=r._value[t];if(p){var w=new n();if(p.GetValueAtIndex(0)){w.SetPathType(p.GetValueAtIndex(0))}if(p.GetValueAtIndex(2)){w.SetFileName(p.GetValueAtIndex(2))}if(p.GetValueAtIndex(3)){w.SetValueLink(p.GetValueAtIndex(3))}var z=new a();z.SetValue(true);w.SetValueBool(z);if(p.GetValueAtIndex(4)){w.SetDocIdParent(p.GetValueAtIndex(4))}var x=p.GetValueAtIndex(1);w.SetValueURL(x);var q=p.GetValueAtIndex(5);if(q){var u="data:"+x.GetValue()+";base64,"+q.GetValue();var o=b.dataURLToBlob(u);var v=window.URL.createObjectURL(o);var A=new m();A.SetValue(v);console.log("-------- DOC blobURL ="+v+"\n");w.SetValueURL(A);y.actorDocManager._mapDataB64[t]=u}else{}y._map[t]=w}}}default:B.fromChildClass=true;return this._parent(s,r,B)}return true},OnChangePropertiesEnd:function(){},GetProperty:function(C){var w=null;if(C==="DocManager.defaultIndex"){var A=new l();var t=this.GetObject()._experienceBase.getManager("VCXDocManager");A.SetValue(t.GetDefaultImageIndex());w=new j(new h(C,h.EBehaviorType.Singleton),A)}else{if(C==="DocManager.documents"){var t=this.GetObject()._experienceBase.getManager("VCXDocManager");var z=new f();var p=t.NumberOfDoc();for(var u=0;u<p;u++){var r=t.GetPropPath(u);if(r){var D=r.GetValueBool().GetValue();if(D){var E=new f();E.SetValueAtIndex(0,r.GetPathType());E.SetValueAtIndex(2,r.GetFileName());E.SetValueAtIndex(3,r.GetValueLink());E.SetValueAtIndex(4,r.GetDocIdParent());var F=r.GetValueURL().GetValue();if(F.indexOf("blob:")>=0){var s=t.actorDocManager._mapDataB64[u];if(s){var x=";base64,";var y=s.split(x);var B=y[0].split(":")[1];var o=new d();o.SetValue(y[1]);E.SetValueAtIndex(5,o);var q=new m();q.SetValue(B);E.SetValueAtIndex(1,q)}else{console.log("docmanager : BAD base64 cache !!")}}else{E.SetValueAtIndex(1,r.GetValueURL())}z.SetValueAtIndex(u,E)}}}var v=new h(C,h.EBehaviorType.Singleton,true,"VCXWebModifiables/VCXWebModifiables");v.SetVisible(false);w=new j(v,z)}else{w=this._parent(C)}}return w},GetProperties:function(){var o=this._parent();o.AddOrModifyProperty(this.GetProperty("DocManager.documents"));o.AddOrModifyProperty(this.GetProperty("DocManager.defaultIndex"));return o}});return k});define("DS/VCXWebKernel/VCXModifiableSelectionManager",["UWA/Core","DS/VCXWebModifiables/VCXModifiable","DS/VCXWebProperties/VCXPropertySet","DS/VCXWebProperties/VCXProperty","DS/VCXWebProperties/VCXPropertyInfo","DS/VCXWebProperties/VCXPropertyValueMap","DS/VCXWebProperties/VCXPropertyValueLink"],function(h,b,g,c,f,d,a){var e=b.extend({init:function(){this._parent()},GetListSelection:function(){return this.GetObject().GetComponentsFromSelection("CSO")},GetProperty:function(n){var q=null;if(n==="SelectionManager.ListCSO"){var j=this.GetListSelection();var p=[];for(var o=0;o<j.length;o++){var s=j[o];var l=s.GetID();p.push(l)}var m=new d();var r=0;p.sort();for(var o=0;o<p.length;o++){var l=p[o];var k=new a();k.SetValue(l);m.SetValueAtIndex(r,k);r++}q=new c(new f(n,2),m)}return q},GetProperties:function(){var i=new g();i.AddOrModifyProperty(this.GetProperty("SelectionManager.ListCSO"));return i}});return e});define("DS/VCXWebKernel/VCXModifiableHotspot",["DS/VCXWebKernel/VCXModifiableActorList","DS/VCXWebProperties/VCXPropertySet","DS/VCXWebProperties/VCXProperty","DS/VCXWebProperties/VCXPropertyInfo","DS/VCXWebProperties/VCXPropertyValueString","DS/VCXWebProperties/VCXPropertyValueHyperlinkId","DS/VCXWebProperties/VCXPropertyValueBoolean","DS/VCXWebProperties/VCXPropertyValueColor","DS/VCXWebProperties/VCXPropertyValueList"],function(c,d,g,e,i,b,a,j,f){var h=c.extend({init:function(){this._parent()},OnChangeProperty:function(m,k,l){if(!l){l={}}if(l.fromChildClass){}else{if(this.OnChangePropertyBegin(m,k)){return true}}if(m==="highlight.color"){this.GetObject().highlight=k.GetValue()[0]}else{l.fromChildClass=true;var n=this._parent(m,k,l);if(!n){console.log("property not found : '"+m+"'")}return n}return true},GetProperty:function(o){var l=null;if(o==="highlight.color"){if(this.GetObject().highlight){var m=new j();var n=this.GetObject().highlight.getColorHighlight();if(n){m.GetValue().SetThreeColor(n.color)}var k=new e(o,2,true,"VCXWebModifiables/VCXWebModifiables");l=new g(k,m)}}else{if(o==="highlight.color.actors"){}else{l=this._parent(o)}}return l},GetProperties:function(){var k=this._parent();if(this.GetObject()._experienceBase.odt){k.AddOrModifyProperty(this.GetProperty("highlight.color"));k.AddOrModifyProperty(this.GetProperty("highlight.color.actors"))}return k}});return h});define("DS/VCXWebKernel/VCXComponentGroupHotspot",["DS/VCXWebKernel/VCXComponentActorList"],function(b){var a=b.extend({init:function(){this._parent();this._bEnable=false},Build:function(){this.QueryInterface("VCXISelectBehavior").SetSelectMode(1)}});Object.defineProperty(a.prototype,"componentType",{enumerable:true,get:function(){return"VCXComponentGroupHotspot"}});return a});define("DS/VCXWebKernel/VCXAPIManager",["UWA/Core","DS/CoreEvents/Events","DS/WebApplicationBase/W3AAManager","DS/VCXWebKernel/VCXCmdChangeSelection","DS/VCXWebKernelCommands/VCXCmdChangeTimePos","DS/VCXWebKernel/VCXCmdGoToMarker"],function(g,a,f,b,c,e){var d=f.extend({initialize:function(){},unInitialize:function(){},GoToScenario:function(h,i){if(h){}else{return}if(this._experienceBase.getManager("VCXGUIManager").GoToScenarioContext()){this._experienceBase.getManager("VCXExperience").GoToScenarioWithInterpolation(h,i)}},HasAnimation:function(i){var h=this._experienceBase.ComponentsMap.GetComponentFromID(i);if(h){return h.HasAnimation()}else{console.log("APIManager:: HasAnimation. Scenario not found.")}},PlayAnimation:function(l){var o=this;var m=this._experienceBase.getManager("VCXScenarioManager");var i=m.GetCurrentScenario();if(l){if(l===i&&this._experienceBase.getManager("VCXScenarioManager").GetIsPlayingCurrentScenario()){return}}else{l=i}var j=this._experienceBase.ComponentsMap.GetComponentFromID(l);if(j){}else{console.log("VCXAPIManager : NO scenario for PlayAnimation")}var h=function(){if(j.HasAnimation()){a.publish({event:"VCX_START_PLAY",});var p=o._experienceBase.getManager("VCXContextManager");if(p){if(p.getUrlVars().boost=="0"){}else{j.BuildAnimatedModifiablesSets(m._keyframer)}}m.SetIsPlayingCurrentScenario(true)}};var n=function(){var p=m.GetCurrentScenario();if(p!==l){o.GoToScenario(l,h)}else{h()}};var k=this._experienceBase.getManager("VCXExperience").GetPreviewMode();if(k&&this._experienceBase.getManager("VCXPulseManager")){this._experienceBase.getManager("VCXPulseManager").StopPulse(n)}else{n()}},PauseAnimation:function(){var i=this._experienceBase.getManager("VCXScenarioManager");var h=i.GetIsPlayingCurrentScenario();if(h){i.SetIsPlayingCurrentScenario(false);a.publish({event:"VCX_PAUSE_PLAY"})}},StopAnimation:function(){var m=this._experienceBase.getManager("VCXScenarioManager");var l=m.GetIsPlayingCurrentScenario();if(l){var i=m.GetCurrentScenario();var j=this._experienceBase.ComponentsMap.GetComponentFromID(i);var k=j.GetCurrentFrame();var h=new c(this._experienceBase.getManager("VCXScenarioManager"));h.ChangeTimePos(0,k);this._experienceBase.getManager("VCXCommandManager").Push(h);m.SetIsPlayingCurrentScenario(false);a.publish({event:"VCX_STOP_PLAY"})}},GetAnimationTime:function(){var h=this._experienceBase.getManager("VCXScenarioManager").GetCurrentTime();console.log("API GetAnimationTime : "+h);return h},GoToMarker:function(j,l){var k=this;var h=this._experienceBase.ComponentsMap.GetComponentFromID(j);if(h){}else{return}var i=new e(k._experienceBase.getManager("VCXScenarioManager"),k._experienceBase.getManager("VCXCommandManager"),k._experienceBase.ComponentsMap);i.GoToMarker(j);i.SetCallback(l);k._experienceBase.getManager("VCXCommandManager").Push(i)},ActivateSelectionSet:function(j){var i=this._experienceBase.ComponentsMap.GetComponentFromID(j);if(i){var h=new b(this._experienceBase.getManager("VCXSelectionManager"));h.AddToSelection(i);this._experienceBase.getManager("VCXCommandManager").Do(h)}else{console.log("Component selection set not found.")}},DeactivateSelectionSet:function(j){var i=this._experienceBase.ComponentsMap.GetComponentFromID(j);if(i){var h=new b(this._experienceBase.getManager("VCXSelectionManager"));h.RemoveFromSelection(i);this._experienceBase.getManager("VCXCommandManager").Do(h)}else{console.log("Component selection set not found.")}},ActivateHotspotOnClick:function(h){this.ActivateHyperlink(h)},ActivateHyperlink:function(j,k){var i=this._experienceBase.ComponentsMap.GetComponentFromID(j);if(i){var h=i.QueryInterface("VCXIModifiable");this._experienceBase.getManager("VCXHyperlinkManager").OpenHyperlink(h,k)}else{console.log("Component not found.")}},SelectHotspot:function(i){var h=this._experienceBase.ComponentsMap.GetComponentFromID(i);if(h){this._experienceBase.getManager("VCXHotspotManager").ActivateHotspotFromTree(h);this._experienceBase.getManager("VCXContextManager").renderAll()}else{console.log("Component hotspot not found.")}},DeselectHotspot:function(i){var h=this._experienceBase.ComponentsMap.GetComponentFromID(i);if(h){this._experienceBase.getManager("VCXHotspotManager").DeactivateHotspotFromTree(h);this._experienceBase.getManager("VCXContextManager").renderAll()}else{console.log("Component hotspot not found.")}},RegisterMarkerSequenceCB:function(h){this._experienceBase.getManager("VCXMarkerManager").RegisterMarkerSequenceCB(h)}});Object.defineProperty(d.prototype,"componentType",{enumerable:true,get:function(){return"VCXAPIManager"}});return d});define("DS/VCXWebKernel/VCXComponentGroupSelectionSet",["DS/VCXWebKernel/VCXComponentActorList"],function(b){var a=b.extend({init:function(){this._parent()},Build:function(){this.QueryInterface("VCXISelectBehavior").SetSelectMode(1)},AddActor:function(c){this._parent(c)}});Object.defineProperty(a.prototype,"componentType",{enumerable:true,get:function(){return"VCXComponentGroupSelectionSet"}});return a});define("DS/VCXWebKernel/VCXComponentSelectionSet",["DS/VCXWebKernel/VCXComponentActorList"],function(b){var a=b.extend({init:function(){this._parent()},Build:function(){this.QueryInterface("VCXISelectBehavior").SetSelectMode(1)}});Object.defineProperty(a.prototype,"componentType",{enumerable:true,get:function(){return"VCXComponentSelectionSet"}});return a});define("DS/VCXWebKernel/VCXModifiableSelectionSet",["DS/VCXWebKernel/VCXModifiableActorList","DS/VCXWebProperties/VCXPropertySet",],function(c,b){var a=c.extend({init:function(){this._parent()},GetProperties:function(){var d=new b();d.AddOrModifyProperty(this.GetProperty("Actor.ListActors"));return d}});return a});define("DS/VCXWebKernel/VCXModifiableGroupActorList",["DS/VCXWebKernel/VCXModifiableActorList","DS/VCXWebProperties/VCXPropertySet",],function(c,b){var a=c.extend({init:function(){this._parent()},GetProperties:function(){var d=new b();d.AddOrModifyProperty(this.GetProperty("Actor.ListActors"));return d}});return a});define("DS/VCXWebKernel/VCXComponentHotspot",["DS/VCXWebKernel/VCXComponentActorList"],function(a){var b=a.extend({init:function(){this._parent();this._highlight=null;this._alpha=null},AddActor:function(d){var f=false;for(var e=0;e<this._arrayActors.length;e++){var g=this._arrayActors[e];if(g===d){f=true;break}}if(!f){this._arrayActors.push(d);var c=this._experienceBase.getManager("VCXHotspotManager");if(c){c.addComponentToMapPrehighlight(d,this)}}},RemoveActor:function(c){for(var d=0;d<this._arrayActors.length;d++){var e=this._arrayActors[d];if(e===c){this._arrayActors.splice(d,1);break}}}});Object.defineProperty(b.prototype,"highlight",{enumerable:true,get:function(){return this._highlight},set:function(c){this._highlight=c}});Object.defineProperty(b.prototype,"componentType",{enumerable:true,get:function(){return"VCXComponentHotspot"}});return b});define("DS/VCXWebKernel/VCXSelectManager",["DS/Core/Core","DS/CoreEvents/Events","DS/VCXWebKernel/VCXCmdChangeSelection","DS/VCXWebModifiablesServices/VCXModifiablesAccess","DS/WebApplicationBase/W3AAManager",],function(e,a,c,f,g){var b={add:"onAdd",postAdd:"onPostAdd",remove:"onRemove",postRemove:"onPostRemove",preEmpty:"onPreEmpty",empty:"onEmpty"};Object.freeze(b);var d=g.extend({postInitialize:function(){this._subscribeEvents();this._bPreviewMode=this._experienceBase.getManager("VCXExperience").GetPreviewMode();this._excludedFromXSOHyperlinksPathes=[];this._componentsToAdd=[];this._componentsToRemove=[];this.blockedCBFlags={SELECTION:1,HIGHLIGHT:2,PREHIGHLIGHT:4};this.blockedCBEvents={add:0,postAdd:0,preRemove:0,remove:0,postRemove:0,preEmpty:0,empty:0};this._selectionManager=this._experienceBase.getManager("VCXSelectionManager")},blockEventCallback:function(l,h){if(l==="all"){var k=Object.keys(this.blockedCBEvents);for(var i=0;i<k.length;++i){var j=k[i];this.blockedCBEvents[j]=this.blockedCBEvents[j]|this.blockedCBFlags[h]}}else{if(this.blockedCBEvents.hasOwnProperty(l)){this.blockedCBEvents[l]=this.blockedCBEvents[l]|this.blockedCBFlags[h]}}},unblockEventCallback:function(l,h){if(l==="all"){var k=Object.keys(this.blockedCBEvents);for(var i=0;i<k.length;++i){var j=k[i];this.blockedCBEvents[j]=this.blockedCBEvents[j]&~this.blockedCBFlags[h]}}else{if(this.blockedCBEvents.hasOwnProperty(l)){this.blockedCBEvents[l]=this.blockedCBEvents[l]&~this.blockedCBFlags[h]}}},isEventCallbackBlocked:function(i,h){return Boolean(this.blockedCBEvents[i]&this.blockedCBFlags[h])},_subscribeEvents:function(){var l=e.Selection.CSOManager;var k=e.Selection.HSOManager;var o=e.Selection.PSOManager;var n=this;var m=function(q,s){var r=b[q];return function(t){if(!n.isEventCallbackBlocked(q,s)){n[r](t,s)}}};this._xsoEventSubscrArray={CSO:[],HSO:[],PSO:[]};var p=Object.keys(b);for(var i=0;i<p.length;++i){var j=p[i];var h=b[j];this._xsoEventSubscrArray.CSO.push(l[h](m(j,"SELECTION")));this._xsoEventSubscrArray.HSO.push(k[h](m(j,"HIGHLIGHT")));this._xsoEventSubscrArray.PSO.push(o[h](m(j,"PREHIGHLIGHT")))}this._previewModeEvent=a.subscribe({event:"VCX_PREVIEW_MODE_CHANGED"},function(q){n._bPreviewMode=q;if(q===true&&n._excludedFromXSOHyperlinksPathes.length!==0){n.switchOnSensibilityForAllHyperlinks()}})},_unsubscribeEvents:function(){var k={CSO:e.Selection.CSOManager,HSO:e.Selection.HSOManager,PSO:e.Selection.PSOManager};var l=[];if(this._xsoEventSubscrArray){l=Object.keys(this._xsoEventSubscrArray)}while(l.length!==0){for(var h=0;h<l.length;++h){var j=l[h];var i=this._xsoEventSubscrArray[j].pop();k[j].unsubscribe(i);if(this._xsoEventSubscrArray[j].length===0){delete this._xsoEventSubscrArray[j]}}l=Object.keys(this._xsoEventSubscrArray)}this._previewModeEvent&&a.unsubscribe(this._previewModeEvent);this._onPickNothing&&a.unsubscribe(this._onPickNothing)},unInitialize:function(){this._unsubscribeEvents();this._selectionManager=null},switchSensibilityForPreviewHyperlinks:function(h,m){if(!h||typeof m!=="boolean"){return}var k=f.BuildCleanedPathElement(h);if(!k){return}var j=this._experienceBase.ComponentsMap.GetComponentFromPathElement(k);if(!j||!j.QueryInterface){return}var i=null;if(m){i=j.QueryInterface("VCXISensible");if(i){i.setSelectable(m);i.setHighlightable(m)}}else{var l=this._experienceBase.getManager("VCXHyperlinkManager").ObjectHasHyperlink(j);if(l){i=j.QueryInterface("VCXISensible");if(i){i.setSelectable(m);i.setHighlightable(m)}}}},switchOnSensibilityForAllHyperlinks:function(){while(this._excludedFromXSOHyperlinksPathes.length!==0){var h=this._excludedFromXSOHyperlinksPathes.pop();this.switchSensibilityForPreviewHyperlinks(h,true)}},_storeToAddCompFromPathElement:function(i){var h=f.BuildCleanedPathElement(i);var k=this._experienceBase.ComponentsMap.GetComponentFromPathElement(h);if(!k||!k.QueryInterface){return}var j=k.QueryInterface("VCXISensible");if(j&&j.getSelectable()){if(!this._selectionManager.isIn(k)){this._componentsToAdd.push(k)}}},_storeToRemoveCompFromPathElement:function(i){var h=f.BuildCleanedPathElement(i);var j=this._experienceBase.ComponentsMap.GetComponentFromPathElement(h);if(!j){return}if(this._selectionManager.isIn(j)){this._componentsToRemove.push(j)}},onAdd:function(i,h){var j=null;if(this._bPreviewMode&&h==="PREHIGHLIGHT"){j=i;if(j.pathElement){this.switchSensibilityForPreviewHyperlinks(j.pathElement,false);this._excludedFromXSOHyperlinksPathes.push(j.pathElement)}}else{if(h==="SELECTION"){j=i;j.pathElement&&this._storeToAddCompFromPathElement(j.pathElement)}}},onPostAdd:function(j,h){if(h!=="SELECTION"){if(j.length!==0){a.publish({event:"VCX_"+h+"_ADD",data:j})}}else{if(h==="SELECTION"&&this._componentsToAdd.length!==0){var i=new c(this._selectionManager,true);i.AddComponentsToSelection(this._componentsToAdd);this._experienceBase.getManager("VCXCommandManager").Do(i)}}this._componentsToAdd=[]},onRemove:function(i,h){var k=null;if(this._bPreviewMode&&h==="PREHIGHLIGHT"){var j=null;k=i;if(k.pathElement){this.switchSensibilityForPreviewHyperlinks(k.pathElement,true);j=this._excludedFromXSOHyperlinksPathes.indexOf(k.pathElement);this._excludedFromXSOHyperlinksPathes.splice(j,1)}}else{if(h==="SELECTION"){k=i;k.pathElement&&this._storeToRemoveCompFromPathElement(k.pathElement)}}},onPostRemove:function(j,h){if(h!=="SELECTION"){if(j.length!==0){a.publish({event:"VCX_"+h+"_REMOVE",data:j})}}else{if(h==="SELECTION"&&this._componentsToRemove&&this._componentsToRemove.length!==0){var i=new c(this._selectionManager,true);i.RemoveComponentsFromSelection(this._componentsToRemove);this._experienceBase.getManager("VCXCommandManager").Do(i)}}this._componentsToRemove=[]},onPreEmpty:function(h,i){this.blockEventCallback("remove",i);a.publish({event:"VCX_"+i+"_PREEMPTY",data:h})},onEmpty:function(h,j){if(this._bPreviewMode&&j==="PREHIGHLIGHT"){this.switchOnSensibilityForAllHyperlinks()}else{if(j==="SELECTION"){var i=this._selectionManager.GetComponentsFromCurrentSelection();if(i.length!==0){var k=new c(this._selectionManager,true);k.RemoveComponentsFromSelection(i);this._experienceBase.getManager("VCXCommandManager").Do(k)}}}a.publish({event:"VCX_"+j+"_EMPTY",data:h});this.unblockEventCallback("remove",j)}});Object.defineProperty(d.prototype,"componentType",{enumerable:true,get:function(){return"VCXSelectManager"}});return d});define("DS/VCXWebKernel/VCXWebSelectionManager",["DS/Core/Core","DS/CoreEvents/Events","DS/WebApplicationBase/W3AAManager","DS/VCXWebKernel/VCXCmdChangeSelection","DS/VCXWebModifiablesServices/VCXModifiablesAccess","DS/VCXWebModifiablesServices/VCXModifiablesServices"],function(e,a,g,c,f,b){var d=g.extend({postInitialize:function(){if(!this._deprecatedWarnCounts){var j=3;this._deprecatedWarnCounts={GetCurrentSelection:j,}}this._setComponents={};this.activatePrepicking(true);var h=this._experienceBase.getManager("VCXContextManager");var i=h.getTrapSelectionRequirements();this.setTrapSelection(i.pick,i.prePick)},unInitialize:function(){e.Selection.CSOManager.empty(false);e.Selection.HSOManager.empty(false);e.Selection.PSOManager.empty(false);this._setComponents={}},_sendWarningIfNecessary:function(i,h){if(this._deprecatedWarnCounts[h]>0){console.warn(i);--this._deprecatedWarnCounts[h]}},GetSelection:function(i){var h=null;if(i==="CSO"){h=e.Selection.CSOManager}else{if(i==="HSO"){h=e.Selection.HSOManager}else{if(i==="PSO"){h=e.Selection.PSOManager}}}var j=h.get();return j},GetComponentsFromSelection:function(p){if(p==="CSO"){return this.GetComponentsFromCurrentSelection()}var n=[];var q=this.GetSelection(p);if(typeof q==="undefined"){return n}var j={};var h=q.length;for(var l=0;l<h;l++){var k=q[l];if(typeof k==="undefined"){continue}var m=f.BuildCleanedPathElement(k.pathElement);var o=this._experienceBase.ComponentsMap.GetComponentFromPathElement(m);if(o&&!j[o.GetID()]){n.push(o);j[o.GetID()]=o}}return n},setComponentsAsSelection:function(h,j){if(this._experienceBase.odt){var i=this.GetComponentsFromCurrentSelection();this._logForODTRecord(i,true)}this._setComponents=[];this.addComponentsToSelection(h,j)},_addToSelectionCache:function(l){var h=0;for(var j=0;j<l.length;++j){var k=l[j];var i=k.QueryInterface("VCXIModifiable");var m=k.QueryInterface("VCXISelectBehavior");if(m){var o=m.GetListForSelection();this._addToSelectionCache(o)}else{if(!i){this._addCompChildrenToSelectionCache(k)}else{var n=k.GetID();if(n&&this._setComponents[n]!==k){this._setComponents[n]=k;if(!this._componentsJustAdded){this._componentsJustAdded=[]}this._componentsJustAdded.push(k)}}}}return h!==0},addComponentsToSelection:function(j,i){if(!Array.isArray(j)){console.log("[VCXWebSelectionManager] An array is required as first argument of the 'addComponentsToSelection' method.");return}if(j.length===0){return}if(typeof i!=="boolean"){i=false}this._addToSelectionCache(j);var h=this._componentsJustAdded&&this._componentsJustAdded.length!==0;if(h){var k=this._componentsJustAdded.slice(0);this._componentsJustAdded=null;if(!i){this.RefreshXSO()}a.publish({event:"VCX_SELECTION_COMPONENTSLIST_ADD",data:k});this._experienceBase.odt&&this._logForODTRecord(k,false)}},_removeFromSelectionCache:function(k){var l=0;for(var i=0;i<k.length;++i){var j=k[i];if(!j){continue}var h=j.QueryInterface("VCXIModifiable");var m=j.QueryInterface("VCXISelectBehavior");if(m){var o=m.GetListForSelection();this._removeFromSelectionCache(o)}else{if(!h){this._removeCompChildrenToSelectionCache(j)}else{var n=j.GetID();if(n&&this._setComponents[n]===j){delete this._setComponents[n];if(!this._componentsJustRemoved){this._componentsJustRemoved=[]}this._componentsJustRemoved.push(j)}}}}return l!==0},removeComponentsFromSelection:function(l,j){if(!Array.isArray(l)){console.log("[VCXWebSelectionManager] An array is required as first argument of the 'removeComponentsFromSelection' method.");return}if(l.length===0){return}if(typeof j!=="boolean"){j=false}this._removeFromSelectionCache(l);var i=this._componentsJustRemoved&&this._componentsJustRemoved.length!==0;if(i){var h=this._componentsJustRemoved.slice(0);this._componentsJustRemoved=null;if(!j){this.RefreshXSO()}a.publish({event:"VCX_SELECTION_COMPONENTSLIST_REMOVE",data:h});this._experienceBase.odt&&this._logForODTRecord(h,true);var k=this;if(!k.HasActors()){k.outTimer=window.setTimeout(function(){if(!k.HasActors()){a.publish({event:"VCX_SELECTED_ACTORS_EMPTY"})}},200)}}},_alterSelectionCacheWithCompChildren:function(i,m){var k=i.QueryInterface("VCXIModelNavigable");var j=k&&k.getChildren();for(var l=0;l<j.length;++l){var h=j[l].GetObject();var n=h.GetID();if(n){if(m&&this._setComponents[n]!==h){this._setComponents[n]=h;if(!this._componentsJustAdded){this._componentsJustAdded=[]}this._componentsJustAdded.push(h)}else{if(!m&&this._setComponents[n]===h){delete this._setComponents[n];if(!this._componentsJustRemoved){this._componentsJustRemoved=[]}this._componentsJustRemoved.push(h)}}}}},_addCompChildrenToSelectionCache:function(h){this._alterSelectionCacheWithCompChildren(h,true)},_removeCompChildrenToSelectionCache:function(h){this._alterSelectionCacheWithCompChildren(h,false)},HasActors:function(){var j=this.GetComponentsFromCurrentSelection();for(var k=0;k<j.length;k++){var h=j[k];if(h.IsDressup||h.IsKindOf("VCXWebComponentOccurrence")){return true}}return false},GetCurrentSelection:function(l){var h="/!\\ The method VCXWebSelectionManager.GetCurrentSelection is DEPRECATED /!\\\nPlease use the method VCXWebSelectionManager.GetComponentsFromCurrentSelection(strType). Thanks in advance !";this._sendWarningIfNecessary(h,"GetCurrentSelection");var i=this.GetComponentsFromCurrentSelection(l);var j=i.map(function k(m){return m&&m.QueryInterface("VCXIModifiable")});return j},GetComponentsFromCurrentSelection:function(k){var i=[];for(var l in this._setComponents){if(this._setComponents.hasOwnProperty(l)){var h=this._setComponents[l];var j=true;if(k){if(!h.IsKindOf(k)){j=false}}if(j){i.push(h)}}}return i},isIn:function(n){var k=n;var o=k.QueryInterface("VCXIModifiable");if(k.GetObject&&o===k){var p="The method 'isIn' used with a modifiable as parameter is now DEPRECATED.\n\n Please use a component instead of a modifiable.";this._sendWarningIfNecessary(p,"isIn");k=k.GetObject()}if(o&&b.hasModifiableVisibleProperties(o)){return this._setComponents.hasOwnProperty(k.GetID())}else{var j=n.QueryInterface("VCXINavigable");if(!j){return}var h=j.GetChildren();if(h.length===0){return true}for(var i=0;i<h.length;++i){var l=h[i];var m=l&&l.GetObject();if(!this.isIn(m)){return false}}return true}},setTrapSelection:function(i,h){if(typeof i!=="boolean"){console.warn("[VCXWebSelectionManager] Method setTrapSelection: a boolean is needed as first argument");return}this._experienceBase.getManager("VCXContextManager").getMainViewer().setPicking({trapSelectionMesh:i});if(i&&typeof h==="boolean"){this._experienceBase.getManager("VCXContextManager").getMainViewer().setPrePicking({trapSelectionMesh:h})}},activatePrepicking:function(h){this._experienceBase.getManager("VCXContextManager").getMainViewer().setPrePicking({activated:h})},_logForODTRecord:function(h,m){var j=[];for(var p=0;p<h.length;++p){var k=h[p];if(k&&k.GetType()==="VCXComponentHotspot"){continue}var i=k&&k.GetID();i&&j.push(i)}if(this._experienceBase.odt==="record"){var o=this._experienceBase.getManager("VCXODTManager");if(!o._isActivatingSelSetHotspotGr){o.LogAPI(m?"VCXRemoveSelection":"VCXAddSelection",j)}}else{if(this._experienceBase.odt==="replay"){var n=(m?"Remove ":"Add ");var l=(j.length>1?" objects":" object");console.log("[ODT] Change selection: "+n+j.length+l+" => "+j.toString())}}},});Object.defineProperty(d.prototype,"componentType",{enumerable:true,get:function(){return"VCXWebSelectionManager"}});return d});define("DS/VCXWebKernel/VCXSelectionManager",["DS/Core/Core","DS/VCXWebKernel/VCXWebSelectionManager"],function(c,a){var b=a.extend({RefreshXSO:function(){var d=[];for(var i in this._setComponents){if(this._setComponents.hasOwnProperty(i)){var f=this._setComponents[i];var h=f.QueryInterface("W3AISGNodeHolder");if(h&&h.getPathElement){var g=h.getPathElement();g&&d.push({pathElement:g})}else{}}}var e=this._experienceBase.getManager("VCXSelectManager");e.blockEventCallback("all","SELECTION");e.blockEventCallback("all","HIGHLIGHT");c.Selection.CSOManager.empty(true);c.Selection.HSOManager.empty(true);c.Selection.CSOManager.add(d);c.Selection.HSOManager.add(d);e.unblockEventCallback("all","SELECTION");e.unblockEventCallback("all","HIGHLIGHT")}});Object.defineProperty(b.prototype,"componentType",{enumerable:true,get:function(){return"VCXSelectionManager"}});return b});