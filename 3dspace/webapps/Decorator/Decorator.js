define("DS/Decorator/DecoratorManager",["UWA/Core","UWA/Class"],function(e,c){var a;var b;var d=c.singleton({defaultOptions:{},init:function(f){this._parent(f);this._decorator=null;this._widget=null;this._mapNamesDecorators={}},showDecorator:function(i,f){this._widget=i;if(this._decorator){this._decorator.hide(true)}if(this._mapNamesDecorators[i.name]===undefined){var h=this;var g=i.name.substring(0,1).toUpperCase()+i.name.substring(1,i.name.length);require(["DS/Decorator/"+g+"Decorator"],function(j){h._decorator=new j({decoratedWidget:f,widget:i});h._mapNamesDecorators[i.name]=h._decorator})}else{this._decorator=this._mapNamesDecorators[i.name];this._decorator.setProperties({decoratedWidget:f,widget:i});this._decorator.show()}},hideDecorator:function(f,g){if(this._widget&&(this._widget.getContent().getAttributeNode("focused")===null||g)){this._decorator.hide(f)}},getWidget:function(){return this._widget},getDecorator:function(){return this._decorator},isDecoratorDisplayed:function(){return this._decorator&&this._decorator.visibleFlag},_createDecorator:function(h,f){this._widget=h;var g="Old"+h.name.substring(0,1).toUpperCase()+h.name.substring(1,h.name.length);var i="DS/Decorator/"+g+"Decorator";if(a!==undefined){a.hide()}if(h.name==="spinBox"){require([i],function(j){b=new j({decoratedWidget:f,widget:h});if(!a||a&&!a.visibleFlag){a=b.createPopupWithDecorator()}})}},removeDecorator:function(){if(a&&a.visibleFlag&&this.getWidget()&&this.getWidget().getContent().getAttributeNode("focused")===null&&a.getContent().getAttributeNode("focused")===null){a.hide();b.removePopupWithDecorator()}},forceRemoveDecorator:function(){if(a&&a.visibleFlag&&this.getWidget()){a.hide();b.removePopupWithDecorator()}},getInstance:function(){return a}});return d});define("DS/Decorator/AbstractDecorator",["UWA/Core","DS/Core/PointerEvents","DS/Controls/Abstract","DS/Controls/Popup","DS/Controls/Button","DS/Utilities/Dom"],function(g,b,f,d,c,a){var e=f.inherit({name:"abstractdecorator",publishedProperties:{widget:{defaultValue:null},decoratedWidget:{defaultValue:null}},buildView:function(){this._shouldValidateValue=true},_postBuildView:function(){var h={target:this.decoratedWidget,position:"bottom",offset:{x:0,y:12},alignment:"center",constraint:"screen",overlap:false};this.elements.popup=new d(h);this.elements.popup.setBody(this.elements.container);this.elements.popup.arrowBoxFlag=true;this._applyVisibleFlag()},destroy:function(){this.hide();this._parent()},hide:function(h){this._shouldValidateValue=h;this.visibleFlag=false},show:function(){this.visibleFlag=true},_buildContent:function(){},_onShow:function(){},_onHide:function(h){},_applyVisibleFlag:function(){if(this.visibleFlag){this._onShow();if(this.elements.popup){this.elements.popup.show()}}else{this._onHide(this._shouldValidateValue);if(this.elements.popup){this.elements.popup.hide()}}},_applyProperties:function(h){this._parent(h);if(this.isDirty("decoratedWidget")&&this.elements.popup){this.elements.popup.target=this.decoratedWidget}}});return e});define("DS/Decorator/OldSpinBoxDecorator",["UWA/Core","DS/Controls/Abstract","DS/Core/PointerEvents","DS/Controls/Popup","DS/Controls/Button","DS/Utilities/Dom"],function(g,f,b,d,c,a){var e=f.inherit({publishedProperties:{widget:{defaultValue:null},decoratedWidget:{defaultValue:null}},buildView:function(){this.elements.container=new g.Element("div",{"class":"wux-keyboard-container"});this.elements.firstLine=new g.Element("div",{"class":"wux-keyboard-firstline"}).inject(this.elements.container);this.elements.secondLine=new g.Element("div",{"class":"wux-keyboard-secondline"}).inject(this.elements.container);this.elements.thirdLine=new g.Element("div",{"class":"wux-keyboard-thirdline"}).inject(this.elements.container);this.elements.fourthLine=new g.Element("div",{"class":"wux-keyboard-fourthLine"}).inject(this.elements.container);new c({label:"7"}).inject(this.elements.thirdLine);new c({label:"8"}).inject(this.elements.thirdLine);new c({label:"9"}).inject(this.elements.thirdLine);new c({label:"4"}).inject(this.elements.secondLine);new c({label:"5"}).inject(this.elements.secondLine);new c({label:"6"}).inject(this.elements.secondLine);this.elements.button1=new c({label:"1"}).inject(this.elements.firstLine);new c({label:"2"}).inject(this.elements.firstLine);new c({label:"3"}).inject(this.elements.firstLine);new c({label:"."}).inject(this.elements.fourthLine);new c({label:"0"}).inject(this.elements.fourthLine);this.elements.buttonSupp=new c({icon:{iconName:"chevron-left",fontIconSize:"0.5x"},value:"esc"}).inject(this.elements.fourthLine);this.elements.buttonSupp.getContent().addClassName("wux-keyboard-buttonBack");this.elements.buttonExponent=new c({label:"e"}).inject(this.elements.firstLine);this.elements.buttonMinus=new c({label:"-"}).inject(this.elements.secondLine);this.elements.buttonUp=new c({icon:{iconName:"sort-asc",fontIconSize:"0.5x"}}).inject(this.elements.thirdLine);this.elements.buttonUp.getContent().addClassName("wux-keyboard-buttonUp");this.elements.buttonDown=new c({icon:{iconName:"sort-desc",fontIconSize:"0.5x"}}).inject(this.elements.fourthLine);this.elements.buttonDown.getContent().addClassName("wux-keyboard-buttonDown")},removePopupWithDecorator:function(){if(this.widget.value!==parseFloat(this.widget.elements.inputField.value)){this.widget.value=parseFloat(this.widget.elements.inputField.value);this.widget._applyValue(this.widget.value)}},createPopupWithDecorator:function(){this.widget.elements.inputField.focus();this.widget.elements.inputField.selectionStart=0;this.widget.elements.inputField.selectionEnd=this.widget.elements.inputField.value.length;var h={target:this.widget,position:"bottom",offset:{x:0,y:12},alignment:"center",constraint:"screen",className:"wux-spinbox-spinner-decorator-popup",overlap:false};this.elements.popup=new d(h);this.elements.popup.setBody(this.elements.container);this.elements.popup.visibleFlag=true;this.elements.popup.arrowBoxFlag=true;return this.elements.popup},handleEvents:function(){var h=this;var i=false;this.elements.container.addEventListener(b.POINTERDOWN,function(j){i=h.widget.getContent().hasAttribute("focused")});a.addEventOnElement(this,document,b.POINTERUP,function(j){if(!b.isTouchEvent(j)&&h.elements.popup!==null&&h.elements.popup.visibleFlag&&h.elements.popup.getContent().getAttributeNode("focused")===null){h.elements.popup.hide()}});this.elements.buttonDown.addEventListener("buttonclick",function(j){h.widget.value=parseFloat(h.widget.elements.inputField.value);j.stopPropagation();j.preventDefault();h.widget.decrement()});this.elements.buttonUp.addEventListener("buttonclick",function(j){h.widget.value=parseFloat(h.widget.elements.inputField.value);j.stopPropagation();j.preventDefault();h.widget.increment()});this.elements.buttonUp.addEventListener("doubleclick",function(j){j.preventDefault();j.stopPropagation()});this.elements.buttonDown.addEventListener("doubleclick",function(j){j.preventDefault();j.stopPropagation()});this.elements.buttonSupp.addEventListener("doubleclick",function(j){j.preventDefault();j.stopPropagation()});this.elements.container.addEventListener("doubleclick",function(j){j.preventDefault();j.stopPropagation()});this.elements.container.addEventListener("buttonclick",function(n){n.preventDefault();n.stopPropagation();var p=h.widget.elements.inputField;var o;var k;if(p.selectionStart!==p.selectionEnd){o=p.value.substring(0,p.selectionStart);k=p.value.substring(p.selectionEnd,p.value.length);var l=o+k;p.value=String(l)}if(n.dsModel.value==="esc"){if(!i){p.selectionStart=p.selectionEnd=p.value.length}if(p.selectionStart!==p.selectionEnd){o=p.value.substring(0,p.selectionStart);k=p.value.substring(p.selectionEnd,p.value.length)}else{o=p.value.substring(0,p.selectionStart-1);k=p.value.substring(p.selectionStart,p.value.length)}p.value=o+k}else{if(p.value==="0"){p.value=n.target.textContent}else{if(n.target.textContent==="."){if(p.value.indexOf(".")===-1){if(!i){p.selectionStart=p.selectionEnd=p.value.length}o=p.value.substring(0,p.selectionStart);k=p.value.substring(p.selectionStart,p.value.length);p.value=o+"."+k}}else{if(n.target.hasClassName("wux-controls-button")||n.target.parentNode.hasClassName("wux-controls-button")){if(!i){p.selectionStart=p.selectionEnd=p.value.length}var j=p.selectionStart;var m=n.target.hasClassName("wux-controls-button")?n.target:n.target.parentNode;o=p.value.substring(0,p.selectionStart);k=p.value.substring(p.selectionStart,p.value.length);if(k===" "+h.widget.units){k=""}p.value=o+m.textContent+k;p.selectionStart=j+1;p.selectionEnd=j+1}}}}p.removeAttribute("focused")})}});return e});define("DS/Decorator/SpinBoxDecorator",["UWA/Core","DS/Core/PointerEvents","DS/Decorator/AbstractDecorator","DS/Controls/Popup","DS/Controls/Button","DS/Utilities/Dom"],function(d,f,i,b,h,a){var e=function(){this.elements.container.addClassName("wux-keyboard-container");var l=new d.Element("div",{"class":"wux-keyboard-firstline"}).inject(this.elements.container);var j=new d.Element("div",{"class":"wux-keyboard-secondline"}).inject(this.elements.container);var m=new d.Element("div",{"class":"wux-keyboard-thirdline"}).inject(this.elements.container);var k=new d.Element("div",{"class":"wux-keyboard-fourthLine"}).inject(this.elements.container);new h({label:"7"}).inject(m);new h({label:"8"}).inject(m);new h({label:"9"}).inject(m);new h({label:"4"}).inject(j);new h({label:"5"}).inject(j);new h({label:"6"}).inject(j);new h({label:"1"}).inject(l);new h({label:"2"}).inject(l);new h({label:"3"}).inject(l);new h({label:"."}).inject(k);new h({label:"0"}).inject(k);var p=new h({icon:{iconName:"chevron-left",fontIconSize:"0.5x"},value:"back"}).inject(k);p.getContent().addClassName("wux-keyboard-buttonBack");new h({label:"e"}).inject(l);new h({label:"-"}).inject(j);var n=new h({icon:{iconName:"sort-asc",fontIconSize:"0.5x"},value:"up"}).inject(m);n.getContent().addClassName("wux-keyboard-buttonUp");var o=new h({icon:{iconName:"sort-desc",fontIconSize:"0.5x"},value:"down"}).inject(k);o.getContent().addClassName("wux-keyboard-buttonDown")};var g=function(){var j=this;var k=false;this.elements.container.addEventListener(f.POINTERDOWN,function(l){k=j.widget.getContent().hasAttribute("focused")});this.elements.container.addEventListener("buttonclick",function(p){p.preventDefault();p.stopPropagation();var r=j.widget.elements.inputField;var o=r.selectionStart;if(!k){r.selectionStart=r.selectionEnd=r.value.length}if(p.dsModel.value==="up"){j.widget.value=parseFloat(j.widget.elements.inputField.value);j.widget.increment();return}if(p.dsModel.value==="down"){j.widget.value=parseFloat(j.widget.elements.inputField.value);j.widget.decrement();return}var q="",n="";var m=0;if(p.dsModel.value==="back"){if(r.selectionStart!==r.selectionEnd){m=r.selectionStart;q=r.value.substring(0,r.selectionStart);n=r.value.substring(r.selectionEnd,r.value.length)}else{m=r.selectionStart-1;q=r.value.substring(0,r.selectionStart-1);n=r.value.substring(r.selectionStart,r.value.length)}}else{m=r.selectionStart+1;var q=r.value.substring(0,r.selectionStart);var n=r.value.substring(r.selectionEnd,r.value.length);if(n===" "+j.widget.units){n=""}if(r.value==="0"){q="";n=""}if(p.dsModel.label==="."){if(r.value.indexOf(".")===-1){n="."+n}}else{n=p.dsModel.label+n}}r.value=q+n;j.widget._preventUpdateOnNextFocus=true;r.focus();var l=m>0?m:0;r.selectionStart=l;r.selectionEnd=l})};var c=i.inherit({name:"spinboxdecorator",publishedProperties:{},buildView:function(){this._parent();e.call(this)},handleEvents:function(){g.call(this)},_onShow:function(){if(document.activeElement){document.activeElement.blur()}var j=this.widget.elements.inputField;j.setAttributeNode(document.createAttribute("readonly"));j.focus();j.selectionStart=0;j.selectionEnd=j.value.length},_onHide:function(l){var m=this.widget.elements.inputField;m.removeAttribute("readonly");if(!l){var j=m.value;var k=this.widget.lastValueWhenEnter;m.blur();this.widget._preventUpdateOnNextFocus=true;m.focus();m.value=j;this.widget.lastValueWhenEnter=k}if(l===true){if(this.widget._validateValue){this.widget._validateValue(m.value)}}}});return c});