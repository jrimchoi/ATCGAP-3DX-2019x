define("DS/ENOXVersionExplorerModelWebServices/ModelWebServicesBase",["UWA/Core","UWA/Class","UWA/Promise","DS/LifecycleServices/LifecycleServicesSettings","DS/LifecycleServices/LifecycleServices","DS/WAFData/WAFData","DS/ENOXVersionExplorerUtils/VersionExplorerSettings"],function(f,a,h,d,e,i,c){var b=undefined;var j=undefined;function g(k,m,l){if(typeof j==="string"&&j.length){n(j)}else{e.getSecurityContextPromise(b||d.getTenant()).then(function(o){n(o)})["catch"](function(o){l(o)})}function n(p){var o,q=d.getHeaders(p);if(k.serviceURI.contains("http")&&c._RDF_SETTINGS._DEBUG_MODE){o=k.serviceURI;if(k.method==="GET"){delete q["Content-Type"]}}else{if(k.serviceURI.contains("search")){o=d.getPlatformWSUrl("3DSearch",b||d.getTenant(),k.serviceURI,null)}else{o=d.get3DSpaceWSUrl(b||d.getTenant(),k.serviceURI,null);q.SecurityContext=p}}if(k.method==="GET"){o+=((o.indexOf("?")>=0?"&":"?")+"timestamp="+Date.now().toString())}i.authenticatedRequest(o,{method:k.method,headers:q,timeout:600000,data:(k.data===undefined)?"":k.data,type:"json",onComplete:function(r){if(r.status==="failure"||r.success===false){l(r)}else{m(r)}},onTimeout:function(r){l(r)},onFailure:function(r){l(r)}})}}return a.extend({getVersionsFromVersion:function(k,m){var l=Array.isArray(m)?{method:"POST",serviceURI:"/resources/v1/dslc/versiongraph?withThumbnail=1&withIsLastVersion=1&withAttributes=1&withCopyFrom=1",data:JSON.stringify({graphRequests:[{id:k,attributes:m}]})}:{method:"GET",serviceURI:"/resources/v1/dslc/versiongraph/"+k+"?withThumbnail=1&withIsLastVersion=1&withAttributes=1&withCopyFrom=1",data:""};return this._returnPromise(l)},checkAccess:function(l){var m={boAccessRights:[]};l.forEach(function(o){var n=[];o.access.forEach(function(p){n.push({access:{physical:p}})});m.boAccessRights.push({objectID:o.pid,accessRight:n})});var k={method:"POST",serviceURI:"/resources/pno/ownership/checkaccess",data:JSON.stringify(m)};return this._returnPromise(k)},setTenantId:function(k){b=k},getTenantId:function(){return(b||d.getTenant())},setSecurityContext:function(k){j=k},_returnPromise:function(k){return new h(function(m,l){if(!c._RDF_SETTINGS._DEBUG_MODE){d.app_initialization(function(){g(k,m,l)})}else{g(k,m,l)}})},reviseAsMajor:function(k){var n={data:[]},l=k.physIds,o=k.titles;if(!(Array.isArray(l)&&Array.isArray(o)&&l.length>0&&l.length===o.length)){throw Error("ModelWebServicesBase: reviseAsMajor-inputs are not valid")}for(var m=0;m<l.length;m++){n.data.push(f.extend({physicalid:l[m]},typeof o[m]==="string"&&o[m].length?{title:o[m]}:{}))}var k={method:"POST",serviceURI:"/resources/lifecycle/revise/major",data:JSON.stringify(n)};return this._returnPromise(k)},getPropFromVersion:function(l){var m={lIds:l,plmparameters:"false",attributes:"true",navigateToMain:"false",debug_properties:"false"};var k={method:"POST",serviceURI:"/resources/v1/collabServices/attributes/op/read",data:JSON.stringify(m)};return this._returnPromise(k)},getVersionFamilyData:function(l){var k={method:"GET",serviceURI:"/resources/lifecycle/revision/versionFamilyData",data:"physicalid="+l};return this._returnPromise(k)},getThumbnailsFromIndex:function(l,q){var p="";if(l.length>0){for(var m=0;m<l.length;m++){var o=l[m];if(o&&o.length>0){if(m>0){p+=" OR "}p+="physicalid:"+o}}}else{return}var n={with_indexing_date:true,with_synthesis:false,with_synthesis_attribute:false,with_nls:false,nresults:l.length,locale:"en",query:p,tenant:q,start:0,select_file:["icon","thumbnail_2d"],label:"PropertiesPanel-abc-1552073739345"};var k={method:"POST",serviceURI:"/search",data:JSON.stringify(n)};return this._returnPromise(k)},getUpdateNameAndDescriptionPromise:function(l){var m=[{queryParams:{select:["physicalid","modified"]},body:[],path:"model/bus/"+l.id,method:"PATCH"}];l.attributes.forEach(function(n){if(n.key&&n.value&&n.value.length){m[0].queryParams.select.push("attribute[PLMEntity."+n.key+"]");m[0].body.push({op:"replace",path:"PLMEntity."+n.key,value:n.value})}});var k={method:"PUT",serviceURI:"/resources/v1/collabServices/attributes/op/update",data:JSON.stringify({requests:m})};return this._returnPromise(k)},getPersonInfoPromise:function(l){var k={method:"GET",serviceURI:"/resources/modeler/pno/person/"+l,};return this._returnPromise(k)}})});define("DS/ENOXVersionExplorerModelWebServices/ModelWebServicesHistory2",["UWA/Core","DS/ENOXVersionExplorerModelWebServices/ModelWebServicesBase","DS/ENOXVersionExplorerUtils/VersionExplorerSettings","DS/ENOXVersionExplorerUtils/ENOXVersionExplorerUtils"],function(d,c,b,a){return c.extend({getVersionsFromVersion:function(p,g){var h={items:[],versions:[]},l=this,e=b.historyConfig;if(e!=null&&e.historyConfig){for(var k=0,o=e.historyConfig,m=o.length;k<m;k++){var n=o[k];if(g.indexOf(n.attribute)<0){g.push(n.attribute)}}}function f(s){var t=[];if(Array.isArray(s)){for(var r=0,q=s.length;r<q;r++){t.push({id:s[r],attributes:g})}}else{throw Error("ModelWebServicesHistory2:getVersionsFromVersion - No IDs to")}return{method:"POST",serviceURI:"/resources/v1/dslc/versiongraph?withThumbnail=1&withIsLastVersion=1&withAttributes=1&withCopyFrom=1&withAdjacentVersion=1",data:JSON.stringify({graphRequests:t})}}function j(i){var q=[];i.graphs.forEach(function(r){if(r.item&&!r.item.partial){h.versions=h.versions.concat(r.versions);h.items.push(r.item)}else{if(r.item&&r.item.partial===true&&r.versions&&r.versions[0]&&h.versions.findIndex(function(s){return s.id===r.versions[0].id})<0){q.push(r.versions[0].id)}}});if(q.length){return l._returnPromise(f(q)).then(j)}else{return Promise.resolve(h)}}return this._returnPromise(f(Array.isArray(p)?p:[p])).then(j)}})});define("DS/ENOXVersionExplorerModelWebServices/ModelWebServicesRDF",["UWA/Core","DS/ENOXVersionExplorerModelWebServices/ModelWebServicesBase","DS/ENOXVersionExplorerUtils/VersionExplorerSettings","DS/ENOXVersionExplorerUtils/ENOXVersionExplorerUtils"],function(d,c,b,a){return c.extend({getVersionsFromVersion:function(f){var h=b._RDF_SETTINGS._BASE_URL;var e=b._RDF_SETTINGS._VERSION_MASK_GET||"dslc:Mask.VersionDefault";var g={method:"GET",serviceURI:h+"/resources/"+f+"?$mask="+e,data:""};return this._returnPromise(g)},addVersionPromise:function(j){var i=b._RDF_SETTINGS._BASE_URL;j.customData=j.customData||{};var h=b._RDF_SETTINGS._VERSION_DATAMODEL_TYPE||"dslc:ItemVersion";var g=b._RDF_SETTINGS._VERSION_MASK_ADD||"dslc:ItemVersionCommandMask";var f=b._RDF_SETTINGS._VERSION_MASK_OPTIONS_BUILDER?b._RDF_SETTINGS._VERSION_MASK_OPTIONS_BUILDER(j,a.getSemanticDescription):{"for":"<"+j.itemID+">",origin:"<"+j.parentid+">",intent:a.getSemanticDescription(j.versionSemantic),copy:true};var e={method:"POST",serviceURI:i+(j.customURI||"/classes/"+h+"?$mask="+g),data:JSON.stringify(d.extend(f,j.customData))};return this._returnPromise(e)},_processVersions:function(g){var f=this;var e=false;if(g.versions){if(f.itemID===f._getItemID(g)){e=f._updateTree.bind(f)(g)}else{f.itemID=f._getItemID(g);f._loadTree.bind(f)(g);e=true}}return e}})});define("DS/ENOXVersionExplorerModelWebServices/ModelWebServicesP",["UWA/Core","DS/ENOXVersionExplorerModelWebServices/ModelWebServicesBase"],function(b,a){return a});define("DS/ENOXVersionExplorerModelWebServices/ModelWebServicesPPrime",["UWA/Core","DS/ENOXVersionExplorerModelWebServices/ModelWebServicesBase"],function(b,a){return a.extend({addVersions:function(k,f,d){var j=[];if(Array.isArray(k)&&Array.isArray(f)&&Array.isArray(d)){if(k.length===f.length&&k.length===d.length){for(var h=0,c=k.length;h<c;h++){j.push({copyId:"pid:"+k[h],name:d[h],edges:[]});for(var g in f[h]){j[h].edges.push({semantic:g,ancestor:"pid:"+f[h][g]})}}var e={method:"POST",serviceURI:"/resources/model/version/addversions",data:JSON.stringify({addRequests:j})}}else{throw Error("ModelWebServicesPPrime.addVersions: input arrays are not of the same length")}}else{throw Error("ModelWebServicesPPrime.addVersions: inputs are not Arrays")}return this._returnPromise(e)},})});define("DS/ENOXVersionExplorerModelWebServices/ModelWebServicesER",["UWA/Core","DS/ENOXVersionExplorerModelWebServices/ModelWebServicesBase"],function(b,a){return a.extend({getUpdateNameAndDescriptionPromise:function(d){var e=[{queryParams:{select:["physicalid","modified"]},body:[],path:"model/bus/"+d.id,method:"PATCH"}];d.attributes.forEach(function(f){if(f.key&&f.value&&f.value.length){e[0].queryParams.select.push("attribute["+f.key+"]");e[0].body.push({op:"replace",path:f.key,value:f.value})}});var c={method:"PUT",serviceURI:"/resources/v1/collabServices/attributes/op/update",data:JSON.stringify({requests:e})};return this._returnPromise(c)}})});define("DS/ENOXVersionExplorerModelWebServices/ModelWebServicesHistory",["UWA/Core","DS/ENOXVersionExplorerModelWebServices/ModelWebServicesBase","DS/ENOXVersionExplorerUtils/VersionExplorerSettings","DS/ENOXVersionExplorerUtils/ENOXVersionExplorerUtils"],function(d,c,b,a){return c.extend({getVersionsFromVersion:function(g){var m="",l=b.historyConfig;if(l!=null&&l.historyConfig){m="&custAttribs=";for(var k=0,f=l.historyConfig,e=f.length;k<e;k++){var j=f[k];if(m.indexOf(d.Utils.encodeUrl(j.attribute))<0){m+=d.Utils.encodeUrl(j.attribute)+"~~~"}}}var h={method:"GET",serviceURI:"/resources/lifecycle/history/links",data:"physicalid="+g+"&depth=100&height=100"+m,};return this._returnPromise(h)}})});