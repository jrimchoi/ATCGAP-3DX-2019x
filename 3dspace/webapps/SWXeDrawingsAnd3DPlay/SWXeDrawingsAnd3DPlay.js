/*!  COPYRIGHT DASSAULT SYSTEMES 2015   */
define("DS/SWXeDrawingsAnd3DPlay/CmdeDrawingsSnapshot",["UWA/Core","DS/ApplicationFrame/Command","WebappsUtils/WebappsUtils"],function(c,a,b){return a.extend({init:function(d){this._parent(d,{isAsynchronous:false});this.frameWindow=this.getFrameWindow()},beginExecute:function(){var h=this.frameWindow.getViewer();var d=this.getFrameWindow().getUIFrame();var f=function(o){var j=new c.Element("div");j.setAttribute("id","PlayWeb-eDrawingsSnapshot");var k=new c.Element("span");k.setAttribute("class","CloseBtn");j.appendChild(k);var m=new c.Element("span");m.setAttribute("class","fonticon fonticon-cancel");k.addEventListener("click",function(){eDrawingsSnapshotParams=null;d.removeChild(j)});k.appendChild(m);var l=new c.Element("span");l.setAttribute("class","fonticon fonticon-cancel-circled");k.appendChild(l);var n=new c.Element("iframe");n.setAttribute("id","PlayWeb-eDrawingsSnapshotCont");n.style.backgroundImage="url('"+o+"')";j.appendChild(n);d.appendChild(j);window.eDrawingsSnapshotParams={ctx:"2DViewerCtx",input:{asset:{provider:"FILE",filename:o,format:"jpeg"},experience:{filename:"DS/3DPlayDocumentViewer/3DPlayDocumentViewer"}},options:{loading:"autoplay"}}};var e="800";var i="600";var g=null;h.getSnapshot(e,i,f,g)},endExecute:function(){}})});define("DS/SWXeDrawingsAnd3DPlay/eDwCmdStack",["UWA/Class",],function(a){var b=a.singleton({});b.add=function(c){if(!b.stack){b.stack=[]}if(this.isCmdOnTop(c)){return}b.stack.push(c)};b.remove=function(c){if(!b.stack){return false}var e=b.stack.indexOf(c);if(e===-1){return false}var d=b.stack.splice(e,1);return d.length>0?true:false};b.getSize=function(){if(!b.stack){return 0}return b.stack.length};b.isCmdOnTop=function(c){var d=this.getTopCmd();return d&&d._id===c._id?true:false};b.getTopCmd=function(){return b.stack&&b.stack.length>0?b.stack[b.stack.length-1]:null};return b});define("DS/SWXeDrawingsAnd3DPlay/eDwUtils",["UWA/Class",],function(a){var b=a.extend({});b.getLocalStorageSetting=function(c){var d=window.localStorage;return d?d[c]:undefined};b.getElements=function(c){var d=window.widget?window.widget:document;return d?d.getElements(c):null};b.getElement=function(d){var c=b.getElements(d);return c&&c.length?c[0]:null};return b});define("DS/SWXeDrawingsAnd3DPlay/eDwBaseCmd",["DS/StateCommandEngine/StateCommand","DS/SWXeDrawingsAnd3DPlay/eDwCmdStack","DS/SWXeDrawingsAnd3DPlay/eDwUtils"],function(c,b,a){var d=c.extend({init:function(e){return this._parent(e,{isAsynchronous:true})},isAtFinalState:function(){return this.finalState&&this._getCurrentStateId()===this.finalState.stateId},buildGraph:function(){if(!this.initialState){this.initialState=this.createInitialState("InitialState")}if(!this.finalState){this.finalState=this.getFinalState()}var e=this;var f={iEvent:undefined,iInitialState:this.initialState,iFinalState:this.finalState,iCondition:function(){return e.isAtFinalState()}};this.addTransition(f)},begin:function(){if(!this.getViewer()){return this.end()}b.add(this);return this._parent(arguments)},end:function(){b.remove(this);return this._parent(arguments)},cancel:function(){if(this.onDone){this.onDone()}if(this.finalState){this._changeState(this.finalState.stateId)}delete this.initialState;delete this.finalState},addEventHandler:function(k,g,i,h,j){var e=h;var f=j;this.mEventHandler=function(m){var l=m.target.className;if(l.contains(i)){e[f]()}};g.addEventListener(k,this.mEventHandler,true)},removeEventHandler:function(f,e){if(this.mEventHandler){e.removeEvent(f,this.mEventHandler,true)}},getElement:function(){a.getElement("#edrawings-configurations-menu")},getActiveABPosition:function(){var f=document.querySelector(".wux-ui-state-active");var e=f.getBoundingClientRect();return{y:0,x:e.left}},insertOnAB:function(f){var e=document.querySelector(".Sections");e.parentNode.insertBefore(f,e)},getViewer:function(){return this.getFrameWindow().experience.mExp.eDwView}});d.getABButtonElement=function(g){var h=document.querySelectorAll(".wux-afr-cmdstarter");var j=[];j.length=h.length;for(var f=0;f<j.length;++f){j[f]=h[f]}var e=null;j.forEach(function(i){if(i.getAttribute("data-command")===g){e=i}});return e};d.setABButtonImage=function(g,f){var e=d.getABButtonElement(g);if(e){var i=e.firstElementChild;if(i){var h=i.style.backgroundImage;if(h){var j=h.lastIndexOf("/");i.style.backgroundImage=h.substr(0,j+1).concat(f,".png")}}}};return d});define("DS/SWXeDrawingsAnd3DPlay/eDwShadedCmd",["DS/SWXeDrawingsAnd3DPlay/eDwBaseCmd"],function(a){return a.extend({beginExecute:function(){var b=this.getViewer();if(b){b.setDrawMode("Shaded")}this._parent()}})});define("DS/SWXeDrawingsAnd3DPlay/eDwExplodeCmd",["UWA/Core","DS/SWXeDrawingsAnd3DPlay/eDwBaseCmd","DS/Controls/Slider"],function(c,b,a){return b.extend({execute:function(){var d=new c.createElement("div",{styles:{position:"relative",left:"40px",right:"40px","max-height":"200px","pointer-events":"auto",top:"22px"}});d.setAttributes({id:"edw-explode-panel"});d.inject(this.getFrameWindow().getUIFrame());d.setPosition(this.getActiveABPosition());var f=this.getViewer();var e=new a({minValue:0,maxValue:10,stepValue:0.1});e.displayStyle="vertical";e.addEventListener("change",function(g){f.setExplosionLevel(g.dsModel.value)});e.inject(d);this.insertOnAB(d);this._parent()},onDone:function(){var d=document.querySelector("#edw-explode-panel");if(d){d.destroy();this.getViewer().setExplosionLevel(0)}}})});define("DS/SWXeDrawingsAnd3DPlay/eDwWireFrameCmd",["DS/SWXeDrawingsAnd3DPlay/eDwBaseCmd"],function(a){return a.extend({beginExecute:function(){var b=this.getViewer();if(b){b.setDrawMode("Wireframe")}this._parent()}})});define("DS/SWXeDrawingsAnd3DPlay/eDwShadedWithOutlineCmd",["DS/SWXeDrawingsAnd3DPlay/eDwBaseCmd"],function(a){return a.extend({beginExecute:function(){var b=this.getViewer();if(b){b.setDrawMode("ShadedWithEdges")}this._parent()}})});define("DS/SWXeDrawingsAnd3DPlay/eDwHomeCmd",["DS/SWXeDrawingsAnd3DPlay/eDwBaseCmd"],function(a){return a.extend({beginExecute:function(){var b=this.getViewer();b.SelectionMgr.unSelectAllObjects();b.getHCView().setCamera(b.origCamera);this._parent()},execute:function(){this._parent();this.end()}})});define("DS/SWXeDrawingsAnd3DPlay/eDwMoveCmd",["UWA/Core","DS/SWXeDrawingsAnd3DPlay/eDwBaseCmd",],function(c,b,a){return b.extend({execute:function(){this.getViewer().CompXformMgr.activateMoveOp()},onDone:function(){this.getViewer().CompXformMgr.deactivateMoveOp()}})});define("DS/SWXeDrawingsAnd3DPlay/eDwPlayCmd",["DS/SWXeDrawingsAnd3DPlay/eDwBaseCmd",],function(a){return a.extend({beginExecute:function(){var b=this.getViewer().ViewMgr;if(b.isActive()){b.stop()}else{b.start()}this._parent()},endExecute:function(){this.getViewer().ViewMgr.stop();this._parent()}})});define("DS/SWXeDrawingsAnd3DPlay/eDwViewModeCmd",["DS/SWXeDrawingsAnd3DPlay/eDwBaseCmd"],function(b){return b.extend({beginExecute:function(){a(this.getViewer());this._parent()},onDone:function(){a(this.getViewer());this._parent()}});function a(c){c.setPerspectiveMode(!c.getPerspectiveMode())}});define("DS/SWXeDrawingsAnd3DPlay/eDwBaseSetViewCmd",["DS/SWXeDrawingsAnd3DPlay/eDwBaseCmd",],function(a){return a.extend({setViewOrientation:function(b){this.getViewer().ViewMgr.setViewOrientation(b);this._parent()}})});define("DS/SWXeDrawingsAnd3DPlay/eDwLeftCmd",["DS/SWXeDrawingsAnd3DPlay/eDwBaseSetViewCmd"],function(a){return a.extend({beginExecute:function(){this.setViewOrientation(Communicator.ViewOrientation.Left);this._parent()}})});define("DS/SWXeDrawingsAnd3DPlay/eDwBackCmd",["DS/SWXeDrawingsAnd3DPlay/eDwBaseSetViewCmd"],function(a){return a.extend({beginExecute:function(){this.setViewOrientation(Communicator.ViewOrientation.Back);this._parent()}})});define("DS/SWXeDrawingsAnd3DPlay/eDwBottomCmd",["DS/SWXeDrawingsAnd3DPlay/eDwBaseSetViewCmd"],function(b,a){return b.extend({beginExecute:function(){this.setViewOrientation(Communicator.ViewOrientation.Bottom);this._parent()}})});define("DS/SWXeDrawingsAnd3DPlay/eDwTopCmd",["DS/SWXeDrawingsAnd3DPlay/eDwBaseSetViewCmd"],function(a){return a.extend({beginExecute:function(){this.setViewOrientation(Communicator.ViewOrientation.Top);this._parent()}})});define("DS/SWXeDrawingsAnd3DPlay/eDwFrontCmd",["DS/SWXeDrawingsAnd3DPlay/eDwBaseSetViewCmd"],function(a){return a.extend({beginExecute:function(){this.setViewOrientation(Communicator.ViewOrientation.Front);this._parent()}})});define("DS/SWXeDrawingsAnd3DPlay/eDwRightCmd",["DS/SWXeDrawingsAnd3DPlay/eDwBaseSetViewCmd"],function(a){return a.extend({beginExecute:function(){this.setViewOrientation(Communicator.ViewOrientation.Right);this._parent()}})});define("DS/SWXeDrawingsAnd3DPlay/eDwIsoCmd",["DS/SWXeDrawingsAnd3DPlay/eDwBaseSetViewCmd"],function(a){return a.extend({beginExecute:function(){this.setViewOrientation(Communicator.ViewOrientation.Iso);this._parent()}})});define("DS/SWXeDrawingsAnd3DPlay/eDwNormalCmd",["DS/SWXeDrawingsAnd3DPlay/eDwBaseSetViewCmd"],function(a){return a.extend({beginExecute:function(){this.getViewer().SelectionMgr.setViewToSelectedFace();this._parent()}})});define("DS/SWXeDrawingsAnd3DPlay/eDwBaseSectionCmd",["UWA/Core","DS/SWXeDrawingsAnd3DPlay/eDwBaseCmd","DS/SWXeDrawingsAnd3DPlay/eDwCmdStack","DS/SWXeDrawingsAnd3DPlay/eDwUtils"],function(e,c,b,a){var d=c.extend({init:function(f){return this._parent(f)},setSectionPlane:function(k){var h=this.getXSectionMgr();h.SectionCapVisibility=true;var n=this.getViewer();n.SectionPlaneMap=n.SectionPlaneMap||{};var o=1;var l="auto";if(k===d.NoPlane){var r=h.HCXSectionMgr.getCuttingSectionCount();for(var m=0;m<r;m++){var p=h.HCXSectionMgr.getCuttingSection(m);n.SectionPlaneMap[m]=p.getPlane(0);p.clear()}h.turnOnSectionPlane(false);o=0.4;l="none"}else{h.turnOnSectionPlane(true);h.setSectionPlane(k);var j=k.Index;var g=n.SectionPlaneMap[j];if(g){var q=h.HCXSectionMgr;var p=q.getCuttingSection(j);p.updatePlane(0,g);delete n.SectionPlaneMap[j]}}var f=a.getElements("[data-name='Align'],[data-name='Flip']");for(var m=0;m<f.length;++m){f[m].style.opacity=o;f[m].style.pointerEvents=l}},onDone:function(){if(b.isCmdOnTop(this)||!b.getTopCmd().setSectionPlane){this.setSectionPlane(d.NoPlane)}this._parent()},getXSectionMgr:function(){return this.getViewer().XSectionMgr}});d.NoPlane=-1;return d});define("DS/SWXeDrawingsAnd3DPlay/eDwSectionYZCmd",["UWA/Core","DS/SWXeDrawingsAnd3DPlay/eDwBaseSectionCmd","eDwTypes"],function(c,b,a){return b.extend({execute:function(){this.setSectionPlane(a.SectionPlaneOrientation.YZ);this._parent()}})});define("DS/SWXeDrawingsAnd3DPlay/eDwSectionZXCmd",["UWA/Core","DS/SWXeDrawingsAnd3DPlay/eDwBaseSectionCmd","eDwTypes"],function(c,b,a){return b.extend({execute:function(){this.setSectionPlane(a.SectionPlaneOrientation.ZX);this._parent()}})});define("DS/SWXeDrawingsAnd3DPlay/eDwSectionFlipCmd",["DS/SWXeDrawingsAnd3DPlay/eDwBaseSectionCmd",],function(b){return b.extend({init:function(c){this._parent(c,{mode:"shared",isAsynchronous:false})},execute:function(){a(this.getXSectionMgr());this._parent()},onDone:function(){a(this.getXSectionMgr())}});function a(c){c.activateCurrent();c.flipSectionPlane()}});define("DS/SWXeDrawingsAnd3DPlay/eDwSectionXYCmd",["UWA/Core","DS/SWXeDrawingsAnd3DPlay/eDwBaseSectionCmd","eDwTypes"],function(c,b,a){return b.extend({execute:function(){this.setSectionPlane(a.SectionPlaneOrientation.XY);this._parent()}})});define("DS/SWXeDrawingsAnd3DPlay/eDwSectionAlignCmd",["DS/SWXeDrawingsAnd3DPlay/eDwBaseSectionCmd",],function(a){return a.extend({init:function(c){this._parent(c,{mode:"shared",isAsynchronous:false})},execute:function(){b(this.getXSectionMgr());this._parent()}});function b(c){c.activateCurrent();c.setViewToSectionPlane()}});define("DS/SWXeDrawingsAnd3DPlay/eDwComponentsCmd",["DS/SWXeDrawingsAnd3DPlay/eDwBaseCmd","DS/SWXeDrawingsAnd3DPlay/eDwUtils"],function(c,a){var b=c.extend({init:function(d){return this._parent(d)},beginExecute:function(){var d=b.getPanel();d.setStyle("display","block");this.addEventHandler("click",d,"edrawings-menu-close",this,"cancel");this._parent()},onDone:function(){this.closeComponentsPanel();this._parent()},endExecute:function(){this.closeComponentsPanel();this._parent()},closeComponentsPanel:function(){var d=b.getPanel();d.setStyle("display","none");this.removeEventHandler("click",d)}});b.addBaseHTML=function(){var e=UWA.createElement("div",{html:"<div id='edrawings-component-tree-menu' class='edrawings-submenu edrawings-menu edrawings-common-panel-props'> </div>"});var d=a.getElement(".LayerSet");e.inject(d,"after")};b.removeBaseHTML=function(){var d=b.getPanel();if(d){d.remove()}};b.getPanel=function(){return a.getElement("#edrawings-component-tree-menu")};return b});define("DS/SWXeDrawingsAnd3DPlay/eDwSheetsCmd",["UWA/Core","DS/SWXeDrawingsAnd3DPlay/eDwBaseCmd","DS/SWXeDrawingsAnd3DPlay/eDwUtils"],function(d,c,a){var b=c.extend({init:function(e){return this._parent(e)},beginExecute:function(){var f=this.getViewer();var e=b.getPanel();e.setStyle("display","block");this.addEventHandler("click",e,"edrawings-menu-close",this,"cancel");this._parent()},onDone:function(){this.closeConfigPanel();this._parent()},endExecute:function(){this.closeConfigPanel();this._parent()},closeConfigPanel:function(){var e=b.getPanel();e.setStyle("display","none");this.removeEventHandler("click",e)}});b.addBaseHTML=function(){var f=d.createElement("div",{html:"<div id='edrawings-sheet-tree-menu' class='edrawings-submenu edrawings-menu edrawings-common-panel-props'> </div>"});var e=a.getElement(".LayerSet");f.inject(e,"after")};b.removeBaseHTML=function(){var e=b.getPanel();if(e){e.remove()}};b.getPanel=function(){return a.getElement("#edrawings-sheet-tree-menu")};return b});define("DS/SWXeDrawingsAnd3DPlay/eDwConfigurationsCmd",["UWA/Core","DS/SWXeDrawingsAnd3DPlay/eDwBaseCmd","DS/SWXeDrawingsAnd3DPlay/eDwUtils"],function(d,c,a){var b=c.extend({init:function(e){return this._parent(e)},beginExecute:function(){var e=b.getPanel();e.setStyle("display","block");this.addEventHandler("click",e,"edrawings-menu-close",this,"cancel");this._parent()},onDone:function(){this.closeConfigPanel();this._parent()},endExecute:function(){this.closeConfigPanel();this._parent()},closeConfigPanel:function(){var e=b.getPanel();e.setStyle("display","none");this.removeEventHandler("click",e)}});b.addBaseHTML=function(){var f=d.createElement("div",{html:"<div id='edrawings-configurations-menu' class='edrawings-submenu edrawings-menu edrawings-common-panel-props'> </div>"});var e=a.getElement(".LayerSet");f.inject(e,"after")};b.removeBaseHTML=function(){var e=b.getPanel();if(e){e.remove()}};b.getPanel=function(){return a.getElement("#edrawings-configurations-menu")};return b});define("DS/SWXeDrawingsAnd3DPlay/eDwLayersCmd",["UWA/Core","DS/SWXeDrawingsAnd3DPlay/eDwBaseCmd","DS/SWXeDrawingsAnd3DPlay/eDwUtils"],function(d,c,a){var b=c.extend({init:function(e){return this._parent(e)},beginExecute:function(){var e=b.getPanel();e.setStyle("display","block");this.addEventHandler("click",e,"edrawings-menu-close",this,"cancel");this._parent()},onDone:function(){this.closeConfigPanel();this._parent()},endExecute:function(){this.closeConfigPanel();this._parent()},closeConfigPanel:function(){var e=b.getPanel();e.setStyle("display","none");this.removeEventHandler("click",e)}});b.addBaseHTML=function(){var f=d.createElement("div",{html:"<div id='edrawings-layer-control-menu' class='edrawings-submenu edrawings-menu edrawings-common-panel-props'> </div>"});var e=a.getElement(".LayerSet");f.inject(e,"after")};b.removeBaseHTML=function(){var e=b.getPanel();if(e){e.remove()}};b.getPanel=function(){return a.getElement("#edrawings-layer-control-menu")};return b});define("DS/SWXeDrawingsAnd3DPlay/eDwMeasureCmd",["UWA/Core","DS/SWXeDrawingsAnd3DPlay/eDwBaseCmd","DS/SWXeDrawingsAnd3DPlay/eDwUtils"],function(d,c,a){var b=c.extend({init:function(e){return this._parent(e)},beginExecute:function(){var e=b.getPanel();e.setStyle("display","block");var f=this.getViewer().MeasureMgr;require(["eDwUIUtils"],function(g){g.syncMeasureModeUI(f);f.activateMeasure(f.getMeasureMode())});this._parent()},onDone:function(){this.closeConfigPanel();this._parent()},endExecute:function(){this.closeConfigPanel();this._parent()},closeConfigPanel:function(){this.getViewer().MeasureMgr.deactivateMeasure();var e=b.getPanel();e.setStyle("display","none")}});b.addBaseHTML=function(){var f=d.createElement("div",{html:"<div id='edrawings-measure-menu' class='edrawings-submenu edrawings-menu edrawings-common-panel-props'> </div>"});var e=a.getElement(".LayerSet");f.inject(e,"after")};b.removeBaseHTML=function(){var e=b.getPanel();if(e){e.remove()}};b.getPanel=function(){return a.getElement("#edrawings-measure-menu")};return b});require.config({paths:{eDrawingsBase:"eDrawingsJS/eDrawingsBase.min",jquery:"eDrawingsJS/jquery/jquery-2.1.4.min","jquery-ui":"eDrawingsJS/jquery/jquery-ui-1.11.4.min","jquery-ajax-native":"eDrawingsJS/jquery/jquery-ajax-native",edrawings:"eDrawingsJS/edrawings.min"},shim:{eDrawingsBase:{deps:["jquery"]},"jquery-ui":{deps:["jquery"]},"jquery-ajax-native":{deps:["jquery"]},edrawings:{deps:["eDrawingsBase","jquery-ui"]}}});define("DS/SWXeDrawingsAnd3DPlay/eDrawingsExp",["DS/3DPlay/3DPlay","UWA/Class","DS/WebInfraUI/Notification","DS/SWXeDrawingsAnd3DPlay/eDwUtils","DS/SWXeDrawingsAnd3DPlay/eDwComponentsCmd","DS/SWXeDrawingsAnd3DPlay/eDwConfigurationsCmd","DS/SWXeDrawingsAnd3DPlay/eDwSheetsCmd","DS/SWXeDrawingsAnd3DPlay/eDwLayersCmd","DS/SWXeDrawingsAnd3DPlay/eDwMeasureCmd","DS/SWXeDrawingsAnd3DPlay/eDwCmdStack","jquery-ui","edrawings"],function(c,b,o,n,a,h,e,m,d,f){var i=b.extend({init:function(r){this.mCmds=[];this._parent(r)},postCreate:function(s,t){this.mCanvasID="eDrawing-Canvas-"+s;var r=t.getViewerFrame();r.setAttribute("id",this.mCanvasID)},loadAsset:function(u,w,r,t,v){var s=this;require(["eDrawingsWebViewerUtils","eDwEventMgr","eDwUIBaseEventHandlers","eDwUIUtils","eDwServiceMgr"],function(H,G,C,E,B){s.eDwWVUtils=H;console.excludeDebugLogCategories=["UIEvents","BaseSelOp","Operator"];var z=n.getElement(".wux-afr-framewindow");if(!z.id){z.id="wux-afr-framewindow-id"}var y=new C(z.id,s.mCanvasID);function F(){var K="Session timed out.  Please re-open model.";c.sendEvent(r.args.ctx,eventType.notif,o.error,{msg:K})}function A(K){q(C,G,y,s,t,this,F)}var J={URL:u.asset.filename+"."+u.asset.format,RenderType:"ShadedWithEdges",Tree:true,Measure:false,Section:true,Explode:true,DragDrop:false,Move:false,AR:false,DeleteModelCacheFileWhenDone:true,StreamAlwaysConnected:true};s.mCmds=[a,h,e,m,d];for(var D=0;D<s.mCmds.length;D++){s.mCmds[D].addBaseHTML()}g();B.create(i.Server);E.loadComponentHTML(J);k(C,G,y,s,J,t,A,F);H.startViewer(i.Server,s.mCanvasID,J,null,v);var x=n.getElement("#"+s.mCanvasID);var I=x.getParent();I.setStyles({"background-color":"white","z-index":100})})},getModel:function(r){return r.getModel()},dispose:function(){var r;while(r=f.getTopCmd()){r.cancel()}for(var s=0;s<this.mCmds.length;s++){this.mCmds[s].removeBaseHTML()}j();if(this.eDwView&&this.eDwWVUtils){this.eDwWVUtils.shutdownViewer(this.eDwView)}delete this.eDwView}});var l=n.getLocalStorageSetting("devserver");i.Server=l?l:"https://2019x.qbittel.com";function k(u,x,v,z,t,w,s,y){v.addHTMLEventHandlers(t);v.addDefaultHTMLPanelCloseEventHandlers();$("#"+z.mCanvasID).on("edw:AddViewerEvents",function(C,B){B.origCamera=B.getHCView().getCamera();v.setViewer(B);u.addViewerEventHandlers(v);var D=B;v.infoBtnResizeHandler=function(G){var F=0;var E=setInterval(function(){if(F>120){clearInterval(E);F=0}else{D.HCViewer.resizeCanvas();F++}},10)};var A=n.getElement("#info");if(A){A.addEvent("mouseup",v.infoBtnResizeHandler)}});var r=x.get();r.addEventHandlerFunc("Init",w);r.addEventHandlerFunc("Done",s);r.addEventHandlerFunc("Timeout",y)}function q(t,w,u,y,v,s,x){u.removeHTMLEventHandlers();var z=n.getElement("#info");if(z){z.removeEvent("mouseup",u.infoBtnResizeHandler)}$("#"+y.mCanvasID).off("edw:AddViewerEvents");t.removeViewerEventHandlers();var r=w.get();r.removeEventHandlerFunc("Init",v);r.removeEventHandlerFunc("Done",s);r.removeEventHandlerFunc("Timeout",x)}function g(){var s=UWA.createElement("div",{html:'<div id="edrawings-context-menu"></div>'});var r=n.getElement(".LayerSet");s.inject(r,"after")}function j(){var r=n.getElement("#edrawings-context-menu");if(r){r.remove()}}function p(t,s,r){if(t.length){require([t.shift()],function(u){if(u){s.push(u)}requireQueue(t,s,r)})}else{r.apply(null,s)}}return i});define("DS/SWXeDrawingsAnd3DPlay/3DPlayeDrawingsExperience",["DS/3DPlay/3DPlay","UWA/Core","UWA/Controls/Notify","DS/3DPlayExperienceModule/3DPlayExperience","DS/ApplicationFrame/FrameWindow","DS/WebSystem/Environment","DS/WebSystem/Css","DS/WebInfraUI/Notification","DS/WebappsUtils/WebappsUtils","DS/SWXeDrawingsAnd3DPlay/eDwBaseCmd","DS/SWXeDrawingsAnd3DPlay/eDrawingsExp","DS/SWXeDrawingsAnd3DPlay/eDwUtils"],function(n,e,k,b,s,j,c,o,d,a,l,g){var p=b.extend({init:function(v){v=v||{};v.mode="eDrawings";v.FrameWindow=s;v.commandApplication=false;v.workbenchs=v.workbenchs||[];v.workbenchs.unshift({name:"3DPlayeDrawingsExperience",module:"SWXeDrawingsAnd3DPlay"});this._parent(v);c(l.Server+"/css/eDrawings.css");c("SWXeDrawingsAnd3DPlay/3DPlayeDrawingsExperience.css",1)},preCreate:function(){var v={visu:{},ui:{displayActionBar:true}};this.args=e.extend(v,this.args,true)},postCreate:function(){var v=SHARE.Core.getSplashScreen(this.args.ctx);v.elements.container.setStyles({position:"absolute",display:"block","z-index":"10",});this.PanelManager.createTopMenu({ctx:this.args.ctx,container:this.frmWindow.getUIFrame(),experience:this,showBubbleMenu:this.args.options.showBubbleMenu});this.PanelManager.createDefaultHelp();this.mExp=new l;this.mExp.postCreate(this.args.ctx,this.frmWindow);this.progress.visible()},loadAsset:function(x,y){if(this.mExp){this.progress.visible();f(u+","+r,"none");var v=this;var A=this.frmWindow.getActionBar();m(A);this.mExp.loadAsset(x,y,this,function z(D){v.progress.hide();var B=SHARE.Core.getSplashScreen(v.args.ctx);B.elements.container.setStyles({display:"none",});q(D,v);m(A);v.mExp.eDwView=D;D.getModel().resetToDefault();v.publish("ASSET/LOADINGFINISHED",{model:null,ctx:v.args.ctx,loadAssertInfo:null});var C=g.getElements("#eLogo");var E=g.getElements(".preview__title");if(E.length&&!C.length){v.mLogo=i();v.mLogo.inject(E[0],"before")}},function w(B){v.progress.hide();t(B)})}},clearView:function(){this.notifScreen.clearAll();if(this.modelLoader){this.modelLoader.abort()}this.autoReframe=true;if(this.mLogo){this.mLogo.destroy()}this.mExp.dispose();if(this.isFakeRootMode&&this.modelLoader){this.modelLoader.setSceneGraph()}this._parent(arguments)},dispose:function(){if(this.mLogo){this.mLogo.destroy()}this.mExp.dispose();this._parent(arguments)},testBrowser:function(){return BrowserSupport.ok}});var h="[data-name='Sheets'], [data-name='Layers']";var u="[data-name='Home']";var r="[data-name='Explode'], [data-name='Measure'],[data-name='SectionView'],[data-name='CameraViews'], [data-name='Play'],[data-name='Display'], [data-name='Components'],[data-name='Configurations'], [data-name='Measure'],[data-name='Move']";function f(v,y){if(v){var x=g.getElements(v);for(var w=0;w<x.length;++w){x[w].style.display=y}}}function m(v){return v&&v.toggle()}function q(A,B){var x=B.mExp.getModel(A);var v=u;var w="";if(x.isDrawing()){v+=","+h;w=r+"[data-name='Measure']"}else{if(x.isPart()){v=u+","+r;w="[data-name='Explode'], [data-name='Components'],"+h}else{v=u+","+r;w=h}}if(x.getModelViews().length<2||x.isDrawing()){w=w?w+",":w;w=w+"[data-name='Configurations'], [data-name='Move']"}f(v,"");f(w,"none");var z=g.getElements("[data-name='Align'],[data-name='Flip']");for(var y=0;y<z.length;++y){z[y].style.opacity=0.4;z[y].style.pointerEevents="none"}}function i(){return e.createElement("img",{id:"eLogo",src:d.getWebappsBaseUrl()+"SWXeDrawingsAnd3DPlay/assets/icons/Logo_e.png",styles:{"margin-right":"10px"}})}function t(z){var v=g.getElement(".LayerSet");var w=new e.Controls.Notify();w.inject(v);var y;switch(z.ErrorCode){case"AJAXFailure":y="Server unavailable.  Please try again.  If the failure persistes, please report this message to customer support.  ";break;case"IncompleteFileProcessing":y="Unable to complete processing of this file.";break;default:y="Model viewing failed.  Please reload and try again.  If the failure persists, please report this information to customer support:";if(z.ServerID){y+="\nServer: "+z.ServerID+"\nModel ID: "+z.ModelCacheName}else{if(z.ErrorData.length){for(var x in z.ErrorData){y+=z.ErrorData[x]+"\n"}}}break}if(y){w.addMessage(y,true)}}return p});