/*!  COPYRIGHT DASSAULT SYSTEMES 2019   */
define("DS/PADServices/views/utils/ComboSelector",["css!DS/PADServices/PADServices.css","UWA/Core","UWA/Controls/Abstract","UWA/Class/Events","DS/Menu/ContextualMenu","DS/Menu/Menu","DS/Core/Core",],function(d,h,g,b,c,e,f){var a=g.extend(b,{defaultOptions:{treedocument:null,disabled:false},init:function(i){this._parent(i);var j=this;this.elements.container=h.createElement("div",{"class":"comboSelector "+(i.className?i.className:"")});this.elements.inner=h.createElement("div",{"class":"comboSelector-inner"}).inject(this.elements.container);this.elements.text=h.createElement("div",{"class":"comboSelector-text"}).inject(this.elements.inner);this.elements.expander=h.createElement("span",{"class":"comboSelector-expander wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-expand-down"}).inject(this.elements.inner);this.elements.container.addEventListener("click",j._launchCtxMenu.bind(j));this.elements.container.addEventListener("contextmenu",j._launchCtxMenu.bind(j));if(this.options.treedocument===null){throw new Error("Invalid attribute in constructor. Missing treedocument")}this.options.treedocument.getXSO().onPostAdd(this._redrawInnerText.bind(this));this.options.treedocument.getXSO().onPostRemove(this._redrawInnerText.bind(this));this.disabled(this.options.disabled);this._redrawInnerText()},disabled:function(i){if(i){this.elements.container.setAttribute("disabled","");this.options.disabled=i}else{this.elements.container.removeAttribute("disabled","");this.options.disabled=i}},_launchCtxMenu:function(o){var p=[],n=this;if(this.options.disabled===false){var k=this.options.treedocument.getRoots();for(var j=0;j<k.length;j++){var l=k[j].options.icons&&k[j].options.icons.length&&k[j].options.icons[0].iconName?{content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-"+k[j].options.icons[0].iconName,}:undefined;p.push({title:k[j].getLabel(),type:"CheckItem",state:k[j].isSelected()?"selected":undefined,fonticon:l,action:{"this":this,context:k[j],callback:this._typeSelectedInMenu.bind(this)}})}if(p.length){var m=this.elements.container.getBoundingClientRect();e.show(p,{position:{x:m.left,y:m.bottom}})}}},_typeSelectedInMenu:function(j){var i=j.context;i.select(true);this.dispatchEvent("onSelect",i);this.dispatchEvent("onSelectionChange");this._redrawInnerText()},_redrawInnerText:function(){this.elements.text.empty();var m="",j=[];var n=this.options.treedocument.getSelectedNodes();for(var k=0;k<n.length;k++){j.push(n[k].getLabel())}if(j.length){m=j.join(", ")}else{m=this.options.nlsEmptySelection}if(n.length===1&&n[0].options.icons){var l=h.createElement("div",{"class":"iconMenu wux-ui-3ds wux-ui-3ds-2x wux-ui-3ds-"+n[0].options.icons[0].iconName}).inject(this.elements.text);if(n[0].options.subLabel){this.elements.text.title=n[0].options.subLabel}}h.createElement("p",{text:m}).inject(this.elements.text)}});return a});define("DS/PADServices/views/utils/Iconbar",["css!DS/PADServices/PADServices.css","css!DS/UIKIT/UIKIT","UWA/Core","UWA/Event","UWA/Utils","UWA/Controls/Abstract","DS/UIKIT/Menu","DS/UIKIT/Tooltip","DS/UIKIT/DropdownMenu"],function(i,m,f,p,j,g,h,l,a){function c(u,t){var q=u.length;for(var r=0;r<q;r++){var s=u[r];t(s,r)}}var e=f.Utils.Client.Features.touchEvents;function o(r,t,q){var s;return function(){var x=this,w=arguments,v,u=function(){s=null;if(!q){r.apply(x,w)}};v=q&&!s;clearTimeout(s);s=setTimeout(u,t);if(v){r.apply(x,w)}}}var n=(function(){var q=/^(divider)$/;return function(s){var t=false;var u,r;if(!s){return false}u=s.split(" ");for(r=0;r<u.length&&t===false;r++){if(q.test(u[r])){t=true}}return t}}());var d=h.extend({name:"iconbar-items",templateClassname:"iconbar-template"});var k=a.extend({show:function(){document.body.style.overflow="hidden";this._parent();document.body.style.overflow="auto"}});var b=g.extend({name:"iconbar",menu:null,overflowMenu:null,overflowMenuTrigger:null,init:function(q){if(q.renderTo===undefined){throw new Error("renderTo options is Mandatory")}var r=this;this._parent(q);this.buildSkeleton();this.handleEvents();this.show()},buildSkeleton:function(){var r=this.elements,q=this.options;if(r.container){return}this.menu=new d({multiSelect:q.multiSelect});this.addItem(q.items);r.container=this.menu.elements.container;r.container.className=this.getClassNames();r.container.addClassName("enx-iconbar");if(q.renderTo&&q.renderTo.nodeType===1){r.container.inject(q.renderTo);delete q.renderTo}},buildOverflowMenu:function(){var r=[],s,q;if(!this.overflowMenuTrigger){this.overflowMenuTrigger=f.createElement("li",{"class":this.name+"-overflow-menu-trigger item",html:{tag:"span","class":"fonticon fonticon-menu-dot"}})}this.overflowMenu&&this.overflowMenu.destroy();this.overflowMenu=null;this.menu.items.forEach(function(t){if(t.content&&t.content.type==="dropdown"){return}q=true;s={className:(t.id+" "+(t.className?t.className:"")).trim(),fonticon:t.fonticon,text:t.text,name:t.name,handler:t.handler,selectable:t.selectable,selected:t.selected,disabled:t.disabled};if(t.content&&t.content.options.items&&t.content.type!=="icondropdown"){s.items=t.content.options.items.map(function(u){u.className=(t.id+" "+(u.className?u.className:"")).trim();u.selectable=true;return u})}else{if(t.content&&t.content.type==="icondropdown"){q=false;t.content.options.items&&t.content.options.items.forEach(function(u){r.push({className:(t.id+" "+(u.className?u.className:"")).trim(),fonticon:u.fonticon,icon:u.icon,handler:u.handler,text:u.description})})}}q&&r.push(s)});this.overflowMenu=new k({multiSelect:this.options.multiSelect,items:r,target:this.overflowMenuTrigger,events:this.options.events})},getItem:function(u){var s,q,r,t=false;for(s=0,q=this.menu.items.length;s<q;s++){t=this.menu.items[s];if(u&&u.nodeType){r=u.hasClassName("item")?u:u.getParent();if(t.id===r.id){break}}else{if(s===u||t.id===u||t.name===u){break}}t=false}return t},handleEvents:function(){this.events={container:{click:function(q){var s=p.getElement(q),r=this.getItem(s);if(r.selectable){this.select(r.name,!r.selected)}if(r){if(r.content){window.requestAnimationFrame?window.requestAnimationFrame(this.displayContent.bind(this,r)):this.displayContent(r)}if(r.tooltip&&r.tooltip.isVisible&&!e){r.tooltip.hide()}this.dispatchEvent("onClick",[q,r],this);if(typeof r.handler==="function"){r.handler.call(this,q,r)}}}.bind(this)}};this.elements.container.addEvents(this.events.container);this.events.window={resize:o(this.resize,100).bind(this)};window.addEventListener("resize",this.events.window.resize)},addItem:function(q){j.splat(q).forEach(function(r){this._addItem(r)},this);this.buildOverflowMenu();return this},_addItem:function(q){var r=this.menu._addItem(q);r.content=r.innerComponent||r.content;if(!n(q.className)&&r.text){r.tooltip=new l({target:r.elements.container,body:r.text,trigger:r.tooltipTrigger||this.options.tooltipsTrigger||"hover focus"});r.tooltip.getContent().addClassName("enx-tooltip-iconbar");r.elements.container.getElement(".item-text").remove()}},isOverflowing:function(){return this.menu.items.some(function(q){return !q.elements.container.isInViewport(this.elements.container,true,true)}.bind(this))},isInjected:function(){if(!this.elements){return}if(!this.elements.container){return}return this.elements.container.isInjected()},resize:(function(){function r(){var s=this.elements.container.getBoundingClientRect();return this.menu.items.filter(function(u){var t=u.elements.container.getBoundingClientRect();return(t.top+t.height>s.bottom)||(t.left+t.width>s.right)},this)}function q(s){var t;this.overflowMenu.items.forEach(function(u){t=s.some(function(v){if(!u.className){return false}return u.className&&u.className.indexOf(v)!==-1});t?u.elements.container.removeClassName("hidden"):u.elements.container.addClassName("hidden")})}return function(){var s,t;this.overflowMenuTrigger&&this.overflowMenuTrigger.isInjected()&&this.overflowMenuTrigger.remove();if(this.overflowMenu.isVisible){this.overflowMenu.hide()}if(this.elements.container&&!this.isOverflowing()){return}s=r.call(this);t=s.map(function(u){return u.id});q.call(this,t);if(s.length){this.menu.elements.wrapper.insertBefore(this.overflowMenuTrigger,s[0].elements.container);while(!this.overflowMenuTrigger.isInViewport(this.elements.container,true,true)&&this.overflowMenuTrigger.previousSibling){this.menu.elements.wrapper.insertBefore(this.overflowMenuTrigger,this.overflowMenuTrigger.previousSibling);s.push(this.overflowMenuTrigger.nextSibling);this.overflowMenuTrigger.nextSibling.id&&t.push(this.overflowMenuTrigger.nextSibling.id);q.call(this,t)}}}}()),displayContent:function(r){var q=f.clone(r.content.options);q.target=r.elements.container;if(!r.content.created){if(r.content.type==="dropdown"){require(["DS/UIKIT/Dropdown"],function(s){r.content.component=new s(q).show()})}else{if(r.content.type==="icondropdown"){require(["DS/UIKIT/IconDropdown"],function(s){r.content.component=new s(q).show()})}else{if(r.content.type==="dropdownmenu"){r.content.component=new a(q).show();r.content.component.getContent().addClassName("enx-dropdown-iconbar")}else{return}}}r.content.created=true}else{r.content.component&&r.content.component.show()}},select:function(){var q=arguments,t,s,u,r;if(q[0]===undefined||q[0]===null){return}s=(q[1]===undefined)?true:q[1];if(this.options.multiSelect!==true){s&&c(this.elements.container.querySelectorAll(".selected"),function(v){v.removeClassName&&v.removeClassName("selected")});s&&this.overflowMenu.getSelectedItems().forEach(function(v){this.overflowMenu.menus[0].toggleSelection(v);v.elements.container.removeClassName("selectable")},this)}t=this.getItem(q[0]);t.selected=s;if(!t||t.elements.container.hasClassName("divider")){return}t.elements.container[s?"addClassName":"removeClassName"]("selected");u=t.elements.container.id;r=this.overflowMenu.items.filter(function(v){return v.elements.container.hasClassName(u)});if(r.length===1){this.overflowMenu.menus[0].toggleSelection(r[0]);r[0].elements.container.addClassName("selectable");r[0].selected=s}},enableItem:function(r){this.menu.enableItem(r);var q=this.getItem(r);if(q){q.disabled=false}},disableItem:function(r){this.menu.disableItem(r);var q=this.getItem(r);if(q){q.disabled=true}},show:function(){if(!this.isInjected()){return}this._injectionObserver&&this._injectionObserver.disconnect();this._injectionObserver=null;this._parent();if(!window.requestAnimationFrame){this.resize()}else{window.requestAnimationFrame(this.resize.bind(this))}},destroy:function(){window.removeEventListener("resize",this.events.window.resize);this.overflowMenu&&this.overflowMenu.destroy();this.overflowMenuTrigger&&this.overflowMenuTrigger.destroy();this.elements.container.removeEvents(this.events.container);this.menu.items.forEach(function(q){q.tooltip&&q.tooltip.destroy()});this._parent()}});return b});define("DS/PADServices/views/utils/SearchInput",["css!DS/PADServices/PADServices","i18n!DS/PADServices/assets/nls/PADServices.json","UWA/Core","UWA/Controls/Abstract","UWA/Class/Events","UWA/Event","DS/Controls/ButtonGroup","DS/Controls/Button"],function(e,b,f,d,i,h,a,g){var c=d.extend(i,{name:"enx-search-input",init:function(l){this._parent(l);var n=this;this.elements.container=UWA.createElement("div",{"class":this.getClassNames(l.className?l.className:"")});this.elements.inner=UWA.createElement("div",{"class":this.getClassNames("-inner")}).inject(this.elements.container);var o=UWA.createElement("div",{"class":this.getClassNames("-input-container")}).inject(this.elements.inner);this.elements.input=UWA.createElement("input",{"class":this.getClassNames("-input"),type:"text",placeholder:this.options.placeholder?this.options.placeholder:b.searchInput.placeholder}).inject(o);var k=UWA.createElement("div",{"class":this.getClassNames("-right")}).inject(this.elements.inner);var j=UWA.createElement("div",{"class":this.getClassNames("-clear")+this.getClassNames("-btn")}).inject(k);this.elements.clearBtn=UWA.createElement("div",{"class":this.getClassNames("-btnIcon wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-clear"),title:b.searchInput.clear}).inject(j);this.elements.clearBtn.hide();var m=UWA.createElement("div",{"class":this.getClassNames("-search")+this.getClassNames("-btn")}).inject(k);this.elements.searchBtn=UWA.createElement("div",{"class":this.getClassNames("-btnIcon wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-search"),title:b.searchInput.search}).inject(m);this.elements.searchBtn.setStyle("opacity","0.1");this.elements.searchBtn.addEventListener("click",this._onSearch.bind(this));this.elements.clearBtn.addEventListener("click",this._onClearSearch.bind(this));this.elements.input.addEventListener("keyup",this._onSearchInputKeyUp.bind(this));this.elements.input.addEventListener("paste",this._onSearchInputPaste.bind(this));this.elements.input.addEventListener("keydown",this._onSearchInputKeyDown.bind(this))},clear:function(j){this._onClearSearch(null,j)},_onSearch:function(k){var j=this;this.elements.input.blur();this.dispatchEvent("onSearch",{searchStr:this.elements.input.value})},_onClearSearch:function(l,j){var k=this;this.elements.input.value="";this.elements.clearBtn.hide();this.elements.searchBtn.setStyle("opacity","0.1");if(j!==true){this.dispatchEvent("onSearch",{searchStr:this.elements.input.value})}},_onSearchInputKeyUp:function(j){var k=this;if(this.elements.input.value){this.elements.searchBtn.setStyle("opacity","1");this.elements.clearBtn.setStyle("display","inline-block");this.dispatchEvent("onSearch",{searchStr:this.elements.input.value})}else{this.elements.clearBtn.hide();this.elements.searchBtn.setStyle("opacity","0.1");this.dispatchEvent("onSearch",{searchStr:this.elements.input.value})}},_onSearchInputPaste:function(j){var k=this;setTimeout((function(){k._onSearchInputKeyUp()}).bind(this),200)},_onSearchInputKeyDown:function(j){var k=this;if(h.whichKey(j)==="return"||j.keyIdentifier==="Enter"||j.keyIdentifier==="return"){this._onSearch()}h.stopPropagation(j)}});return c});define("DS/PADServices/ws/WSPromises",["UWA/Class/Promise","DS/PADUtils/Configuration","DS/PADUtils/utilsWS/WSAccessV2","DS/PADUtils/utilsWS/WSAccessV1"],function(f,d,e,h){function b(i){return typeof i==="string"?JSON.parse(i):i}function c(j,i){return function(k){var l=arguments;return new f(function(n,m){k.onComplete=function(p){var o=b(p);n(o)};k.onFailure=function(o){m(o)};j[i].apply(j,l)})}}function g(){this._buildPromiseWrappers()}g.prototype={_buildPromiseWrappers:function(){var l=Object.getPrototypeOf(this);var o=e;if(d.getConfig("WSAccessV2")!==true){o=h}var j=Object.getOwnPropertyNames(o);for(var n=0;n<j.length;n++){var k=j[n];if(UWA.is(o[k],"function")){if(!l.hasOwnProperty(k)){var m=c(o,k);Object.defineProperty(l,k,{value:m,writable:false})}}}}};var a;if(!a){a=new g()}return a});define("DS/PADServices/commands/HomeCmd",["DS/ApplicationFrame/Command"],function(b){var a=b.extend({execute:function(c){require(["DS/PADServices/utils/GlobalModelEvents"],function(d){d.getModelEvents().publish({event:"ENXViews/WelcomePanel/activate"})})}});return a});define("DS/PADServices/views/utils/WelcomeAndShell",["css!DS/PADServices/PADServices.css","UWA/Controls/Abstract"],function(a,e){var b=function(i,h,k,j,f){var g={id:k,text:j};if(f){g.fonticon=f}h.actions.push(g)};var c=function(g,i,h){var f={id:i,title:h,actions:[]};g.push(f);return f};var d=e.extend({name:"enx-welcome-shell",defaultOptions:{triptych:{withtransition:true,withoverflowhidden:false,left:{resizable:false,originalState:"open",withClose:false},modelEvents:null},subscriptions:[]},init:function(f){this._parent(f)},initialize:function(){var f=this;return new Promise(function(g){require(["DS/ENOXWelcomePanel/js/ENOXWelcomePanel","DS/ENOXTriptych/js/ENOXTriptych"],function(i,m){var k=f.elements.leftPlaceHolder=UWA.createElement("div",{"class":f.getClassNames("-welcomeLeft")});f.options.triptych.modelEvents=f.options.modelEvents;f.options.triptych.container=f.options.container;var l=f.elements.triptych=new m();l.init(f.options.triptych,k,undefined);var h=[];for(var p=0;p<f.options.activities.length;p++){if(f.options.activities[p].section){var o=f.options.activities[p].section;var j=c(h,o.id,o.title);for(var n=0;n<o.actions.length;n++){b(h,j,o.actions[n].id,o.actions[n].title,o.actions[n].icon)}}else{if(f.options.activities[p].id&&f.options.activities[p].actions){h.push(UWA.clone(f.options.activities[p]))}}}var q=f.elements.welcomePanel=new i({collapsed:false,parentContainer:k,modelEvents:f.options.modelEvents,activities:h});q.render();f.options.subscriptions.push(f.options.modelEvents.subscribe({event:"ENXViews/WelcomeAndShell/setMainView"},function(r){f.options.modelEvents.publish({event:"triptych-set-content",data:{side:"middle",content:r.html}})}));if(f.options.defaultActionId){q.selectAction(f.options.defaultActionId);f.options.modelEvents.publish({event:"welcome-panel-action-selected",data:{id:f.options.defaultActionId}})}g()})})},setAction:function(f){this.elements.welcomePanel.selectAction(f);this.options.modelEvents.publish({event:"welcome-panel-action-selected",data:{id:f}})},destroy:function(){for(var f=0;f<this.options.subscriptions.length;f++){this.options.modelEvents.unsubscribe(this.options.subscriptions[f])}this.elements.triptych.destroy();delete this.elements.triptych}});return d});define("DS/PADServices/views/utils/WizardSteps",["text!DS/PADServices/assets/templates/WizardSteps.html","css!DS/PADServices/PADServices.css","i18n!DS/PADServices/assets/nls/PADServices.json","UWA/Core","UWA/Controls/Abstract","DS/Handlebars/Handlebars","DS/Core/Core","css!DS/UIKIT/UIKIT.css"],function(j,f,b,c,d,a,e,g){var i=a.compile(j);a.registerHelper("getlabel",function(m){var n=require("i18n!"+this.label.file);var o=this.label.key.split(".");var l=n;for(var k=0;k<o.length;k++){l=l[o[k]]}return l});var h=d.extend({name:"enx-wizard-container",defaultOptions:{subscribeTokens:[],modelEvents:null,renderTo:null,steps:null,activeStep:null},init:function(n){this._parent(n);this.elements.container=c.createElement("div",{"class":this.getClassNames()});if(this.options.steps){this.elements.container.setContent(i(this.options.steps))}if(this.options.renderTo){this.elements.container.inject(this.options.renderTo)}this.options.rope=this.elements.container.getElement("div.enx-wizard-rope");this.options.navigator=this.elements.container.getElement("nav.enx-view-navigator");var o=this.elements.container.getElement("a.nav-item.active");if(o){var m=o.id;this._render2ActiveStep(m)}var p=this;var l=this.options.navigator.getElements("a");for(var k=0;k<l.length;k++){l[k].addEventListener("click",function(r){var q=r.currentTarget.id;p.changeStep(q)})}this.options.subscribeTokens.push(this.options.modelEvents.subscribe({event:"ENXViews/WizardSteps/changeStep",},function(r){var q=r.stepId;p.changeStep(q)}))},changeStep:function(k){this._render2ActiveStep(k);this.options.modelEvents.publish({event:"ENXViews/WizardSteps/stepChanged",data:{stepId:k}})},destroy:function(){for(var k=0;k<this.options.subscribeTokens.length;k++){this.options.modelEvents.unsubscribe(this.options.subscribeTokens[k])}this._parent()},_render2ActiveStep:function(r){var l=this.options.navigator.getElements("a");var n=false,m;for(var k=0;k<l.length;k++){var o=l[k];if(n===false){o.removeClassName("filled").addClassName("filled")}else{o.removeClassName("filled")}if(o.id===this.options.activeView){o.removeClassName("active")}if(o.id===r){o.addClassName("active");var p=o.getElement(".view-icon.enx-icon");var q="100%";if(k<l.length-1){q=(Math.floor(100/(l.length+1)))*(k+1)+"%"}this.options.rope.setStyles({width:q,height:"2px"});m=o.id;n=true}}this.options.activeView=m}});return h});define("DS/PADServices/utils/GlobalModelEvents",["DS/CoreEvents/ModelEvents"],function(c){var b=new c();var a={getModelEvents:function(){return b},publish:function(d){return b.publish(d)},subscribe:function(d,e){return b.subscribe(d,e)},unsubscribe:function(d){return b.unsubscribe(d)},unsubscribeAll:function(d){return b.unsubscribeAll(d)}};return a});define("DS/PADServices/utils/SubscriptionHolder",[],function(){function a(b){this.modelEvents=b;this.subscriptions=[]}a.prototype={subscribe:function(b,c){this.subscriptions.push(this.modelEvents.subscribe(b,c))},destroy:function(){for(var c=0;c<this.subscriptions.length;c++){var b=this.subscriptions[c];this.modelEvents.unsubscribe(b)}}};return a});define("DS/PADServices/ws/WSAccess",["UWA/Class/Promise","DS/PADUtils/Configuration","DS/PADUtils/utilsWS/WSAccessV2","DS/PADUtils/utilsWS/WSAccessV1"],function(e,c,d,f){function b(g){return typeof g==="string"?JSON.parse(g):g}var a={executeWS:function(h,g){var i=d;if(c.getConfig("WSAccessV2")!==true){i=f}if(UWA.is(i[h],"function")===false){return e.reject(new Error("PADServices/ws/WSAccess# Unknown Webservice:["+h+"] in DS/PADUtils/utilsWS/WSAccessV2"))}else{return new e(function(k,j){g.onComplete=function(m){var l=b(m);k(l)};g.onFailure=function(l){j(l)};i[h](g)})}}};return a});define("DS/PADServices/utils/Storage",[],function(){function a(g,f,e){if(e){return g+"."+widget.id+"."+f}else{return g+"."+f}}function b(e){this.root=e}b.prototype={set:function(e,f){this.root.setItem(e,JSON.stringify(f))},setWithExpire:function(e,g,f){g.expiresAt=Date.now()+f;this.set(e,g)},get:function(g){var f;try{f=JSON.parse(this.root.getItem(g))}catch(h){console.error(h);return null}if(f&&f.expiresAt){if(Date.now()<f.expiresAt){return f}else{this.root.removeItem(g);return null}}else{return f}},del:function(e){this.root.removeItem(e)},clear:function(){this.root.clear()}};var d={local:new b(localStorage),session:new b(sessionStorage)};var c={buildKey:a};Object.defineProperties(c,{local:{get:function(){return d.local}},sess:{get:function(){return d.session}}});return c});define("DS/PADServices/utils/GlobalUtils",["DS/PlatformAPI/PlatformAPI"],function(c){var b=null;var d=null;var a=null;var e={setExecutionContext:function(f){b=f;d=b.getComponent("AFR_NotificationManager")},getExecutionContext:function(){return b},displayError:function(g,f){if(d){d.addNotif({title:g,message:f.message,level:"error"})}console.error(g);console.groupCollapsed("Error outputs");console.error("Message:"+f.message);console.error("Stack:"+f.stack);console.groupEnd()},uid:function(){return(((1+Math.random())*65536)|0).toString(16).substring(1)},getLang:function(){var f=require("DS/PADUtils/PADSettingsMgt");return f.getSetting("lang")},deserializeDroppedData:function(j){var i={data:{items:[]}};var h=UWA.is(j.dataTransfer.types.indexOf,"function")?"indexOf":"contains",k="";var n=["text/searchitems","text/plain","Text"];for(var m=0;m<n.length&&k==="";m++){var l=j.dataTransfer.types[h](n[m]);if((UWA.is(l,"number")&&l>=0)||(UWA.is(l,"boolean")&&l===true)){k=n[m]}}var f;if(k!==""){f=j.dataTransfer.getData(k);try{i=JSON.parse(f)}catch(g){}}return i},getUser:function(){if(a===null||a===undefined){a=c.getUser()}return a},getUserLogin:function(){var f=e.getUser();var g="";if(f!==undefined){g=f.login}return g},};return e});define("DS/PADServices/utils/ParserUtils",["DS/PADUtils/PADUtilsServices","DS/PADUtils/Configuration"],function(c,a){var b={parseAttributes:function(d){var f={};var e=a.getConfig("treeColumn")?a.getConfig("treeColumn"):"ds6w:label";d.forEach(function(g){if(UWA.is(g.value)&&UWA.is(g.value.replace,"function")){g.value=g.value.replace(/\n/g," ")}if(g.name==="physicalid"||g.name==="resourceid"){f.resourceid=g.value}else{if(g.name==="did"){f.did=g.value}else{if(g.name==="ro.plminstance.V_treeorder"){f.relationOrder=parseFloat(g.value);if(isNaN(f.relationOrder)){f.relationOrder=-1}}else{if(g.name==="matrixtxt"){if(c.checkNotIdentity(g.value)){f.instanceMatrix=g.value}}else{if(g.name==="type_icon_url"){if(!f.icons){f.icons=[]}f.icons.push(g.value)}else{if(g.name==="thumbnail_2d"||g.name==="preview_url"){f.thumbnail=g.value;if(!f.grid){f.grid={}}f.grid.thumbnail="url("+g.value+")"}else{if(e===g.name){f.label=g.value;f.display=f.label}else{if(!f.grid){f.grid={}}f.grid[g.name]=g.value}}}}}}}});if(!f.relationOrder){f.relationOrder=-1}return f},parseStructure:function(d,h,e){var g;if(e===false){}else{var f=d.structures;g=h.length;if(Math.abs(g%2)===1){h.forEach(function(j,i){if(!f.hasOwnProperty(j)){f[j]={};if(g===i+1){f[j].pathLeaf=true}if(Math.abs(i%2)===0){f[j].order=[]}}if(f.order&&f.order.indexOf(j)===-1){f.order.push(j)}f=f[j]})}}return d},buildJSONModelFromExpand:function(f){var i={did2resourceid:{},nodes:{},structures:{}};if(f.results===undefined){throw new Error("Response doesn't contains results")}for(var e=0;e<f.results.length;e++){var n=f.results[e];if(n.hasOwnProperty("attributes")){var l=this.parseAttributes(n.attributes);i.nodes[l.resourceid]=l;if(UWA.is(l.did)){i.did2resourceid[l.did]=l.resourceid}}else{if(n.hasOwnProperty("path")){i=this.parseStructure(i,n.path)}else{if(n.hasOwnProperty("icon__default_thumbnail_2d")){for(var k=0;k<n.icon__default_thumbnail_2d.length;k++){var j=n.icon__default_thumbnail_2d[k];for(var d=0;d<j.did.length;d++){var m=j.did[d];var h=i.did2resourceid[m];var g=i.nodes[h];if(!g.icons||g.icons.length===0){if(!g.icons){g.icons=[]}g.icons.push(j.icon)}if(!g.thumbnail||g.thumbnail.length===0){g.thumbnail=j.thumbnail_2d}}}}}}}return i}};return b});define("DS/PADServices/utils/PlatformURL",["UWA/Promise","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices"],function(d,e){var b=null;var c={};var a={retrievePlatformUrl:function(){return new d(function(g,f){if(b===null){e.getPlatformServices({onComplete:function(h){b=h;g()},onFailure:function(h){f(h)}})}else{g()}})},getPlatformId:function(){return(typeof widget!=="undefined"&&widget.getValue("x3dPlatformId"))?widget.getValue("x3dPlatformId"):"OnPremise"},getTenantInfo:function(h){var g={};for(var f=0;f<b.length;f++){if(b[f].platformId===h){g=b[f];break}}return g},get3DSpaceURL:function(){return a.getPlatformURL("3DSpace")},getPlatformURL:function(g){if(!UWA.is(b,"array")){throw new Error("Platform services not initialize yet")}var f=0,i=a.getPlatformId(),h=a.getTenantInfo(i);if(h[g]===undefined){console.error("No "+g+" URL available for this tenant.");throw new Error("Unknown service "+g)}else{return h[g]}},};return a});define("DS/PADServices/views/utils/DataGridCustoCallback",[],function(){function a(b){b.attributeCusto.options.attrModel.removeRoot(b.nodeModel)}return{removeCallback:a}});define("DS/PADServices/views/utils/ContentChooser",["css!DS/PADServices/PADServices.css","i18n!DS/PADServices/assets/nls/PADServices.json","UWA/Core","UWA/Controls/Abstract","DS/Controls/Button","DS/CollectionView/ResponsiveLargeTilesCollectionView","DS/CollectionView/ResponsiveTilesCollectionView","DS/CollectionView/ResponsiveThumbnailsCollectionView","DS/Tree/TreeDocument","DS/Tree/TreeNodeModel","DS/WebappsUtils/WebappsUtils","DS/UIKIT/Iconbar","DS/ENOXEmptyContent/js/ENOXEmptyContent"],function(h,b,e,q,l,n,f,o,g,k,c,a,i){function p(u,y,x){var t=u.getRoots();var w=[];for(var v=0;v<t.length;v++){var s=t[v];if(x(s,y)){w.push(s)}}return w}function r(s,t){return p(s,t,function(u,v){return(u.options.resourceid===v)})}function m(s,t){return p(s,t,function(u,v){return(u.options.grid&&u.options.grid.leaves&&u.options.grid.leaves.indexOf(v)!==-1)})}function d(t,s){return p(t,s,function(u,v){return(u.options.grid&&u.options.grid.associatedProduct&&u.options.grid.associatedProduct===v)})}var j=q.extend({name:"enx-contentChooser",defaultOptions:{modelEvents:null,model:null,defaultView:"largeTiles",view:{largeTiles:null,tiles:null,thumbnails:null},title:"",subscribeTokens:[]},init:function(t){var v=this;this._parent(t);var s={};this.options.model=new g(s);this.elements.container=e.createElement("div",{"class":this.getClassNames()});this.__addToolbar().inject(this.elements.container);this.elements.content=e.createElement("div",{"class":this.getClassNames("-content")}).inject(this.elements.container);var u=v["__build"+v.options.defaultView]();u.getContent().inject(this.elements.content);this._addSubscribe("ENXViews/ContentChooser/model/"+t.loadKey,this._modelEvent.bind(this));this.elements.withoutContent=e.createElement("div",{"class":this.getClassNames("-withoutContent")}).inject(this.elements.container);this.elements.withoutContent.hide();this.__buildEmptyContent()},render:function(){return this.elements.container},destroy:function(){for(var s=0;s<this.options.subscribeTokens.length;s++){this.options.modelEvents.unsubscribe(this.options.subscribeTokens[s])}},_addSubscribe:function(s,t){this.options.subscribeTokens.push(this.options.modelEvents.subscribe({event:s},t))},_modelEvent:function(s){switch(s.op){case"populate":this.options.model.empty();this.elements.withoutContent.hide();this.elements.content.show();this._addObjectsToModel(s.objects,s.allselected);break;case"populateAppend":this.elements.withoutContent.hide();this.elements.content.show();this._addObjectsToModel(s.objects,s.allselected);break;case"update":this._updatedObjectsInModel(s);break;case"noResult":this.options.model.empty();this.elements.content.hide();this.elements.withoutContent.show();break}},_addObjectsToModel:function(v,s){var x=[];for(var u=0;u<v.length;u++){var w=e.clone(v[u]);x.push(w)}var t=this.options.model;t.withTransactionUpdate(function(){t.addRoot(x);if(s===true){t.selectAll()}})},_updatedObjectsInModel:function(w){var s=this.options.model;var v=w.objects;var u=this;var t=true;s.withTransactionUpdate(function(){for(var C=0;C<v.length;C++){t=true;var x=r(s,v[C].resourceid);if(x.length===1){t=false;if(v[C].opened===true){v[C].statusbarIcons=["trash","broom"];v[C].statusbarIconsTooltips=[b.contentChooser.remove,b.contentChooser.removeFromView];v[C].contextualMenu=[{type:"SeparatorItem"}]}else{v[C].statusbarIcons=["trash"];v[C].statusbarIconsTooltips=[b.contentChooser.remove];v[C].contextualMenu=[{type:"SeparatorItem"}]}if(w.fromCustom){v[C].fromCustom=true}x[0].updateOptions(v[C])}var z=m(s,v[C].resourceid);if(z.length){t=false;for(var D=0;D<z.length;D++){var y=z[D].getAttributeValue("leaves");if(y.length===1){z[D].updateOptions({branchLabel:v[C].label,branchIdentifier:v[C].grid["ds6w:identifier"]})}else{z[D].updateOptions({branchLabel:y.length+b.contentChooser.branches,branchIdentifier:y.length+b.contentChooser.branches})}}}var F=d(s,v[C].resourceid);if(F.length){t=false;for(var D=0;D<F.length;D++){F[D].updateOptions({rootLabel:v[C].label,rootIdentifier:v[C].grid["ds6w:identifier"]})}}if(t){if(v[C].opened){v[C].statusbarIcons=["trash","broom"];v[C].statusbarIconsTooltips=[b.contentChooser.remove,b.contentChooser.removeFromView];v[C].contextualMenu=[{type:"SeparatorItem"}]}else{v[C].statusbarIcons=["trash"];v[C].statusbarIconsTooltips=[b.contentChooser.remove];v[C].contextualMenu=[{type:"SeparatorItem"}]}if(w.fromCustom){v[C].fromCustom=true}s.addRoot(v[C])}}var A=[];var E=s.getRoots();for(var B=0;B<E.length;B++){if(E[B].options.branchLabel){E[B].updateOptions({label:E[B].getLabel()+" \u25ba "+E[B].options.branchLabel,description:E[B].options.description+" \u25ba "+E[B].options.branchIdentifier,})}if(E[B].options.rootLabel){E[B].updateOptions({label:E[B].getLabel()+b.contentChooser.onrootprod+E[B].options.rootLabel,description:E[B].options.description+b.contentChooser.onrootprod+E[B].options.rootIdentifier,})}if(E[B].options.loading===true){if(w.fromDB===true||w.readOnlyApp===true){s.removeRoot(E[B])}else{E[B].updateOptions({label:b.contentChooser.checkOnRecent});A.push(E[B].options.resourceid);if(E[B].options.grid.leaves){A=A.concat(E[B].options.grid.leaves)}}}}if(A.length){u.options.modelEvents.publish({event:"ENXViews/ContentChooser/searchInRecent",data:{unknownIds:A}})}})},__openSelected:function(){this.options.modelEvents.publish({event:"ENXViews/ContentChooser/openContent",data:{nodes:this.options.model.getSelectedNodes()}});this.options.model.unselectAll()},__openSelectedWithFilter:function(){this.options.modelEvents.publish({event:"ENXViews/ContentChooser/openContent",data:{nodes:this.options.model.getSelectedNodes(),withFilter:true}});this.options.model.unselectAll()},__search:function(t){var s=this.options.model.search({match:function(u){if(u.nodeModel.options.resourceid===t){return true}}});return s},__searchBranch:function(t){var s=this.options.model.search({match:function(u){if(u.nodeModel.options.grid.leaves&&u.nodeModel.options.grid.leaves.indexOf(t)!==-1){return true}}});return s},__searchAssociatedProduct:function(t){var s=this.options.model.search({match:function(u){if(u.nodeModel.options.grid.associatedProduct===t){return true}}});return s},__addToolbar:function(){var x=this,z=e.createElement("div",{"class":x.getClassNames("-toolbar")});var w=this.elements.toggleButton=new l({icon:{iconName:x.options.toggleIcon,fontIconFamily:WUXManagedFontIcons.Font3DS},displayStyle:"lite-borders",touchMode:true});w.getContent().addClassName(x.getClassNames("-toogleTriptych"));x._addSubscribe("ENXViews/ContentChooser/toggleIcon",function(B){x.elements.toggleButton.icon=B});w.addEventListener("click",function(){x.options.modelEvents.publish({event:"ENXViews/ContentChooser/toggleClicked"})});w.inject(z);e.createElement("div",{"class":x.getClassNames("-title"),text:x.options.title}).inject(z);var y,A;switch(x.options.defaultView){case"tiles":y="view-small-tile";A=b.contentChooser.smallTiles;break;case"thumbnails":y="view-small-thb";A=b.contentChooser.smallThb;break;case"largeTiles":default:y="view-big-tile";A=b.contentChooser.bigTiles;break}var v=e.createElement("div",{"class":x.getClassNames("-commands")}).inject(z);var t={renderTo:v,items:[{fonticon:"open",text:b.contentChooser.open,name:"openSelected"},{fonticon:"filter",text:b.contentChooser.openwithfilter,name:"filterSelected"},{fonticon:"broom",text:b.contentChooser.removeFromView,name:"removeFromView"},{fonticon:"select-on",text:b.contentChooser.manageSelection,name:"selectDropDown",content:{type:"dropdownmenu",options:{items:[{fonticon:"select-on",text:b.contentChooser.selectAll,name:"selectAll"},{fonticon:"select-off",text:b.contentChooser.selectNone,name:"selectNone"}],events:{onClick:function(C,B){switch(B.name){case"selectAll":x.options.model.selectAll();break;case"selectNone":x.options.model.unselectAll();break}}}}}},{fonticon:"trash",text:b.contentChooser.remove,name:"removeSelected"},{fonticon:y,title:A,name:"viewDropDown",content:{type:"dropdownmenu",options:{items:[{fonticon:"view-big-tile",text:b.contentChooser.bigTiles,name:"largeTiles",selectable:true,selected:x.options.defaultView==="largeTiles"},{fonticon:"view-small-tile",text:b.contentChooser.smallTiles,name:"tiles",selectable:true,selected:x.options.defaultView==="tiles"},{fonticon:"view-small-thb",text:b.contentChooser.smallThb,name:"thumbnails",selectable:true,selected:x.options.defaultView==="thumbnails"}],events:{onClick:function(C,B){x.__switchView(B.name);var E=x.elements.iconbar.getItem("viewDropDown");var D={id:E.id,title:B.text,fonticon:B.fonticon};x.elements.iconbar.menu.updateItem(D)}}}}},{fonticon:"close",text:b.contentChooser.back2app,name:"back2app"}],events:{onClick:function(C,B){if(B.elements.container.hasClassName("disabled")!==true){switch(B.name){case"back2app":x.options.modelEvents.publish({event:"ENXViews/ContentChooser/closeLandingPage"});break;case"removeFromView":x.options.modelEvents.publish({event:"ENXViews/ContentChooser/model/"+x.options.loadKey+"/removeFromView",data:{nodes2remove:x.options.model.getSelectedNodes()}});break;case"removeSelected":x.options.modelEvents.publish({event:"ENXViews/ContentChooser/model/"+x.options.loadKey+"/remove",data:{nodes2remove:x.options.model.getSelectedNodes()}});break;case"openSelected":x.__openSelected();break;case"filterSelected":x.__openSelectedWithFilter();break}}}}};this.elements.iconbar=new a(t);this.elements.iconbar.menu.templateClassname="byPassABug";var u=function(){var E=false,J=x.options.model.getRoots();for(var H=0;H<J.length&&E===false;H++){if(J[H].options.opened===true){E=true}}var B=x.elements.iconbar.getItem("back2app");var G={id:B.id,disabled:E===false};x.elements.iconbar.menu.updateItem(G);var D=x.elements.iconbar.getItem("removeFromView");var F={id:D.id,disabled:E===false};x.elements.iconbar.menu.updateItem(F);var I=x.elements.iconbar.getItem("selectDropDown");var C={id:I.id,disabled:J.length===0};x.elements.iconbar.menu.updateItem(C)};var s=function(){var P=true,O=true,K=x.options.model.getSelectedNodes(),L=true,C=true,I=false;P=K.length===0;for(var M=0;M<K.length&&(L||C);M++){if(K[M].getAttributeValue("ds6w:type")==="ENOStrRefinementSpecification"){L=false}if(K[M].options.opened!==true){C=false}else{I=true}}if(C===false){P=false}if(L&&K.length===1&&C===false){O=false}var G=x.elements.iconbar.getItem("openSelected");var N={id:G.id,disabled:P};x.elements.iconbar.menu.updateItem(N);var H=x.elements.iconbar.getItem("filterSelected");var B={id:H.id,disabled:O};x.elements.iconbar.menu.updateItem(B);var D=x.elements.iconbar.getItem("removeSelected");var F={id:D.id,disabled:K.length===0};x.elements.iconbar.menu.updateItem(F);var E=x.elements.iconbar.getItem("removeFromView");var J={id:E.id,disabled:K.length===0||I===false};x.elements.iconbar.menu.updateItem(J);u()};x.options.model.getXSO().onPostAdd(s);x.options.model.getXSO().onPostRemove(s);x.options.model.getXSO().onEmpty(s);x.options.model.getModelEvents().subscribe({event:"removeChild"},function(){s()});s();return z},__buildlargeTiles:function(){var s=this.options.view.largeTiles=new n({useDragAndDrop:false,allowUnsafeHTMLContent:false});s.selectionBehavior={unselectAllOnEmptyArea:true,toggle:true,canMultiSelect:true,enableShiftSelection:true,enableFeedbackForActiveCell:false,canInteractiveMultiselectWithCheckboxClick:true};s.onContextualEvent=this.__onContextualEvent();s.onCellDoubleClick(this.__openSelected.bind(this));s.onStatusbarIconPointerDown=this.__onStatusbarIconPointerDown.bind(this);s.loadGridViewModel(this.options.model);s.getContent().classList.add("enx-responsive-view");s.getContent().classList.add("large-tiles");return s},__buildtiles:function(){var s=this.options.view.tiles=new f({useDragAndDrop:false,allowUnsafeHTMLContent:false});s.selectionBehavior={unselectAllOnEmptyArea:true,toggle:true,canMultiSelect:true,enableShiftSelection:true,enableFeedbackForActiveCell:false,canInteractiveMultiselectWithCheckboxClick:true};s.onContextualEvent=this.__onContextualEvent();s.onCellDoubleClick(this.__openSelected.bind(this));s.onStatusbarIconPointerDown=this.__onStatusbarIconPointerDown.bind(this);s.loadGridViewModel(this.options.model);s.getContent().classList.add("enx-responsive-view");s.getContent().classList.add("tiles");return s},__buildthumbnails:function(){var s=this.options.view.thumbnails=new o({useDragAndDrop:false,allowUnsafeHTMLContent:false,displayedOptionalCellProperties:["contextualMenu","statusbarIcons","activeFlag"]});s.selectionBehavior={unselectAllOnEmptyArea:true,toggle:true,canMultiSelect:true,enableShiftSelection:true,enableFeedbackForActiveCell:false,canInteractiveMultiselectWithCheckboxClick:true};s.onContextualEvent=this.__onContextualEvent();s.onCellDoubleClick(this.__openSelected.bind(this));s.onStatusbarIconPointerDown=this.__onStatusbarIconPointerDown.bind(this);s.loadGridViewModel(this.options.model);s.getContent().classList.add("enx-responsive-view");s.getContent().classList.add("tiles");return s},__switchView:function(s){this.options.view[this.options.defaultView].unloadGridViewModel();var t=this.options.view[s];if(t===null){t=this["__build"+s]()}else{t.loadGridViewModel(this.options.model)}this.options.defaultView=s;this.elements.content.empty();t.inject(this.elements.content)},__onStatusbarIconPointerDown:function(s){var u=this;var v=s.cellInfos;var t=s.clickedIconIndex;var w=v?v.cellModel:undefined;switch(t){case 0:u.options.modelEvents.publish({event:"ENXViews/ContentChooser/model/"+u.options.loadKey+"/remove",data:{nodes2remove:[w]}});break;case 1:u.options.modelEvents.publish({event:"ENXViews/ContentChooser/model/"+u.options.loadKey+"/removeFromView",data:{nodes2remove:[w]}});break}},__onContextualEvent:function(){var s=this;return{"this":s,callback:function(u){var t=this;return new Promise(function(D){var w=[];var C=t.options.model.getSelectedNodes();var v=false,x=true;var y=C.length;if(y===1&&C[0].getAttributeValue("ds6w:type")!=="ENOStrRefinementSpecification"&&C[0].options.opened!==true){v=true}for(var B=0;B<y&&x;B++){if(C[B].options.opened!==true){x=false}}var z={type:"PushItem",icon:"url("+c.getWebappsAssetUrl("PADServices","icons/32/I_OpenWith.png")+")",title:b.contentChooser.open,action:{"this":t,callback:t.__openSelected.bind(t)},state:x===true?"disabled":"enabled",};w.push(z);if(v){var A={type:"PushItem",icon:"url("+c.getWebappsAssetUrl("PADServices","icons/32/I_DefineFilter.png")+")",title:b.contentChooser.openwithfilter,action:{"this":t,callback:t.__openSelectedWithFilter.bind(t)}};w.push(A)}D(w)})}}},__buildEmptyContent:function(){var t=this;var s=new l({label:b.welcomePanel.searchContent,emphasize:"primary",touchMode:true});s.getContent().addClassName(t.getClassNames("-searchForContent"));s.addEventListener("click",function(){t.options.modelEvents.publish({event:"ENXViews/ContentChooser/searchContent"})});this.elements.emptyContent=new i({modelEvents:this.options.modelEvents,sentences:[{type:"drop",text:b.contentChooser.dropcontenthere},{type:"dom",DOMelement:s.getContent()}],fontSize:"16px",orderedListType:"none",});this.elements.emptyContent.inject(this.elements.withoutContent)}});return j});define("DS/PADServices/utils/PredefinedQueryUtils",["UWA/Promise","DS/PADServices/ws/WSAccess"],function(c,a){var e=function(h,g){for(var f in g){if(g.hasOwnProperty(f)){if(UWA.is(h[f],"object")&&UWA.is(g[f],"object")){e(h[f],g[f])}else{if(UWA.is(h[f],"array")){h[f]=h[f].concat(g[f])}}}}};var b={pqDictionary:null,abvLst:{},retrievePQDictionary:function(){return new c(function(g,f){if(b.pqDictionary===null){a.executeWS("retrievePQ").then(function(k){if(!(k.pqlist&&k.pqlist.PQ)){b.pqDictionary=[]}else{if(k.custom){console.log("Custome PQ exists");for(var l=0,n=k.custom.PQ.length;l<n;l++){var m=k.custom.PQ[l];m.custom=true}e(k.pqlist,k.custom)}b.pqDictionary=k.pqlist.PQ;for(var j=0;j<k.pqlist.PQ.length;j++){var h=k.pqlist.PQ[j];var p=h.abbreviations.split(",");for(var o=0;o<p.length;o++){b.abvLst[p[o]]=j}}}g()})["catch"](function(h){console.error(h);f()})}else{g()}})}};var d={isPredefinedQry:function(f){return new c(function(i){var h=f,g=f.indexOf(":");if(g!==-1){b.retrievePQDictionary().then(function(){var l=f.substring(0,g);var k=f.substring(g+1,f.length);if(typeof b.abvLst[l]!=="undefined"){var j=UWA.clone(b.pqDictionary[b.abvLst[l]]);if(j.custom===true){j.value="3dexp"+l+":__QUERY__"}h=j.value.replace(/__QUERY__/g,k)}i(h)})["catch"](function(){console.warn("Predefined Qry retrival fails. Keep the original query String");i(h)})}else{i(h)}})},};return d});define("DS/PADServices/views/ProductConfChooser",["css!DS/PADServices/PADServices","i18n!DS/PADServices/assets/nls/PADServices.json","UWA/Core","UWA/Controls/Abstract","DS/Controls/Button","UWA/Class/Promise","DS/PADUtils/PADUtilsServices","DS/PADUtils/PADSettingsMgt","DS/PADServices/utils/PlatformURL","DS/PADServices/ws/WSAccess","DS/PADServices/utils/ParserUtils","DS/CollectionView/ResponsiveLargeTilesCollectionView","DS/Tree/TreeDocument"],function(g,c,d,f,m,i,e,h,b,k,n,o,a){var l="DS/ENOFloatingPanel/ENOFloatingPanel";var j=f.extend({name:"pad-prodconf",defaultOptions:{modelEvents:null,renderTo:null,pid:null,subscribeTokens:[]},init:function(p){this._parent(p);var q=this;b.retrievePlatformUrl().then(function(){var s=function(){q._retrieveModel().then(q._retrieveModelVersion.bind(q)).then(q._retrieveProdConf.bind(q)).then(q._displayProdConf.bind(q))["catch"](function(t){console.warn("Cannot retrieve Product Configuration"+t);q._exit()})};var r=h.getSetting("pad_security_ctx");if(r===false){e.updateWidgetSecPref({resolve:function(){s()}})}else{s()}})},destroy:function(){for(var p=0;p<this.options.subscribeTokens.length;p++){this.options.modelEvents.unsubscribe(this.options.subscribeTokens[p])}this._parent()},_retrieveModel:function(q){var p=this;return new i(function(s,r){k.executeWS("getConfiguredObjectInfo",{pid:p.options.pid}).then(function(t){if(t.contexts&&t.contexts.content&&t.contexts.content.results){if(t.contexts.content.results.length===1){s({model:t.contexts.content.results[0]})}else{r({error:"Too many model"})}}else{s({info:"No Model attachd"})}})["catch"](function(t){r(t)})})},_retrieveModelVersion:function(q){var p=this;return new i(function(s,r){if(q.model){k.executeWS("configurationDictionary",{modelVersion:q.model.physicalID}).then(function(t){if(t.products){s({modelid:q.model.physicalID,modelVersion:t.products.id.replace("pid:","")})}else{s({info:"No Model Version"})}})["catch"](function(t){r(t)})}else{s(q)}})},_retrieveProdConf:function(q){var p=this;return new i(function(s,r){if(q.modelVersion){k.executeWS("getProductConfigurations",{modelid:q.modelid,modelVersionPid:q.modelVersion}).then(function(t){if(t.productconfigurations){var v=[];for(var u=0;u<t.productconfigurations.length;u++){v.push(t.productconfigurations[u].id.replace("pid:",""))}k.executeWS("fetch",{pids:v,noCompletion:true}).then(function(w){var x=[];for(var y=0;y<w.results.length;y++){x.push(n.parseAttributes(w.results[y].attributes))}s({prodConf:x})})["catch"](function(w){r(w)})}else{s({info:"No Product Configuration"})}})["catch"](function(t){r(t)})}else{s(q)}})},_displayProdConf:function(q){var p=this;require([l],function(r){p.elements.body=d.createElement("div",{"class":p.getClassNames("-body")});p.elements.footer=d.createElement("div",{"class":p.getClassNames("-footer")});p._buildBody(q);p._buildFooter();p.elements.floatingpanel=new r({className:p.name,body:p.elements.body,footer:p.elements.footer,title:c.productConfChooser.apptitle,overlay:true,closable:true,animate:true,resizable:false,visible:true,events:{onClose:function(){p._exit();p.destroy()}}});p.elements.floatingpanel.inject(p.options.renderTo)})},_buildBody:function(s){var r=this;var q=this.options.grid=new o();q.selectionBehavior={unselectAllOnEmptyArea:true,toggle:true,canMultiSelect:false,enableShiftSelection:false,enableFeedbackForActiveCell:false,canInteractiveMultiselectWithCheckboxClick:false};q.allowUnsafeHTMLContent=false;var p={shouldAcceptDrag:function(){return false}};this.options.model=new a(p);this.options.model.id="prodConfListModel";this.options.model.getXSO().onPostAdd(function(t){r.options.okButton.disabled=false});this.options.model.getXSO().onPostRemove(function(t){r.options.okButton.disabled=true});this.options.model.getXSO().onEmpty(function(t){r.options.okButton.disabled=true});q.model=this.options.model;q.getContent().inject(r.elements.body);if(s.prodConf){s.prodConf.forEach(function(t){var u=d.extend({},t);u.children=null;r.options.model.addRoot(u)})}},_buildFooter:function(){var q=this;var p=new m({label:c.productConfChooser.close,emphasize:"primary",touchMode:true});p.addEventListener("click",function(){q._exit();q.destroy()});p.inject(q.elements.footer);var r=this.options.okButton=new m({label:c.productConfChooser.ok,touchMode:true,disabled:true});r.addEventListener("click",function(){var s=q.options.model.getSelectedNodes()[0].options.resourceid;k.executeWS("fetch",{pids:[s],noCompletion:true,data:{select_file:[],select_predicate:["FILTER_COMPILED_FORM"]}}).then(function(t){var v=null;if(t.results&&t.results.length===1){for(var u=0;u<t.results[0].attributes.length&&v===null;u++){if(t.results[0].attributes[u].name==="FILTER_COMPILED_FORM"){v=t.results[0].attributes[u].value}}}q.options.modelEvents.publish({event:"ENXViews/ProductConfChooser",data:{config:v}});q.destroy()})["catch"](function(t){q._exit();q.destroy()})});r.inject(q.elements.footer)},_exit:function(){this.options.modelEvents.publish({event:"ENXViews/ProductConfChooser",data:{config:null}})},});return j});define("DS/PADServices/views/AttributesCustomization",["css!DS/PADServices/PADServices","i18n!DS/PADServices/assets/nls/PADServices.json","DS/PADServices/views/utils/Iconbar","DS/PADServices/views/utils/ComboSelector","DS/PADServices/utils/GlobalUtils","css!DS/UIKIT/UIKIT","UWA/Core","UWA/Controls/Abstract","DS/Controls/Button","DS/Tree/TreeDocument","DS/Tree/TreeNodeModel","DS/TreeModel/DataModelSet","DS/Controls/Toggle","DS/DataGridView/DataGridView","DS/DataGridView/DataGridViewLayout","DS/PADServices/utils/PlatformURL","DS/Utilities/Dom"],function(j,d,b,p,c,k,g,r,o,i,l,u,f,q,a,t,s){var n="DS/ENOFloatingPanel/ENOFloatingPanel";var h=["selection","hide_show","find_in_ctx","instanceName","instanceMatrix","thumbnails"];var e={properties:[function(){return{property:"label",value:this.options.label}},function(){var v={property:"grid",value:this.options.grid};delete v.value.remove;return v}]};var m=r.extend({name:"attr-customization",defaultOptions:{renderTo:null,modelEvents:null,subscribeTokens:[],compactMode:false,applyOnlyToThisApp:false,baseTypes:[],selectedTypes:[],selectedExtensions:[],dgvOptions:{defaultColumnDef:{width:"auto",typeRepresentation:"string"},showRowBorderFlag:true,alternateBackgroundFlag:false,columns:[{dataIndex:"tree",visibleFlag:false},{icon:{iconName:"eye",fontIconFamily:1},tooltip:d.attributesCustomization.attrVisible,dataIndex:"attrVisible",typeRepresentation:"boolean",alwaysVisibleFlag:true,width:30,editableFlag:true,editionPolicy:"EditionOnOver",sortableFlag:false,resizableFlag:false},{text:d.attributesCustomization.title,dataIndex:"attrTitle",typeRepresentation:"string",editableFlag:true,editionPolicy:"EditionOnDoubleClick",sortableFlag:false,resizableFlag:false},{icon:{iconName:"export",fontIconFamily:1},dataIndex:"exportContent",typeRepresentation:"boolean",alwaysVisibleFlag:true,width:30,editableFlag:true,editionPolicy:"EditionOnOver",sortableFlag:false,resizableFlag:false},{icon:{iconName:"palette",fontIconFamily:1},dataIndex:"columnColor",alwaysVisibleFlag:true,width:30,editableFlag:false,sortableFlag:false,resizableFlag:false,onCellRequest:function(z){if(this.layout.getDataIndexFromColumnIndex(z.columnID)!=="columnColor"){throw new Error("Invalid column "+this.layout.getDataIndexFromColumnIndex(z.columnID)+" should be columnColor")}var v=s.createElement("div",{"class":"enxCommand",});var x=s.createElement("div",{"class":"enxColorLauncher",styles:{"background-color":"#ffffff",color:"#000000","font-size":"18px"},title:d.attributesCustomization.changeColor});x.innerHTML=d.attributesCustomization.colorContent;v.appendChild(x);z.cellView.getContent().setHTML(v);var w="#ffffff";var y="#000000";if(z.nodeModel.options.grid&&z.nodeModel.options.grid.columnColor){w=z.nodeModel.options.grid.columnColor["background-color"]?z.nodeModel.options.grid.columnColor["background-color"]:"#ffffff";w=w.replace(/;/g,"");y=z.nodeModel.options.grid.columnColor.color?z.nodeModel.options.grid.columnColor.color:"#0000";y=y.replace(/;/g,"")}var A=z.cellView.getContent().querySelector(".enxColorLauncher");if(A){if(g.is(A.setStyles,"function")){A.setStyles({"background-color":w,color:y})}else{A.style.color=y;A.style["background-color"]=w}}}},{icon:{iconName:"trash",fontIconFamily:1},dataIndex:"remove",typeRepresentation:"actionRemove",alwaysVisibleFlag:true,width:30,sortableFlag:false,resizableFlag:false,editableFlag:false}]},dgvLayoutOptions:{cellHeight:26,columnHeaderHeight:38,rowsHeader:false}},init:function(v){this._parent(v);var w=this;require([n],function(x){w.elements.body=g.createElement("div",{"class":w.getClassNames("-body")});w.elements.footer=g.createElement("div",{"class":w.getClassNames("-footer")});t.retrievePlatformUrl().then(function(){w._buildBody();w._buildFooter();w.elements.floatingpanel=new x({className:w.name,body:w.elements.body,footer:w.elements.footer,title:d.attributesCustomization.apptitle,overlay:true,closable:true,animate:true,resizable:true,visible:true,events:{onClose:function(){w._closePanel();w.destroy()}}});w.elements.floatingpanel.inject(w.options.renderTo);w.options.modelEvents.publish({event:"ENXViews/AttributesCustomization/ready"})})})},destroy:function(){for(var v=0;v<this.options.subscribeTokens.length;v++){this.options.modelEvents.unsubscribe(this.options.subscribeTokens[v])}this.options.toolbar.destroy();this._parent()},_buildBody:function(){this._buildIconBar();this.elements.dgv=g.createElement("div",{"class":this.getClassNames("-dgv")}).inject(this.elements.body);var w=g.extend({identifier:"DataGridView-attrCusto-"+c.uid()},this.options.dgvOptions);w.layout=new a(this.options.dgvLayoutOptions);var v=this.options.grid=new q(w);var E={actionRemove:{stdTemplate:"functionIcon",semantics:{icon:{iconName:"trash",fontIconFamily:WUXManagedFontIcons.Font3DS}}}};v.getTypeRepresentationFactory().registerTypeRepresentations(JSON.stringify(E));this.options.dataModelSet=new u();this.options.attrModel=new i({dataModelSet:this.options.dataModelSet});v.treeDocument=this.options.attrModel;v.getContent().addClassName("enxdatagridview");v.getContent().inject(this.elements.dgv);var z=this;v.onReady(function(){v.addEventListener("change",z._cellModified.bind(z));v.addEventListener("click",z._cellClicked.bind(z));z.elements.floatingpanel.onResize()});this._addColumns();this.options.attrModel.getXSO().onPostAdd(this._manageAttrSelection.bind(this));this.options.attrModel.getXSO().onPostRemove(this._manageAttrSelection.bind(this));this.options.attrModel.getXSO().onEmpty(this._manageAttrSelection.bind(this));this.options.attrModel.getModelEvents().subscribe({event:"addChild"},function(F){if(z._isMoving!==true&&z._globalUpdate!==true){z.options.modelEvents.publish({event:"ENXViews/AttributesCustomization/columnModification",data:{what:"addRemoveColumns",addedColumns:[F.data.nodeModel.dump(e)]}})}});this.options.attrModel.getModelEvents().subscribe({event:"removeChild"},function(F){if(z._isMoving!==true&&z._globalUpdate!==true){z.options.modelEvents.publish({event:"ENXViews/AttributesCustomization/columnModification",data:{what:"addRemoveColumns",removedColumns:[F.data.nodeModel.dump(e)]}})}});this.elements.behavior=g.createElement("div",{"class":this.getClassNames("-behavior")}).inject(this.elements.body);var x=new i();var A=new l({viewMode:"comfortable",label:d.attributesCustomization.comfortable,subLabel:d.attributesCustomization.comfortableExplanation,children:null,icons:[{iconName:"view-big-tile",fontIconFamily:WUXManagedFontIcons.Font3DS}]});x.addRoot(A);var B=new l({viewMode:"compact",label:d.attributesCustomization.compact,subLabel:d.attributesCustomization.compactExplanation,children:null,icons:[{iconName:"view-list",fontIconFamily:WUXManagedFontIcons.Font3DS}]});x.addRoot(B);if(this.options.viewMode==="compact"){B.select(true)}else{A.select(true)}this.elements.comboCompact=new p({className:this.getClassNames("-compactmode-selector"),treedocument:x,disabled:false,events:{onSelectionChange:function(){var F=x.getSelectedNodes()[0].options.viewMode;z.options.modelEvents.publish({event:"ENXViews/AttributesCustomization/viewMode",data:{viewMode:F}})}}});console.warn("AttributesCustomization## compact Mode  model events on thumbnail activation TODO");var y=g.createElement("div",{"class":this.getClassNames("-compactmode-global")});var C=g.createElement("div",{"class":this.getClassNames("-compactmode-label"),text:d.attributesCustomization.density});C.inject(y);this.elements.comboCompact.inject(y);y.inject(this.elements.behavior);this.elements.applyToggle=new f({label:d.attributesCustomization.apply_to_this_app});var D=g.createElement("div",{"class":this.getClassNames("-applytothisapp"),content:this.elements.applyToggle});this.elements.applyToggle.addEventListener("change",function(G){var F=G.dsModel;z.options.applyOnlyToThisApp=F.checkFlag;z.options.modelEvents.publish({event:"ENXViews/AttributesCustomization/applyOnlyToThisApp",data:{applyOnlyToThisApp:z.options.applyOnlyToThisApp}})});D.inject(this.elements.behavior)},_buildFooter:function(){var x=this;var v=new o({label:d.attributesCustomization.close,emphasize:"primary",touchMode:true});v.addEventListener("click",function(){x._closePanel();x.destroy()});v.inject(x.elements.footer);var w=new o({label:d.attributesCustomization.reset,touchMode:true});w.addEventListener("click",function(){x.options.modelEvents.publish({event:"ENXViews/AttributesCustomization/columnModification",data:{what:"reset",applyOnlyToThisApp:x.options.applyOnlyToThisApp}});x.destroy()});w.inject(x.elements.footer)},_closePanel:function(){var v=[];this.options.attrModel.getRoots().forEach(function(w){v.push(w.dump(e))});this.options.modelEvents.publish({event:"ENXViews/AttributesCustomization/columnModification",data:{what:"close",selectedTypes:this.options.selectedTypes,selectedExtensions:this.options.selectedExtensions,selectedAttributes:v,applyOnlyToThisApp:this.options.applyOnlyToThisApp}})},_addColumns:function(){var B=this;if(this.options.appColumns===undefined){console.error("AttributesCustomization## Invalid input. Missing property appColumns")}else{for(var v=0;v<this.options.appColumns.length;v++){var A=this.options.appColumns[v];if(A.dataIndex!=="bi_color"){var w=g.is(A.text,"string")&&A.text.length>0?A.text:B._retrieveColumnName(A.dataIndex);var y=A.xnav_options&&A.xnav_options.exportable?A.xnav_options.exportable.value:true;var z=A.xnav_options&&A.xnav_options.name?A.xnav_options.name:w;var x=l.createTreeNodeDataModel(this.options.dataModelSet,{label:A.dataIndex,grid:{attrTitle:w,attrVisible:!A.isHidden,exportContent:y,remove:{module:"DS/PADServices/views/utils/DataGridCustoCallback",func:"removeCallback"},columnColor:{"background-color":"#ffffff",color:"#000000"},attrName:z}});x.options.grid.remove.argument={nodeModel:x,attributeCusto:B};this.options.attrModel.addChild(x)}}}},_cellModified:function(v,w){if(w&&w.nodeModel&&w.nodeModel.options.grid){switch(this.options.grid.layout.getDataIndexFromColumnIndex(w.columnID)){case"attrVisible":this.options.modelEvents.publish({event:"ENXViews/AttributesCustomization/columnModification",data:{what:"visibilityColumn",modifiedColumns:[w.nodeModel.getLabel()],visibilityFlag:w.nodeModel.getReferenceValue("attrVisible")}});break;case"attrTitle":this.options.modelEvents.publish({event:"ENXViews/AttributesCustomization/columnModification",data:{what:"changeTitle",modifiedColumns:[w.nodeModel.getLabel()],newTitle:w.nodeModel.getReferenceValue("attrTitle")}});break;case"exportContent":this.options.modelEvents.publish({event:"ENXViews/AttributesCustomization/columnModification",data:{what:"exportColumn",modifiedColumns:[w.nodeModel.getLabel()],exportFlag:w.nodeModel.getReferenceValue("exportContent")}});break}}},_cellClicked:function(v,w){if(w&&w.nodeModel&&w.nodeModel.options.grid){switch(this.options.grid.layout.getDataIndexFromColumnIndex(w.columnID)){case"columnColor":this._changeColor([w.nodeModel]);break}}},_retrieveColumnName:function(v){return d.attributesCustomization[v]?d.attributesCustomization[v]:v},_buildIconBar:function(){this.elements.toolbar=g.createElement("div",{"class":this.getClassNames("-toolbar")}).inject(this.elements.body);var x=(this.options.appColumns?this.options.appColumns:[]).map(function(y){return y.dataIndex});var v=this,w={renderTo:this.elements.toolbar,multiSelect:true,items:[{fonticon:"cog",text:d.attributesCustomization.moreAttributes,name:"moreAttributes",handler:function(z,y){require(["DS/PADServices/views/utils/MoreAttributesWizard","DS/PADServices/utils/AttributesMgt"],function(G,F){v.elements.floatingpanel.hide();var B=v.options.attrModel.getRoots();var D=[];for(var E=0;E<B.length;E++){if(F.isAttributeColumn(B[E].getReferenceValue("attrName"))===true){D.push(B[E].getReferenceValue("attrName"))}}var C=v.options.modelEvents.subscribe({event:"ENXViews/MoreAttributesWizard/selectedAttributes"},function(L){v.elements.floatingpanel.show();v.options.modelEvents.unsubscribe(C);v.options.selectedExtensions=L.selectedExtensions;v.options.selectedTypes=L.selectedTypes;v._globalUpdate=true;var I=L.selectedAttributes.filter(function(Q){return D.indexOf(Q.dataIndex)!==-1}).map(function(Q){return Q.dataIndex});var M=D.filter(function(Q){return I.indexOf(Q)===-1});var N=L.selectedAttributes.filter(function(Q){return D.indexOf(Q.dataIndex)===-1});console.groupCollapsed("Columns update");console.log("Removed columns "+JSON.stringify(M));console.log("Added columns "+JSON.stringify(N));console.groupEnd();var K=[],P=[];var O=0;for(O=0;O<M.length;O++){var H=v.options.attrModel.search({match:function(Q){return Q.nodeModel.options.label===M[O]}});v.options.attrModel.withTransactionUpdate(function(){for(var Q=0;Q<H.length;Q++){v.options.attrModel.removeRoot(H[Q]);K.push(H[Q].dump(e))}})}for(O=0;O<N.length;O++){var J=l.createTreeNodeDataModel(v.options.dataModelSet,{label:N[O].dataIndex,grid:{attrTitle:N[O].label,attrVisible:true,exportContent:true,remove:{module:"DS/PADServices/views/utils/DataGridCustoCallback",func:"removeCallback"},columnColor:{background_color:"#ffffff",color:"#000000"},attrName:N[O].dataIndex}});J.options.grid.remove.argument={nodeModel:J,context:v};v.options.attrModel.addChild(J);P.push(J.dump(e))}v.options.modelEvents.publish({event:"ENXViews/AttributesCustomization/columnModification",data:{what:"addRemoveColumns",selectedTypes:v.options.selectedTypes,selectedExtensions:v.options.selectedExtensions,removedColumns:K,addedColumns:P}});delete v._globalUpdate});var A=new G({renderTo:v.options.renderTo,modelEvents:v.options.modelEvents,baseTypes:v.options.baseTypes,selectedTypes:v.options.selectedTypes,selectedExtensions:v.options.selectedExtensions,selectedAttributes:D})})},},{className:"divider"},{fonticon:"list-add",text:d.attributesCustomization.specificColumn,name:"specificColumn",content:{type:"dropdownmenu",options:{multiSelect:true,items:[{fonticon:"checkbox-on",text:d.attributesCustomization.selection,name:"selection",selectable:true,selected:x.indexOf("selection")!==-1?true:false},{fonticon:"eye",text:d.attributesCustomization.hide_show,name:"hide_show",selectable:true,selected:x.indexOf("hide_show")!==-1?true:false},{fonticon:"search",text:d.attributesCustomization.find_in_ctx,name:"find_in_ctx",selectable:true,selected:x.indexOf("find_in_ctx")!==-1?true:false},{text:d.attributesCustomization.instanceName,name:"instanceName",selectable:true,selected:x.indexOf("instanceName")!==-1?true:false},{text:d.attributesCustomization.instanceMatrix,name:"instanceMatrix",selectable:true,selected:x.indexOf("instanceMatrix")!==-1?true:false},{fonticon:"picture",text:d.attributesCustomization.thumbnails,name:"thumbnails",selectable:true,selected:x.indexOf("thumbnails")!==-1?true:false}],events:{onClick:function(z,y){v._manageSpecificColumn(y.name,y.selected)}}}}},{className:"divider"},{fonticon:"up",text:d.attributesCustomization.moveUp,name:"moveUp",disabled:true,handler:function(z,y){v._moveColumn(y.name,v.options.attrModel.getSelectedNodes())}},{fonticon:"down",text:d.attributesCustomization.moveDown,name:"moveDown",disabled:true,handler:function(z,y){v._moveColumn(y.name,v.options.attrModel.getSelectedNodes())}},{fonticon:"move-to-top",text:d.attributesCustomization.moveFirst,name:"moveFirst",disabled:true,handler:function(z,y){v._moveColumn(y.name,v.options.attrModel.getSelectedNodes())}},{fonticon:"move-to-bottom",text:d.attributesCustomization.moveLast,name:"moveLast",disabled:true,handler:function(z,y){v._moveColumn(y.name,v.options.attrModel.getSelectedNodes())}},{className:"divider"},{fonticon:"palette",text:d.attributesCustomization.changeColor,name:"changeColor",disabled:true,handler:function(z,y){v._changeColor(v.options.attrModel.getSelectedNodes())}},{fonticon:"trash",text:d.attributesCustomization.remove,name:"remove",disabled:true,handler:function(z,y){v._removeSelectedColumn()}}]};this.options.toolbar=new b(w);this.options.toolbar.elements.container.setStyle("display",undefined)},_manageAttrSelection:function(){var y=this.options.attrModel.getSelectedNodes();var x=["moveUp","moveDown","moveFirst","moveLast"];var w=["remove","changeColor"];var v=0;if(y.length===0){for(v=0;v<x.length;v++){this.options.toolbar.disableItem(x[v])}for(v=0;v<w.length;v++){this.options.toolbar.disableItem(w[v])}}else{if(y.length===1){for(v=0;v<x.length;v++){this.options.toolbar.enableItem(x[v])}for(v=0;v<w.length;v++){this.options.toolbar.enableItem(w[v])}}else{if(y.length>=1){for(v=0;v<x.length;v++){this.options.toolbar.disableItem(x[v])}for(v=0;v<w.length;v++){this.options.toolbar.enableItem(w[v])}}}}},_moveColumn:function(x,v){var w=this;this.options.attrModel.withTransactionUpdate(function(){var A=v[0],z=A._getLocalID?A._getLocalID():A._localID,y={fromID:z,toID:-1};switch(x){case"moveFirst":y.toID=0;break;case"moveUp":y.toID=z-1;break;case"moveDown":y.toID=z+1;break;case"moveLast":y.toID=w.options.attrModel.getRoots().length-1;break}if(y.toID!==-1&&y.toID<w.options.attrModel.getRoots().length){w._isMoving=true;w.options.attrModel.addChild(A,y.toID);w._isMoving=false;w.options.modelEvents.publish({event:"ENXViews/AttributesCustomization/columnModification",data:{what:"moveColumn",move2perform:y}})}})},_manageSpecificColumn:function(A,C){var B=this;var y=false,v=true;if(A==="instanceName"){y=true;v=false}var z=d.attributesCustomization[A]?d.attributesCustomization[A]:A;if(C===true){var x=l.createTreeNodeDataModel(this.options.dataModelSet,{label:A,grid:{attrTitle:z,attrVisible:true,exportContent:y,remove:{module:"DS/PADServices/views/utils/DataGridCustoCallback",func:"removeCallback"},columnColor:{background_color:"#ffffff",color:"#000000"},attrName:A},modelEvents:this.options.modelEvents});x.options.grid.remove.argument={nodeModel:x,context:B};this.options.attrModel.addChild(x)}else{var w=this.options.attrModel.search({match:function(D){return D.nodeModel.options.label===A}});this.options.attrModel.withTransactionUpdate(function(){for(var D=0;D<w.length;D++){B.options.attrModel.removeRoot(w[D])}})}},_removeSelectedColumn:function(){var w=this.options.attrModel.getSelectedNodes();var v=this;this.options.attrModel.withTransactionUpdate(function(){for(var x=0;x<w.length;x++){v.options.attrModel.removeRoot(w[x])}})},_changeColor:function(w){var v=this;require(["DS/PADUtils/views/PADColorPicker"],function(x){v.elements.floatingpanel.hide();var y={background_color:"#ffffff",color:"#000000"};new x({selected_color:y,renderTo:document.body,events:{onColorOK:function(z){v.elements.floatingpanel.show();var C=[];for(var A=0;A<w.length;A++){var B=w[A];B.updateOptions({grid:{columnColor:{"background-color":z.background_color+";",color:z.color+";"}}});C.push(B.getLabel())}v.options.modelEvents.publish({event:"ENXViews/AttributesCustomization/columnModification",data:{what:"changeColor",modifiedColumns:C,"background-color":z.background_color+";",color:z.color+";"}})},onClose:function(){v.elements.floatingpanel.show()}}})})},});return m});define("DS/PADServices/utils/DictionaryAccess",["UWA/Promise","DS/Utilities/Utils","DS/FedDictionaryAccess/FedDictionaryAccessAPI","i18n!DS/PADServices/assets/nls/PADServices.json","DS/PADServices/utils/GlobalUtils","DS/PADUtils/PADUtilsServices"],function(j,g,l,n,h,a){var f={nodes2updateId:[],nodes2update:[],idx:0};function i(o,p,q){if(!o[p]){o[p]=[]}if(o[p].indexOf(q)===-1){o[p].push(q)}}function e(o){var u={};var s=require("DS/PADServices/utils/AttributesMgt");for(var r=0;r<o.length;r++){var t=o[r];var v=Object.keys(t.options.grid);for(var p=0;p<v.length;p++){var q=v[p];if(s.hasNLS(q)){i(u,q,t.options.grid[q])}}}return u}function d(p){var u={};var v=Object.keys(p);for(var t=0;t<v.length;t++){var w=p[v[t]];var o=Object.keys(w);for(var r=0;r<o.length;r++){var s=o[r];var q=w[s];if(s===q){continue}if(q.indexOf("emxFramework")===0){continue}if(!u[v[t]]){u[v[t]]={}}u[v[t]][s]=q}}return u}function c(s,t,q){var o=false;var r={grid:s.options.grid};for(var p=0;p<t.length;p++){if(r.grid[t[p]]&&q[t[p]][r.grid[t[p]]]&&q[t[p]][r.grid[t[p]]]!==r.grid[t[p]]){o=true;r.grid[t[p]]=q[t[p]][r.grid[t[p]]]}}return{updated:o,options:r}}var k="R2019x";var m=g.debounce(function(v){b.idx=0;var t=this,u={},r,o;var q=require("DS/PADServices/utils/AttributesMgt");var p=q.getAvailableColumns();for(r=0;r<v.length;r++){var s=Object.getOwnPropertyNames(v[r].options.grid);for(o=0;o<s.length;o++){if(q.hasNLS(s[o])){if(p.indexOf(s[o])!==-1){if(u[s[o]]===undefined){u[s[o]]=[]}if(u[s[o]].indexOf(v[r].options.grid[s[o]])===-1){u[s[o]].push(v[r].options.grid[s[o]])}}}}}l.getNlsOfPropertiesValues(JSON.stringify(u),{tenantId:a.getPlatformId(),lang:h.getLang(),apiVersion:k,onComplete:function(z){var A=UWA.is(z,"string")?JSON.parse(z):z;var C=Object.getOwnPropertyNames(A);function x(F){var D=false;var E={grid:F.options.grid};for(o=0;o<C.length;o++){if(E.grid[C[o]]&&A[C[o]][E.grid[C[o]]]&&A[C[o]][E.grid[C[o]]]!==E.grid[C[o]]){if(A[C[o]][E.grid[C[o]]].indexOf("emxFramework")!==0){D=true;E.grid[C[o]]=A[C[o]][E.grid[C[o]]]}}}return{updated:D,options:E}}var w=f.nodes2update[0].getTreeDocument();if(w){w.withTransactionUpdate(function(){for(r=0;r<f.nodes2update.length;r++){var E=f.nodes2update[r];var D=x(E);if(D.updated===true){E.updateOptions(D.options)}}f.nodes2updateId=[];f.nodes2update=[]})}else{for(r=0;r<f.nodes2update.length;r++){var B=f.nodes2update[r];var y=x(B);if(y.updated===true){B.updateOptions(y.options)}}f.nodes2updateId=[];f.nodes2update=[]}},onFailure:function(w){console.warn("Cannot retrieve NLS");f.nodes2updateId=[];f.nodes2update=[]}})},100);var b={retrieveNLS:function(o){return new j(function(q,p){l.getNlsOfPropertiesValues(JSON.stringify(o.nlsData),{tenantId:a.getPlatformId(),lang:h.getLang(),apiVersion:k,onComplete:function(r){var s=UWA.is(r,"string")?JSON.parse(r):r;q(s)},onFailure:function(r){console.warn("Cannot retrieve NLS");q({})}})})},updateColumnsWithNLS:function(r,u){var s=this;var q,p,t=[];s.completeResponse={};for(q=0;q<r.length;q++){var o=null;if(r[q].xnav_options&&r[q].xnav_options.name){o=r[q].xnav_options.name}else{if(r[q].ds6w&&r[q].ds6wFrom!=="rel"){o=r[q].ds6w}else{o=r[q].dataIndex}}if(o){if(o.indexOf(":")!==-1&&r[q].ds6wFrom!=="rel"){t.push(o)}else{if(r[q].xnav_options&&r[q].xnav_options.hardcoded===true){s.completeResponse[o]={nlsName:n[o],lang:h.getLang()}}else{if(n.attributesCustomization[o]){s.completeResponse[o]={nlsName:n.attributesCustomization[o],lang:h.getLang()}}else{console.warn("DictionaryAccess## Unknown attribute type:"+r[q].dataIndex)}}}}}s.getResourcesInfo(t).then(function(x){if(UWA.is(x,"array")){for(var v=0;v<x.length;v++){s.completeResponse[x[v].curi]={nlsName:x[v].label,lang:h.getLang()}}}for(q=0;q<r.length;q++){var w=null;if(r[q].xnav_options){w=r[q].xnav_options.name}else{if(r[q].ds6w&&r[q].ds6wFrom!=="rel"){w=r[q].ds6w}else{w=r[q].dataIndex}}if(w&&s.completeResponse[w]&&s.completeResponse[w].nlsName&&r[q].noTitleColumn!==true){r[q].text=s.completeResponse[w].nlsName}else{if(w&&w.indexOf("ds6w")!==-1){console.warn("DictionaryAccess## ds6w attribute ["+w+"] not found by FedDictionaryAccessAPI.getResourcesInfo");r[q].text=w}}}u({status:"success",columns:r})})},updateNLS:function(p){var o=p.getOccurencePath();if(f.nodes2updateId.indexOf(o)===-1){f.nodes2updateId.push(o);f.nodes2update.push(p);m(f.nodes2update)}},updateNLSforexport:function(o){var p=o.getAllDescendants();return new j(function(s,r){var q=e(p);l.getNlsOfPropertiesValues(JSON.stringify(q),{tenantId:a.getPlatformId(),lang:h.getLang(),apiVersion:"R2019x",onComplete:function(t){var u=UWA.is(t,"string")?JSON.parse(t):t;var w=d(u);var v=Object.keys(w);o.withTransactionUpdate(function(){for(var y=0;y<p.length;y++){var z=p[y];var x=c(z,v,w);if(x.updated===true){z.updateOptions(x.options)}}});s()},onFailure:function(t){console.warn("Cannot retrieve NLS");s()}})})},getPropertiesForClass:function(o){return new j(function(q,p){l.getPropertiesForClass(o.classURIs,{tenantId:a.getPlatformId(),lang:h.getLang(),apiVersion:k,onComplete:function(r){var s=UWA.is(r,"string")?JSON.parse(r):r;q(s)},onFailure:function(r){p(r)}})})},getResourcesInfo:function(o){return new j(function(q){var p={tenantId:a.getPlatformId(),lang:h.getLang(),apiVersion:k,onComplete:function(r){q(r)},onFailure:function(){console.warn("DictionaryAccess## FedDictionaryAccessAPI.getResourcesInfo failed for"+o.join(","));q()}};console.log("DictionaryAccess## call FedDictionaryAccessAPI.getResourcesInfo with "+o.join(","));l.getResourcesInfo(o.join(","),p)})}};return b});define("DS/PADServices/utils/AttributesMgt",["text!DS/PADServices/assets/init/AttributesMgt.json","UWA/Class/Promise","DS/PADServices/utils/DictionaryAccess"],function(h,e,c){var g=JSON.parse(h);var b={};var a=[];var f={initColumnMap:function(){var j;var n=Object.getOwnPropertyNames(g);for(var m=0;m<n.length;m++){var l=n[m];if(l!=="typeRepresentations"){for(j=0;j<g[l].length;j++){b[g[l][j].ds6w]=g.attributes[j];if(g[l][j].defaultValue){var k=g[l][j].ds6w?g[l][j].ds6w:g[l][j].dataIndex;a.push([g[l][j].ds6w])}}}}},buildColumnFromSetting:function(i,k){var j=UWA.extend({minWidth:50},i);if(!UWA.is(j.dataIndex)){if(!UWA.is(j.ds6w)){throw new Error("Wrong column definition for ["+JSON.stringify(i)+"]")}else{j.dataIndex=j.ds6w}}return j}};var d={updateAttributesList:function(j){var i;for(i=0;i<j.attributes.length;i++){if(UWA.is(b[j.attributes[i].ds6w])){console.warn("Already existing attribute ["+JSON.stringify(j.attributes[i])+"]")}else{g.attributes.push(j.attributes[i]);b[j.attributes[i].ds6w]=j.attributes[i];if(j.attributes[i].defaultValue){a.push([j.attributes[i].ds6w])}}}for(i=0;i<j.commandColumns.length;i++){if(UWA.is(b[j.commandColumns[i].dataIndex])){console.warn("Already existing command ["+JSON.stringify(j.commandColumns[i])+"]")}else{g.commandColumns.push(j.commandColumns[i]);b[j.commandColumns[i].dataIndex]=j.commandColumns[i];if(j.commandColumns[i].defaultValue){a.push([j.commandColumns[i].dataIndex])}}}g.typeRepresentations=UWA.merge(j.typeRepresentations)},buildColumns:function(){return new e(function(l,k){var j=[];var i=0;for(i=0;i<g.attributes.length;i++){j.push(f.buildColumnFromSetting(g.attributes[i],true))}for(i=0;i<g.commandColumns.length;i++){j.push(f.buildColumnFromSetting(g.commandColumns[i],false))}c.updateColumnsWithNLS(j,function(n){var m={};m.columns=j;if(n.status==="success"){m.columns=n.columns}l(m)})})},completeNodeOptions:function(k){for(var l=0;l<a.length;l++){var j=b[a[l]];if(!UWA.is(k.grid[a[l]])){k.grid[a[l]]=j.defaultValue}}return k},getAttributesToQuery:function(){var j={select_bo:["physicalid"],select_rel:["physicalid"]};for(var i=0;i<g.attributes.length;i++){if(g.attributes[i].ds6wFrom==="rel"){j.select_rel.push(g.attributes[i].ds6w.replace("rel:ds6w","ds6w"))}else{j.select_bo.push(g.attributes[i].ds6w)}}return j},hasNLS:function(j){var i=true;if(b[j]&&UWA.is(b[j].hasNLS,"boolean")){i=b[j].hasNLS}return i},getAvailableColumns:function(){return Object.getOwnPropertyNames(b)},retrieveTypeRepresentations:function(){return g.typeRepresentations?g.typeRepresentations:[]},isAttributeColumn:function(i){var k=["hide_show","find_in_ctx","instanceName","instanceMatrix"];var j=true;if(g.commandColumns[i]){j=false}else{if(g.attributes[i]&&g.attributes[i].ds6wFrom==="rel"){j=false}else{if(k.indexOf(i)!==-1){console.warn("AttributesMgt## Need to use the AMD more widely");j=false}}}return j}};f.initColumnMap();return d});define("DS/PADServices/views/ENXWelcomePanel",["css!DS/PADServices/PADServices.css","i18n!DS/PADServices/assets/nls/PADServices.json","UWA/Controls/Abstract","UWA/Class/Promise","DS/Core/Core","DS/PADServices/views/utils/ContentChooser","DS/PADServices/ws/WSAccess","DS/PADServices/ws/WSPromises","DS/PADServices/utils/ParserUtils","DS/PADServices/utils/GlobalUtils","DS/PADServices/utils/SubscriptionHolder","DS/Controls/Button","DS/WebappsUtils/WebappsUtils","DS/Utilities/Dom","DS/Tree/TreeNodeModel","DS/UIKIT/Mask"],function(j,e,r,d,a,l,t,q,f,b,k,o,g,v,m,w){var u={actual:null,count:0};var p={WELCOME:"ENXViews/WelcomePanel/",WELCOME_AND_SHELL:"ENXViews/WelcomeAndShell/",CONTENT:"ENXViews/ContentChooser/"};Object.freeze(p);var s='flattenedtaxonomies:"types/VPMReference" OR flattenedtaxonomies:"types/VPMRepReference" OR flattenedtaxonomies:"types/ENOStrRefinementSpecification"';function i(A){var B=[];var z=Object.getOwnPropertyNames(A);if(z.length){for(var y=0;y<z.length;y++){if(z[y]!=="opened"){var x=i(A[z[y]]);if(x===null){B.push(z[y])}else{if(UWA.is(x,"string")){B.push(x)}else{B=B.concat(x)}}}}}else{return null}return B}function c(H,y){var x=[],C=[],E={};var F=F||[];var D=H.products||{};var K=Object.getOwnPropertyNames(D);var M;for(var G in K){var B=F.indexOf(K[G])===-1?false:true;if(y&&y.indexOf(K[G])!==-1){delete D[K[G]].opened}M={resourceid:K[G],grid:{rootId:K[G],leaves:i(D[K[G]]),detached:B},opened:D[K[G]].opened,thumbnail:g.getWebappsAssetUrl("PADServices","icons/32/loading.gif"),item2Load:{},label:e.welcomePanel.loading,loading:true};if(B){M.statusbarIcons[0]="eye-off";M.statusbarIconsTooltips[0]=e.welcomePanel.detached}M.item2Load[K[G]]=D[K[G]];x.push(M);E[M.resourceid]=x.length-1;if(C.indexOf(K[G])===-1){C.push(K[G])}if(M.grid.leaves){for(var I=0;I<M.grid.leaves.length;I++){if(C.indexOf(M.grid.leaves[I])===-1){C.push(M.grid.leaves[I])}}}}var z=H.filters||{};var L=Object.getOwnPropertyNames(z);for(var A in L){var J=L[A];var B=F.indexOf(z[J].associatedProduct)===-1?false:true;M={resourceid:J,grid:{filterId:J,associatedProduct:z[J].associatedProduct,detached:B},opened:z[J].opened,thumbnail:g.getWebappsAssetUrl("PADServices","icons/32/loading.gif"),item2Load:{},label:e.welcomePanel.loading,loading:true};if(B){M.statusbarIcons[0]="eye-off";M.statusbarIconsTooltips[0]=e.welcomePanel.detached}M.item2Load[J]=z[J];x.push(M);E[M.resourceid]=x.length-1;if(C.indexOf(J)===-1){C.push(J)}if(C.indexOf(M.grid.associatedProduct)===-1){C.push(M.grid.associatedProduct)}}return{id2retrieve:C,storedObjLst:x,mapIdStoredObjLst:E}}function h(D,G){var B={products:[],filters:[]};var C=[];var z=D.products||{};var I=Object.getOwnPropertyNames(z);C=C.concat(I);for(var E in I){var A=i(z[I[E]]);if(A){for(var F=0;F<A.length;F++){if(C.indexOf(A[F])===-1){C.push(A[F])}}}}var x=D.filters||{};var J=Object.getOwnPropertyNames(x);for(var y in J){var H=J[y];if(C.indexOf(x[H].associatedProduct)===-1){C.push(x[H].associatedProduct)}}for(var F=0;F<G.length;F++){if(C.indexOf(G[F])!==-1&&B.products.indexOf(G[F])===-1){B.products.push(G[F])}else{if(J.indexOf(G[F])!==-1&&B.filters.indexOf(G[F])===-1){B.filters.push(G[F])}}}return B}var n=r.extend({name:"enx-welcome-panel",defaultOptions:{defaultActionId:null,defaultSearchTemplate:null,welcomePanelState:"opened",openStack:{openContent:null,removeContent:null,openProxy:null,removeProxy:null,launchAction:null},appReady:false,proxyReady:false,readOnlyApp:true,subscriptions:[]},init:function(x){this._parent(x);if(this.options.storedObjects===undefined){this.options.storedObjects={products:{},filters:{}}}this.subcriptionHolder=new k(x.modelEvents)},initialize:function(){var x=this;return new d(function(z,y){require(["DS/PADServices/views/utils/WelcomeAndShell"],function(B){x.elements.container=UWA.createElement("div",{"class":x.getClassNames()});var C=x.options.modelEvents;var A={description:x.options.description,container:x.elements.container,modelEvents:C};if(x.options.activities===undefined){A=UWA.extend(A,x._defaultWelcomePanel({}),true)}else{A.activities=x.options.activities;A.defaultActionId=x.options.defaultActionId}if(x.options.customOpenControllerClass){x._openController=new x.options.customOpenControllerClass()}x.elements.welcomePanel=new B(A);x.subcriptionHolder.subscribe({event:p.WELCOME+"appReady"},function(){x.options.appReady=true;if(x.options.openStack.openContent!==null){x.__launchOpenMdlEvts(x.options.openStack.openContent);x.options.openStack.openContent=null}if(x.options.openStack.removeContent!==null){x.__launchRemoveMdlEvts(x.options.openStack.removeContent);x.options.openStack.removeContent=null}if(x.options.openStack.launchAction!==null){x.__launchAction(x.options.openStack.launchAction);x.options.openStack.launchAction=null}w.unmask(x.elements.container)});x.subcriptionHolder.subscribe({event:"welcome-panel-action-selected"},function(D){C.publish({event:p.WELCOME+"action/"+D.id,data:{id:D.id}})});x.elements.welcomePanel.initialize().then(function(){x.elements.triptych=x.elements.container.querySelector(".triptych-container");x.elements.triptych.classList.add("enx-welcome-shell");x.subcriptionHolder.subscribe({event:p.CONTENT+"openContent"},function(H){var F={mode:"welcome",products:{},filters:{}};var E=H.nodes;for(var D=0;D<E.length;D++){var G=E[D];if(G.getAttributeValue("ds6w:type")==="ENOStrRefinementSpecification"){F.filters=UWA.extend(F.filters,G.options.item2Load)}else{if(G.options.fromCustom){if(x._openController){x._openController.processOpenType(F,G);return}}else{F.products=UWA.extend(F.products,E[D].options.item2Load)}}}F.withFilter=H.withFilter;x.__launchOpenMdlEvts(F)});x.subcriptionHolder.subscribe({event:p.WELCOME+"openedObject"},function(I){switch(I.kind){case"products":for(var H=0;H<I.addedPaths.length;H++){var D=I.addedPaths[H][0];if(!x.options.storedObjects.products[D]){x.options.storedObjects.products[D]={}}x.options.storedObjects.products[D].opened=true}break;case"filters":if(I.addedFilters.filters){var J=Object.getOwnPropertyNames(I.addedFilters.filters);for(var F=0;F<J.length;F++){var G=J[F];if(!x.options.storedObjects.filters[G]){x.options.storedObjects.filters[G]=I.addedFilters.filters[G]}x.options.storedObjects.filters[G].opened=true}}break;case"deleteRoots":for(var E=0;E<I.removeIds.length;E++){if(x.options.storedObjects.products[I.removeIds[E]]){delete x.options.storedObjects.products[I.removeIds[E]]}else{if(x.options.storedObjects.filters[I.removeIds[E]]){delete x.options.storedObjects.filters[I.removeIds[E]]}}}x._updateStoredList({loadKey:"previousContent"});break;case"removeFromView":x._removeObjectFromView({item2remove:I.removedFromViewIds});break}});x.subcriptionHolder.subscribe({event:p.WELCOME+"refreshView"},function(){x._updateStoredList({loadKey:"previousContent"})});x.__setDnDBehavior();x.__setupCrossWidgetCommunication().then(function(){z()})})})})},render:function(){setTimeout((function(){this.options.modelEvents.publish({event:"triptych-set-size",data:{size:300,side:"left"}});this.options.modelEvents.publish({event:"triptych-show-panel",data:"left"})}).bind(this),10);return this.elements.container},destroy:function(){this.subcriptionHolder.destroy();this.options.cmdProxy.destroy();try{this.elements.welcomePanel.destroy();delete this.elements.welcomePanel;this.elements.welcomePanel=null}catch(x){}if(this.elements.previousContent){this.elements.previousContent.destroy();delete this.elements.previousContent;this.elements.previousContent=null}if(this.elements.container.getParent()){this.elements.container.getParent().removeChild(this.elements.container)}delete this.elements.container;this.elements.container=null},_defaultWelcomePanel:function(C){var B=this;var E=B.options.modelEvents;var A={defaultActionId:null,activities:[]};B.options.defaultActionId=B.options.defaultActionId?B.options.defaultActionId:"previousContent";A.defaultActionId=B.options.defaultActionId;if(B.options.description){var D=B.options.description;var y={id:"appDescriptionRoot",actions:[{id:"appDescription",text:D,className:"lineBreak",}]};A.activities.push(y)}var x={section:{id:"newActivity",title:e.welcomePanel.newActivity,actions:[{id:"searchContent",title:e.welcomePanel.searchContent,icon:"search"}]}};A.activities.push(x);B.subcriptionHolder.subscribe({event:p.WELCOME+"action/searchContent"},function(){var G="";var F=s;if(B.options.customize&&B.options.customize.searchFilter){F=B.options.customize.searchFilter}B._launchSearch({title:e.welcomePanel.searchContent,showApplyButton:true,applyButton_Nls:e.welcomePanel.applyWithFilter,precondition:G,fts_value:F})});var z={section:{id:"contentSection",title:e.welcomePanel.content,actions:[{id:"previousContent",title:e.welcomePanel.previousContent,icon:"clock"},{id:"availableproducts",title:e.welcomePanel.availableproducts,icon:"product"},{id:"availablefilters",title:e.welcomePanel.availablefilters,icon:"filter"}]}};A.activities.push(z);B.subcriptionHolder.subscribe({event:p.WELCOME+"action/previousContent"},B._previousContent.bind(B));B.subcriptionHolder.subscribe({event:p.WELCOME+"action/availableproducts"},function(){var F=' (flattenedtaxonomies:"types/VPMReference" OR (flattenedtaxonomies:"types/VPMRepReference"))';B._launchSearch({title:e.welcomePanel.availableproducts,showApplyButton:true,applyButton_Nls:e.welcomePanel.applyWithFilter,precondition:F})});B.subcriptionHolder.subscribe({event:p.WELCOME+"action/availablefilters"},function(){var F=' (flattenedtaxonomies:"types/ENOStrRefinementSpecification")';B._launchSearch({precondition:F})});if(B.options.extraActivities){A.activities.push(B.options.extraActivities)}return A},_previousContent:function(){var x=this,y="previousContent";if(this.elements.loadauto){this.elements.loadauto.show()}if(this.elements.countResults){this.elements.countResults.hide()}if(this.elements.back2appDiv){this.elements.back2appDiv.show()}if(!x.elements.previousContent){x.elements.previousContent=new l({title:e.welcomePanel.previousContent,modelEvents:x.options.modelEvents,loadKey:y,toggleIcon:x.options.welcomePanelState==="opened"?"expand-left":"expand-right",defaultView:typeof x.options.defaultView==="undefined"?"largeTiles":x.options.defaultView});x.__addContentCB({loadKey:y})}x._updateStoredList({loadKey:y});x.options.modelEvents.publish({event:p.WELCOME_AND_SHELL+"setMainView",data:{html:x.elements.previousContent.render()}});x.subcriptionHolder.subscribe({event:"ENXViews/ContentChooser/model/"+y+"/remove"},x._removeObjectFromStore.bind(x));x.subcriptionHolder.subscribe({event:p.CONTENT+"model/"+y+"/removeFromView"},x._removeObjectFromView.bind(x))},_removeObjectFromStore:function(F){var G=this;if(F.nodes2remove||F.item2remove){var x=[];if(F.nodes2remove){for(var J=0;J<F.nodes2remove.length;J++){var B=F.nodes2remove[J];var H=Object.getOwnPropertyNames(B.options.item2Load);for(var C=0;C<H.length;C++){var A=H[C];if(B.options.item2Load[H[C]].associatedProduct){A=B.options.item2Load[H[C]].associatedProduct}if(x.indexOf(A)===-1){x.push(A)}}}G.__launchRemoveMdlEvts({item2remove:x})}else{G.__launchRemoveMdlEvts(F)}var I=G.options.storedObjects;var E,D,z=x.length;for(E=0;E<z;E++){if(I.products&&I.products.hasOwnProperty(x[E])){delete I.products[x[E]]}if(I.filters){var y=Object.getOwnPropertyNames(I.filters);for(D=0;D<y.length;D++){if(I.filters[y[D]].associatedProduct===x[E]){delete I.filters[y[D]]}}}}G._updateStoredList({loadKey:"previousContent"})}},_removeObjectFromView:function(F){var G=this;if(F.nodes2remove||F.item2remove){var x=[];if(F.nodes2remove){for(var J=0;J<F.nodes2remove.length;J++){var B=F.nodes2remove[J];var H=Object.getOwnPropertyNames(B.options.item2Load);for(var C=0;C<H.length;C++){var A=H[C];if(B.options.item2Load[H[C]].associatedProduct){A=B.options.item2Load[H[C]].associatedProduct}if(x.indexOf(A)===-1){x.push(A)}}}G.__launchRemoveFromViewMdlEvts({item2remove:x})}else{x=F.item2remove;G.__launchRemoveFromViewMdlEvts(F)}var I=G.options.storedObjects;var E,D,z=x.length;for(E=0;E<z;E++){if(I.products&&I.products.hasOwnProperty(x[E])){delete I.products[x[E]].opened}if(I.filters){var y=Object.getOwnPropertyNames(I.filters);for(D=0;D<y.length;D++){if(I.filters[y[D]].associatedProduct===x[E]){delete I.filters[y[D]].opened}}}}G._updateStoredList({loadKey:"previousContent",removedFromViewIds:x})}},_updateStoredList:function(B){var A=this;var C=this.options.storedObjects;var z=function(F){var E=F.objectsLst;var D={pids:E.id2retrieve,data:{authored:false,select_predicate:["ds6w:label","ds6w:description","ds6w:type","ds6w:responsible","ds6w:identifier","ds6w:modified"],select_file:["icon","thumbnail_2d"]}};q.fetch(D).then(function(J){if(!(J.results&&J.results.length>0)){x({idsNotFound:E.id2retrieve}).then(function(P){if(P.length===0){A.__noResult()}else{A.options.modelEvents.publish({event:"ENXViews/ContentChooser/model/"+F.loadKey,data:{op:"update",objects:P,readOnlyApp:A.options.readOnlyApp}})}})}else{var I=[],M=UWA.clone(E.id2retrieve);for(var N=0;N<J.results.length;N++){var O=J.results[N];var G=f.parseAttributes(O.attributes);var L=new Date(G.grid["ds6w:modified"]).toLocaleString(b.getLang());G.subLabel=G.grid["ds6w:responsible"]+" | "+L;G.description=G.grid["ds6w:identifier"];G.loading=undefined;if(typeof E.mapIdStoredObjLst[G.resourceid]!=="undefined"&&E.storedObjLst[E.mapIdStoredObjLst[G.resourceid]].opened===true){G.opened=true}I.push(G);var H=M.indexOf(G.resourceid);if(H!==-1){M.splice(H,1)}}var K=[];if(M.length){K.push(x({idsNotFound:M}).then(function(P){I=I.concat(P)}))}d.all(K).then(function(){if(I.length){A.options.modelEvents.publish({event:"ENXViews/ContentChooser/model/"+F.loadKey,data:{op:"update",objects:I,readOnlyApp:A.options.readOnlyApp}})}})}})};var x=function(D){return new d(function(E){require(["DS/WebappsUtils/WebappsUtils"],function(I){var H=h(C,D.idsNotFound);var J=[],G=[];if(H.products.length){var F={pids:H.products,data:{authored:true,intent:"explore_2D",select_file:["icon","thumbnail_2d"]},forceAuthoringCall:true,enopad_webapis:true};G.push(q.fetch(F).then(function(M){if(M.results&&M.results.length>0){for(var L=0;L<M.results.length;L++){var K=M.results[L];var O=f.parseAttributes(K.attributes);var N=new Date(O.grid["ds6w:modified"]).toLocaleString(b.getLang());O.subLabel=O.grid["ds6w:responsible"]+" | "+N;O.description=O.grid["ds6w:identifier"];O.loading=undefined;if(typeof y.mapIdStoredObjLst[O.resourceid]!=="undefined"&&y.storedObjLst[y.mapIdStoredObjLst[O.resourceid]].opened===true){O.opened=true}J.push(O)}}}))}if(H.filters.length){G.push(q.fetch({data:H.filters}).then(function(L){if(L.success){for(var K=0;K<L.success.length;K++){var N=L.success[K];var P=Object.getOwnPropertyNames(N);for(var M=0;M<P.length;M++){var O={resourceid:P[M],icons:[I.getWebappsAssetUrl("ENOFilterBIUX","icons/I_AdvancedFilter32.png")],thumbnail:I.getWebappsAssetUrl("ENOFilterBIUX","icons/I_AdvancedFilter144.png"),grid:{"ds6w:type":"ENOStrRefinementSpecification","ds6w:identifier":N[P[M]].filterName},label:N[P[M]].filterName,subLabel:e.welcomePanel.filterNotIndexYet,display:N[P[M]].filterName,description:N[P[M]].filterName};O.loading=undefined;if(typeof y.mapIdStoredObjLst[O.resourceid]!=="undefined"&&y.storedObjLst[y.mapIdStoredObjLst[O.resourceid]].opened===true){O.opened=true}J.push(O)}}}}))}d.all(G).then(function(){E(J)})})})};var y=c(C,B.removedFromViewIds);if(y.storedObjLst.length){A.options.modelEvents.publish({event:p.CONTENT+"model/"+B.loadKey,data:{op:"populate",objects:y.storedObjLst,allselected:true}});if(y.id2retrieve.length){z({objectsLst:y,loadKey:B.loadKey})}}else{A.__noResult()}},__noResult:function(){this.options.modelEvents.publish({event:p.CONTENT+"model/previousContent",data:{op:"noResult"}})},__addContentCB:function(y){var x=this;x.subcriptionHolder.subscribe({event:p.CONTENT+"toggleClicked"},function(z){if(x.options.mobileTriptych===true){if(x.options.welcomePanelState==="opened"){x.options.welcomePanelState="reduced"}else{if(x.options.welcomePanelState==="reduced"){x.options.welcomePanelState="opened"}}x.options.modelEvents.publish({event:"triptych-toggle-panel",data:"left"})}else{if(x.options.welcomePanelState==="opened"){x.options.welcomePanelState="reduced";x.options.modelEvents.publish({event:"welcome-panel-collapse"})}else{if(x.options.welcomePanelState==="reduced"){x.options.welcomePanelState="opened";x.options.modelEvents.publish({event:"welcome-panel-expand"})}}}});x.subcriptionHolder.subscribe({event:"welcome-panel-collapse"},function(){x.options.modelEvents.publish({event:"triptych-set-size",data:{size:40,side:"left"}});x.options.modelEvents.publish({event:"triptych-show-panel",data:"left"});x.options.modelEvents.publish({event:p.CONTENT+"toogleIcon",data:{iconName:"expand-right",fontIconFamily:WUXManagedFontIcons.Font3DS}})});x.subcriptionHolder.subscribe({event:"welcome-panel-expand"},function(){x.options.modelEvents.publish({event:"triptych-set-size",data:{size:300,side:"left"}});x.options.modelEvents.publish({event:"triptych-show-panel",data:"left"});x.options.modelEvents.publish({event:p.CONTENT+"toogleIcon",data:{iconName:"expand-left",fontIconFamily:WUXManagedFontIcons.Font3DS}})});x.subcriptionHolder.subscribe({event:"triptych-entering-mobile"},function(){x.options.mobileTriptych=true;x.options.modelEvents.publish({event:"welcome-panel-expand"})});x.subcriptionHolder.subscribe({event:"triptych-leaving-mobile"},function(){x.options.mobileTriptych=false;x.options.welcomePanelState="reduced";x.options.modelEvents.publish({event:"welcome-panel-collapse"})});x.subcriptionHolder.subscribe({event:"triptych-panel-hidden"},function(z){if(z==="left"&&x.options.mobileTriptych===true){x.options.modelEvents.publish({event:p.CONTENT+"toggleIcon",data:{iconName:"expand-right",fontIconFamily:WUXManagedFontIcons.Font3DS}})}});x.subcriptionHolder.subscribe({event:p.CONTENT+"closeLandingPage"},function(){x.options.modelEvents.publish({event:p.WELCOME+"closeLandingPage"})});x.subcriptionHolder.subscribe({event:"ENXViews/ContentChooser/searchContent"},function(){var A="";var z=s;if(x.options.customize&&x.options.customize.searchFilter){z=x.options.customize.searchFilter}x._launchSearch({title:e.welcomePanel.searchContent,showApplyButton:true,applyButton_Nls:e.welcomePanel.applyWithFilter,precondition:A,fts_value:z})});x.subcriptionHolder.subscribe({event:"ENXViews/ContentChooser/searchInRecent"},function(A){var z={pids:A.unknownIds,enopad_webapis:true,data:{authored:true,select_predicate:["ds6w:label","ds6w:description","ds6w:type","ds6w:responsible","ds6w:identifier","ds6w:modified"],select_file:["icon","thumbnail_2d"],intent:"explore_2D"}};q.fetch(z).then(function(D){var G=[];if(D.results){for(var C=0;C<D.results.length;C++){var B=D.results[C];var F=f.parseAttributes(B.attributes);var E=new Date(F.grid["ds6w:modified"]).toLocaleString(b.getLang());F.subLabel=F.grid["ds6w:responsible"]+" | "+E;F.description=F.grid["ds6w:identifier"]+" \u25ba "+e.welcomePanel.notFoundOnIndex;F.loading=undefined;G.push(F)}}x.options.modelEvents.publish({event:"ENXViews/ContentChooser/model/"+y.loadKey,data:{op:"update",objects:G,readOnlyApp:x.options.readOnlyApp,fromDB:true}})})})},__setDnDBehavior:function(){this.elements.container.addEventListener("dragenter",this.__onDragEnter.bind(this));this.elements.container.addEventListener("dragover",this.__onDragOver.bind(this));this.elements.container.addEventListener("dragleave",this.__onDragLeave.bind(this));this.elements.container.addEventListener("dragend",this.__onDragEnd.bind(this));this.elements.container.addEventListener("drop",this.__onDrop.bind(this));var y=this.elements.droparea=UWA.createElement("div",{"class":this.getClassNames("-dropArea")}).inject(this.elements.container);y.hide();var A=[{id:"addInCtx",icon:"drag-drop",title:e.welcomePanel.addObjectInCtx},{id:"addObject",icon:"drag-drop",title:e.welcomePanel.addObject},{id:"filter",icon:"filter",title:e.welcomePanel.filter}];for(var x=0;x<A.length;x++){var B=UWA.createElement("div",{"class":this.getClassNames("-dropZone "+A[x].id),draggable:false});var z=UWA.createElement("div",{"class":this.getClassNames("-dropIconAndText "+A[x].id)}).inject(B);UWA.createElement("i",{"class":this.getClassNames("_img wux-ui-3ds wux-ui-3ds-4x wux-ui-3ds-"+A[x].icon)}).inject(z);UWA.createElement("h5",{"class":this.getClassNames("_txt "+A[x].id),text:A[x].title}).inject(z);B.inject(y)}},__onDragEnter:function(x){var y=v.firstParentWithClass(x.target,"enx-welcome-panel-dropZone");if(u.count===0){this.elements.triptych.style.opacity="0.2";this.elements.droparea.show()}else{if(y&&u.actual!==y){if(u.actual){u.actual.classList.remove("zoneHighlighted")}y.classList.add("zoneHighlighted");u.actual=y}}u.count++;x.stopPropagation();return false},__onDragOver:function(x){var y=v.firstParentWithClass(x.target,"enx-welcome-panel-dropZone");if(y){x.preventDefault()}x.stopPropagation();return false},__onDragLeave:function(x){u.count--;if(u.count===0){this.elements.droparea.hide();this.elements.triptych.style.opacity="1"}if(x.target===u.actual){u.actual.classList.remove("zoneHighlighted");u.actual=null}x.stopPropagation();return false},__onDragEnd:function(x){u.count=0;if(u.actual){u.actual.classList.remove("zoneHighlighted");u.actual=null}this.elements.droparea.hide();this.elements.triptych.style.opacity="1";x.stopPropagation();return false},__onDrop:function(x){var z="WITH_CONTEXT";if(u.actual){if(u.actual.classList.contains("addObject")){z="WITHOUT_CONTEXT"}else{if(u.actual.classList.contains("filter")){z="FILTER"}}u.actual.classList.remove("zoneHighlighted");u.actual=null}u.count=0;this.elements.droparea.hide();this.elements.triptych.style.opacity="1";x.preventDefault();x.stopPropagation();var y={mode:"drop",behavior:z,unserializedData:b.deserializeDroppedData(x)};this.__launchOpenMdlEvts(y);return false},_launchSearch:function(A){var y=this;var x=function(H,F){if(H.length>0){var E=[];for(var B=0;B<H.length;B++){var G=H[B]["ds6w:type_value"]?H[B]["ds6w:type_value"]:H[B]["ds6w:type"];var D={resourceid:H[B].resourceid,label:H[B]["ds6w:label"],grid:{"ds6w:type":G},};D.item2Load={};D.item2Load[H[B].resourceid]={};E.push(new m(D))}var C={mode:"welcome",products:{},filters:{},};for(var B=0;B<E.length;B++){if(E[B].getAttributeValue("ds6w:type")==="ENOStrRefinementSpecification"){C.filters=UWA.extend(C.filters,E[B].options.item2Load)}else{C.products=UWA.extend(C.products,E[B].options.item2Load)}}C.withFilter=F;y.__launchOpenMdlEvts(C)}};var z=function(){y.elements.welcomePanel.setAction("previousContent")};if(typeof A.precondition!=="undefined"){require(["DS/PADUtils/PADUtilsServices"],function(B){var C={parent_window:y.options.odtSpecificParentWindow,title:A.title,precond:A.precondition,fts_value:A.fts_value,showApplyButton:A.showApplyButton,applyButton_Nls:A.applyButton_Nls,callback:function(D){x(D);z()},apply:function(D){x(D,true);z()},cancel:z};B.in_apps_search(C)})}},__setupCrossWidgetCommunication:function(){var x=this;return new d(function(y){require(["DS/PADUtils/PADCommandProxy","DS/PADUtils/PADUtilsServices"],function(z,A){x.options.cmdProxy=z.create({events:{onLoadStoredObj:function(C,B){if(B.originWidgetId!==A.getWidgetId()){C.fromProxy=true;if(x.options.appReady===false){x.options.openStack.openContent=C;w.mask(x.elements.container,e.welcomePanel.appLoading)}else{x.options.modelEvents.publish({event:"ENXViews/WelcomePanel/openContent",data:C})}}},onRemoveStoredObj:function(C,B){if(B.originWidgetId!==A.getWidgetId()){C.fromProxy=true;if(x.options.appReady===false){x.options.openStack.removeContent=C;w.mask(x.elements.container,e.welcomePanel.appLoading)}else{x._removeObjectFromStore(C)}}},onRemoveObjFromView:function(C,B){if(B.originWidgetId!==A.getWidgetId()){C.fromProxy=true;x._removeObjectFromView(C)}},onAppProxyReady:function(C,B){if(B.originWidgetId!==A.getWidgetId()){x.options.proxyReady=true;if(x.options.handshakeDone!==true){x.options.handshakeDone=true;x.options.cmdProxy.appProxyReady()}if(x.options.openStack.openProxy!==null){x.options.cmdProxy.loadStoredObj(x.options.openStack.openProxy);x.options.openStack.openProxy=null}if(x.options.openStack.removeProxy!==null){x.options.cmdProxy.removeStoredObj(x.options.openStack.removeProxy);x.options.openStack.removeProxy=null}}}}});x.options.cmdProxy.appProxyReady();y()})})},__launchOpenMdlEvts:function(x){if(this.options.appReady===false){this.options.openStack.openContent=x;w.mask(this.elements.container,e.welcomePanel.appLoading)}else{this.options.modelEvents.publish({event:"ENXViews/WelcomePanel/openContent",data:x});if(this.options.cmdProxy&&x.fromProxy!==true){if(this.options.proxyReady===false){this.options.openStack.openProxy=x}else{this.options.cmdProxy.loadStoredObj(x)}}}},__launchRemoveMdlEvts:function(x){var y=this;if(this.options.appReady===false){this.options.openStack.removeContent=x;w.mask(this.elements.container,e.welcomePanel.appLoading)}else{y.options.modelEvents.publish({event:"ENXViews/WelcomePanel/removeFromStored",data:x});if(this.options.cmdProxy&&x.fromProxy!==true){if(this.options.proxyReady===false){this.options.openStack.removeProxy=x}else{this.options.cmdProxy.removeStoredObj(x)}}}},__launchRemoveFromViewMdlEvts:function(x){var y=this;y.options.modelEvents.publish({event:"ENXViews/WelcomePanel/removeFromView",data:x});if(this.options.cmdProxy&&x.fromProxy!==true){this.options.cmdProxy.removeObjFromView(x)}},__launchAction:function(y){var x=this;require(["DS/ApplicationFrame/CommandsManager"],function(z){var A=z.getCommand(y.command);if(A){if(y.unselectBeforeLaunch===true){x.options.modelEvents.publish({event:"ENXViews/WelcomePanel/unselectAllInModel"})}A.begin();x.options.modelEvents.publish({event:"ENXViews/WelcomePanel/closeLandingPage"})}})}});return n});define("DS/PADServices/views/LandingPage",["DS/PADServices/views/ENXWelcomePanel","UWA/Class/Promise","DS/PADServices/utils/GlobalModelEvents","DS/PADServices/utils/SubscriptionHolder","DS/WebappsUtils/WebappsUtils","i18n!DS/PADServices/assets/nls/PADServices.json"],function(h,f,c,b,e,a){function d(j){var i=false;if(UWA.is(j,"boolean")){i=j}else{if(UWA.is(j,"string")){i=j.toLowerCase()==="true"}}return i}function g(i){i=i||{};this.options=UWA.extend({widget:null,welcome:null,viewer:null,injectedView:null,onLandingPageReady:null,readOnlyApp:true,renderDiv:null,subscriptions:[]},i,true)}g.prototype={initialize:function(){var i=this;return new f(function(j){require(["DS/PADUtils/PADUtilsServices","DS/PADUtils/PADSettingsMgt"],function(l,k){k.setSetting("lang",i.options.widget.lang);l.app_initialization(function(){i._globalSubscriptionHolder=new b(c.getModelEvents());var m=i.options.widget.getValue("xsceneStoredObjects");if(UWA.is(m,"string")){m=JSON.parse(m)}else{m={products:{},filters:{}}}var n=d(i.options.widget.getValue("autoreload"));var p=undefined;var o={odtSpecificParentWindow:i.options.odtSpecificParentWindow,modelEvents:c.getModelEvents(),storedObjects:m,description:i.options.description,readOnlyApp:i.options.readOnlyApp};if(i.options.activities){o.activities=i.options.activities}if(i.options.extraActivities){o.extraActivities=i.options.extraActivities}if(i.options.customHandlerClass){i._customHandler=new i.options.customHandlerClass({loadingNls:a.welcomePanel.loading,loadingIcon:e.getWebappsAssetUrl("PADServices","icons/32/loading.gif")});i.__customizeSetup()}if(i.options.customOpenControllerClass){o.customOpenControllerClass=i.options.customOpenControllerClass}if(i.options.customize){o.customize=UWA.clone(i.options.customize)}i.options.welcome=new h(o);i.options.welcome.initialize().then(function(){if(n===false){if(i.options.onLandingPageReady){i.options.onLandingPageReady.call(null,m)}i.__switchView("welcome")}var q=c.subscribe({event:"ENXViews/WelcomePanel/appReady"},function(){c.unsubscribe(q);if(i.options.onReady){i.options.onReady()}})});if(n){p=m}j(p)})})})},setViewer:function(i){this.options.viewer=i;this.__3DCBSetUp()},render:function(){return this.options.welcome.render()},redraw:function(){this.options.welcome.render()},appReady:function(){c.publish({event:"ENXViews/WelcomePanel/appReady"})},destroy:function(){this._globalSubscriptionHolder.destroy();if(this._viewerSubscriptionHolder){this._viewerSubscriptionHolder.destroy()}if(this.options.viewer){this.options.viewer.destroy();this.options.viewer=null}if(this.options.welcome){this.options.welcome.destroy();this.options.welcome=null}},__switchView:function(i){if(i!==this.options.injectedView){if(i==="viewer"&&this.options.viewer){this.options.renderDiv.empty();this.options.viewer.render().inject(this.options.renderDiv);this.options.injectedView="viewer";if(this.options.viewer.elements.borderedLayout){this.options.viewer.elements.borderedLayout.show()}}else{if(i==="welcome"){this.options.renderDiv.empty();this.options.welcome.render().inject(this.options.renderDiv);this.options.injectedView="welcome";if(this.options.viewer&&this.options.viewer.elements.borderedLayout){this.options.viewer.elements.borderedLayout.hide()}}}}},__3DCBSetUp:function(){var i=this;var j=i.options.viewer.subscribe({event:"onReady"},function(k){i.options.viewer.unsubscribe(j);if(k.injectInView===true){i.__switchView("viewer")}i._globalSubscriptionHolder.subscribe({event:"ENXViews/WelcomePanel/openContent"},function(l){i.__switchView("viewer");switch(l.mode){case"welcome":i.options.viewer.openStoredObjects(l);break;case"drop":i.options.viewer.openDroppedObjects(l).then(function(m){if(m&&m.error){i.__switchView("welcome")}});break;default:console.error("Unknown mode ["+l.mode+"]");i.__switchView("welcome");break}});i._globalSubscriptionHolder.subscribe({event:"ENXViews/WelcomePanel/removeFromStored"},function(q){if(q.item2remove){var v=q.item2remove;var u=i.options.widget.getValue("xsceneStoredObjects");if(u==="null"){u=null}if(UWA.is(u,"string")){var s=i.options.viewer.getController();u=JSON.parse(u);var r,p,m=v.length;var o=false;for(r=0;r<m;r++){if(u.products&&u.products.hasOwnProperty(v[r])){var n=s.getNode({id:v[r]});if(n){s.removeRoots({pids:[v[r]]})}else{delete u.products[v[r]];o=true}}if(u.filters){var l=Object.getOwnPropertyNames(u.filters);for(p=0;p<l.length;p++){if(u.filters[l[p]].associatedProduct===v[r]){var n=s.getNode({id:v[r]});if(n){s.removeRoots({pids:[v[r]]})}else{delete u.filters[l[p]];o=true}}}}}if(o){i.options.widget.setValue("xsceneStoredObjects",JSON.stringify(u))}if(i._customHandler){var t=i._customHandler.removeFromStore(i.options.widget,q.item2remove);if(t){c.publish({event:"/ENXViews/ContentChooser/model/previousContent/refresh/"})}}}}});i._globalSubscriptionHolder.subscribe({event:"ENXViews/WelcomePanel/activate"},function(){c.publish({event:"ENXViews/WelcomePanel/refreshView"});i.__switchView("welcome")});i._globalSubscriptionHolder.subscribe({event:"ENXViews/WelcomePanel/closeLandingPage"},function(){i.__switchView("viewer")})});i.__hookRemoveFromView();i._viewerSubscriptionHolder=new b(this.options.viewer.getModelEvents());i._viewerSubscriptionHolder.subscribe({event:"onRootAdded"},function(r){if(r.rootLog){var q=i.options.widget.getValue("xsceneStoredObjects");if(q==="null"){q=null}if(!UWA.is(q)){q={products:{},filters:{}}}else{q=JSON.parse(q)}if(r.filterId){var l={filters:{}};l.filters[r.filterId]={associatedProduct:r.id};q=UWA.extend(q,l,true);c.publish({event:"ENXViews/WelcomePanel/openedObject",data:{kind:"filters",addedFilters:l}})}else{var m;var p=r.rootLog.length;for(m=0;m<p;m++){var n=q.products;var k=0;var o=r.rootLog[m].length;for(k=0;k<o;k++){if(!n.hasOwnProperty(r.rootLog[m][k])){n[r.rootLog[m][k]]={}}n=n[r.rootLog[m][k]]}}c.publish({event:"ENXViews/WelcomePanel/openedObject",data:{kind:"products",addedPaths:r.rootLog}})}i.options.widget.setValue("xsceneStoredObjects",JSON.stringify(q));if(i.injectedView!=="viewer"){i.__switchView("viewer")}}i.options.viewer.getContentName({callbacks:{onComplete:function(s){i.options.widget.setTitle(s.contentName)}}})});i._viewerSubscriptionHolder.subscribe({event:"onLoadingFailure"},function(){var k=i.options.viewer.getController();if(k.getNbRoots()===0){c.publish({event:"ENXViews/WelcomePanel/refreshView"});i.__switchView("welcome")}});i._viewerSubscriptionHolder.subscribe({event:"onRootRemoved"},function(n){if(n.id){var s=[n.id];var o=[];var r=i.options.widget.getValue("xsceneStoredObjects");if(r==="null"){r=null}if(UWA.is(r,"string")){r=JSON.parse(r);var p,m,k=s.length;for(p=0;p<k;p++){if(r.products&&r.products.hasOwnProperty(s[p])){delete r.products[s[p]];o.push(s[p])}if(r.filters){var l=Object.getOwnPropertyNames(r.filters);for(m=0;m<l.length;m++){if(r.filters[l[m]].associatedProduct===s[p]){delete r.filters[l[m]];o.push(l[m])}}}}c.publish({event:"ENXViews/WelcomePanel/openedObject",data:{kind:"removeFromView",removedFromViewIds:o}})}var q=i.options.viewer.getController();if(q.getNbRoots()===0){c.publish({event:"ENXViews/WelcomePanel/refreshView"});i.__switchView("welcome")}i.options.viewer.getContentName({callbacks:{onComplete:function(t){i.options.widget.setTitle(t.contentName)}}})}})},__hookRemoveFromView:function(){var i=this;i._globalSubscriptionHolder.subscribe({event:"ENXViews/WelcomePanel/removeFromView"},function(o){var k=i.options.viewer.getController();for(var l=0;l<o.item2remove.length;l++){var n=o.item2remove[l];var m=k.getNode({id:n});if(m){k.removeRoots({pids:[n]})}}if(i._customHandler){var j=i._customHandler.removeFromStore(i.options.widget,o.item2remove);if(j){c.publish({event:"/ENXViews/ContentChooser/model/previousContent/refresh/"})}}})},__customizeSetup:function(){var i=this;if(i._customHandler){var j=function(){var m=c.getModelEvents();var l=i._getStoredStruct();var k=i._customHandler.populate(l);k.then(function(n){if(n.length){m.publish({event:"ENXViews/ContentChooser/model/previousContent",data:{op:"populateAppend",objects:n,allselected:true}})}var o=i._customHandler.update(l);o.then(function(p){m.publish({event:"ENXViews/ContentChooser/model/previousContent",data:{op:"update",objects:p,allselected:true,fromCustom:true}})})})};i._globalSubscriptionHolder.subscribe({event:"/ENXViews/WelcomePanel/action/previousContent/"},j);i._globalSubscriptionHolder.subscribe({event:"/ENXViews/ContentChooser/model/previousContent/refresh/"},function(){c.publish({event:"/ENXViews/WelcomePanel/action/previousContent/"})})}},_getStoredStruct:function(){var i=this.options.widget.getValue("xsceneStoredObjects");if(UWA.is(i,"string")){i=JSON.parse(i)}else{i={products:{},filters:{}}}return i},};return g});define("DS/PADServices/utils/DictionaryMgt",["UWA/Promise","DS/PADServices/ws/WSAccess","DS/PADServices/utils/PlatformURL","DS/PADServices/utils/DictionaryAccess"],function(f,c,a,d){var h={};var e=null,g=".png";var b={buildIconUrl:function(i){if(e===null){e=a.get3DSpaceURL()+"/snresources/images/icons/small/"}return i?e+i+g:""},getNLSForTypes:function(k){var j=k.replace("ds6wg:","");var i=h.typesInfo[j]?h.typesInfo[j].displayName:h.extensions[j]?h.extensions[j].nlsName:h.automaticExtensions[j]?h.automaticExtensions[j].nlsName:j;return i},getTypesInfo:function(i){return new f(function(k,j){c.executeWS("getTypeInfo",{url_parameters:{parentInfo:true,"$select":"IconName"},body:i.baseTypes}).then(function(n){var l=Object.getOwnPropertyNames(n);var m={"ds6w:type":l};d.retrieveNLS({nlsData:m}).then(function(p){for(var o=0;o<l.length;o++){if(p["ds6w:type"][l[o]]){n[l[o]].displayName=p["ds6w:type"][l[o]]}else{n[l[o]].displayName=l[o]}n[l[o]].iconUrl=b.buildIconUrl(n[l[o]].IconName)}k(n);h.typesInfo=n})})})},interfaces:function(i){return new f(function(k,j){c.executeWS("interfaces",{url_parameters:{},data:{classes:i.classes}}).then(function(m){var p={},o={};var n=m.results;for(var l=0;l<n.length;l++){var q=n[l].name;for(var r=0;r<n[l].interfaces.length;r++){if((n[l].interfaces[r].automatic&&n[l].interfaces[r].automatic.toLowerCase()==="yes")||(n[l].interfaces[r].name.startsWith("XP_")&&n[l].interfaces[r].name.endsWith("_Ext"))){if(o[n[l].interfaces[r].name]===undefined){o[n[l].interfaces[r].name]=n[l].interfaces[r];o[n[l].interfaces[r].name].declareIn=[]}o[n[l].interfaces[r].name].declareIn.push(q)}else{if(p[n[l].interfaces[r].name]===undefined){p[n[l].interfaces[r].name]=n[l].interfaces[r];p[n[l].interfaces[r].name].declareIn=[]}p[n[l].interfaces[r].name].declareIn.push(q)}}}k({extensions:p,automaticExtensions:o});h.extensions=p;h.automaticExtensions=o})})},getPropertiesForClass:function(i){return new f(function(k,j){d.getPropertiesForClass(i).then(function(n){var q={};for(var p=0;p<n.length;p++){var r=n[p];for(var o=0;o<r.properties.length;o++){var l=r.properties[o];if(q[l.curi]===undefined){q[l.curi]=l;q[l.curi].inTypes=[r.classInfo.curi]}else{q[l.curi].inTypes.push(r.classInfo.curi)}}}var m=[];if(q["ds6w:type"]===undefined){q["ds6w:type"]={curi:"ds6w:type",label:"ds6w:type"};var s=new f(function(t){d.getResourcesInfo(["ds6w:type"]).then(function(u){if(UWA.is(u,"array")&&u.length===1){q["ds6w:type"]=UWA.merge(u[0],q["ds6w:type"])}t()})});m.push(s)}f.all(m).then(function(){console.groupCollapsed("DictionaryMgt## Available attributes");console.log(JSON.stringify(q,null,2));console.groupEnd();k({availaibleAttributes:q});h.availaibleAttributes=q})})})}};return b});define("DS/PADServices/views/utils/MoreAttributesWizard",["css!DS/PADServices/PADServices","i18n!DS/PADServices/assets/nls/PADServices.json","UWA/Core","UWA/Controls/Abstract","UWA/Class/Promise","DS/PADServices/utils/GlobalUtils","DS/PADServices/ws/WSAccess","DS/PADServices/views/utils/WizardSteps","text!DS/PADServices/assets/init/MoreAttrWizardSteps.json","DS/PADServices/views/utils/SearchInput","DS/PADServices/views/utils/Iconbar","DS/PADServices/utils/DictionaryMgt","DS/Controls/Button","DS/Controls/Loader","DS/Tree/TreeDocument","DS/Tree/TreeNodeModel","DS/TreeModel/DataModelSet","DS/DataGridView/DataGridView","DS/DataGridView/DataGridViewLayout","DS/Utilities/Utils"],function(m,f,h,t,e,c,v,i,u,s,b,j,p,x,l,n,w,q,a,d){var o="DS/ENOFloatingPanel/ENOFloatingPanel";var k=JSON.parse(u);var g={properties:[function(){return{property:"dataIndex",value:this.options.label}},function(){return{property:"label",value:this.options.grid.attrTitle}},function(){return{property:"kind",value:this.options.grid.attrKind}},function(){return{property:"description",value:this.options.grid.attrDesc}}]};var r=t.extend({name:"more-attr",defaultOptions:{baseTypes:[],selectedTypes:[],automaticExtensions:[],selectedExtensions:[],selectedAttributes:[],subscribeTokens:[],modelEvents:null,renderTo:null,steps:null,activeView:null,views:{typesView:null,extensionsView:null,attributesView:null},toolbar:null,grids:{},dataModelSets:{},models:{},dgvOptions:{defaultColumnDef:{width:"auto",typeRepresentation:"string"},showRowBorderFlag:true,alternateBackgroundFlag:false,columns:[{dataIndex:"tree",visibleFlag:false},{text:f.moreAttributesWizard.objSelected,dataIndex:"attrSel",typeRepresentation:"boolean",alwaysVisibleFlag:true,width:50,resizableFlag:false,editableFlag:true,editionPolicy:"EditionOnOver"},{text:f.moreAttributesWizard.title,dataIndex:"attrTitle",typeRepresentation:"string",editableFlag:false,width:"auto",sortableFlag:true,resizableFlag:false}]},dgvLayoutOptions:{cellHeight:26,columnHeaderHeight:38,rowsHeader:false}},init:function(y){this._parent(y);this._realInit(y)},_realInit:function(y){var z=this;require([o],function(A){z.elements.body=h.createElement("div",{"class":z.getClassNames("-body")});z.elements.footer=h.createElement("div",{"class":z.getClassNames("-footer")});z._buildFooter().then(z._buildBody.bind(z)).done(function(){z.elements.floatingpanel=new A({className:z.name,body:z.elements.body,footer:z.elements.footer,title:f.moreAttributesWizard.titlePanel,overlay:true,closable:true,animate:true,resizable:true,visible:true,events:{onClose:function(){z.destroy()}}});z.elements.floatingpanel.inject(z.options.renderTo);z.options.subscribeTokens.push(z.options.modelEvents.subscribe({event:"ENXViews/WizardSteps/stepChanged",},function(C){var B=C.stepId;z.switchView(B)}));z.options.modelEvents.publish({event:"ENXViews/MoreAttributesWizard/ready"})})})},destroy:function(){for(var y=0;y<this.options.subscribeTokens.length;y++){this.options.modelEvents.unsubscribe(this.options.subscribeTokens[y])}this.options.toolbar.destroy();this._parent()},_buildBody:function(){var y=this;return new e(function(B,A){y.elements.wizard=h.createElement("div",{"class":y.getClassNames("-wizard")}).inject(y.elements.body);y.options.wizard=new i({modelEvents:y.options.modelEvents,renderTo:y.elements.wizard,steps:k});y.elements.content=h.createElement("div",{"class":y.getClassNames("-content")}).inject(y.elements.body);var z=h.createElement("div",{"class":y.getClassNames("-toolbar-container")}).inject(y.elements.content);y._generateToolbar({renderTo:z});y.switchView(k.activeStep);B()})},_buildFooter:function(){var y=this;return new e(function(A,z){var B=y.elements.nextButton=new p({label:f.moreAttributesWizard.next,value:"next",emphasize:"primary",touchMode:true});B.addEventListener("click",function(){if(y.options.activeView==="typesView"){y.options.modelEvents.publish({event:"ENXViews/WizardSteps/changeStep",data:{stepId:"extensionsView"}})}else{if(y.options.activeView==="extensionsView"){y.options.modelEvents.publish({event:"ENXViews/WizardSteps/changeStep",data:{stepId:"attributesView"}})}else{if(y.options.activeView==="attributesView"){var C=y.options.models.attributesView.search({match:function(D){return D.nodeModel.options.grid.attrSel===true}}).map(function(D){return D.dump(g)});y.options.modelEvents.publish({event:"ENXViews/MoreAttributesWizard/selectedAttributes",data:{selectedAttributes:C,selectedTypes:y.options.selectedTypes,selectedExtensions:y.options.selectedExtensions}});y.destroy()}}}});B.inject(y.elements.footer);A()})},switchView:function(y){if(this.options.activeView!==y){this.elements.toolbarSearch.clear(true);this.options.previousView=this.options.activeView;this.options.activeView=y;if(this.options.views[y]===null){var A=this.elements.content.getElement("div.more-attr-chooser-view");if(A){this.elements.content.removeChild(A)}if(!h.is(this.elements.loader)){this.elements.loaderDiv=h.createElement("div",{"class":this.getClassNames("-loader")}).inject(this.elements.content);this.elements.loader=new x().inject(this.elements.loaderDiv);this.elements.loader.getContent().addClassName("enx-loader")}this.elements.loaderDiv.removeClassName("hidden");this.elements.loader.on();var z=this;this["_build"+y]().then(function(B){z.elements.loaderDiv.addClassName("hidden");z.elements.loader.off();z.options.modelEvents.publish({event:"ENXViews/MoreAttributesWizard/viewReady",data:{activeView:z.options.activeView}})})}else{this.options.views[y].inject(this.elements.content);this.options.modelEvents.publish({event:"ENXViews/MoreAttributesWizard/viewReady",data:{activeView:this.options.activeView}})}}},_buildtypesView:function(){var y=this;return new e(function(C,B){y.elements.nextButton.label=f.moreAttributesWizard.next;y.elements.nextButton.disabled=true;y.options.wizard.getContent().addClassName("disabled");y.options.views[y.options.activeView]=h.createElement("div",{"class":y.getClassNames("-"+y.options.activeView+" more-attr-chooser-view")});var A=h.createElement("div",{"class":y.getClassNames("-"+y.options.activeView+"Dgv more-attr-dgv-container")}).inject(y.options.views[y.options.activeView]);var D=h.extend({identifier:"MoreAttrWizard-"+c.uid()},h.clone(y.options.dgvOptions));D.columns.splice(2,0,{text:f.moreAttributesWizard.icon,dataIndex:"attrIcon",typeRepresentation:"icon",editableFlag:false,width:30,sortableFlag:false,resizableFlag:false});D.layout=new a(y.options.dgvLayoutOptions);var z=y.options.grids[y.options.activeView]=new q(D);y.options.dataModelSets[y.options.activeView]=new w();y.options.models[y.options.activeView]=new l({dataModelSet:y.options.dataModelSets[y.options.activeView]});z.treeDocument=y.options.models[y.options.activeView];z.getContent().addClassName("enxdatagridview loading");z.getContent().inject(A);y.options.views[y.options.activeView].inject(y.elements.content);z.onReady(function(){j.getTypesInfo({baseTypes:y.options.baseTypes}).then(function(G){var H=Object.getOwnPropertyNames(G);for(var E=0;E<H.length;E++){var J=H[E],K=G[J],I=y.options.selectedTypes.indexOf(J)!==-1?true:false;var F=n.createTreeNodeDataModel(y.options.dataModelSets[y.options.activeView],{label:J,grid:{attrTitle:K.displayName,attrSel:I,attrIcon:K.iconUrl}});y.options.models[y.options.activeView].addRoot(F,I?0:undefined)}z.getContent().removeClassName("loading");y.elements.nextButton.disabled=false;y.options.wizard.getContent().removeClassName("disabled");C({})});z.addEventListener("change",y._changeType.bind(y))})})},_changeType:function(A,B){var y=this.options.grids[this.options.activeView];if(B&&B.nodeModel&&B.nodeModel.options.grid){if(y.layout.getDataIndexFromColumnIndex(B.columnID)==="attrSel"){var z=this.options.selectedTypes.indexOf(B.nodeModel.getLabel());if(B.nodeModel.options.grid.attrSel===true){if(z===-1){this.options.selectedTypes.push(B.nodeModel.getLabel())}}else{if(z!==-1){this.options.selectedTypes.splice(z)}}}}},_buildextensionsView:function(){var y=this;return new e(function(D,C){y.elements.nextButton.label=f.moreAttributesWizard.next;y.elements.nextButton.disabled=true;y.options.wizard.getContent().addClassName("disabled");y.options.views[y.options.activeView]=h.createElement("div",{"class":y.getClassNames("-"+y.options.activeView+" more-attr-chooser-view")});var B=h.createElement("div",{"class":y.getClassNames("-"+y.options.activeView+"-Dgv more-attr-dgv-container")}).inject(y.options.views[y.options.activeView]);var E=h.extend({identifier:"MoreAttrWizard-"+c.uid()},h.clone(y.options.dgvOptions));E.columns.push({text:f.moreAttributesWizard.declaredIn,dataIndex:"declaredIn",typeRepresentation:"declaredInRepresentation",editableFlag:false,width:75,sortableFlag:false,resizableFlag:false});E.layout=new a(y.options.dgvLayoutOptions);var A=y.options.grids[y.options.activeView]=new q(E);var z={declaredInRepresentation:{stdTemplate:"functionMenuIcon",semantics:{icon:{iconName:"where-used",fontIconFamily:WUXManagedFontIcons.Font3DS}}}};A.getTypeRepresentationFactory().registerTypeRepresentations(JSON.stringify(z));y.options.dataModelSets[y.options.activeView]=new w();y.options.models[y.options.activeView]=new l({dataModelSet:y.options.dataModelSets[y.options.activeView]});A.treeDocument=y.options.models[y.options.activeView];A.getContent().addClassName("enxdatagridview loading");A.getContent().inject(B);y.options.views[y.options.activeView].inject(y.elements.content);A.onReady(function(){j.interfaces({classes:y.options.selectedTypes}).then(function(N){var J=Object.getOwnPropertyNames(N.extensions);for(var L=0;L<J.length;L++){var M=J[L],F=N.extensions[M],H=y.options.selectedExtensions.indexOf(M)!==-1?true:false;var K={menu:[]};for(var O=0;O<F.declareIn.length;O++){K.menu.push({type:"PushItem",title:j.getNLSForTypes(F.declareIn[O])})}var G=n.createTreeNodeDataModel(y.options.dataModelSets[y.options.activeView],{label:M,grid:{attrTitle:F.nlsName,attrSel:H,declaredIn:K,attrInType:F.declareIn}});y.options.models[y.options.activeView].addRoot(G,H?0:undefined)}var I=Object.getOwnPropertyNames(N.automaticExtensions);for(var L=0;L<I.length;L++){y.options.automaticExtensions.push(I[L])}A.getContent().removeClassName("loading");y.elements.nextButton.disabled=false;y.options.wizard.getContent().removeClassName("disabled");D({})});A.addEventListener("change",y._changeExtension.bind(y))})})},_changeExtension:function(A,B){var y=this.options.grids[this.options.activeView];if(B&&B.nodeModel&&B.nodeModel.options.grid){if(y.layout.getDataIndexFromColumnIndex(B.columnID)==="attrSel"){var z=this.options.selectedExtensions.indexOf(B.nodeModel.getLabel());if(B.nodeModel.options.grid.attrSel===true){if(z===-1){this.options.selectedExtensions.push(B.nodeModel.getLabel())}}else{if(z!==-1){this.options.selectedExtensions.splice(z)}}}}},_buildattributesView:function(){var y=this;return new e(function(D,C){y.elements.nextButton.label=f.moreAttributesWizard.done;y.elements.nextButton.disabled=true;y.options.wizard.getContent().addClassName("disabled");y.options.views[y.options.activeView]=h.createElement("div",{"class":y.getClassNames("-"+y.options.activeView+" more-attr-chooser-view")});var B=h.createElement("div",{"class":y.getClassNames("-"+y.options.activeView+"-Dgv more-attr-dgv-container")}).inject(y.options.views[y.options.activeView]);var E=h.extend({identifier:"MoreAttrWizard-"+c.uid()},h.clone(y.options.dgvOptions));E.columns.push({text:f.moreAttributesWizard.declaredIn,dataIndex:"declaredIn",typeRepresentation:"declaredInRepresentation",editableFlag:false,width:75,sortableFlag:false,resizableFlag:false});E.layout=new a(y.options.dgvLayoutOptions);var A=y.options.grids[y.options.activeView]=new q(E);y.options.dataModelSets[y.options.activeView]=new w();y.options.models[y.options.activeView]=new l({dataModelSet:y.options.dataModelSets[y.options.activeView]});var z={declaredInRepresentation:{stdTemplate:"functionMenuIcon",semantics:{icon:{iconName:"where-used",fontIconFamily:WUXManagedFontIcons.Font3DS}}}};A.getTypeRepresentationFactory().registerTypeRepresentations(JSON.stringify(z));A.treeDocument=y.options.models[y.options.activeView];A.getContent().addClassName("enxdatagridview loading");A.getContent().inject(B);y.options.views[y.options.activeView].inject(y.elements.content);A.onReady(function(){var H=h.clone(y.options.selectedTypes.concat(y.options.automaticExtensions).concat(y.options.selectedExtensions));console.log("availableObjects:"+JSON.stringify(H));for(var G=0;G<H.length;G++){H[G]="ds6wg:"+H[G]}console.log("Transformed availableObjects:"+JSON.stringify(H));var F=H.join("\n");j.getPropertiesForClass({classURIs:F}).then(function(P){var L=Object.getOwnPropertyNames(P.availaibleAttributes);for(var O=0;O<L.length;O++){var J=L[O],M=P.availaibleAttributes[J],K=y.options.selectedAttributes.indexOf(J)!==-1?true:false;var N={menu:[]};if(M.inTypes){for(var Q=0;Q<M.inTypes.length;Q++){N.menu.push({type:"PushItem",title:j.getNLSForTypes(M.inTypes[Q])})}}var I=n.createTreeNodeDataModel(y.options.dataModelSets[y.options.activeView],{label:J,grid:{attrTitle:M.label,attrDesc:M.description,attrKind:M.dataType,attrInType:M.attrInType,declaredIn:N,attrSel:K}});y.options.models[y.options.activeView].addRoot(I,K?0:undefined)}A.getContent().removeClassName("loading");y.elements.nextButton.disabled=false;y.options.wizard.getContent().removeClassName("disabled");D({})});A.addEventListener("change",y._changeAttributes.bind(y))})})},_changeAttributes:function(A,B){var y=this.options.grids[this.options.activeView];if(B&&B.nodeModel&&B.nodeModel.options.grid){if(y.layout.getDataIndexFromColumnIndex(B.columnID)==="attrSel"){var z=this.options.selectedAttributes.indexOf(B.nodeModel.getLabel());if(B.nodeModel.options.grid.attrSel===true){if(z===-1){this.options.selectedAttributes.push(B.nodeModel.getLabel())}}else{if(z!==-1){this.options.selectedAttributes.splice(z)}}}}},_generateToolbar:function(D){var C=this;this.elements.toolbar=h.createElement("div",{"class":this.getClassNames("-toolbar")}).inject(D.renderTo);var F=h.createElement("div",{"class":this.getClassNames("-toolbar-input")}).inject(this.elements.toolbar);var z=h.createElement("div",{"class":this.getClassNames("-toolbar-iconbar")}).inject(this.elements.toolbar);var y=function(G,J){var H=false;var K=new RegExp(G,"i");if(K.test(J.nodeModel.options.grid.attrTitle)||K.test(J.nodeModel.getLabel())){H=true}else{if(J.nodeModel.options.grid.attrInType&&J.nodeModel.options.grid.attrInType.length){for(var I=0;I<J.nodeModel.options.grid.attrInType.length&&H===false;I++){H=K.test(J.nodeModel.options.grid.attrInType[I])||K.test(j.getNLSForTypes(J.nodeModel.options.grid.attrInType[I]))}}}return H};var B=d.debounce(function(G){C.options.models[C.options.activeView].withTransactionUpdate(function(){var I=G.searchStr;var H=true;C.options.filterInProgress=true;C.options.models[C.options.activeView].search({match:function(J){if(y(I,J)){J.nodeModel.show();if(I.length>0){if(H){J.nodeModel.select(true);J.nodeModel.matchSearch();H=false}else{J.nodeModel.unmatchSearch();J.nodeModel.unselect()}}else{J.nodeModel.unmatchSearch();J.nodeModel.unselect()}}else{J.nodeModel.unmatchSearch();J.nodeModel.unselect();J.nodeModel.hide()}}});C.options.filterInProgress=false});C.options.models[C.options.activeView].getXSO().onPostAdd(function(){});C.options.models[C.options.activeView].getXSO().onPostRemove(function(){})},500);C.elements.toolbarSearch=new s({events:{onSearch:B}}).inject(F);var A=function(G){C.options.models[C.options.activeView].withTransactionUpdate(function(){var I=C.options.models[C.options.activeView].getRoots();for(var H=0;H<I.length;H++){switch(G){case"none":I[H].show();break;case"selected":if(I[H].getReferenceValue("attrSel")===true){I[H].show()}else{I[H].hide()}break;case"unselected":if(I[H].getReferenceValue("attrSel")===false){I[H].show()}else{I[H].hide()}break}}});C.options.models[C.options.activeView].getXSO().onPostAdd(function(){});C.options.models[C.options.activeView].getXSO().onPostRemove(function(){})};var E={renderTo:z,items:[{className:"divider"},{fonticon:"filter",text:f.moreAttributesWizard.filterRows,name:"filter",content:{type:"dropdownmenu",options:{items:[{fonticon:"block",text:f.moreAttributesWizard.none,name:"none",selectable:true,selected:true},{fonticon:"checkbox-on",text:f.moreAttributesWizard.selected,name:"selected",selectable:true},{fonticon:"checkbox-off",text:f.moreAttributesWizard.unselected,name:"unselected",selectable:true}],events:{onClick:function(H,G){A(G.name)}}}}}]};this.options.toolbar=new b(E);this.options.toolbar.elements.container.setStyle("display",undefined)}});return r});