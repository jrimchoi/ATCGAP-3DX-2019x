define("DS/i3DXCompassCmp/Views/TileAddView",["UWA/Core","DS/W3DXComponents/Views/Item/TileView","css!DS/i3DXCompassCmp/i3DXCompassCmp"],function(b,a){return a.extend({tagName:"div",name:"platform-management",render:function(){this.container.addClassName("grid add-container");this._parent();this.container.getElement(".platform-management-header").setContent({tag:"i",styles:{height:70,width:60,"vertical-align":"middle",display:"table-cell"},"class":this.model.get("fonticon")});this.container.getElement(".platform-management-body").removeClassName("tile-body").setContent({tag:"div",styles:{height:70,"vertical-align":"middle",display:"table-cell"},text:this.model.get("title")});this.container.addEvent("click",this.model.get("action"));return this}})});define("DS/i3DXCompassCmp/Modal/PrereqError",["UWA/Core","UWA/Controls/Abstract","DS/UIKIT/Modal","DS/UIKIT/Input/Toggle","DS/i3DXCompassCore/Model/ProcessModel","DS/UIKIT/Input/Button","DS/i3DXCompassCore/Utils","i18n!DS/i3DXCompassCmp/assets/nls/i3DXCompassCmp"],function(h,g,c,f,b,a,e,d){return g.extend({defaultOptions:{prereq:[],onCancel:function(){},onRemovedRequired:function(){}},needed:false,disableOKButton:false,clickOkPressed:false,requiredByOption:0,requiredByAnd:0,init:function(i){var j=this;j._parent(i);this.modal=new c({closable:true,className:e.getPlatformManagementWrapperClassName(""),header:"",body:"",footer:"",events:{onHide:function(){j.options.onCancel(j.asRemovedRequired);this.destroy();e.manageSupportOfMultiModal()}}});this.elements.container=this.modal;if(!j.options.model.isTPA()){j.options.selectedCollection.forEach(function(k){if(k.get("prereq")){if(k.get("prereq")&&!k.get("prereq").empty&&k.get("prereq").type==="and"){k.get("prereq").process.forEach(function(l){if(j.options.model.get("uid")===l.uid){j.options.prereq.push(k);j.requiredByAnd++}})}else{if(k.get("prereq")&&!k.get("prereq").empty&&k.get("prereq").type==="or"){k.get("prereq").process.forEach(function(l){if(j.options.model.get("uid")===l.uid){j.options.prereq.push(k)}if(j.options.selectedCollection.get(l.uid)){j.requiredByOption++}})}}}});if(j.options.prereq.length>0&&(j.requiredByOption<=1||j.requiredByAnd>0)){j.needed=true}}},_findRequiredRoles:function(k,p,m){m.push(k.get("uid"));if(k._hasPrereq()){var j=k.get("prereq").process;for(var l=0;l<j.length;l++){var n=new b(j[l]);if(n.get("uid")===p){return n}var o=this._findRequiredRoles(n,p,m);if(o){return o}}}return false},_removeRequired:function(){var i=this,k=this.options.selectedCollection,l=this.options.model.get("uid"),j=[];k.forEach(function(n){var m=[];if(i._findRequiredRoles(n,l,m)){m.forEach(function(o){j.push(o)})}});j.push(l);k.remove(j);return j},isNeeded:function(){return this.needed},show:function(){this.modal.setHeader(this.getTitle());this.modal.setBody(this.getContent());this.modal.setFooter(this.getButtons());this.modal.inject(document.body).show()},getTitle:function(){var i=this.options.model.get("option")?d.get("This option is required by"):d.get("This role is required by");return"<h3>"+i+"</h3>"},getContent:function(){var j=this,i=[];this.options.prereq.forEach(function(k){i.push(j.getContentItem(k))});return[h.createElement("table",{"class":"table",html:i}),{"class":"text-error text-right",text:d.get("You need to remove required roles first")}]},getContentItem:function(i){return{tag:"tr",html:[{tag:"td",html:new f({className:"primary",type:"checkbox",name:"prereq-licenses[]",value:i.get("uid"),label:i.get("name"),checked:false,disabled:true})}]}},getButtons:function(){var j=this,i=[];if(this.options.removeRequired){i.push(new a({value:d.get("Remove required roles"),className:"default",events:{onClick:function(){j.asRemovedRequired=true;j.options.onRemovedRequired(j._removeRequired());j.destroy()}}}))}i.push(new a({value:d.get("Cancel"),className:"default",events:{onClick:function(){j.modal.hide()}}}));return i}})});define("DS/i3DXCompassCmp/Modal/FullScreenModal",["UWA/Core","DS/UIKIT/Modal","DS/UIKIT/Mask","DS/i3DXCompassCore/Utils","DS/UIKIT/Scroller","UWA/Class/View"],function(h,d,g,e,c,f){var b="<h3>{0}</h3>",a=function(i){return h.is(i,"string")&&!/<[\s\S]*>/i.test(i)};return d.extend({init:function(i){i.className=h.String.format(e.getPlatformManagementWrapperClassName("modal-scrollable big-modal {0}"),i.className||"");if(a(i.header)){i.header=h.String.format(b,i.header)}return this._parent(i)},setHeader:function(i){if(a(i)){i=h.String.format(b,i)}return this._parent(i)},setBody:function(i){if(i instanceof f){i=i.getContent()}return this._parent(new c({element:h.createElement("div",{"class":"scrollable-body",styles:{height:"100%"},html:i})}))},_isMasked:function(){return this.masked},mask:function(){if(!this._isMasked()){g.mask(this.getBody());this.masked=true}},unmask:function(){if(this._isMasked()){g.unmask(this.getBody())}this.masked=null}})});define("DS/i3DXCompassCmp/Controls/Tags",["UWA/Core","UWA/Controls/Abstract","UWA/Event","DS/UIKIT/Input/Text","DS/UIKIT/Touch","DS/UIKIT/Spinner","DS/i3DXCompassCore/Utils"],function(f,g,i,d,c,e,h){var a=13,b="fonticon-cancel";return g.extend({defaultOptions:{text:null,onChange:function(){},onDestroy:function(){}},init:function(j){var k=this;k._parent(j);this.buildContainer()},destroy:function(){this.options.onDestroy();this._parent()},processChange:function(l,k){if(f.is(k.getParent("div"))){var j=(this.getSelected().indexOf(l)===-1);if(this.options.validator(l)&&j){this.options.text=l;k.getParent("div").removeClassName("has-error");this.getContent().setContent(this.setReadInput());this.asyncCheck()}else{k.focus();f.log(k);if(!k.getParent("div").hasClassName("has-error")){k.getParent("div").addClassName("has-error");if(this.options.onError&&!j){this.options.onError()}}}}},setEditInput:function(){var j=this;this.input=new d({value:this.options.text,attributes:{type:"email",styles:{width:j.getContent().getSize().width},events:{keyup:function(k){k.preventDefault();k.stopPropagation();if(k.keyCode===a){j.processChange(this.value,this)}},blur:function(l){var k=this;l.preventDefault();l.stopPropagation();if(f.is(k)){setTimeout(function(){j.processChange(k.value,k)},100)}}}}});this.getContent().setContent(this.input);this.input.focus()},getButton:function(){var j=this;if(!this.button){this.button=f.createElement("button",{"class":"btn btn-default",html:{tag:"span","class":"fonticon fonticon-cancel"},events:{click:function(k){if(this.getElement(".fonticon").hasClassName(b)){j.destroy();i.stop(k)}}}})}return{tag:"span","class":"input-group-btn",html:this.button}},getInputText:function(){var j=this;this.inputText=f.createElement("span",{"class":"form-control",text:this.options.text,events:!h.isTouchActivate()?{dblclick:function(){j.setEditInput()}}:null});if(h.isTouchActivate()){this.touch=new c(this.inputText).on("hold",function(k){k.preventDefault();k.stopPropagation();j.setEditInput()})}return this.inputText},setReadInput:function(){return f.createElement("div",{"class":"input-group",html:[this.getInputText(),this.getButton()]})},buildContainer:function(){this.elements.container=f.createElement("div",{"class":"uwa-input-tags uwa-input",html:this.setReadInput()})},setLoading:function(k){var j=this.button.getElement(".fonticon");if(k){j.removeClassName(b);this.button.addClassName("is-loading");new e({visible:true}).inject(j)}else{this.button.removeClassName("is-loading");j.addClassName(b);j.setContent("")}},setError:function(l){var k=this.inputText,j=k.getParent("div");if(l){if(!j.hasClassName("has-error")){j.addClassName("has-error")}}else{j.removeClassName("has-error")}this.options.onChange()},asyncCheck:function(){var j=this;if(this.options.validatorAsync){this.setLoading(true);this.options.syncInputSize();this.options.validatorAsync(this.inputText.getText(),{onComplete:function(){j.getContent().setContent(j.setReadInput());j.setLoading();j.setError(false);j.options.syncInputSize()},onFailure:function(){j.setLoading();j.setError(true);j.options.syncInputSize()}})}},getSelected:function(){var j=[];this.elements.container.getParent().getElements(".uwa-input-tags span.form-control").forEach(function(k){j.push(k.getHTML())});return j}})});define("DS/i3DXCompassCmp/Controls/Input/Text",["UWA/Core","UWA/Controls/Abstract","DS/UIKIT/Input/Text"],function(d,c,b){var a=400;return c.extend({defaultOptions:{},init:function(e){var f=this;this.open=e.open||false;this.minChar=e.minChar||0;this.isCollapsable=false;if(!e.attributes.value){e.attributes.value=""}if(e.attributes.value===""){this.isCollapsable=e.isCollapsable||false}f._parent(e);this.elements.container=this.buildContainer()},openInput:function(){var e=this;if(this.isCollapsable){this.elements.input.elements.input.removeClassName("hidden")}e.open=true;e.elements.input.elements.input.focus();if(e.options.attributes&&e.options.attributes.placeholder){e.elements.input.elements.input.setAttribute("placeholder",e.options.attributes.placeholder)}},updateInputClosedAttribute:function(){this.elements.input.elements.input.addClassName("hidden");this.elements.input.elements.input.setAttribute("placeholder","")},buildContainer:function(){var e=this,f=0;e.keyUp=d.clone(e.options.attributes.events.keyup);e.options.attributes.events.keyup=function(){var g=e.elements.input.getValue().length;if(g>=e.minChar){e.getContent().getElement(".fonticon-cancel-squared").toggleClassName("hidden",g===0);clearTimeout(f);f=setTimeout(function(){e.keyUp.call(e.elements.input.getContent())},a)}};this.elements.input=new b(this.options);if(this.isCollapsable){this.elements.input.elements.input.addEvent("click",function(){if(!e.open){e.openInput()}});this.updateInputClosedAttribute()}return d.createElement("div",{"class":"input-search-center",html:{"class":"input-search-wrapper",html:[{tag:"i","class":"fonticon fonticon-cancel-squared pointer"+(this.options.attributes.value===""?" hidden":""),events:{click:function(){e.elements.input.setValue("");e.elements.input.focus();e.getContent().getElement(".fonticon-cancel-squared").addClassName("hidden");e.keyUp.call(e.elements.input.getContent())}}},{tag:"i","class":"fonticon fonticon-search pointer",events:{click:function(h){var g=e.elements.input.getValue().length;h.preventDefault();h.stopPropagation();if(e.open){if(g>=e.minChar){e.keyUp.call(e.elements.input.getContent())}}else{e.openInput()}}}},this.elements.input]}})}})});define("DS/i3DXCompassCmp/Utils/ImageUploader",["UWA/Core","UWA/Class","UWA/Class/Events","DS/UIKIT/Mask","DS/UIKIT/Tooltip","DS/i3DXCompassCmp/Utils","DS/i3DXCompassCore/Controls/PlatformNotify","i18n!DS/i3DXCompassCmp/assets/nls/i3DXCompassCmp"],function(d,a,h,c,f,e,g,i){var b=["png","jpeg","jpg","gif","svg"];return a.extend(h,{defaultSrc:null,actions:[],className:"image-uploader",elements:{},init:function(j){var k=this;this.defaultSrc=j.defaultSrc;this.src=j.src;if(j.className){this.className=j.className}this.actions=[{id:"upload",title:d.String.format(i.get("Upload, {0}"),this._getAllowedExtension()),handler:function(){k.openFile()}},{id:"trash",title:i.get("Delete"),handler:function(){k.setValue(k.defaultSrc);k.container.getElement(".input-file-hidden").setContent(k.buildUploadIcon());k._hideTrashAction();k.dispatchEvent("onHideTrashAction")}}];this.width=j.width||64;this.height=j.height||64;this.imgWidth=j.imgWidth||120;this.imgHeight=j.imgHeight||120},_hideTrashAction:function(){if(this.container){this.container.getElements(".actions")[0].setStyle("height",this.height);this.container.getElements(".actions")[1].addClassName("hidden")}},_showTrashAction:function(){if(this.container){this.container.getElements(".actions")[0].setStyle("height",this.height/this.actions.length);this.container.getElements(".actions")[1].removeClassName("hidden")}},_manageFiles:function(n){var m=this,k=this.container.getElement(".preview-icon"),l=k.getParent("div"),j=new FileReader(),p,o="";if(n.length>0){if(this._isFile(n)){o=n[0].name}else{o=n}p=e.getFileExtension(o);if(b.indexOf(p)>-1){c.mask(l,"");if(this._isFile(n)){j.readAsDataURL(n[0]);j.onload=function(q){m._manageImage(q.target.result,k,l)}}else{m._manageImage(o,k,l)}}else{g.alert(m._getAllowedExtension())}}else{}},_getAllowedExtension:function(){return d.String.format(i.get("Allowed extensions are .{0}"),b.join(", ."))},_isFile:function(j){return j[0]&&j[0].name},_manageImage:function(m,j,k){var l=this;setTimeout(function(){var n=new Image();if(m.indexOf("data:")!==0){n.crossOrigin="Anonymous"}n.onload=function(){var o=document.createElement("canvas"),p,q;o.width=n.width;o.height=n.height;o.getContext("2d").drawImage(n,0,0);p=n.width>n.height?l.imgWidth/n.width:l.imgHeight/n.height;if(p<0||p>1){p=1}q=e.downScaleCanvas(o,p);j.src=q.toDataURL();l.imageIsValid=true;l.dispatchEvent("onChange",j.src);l._showTrashAction();l.dispatchEvent("onShowTrashAction");c.unmask(k,"")};n.onerror=function(){c.unmask(k,"");g.alert(i.get("The selected file is not a valid Image"))};n.src=m},100)},onChange:function(){},_buildActions:function(){var j=this,k=[];this.actions.forEach(function(m,l){k.push(j._buildAction(m,l))});return k},_buildAction:function(m,j){var l=this,k=d.createElement("div",{"class":"actions",styles:{top:(this.height/this.actions.length)*j,height:this.height/this.actions.length,width:this.width},html:{"class":d.String.format("fonticon fonticon-{0} pointer action-icon",m.id)},events:{click:function(){m.handler();l.container.removeClassName("hover")}}});if(m.title){new f({target:k,body:m.title,position:"right"})}return k},_getSrc:function(){return this.src||this.defaultSrc},render:function(){var l=this,k=this.buildUploadIcon(),j=[];j.push(this._buildActions());j.push({tag:"img",src:this._getSrc(),"class":"preview-icon pointer",events:{click:function(){k.click()},error:function(){this.setAttribute("src",l._getSrc())}}});j.push({"class":"hidden input-file-hidden",html:k});this.container=d.createElement("div",{styles:{width:this.width,height:this.height},"class":this.className,events:{mouseenter:function(){this.addClassName("hover")},mouseleave:function(){this.removeClassName("hover")},touchstart:function(m){if(this.hasClassName("hover")){return true}else{this.addClassName("hover");m.preventDefault();m.stopPropagation();return false}},dragover:function(m){m.preventDefault()},drop:function(m){m.preventDefault();l._manageFiles(m.dataTransfer.getData("URL")||m.dataTransfer.files)}},html:j});if(this._getSrc()===this.defaultSrc){this._hideTrashAction();this.dispatchEvent("onHideTrashAction")}return this.container},openFile:function(){this.elements.input.click()},setValue:function(j){if(this.container){this.container.getElement(".preview-icon").src=j===""?this.defaultSrc:j}},getBase64Value:function(){return this.container.getElement(".preview-icon").src===this.defaultSrc?"":this.container.getElement(".preview-icon").src},buildUploadIcon:function(){var j=this;this.elements.input=d.createElement("input",{type:"file","class":"hidden",events:{change:function(){j._manageFiles(this.files)}}});return this.elements.input}})});define("DS/i3DXCompassCmp/Modal/Prereq",["UWA/Core","UWA/Controls/Abstract","DS/i3DXCompassCmp/Modal/FullScreenModal","DS/UIKIT/Input/Toggle","DS/i3DXCompassCore/Model/ProcessModel","DS/UIKIT/Input/Button","DS/i3DXCompassCore/Collection/ProcessCollection","DS/i3DXCompassCore/Utils","UWA/Event","i18n!DS/i3DXCompassCmp/assets/nls/i3DXCompassCmp"],function(c,d,g,h,b,e,a,f,i,j){return d.extend({defaultOptions:{prereq:[],onConfirm:function(){},onCancel:function(){},number:1,type:"and"},needed:false,disableOKButton:false,clickOkPressed:false,content:null,neededPrereq:null,prereqOptionsMissing:true,init:function(l){var m=this,k=l.model;this._parent(l);this.model=k;this.selectMode=l.selectMode;if(!k.isTPA()){this.modal=new g({closable:true,header:"",className:f.getPlatformManagementWrapperClassName("prereq-needed"),body:"",footer:"",events:{onHide:function(){if(!m.clickOkPressed){m.options.onCancel()}this.destroy();f.manageSupportOfMultiModal()}}});if(this._asPrereq(k)&&k.get("prereq").type==="or"&&k.get("prereq").process.length===1){k.get("prereq").type="and"}if(this._asPrereq(k)){m.options.prereq=k.get("prereq").process.filter(function(n){return k.get("prereq").type==="and"?!m.options.selectedCollection.get(n.uid):true});if(k.get("prereq").type==="or"){m.prereqOptionsMissing=k.get("prereq").process.filter(function(n){return !m.options.selectedCollection.get(n.uid)});m.prereqOptionsMissing=m.prereqOptionsMissing.length>0}}if(m.options.prereq.length>0){m.needed=true;if(k.get("prereq").type==="or"){this.disableOKButton=true;if(this.options.okButton&&m.prereqOptionsMissing){this.options.okButton.setDisabled(m.disableOKButton)}}}if(k.get("prereq")&&k.get("prereq").type==="or"&&!m.prereqOptionsMissing){m.needed=false}}this.elements.container=this.modal},getMandatoryPrereq:function(){var k=new a(),l=this.model;if(this._asPrereq(l)&&l.get("prereq").type==="and"){this._manageSubPrereq(l,k)}if(!this.prereqOptionsMissing){if(this._asPrereq(l)&&l.get("prereq").type==="or"){this._manageSubPrereq(l,k)}}return k},isNeeded:function(){return this.needed},confirm:function(){this.modal.setHeader("<h3>"+this.getTitle()+"</h3>");this.modal.setBody(this.getContent());this.modal.setFooter(this.getButtons());this.modal.inject(document.body).show();this.manageDefaultSelection()},_manageButtonActivation:function(){var l,k=false;if(this.model.get("prereq").type==="or"){l=this.getContent().getElements('tr[data-level="0"] input');k=c.Array.detect(l,function(m){return m.checked===true})}else{l=this.getContent().getElements("tr input");k=l.every(function(m){return m.checked===true})}if(this.options.okButton){this.options.okButton.setDisabled(!k)}},manageDefaultSelection:function(){var k=this;if(this.model.get("prereq").type==="or"){this.options.selectedCollection.forEach(function(m){var l=[],n;if(k.getContent().getElement('[value="'+m.get("uid")+'"]')){l=k.getContent().getElements('[data-prereq="'+m.get("uid")+'"] input');if(k.getContent().getElement('[value="'+m.get("uid")+'"]:not(:disabled)')){k.getContent().getElement('[value="'+m.get("uid")+'"]:not(:disabled)').checked=true;l.forEach(function(o){o.checked=true})}}n=k.elements.container.getBody().getElements("[name=prereq-licenses\\[\\]]:checked");if(k.model.get("prereq")&&k.model.get("prereq").type==="or"){k.disableOKButton=n.length>0;if(k.options.okButton){k.options.okButton.setDisabled(k.disableOKButton)}}});if(this.options.selectedCollection.size()===0){k.disableOKButton=true;if(k.options.okButton){k.options.okButton.setDisabled(k.disableOKButton)}}}this._manageButtonActivation()},getTitle:function(){var k=this.model.get("option")?j.get("Granting this option will also grant"):j.get("Granting this role will also grant");return this.model.get("prereq").type==="and"?k:j.get("You need to select at least one of these roles")},getContentOld:function(){var l=this,k=[];if(!l.content){this.options.prereq=new a(this.options.prereq);this.options.prereq.forEach(function(n){var m,o=false;if(l._asPrereq(n)){m=l.getOptionsDetail(n,l.model.get("prereq").type==="or");o=c.Array.detect(m.getElements("tr[data-free]"),function(p){return p.getAttribute("data-free")==="false"})}k.push(l.getContentItem(n,l.model.get("prereq").type,null,0,!!o));if(m){k.push(m)}});l.content=c.createElement("table",{"class":"table",html:k})}return l.content},getContent:function(){var l=this,k=[];if(!l.content){this.options.prereq=new a(this.options.prereq);this.options.prereq.forEach(function(n){var m=[],o=false;if(l._asPrereq(n)){l._manageSubPrereq(n,l.options.prereq,m,l.model.get("prereq").type==="or");if(c.Array.detect(m,function(p){return p.getAttribute("data-type")==="and"})){o=c.Array.detect(m,function(p){return p.getAttribute("data-free")==="false"})}else{}}k.push(l.getContentItem(n,l.model.get("prereq").type,null,0,!!o));if(m){k.push(m)}});l.content=c.createElement("table",{"class":"table",html:k})}return l.content},_asPrereq:function(k){return k.get("prereq")&&k.get("prereq").process&&k.get("prereq").process.length>0},_isChecked:function(k,l,m){var n=this.options.selectedCollection.get(k.get("uid"));return n||(k.hasFree(this.options.number)&&l==="and"&&!m)},_isDisabled:function(k,l,m){var n=this.options.selectedCollection.get(k.get("uid"));return n||l==="and"||((k.get("free")<this.options.number||m)&&((k.get("total")!==0&&k.get("withLicenses")===false)||k.get("total")>0))},getContentItem:function(n,q,m,p,r){var o=this,l=this._isChecked(n,q,m);if(!p){p=0}if(!l
/*!model.hasFree() && type === 'and'*/
){this.disableOKButton=true;if(this.options.okButton){this.options.okButton.setDisabled(o.disableOKButton)}this.modal.getContent().addClassName("big-modal")}var s=new h({className:"primary",type:"checkbox",name:"prereq-licenses[]",value:n.get("uid"),label:n.get("name"),checked:l,disabled:!!this._isDisabled(n,q,r)});var k=c.createElement("tr",{"data-level":p,"data-free":n.get("free")>=this.options.number,"data-type":q,html:[{tag:"td",styles:{"padding-left":(15*p)+8},html:s},{tag:"td","class":"text-right status",html:this.getInformation(n)}],events:{click:function(x){if(s.isDisabled()){i.stop(x);return}var v=!s.isChecked();s.setCheck(v);if(this.getAttribute("data-type")==="or"){o._checkAllSubRow(this,s.isChecked(),p);var w=parseInt(this.getAttribute("data-level"),10);var u=this;if(w===1){u=o._getFirstLevel(this)}if(u){if(u.getElement("input:checked")){var t=u.nextElementSibling;if(t&&t.getAttribute("data-type")==="or"&&parseInt(t.getAttribute("data-level"),10)<parseInt(u.getAttribute("data-level"),10)){if(t.getElement('[data-type="or"][data-level="1"] input:checked')){o.disableOKButton=false;if(o.options.okButton){o.options.okButton.setDisabled(false)}}else{o.disableOKButton=true;if(o.options.okButton){o.options.okButton.setDisabled(true)}}}else{o.disableOKButton=false;if(o.options.okButton){o.options.okButton.setDisabled(false)}}}else{o.disableOKButton=true;if(o.options.okButton){o.options.okButton.setDisabled(true)}}}}i.stop(x)}}});return k},_getFirstLevel:function(l){var k=l.previousSibling;if(k&&parseInt(k.getAttribute("data-level"),10)===0||!k){return k||l}else{return this._getFirstLevel(k)}},_checkAllSubRow:function(l,n,k){var m=l.nextElementSibling;if(m&&parseInt(m.getAttribute("data-level"),10)>k){m.getElement("input").checked=n;this._checkAllSubRow(m,n,k)}},_manageSubPrereq:function(p,o,m,n,k){var l=this;if(!k){k=0}if(this._asPrereq(p)){k++;p.get("prereq").process.forEach(function(q){var r=new b(q);if(m){m.push(l.getContentItem(r,p.get("prereq").type,n,k))}o.add(r);l._manageSubPrereq(r,o,m,n,k)})}},getOptionsDetail:function(n,m){var l=this,k=[];l._manageSubPrereq(n,l.options.prereq,k,m);return c.createElement("tr",{html:[{tag:"td",colspan:2,styles:{padding:0},html:c.createElement("table",{"class":"table role-option-prereq","data-prereq":n.get("uid"),html:k})}]})},getInformation:function(l){var k="",m=this.options.selectedCollection.get(l.get("uid"));if(m){if(this.selectMode){k+=j.get("Already selected:")+" "}else{k+=j.get("Already granted:")+" "}}else{if(l.get("total")===0&&l.get("withLicenses")===false){k+=j.get("No license associated")}else{if(!l.hasFree()){k+=j.get("No more role available:")+" "}}}if(l.get("total")===0&&l.get("withLicenses")===false){k+=""}else{k+=c.String.format(j.get("Used: {0}/{1}"),(l.get("total")-l.get("free")),l.get("total"))}return{tag:"span","class":(l.get("total")===0&&l.get("withLicenses")===false)||(!l.hasFree()&&!m)?"text-error":"",text:k}},getButtons:function(){var k=this;k.options.okButton=new e({value:j.get("Ok"),className:"primary",disabled:this.disableOKButton,events:{onClick:function(){var m=k.elements.container.getBody().getElements("[name=prereq-licenses\\[\\]]:checked"),l=new a();m.forEach(function(n){l.add(k.options.prereq.get(n.value))});k.clickOkPressed=true;if(k.model.get("prereq")&&k.model.get("prereq").type==="or"){k.options.onConfirm(l)}else{k.options.onConfirm(k.getMandatoryPrereq())}k.modal.hide()}}});return[k.options.okButton,new e({value:j.get("Cancel"),className:"default",events:{onClick:function(){k.modal.hide()}}})]}})});define("DS/i3DXCompassCmp/Controls/Tagger",["UWA/Core","UWA/Controls/Abstract","DS/UIKIT/Input/Text","DS/i3DXCompassCmp/Controls/Tags","DS/i3DXCompassCore/Utils","i18n!DS/i3DXCompassCmp/assets/nls/i3DXCompassCmp"],function(f,e,b,a,d,c){return e.extend({defaultOptions:{validator:function(g){return(g.length>0)},onSuccess:function(){},onError:function(){},onLimitError:function(){},placeholder:"",limit:null,onChange:function(){}},isFirst:true,init:function(g){var h=this;h._parent(g);this.buildContainer();setTimeout(function(){h.elements.input.focus()},1)},buildContainer:function(){this.elements.container=f.createElement("div",{html:[{"class":"tags-input-wrapper",html:[{"class":"tag-wrapper"},{"class":"tag-input-wrapper",html:this.buildInput()}]},{"class":"clearfix"}]})},buildInput:function(){var g=this;this.elements.input=new b({className:"pull-right",attributes:{type:"email",placeholder:this.options.placeholder,autofocus:this.options.focus||null,events:{keydown:function(h){if(h.keyCode===9){g.paste(false,true)}},keyup:function(h){if(h.keyCode!==17){if(h.keyCode===13||h.keyCode===188){g.paste(false,true)}else{g.paste(true,true)}}},drop:function(){g.paste(false,true)},paste:function(){g.paste(false,true)},blur:function(){g.paste(false,false)}}}});return this.elements.input},paste:function(i,h){var g=this;setTimeout(function(){var p=g.elements.input.getValue(),q=p,n,r,k,j=g.elements.container.getElement(".tags-input-wrapper"),o=g.elements.container.getElement(".tag-input-wrapper"),m,l=true;if(!i&&p.contains(" ")){m=d.extractEmails(p);if(m){p=m.join(";")}}if((i&&p.indexOf(";")>-1)||!i){n=p.split(";");n.forEach(function(t,s){if(t!==""){if(g.options.validator(t)&&(g.options.limit!==null&&g.getSelected().length<g.options.limit)){if(g.getSelected().indexOf(t)===-1){r=g.buildTag(t);r.inject(j);r.asyncCheck();l=false;k=(s+1===n.length)?"":";";p=p.replace(t+k,"")}}else{if(g.options.validator(t)&&g.getSelected().length===g.options.limit){if(!o.hasClassName("has-error")){o.addClassName("has-error");g.options.onLimitError()}}}}});if(p!==q){g.elements.input.setValue(p);g.syncInputSize();if(h){setTimeout(function(){g.elements.input.focus()},1)}}if(l){g.validate()}}},0)},buildTag:function(h){var g=this;return new a({text:h,onDestroy:function(){setTimeout(function(){g.syncInputSize();g.validate()},10)},onChange:function(){g.syncInputSize();g.validate()},onError:function(){g.syncInputSize();g.options.onError()},syncInputSize:g.syncInputSize.bind(this),validator:g.options.validator,validatorAsync:g.options.validatorAsync})},isFirstEmailAlreadySelected:function(){var h=this.elements.input.getValue(),g=h.split(";");return this.getSelected().indexOf(g[0])>-1},validate:function(){var g=this;setTimeout(function(){var h=g.elements.container.getElement(".tag-input-wrapper");if(h){if(g.elements.input.getValue()!==""||g.getContent().getElements(".uwa-input-split.has-error").length!==0){if(!h.hasClassName("has-error")){h.addClassName("has-error")}if(g.elements.input.getValue()!==""&&g.isFirstEmailAlreadySelected()){g.options.onError(true)}else{if(g.elements.input.getValue()!==""){g.options.onError()}else{g.options.onError(true)}}}else{h.removeClassName("has-error");g.options.onSuccess()}}},10)},proceedRemove:function(){var g=this.elements.container.getElements(".uwa-input-tags.focus");if(g.length>0){g.forEach(function(h){h.destroy()});this.syncInputSize()}else{g=this.elements.container.getElements(".uwa-input-tags");if(g.length>0){g[g.length-1].destroy();this.syncInputSize()}}this.validate()},syncInputSize:function(){var j=0,i=this,h=i.elements.container.getSize().width,k=h,g=[];i.elements.container.getElements(".uwa-input-tags").forEach(function(l){l.inject(i.elements.container.getElement(".tags-input-wrapper"))});i.elements.container.getElements(".uwa-input-tags").forEach(function(l){j=j+l.getDimensions().outerWidth;if(i.isFirst){j=j+5}g.push(l);if(j>h-200){g.forEach(function(m){i.elements.container.getElement(".tag-wrapper").grab(m)});g=[];j=0}});if(i.isFirst){i.isFirst=false}if(h-j>200){k=h-j}if(j>0){i.elements.container.getElement("input").setStyle("width",k-5)}else{i.elements.container.getElement("input").setStyle("width","100%")}i.options.onChange()},getSelected:function(){var g=[];this.elements.container.getElements(".uwa-input-tags span.form-control").forEach(function(h){g.push(h.getHTML())});return g}})});