define("DS/SceneGraphOverrides/ClippingContext",["DS/Visualization/ClippingContext"],function(a){console.log("Please require 'DS/Visualization/ClippingContext' instead of 'DS/SceneGraphOverrides/ClippingContext");return a});define("DS/SceneGraphOverrides/SceneGraphOverrideSetToken",["UWA/Class"],function(a){var b=0;var c=a.extend({init:function(e,d){b++;this.id=b;this.sceneGraphOverrideSet=e;this.rank=d;this.index=-1}});return c});define("DS/SceneGraphOverrides/OverrideLink",["UWA/Class"],function(a){var c=1;var b=a.extend({init:function(d){this.id=c++;this.visibilityFix=d;this.reset();window.sealWebVisuObjects&&Object.seal(this)},reset:function(){this.opacityOverride=null;this.fullMaterialOverride=null;this.visibilityOverride=null;this.colorOverride=null;this.pickabilityOverride=null;this.position=null;this.internalMaterialOverride=null;this.disableColorOverride=false;this.internalMaterialOverrideReset=false},copyInheritableProperties:function(d){this.opacityOverride=d.opacityOverride;this.fullMaterialOverride=d.fullMaterialOverride;if(!this.visibilityFix){this.visibilityOverride=d.visibilityOverride}this.colorOverride=d.colorOverride},setFromOverrideSet:function(d){this.fullMaterialOverride=d.fullMaterial!==null?d:null;this.colorOverride=d.color!==null?d:null;this.pickabilityOverride=d.pickability!==null?d:null;this.opacityOverride=d.opacity!==null?d:null;this.visibilityOverride=d.visibility!==null?d:null;this.position=d.position;this.internalMaterialOverride=d.internalMaterialOverride},getFullMaterial:function(){return this.fullMaterialOverride&&this.fullMaterialOverride.fullMaterial},getOpacity:function(){return this.opacityOverride&&this.opacityOverride.opacity},hasTransparency:function(){var d=this.getOpacity();return d!==null&&d<1},getVisibility:function(){return this.visibilityOverride&&this.visibilityOverride.visibility},getVisibilityFree:function(){return null},getPickability:function(){return this.pickabilityOverride&&this.pickabilityOverride.pickability},getColor:function(){return this.colorOverride&&this.colorOverride.color},getSubstituteMatrix:function(){return this.position},getClipping:function(){return null},hasVisibilityOverride:function(){return this.visibilityOverride?true:false},hasMaterialOverride:function(){return this.fullMaterialOverride||this.colorOverride||this.opacityOverride},getAppliedPropertiesNEW:function(){var d={};function e(f,g,h){d[f]={value:g}}if(this.hasMaterialOverride()){if(this.getColor()){e("color",this.getColor())}if(this.getFullMaterial()){e("material",this.getFullMaterial())}if(this.getOpacity()){e("opacity",this.getOpacity())}}if(this.getPickability()){e("pickability",this.getPickability())}if(this.getVisibility()){e("visibility",this.getVisibility().visibility)}if(this.position){e("matrix",this.position.clone())}return d},createOverrideLink:function(){return new b()},combine:function(e,d){if(e){this.setFromOverrideSet(e);if(d){if(d.fullMaterialOverride&&!e.forceInheritFullMaterial){this.fullMaterialOverride=d.fullMaterialOverride}if(d.colorOverride&&!e.forceInheritColor){this.colorOverride=d.colorOverride}if(!this.visibilityFix&&d.pickabilityOverride&&!e.forceInheritPickability){this.pickabilityOverride=d.pickabilityOverride}if(d.opacityOverride&&!e.forceInheritOpacity){this.opacityOverride=d.opacityOverride}if(!this.visibilityFix&&d.visibilityOverride&&!e.forceInheritVisibility){this.visibilityOverride=d.visibilityOverride}}}else{if(d){this.copyInheritableProperties(d)}else{this.reset()}}},getMatrixUpdate:function(){return true},clearMatrixUpdate:function(){},setMatrixUpdate:function(){},getRenderStyle:function(){return null}});return b});define("DS/SceneGraphOverrides/OverrideLink2",["UWA/Class"],function(c){var d=1;function a(){console.log("ERROR - SceneGraphOverrideSet internal inconsistency");return null}var b=c.extend({init:function(e){this.id=d++;this.visibilityFix=true;this.reset();this.disableColorOverride=false;this.matrixUpdate=false;window.sealWebVisuObjects&&Object.seal(this)},reset:function(){if(this.positionOverride){this.matrixUpdate=true}this.opacityOverride=null;this.fullMaterialOverride=null;this.visibilityOverride=null;this.visibilityFreeOverride=null;this.colorOverride=null;this.pickabilityOverride=null;this.positionOverride=null;this.clippingOverride=null;this.renderStyleOverride=null},copyInheritableProperties:function(e){this.opacityOverride=e.opacityOverride;this.fullMaterialOverride=e.fullMaterialOverride;if(!this.visibilityFix){this.visibilityOverride=e.visibilityOverride}this.colorOverride=e.colorOverride;this.renderStyleOverride=e.renderStyleOverride},setFromOverrideSet:function(e){this.fullMaterialOverride=e.fullMaterial!==null?e:null;this.colorOverride=e.color!==null?e:null;this.pickabilityOverride=e.pickability!==null?e:null;this.opacityOverride=e.opacity!==null?e:null;this.visibilityOverride=e.visibility!==null?e:null;this.visibilityFreeOverride=e.visibilityFree!==null?e:null;this.positionOverride=e.position!==null?e:null;this.clippingOverride=e.clipping!==null?e:null;this.renderStyleOverride=e.renderStyle!==null?e:null;if(e.matrixUpdate){this.matrixUpdate=true;e.unsetMatrixUpdate()}},getFullMaterial:function(){if(this.fullMaterialOverride&&!this.fullMaterialOverride.fullMaterial){return a()}return this.fullMaterialOverride&&this.fullMaterialOverride.fullMaterial._values.fullMaterial},getOpacity:function(){if(this.opacityOverride&&!this.opacityOverride.opacity){return a()}return this.opacityOverride&&this.opacityOverride.opacity._values.opacity},hasTransparency:function(){var e=this.getOpacity();return e!==null&&e<1},getVisibility:function(){if(this.visibilityOverride&&!this.visibilityOverride.visibility){return a()}return this.visibilityOverride&&this.visibilityOverride.visibility._values.visibility},getVisibilityFree:function(){if(this.visibilityFreeOverride&&!this.visibilityFreeOverride.visibilityFree){return a()}return this.visibilityFreeOverride&&this.visibilityFreeOverride.visibilityFree._values.visibilityFree},getClipping:function(){if(this.clippingOverride&&!this.clippingOverride.clipping){return a()}return this.clippingOverride&&this.clippingOverride.clipping._values.clipping},getRenderStyle:function(){if(this.renderStyleOverride&&!this.renderStyleOverride.renderStyle){return a()}return this.renderStyleOverride&&this.renderStyleOverride.renderStyle._values.renderStyle;return null},getPickability:function(){if(this.pickabilityOverride&&!this.pickabilityOverride.pickability){return a()}return this.pickabilityOverride&&this.pickabilityOverride.pickability._values.pickability},getColor:function(){if(this.colorOverride&&!this.colorOverride.color){return a()}return this.colorOverride&&this.colorOverride.color._values.color},getSubstituteMatrix:function(){if(this.positionOverride&&!this.positionOverride.position){return a()}return this.positionOverride&&this.positionOverride.position._values.position},hasVisibilityOverride:function(){return(this.visibilityOverride||this.visibilityFreeOverride)?true:false},hasMaterialOverride:function(){return this.fullMaterialOverride||this.colorOverride||this.opacityOverride},getAppliedPropertiesNEW:function(){var e={};function f(g,h,i){e[g]={value:h}}if(this.hasMaterialOverride()){if(this.getColor()){f("color",this.getColor())}if(this.getFullMaterial()){f("material",this.getFullMaterial())}if(this.getOpacity()){f("opacity",this.getOpacity())}}if(this.getPickability()){f("pickability",this.getPickability())}if(this.getVisibility()){f("visibility",this.getVisibility().visibility)}if(this.getVisibilityFree()){f("visibilityFree",this.getVisibilityFree().visibilityFree)}if(this.getClipping()){f("clipping",this.getClipping().clone())}if(this.getRenderStyle()){f("renderStyle",this.getRenderStyle().clone())}if(this.positionOverride){f("position",this.getSubstituteMatrix().clone())}return e},createOverrideLink:function(){return new b()},combine:function(f,e){if(f){this.setFromOverrideSet(f);if(e){if(e.fullMaterialOverride&&!f.hasForceInherit("fullMaterial")){this.fullMaterialOverride=e.fullMaterialOverride}if(e.colorOverride&&!f.hasForceInherit("color")){this.colorOverride=e.colorOverride}if(e.opacityOverride&&!f.hasForceInherit("opacity")){this.opacityOverride=e.opacityOverride}if(e.renderStyleOverride&&!f.hasForceInherit("renderStyle")){this.renderStyleOverride=e.renderStyleOverride}}}else{if(e){this.copyInheritableProperties(e)}else{this.reset()}}},getMatrixUpdate:function(){return this.matrixUpdate},clearMatrixUpdate:function(){this.matrixUpdate=false},setMatrixUpdate:function(){this.matrixUpdate=true},getRenderPriorityOpacity:function(){return null}});b.getNewId=function(){return d++};return b});define("DS/SceneGraphOverrides/OverrideSet",["UWA/Class","DS/Visualization/ThreeJS_DS","DS/SceneGraphOverrides/SceneGraphOverrideSetToken","DS/SceneGraphOverrides/OverrideLink"],function(c,g,f,d){function b(m,h){var n=[];var k;var l=false;for(k=0;k<m.overrides.length;k++){var j=m.overrides[k];h(j,function(){n.push(j)},function(){l=true})}for(k=0;k<n.length;k++){m.overrides.splice(m.overrides.indexOf(n[k]),1)}return l}var e=1;var a=c.extend({init:function(h,i){this.id=e++;this.pathElement=h;this.visibilityFix=i||false;this.reset();this.forceInheritOpacity=null;this.forceInheritFullMaterial=null;this.forceInheritVisibility=null;this.forceInheritColor=null;this.forceInheritPickability=null;this.invalidateBE=false;this.internalMaterialOverride=null;window.sealWebVisuObjects&&Object.seal(this)},reset:function(){this.fullMaterial=null;this.color=null;this.pickability=null;this.opacity=null;this.visibility=null;this.position=null;this.internalMaterialOverride=null},cloneForFlatten:function(){var h=new a(this.pathElement,this.visibilityFix);h.fullMaterial=this.fullMaterial;h.color=this.color;h.pickability=this.pickability;h.opacity=this.opacity;h.visibility=this.visibility!==null?{visibility:this.visibility.visibility}:null;h.position=this.position;h.internalMaterialOverride=this.internalMaterialOverride;return h},clone:function(){var h=this.cloneForFlatten();h.forceInheritOpacity=this.forceInheritOpacity;h.forceInheritFullMaterial=this.forceInheritFullMaterial;h.forceInheritVisibility=this.forceInheritVisibility;h.forceInheritColor=this.forceInheritColor;h.forceInheritPickability=this.forceInheritPickability;return h},copy:function(h){this.fullMaterial=h.fullMaterial;this.color=h.color;this.pickability=h.pickability;this.opacity=h.opacity;this.visibility=h.visibility;this.internalMaterialOverride=h.internalMaterialOverride;this.position=h.position},copyWithoutPosition:function(h){this.fullMaterial=h.fullMaterial;this.color=h.color;this.opacity=h.opacity;this.internalMaterialOverride=h.internalOverride;if(!this.visibilityFix){this.visibility=h.visibility;this.pickability=h.pickability}},createOverrideLink:function(){return new d()},mergeInto:function(i){var j=this;function h(k,l){if(j[k]!==null){i[k]=j[k];if(l){i[l]=j[l]}}}h("fullMaterial","forceInheritFullMaterial");h("color","forceInheritColor");h("pickability",this.visibilityFix?undefined:"forceInheritPickability");h("opacity","forceInheritOpacity");h("visibility",this.visibilityFix?undefined:"forceInheritVisibility");h("position");h("internalMaterialOverride")},add:function(h){h.applyToOverrideSet(this)},hasMaterialOverride:function(){return this.fullMaterial||this.color||this.opacity!==null},hasVisibilityOverride:function(){return this.visibility!=null},getSubstituteMatrix:function(){return this.position},getVisibility:function(){return this.visibility},changeOpacity:function(h,i){this.forceInheritOpacity=i;this.opacity=h},changeMaterial:function(h,i){this.forceInheritFullMaterial=i;this.fullMaterial=h},changePosition:function(h){this.invalidateBE=true;if(h){if(!this.position){this.position=new g.Matrix4()}this.position.copy(h)}else{this.position=null}},unsetInvalidateBE:function(){this.invalidateBE=false},changeVisibility:function(h,i){this.forceInheritVisibility=i;this.visibility=h!==null?{visibility:h}:null},changeColor:function(h,i){if(!this.visibilityFix){this.forceInheritColor=i}this.color=h},changePickability:function(h,i){if(!this.visibilityFix){this.forceInheritPickability=i}this.pickability=h},getColor:function(){return this.color},getPickability:function(){return this.pickability},getOpacity:function(){return this.opacity},getMaterial:function(){return this.fullMaterial},getPosition:function(){return this.position},getAppliedProperties:function(j){var h=[];function i(k){return k?"FORCE_INHERIT":"INHERIT"}if(this.hasMaterialOverride()){if(this.color&&(!j||j==="color")){h.push({type:"color",color:this.color,inheritance:i(this.forceInheritColor)})}if(this.fullMaterial&&(!j||j==="material")){h.push({type:"material",material:this.fullMaterial,inheritance:i(this.forceInheritFullMaterial)})}if(this.opacity&&(!j||j==="opacity")){h.push({type:"opacity",opacity:this.opacity,inheritance:i(this.forceInheritOpacity)})}}if(this.pickability&&(!j||j==="pickability")){h.push({type:"pickability",pickability:this.pickability,inheritance:i(this.forceInheritPickability)})}if(this.visibility&&(!j||j==="visibility")){h.push({type:"visibility",visibility:this.visibility.visibility,inheritance:i(this.forceInheritVisibility)})}if(this.position&&(!j||j==="matrix")){h.push({type:"matrix",matrix:this.position.clone(),inheritance:"NOT_INHERIT"})}return h},combine:function(i,j,h){var k=this.fullMaterial;if(i){this.copy(i);if(j){if(j.fullMaterial&&!i.forceInheritFullMaterial){this.fullMaterial=j.fullMaterial}if(j.color&&!i.forceInheritColor){this.color=j.color}if(!this.visibilityFix&&j.pickability&&!i.forceInheritPickability){this.pickability=j.pickability}if(j.opacity!==null&&!i.forceInheritOpacity){this.opacity=j.opacity}if(!this.visibilityFix&&j.visibility&&!i.forceInheritVisibility){this.visibility=j.visibility}}}else{if(j){this.copyWithoutPosition(j)}else{this.reset()}}},setInternalMaterial:function(h,i){if(h){this.internalMaterialOverride={internalPath:i,material:h}}else{this.internalMaterialOverride=null}}});return a});define("SceneGraphOverrides/OverrideSet",["DS/SceneGraphOverrides/OverrideSet","DS/DSMigration/DSMigration"],function(b,a){a.deprecateModule("SceneGraphOverrides/OverrideSet");return b});define("DS/SceneGraphOverrides/OverrideSet2",["UWA/Class","DS/Visualization/ThreeJS_DS","DS/SceneGraphOverrides/SceneGraphOverrideSetToken","DS/SceneGraphOverrides/OverrideLink2"],function(d,g,f,c){function a(m,h){var n=[];var k;var l=false;for(k=0;k<m.overrides.length;k++){var j=m.overrides[k];h(j,function(){n.push(j)},function(){l=true})}for(k=0;k<n.length;k++){m.overrides.splice(m.overrides.indexOf(n[k]),1)}return l}var e=1;var b=d.extend({init:function(h,i){this.id=e++;this.pathElement=h;this.visibilityFix=true;this.reset();this.genericOverrides=[];this.invalidateBE=false;this.matrixUpdate=false;window.sealWebVisuObjects&&Object.seal(this)},reset:function(){this.fullMaterial=null;this.color=null;this.pickability=null;this.opacity=null;this.visibility=null;this.visibilityFree=null;this.clipping=null;this.renderStyle=null;this.position=null},copy:function(h){this.fullMaterial=h.fullMaterial;this.color=h.color;this.pickability=h.pickability;this.opacity=h.opacity;this.visibility=h.visibility;this.visibilityFree=h.visibilityFree;this.clipping=h.clipping;this.renderStyle=h.renderStyle;this.position=h.position},createOverrideLink:function(){return new c()},addGenericOverride:function(n,m){var j=m.index;var l=false;var h;var k;j=0;for(k=m.index-1;k>=0&&!l;k--){h=this.genericOverrides[k];if(h instanceof f||h._index<n._index){j=k+1;l=true}else{if(h===n){return}}}this.invalidateBE=this.invalidateBE||n.hasBoundingElementInfluence();this.matrixUpdate=this.matrixUpdate||n.hasPositionOverride();this.genericOverrides.splice(j,0,n);m.index++},removeGenericOverride:function(j){var i=this.genericOverrides.indexOf(j);if(i>-1){this.invalidateBE=this.invalidateBE||j.hasBoundingElementInfluence();this.matrixUpdate=this.matrixUpdate||j.hasPositionOverride();this.genericOverrides.splice(i,1);var k=i>0?this.genericOverrides[i-1]:null;var h=this.genericOverrides[i];if((!k||k instanceof f)&&h instanceof f){this.genericOverrides.splice(i,1)}}else{console.warn("override not in overrideSet")}},initToken:function(l){var h=this.genericOverrides.indexOf(l);var k,j;if(h<0){h=0;for(k=0;k<this.genericOverrides.length;k++){j=this.genericOverrides[k];if(j instanceof f&&j.rank<l.rank){h=k+1}}this.genericOverrides.splice(h,0,l)}l.index=h},update:function(l,n){this.invalidateBE=this.invalidateBE||l;this.matrixUpdate=this.matrixUpdate||n;var p={};var h={};var j,o,m;for(j=0;j<this.genericOverrides.length;j++){m=this.genericOverrides[j];for(o in m._values){p[o]=m}}var k=this;function q(i){if(p.hasOwnProperty(i)){k[i]=p[i]}else{k[i]=null}}q("fullMaterial");q("color");q("opacity");q("pickability");q("visibility");q("visibilityFree");q("clipping");q("renderStyle");q("position")},onDetach:function(k){var h,j;for(h=0;h<this.genericOverrides.length;h++){j=this.genericOverrides[h];if(!(j instanceof f)){j._detach(k)}}},onAddChild:function(k){var h;for(h=0;h<this.genericOverrides.length;h++){var j=this.genericOverrides[h];if(!(j instanceof f)){j._onAddChild(k)}}},hasMaterialOverride:function(){return this.fullMaterial||this.color||this.opacity!==null},getSubstituteMatrix:function(){return this.position&&this.position._values.position},unsetInvalidateBE:function(){this.invalidateBE=false},unsetMatrixUpdate:function(){this.matrixUpdate=false},hasForceInherit:function(h){return this[h]&&this[h]._inheritLevel[h]===2}});return b});define("SceneGraphOverrides/OverrideSet2",["DS/SceneGraphOverrides/OverrideSet2","DS/DSMigration/DSMigration"],function(b,a){a.deprecateModule("SceneGraphOverrides/OverrideSet2");return b});define("DS/SceneGraphOverrides/SceneGraphState",["UWA/Class","DS/Visualization/ThreeJS_DS","DS/SceneGraphOverrides/OverrideSet","DS/Visualization/Node3D","DS/Visualization/PathElement"],function(l,r,d,g,k){var c=l.extend({init:function(u,t){this.sceneGraph=t;this.viewer=u;this.overrideSets={};this.active=false},clone:function(){var t=new c(this.viewer,this.sceneGraph);var u,v;for(u in this.overrideSets){v=this.overrideSets[u];t.overrideSets[u]=v?v.clone(this.sceneGraph):null}return t},mergeInto:function(w){var t,v,u;for(t in this.overrideSets){v=this.overrideSets[t];if(v){u=w.overrideSets[t];if(u){v.mergeInto(u)}else{w.overrideSets[t]=v.clone(w)}}}if(w.active){w.onActivation(w.viewer.getRootNode())}},applyOpacityToPath:function(y,v,z){var w,x,u=f(y,this.sceneGraph),t=u.length>0;for(w=0;w<u.length;w++){x=u[w];t=h.call(this,x,v,z)&&t}return t},getAppliedOpacity:function(w){var u=f(w,this.sceneGraph);var t=null;if(u.length===1){var x=u[0]._getUniqueOccurrence(this.viewer);var v=n.call(this,x,false,w);if(v){t=v.getOpacity()}}return t},applyMaterialToPath:function(B,y,t,u){var v=null;if(B.internalPath.length>0&&u==="I believe I can fly"){}var x,w,z=f(B,this.sceneGraph),A=z.length>0;for(x=0;x<z.length;x++){w=z[x];A=m.call(this,w,y,t,v)&&A}return A},getAppliedMaterial:function(w){var u=f(w,this.sceneGraph);var t=null;if(u.length===1){var x=u[0]._getUniqueOccurrence(this.viewer);var v=n.call(this,x,false,w);if(v){t=v.getMaterial()}}return t},applyPositionToPath:function(y,u){var w,x,v=f(y,this.sceneGraph),t=v.length>0;for(w=0;w<v.length;w++){x=v[w];t=e.call(this,x,u)&&t}return t},applyAbsolutePositionToPath:function(z,u,x){var w,y,v=f(z,this.sceneGraph),t=v.length>0;for(w=0;w<v.length;w++){y=v[w];t=j.call(this,y,u,x)&&t}return t},getAppliedPosition:function(w){var u=f(w,this.sceneGraph);var t=null;if(u.length===1){var x=u[0]._getUniqueOccurrence(this.viewer);var v=n.call(this,x,false,w);if(v){t=v.getPosition()}}return t},applyVisibilityToPath:function(y,u,z){var w,x,v=f(y,this.sceneGraph),t=v.length>0;for(w=0;w<v.length;w++){x=v[w];t=b.call(this,x,u,z)&&t}return t},getAppliedVisibility:function(w){var u=f(w,this.sceneGraph);var t=null;if(u.length===1){var x=u[0]._getUniqueOccurrence(this.viewer);var v=n.call(this,x,false,w);if(v){t=v.getVisibility();t=t?t.visibility:null}}return t},applyColorToPath:function(y,u,z){var w,x,v=f(y,this.sceneGraph),t=v.length>0;for(w=0;w<v.length;w++){x=v[w];t=o.call(this,x,u,z)&&t}return t},getAppliedColor:function(w){var u=f(w,this.sceneGraph);var t=null;if(u.length===1){var x=u[0]._getUniqueOccurrence(this.viewer);var v=n.call(this,x,false,w);if(v){t=v.getColor()}}return t},applyPickabilityToPath:function(y,x,z){var v,w,u=f(y,this.sceneGraph),t=u.length>0;for(v=0;v<u.length;v++){w=u[v];t=q.call(this,w,x,z)&&t}return t},getAppliedProperties:function(w){var u=f(w,this.sceneGraph);var t=null;if(u.length===1){var x=u[0]._getUniqueOccurrence(this.viewer);var v=n.call(this,x,false,w);if(v){t=v.getAppliedProperties()}else{t=[]}}return t},getAllModifications:function(){var t=[],u,v;for(u in this.overrideSets){v=this.overrideSets[u];if(v instanceof d){t.push({pathElement:v.pathElement,properties:this.getAppliedProperties(v.pathElement)})}}return t},computeInheritedVisibility:function(u){var t=this.computeInheritedProperty(u,"visibility");return t},computeInheritedColor:function(u){var t=this.computeInheritedProperty(u,"color");return t},computeInheritedMaterial:function(u){var t=this.computeInheritedProperty(u,"material");return t},computeInheritedOpacity:function(u){var t=this.computeInheritedProperty(u,"opacity");return t},computeInheritedPickability:function(u){var t=this.computeInheritedProperty(u,"pickability");return t},getCurrentVisibility:function(u){var t=this.computeInheritedProperty(u,"visibility");if(t===null){var v=u._getUniqueOccurrence(this.viewer);if(v){t=v._getVisible()}}return t},computeInheritedProperty:function(B,x){var w=f(B,this.sceneGraph);var C=null;if(w.length===1){var z=w[0];var v=[];while(B){var y=B._getUniqueOccurrence(this.viewer);var u=n.call(this,y,false,B);if(u){v=u.getAppliedProperties(x).concat(v)}B=B.getParentPath()}var A=null,t;for(t=0;t<v.length;t++){if(!A||v[t].inheritance==="FORCE_INHERIT"){A=v[t]}}return A?A[x]:null}return null},toJSON:function(){var z={};var v,y;for(v in this.overrideSets){y=this.overrideSets[v];if(y instanceof d){z[v]={};var x=z[v];x.pathElement=y.pathElement.toJSON(this.sceneGraph);x.properties=[];var w=x.properties;var t=this.getAppliedProperties(y.pathElement);for(var u=0;u<t.length;u++){var A=t[u];w[u]={type:A.type,inheritance:A.inheritance};switch(A.type){case"material":w[u].material=A.material.name;break;case"matrix":w[u].matrix=[];A.matrix.flattenToArray(w[u].matrix);break}}}}return z},setFromJSON:function(H,w,F){var x=null;var A={};var v=function(J,I){if(!x){x=new J()}x.buildFromFile(I,function(L){L.force=true;A[I].state="loaded";A[I].material=L;for(var K=0;K<A[I].paths.length;K++){C.applyMaterialToPath(A[I].paths[K],L,A[I].inheritances[K])}})};var G,B,u,E,C=this,D=w?w:this.sceneGraph.userRoot;for(G in H){B=H[G];u=new k();u.setFromJSON(B.pathElement,D);for(var y=0;y<B.properties.length;y++){var t=B.properties[y];switch(t.type){case"material":if(F){this.applyMaterialToPath(u,F[t.material],t.inheritance);break}var z=A[t.material];if(z){if(z.state==="loading"){console.log("need to apply a material that is loading");z.paths.push(u);z.inheritances.push(t.inheritance);break}this.applyMaterialToPath(u,z,t.inheritance)}else{A[t.material]={state:"loading",paths:[u],inheritances:[t.inheritance],material:null};require(["ShaderComposer/ShaderComposer"],(function(I){return function(J){return v(J,I)}})(t.material))}break;case"matrix":E=new r.Matrix4().setFromArray(t.matrix);this.applyAbsolutePositionToPath(u,E);break}}}},onActivation:function(t){var w=t._occurrences;var u=0;var x=this;for(u=0;u<w.length;u++){w[u].traverse(function v(z,y){var B=y+(z.node.getNotAllowedInPathElement()?"":(z.node.id+"/"));var A=x.overrideSets[B+"/"];if(A){z.originalOverrideSet=A}return B},"");w[u].requestOverridesUpdate()}this.active=true},onDeactivation:function(t){var w=t._occurrences;var u=0;for(u=0;u<w.length;u++){w[u].traverse(function v(x){x.originalOverrideSet=null;if(x.overrideLink){x.overrideLink.reset();x._invalidateBoundingElements(false);x.updateVisibilityFlag()}})}this.active=false},getGlobalAppliedVisibility:function(){return this.computeInheritedVisibility.apply(this,arguments)},getGlobalAppliedColor:function(){return this.computeInheritedColor.apply(this,arguments)},getGlobalAppliedMaterial:function(t){return this.computeInheritedMaterial.apply(this,arguments)},getGlobalAppliedOpacity:function(t){return this.computeInheritedOpacity.apply(this,arguments)},getGlobalAppliedPickability:function(t){return this.computeInheritedPickability.apply(this,arguments)},});function p(){this.overrideSets=[]}function s(x){var y=x;var t=[],v,u;var w=true;do{v=y.getKey();u=this.overrideSets[v];if(u&&!w){u=u.removeNotInherit()}if(u){t.push(u)}w=false;y=y.getParentPath()}while(y!==null);return t}function n(x,t,w){if(!x){return null}var v,u;if(this.active){v=x.originalOverrideSet}else{u=w.getKey();v=this.overrideSets[u]}if(t&&!v){v=new d(w);if(this.active){x.originalOverrideSet=v}if(!u){u=w.getKey()}this.overrideSets[u]=v}return v}function f(t,u){if(u&&t.externalPath[0]===u){return[t]}function A(C,F){var E,D;if(C[0]===u||C[0].parents.length===0){F.push(C)}else{for(E=0;E<C[0].parents.length;E++){D=[C[0].parents[E]].concat(C);A(D,F)}}}var B=[],y,z,x=[];var w;z=t.externalPath.indexOf(u);if(z>0){w=t.externalPath.slice(z)}else{w=t.externalPath}A(w,B);for(y=0;y<B.length;y++){var v=new k();for(z=0;z<B[y].length;z++){if(!B[y][z].getNotAllowedInPathElement()){v.addElement(B[y][z])}}for(z=0;z<v.internalPath.length;z++){v.addElement(v.internalPath[z])}x.push(v)}return x}function a(u){var v=u._getOccurrences();var t,w;for(t=0;t<v.length;t++){w=v[t];w.requestOverridesUpdate()}}function m(v,t,w,y){var x=v._getUniqueOccurrence(this.viewer);if(x){var u=n.call(this,x,true,v);if(!y){u.changeMaterial(t,w)}else{u.setInternalMaterial(t,y)}if(this.active){x.requestOverridesUpdate();i(x)}}else{return false}return true}function h(v,t,w){var x=v._getUniqueOccurrence(this.viewer);if(x){var u=n.call(this,x,true,v);u.changeOpacity(t,w);if(this.active){x.requestOverridesUpdate();i(x)}}else{return false}return true}function e(v,t){var w=v._getUniqueOccurrence(this.viewer);if(w){var u=n.call(this,w,true,v);u.changePosition(t);if(this.active){w.requestOverridesUpdate()}}else{return false}return true}function j(D,y,B){var u=D.getLastElement();if(u===null){return false}if(u instanceof g){var A=D._getUniqueOccurrence(this.viewer);var x=n.call(this,A,true,D);if(y){var w;var C=y.clone();if(B){C.multiplyMatrices(B,C)}var z=D.getParentPath();var v=z?z.getWorldMatrix(this.viewer):new r.Matrix4();var t=new r.Matrix4();t.getInverse(v);C.multiplyMatrices(t,C);x.changePosition(C)}else{x.changePosition(null)}if(this.active){a(D)}}else{return false}return true}function b(v,t,w){var x=v._getUniqueOccurrence(this.viewer);if(x){var u=n.call(this,x,true,v);u.changeVisibility(t,w);if(this.active){x.requestOverridesUpdate()}}else{return false}return true}function o(v,t,w){var x=v._getUniqueOccurrence(this.viewer);if(x){var u=n.call(this,x,true,v);u.changeColor(t,w);if(this.active){x.requestOverridesUpdate();i(x)}}else{return false}return true}function q(v,u,w){var x=v._getUniqueOccurrence(this.viewer);if(x){var t=n.call(this,x,true,v);t.changePickability(u,w);if(this.active){x.requestOverridesUpdate()}}else{return false}return true}function i(w){var v=w.originalOverrideSet;if(v&&!v.hasMaterialOverride()){var u=w.parent;var t=false;while(u&&!t){v=u.originalOverrideSet;if(v&&v.hasMaterialOverride()){u.requestOverridesUpdate();t=true}u=u.parent}}}return c});define("SceneGraphOverrides/SceneGraphState",["DS/SceneGraphOverrides/SceneGraphState","DS/DSMigration/DSMigration"],function(b,a){a.deprecateModule("SceneGraphOverrides/SceneGraphState");return b});define("DS/SceneGraphOverrides/GenericOverride",["UWA/Class","DS/SceneGraphOverrides/OverrideSet2","DS/Visualization/PathElement","DS/Visualization/ThreeJS_DS"],function(c,a,f,e){var d=1;var b=c.extend({init:function(h,g,l,p,n,j){this.id=d++;var m=h?[]:null;var k;for(k=0;h&&k<h.length;k++){m.push(h[k].clone())}this._node=j;this._pathes=m;this._sceneGraphOverrideSet=g;this._values={};this._inheritLevel={};this._index=l;this._occurrenceBuffer={};this._missingTargets=null;this._propagationMode=p;this._enabled=n?true:false;if(this._enabled){var k;var o=g._getViewerEntries();for(k=0;k<o.length;k++){this._activate(o[k])}}},setColor:function(g,h){this._setAttribute("color",g,h?2:1)},setMaterial:function(g,h){this._setAttribute("fullMaterial",g,h?2:1)},setOpacity:function(g,h){this._setAttribute("opacity",g,h?2:1)},setPickability:function(g){this._setAttribute("pickability",g,null)},setPosition:function(g){this._setAttribute("position",g,null)},setVisibility:function(g){var h=(g!==null&&g!==undefined)?{visibility:g}:null;this._setAttribute("visibility",h,null)},setVisibilityFree:function(g){var h=(g!==null&&g!==undefined)?{visibilityFree:g}:null;this._setAttribute("visibilityFree",h,null)},setClippingContext:function(h){var g=this._getClipping_internal();h&&this._sceneGraphOverrideSet._addClippingPlanesToViewers(h.planes);g&&this._sceneGraphOverrideSet._removeClippingPlanesFromViewers(g.planes);this._setAttribute("clipping",h?h.clone():null,null)},setRenderMode:function(g){},setRenderStyle:function(g,h){if(g){g._lock()}this._setAttribute("renderStyle",g,h?2:1)},getPosition:function(){if(this._values.hasOwnProperty("position")){return this._values.position}else{return null}},getVisibility:function(){if(this._values.hasOwnProperty("visibility")){return this._values.visibility.visibility}else{return null}},getVisibilityFree:function(){if(this._values.hasOwnProperty("visibilityFree")){return this._values.visibilityFree.visibilityFree}else{return null}},getColor:function(){if(this._values.hasOwnProperty("color")){return this._values.color}else{return null}},getMaterial:function(){if(this._values.hasOwnProperty("fullMaterial")){return this._values.fullMaterial}else{return null}},getOpacity:function(){if(this._values.hasOwnProperty("opacity")){return this._values.opacity}else{return null}},getPickability:function(){if(this._values.hasOwnProperty("pickability")){return this._values.pickability}else{return null}},getRenderMode:function(){var g=null;if(this._values.hasOwnProperty("renderMode")){g=this._values.renderMode}return g&&g.clone()},getRenderStyle:function(){var g=null;if(this._values.hasOwnProperty("renderStyle")){g=this._values.renderStyle}return g},getClippingContext:function(){var g=this._getClipping_internal();return g?g.clone():null},hasBoundingElementInfluence:function(){return this._values.hasOwnProperty("position")||this._values.hasOwnProperty("visibility")||this._values.hasOwnProperty("visibilityFree")},hasPositionOverride:function(){return this._values.hasOwnProperty("position")},getPathes:function(){return this._pathes?this._pathes.concat([]):null},isTargetingNode:function(k){if(this._pathes){var h,g,l;for(h=0;h<this._pathes.length;h++){l=this._pathes[h];for(g=0;g<l.externalPath.length;g++){if(l.externalPath[g]===k){return true}}}}else{if(this._node===k){return true}}return false},enable:function(g){var h=g?true:false;if(h!==this._enabled){this._enabled=h;var j;var k=this._sceneGraphOverrideSet._getViewerEntries();if(this._enabled){for(j=0;j<k.length;j++){this._activate(k[j])}}else{for(j=0;j<k.length;j++){this._deactivate(k[j])}}}},isEnabled:function(g){return this._enabled},_forceOverrideUpdate:function(){this._update(true,true)},_setAttribute:function(l,m,j){var i=this._values[l];if(i===undefined){i=null}var h=false;if(m!==null&&m!==undefined){if(i===null){h=true}if(l==="position"){if(!this._values[l]){this._values[l]=new e.Matrix4()}this._values[l].copy(m)}else{this._values[l]=m}if(j!==this._inheritLevel[l]){this._inheritLevel[l]=j;h=true}}else{if(i!==null){h=true}delete this._values[l];delete this._inheritLevel[l]}var k=this._isBEChangingAttribute(l);h=h||k||l==="pickability"||l==="clipping"||l==="renderStyle";var g=l==="position";if(h){this._update(k,g)}else{this._clearGSSOCache()}},_isBEChangingAttribute:function(g){return(g==="position"||g==="visibility"||g==="visibilityFree")},_removeAttribute:function(h){delete this._values[h];delete this._inheritLevel[h];var g=this._isBEChangingAttribute(h);this._update(g,h==="position")},_getToken:function(){return this._sceneGraphOverrideSet._token},_clone:function(l){var h=new b(this._pathes,l,undefined,undefined,undefined,this._node);var g,i;for(g in this._values){h._values[g]=this._values[g]}var k,j;for(g in this._inheritLevel){h._inheritLevel[g]=this._inheritLevel[g]}return h},_detach:function(g){this._resetOccurrenceBuffer(g);this._addMissingTarget(g)},_addMissingTarget:function(h,g){if(!this._missingTargets){this._missingTargets=[]}if(this._missingTargets.indexOf(h)<0){this._missingTargets.push(h);if(!g){g=this._sceneGraphOverrideSet._getViewerEntryFromViewer(h)}if(g){g.missingTargetOverrides.push(this)}}},_onAddChild:function(g){if(this._propagationMode>0){this._resetOccurrenceBuffer(g);this._addMissingTarget(g)}},_resetOccurrenceBuffer:function(g){delete this._occurrenceBuffer[g.id]},_getOccurrences:function(g){var j=g.viewer,h=j.internalSceneGraph.root3js,i;if(this._node){i=this._node._occurrences.filter(function(k){return k.scene3js===h})}else{i=this._occurrenceBuffer[j.id];if(!i){i=this._buildOccurrenceList(g);if(!this._missingTargets||this._missingTargets.indexOf(j)<0){this._occurrenceBuffer[j.id]=i}}}return i},_buildOccurrenceList:function(u){function g(A){var j,y,z;if(A.length>1){j=[];for(y=0;y<A.length;y++){z=A[y];if(z&&!z.__rdo_visited){j.push(z);z.__rdo_visited=1}}for(y=0;y<j.length;y++){j[y].__rdo_visited=0}}else{j=A}return j}function m(A,y){var z,B,j=[];for(z=0;z<A.length;z++){B=A[z];B.traverse(function(i){j.push(i)})}return j}function t(C,z){var B,D,y=[],A;for(B=0;B<C.length;B++){D=C[B].children;y.push(C[B]);for(A=0;A<D.length;A++){y.push(D[A])}}return y}var n,l,k,x,w,l,o=u.viewer;var h=[];var q;var p=u.prefixPathes?u.prefixPathes:[new f()];var r,v,s=false;for(n=0;n<this._pathes.length;n++){x=this._pathes[n];for(l=0;l<p.length;l++){r=p[l].externalPath.concat([]);if(r.length>0){r.splice(r.length-1,1)}v=true;if(u.substractivePath){if(x.isAParentOf(u.substractivePath)){v=true}else{w=new f();if(w.substractPath(u.substractivePath,this._pathes[n])){r=r.concat(w.externalPath);v=true}else{v=false}}}else{v=true;r=r.concat(x.externalPath)}if(v){if(r.length>0){w=new f();w.setFromArray(r);if(w.checkExternalPath()){q=w._getOccurrences(o)}else{s=true}}else{q=u.viewer.getRootNode()._occurrences}h=q?h.concat(q):h}}}if(this._propagationMode>0){switch(this._propagationMode){case b.PropagationMode.propagateToDirectChildren:h=t(h,this._propagationMode);break;case b.PropagationMode.propagateToChildren:h=m(h,this._propagationMode);break}}h=g(h);if(s){this._addMissingTarget(o,u)}else{if(this._missingTargets){n=this._missingTargets.indexOf(o);if(n>=0){this._missingTargets.splice(n,1);if(this._missingTargets.length===0){this._missingTargets=null}l=u.missingTargetOverrides.indexOf(this);if(l>=0){u.missingTargetOverrides.splice(l,1)}}}}return h},_createOverrideSet:function(h,g){if(!h.originalOverrideSet){h.originalOverrideSet=new a(null,true)}h.originalOverrideSet.initToken(g);h.originalOverrideSet.addGenericOverride(this,g)},_activate:function(g){var k=this._getOccurrences(g);var j,h;for(h=0;h<k.length;h++){j=k[h];this._createOverrideSet(j,g.token);j.originalOverrideSet.update(this.hasBoundingElementInfluence(),this.hasPositionOverride());j.requestOverridesUpdate()}var l=this._getClipping_internal();if(l){for(h=0;h<l.planes.length;h++){g.viewer._addClippingPlane(l.planes[h])}}},_deactivate:function(g){var k=this._getOccurrences(g);var j,h;for(h=0;h<k.length;h++){j=k[h];if(j.originalOverrideSet){j.originalOverrideSet.removeGenericOverride(this);j.originalOverrideSet.update(this.hasBoundingElementInfluence(),this.hasPositionOverride())}j.requestOverridesUpdate()}this._resetOccurrenceBuffer(g.viewer);if(this._missingTargets){h=this._missingTargets.indexOf(g.viewer);if(h>=0){this._missingTargets.splice(h,1);if(this._missingTargets.length===0){this._missingTargets=null}}}h=g.missingTargetOverrides.indexOf(this);if(h>=0){g.missingTargetOverrides.splice(h,1)}var l=this._getClipping_internal();if(l){for(h=0;h<l.planes.length;h++){g.viewer._removeClippingPlane(l.planes[h])}}},_update:function(k,h){if(this._enabled){var g=this._sceneGraphOverrideSet._viewers;var j;for(j=0;j<g.length;j++){this._updateInViewer(g[j],k,h)}}},_clearGSSOCache:function(){if(this._enabled){var p=this._sceneGraphOverrideSet._viewers;var o,r,h,m,n,q,g,l;for(o=0;o<p.length;o++){r=p[o];h=this._getOccurrences(r);for(n=0;n<h.length;n++){m=h[n];q=m._getRenderableOccurrences();for(l=0;l<q.length;l++){g=q[l];g._gsso_cache=null}}}}},_updateInViewer:function(g,k,h){if(this._enabled){var m,j,l;m=this._getOccurrences(g);for(j=0;j<m.length;j++){l=m[j];this._createOverrideSet(l,g.token);l.originalOverrideSet.update(k,h);l.requestOverridesUpdate()}}},_getClipping_internal:function(){if(this._values.hasOwnProperty("clipping")){return this._values.clipping}else{return null}}});b.PropagationMode={none:0,propagateToDirectChildren:1,propagateToChildren:2};return b});define("DS/SceneGraphOverrides/SceneGraphOverrideSet",["UWA/Class","DS/SceneGraphOverrides/GenericOverride","DS/SceneGraphOverrides/OverrideSet","DS/SceneGraphOverrides/SceneGraphOverrideSetToken","DS/Visualization/PathElement","DS/Visualization/OccurrenceInterface"],function(d,c,b,g,h,f){var e=1;var a=d.extend({init:function(i){this.id=e++;this.rootNode=i;this._overrides=[];this._viewers=[];this._pathElementToOverridesMap=null},createOverride:function(o){if(!this.rootNode||!o){return null}if(o instanceof Array||o instanceof h||o instanceof f){o={pathes:o}}var l=o.pathes;if(!(l instanceof Array)){l=[l]}if(l.length===0){return null}var p;var n;for(n=0;n<l.length;n++){if(l[n] instanceof f){p=l[n].buildPathElement(this.rootNode);if(!p){console.warn("ERROR - provided OccurrenceInterface is not under the rootNode of the SceneGraphOverrideSet");return null}l[n]=p}if(l[n].getElement(0)!==this.rootNode){console.warn("ERROR - SceneGraphOverrideSet.createOverride: first PathElement node is not equal to this.rootNode");return null}if(!l[n].checkExternalPath()){console.warn("ERROR - SceneGraphOverrideSet.createOverride: invalid path provided");return null}}var j=o.propagateToDirectChildren?c.PropagationMode.propagateToDirectChildren:c.PropagationMode.none;if(o.propagateToChildren){j=c.PropagationMode.propagateToChildren}var k=o.hasOwnProperty("enabled")?o.enabled:true;var m=new c(l,this,this._overrides.length,j,k);this._overrides.push(m);if(this._pathElementToOverridesMap){this._addOverrideToMap(m,this._pathElementToOverridesMap)}return m},getOverrides:function(){return[].concat(this._overrides)},deleteOverrides:function(k){var j;for(j=0;j<k.length;j++){this.deleteOverride(k[j])}},deleteOverride:function(l){var j=this._overrides.indexOf(l),k;if(j>=0){for(k=0;k<this._viewers.length;k++){l._deactivate(this._viewers[k])}this._overrides.splice(j,1);if(this._pathElementToOverridesMap){this._removeOverrideFromMap(l,this._pathElementToOverridesMap)}return true}else{return false}},clone:function(){var j=new a(this.rootNode);var k;for(k=0;k<this._overrides.length;k++){j._overrides.push(this._overrides[k]._clone(j))}return j},getOverridesFromPathElement:function(j){if(!this._pathElementToOverridesMap){this._pathElementToOverridesMap=this._buildPathElementToOverridesMap()}var i=j.getKey();return this._pathElementToOverridesMap[i]||null},getUniqueOverrideFromPathElement:function(i){var j=this.getOverridesFromPathElement(i);if(j&&j.length===1){return j[0]}else{return null}},getOverridesTargetingNode:function(m){var l,k,j=[];for(l=0;l<this._overrides.length;l++){k=this._overrides[l];if(k.isTargetingNode(m)){j.push(k)}}return j},_buildPathElementToOverridesMap:function(){var k,j;var l={};for(k=0;k<this._overrides.length;k++){j=this._overrides[k];this._addOverrideToMap(j,l)}return l},_addOverrideToMap:function(l,n){var k,j,m;for(k=0;k<l._pathes.length;k++){j=l._pathes[k].getKey();m=n[j];if(!m){m=[];n[j]=m}m.push(l)}},_removeOverrideFromMap:function(m,o){var l,k,n,j;for(l=0;l<m._pathes.length;l++){k=m._pathes[l].getKey();n=o[k];if(n){j=n.indexOf(m);if(j>=0){n.splice(j,1)}}if(n.length===0){delete o[k]}}},_activate:function(o,j,m,n){var l=0,k=-1;for(l=0;l<this._viewers.length&&k<0;l++){if(this._viewers.viewer===o){k=l}}if(k<0){k=this._viewers.length;this._viewers.push({viewer:o,prefixPathes:j,substractivePath:m,token:new g(this,n),missingTargetOverrides:[]})}for(l=0;l<this._overrides.length;l++){this._overrides[l]._activate(this._viewers[k])}},_deactivate:function(l){var k=0,j=-1;for(k=0;k<this._viewers.length&&j<0;k++){if(this._viewers[k].viewer===l){j=k}}if(j>=0){var k=0;for(k=0;k<this._overrides.length;k++){this._overrides[k]._deactivate(this._viewers[j])}this._viewers.splice(j,1)}},_getViewerEntries:function(){return this._viewers},_getViewerEntryFromViewer:function(l){var k,j;for(k=0;k<this._viewers.length;k++){j=this._viewers[k];if(j.viewer===l){return j}}return null},_updateOverridesWithMissingTarget:function(n){var l,j=this._getViewerEntryFromViewer(n),m,k;if(j.missingTargetOverrides.length>0){m=j.missingTargetOverrides.concat([]);for(l=0;l<m.length;l++){k=m[l];k._updateInViewer(j,true)}}},_addClippingPlanesToViewers:function(i){var l,j,k;for(l=0;l<this._viewers.length;l++){for(j=0;j<i.length;j++){k=this._viewers[l].viewer;k._addClippingPlane(i[j])}}},_removeClippingPlanesFromViewers:function(i){var l,j,k;for(l=0;l<this._viewers.length;l++){for(j=0;j<i.length;j++){k=this._viewers[l].viewer;k._removeClippingPlane(i[j])}}},_createNodeOverride:function(j){var i=new c(null,this,this._overrides.length,false,true,j);this._overrides.push(i);return i}});return a});define("DS/SceneGraphOverrides/SceneGraphOverrideSetManager",["UWA/Class","DS/SceneGraphOverrides/SceneGraphOverrideSet","DS/SceneGraphOverrides/SceneGraphOverrideSetToken","DS/Visualization/PathElement"],function(b,a,d,e){var c=b.extend({init:function(f){this.viewer=f;this._sceneGraphOverrideSetArray=[];this._needFullOccurrencesUpdate=false},pushSceneGraphOverrideSet:function(g,f){return this.insertSceneGraphOverrideSetAt(g,this._sceneGraphOverrideSetArray.length,f)},getSceneGraphOverrideSetAt:function(f){return this._sceneGraphOverrideSetArray[f].sceneGraphOverrideSet},getNumberOfSceneGraphOverrideSets:function(){return this._sceneGraphOverrideSetArray.length},getSceneGraphOverrideSetIndex:function(h){var f=-1,g;for(g=0;g<this._sceneGraphOverrideSetArray.length&&f<0;g++){if(this._sceneGraphOverrideSetArray[g].sceneGraphOverrideSet===h){f=g}}return f},removeSceneGraphOverrideSet:function(g){var f=this.getSceneGraphOverrideSetIndex(g);this.removeSceneGraphOverrideSetAt(f)},removeSceneGraphOverrideSetAt:function(g){if(g>-1&&g<this._sceneGraphOverrideSetArray.length){var f=this._sceneGraphOverrideSetArray.concat([]);f.splice(g,1);this._setSceneGraphOverrideSetArray(f)}},insertSceneGraphOverrideSetAt:function(i,f,h){if(!(i instanceof a)){throw new Error("sceneGraphOverrideSet must be a SceneGraphOverrideSet")}h=h||{};if(this._checkSceneGraphOverrideSetParameters(i,h)){if(this.getSceneGraphOverrideSetIndex(i)>=0){console.warn("SceneGraphOverrideSet already active")}else{var g=this._sceneGraphOverrideSetArray.concat([]);g.splice(f,0,{sceneGraphOverrideSet:i,prefixPathes:h.prefixPathes,substractivePath:h.substractivePath});this._setSceneGraphOverrideSetArray(g);return true}}else{console.warn("SceneGraphOverrideSet not added because either prefixPathes or substractive path were missing/incorrect/provided.\nPlease check SceneGraphOverrideSetManager methods documentation")}return false},clear:function(){this._setSceneGraphOverrideSetArray([])},computeInheritedAttributes:function(h){var g=this.viewer.getRootNode();g._tryOverridesUpdate(this.viewer);var i=h._getUniqueOccurrence(this.viewer);var f=null;if(i){if(i.overrideLink){f=i.overrideLink.getAppliedPropertiesNEW()}else{f={}}}return f},computeInheritedOpacity:function(h){var g=this.computeInheritedAttributes(h);var f=null;if(g&&g.opacity){f=g.opacity.value}return f},computeInheritedMaterial:function(h){var g=this.computeInheritedAttributes(h);var f=null;if(g&&g.material){f=g.material.value}return f},computeInheritedColor:function(h){var g=this.computeInheritedAttributes(h);var f=null;if(g&&g.color){f=g.color.value}return f},computeInheritedVisibility:function(h){var g=this.computeInheritedAttributes(h);var f=null;if(g&&g.visibility){f=g.visibility.value}return f},computeInheritedVisibilityFree:function(h){var g=this.computeInheritedAttributes(h);var f=null;if(g&&g.visibilityFree){f=g.visibilityFree.value}return f},computeInheritedPickability:function(h){var g=this.computeInheritedAttributes(h);var f=null;if(g&&g.pickability){f=g.pickability.value}return f},computeAppliedPosition:function(h){var g=this.computeInheritedAttributes(h);var f=null;if(g&&g.position){f=g.position.value}return f},getCurrentVisibility:function(h){var g;var f=this.viewer.getRootNode();f._tryOverridesUpdate(this.viewer);var i=h._getUniqueOccurrence(this.viewer);if(i){g=i._getVisible()}return g},getCurrentVisibilityFree:function(h){var g;var f=this.viewer.getRootNode();f._tryOverridesUpdate(this.viewer);var i=h._getUniqueOccurrence(this.viewer);if(i){g=i._getVisibilityFree()}return g},hasSceneGraphOverrideSet:function(){return this._sceneGraphOverrideSetArray.length>0},_requestFullOverridesUpdate:function(){this._needFullOccurrencesUpdate=true},_getSceneGraphOverrideSetArray:function(){return this._sceneGraphOverrideSetArray.concat([])},_setSceneGraphOverrideSetArray:function(h){if(this.viewer._sceneGraphStateVersion&&this.viewer._sceneGraphStateVersion!==2){console.warn("Cannot use both v1 and v2 sceneGraphStates");throw Error()}if(!this.viewer._sceneGraphStateVersion){this.viewer._sceneGraphStateVersion=2}h=h||[];var f=0;var j;for(f=0;f<this._sceneGraphOverrideSetArray.length;f++){j=this._sceneGraphOverrideSetArray[f].sceneGraphOverrideSet;j._deactivate(this.viewer)}this._sceneGraphOverrideSetIdToRank={};this._sceneGraphOverrideSetArray=h.concat([]);var g;for(f=0;f<this._sceneGraphOverrideSetArray.length;f++){g=this._sceneGraphOverrideSetArray[f];j=g.sceneGraphOverrideSet;j._activate(this.viewer,g.prefixPathes,g.substractivePath,f)}},_checkSceneGraphOverrideSetParameters:function(f,o){var j;if(o.prefixPathes){for(j=0;j<o.prefixPathes.length;j++){if(!o.prefixPathes[j].checkExternalPath){return false}}}if(o.substractivePath&&!o.substractivePath.checkExternalPath()){return false}var m=this.viewer.getRootNode();if(m.children.indexOf(f.rootNode)>=0){return(!o.prefixPathes||o.prefixPathes.length===0)&&!o.substractivePath}else{var l=o.prefixPathes||[new e()];var k,g;var n=o.substractivePath&&o.substractivePath.externalPath;var h=f.rootNode;if(n){if(f.rootNode!==n[0]){return false}h=n[n.length-1]}for(j=0;j<l.length;j++){k=l[j].externalPath;if(k.length===0){if(m.children.indexOf(h)<0){return false}}else{g=k[k.length-1];if(m.children.indexOf(k[0])<0||g!==h){return false}}}}return true},_fullOccurrencesUpdate:function(){if(this._needFullOccurrencesUpdate&&this._sceneGraphOverrideSetArray.length>0){this._setSceneGraphOverrideSetArray(this._sceneGraphOverrideSetArray);this._needFullOccurrencesUpdate=false}},_updateOverridesWithMissingTarget:function(){var f;for(f=0;f<this._sceneGraphOverrideSetArray.length;f++){this._sceneGraphOverrideSetArray[f].sceneGraphOverrideSet._updateOverridesWithMissingTarget(this.viewer)}}});return c});