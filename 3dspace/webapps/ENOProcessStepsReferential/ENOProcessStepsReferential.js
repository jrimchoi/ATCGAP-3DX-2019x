define("DS/ENOProcessStepsReferential/ProcessStepsReferential",["DS/WebappsUtils/WebappsUtils","DS/Handlebars/Handlebars","DS/UIKIT/Accordion","css!DS/ENOProcessStepsReferential/ENOProcessStepsReferential","text!DS/ENOProcessStepsReferential/ProcessStepsReferential.html","DS/ENOProcessStepsUX/scripts/ProcessStepsUtil","DS/UIKIT/IconDropdown","i18n!DS/ENOProcessStepsReferential/assets/nls/ProcessStepsReferential",],function(b,a,d,h,e,g,f,i){a.registerHelper("ifeq",function(k,j,l){if(k==j){return l.fn(this)}return l.inverse(this)});a.registerHelper("ifnoteq",function(k,j,l){if(k!=j){return l.fn(this)}return l.inverse(this)});a.registerHelper("ifContains",function(k,j,l){if(k.indexOf(j)>=0){return l.fn(this)}return l.inverse(this)});a.registerHelper("ifNotContains",function(k,j,l){if(k.indexOf(j)<0){return l.fn(this)}return l.inverse(this)});a.registerHelper("get_length",function(j){return j.length});a.registerHelper("setIndex",function(j){this.index=Number(j+1)});var c={loadReferentialView:function(r,m,p,q,n,l){var k={objectId:n,mcsurl:r};k=JSON.stringify(k);var o=r+"/resources/processStepsReferential/ReferentialService/getProcessStepsReferentialData";var j=function(z,y){var x=z.data;y=document.getElementById("recentDocuments");var A=new UWA.Element("div",{styles:{width:"auto",padding:"2px",position:"relative",margin:"6px",}});A.setAttributes({id:"boxDiv4"});var v={Box:x};var w=a.compile(e);var u=w(v);A.addContent(u);var t=new d({className:"styled divided filled",items:[{title:i.MyReferential,content:A,selected:true}],events:{onOpen:function(){},onClose:function(){}},}).inject(y);c.attachEventHdlrs(y)};var s=function(u,t){console.log("onReferenceViewFailureCallback:errDetailds:"+u)};g.makeWSCall(o,m,p,q,k,j,s,l)},attachEventHdlrs:function(j){$(".cmd-slider-left").click(function(){c.showToolbar($(this),"0")});$(".cmd-slider-right").click(function(){c.showToolbar($(this),"1")});$(".cmd-starter").mouseover(function(){c.highlightCmd($(this))});$(".cmd-starter").mouseout(function(){c.unhighlightCmd($(this))});$(".cmd-starter").mousedown(function(){c.activateCmd($(this))});$(".cmd-starter").mouseup(function(){c.deactivateCmd($(this))});$(".cmd-container-dropdown").mouseover(function(){c.highlightCmdDropdown($(this))});$(".cmd-container-dropdown").click(function(){c.dropdownData($(this))});$(".outline").on("dragstart",function(k){c.dragBox(k,this)});$(".outline").on("dragend",function(k){c.dragEndBox(k,this)});$(".outline").on("dragleave",function(k){c.dragleaveBox(k,this)});$(".outline").on("dragover",function(k){c.dragoverBox(k,this)});$(".outline").on("drop",function(k){c.dropbox(k,this)})},dragBox:function(n,l){l.style.transform="scale(1.2)";var j=l.cloneNode(true);j.id="dragGhostDiv";j.style.position="absolute";j.style.top="0px";j.style.left="-10000px";var m=j.getElementsByClassName("border-container");var k=m[0].getElementsByClassName("cmd-workbench");k[0].style.display="none";document.body.appendChild(j);n.originalEvent.dataTransfer.setDragImage(j,0,0);l.style.transform=null;n.originalEvent.dataTransfer.setData("DragObjectId",l.id);n.originalEvent.dataTransfer.setData("Reference Document","true")},dragEndBox:function(k,j){var l=document.getElementById("dragGhostDiv");if(l){l.remove()}},dragleaveBox:function(k,j){var l=j.getElementsByClassName("hvrbox-layer_top");l[0].style.width="200px";l[0].style.zIndex="-1";l[0].style.opacity="0"},dragoverBox:function(l,k){l.stopPropagation();var j=k.offsetWidth;l.preventDefault();var m=k.getElementsByClassName("hvrbox-layer_top");m[0].style.width=j+"px";m[0].style.zIndex="1";m[0].style.opacity="0.8"},dropbox:function(j,o,p,t,v){var u=o.getAttribute("droptypes");var s=o.getAttribute("droprelationship");var q=o.getAttribute("droptypedirection");var k=o.getAttribute("dropprogram");var w=o.getAttribute("message");if(u==null){u=""}if(s==null){s=""}if(q==null){q=""}if(k==null){k=""}if(w==null){w=""}if(k==null){k=""}var m=o.getAttribute("myAppsURL")+"/resources/processStepsReferential/ReferentialService/dropProgram";var n={dragObjectId:j.originalEvent.dataTransfer.getData("DragObjectId"),dropObjectId:o.id,program:k,types:u,relationship:s,typedirection:q,message:w};n=JSON.stringify(n);var r=function(x){console.log("jsonObject:"+x);var y={level:"success",title:x.message,subtitle:"",message:"",sticky:"false"};if(x.error){y={level:"error",title:x.error,subtitle:"",message:"",sticky:"false"}}};g.makeWSCall(m,p,t,v,n,r,"","",false);var l=o.getElementsByClassName("hvrbox-layer_top");l[0].style.width="200px";l[0].style.opacity="0";l[0].style.zIndex="-1"},getOwnerImageDiv:function(j){var m=j.ownerImageURL;var n=j.title;var l=j.emailAddress;var k=j.title;var o="<div";if(m){o=o+' class="person-image" style="background-image: url("{0}");"'.format(encodeURI(m))}else{o=o+' class="person-solid icon"'}if(l){o=o+" onclick=\"location.href='mailTo:{0}?subject={1}'\"".format(l,encodeURI(n));if(!m){o=o+' style="cursor:pointer"'}}if(k){o=o+' title="{0}"'.format(k)}o=o+"></div>";if(!m){o=o+"    "}elementinnerHTML=o;return o},showHalo:function(j){if(j==="left"){$(".cmd-slider-halo-left").css("visibility","visible")}else{$(".cmd-slider-halo-right").css("visibility","visible")}},clearHalo:function(j){if(j==="left"){$(".cmd-slider-halo-left").css("visibility","hidden")}else{$(".cmd-slider-halo-right").css("visibility","hidden")}},showToolbar:function(j,n){var k=j[0].id.split("_")[1];var m=k+"0";var l=k+"1";if(n==="1"){$("#"+m).css("display","none");$("#"+l).css("display","inline-block")}else{$("#"+l).css("display","none");$("#"+m).css("display","inline-block")}},highlightCmd:function(j){j.toggleClass("cmd-state-hover")},unhighlightCmd:function(j){j.toggleClass("cmd-state-hover")},activateCmd:function(j){j.toggleClass("cmd-state-active")},deactivateCmd:function(j){j.toggleClass("cmd-state-active")},highlightCmdDropdown:function(j){j.toggleClass("cmd-state-hover")},dropdownData:function(p){var r=b.getWebappsBaseUrl();var k=document.getElementById(p[0].id);var m=p[0].id.split("@")[0];var s=document.getElementsByClassName(m+"_child-element");var o=[];for(var q=0;q<s.length;q++){var l=s[q];var j=l.getAttribute("href");var n=l.getAttribute("src");var t=l.getAttribute("title");o.push({icon:n,description:t,className:"dropdownContainer",href:j,selectable:"true"})}new f({target:k,items:o,events:{onClick:function(v,u){window.location.href=u.href}}})},};return c});