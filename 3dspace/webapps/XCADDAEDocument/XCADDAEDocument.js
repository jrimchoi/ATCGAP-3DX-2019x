define("DS/XCADDAEDocument/DAEProductRepresentation",["DS/XCADInputDocuments/XCADProductRepresentation"],function(b){var a=b.extend(function a(c,e,d){this._name=d;this._associatedDocument=c;this._representationType=e;this._rootProducts=[]},{addRootProduct:function(c){this._rootProducts.push(c)}});return a});define("DS/XCADDAEDocument/DAETessellatedRepresentation",["DS/XCADInputDocuments/XCADTessellatedRepresentation","DS/XCADInputDocuments/XCADRepresentation","DS/XCADInputDocuments/XCADFaceData"],function(i,h,j){var f=null;var d=null;function a(){var l=f.evaluate(".//dae:scene/dae:instance_visual_scene",f,b,XPathResult.ORDERED_NODE_ITERATOR_TYPE,null).iterateNext();if(l){var k=l.getAttribute("url").replace(/^#/,"");return visualScenes[k.length>0?k:"visual_scene0"]}else{return null}}function b(k){if(k=="dae"){return"http://www.collada.org/2005/11/COLLADASchema"}return null}function g(k,n){if(k){var m;var l;for(l=0;l<k.length;l++){if(k[l].id==n){m=k[l]}if(!m&&k[l].nodes&&k[l].nodes.length!=0){m=g(k[l].nodes,n)}if(!m&&k[l].geometries&&k[l].geometries.length!=0){m=g(k[l].geometries,n)}}return m}}function c(k){var m;var n=d.geometries[k];if(n){m=n.mesh}else{if(n==undefined){var l=k.split("#");if(l.length==2&&d.geometries[l[0]].mesh){m=d.geometries[l[0]].mesh.primitives[l[1]]}}}return m}var e=i.extend(function e(k){this._associatedDocument=k;this._representationType=h.XCAD_TESSELLATED_REPRESENTATION;f=this._associatedDocument.COLLADA;d=this._associatedDocument},{getChild:function(m,k){var l=c(m);if(l.nodes&&l.nodes.length!=0){return l.nodes[k].id}if(l.geometries&&l.geometries.length!=0){return l.geometries[k].url}if(l.primitives&&l.primitives.length!=0){return l.primitives[k].id}return undefined},getChildCount:function(l){var k=c(l);if(k.nodes&&k.nodes.length!=0){return k.nodes.length}if(k.geometries&&k.geometries.length!=0){return k.geometries.length}if(k.primitives&&k.primitives.length!=0){return k.primitives.length}return 0},getCircleData:function(k){throw"Error: not implemented method"},getConeData:function(k){throw"Error: not implemented method"},getCoordinateSystem:function(k){throw"Error: not implemented method"},getCylinderData:function(k){throw"Error: not implemented method"},getEdgeData:function(k){throw"Error: not implemented method"},getFaceData:function(l){var m=new j();var k=c(l);m.vertices=k.vertices;m.normals=k.normals;m.id=k.id;return m},getGPType:function(l){var k=c(l);if(k.vcount==3){return i.KindOfGP.GP_Face}return i.KindOfGP.GP_Unknown},getNodeBoundingSphere:function(k){throw"Error: not implemented method"},getNodeColor:function(s){var q=c(s);if(q.material){for(var n in d.materials){if(d.materials[n].name==q.material){var m=d.materials[n].instance_effect.url;var p=d.effects[m].shader.material.color.r;var o=d.effects[m].shader.material.color.g;var k=d.effects[m].shader.material.color.b;var l;if(d.effects[m].shader.material.transparent==true){l=1-d.effects[m].shader.material.opacity}else{l=d.effects[m].shader.material.opacity}return[p,o,k,l]}}}else{return[0.825,0.825,1]}},getNodeOrientationMatrix:function(n){var l;var m=c(n);var k=m.matrix;if(k!==undefined){l=k}return l},getNodeType:function(l){var k=c(l);if(k.nodes&&k.nodes.length!=0){return i.KindOfNode.NOD_ContainerNode}if(k.geometries&&k.geometries.length!=0){return i.KindOfNode.NOD_ContainerNode}if(k.primitives&&k.primitives.length!=0){return i.KindOfNode.NOD_SolidNode}if(k.vcount){return i.KindOfNode.NOD_GP}return i.KindOfNode.NOD_Unknown},getNodeUID:function(k){throw"Error: not implemented method"},getPlaneData:function(k){throw"Error: not implemented method"},getPointData:function(k){throw"Error: not implemented method"},getPolyLineData:function(k){throw"Error: not implemented method"},getRootNode:function(k){return this._associatedDocument._internalRepresentationIndex},getRootNodesCount:function(){var k=1;return k},getSAG:function(k){throw"Error: not implemented method"},getSphereData:function(k){throw"Error: not implemented method"},isIndexed:function(){return false}});return e});define("DS/XCADDAEDocument/DAEProductInstance",["DS/XCADInputDocuments/XCADProductInstance",],function(b){var a;require(["DS/XCADDAEDocument/DAEProduct"],function(d){a=d});var c=b.extend(function c(e,d){this._document=e;this._DAEProductInstance=d},{getGeometricProperties:function(){throw"Error: not implemented method"},getInstanceAttributes:function(){throw"Error: not implemented method"},getReferenceProduct:function(){var d=new a(this._document,this._DAEProductInstance);return d},getUID:function(){throw"Error: not implemented method"},getTransformation:function(){var e;var d=this._DAEProductInstance.matrix;if(d!==undefined){e=d}return e}});return c});define("DS/XCADDAEDocument/DAEProduct",["exports","DS/XCADInputDocuments/XCADProduct","DS/XCADDAEDocument/DAEProductInstance"],function(b,c,d){var a=c.extend(function a(e,f){this._document=e;this._DAEProduct=f},{getDocument:function(){var e;var f;if(this._DAEProduct.geometries&&this._DAEProduct.geometries.length!=0){f=this._DAEProduct.geometries}if((f!==undefined)&&(f!==null)){e=this._document;e._internalRepresentationIndex=f[0].url}return e},getFilePath:function(){var e;if((this._DAEProduct.geomRep!==undefined)&&(this._DAEProduct.geomRep!==null)&&(this._DAEProduct.geomRep.type==="external")){e=this._DAEProduct.geomRep.location}return e},getGeometricProperties:function(){throw"Error: not implemented method"},getInstanceList:function(){var h=[];if(this._DAEProduct.nodes){var g=this._DAEProduct.nodes.length;for(var f=0;f<g;f++){var e=new d(this._document,this._DAEProduct.nodes[f]);if((e!==undefined)&&(e!==null)){h.push(e)}}}return h},getProductAttributes:function(){var e=[];e.push(this._DAEProduct.name||this._DAEProduct.id);e.push("");e.push("");e.push("");e.push("");e.push(c.SourceTypes.Unknown);return e},getUID:function(){throw"Error: not implemented method"}});b.DAEProduct=a;return a});define("DS/XCADDAEDocument/DAEInputDocument",["DS/XCADInputDocuments/XCADInputDocument","DS/XCADInputDocuments/XCADRepresentation","DS/XCADDAEDocument/DAETessellatedRepresentation","DS/XCADDAEDocument/DAEProductRepresentation","DS/XCADDAEDocument/DAEProduct","DS/Visualization/ThreeJS_DS"],function(ac,S,ab,h,aj,af){var l=null;var e;var X={};var A={centerGeometry:false,convertUpAxis:false,subdivideFaces:true,upAxis:"Z",defaultEnvMap:null,waitMaterial:new af.MeshPhongMaterial({color:new af.Color(16777215)})};var W=1;var i="Y";var Q=null;var B=af.SmoothShading;function ak(){this.id="";this.init_from=""}ak.prototype.parse=function(aq){this.id=aq.getAttribute("id");for(var ap=0;ap<aq.childNodes.length;ap++){var ar=aq.childNodes[ap];if(ar.nodeName=="init_from"){this.init_from=ar.textContent}}return this};function j(){this.id="";this.name="";this.type="";this.skin=null;this.morph=null}j.prototype.parse=function(aq){this.id=aq.getAttribute("id");this.name=aq.getAttribute("name");this.type="none";for(var ap=0;ap<aq.childNodes.length;ap++){var ar=aq.childNodes[ap];switch(ar.nodeName){case"skin":this.skin=(new k()).parse(ar);this.type=ar.nodeName;break;case"morph":this.morph=(new O()).parse(ar);this.type=ar.nodeName;break;default:break}}return this};function O(){this.method=null;this.source=null;this.targets=null;this.weights=null}O.prototype.parse=function(au){var ar={};var ap=[];var at;this.method=au.getAttribute("method");this.source=au.getAttribute("source").replace(/^#/,"");for(at=0;at<au.childNodes.length;at++){var aw=au.childNodes[at];if(aw.nodeType!=1){continue}switch(aw.nodeName){case"source":var av=(new an()).parse(aw);ar[av.id]=av;break;case"targets":ap=this.parseInputs(aw);break;default:console.log(aw.nodeName);break}}for(at=0;at<ap.length;at++){var aq=ap[at];var av=ar[aq.source];switch(aq.semantic){case"MORPH_TARGET":this.targets=av.read();break;case"MORPH_WEIGHT":this.weights=av.read();break;default:break}}return this};O.prototype.parseInputs=function(ar){var ap=[];for(var aq=0;aq<ar.childNodes.length;aq++){var at=ar.childNodes[aq];if(at.nodeType!=1){continue}switch(at.nodeName){case"input":ap.push((new ad()).parse(at));break;default:break}}return ap};function k(){this.source="";this.bindShapeMatrix=null;this.invBindMatrices=[];this.joints=[];this.weights=[]}k.prototype.parse=function(at){var aq={};var ap,au;this.source=at.getAttribute("source").replace(/^#/,"");this.invBindMatrices=[];this.joints=[];this.weights=[];for(var ar=0;ar<at.childNodes.length;ar++){var ax=at.childNodes[ar];if(ax.nodeType!=1){continue}switch(ax.nodeName){case"bind_shape_matrix":var av=J(ax.textContent);this.bindShapeMatrix=M(av);break;case"source":var aw=new an().parse(ax);aq[aw.id]=aw;break;case"joints":ap=ax;break;case"vertex_weights":au=ax;break;default:console.log(ax.nodeName);break}}this.parseJoints(ap,aq);this.parseWeights(au,aq);return this};k.prototype.parseJoints=function(at,aq){for(var ar=0;ar<at.childNodes.length;ar++){var av=at.childNodes[ar];if(av.nodeType!=1){continue}switch(av.nodeName){case"input":var ap=(new ad()).parse(av);var au=aq[ap.source];if(ap.semantic=="JOINT"){this.joints=au.read()}else{if(ap.semantic=="INV_BIND_MATRIX"){this.invBindMatrices=au.read()}}break;default:break}}};k.prototype.parseWeights=function(av,ap){var aE,aB,ay=[];for(var aw=0;aw<av.childNodes.length;aw++){var aq=av.childNodes[aw];if(aq.nodeType!=1){continue}switch(aq.nodeName){case"input":ay.push((new ad()).parse(aq));break;case"v":aE=o(aq.textContent);break;case"vcount":aB=o(aq.textContent);break;default:break}}var az=0;for(var aw=0;aw<aB.length;aw++){var at=aB[aw];var ax=[];for(var au=0;au<at;au++){var aA={};for(var ar=0;ar<ay.length;ar++){var aC=ay[ar];var aD=aE[az+aC.offset];switch(aC.semantic){case"JOINT":aA.joint=aD;break;case"WEIGHT":aA.weight=ap[aC.source].data[aD];break;default:break}}ax.push(aA);az+=ay.length}for(var au=0;au<ax.length;au++){ax[au].index=aw}this.weights.push(ax)}};function aa(){this.id="";this.name="";this.nodes=[];this.scene=new af.Object3D()}aa.prototype.getChildById=function(at,ap){for(var aq=0;aq<this.nodes.length;aq++){var ar=this.nodes[aq].getChildById(at,ap);if(ar){return ar}}return null};aa.prototype.getChildBySid=function(ap,aq){for(var ar=0;ar<this.nodes.length;ar++){var at=this.nodes[ar].getChildBySid(ap,aq);if(at){return at}}return null};aa.prototype.parse=function(aq){this.id=aq.getAttribute("id");this.name=aq.getAttribute("name");this.nodes=[];for(var ap=0;ap<aq.childNodes.length;ap++){var ar=aq.childNodes[ap];if(ar.nodeType!=1){continue}switch(ar.nodeName){case"node":this.nodes.push((new y()).parse(ar));break;default:break}}return this};function y(){this.id="";this.name="";this.sid="";this.nodes=[];this.controllers=[];this.transforms=[];this.geometries=[];this.channels=[];this.matrix=new af.Matrix4()}y.prototype.getChannelForTransform=function(aA){for(var aw=0;aw<this.channels.length;aw++){var ax=this.channels[aw];var au=ax.target.split("/");var ap=au.shift();var aq=au.shift();var ay=(aq.indexOf(".")>=0);var az=(aq.indexOf("(")>=0);var at;var av;if(ay){au=aq.split(".");aq=au.shift();av=au.shift()}else{if(az){at=aq.split("(");aq=at.shift();for(var ar=0;ar<at.length;ar++){at[ar]=parseInt(at[ar].replace(/\)/,""))}}}if(aq==aA){ax.info={sid:aq,dotSyntax:ay,arrSyntax:az,arrIndices:at};return ax}}return null};y.prototype.getChildById=function(at,ap){if(this.id==at){return this}if(ap){for(var aq=0;aq<this.nodes.length;aq++){var ar=this.nodes[aq].getChildById(at,ap);if(ar){return ar}}}return null};y.prototype.getChildBySid=function(ap,aq){if(this.sid==ap){return this}if(aq){for(var ar=0;ar<this.nodes.length;ar++){var at=this.nodes[ar].getChildBySid(ap,aq);if(at){return at}}}return null};y.prototype.getTransformBySid=function(ap){for(var aq=0;aq<this.transforms.length;aq++){if(this.transforms[aq].sid==ap){return this.transforms[aq]}}return null};y.prototype.parse=function(ar){var ap;this.id=ar.getAttribute("id");this.sid=ar.getAttribute("sid");this.name=ar.getAttribute("name");this.type=ar.getAttribute("type");this.type=this.type=="JOINT"?this.type:"NODE";this.nodes=[];this.transforms=[];this.geometries=[];this.cameras=[];this.controllers=[];this.matrix=new af.Matrix4();for(var aq=0;aq<ar.childNodes.length;aq++){var au=ar.childNodes[aq];if(au.nodeType!=1){continue}switch(au.nodeName){case"node":this.nodes.push((new y()).parse(au));break;case"instance_camera":this.cameras.push((new ag()).parse(au));break;case"instance_controller":this.controllers.push((new T()).parse(au));break;case"instance_geometry":this.geometries.push((new r()).parse(au));break;case"instance_light":break;case"instance_node":ap=au.getAttribute("url").replace(/^#/,"");var at=D(ap);if(at){this.nodes.push((new y()).parse(at))}break;case"rotate":case"translate":case"scale":case"matrix":case"lookat":case"skew":this.transforms.push((new am()).parse(au));break;case"extra":break;default:console.log(au.nodeName);break}}this.channels=b(this);F(this);this.updateMatrix();return this};y.prototype.updateMatrix=function(){this.matrix.identity();for(var ap=0;ap<this.transforms.length;ap++){this.transforms[ap].apply(this.matrix)}};function am(){this.sid="";this.type="";this.data=[];this.obj=null}am.prototype.parse=function(ap){this.sid=ap.getAttribute("sid");this.type=ap.nodeName;this.data=J(ap.textContent);this.convert();return this};am.prototype.convert=function(){switch(this.type){case"matrix":this.obj=M(this.data);break;case"rotate":this.angle=af.Math.degToRad(this.data[3]);case"translate":R(this.data,-1);this.obj=new af.Vector3(this.data[0],this.data[1],this.data[2]);break;case"scale":R(this.data,1);this.obj=new af.Vector3(this.data[0],this.data[1],this.data[2]);break;default:console.log("Can not convert Transform of type "+this.type);break}};am.prototype.apply=function(ap){switch(this.type){case"matrix":ap.multiply(this.obj);break;case"translate":ap.translate(this.obj);break;case"rotate":ap.rotateByAxis(this.obj,this.angle);break;case"scale":ap.scale(this.obj);break}};am.prototype.update=function(ar,at){var ap=["X","Y","Z","ANGLE"];switch(this.type){case"matrix":if(!at){this.obj.copy(ar)}else{if(at.length===1){switch(at[0]){case 0:this.obj.n11=ar[0];this.obj.n21=ar[1];this.obj.n31=ar[2];this.obj.n41=ar[3];break;case 1:this.obj.n12=ar[0];this.obj.n22=ar[1];this.obj.n32=ar[2];this.obj.n42=ar[3];break;case 2:this.obj.n13=ar[0];this.obj.n23=ar[1];this.obj.n33=ar[2];this.obj.n43=ar[3];break;case 3:this.obj.n14=ar[0];this.obj.n24=ar[1];this.obj.n34=ar[2];this.obj.n44=ar[3];break}}else{if(at.length===2){var aq="n"+(at[0]+1)+(at[1]+1);this.obj[aq]=ar}else{console.log("Incorrect addressing of matrix in transform.")}}}break;case"translate":case"scale":if(Object.prototype.toString.call(at)==="[object Array]"){at=ap[at[0]]}switch(at){case"X":this.obj.x=ar;break;case"Y":this.obj.y=ar;break;case"Z":this.obj.z=ar;break;default:this.obj.x=ar[0];this.obj.y=ar[1];this.obj.z=ar[2];break}break;case"rotate":if(Object.prototype.toString.call(at)==="[object Array]"){at=ap[at[0]]}switch(at){case"X":this.obj.x=ar;break;case"Y":this.obj.y=ar;break;case"Z":this.obj.z=ar;break;case"ANGLE":this.angle=af.Math.degToRad(ar);break;default:this.obj.x=ar[0];this.obj.y=ar[1];this.obj.z=ar[2];this.angle=af.Math.degToRad(ar[3]);break}break}};function T(){this.url="";this.skeleton=[];this.instance_material=[]}T.prototype.parse=function(ar){this.url=ar.getAttribute("url").replace(/^#/,"");this.skeleton=[];this.instance_material=[];for(var aq=0;aq<ar.childNodes.length;aq++){var au=ar.childNodes[aq];if(au.nodeType!==1){continue}switch(au.nodeName){case"skeleton":this.skeleton.push(au.textContent.replace(/^#/,""));break;case"bind_material":var at=l.COLLADA.evaluate(".//dae:instance_material",au,z,XPathResult.ORDERED_NODE_ITERATOR_TYPE,null);if(at){var ap=at.iterateNext();while(ap){this.instance_material.push((new ai()).parse(ap));ap=at.iterateNext()}}break;case"extra":break;default:break}}return this};function ai(){this.symbol="";this.target=""}ai.prototype.parse=function(ap){this.symbol=ap.getAttribute("symbol");this.target=ap.getAttribute("target").replace(/^#/,"");return this};function r(){this.url="";this.instance_material=[]}r.prototype.parse=function(ar){this.url=ar.getAttribute("url").replace(/^#/,"");this.instance_material=[];for(var aq=0;aq<ar.childNodes.length;aq++){var au=ar.childNodes[aq];if(au.nodeType!=1){continue}if(au.nodeName=="bind_material"){var at=l.COLLADA.evaluate(".//dae:instance_material",au,z,XPathResult.ORDERED_NODE_ITERATOR_TYPE,null);if(at){var ap=at.iterateNext();while(ap){this.instance_material.push((new ai()).parse(ap));ap=at.iterateNext()}}break}}return this};function ae(){this.id="";this.mesh=null}ae.prototype.parse=function(aq){this.id=aq.getAttribute("id");f(this,aq);for(var ap=0;ap<aq.childNodes.length;ap++){var ar=aq.childNodes[ap];switch(ar.nodeName){case"mesh":this.mesh=(new n(this)).parse(ar);break;case"extra":break;default:break}}return this};function n(ap){this.geometry=ap.id;this.primitives=[];this.vertices=null}n.prototype.parse=function(av){this.primitives=[];var au,at,ap=0;for(au=0;au<av.childNodes.length;au++){var aw=av.childNodes[au];switch(aw.nodeName){case"source":P(aw);break;case"vertices":this.vertices=(new H()).parse(aw);break;case"triangles":this.primitives.push((new G(this.geometry+"#"+ap).parse(aw)));ap++;break;case"polygons":this.primitives.push((new C().parse(aw)));break;case"polylist":this.primitives.push((new K().parse(aw)));break;default:break}}var ar=X[this.vertices.input.POSITION.source].data;for(au=0;au<this.primitives.length;au++){var aq=this.primitives[au];aq.setVertices(this.vertices);this.handlePrimitive(aq,this.geometry3js)}return this};n.prototype.handlePrimitive=function(aD,aG){var aJ,aI,at=aD.p,ar=aD.inputs;var aA,ax,az;var aF,aq;var aC=0,aN=3,ay=0;var aL=[];for(aJ=0;aJ<ar.length;aJ++){aA=ar[aJ];var av=aA.offset+1;ay=(ay<av)?av:ay;switch(aA.semantic){case"TEXCOORD":aL.push(aA.set);break}}for(var aw=0;aw<at.length;++aw){var aE=at[aw],aK=0;while(aK<aE.length){var aH=[];var aO=[];var ap=null;var au=[];if(aD.vcount){aN=aD.vcount.length?aD.vcount[aC++]:aD.vcount}else{aN=aE.length/ay}for(aJ=0;aJ<aN;aJ++){for(aI=0;aI<ar.length;aI++){aA=ar[aI];aF=X[aA.source];ax=aE[aK+(aJ*ay)+aA.offset];aq=aF.accessor.params.length;az=ax*aq;switch(aA.semantic){case"VERTEX":aH.push(v(aF.data,az));break;case"NORMAL":aO.push(v(aF.data,az));break;case"TEXCOORD":ap=ap||{};if(ap[aA.set]===undefined){ap[aA.set]=[]}ap[aA.set].push(new af.Vector2(aF.data[az],aF.data[az+1]));break;case"COLOR":au.push(new af.Color().setRGB(aF.data[az],aF.data[az+1],aF.data[az+2]));break;default:break}}}if(aD.vertices==undefined){aD.vertices=[]}if(aD.normals==undefined){aD.normals=[]}for(var aB=0;aB<aH.length;aB++){for(var aM=0;aM<aH[aB].length;aM++){aD.vertices.push(aH[aB][aM])}}for(var aB=0;aB<aO.length;aB++){for(var aM=0;aM<aH[aB].length;aM++){aD.normals.push(aO[aB][aM])}}aK+=ay*aN}}};function C(){this.material="";this.count=0;this.inputs=[];this.vcount=null;this.p=[]}C.prototype.setVertices=function(ap){for(var aq=0;aq<this.inputs.length;aq++){if(this.inputs[aq].source==ap.id){this.inputs[aq].source=ap.input.POSITION.source}}};C.prototype.parse=function(aq){this.material=aq.getAttribute("material");this.count=E(aq,"count",0);for(var ap=0;ap<aq.childNodes.length;ap++){var ar=aq.childNodes[ap];switch(ar.nodeName){case"input":this.inputs.push((new ad()).parse(aq.childNodes[ap]));break;case"vcount":this.vcount=o(ar.textContent);break;case"p":this.p.push(o(ar.textContent));break;case"ph":console.warn("polygon holes not yet supported!");break;default:break}}return this};function K(){C.call(this);this.vcount=[]}K.prototype=Object.create(C.prototype);function G(ap){C.call(this);this.id=ap;this.vcount=3}G.prototype=Object.create(C.prototype);function m(){this.source="";this.count=0;this.stride=0;this.params=[]}m.prototype.parse=function(aq){this.params=[];this.source=aq.getAttribute("source");this.count=E(aq,"count",0);this.stride=E(aq,"stride",0);for(var ap=0;ap<aq.childNodes.length;ap++){var at=aq.childNodes[ap];if(at.nodeName=="param"){var ar={};ar.name=at.getAttribute("name");ar.type=at.getAttribute("type");this.params.push(ar)}}return this};function H(){this.input={}}H.prototype.parse=function(ar){this.id=ar.getAttribute("id");for(var aq=0;aq<ar.childNodes.length;aq++){if(ar.childNodes[aq].nodeName=="input"){var ap=(new ad()).parse(ar.childNodes[aq]);this.input[ap.semantic]=ap}}return this};function ad(){this.semantic="";this.offset=0;this.source="";this.set=0}ad.prototype.parse=function(ap){this.semantic=ap.getAttribute("semantic");this.source=ap.getAttribute("source").replace(/^#/,"");this.set=E(ap,"set",-1);this.offset=E(ap,"offset",0);if(this.semantic=="TEXCOORD"&&this.set<0){this.set=0}return this};function an(ap){this.id=ap;this.type=null}an.prototype.parse=function(ar){this.id=ar.getAttribute("id");for(var aq=0;aq<ar.childNodes.length;aq++){var at=ar.childNodes[aq];switch(at.nodeName){case"bool_array":this.data=x(at.textContent);this.type=at.nodeName;break;case"float_array":this.data=J(at.textContent);this.type=at.nodeName;break;case"int_array":this.data=o(at.textContent);this.type=at.nodeName;break;case"IDREF_array":case"Name_array":this.data=ao(at.textContent);this.type=at.nodeName;break;case"technique_common":for(var ap=0;ap<at.childNodes.length;ap++){if(at.childNodes[ap].nodeName=="accessor"){this.accessor=(new m()).parse(at.childNodes[ap]);break}}break;default:break}}return this};an.prototype.read=function(){var aq=[];var au=this.accessor.params[0];switch(au.type){case"IDREF":case"Name":case"name":case"float":return this.data;case"float4x4":for(var ar=0;ar<this.data.length;ar+=16){var at=this.data.slice(ar,ar+16);var ap=M(at);aq.push(ap)}break;default:console.log("ColladaLoader: Source: Read dont know how to read "+au.type+".");break}return aq};function t(){this.id="";this.name="";this.instance_effect=null}t.prototype.parse=function(aq){this.id=aq.getAttribute("id");this.name=aq.getAttribute("name");for(var ap=0;ap<aq.childNodes.length;ap++){if(aq.childNodes[ap].nodeName=="instance_effect"){this.instance_effect=(new p()).parse(aq.childNodes[ap]);break}}return this};function al(){this.color=new af.Color(0);this.color.setRGB(Math.random(),Math.random(),Math.random());this.color.a=1;this.texture=null;this.texcoord=null;this.texOpts=null}al.prototype.isColor=function(){return(this.texture==null)};al.prototype.isTexture=function(){return(this.texture!=null)};al.prototype.parse=function(ar){for(var aq=0;aq<ar.childNodes.length;aq++){var at=ar.childNodes[aq];if(at.nodeType!=1){continue}switch(at.nodeName){case"color":var ap=J(at.textContent);this.color=new af.Color(0);this.color.setRGB(ap[0],ap[1],ap[2]);this.color.a=ap[3];break;case"texture":this.texture=at.getAttribute("texture");this.texcoord=at.getAttribute("texcoord");this.texOpts={offsetU:0,offsetV:0,repeatU:1,repeatV:1,wrapU:1,wrapV:1,};this.parseTexture(at);break;default:break}}return this};al.prototype.parseTexture=function(aq){if(!aq.childNodes){return this}if(aq.childNodes[1]&&aq.childNodes[1].nodeName==="extra"){aq=aq.childNodes[1];if(aq.childNodes[1]&&aq.childNodes[1].nodeName==="technique"){aq=aq.childNodes[1]}}for(var ap=0;ap<aq.childNodes.length;ap++){var ar=aq.childNodes[ap];switch(ar.nodeName){case"offsetU":case"offsetV":case"repeatU":case"repeatV":this.texOpts[ar.nodeName]=parseFloat(ar.textContent);break;case"wrapU":case"wrapV":this.texOpts[ar.nodeName]=parseInt(ar.textContent);break;default:this.texOpts[ar.nodeName]=ar.textContent;break}}return this};function w(aq,ap){this.type=aq;this.effect=ap;this.material=null}w.prototype.parse=function(aq){for(var ap=0;ap<aq.childNodes.length;ap++){var at=aq.childNodes[ap];if(at.nodeType!=1){continue}switch(at.nodeName){case"ambient":case"emission":case"diffuse":case"specular":case"transparent":case"normal":this[at.nodeName]=(new al()).parse(at);break;case"shininess":case"reflectivity":case"index_of_refraction":case"transparency":var ar=I(at,".//dae:float");if(ar.length>0){this[at.nodeName]=parseFloat(ar[0].textContent)}break;default:break}}this.create();return this};w.prototype.create=function(){var ay={};var aC=(this["transparency"]!==undefined&&this["transparency"]<1);var av=0;var az=null;var aw=null;function aq(){var aD=0,aE=null;if(aw&&aw.numberOfAwaitedTextures){aw.numberOfAwaitedTextures--;if(aw.numberOfAwaitedTextures===0){delete aw.numberOfAwaitedTextures}}}for(var ap in this){switch(ap){case"ambient":case"emission":case"diffuse":case"specular":case"normal":var aB=this[ap];if(aB instanceof al){if(aB.isTexture()){var at=aB.texture;var aA=this.effect.sampler[at].source;if(aA){var ar=this.effect.surface[aA];var au=l.images[ar.init_from];if(au){var ax=af.ImageUtils.loadTexture(e+au.init_from,undefined,aq,null,true);av++;ax.wrapS=aB.texOpts.wrapU?af.RepeatWrapping:af.ClampToEdgeWrapping;ax.wrapT=aB.texOpts.wrapV?af.RepeatWrapping:af.ClampToEdgeWrapping;ax.offset.x=aB.texOpts.offsetU;ax.offset.y=aB.texOpts.offsetV;ax.repeat.x=aB.texOpts.repeatU;ax.repeat.y=aB.texOpts.repeatV;if(ap==="normal"){ay.normalMap=ax}else{ay.map=ax}if(ap==="emission"){ay.emissive=16777215}}}}else{if(ap==="diffuse"||!aC){if(ap==="emission"){ay.emissive=aB.color.getHex()}else{ay[ap]=aB.color.getHex()}}}}break;case"shininess":ay[ap]=this[ap];break;case"reflectivity":ay[ap]=this[ap];if(ay[ap]>0){ay.envMap=A.defaultEnvMap}ay.combine=af.MixOperation;break;case"index_of_refraction":ay.refractionRatio=this[ap];if(this[ap]!==1){ay.envMap=A.defaultEnvMap}break;case"transparency":if(aC){ay.transparent=true;ay.opacity=this[ap];aC=true}break;default:break}}ay.shading=B;ay.side=this.effect.doubleSided?af.DoubleSide:af.FrontSide;switch(this.type){case"constant":if(ay.emissive!=undefined){ay.color=ay.emissive}aw=new af.MeshBasicMaterial(ay);break;case"phong":case"blinn":if(ay.diffuse!=undefined){ay.color=ay.diffuse}aw=new af.MeshPhongMaterial(ay);break;case"lambert":default:if(ay.diffuse!=undefined){ay.color=ay.diffuse}aw=new af.MeshLambertMaterial(ay);break}this.material=aw;return this.material};function N(ap){this.effect=ap;this.init_from=null;this.format=null}N.prototype.parse=function(aq){for(var ap=0;ap<aq.childNodes.length;ap++){var ar=aq.childNodes[ap];if(ar.nodeType!=1){continue}switch(ar.nodeName){case"init_from":this.init_from=ar.textContent;break;case"format":this.format=ar.textContent;break;default:console.log("unhandled Surface prop: "+ar.nodeName);break}}return this};function U(ap){this.effect=ap;this.source=null;this.wrap_s=null;this.wrap_t=null;this.minfilter=null;this.magfilter=null;this.mipfilter=null}U.prototype.parse=function(aq){for(var ap=0;ap<aq.childNodes.length;ap++){var ar=aq.childNodes[ap];if(ar.nodeType!=1){continue}switch(ar.nodeName){case"source":this.source=ar.textContent;break;case"minfilter":this.minfilter=ar.textContent;break;case"magfilter":this.magfilter=ar.textContent;break;case"mipfilter":this.mipfilter=ar.textContent;break;case"wrap_s":this.wrap_s=ar.textContent;break;case"wrap_t":this.wrap_t=ar.textContent;break;default:console.log("unhandled Sampler2D prop: "+ar.nodeName);break}}return this};function q(){this.id="";this.name="";this.shader=null;this.surface={};this.sampler={}}q.prototype.create=function(){if(this.shader==null){return null}};q.prototype.parse=function(aq){this.id=aq.getAttribute("id");this.name=aq.getAttribute("name");f(this,aq);this.shader=null;for(var ap=0;ap<aq.childNodes.length;ap++){var ar=aq.childNodes[ap];if(ar.nodeType!=1){continue}switch(ar.nodeName){case"profile_COMMON":this.parseTechnique(this.parseProfileCOMMON(ar));break;default:break}}return this};q.prototype.parseNewparam=function(ar){var ap=ar.getAttribute("sid");for(var aq=0;aq<ar.childNodes.length;aq++){var at=ar.childNodes[aq];if(at.nodeType!=1){continue}switch(at.nodeName){case"surface":this.surface[ap]=(new N(this)).parse(at);break;case"sampler2D":this.sampler[ap]=(new U(this)).parse(at);break;case"extra":break;default:console.log(at.nodeName);break}}};q.prototype.parseProfileCOMMON=function(ar){var at;for(var aq=0;aq<ar.childNodes.length;aq++){var au=ar.childNodes[aq];if(au.nodeType!=1){continue}switch(au.nodeName){case"profile_COMMON":this.parseProfileCOMMON(au);break;case"technique":at=au;break;case"newparam":this.parseNewparam(au);break;case"image":var ap=(new ak()).parse(au);l.images[ap.id]=ap;break;case"extra":break;default:console.log(au.nodeName);break}}return at};q.prototype.parseTechnique=function(aq){for(var ap=0;ap<aq.childNodes.length;ap++){var ar=aq.childNodes[ap];if(ar.nodeType!=1){continue}switch(ar.nodeName){case"constant":case"lambert":case"blinn":case"phong":this.shader=(new w(ar.nodeName,this)).parse(ar);break;default:break}}};function p(){this.url=""}p.prototype.parse=function(ap){this.url=ap.getAttribute("url").replace(/^#/,"");return this};function s(){this.id="";this.name="";this.source={};this.sampler=[];this.channel=[]}s.prototype.parse=function(ar){this.id=ar.getAttribute("id");this.name=ar.getAttribute("name");this.source={};for(var aq=0;aq<ar.childNodes.length;aq++){var av=ar.childNodes[aq];if(av.nodeType!=1){continue}switch(av.nodeName){case"animation":var at=(new s()).parse(av);for(var au in at.source){this.source[au]=at.source[au]}for(var ap=0;ap<at.channel.length;ap++){this.channel.push(at.channel[ap]);this.sampler.push(at.sampler[ap])}break;case"source":var au=(new an()).parse(av);this.source[au.id]=au;break;case"sampler":this.sampler.push((new Z(this)).parse(av));break;case"channel":this.channel.push((new L(this)).parse(av));break;default:break}}return this};function L(ap){this.animation=ap;this.source="";this.target="";this.fullSid=null;this.sid=null;this.dotSyntax=null;this.arrSyntax=null;this.arrIndices=null;this.member=null}L.prototype.parse=function(ar){this.source=ar.getAttribute("source").replace(/^#/,"");this.target=ar.getAttribute("target");var au=this.target.split("/");var ax=au.shift();var ap=au.shift();var aw=(ap.indexOf(".")>=0);var at=(ap.indexOf("(")>=0);if(aw){au=ap.split(".");this.sid=au.shift();this.member=au.shift()}else{if(at){var av=ap.split("(");this.sid=av.shift();for(var aq=0;aq<av.length;aq++){av[aq]=parseInt(av[aq].replace(/\)/,""))}this.arrIndices=av}else{this.sid=ap}}this.fullSid=ap;this.dotSyntax=aw;this.arrSyntax=at;return this};function Z(ap){this.id="";this.animation=ap;this.inputs=[];this.input=null;this.output=null;this.strideOut=null;this.interpolation=null;this.startTime=null;this.endTime=null;this.duration=0}Z.prototype.parse=function(aq){this.id=aq.getAttribute("id");this.inputs=[];for(var ap=0;ap<aq.childNodes.length;ap++){var ar=aq.childNodes[ap];if(ar.nodeType!=1){continue}switch(ar.nodeName){case"input":this.inputs.push((new ad()).parse(ar));break;default:break}}return this};Z.prototype.create=function(){for(var aq=0;aq<this.inputs.length;aq++){var ap=this.inputs[aq];var ar=this.animation.source[ap.source];switch(ap.semantic){case"INPUT":this.input=ar.read();break;case"OUTPUT":this.output=ar.read();this.strideOut=ar.accessor.stride;break;case"INTERPOLATION":this.interpolation=ar.read();break;case"IN_TANGENT":break;case"OUT_TANGENT":break;default:console.log(ap.semantic);break}}this.startTime=0;this.endTime=0;this.duration=0;if(this.input.length){this.startTime=100000000;this.endTime=-100000000;for(var aq=0;aq<this.input.length;aq++){this.startTime=Math.min(this.startTime,this.input[aq]);this.endTime=Math.max(this.endTime,this.input[aq])}this.duration=this.endTime-this.startTime}};Z.prototype.getData=function(ar,ap){var at;if(ar==="matrix"&&this.strideOut===16){at=this.output[ap]}else{if(this.strideOut>1){at=[];ap*=this.strideOut;for(var aq=0;aq<this.strideOut;++aq){at[aq]=this.output[ap+aq]}if(this.strideOut===3){switch(ar){case"rotate":case"translate":R(at,-1);break;case"scale":R(at,1);break}}else{if(this.strideOut===4&&ar==="matrix"){R(at,-1)}}}else{at=this.output[ap]}}return at};function c(ap){this.targets=[];this.time=ap}c.prototype.addTarget=function(at,ap,ar,aq){this.targets.push({sid:at,member:ar,transform:ap,data:aq})};c.prototype.apply=function(ap){for(var aq=0;aq<this.targets.length;++aq){var ar=this.targets[aq];if(!ap||ar.sid===ap){ar.transform.update(ar.data,ar.member)}}};c.prototype.getTarget=function(aq){for(var ap=0;ap<this.targets.length;++ap){if(this.targets[ap].sid===aq){return this.targets[ap]}}return null};c.prototype.hasTarget=function(aq){for(var ap=0;ap<this.targets.length;++ap){if(this.targets[ap].sid===aq){return true}}return false};c.prototype.interpolate=function(az,ar){for(var aw=0;aw<this.targets.length;++aw){var ay=this.targets[aw],ap=az.getTarget(ay.sid),av;if(ay.transform.type!=="matrix"&&ap){var at=(ar-this.time)/(az.time-this.time),ax=ap.data,aq=ay.data;if(at<0||at>1){console.log("Key.interpolate: Warning! Scale out of bounds:"+at);at=at<0?0:1}if(aq.length){av=[];for(var au=0;au<aq.length;++au){av[au]=aq[au]+(ax[au]-aq[au])*at}}else{av=aq+(ax-aq)*at}}else{av=ay.data}ay.transform.update(av,ay.member)}};function ah(){this.id="";this.name="";this.technique=""}ah.prototype.parse=function(aq){this.id=aq.getAttribute("id");this.name=aq.getAttribute("name");for(var ap=0;ap<aq.childNodes.length;ap++){var ar=aq.childNodes[ap];if(ar.nodeType!=1){continue}switch(ar.nodeName){case"optics":this.parseOptics(ar);break;default:break}}return this};ah.prototype.parseOptics=function(au){for(var at=0;at<au.childNodes.length;at++){if(au.childNodes[at].nodeName=="technique_common"){var aw=au.childNodes[at];for(var ar=0;ar<aw.childNodes.length;ar++){this.technique=aw.childNodes[ar].nodeName;if(this.technique=="perspective"){var av=aw.childNodes[ar];for(var ap=0;ap<av.childNodes.length;ap++){var ax=av.childNodes[ap];switch(ax.nodeName){case"yfov":this.yfov=ax.textContent;break;case"xfov":this.xfov=ax.textContent;break;case"znear":this.znear=ax.textContent;break;case"zfar":this.zfar=ax.textContent;break;case"aspect_ratio":this.aspect_ratio=ax.textContent;break}}}else{if(this.technique=="orthographic"){var aq=aw.childNodes[ar];for(var ap=0;ap<aq.childNodes.length;ap++){var ax=aq.childNodes[ap];switch(ax.nodeName){case"xmag":this.xmag=ax.textContent;break;case"ymag":this.ymag=ax.textContent;break;case"znear":this.znear=ax.textContent;break;case"zfar":this.zfar=ax.textContent;break;case"aspect_ratio":this.aspect_ratio=ax.textContent;break}}}}}}}return this};function ag(){this.url=""}ag.prototype.parse=function(ap){this.url=ap.getAttribute("url").replace(/^#/,"");return this};function P(ap){var aq=ap.getAttribute("id");if(X[aq]!=undefined){return X[aq]}X[aq]=(new an(aq)).parse(ap);return X[aq]}function z(ap){if(ap=="dae"){return"http://www.collada.org/2005/11/COLLADASchema"}return null}function x(au){var aq=ao(au);var at=[];for(var ar=0,ap=aq.length;ar<ap;ar++){at.push((aq[ar]=="true"||aq[ar]=="1")?true:false)}return at}function J(au){var aq=ao(au);var at=[];for(var ar=0,ap=aq.length;ar<ap;ar++){at.push(parseFloat(aq[ar]))}return at}function o(au){var aq=ao(au);var at=[];for(var ar=0,ap=aq.length;ar<ap;ar++){at.push(parseInt(aq[ar],10))}return at}function ao(ap){return(ap.length>0)?u(ap).split(/\s+/):[]}function u(ap){return ap.replace(/^\s+/,"").replace(/\s+$/,"")}function g(ar,aq,ap){if(ar.hasAttribute(aq)){return parseFloat(ar.getAttribute(aq))}else{return ap}}function E(ar,aq,ap){if(ar.hasAttribute(aq)){return parseInt(ar.getAttribute(aq),10)}else{return ap}}function a(ar,aq,ap){if(ar.hasAttribute(aq)){return ar.getAttribute(aq)}else{return ap}}function Y(ar,ap){if(ar===undefined){var aq="0.";while(aq.length<ap+2){aq+="0"}return aq}ap=ap||2;var at=ar.toString().split(".");at[1]=at.length>1?at[1].substr(0,ap):"0";while(at[1].length<ap){at[1]+="0"}return at.join(".")}function I(aq,at){var au=l.COLLADA.evaluate(at,aq,z,XPathResult.ORDERED_NODE_ITERATOR_TYPE,null);var ar=au.iterateNext();var ap=[];while(ar){ap.push(ar);ar=au.iterateNext()}return ap}function f(ar,ap){ar.doubleSided=false;var aq=l.COLLADA.evaluate(".//dae:extra//dae:double_sided",ap,z,XPathResult.ORDERED_NODE_ITERATOR_TYPE,null);if(aq){aq=aq.iterateNext();if(aq&&parseInt(aq.textContent,10)===1){ar.doubleSided=true}}}function V(){if(!A.convertUpAxis||i===A.upAxis){Q=null}else{switch(i){case"X":Q=A.upAxis==="Y"?"XtoY":"XtoZ";break;case"Y":Q=A.upAxis==="X"?"YtoX":"YtoZ";break;case"Z":Q=A.upAxis==="X"?"ZtoX":"ZtoY";break}}}function R(ar,ap){if(!A.convertUpAxis||i===A.upAxis){return}switch(Q){case"XtoY":var aq=ar[0];ar[0]=ap*ar[1];ar[1]=aq;break;case"XtoZ":var aq=ar[2];ar[2]=ar[1];ar[1]=ar[0];ar[0]=aq;break;case"YtoX":var aq=ar[0];ar[0]=ar[1];ar[1]=ap*aq;break;case"YtoZ":var aq=ar[1];ar[1]=ap*ar[2];ar[2]=aq;break;case"ZtoX":var aq=ar[0];ar[0]=ar[1];ar[1]=ar[2];ar[2]=aq;break;case"ZtoY":var aq=ar[1];ar[1]=ar[2];ar[2]=ap*aq;break}}function v(aq,ar){var ap=[aq[ar],aq[ar+1],aq[ar+2]];R(ap,-1);return ap}function M(aq){if(A.convertUpAxis){var ap=[aq[0],aq[4],aq[8]];R(ap,-1);aq[0]=ap[0];aq[4]=ap[1];aq[8]=ap[2];ap=[aq[1],aq[5],aq[9]];R(ap,-1);aq[1]=ap[0];aq[5]=ap[1];aq[9]=ap[2];ap=[aq[2],aq[6],aq[10]];R(ap,-1);aq[2]=ap[0];aq[6]=ap[1];aq[10]=ap[2];ap=[aq[0],aq[1],aq[2]];R(ap,-1);aq[0]=ap[0];aq[1]=ap[1];aq[2]=ap[2];ap=[aq[4],aq[5],aq[6]];R(ap,-1);aq[4]=ap[0];aq[5]=ap[1];aq[6]=ap[2];ap=[aq[8],aq[9],aq[10]];R(ap,-1);aq[8]=ap[0];aq[9]=ap[1];aq[10]=ap[2];ap=[aq[3],aq[7],aq[11]];R(ap,-1);aq[3]=ap[0];aq[7]=ap[1];aq[11]=ap[2]}return new af.Matrix4(aq[0],aq[1],aq[2],aq[3],aq[4],aq[5],aq[6],aq[7],aq[8],aq[9],aq[10],aq[11],aq[12],aq[13],aq[14],aq[15])}function D(ap){return l.COLLADA.evaluate(".//dae:library_nodes//dae:node[@id='"+ap+"']",l.COLLADA,z,XPathResult.ORDERED_NODE_ITERATOR_TYPE,null).iterateNext()}function b(ar){var av=[];var aq=1000000;var aw=-1000000;for(var ap in l.animations){var at=l.animations[ap];for(var au=0;au<at.channel.length;au++){var ax=at.channel[au];var ay=at.sampler[au];var ap=ax.target.split("/")[0];if(ap==ar.id){ay.create();ax.sampler=ay;aq=Math.min(aq,ay.startTime);aw=Math.max(aw,ay.endTime);av.push(ax)}}}if(av.length){ar.startTime=aq;ar.endTime=aw}return av}function F(aA){if(aA.channels&&aA.channels.length){var ay=[],aE=[];for(var aC=0,av=aA.channels.length;aC<av;aC++){var aH=aA.channels[aC],ap=aH.fullSid,az=aH.sampler,aw=az.input,ax=aA.getTransformBySid(aH.sid),aq;if(aH.arrIndices){aq=[];for(var aB=0,aD=aH.arrIndices.length;aB<aD;aB++){aq[aB]=getConvertedIndex(aH.arrIndices[aB])}}else{aq=getConvertedMember(aH.member)}if(ax){if(aE.indexOf(ap)===-1){aE.push(ap)}for(var aB=0,aD=aw.length;aB<aD;aB++){var au=aw[aB],aF=az.getData(ax.type,aB),aG=findKey(ay,au);if(!aG){aG=new c(au);var at=findTimeNdx(ay,au);ay.splice(at==-1?ay.length:at,0,aG)}aG.addTarget(ap,ax,aq,aF)}}else{console.log('Could not find transform "'+aH.sid+'" in node '+aA.id)}}for(var aC=0;aC<aE.length;aC++){var ar=aE[aC];for(var aB=0;aB<ay.length;aB++){var aG=ay[aB];if(!aG.hasTarget(ar)){interpolateKeys(ay,aG,aB,ar)}}}aA.keys=ay;aA.sids=aE}}var d=ac.extend(function d(){l=this;this.COLLADA=null;this.images=[];this.materials=[];this.effects=[];this.geometries=[];this.cameras=[];this.controllers=[];this.animations=[];this.visualScenes=[]},{close:function(){},getGeomRep:function(ap){throw"Error: not implemented method"},getInstanceList:function(ap){throw"Error: not implemented method"},getReferencedFiles:function(){throw"Error: not implemented method"},getReferenceName:function(ap){throw"Error: not implemented method"},getRepresentation:function(au){var ar;if(au===S.XCAD_PRODUCT_REPRESENTATION){ar=new h(this,S.XCAD_PRODUCT_REPRESENTATION,"root");var at=this.COLLADA.evaluate(".//dae:scene/dae:instance_visual_scene",this.COLLADA,z,XPathResult.ORDERED_NODE_ITERATOR_TYPE,null).iterateNext();if(at){var aq=at.getAttribute("url").replace(/^#/,"");var av=this.visualScenes[aq.length>0?aq:"visual_scene0"];var ap=new aj(this,av);ar.addRootProduct(ap)}}else{if(au===S.XCAD_TESSELLATED_REPRESENTATION){if(this._internalRepresentationIndex!==undefined&&this.geometries[this._internalRepresentationIndex].mesh.primitives.length!=0){ar=new ab(this)}}}return ar},getRepresentationType:function(ap){throw"Error: not implemented method"},getTransformation:function(ap){throw"Error: not implemented method"},getRootProducts:function(){throw"Error: not implemented method"},initialize:function(ap){if(ap===""){return}if(typeof(ap)=="string"){var ar=new DOMParser();var aq=ar.parseFromString(ap,"application/xml");l.COLLADA=aq}else{l.COLLADA=ap}au();V();this.images=at("//dae:library_images/dae:image",ak,"image");this.materials=at("//dae:library_materials/dae:material",t,"material");this.effects=at("//dae:library_effects/dae:effect",q,"effect");this.geometries=at("//dae:library_geometries/dae:geometry",ae,"geometry");this.cameras=at(".//dae:library_cameras/dae:camera",ah,"camera");this.controllers=at("//dae:library_controllers/dae:controller",j,"controller");this.animations=at("//dae:library_animations/dae:animation",s,"animation");this.visualScenes=at(".//dae:library_visual_scenes/dae:visual_scene",aa,"visual_scene");return;function au(){var ay=l.COLLADA.evaluate("//dae:asset",l.COLLADA,z,XPathResult.ORDERED_NODE_ITERATOR_TYPE,null);var aw=ay.iterateNext();if(aw&&aw.childNodes){for(var av=0;av<aw.childNodes.length;av++){var az=aw.childNodes[av];switch(az.nodeName){case"unit":var ax=az.getAttribute("meter");if(ax){W=parseFloat(ax)}break;case"up_axis":i=az.textContent.charAt(0);break}}}}function at(aB,ay,aA){var az=l.COLLADA.evaluate(aB,l.COLLADA,z,XPathResult.ORDERED_NODE_ITERATOR_TYPE,null);var aC={};var ax=az.iterateNext();var aw=0;while(ax){var av=(new ay()).parse(ax);if(!av.id||av.id.length==0){av.id=aA+(aw++)}aC[av.id]=av;ax=az.iterateNext()}return aC}}});return d});