define("DS/Frame3DXInfra/Frame3DXController",["UWA/Class","UWA/Core","DS/PlatformAPI/PlatformAPI","DS/Logger/Logger","DS/PubSub/PubSub"],function(j,g,h,b,l){var i=null;var d=null;var e=null;var c=null;var a={};var k=undefined;var f=j.singleton({init:function(m){if(!g.is(m.container,"element")||!g.is(m.open,"function")||!g.is(m.close,"function")){b.error("Frame3DXController ...... Initialze failure \n\t container = "+m.container+", open = "+m.open+", close = "+m.close);return}d=m.container;e=m.open;c=m.close;h.subscribe("Frame3DXInfra.Update",this._onUpdate.bind(this));h.subscribe("Frame3DXInfra.Open",this._onOpen.bind(this));h.subscribe("Frame3DXInfra.Close",this._onClose.bind(this));l.add("onViewChange",this._onViewChange.bind(this));require(["DS/TopFrame/TopFrame"],function(n){i=n;i._frame.addEvent("onPanelClose",function(o){h.publish("Frame3DXInfra.onPanelClose",o)})},function(n){})},_onUpdate:function(o){var m="";var n=o.type;switch(n){case"Filter":m="DS/ENONextGenFilterUX/views/FilterViewManager";break;case"Tagger":break;case"AdvSearch":break;default:b.error("Frame3DXController ...... Invalid requested module: "+n)}if(""!==m){require([m],function(t){var p=o.options;p.display=o.display?o.display:true;var u=m;var r=null;var v=null;if(a[u]){r=a[u];v=r.get3DXView(p)}else{r=new t(p);if(g.is(r.get3DXView,"function")){a[u]=r;v=r.get3DXView(p)}else{b.error("Frame3DXController ...... get3DXView() function is not implemented !")}}if(v){var s=(g.is(v.get3DXViewId,"function"))?v.get3DXViewId():v.cid;if(k!==s||undefined===s){var q=d;if(undefined!==q){while(q.hasChildNodes()){q.removeChild(q.lastChild)}}v.inject(d);k=s}}},function(p){b.error("Frame3DXController ...... Error on required module"+p)})}},_onOpen:function(o){var n=o.id||"Unknown";if(i){var m=i._isDataFilterPanelVisible;if(!m||!this._openerId){e()}else{if(this._openerId===n){c()}}this._openerId=n}},_onClose:function(){c();this._openerId=undefined},_onViewChange:function(m){h.publish("Frame3DXInfra.ViewChange",m)}});return f});