define("DS/MPFSortSelector/SortSelectorEntry",["UWA/Core","UWA/Class/View","DS/MPFSort/SortOrder","DS/MPFSort/SortDirection"],function(f,e,c,b){var d;var a="mpf-selected";d=e.extend({tagName:"li",className:"mpf-sort-selector-entry",setup:function(g){this.name=g.name;this.label=g.label;this.eventName=g.eventName;this.sortOrder=g.order||c.ALPHA_NUMERICAL;this.sortDirection=g.selected||b.UNSORTED;this.sortLabel=this._createSortLabel();this.ascSortButton=this._createAscSortButton();this.descSortButton=this._createDescSortButton()},render:function(){this.container.setContent([this.sortLabel,this.ascSortButton,this.descSortButton]);return this},destroy:function(){this._parent()},setSelectedSortDirection:function(g){this.sortDirection=g;switch(g){case b.ASCENDING:this.ascSortButton.addClassName(a);this.descSortButton.removeClassName(a);break;case b.DESCENDING:this.ascSortButton.removeClassName(a);this.descSortButton.addClassName(a);break;default:this.ascSortButton.removeClassName(a);this.descSortButton.removeClassName(a);break}},_createSortLabel:function(){return f.createElement("span",{"class":"mpf-label",text:this.label})},_createAscSortButton:function(){var g=["fonticon"];if(this.sortOrder===c.ALPHA_NUMERICAL){g.push("fonticon-sort-alpha-asc")}else{if(this.sortOrder===c.NUMERICAL){g.push("fonticon-sort-num-asc ")}}if(this.sortDirection===b.ASCENDING){g.push(a)}return f.createElement("div",{"class":g.join(" "),events:{click:this.dispatchEvent.bind(this,this.eventName,{sort:this.name,direction:b.ASCENDING})}})},_createDescSortButton:function(){var g=["fonticon"];if(this.sortOrder===c.ALPHA_NUMERICAL){g.push("fonticon-sort-alpha-desc")}else{if(this.sortOrder===c.NUMERICAL){g.push("fonticon-sort-num-desc")}}if(this.sortDirection===b.DESCENDING){g.push(a)}return f.createElement("div",{"class":g.join(" "),events:{click:this.dispatchEvent.bind(this,this.eventName,{sort:this.name,direction:b.DESCENDING})}})}});return d});define("DS/MPFSortSelector/SortSelector",["UWA/Core","UWA/Event","UWA/Class/View","DS/MPFSortSelector/SortSelectorEntry","DS/MPFSort/SortDirection","DS/MPFUtils/MPFUtils","i18n!DS/MPFSortSelector/assets/nls/SortSelector","css!DS/MPFSortSelector/MPFSortSelector"],function(g,h,b,a,f,e,c){var d;var i={};i.SORT="sort";d=b.extend({className:"mpf-sort-selector",setup:function(j){this.eventName=j.eventName||i.SORT;this.entryOptions=j.entries;this.selectedSort=this._getSelectedSort();this.selector=this._createSelector();this.menuEntries=this._createMenuEntries();this.menu=this._createMenu();this._listenToMenu();this._onClickOutside=this._close.bind(this);g.extendElement(document.body).addEvent("click",this._onClickOutside);this.container.addEvent("click",this._captureClick)},render:function(){this.container.setContent([this.selector,this.menu]);this.menuEntries.forEach(function(j){j.render()});return this},destroy:function(){this.menuEntries.forEach(function(j){this.stopListening(j)},this);g.extendElement(document.body).removeEvent("click",this._onClickOutside);this.container.removeEvent("click",this._captureClick);this._parent()},_captureClick:function(j){h.stopPropagation(j)},_createSelector:function(){return g.createElement("div",{"class":"mpf-selector",html:[{"class":"mpf-active-sort",html:[{"class":"mpf-sort-label",text:c.get("sortedBy",{name:this.selectedSort.label})}]},{"class":"mpf-open-button fonticon fonticon-expand-down"}],events:{click:this._onClickSelector.bind(this)}})},_onClickSelector:function(){this.container.toggleClassName("mpf-open")},_close:function(){this.container.removeClassName("mpf-open")},_getSelectedSort:function(){return e.findInArray(this.entryOptions,function(j){return j.selected})},_createMenu:function(){return g.createElement("ul",{"class":"mpf-sort-selector-menu",html:this.menuEntries})},_createMenuEntries:function(){var j="mpf-sort-selector-entry ";return this.entryOptions.map(function(k){k.eventName=this.eventName;k.className=j+k.name;return new a(k)},this)},_listenToMenu:function(){this.menuEntries.forEach(function(j){this.listenTo(j,this.eventName,this.onSort.bind(this,j))},this)},onSort:function(l,k){var j;this.menuEntries.forEach(function(m){if(m===l){m.setSelectedSortDirection(k.direction)}else{m.setSelectedSortDirection(f.UNSORTED)}},this);j=this._getSelectedMenuEntry();this.getElement(".mpf-sort-label").setText(c.get("sortedBy",{name:j.label}));this.dispatchEvent(this.eventName,k);this._close()},_getSelectedMenuEntry:function(){return e.findInArray(this.menuEntries,function(j){return j.sortDirection!==f.UNSORTED})}});d.Events=Object.freeze(i);return d});