define("DS/CfgEffectivityUX/facets/EffectivityFacet",["UWA/Core","DS/EditPropWidget/facets/Common/FacetsBase","DS/EditPropWidget/constants/EditPropConstants","UWA/Class/Model","DS/UIKIT/Mask"],function(f,d,b,c,e){var a=d.extend({init:function(){this._parent.apply(this,arguments);if(!this.elements.container){this.elements.container=f.createElement("div",{styles:{height:"100%"}})}},updateFacet:function(){var g=this;e.mask(this.elements.container);require(["DS/CfgEffectivityUX/scripts/CfgEffectivityView","DS/CfgBaseUX/scripts/CfgController"],function(m,i){if(g.elements&&g.elements.container){var l=g.getModel();var k=g.getOccurrence();var j=k._attributes.Effectivity.options.targets[0].id;var h=k._attributes._Model_init.model._attributes.tenant;if(!l){return false}i.init(null,"","3DDashboard");g.elements.container.setContent("");m.displayEffectivity(g.elements.container,j,h)}})},destroyComponent:function(){if(f.is(this.destroy,"function")){this.destroy()}}});return a});define("DS/CfgEffectivityUX/scripts/CfgEffectivityUtility",["DS/CfgBaseUX/scripts/CfgUtility"],function(a){var b={getEffectivityJSON:function(d){var c=d.InstanceID;var e=d.InstanceLength;var g=d.Version;var f=d.TargetFormat;var j=d.View;var i=d.Domains;var h=new Promise(function(q,p){var o={version:g,output:{targetFormat:f,view:j,domains:i},pidList:"["+c+"]"};var m="/resources/modeler/configuration/navigationServices/getMultipleFilterableObjectInfo";var n=JSON.stringify(o);var k=function(r){q(r)};var l=600000;if(e!=null||e!=undefined){if(e<=100){l=60000}else{if(e>=100&&e<=500){l=900000}else{if(e>=500&&e<=5000){l=30000000}else{if(e>=5000&&e<=50000){l=600000000}else{if(e>=50000){l=3000000000}}}}}}a.makeWSCall(m,"POST","enovia","application/json",n,k,p,true,null,l)});return h}};return b});define("DS/CfgEffectivityUX/scripts/CfgEffectivityView",["UWA/Core","UWA/Class","DS/PlatformAPI/PlatformAPI","DS/UIKIT/Alert","UWA/Controls/Popup","css!DS/CfgEffectivityUX/CfgEffectivityUX","DS/CfgEvolutionUX/CfgFilterView","DS/CfgEffectivityUX/scripts/CfgEffectivityUtility","i18n!DS/CfgEffectivityUX/assets/nls/CfgEffectivityNLS","DS/CfgBaseUX/scripts/CfgUtility","DS/UIKIT/Mask"],function(f,a,i,d,l,e,h,g,k,j,c){var b={displayEffectivity:function(s,u,o){this.renderDiv=s;this.instanceId=u;this.ofcExpression="";this.projExpression="";var q=this;window.enoviaServerEffectivityWidget={instanceIDcheck:this.instanceId,ofcExpression:this.ofcExpression,projExpression:this.projExpression};var n=document.querySelector("#mainContainer");if(!n){this.MainContainer=new UWA.Element("div",{id:"mainContainer",styles:{width:"100%",height:"100%"}});this.viewPanel=new UWA.Element("div",{className:"filter-dialog-viewpanel",id:"viewPanel",styles:{"float":"right",display:"table-row"}});this.evolutionHeaderDiv=new UWA.Element("div",{id:"evolutionHeaderDiv",html:"<h5>"+k.CFG_Label_Evolution+"</h5>",styles:{display:"table-row"}});this.evolutionContainer=new UWA.Element("div",{id:"evolutionContainer",styles:{width:"100%","float":"left",display:"table-row","margin-bottom":"20px"}});this.variantHeaderDiv=new UWA.Element("div",{id:"variantHeaderDiv",html:"<h5>"+k.CFG_Label_Variant+"</h5>",styles:{}});this.variantContainer=new UWA.Element("div",{id:"variantContainer",styles:{width:"100%",display:"table-row","float":"left",overflow:"auto","margin-top":"10px"}});var r={};r.parentElement=this.viewPanel;var m=new h(r);this.MainContainer.appendChild(this.viewPanel);enoviaServerFilterWidget.tenant=o;var v={InstanceID:q.instanceId,InstanceLength:1,Version:"1.0",TargetFormat:"TXT",View:"ALL",Domains:"ALL"};j.populate3DSpaceURLApplicability().then(function(w){j.populateSecurityContext().then(function(x){g.getEffectivityJSON(v).then(function(D){var z=document.querySelector("#variantContainer");var y=document.querySelector("#evolutionContainer");var H=document.querySelector("#variantHeaderDiv");var E=document.querySelector("#evolutionHeaderDiv");var A=document.querySelector("#prjView");var F=document.querySelector("#ofcView");var B=enoviaServerEffectivityWidget.instanceIDcheck;var C=D.expressions;var G="";var I="";if(C[B].status==="ERROR"){j.showwarning(k.CFG_Service_Fail,"error");return Promise.reject(D)}if(C[B].hasEffectivity==="YES"){if((C[B].content.Variant!=null)){H.style.visibility="visible";E.style.visibility="visible";z.style.visibility="visible";G=C[B].content.Variant}else{G=k.CFG_Blank_VariantExpr}if((C[B].content.Evolution!=null)){H.style.visibility="visible";E.style.visibility="visible";z.style.visibility="visible";if((C[B].content.Evolution.Current!=null)){I=C[B].content.Evolution.Current;enoviaServerEffectivityWidget.ofcExpression=C[B].content.Evolution.Current;y.innerText=enoviaServerEffectivityWidget.ofcExpression}else{y.innerText=k.CFG_Blank_EvolutionExpr;enoviaServerEffectivityWidget.ofcExpression=k.CFG_Blank_EvolutionExpr}if((C[B].content.Evolution.Projected!=null)){I=C[B].content.Evolution.Projected;enoviaServerEffectivityWidget.projExpression=C[B].content.Evolution.Projected}else{y.innerText=k.CFG_Blank_EvolutionExpr;enoviaServerEffectivityWidget.projExpression=k.CFG_Blank_EvolutionExpr}}else{y.innerText=k.CFG_Blank_EvolutionExpr}if((C[B].content.ConfigChange!=null)){if((C[B].content.ConfigChange.Current!=null)){I=C[B].content.ConfigChange.Current;enoviaServerEffectivityWidget.ofcExpression=C[B].content.ConfigChange.Current;y.innerText=enoviaServerEffectivityWidget.ofcExpression}else{y.innerText=k.CFG_Blank_EvolutionExpr;enoviaServerEffectivityWidget.ofcExpression=k.CFG_Blank_EvolutionExpr}if((C[B].content.ConfigChange.Projected!=null)){I=C[B].content.ConfigChange.Projected;enoviaServerEffectivityWidget.projExpression=C[B].content.ConfigChange.Projected}else{y.innerText=k.CFG_Blank_EvolutionExpr;enoviaServerEffectivityWidget.projExpression=k.CFG_Blank_EvolutionExpr}}z.innerText=G}if(C[B].hasEffectivity==="NO"){H.style.visibility="visible";E.style.visibility="visible";z.style.visibility="visible";y.innerText=k.CFG_Valid_EvolutionExpr;z.innerText=k.CFG_Valid_VariantExpr;enoviaServerEffectivityWidget.projExpression=k.CFG_Valid_EvolutionExpr;enoviaServerEffectivityWidget.ofcExpression=k.CFG_Valid_EvolutionExpr}c.unmask(q.renderDiv)},function(y){console.log(y);return Promise.reject(y)})},function(x){return Promise.reject(x)})},function(w){return Promise.reject(w)});this.MainContainer.appendChild(this.evolutionHeaderDiv);this.MainContainer.appendChild(this.evolutionContainer);this.MainContainer.appendChild(this.variantHeaderDiv);this.MainContainer.appendChild(this.variantContainer);this.renderDiv.appendChild(this.MainContainer);this.variantHeaderDiv.style.visibility="hidden";this.evolutionHeaderDiv.style.visibility="hidden";this.variantContainer.style.visibility="hidden";var p=document.querySelector("#prjView");if(p){p.addEventListener("click",function(){var w=document.querySelector("#evolutionContainer");w.innerText=enoviaServerEffectivityWidget.projExpression})}var t=document.querySelector("#ofcView");if(t){t.addEventListener("click",function(){var w=document.querySelector("#evolutionContainer");w.innerText=enoviaServerEffectivityWidget.ofcExpression})}}else{c.unmask(q.renderDiv)}}};return b});define("DS/CfgEffectivityUX/scripts/CfgEffectivityColumns",["UWA/Core","UWA/Class","DS/UIKIT/Spinner","DS/Utilities/Dom","DS/CfgEffectivityUX/scripts/CfgEffectivityUtility","i18n!DS/CfgEffectivityUX/assets/nls/CfgEffectivityNLS","DS/CfgBaseUX/scripts/CfgController","DS/CfgBaseUX/scripts/CfgUtility","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices"],function(j,b,g,a,l,i,k,m,d){var c="E";var f=false;function h(){var n=function(o){if(f){if(o.isCHGRoleAvail==true){c="EE";e._columnDataIndex=["Effectivity","VariantEffectivity","CurrentEvolutionEffectivity","ProjectedEvolutionEffectivity"];e._columnDef={Effectivity:{dataIndex:"Effectivity",text:i.CFG_EFFECTIVITY_HEADER,width:100,minWidth:80,maxWidth:200,isHidden:true,onCellRequest:function(q){if(!q.isHeader){if(q.cellModel.options.value){var p=q.cellView.reuseCellContent("effecivity_col_value");if(p){p.innerText=q.cellModel.options.value}}else{q.cellView.reuseCellContent("effecivity_col_colloader")}}},xnav_options:{layout:{width:100,minWidth:80,maxWidth:200,removable:true,hidden:true},exportable:{lock:false,value:true}}},VariantEffectivity:{dataIndex:"VariantEffectivity",text:i.CFG_VARIANT_HEADER,width:300,minWidth:200,maxWidth:500,isHidden:true,onCellRequest:function(q){if(!q.isHeader){if(q.cellModel.options.value){var p=q.cellView.reuseCellContent("variant_effecivity_col_value");if(p){p.innerText=q.cellModel.options.value}}else{q.cellView.reuseCellContent("variant_effecivity_col_colloader")}}},xnav_options:{layout:{width:300,minWidth:200,maxWidth:500,removable:true,hidden:true},exportable:{lock:false,value:true}}},CurrentEvolutionEffectivity:{dataIndex:"CurrentEvolutionEffectivity",text:i.CFG_CURRENT_EVOLUTION_HEADER,width:300,minWidth:200,maxWidth:500,isHidden:true,onCellRequest:function(q){if(!q.isHeader){if(q.cellModel.options.value){var p=q.cellView.reuseCellContent("current_evolution_effecivity_col_value");if(p){p.innerText=q.cellModel.options.value}}else{q.cellView.reuseCellContent("current_evolution_effecivity_col_colloader")}}},xnav_options:{layout:{width:300,minWidth:200,maxWidth:500,removable:true,hidden:true},exportable:{lock:false,value:true}}},ProjectedEvolutionEffectivity:{dataIndex:"ProjectedEvolutionEffectivity",text:i.CFG_PROJECTED_EVOLUTION_HEADER,width:300,minWidth:200,maxWidth:500,isHidden:true,onCellRequest:function(q){if(!q.isHeader){if(q.cellModel.options.value){var p=q.cellView.reuseCellContent("projected_evolution_effecivity_col_value");if(p){p.innerText=q.cellModel.options.value}}else{q.cellView.reuseCellContent("projected_evolution_effecivity_col_colloader")}}},xnav_options:{layout:{width:300,minWidth:200,maxWidth:500,removable:true,hidden:true},exportable:{lock:false,value:true}}}}}else{if(o.isCFGRoleAvail==true||o.isCSVRoleAvail==true){c="VE";e._columnDataIndex=["Effectivity","VariantEffectivity","EvolutionEffectivity"];e._columnDef={Effectivity:{dataIndex:"Effectivity",text:i.CFG_EFFECTIVITY_HEADER,width:100,minWidth:80,maxWidth:200,isHidden:true,onCellRequest:function(q){if(!q.isHeader){if(q.cellModel.options.value){var p=q.cellView.reuseCellContent("effecivity_col_value");if(p){p.innerText=q.cellModel.options.value}}else{q.cellView.reuseCellContent("effecivity_col_colloader")}}},xnav_options:{layout:{width:100,minWidth:80,maxWidth:200,removable:true,hidden:true},exportable:{lock:false,value:true}}},VariantEffectivity:{dataIndex:"VariantEffectivity",text:i.CFG_VARIANT_HEADER,width:300,minWidth:200,maxWidth:500,isHidden:true,onCellRequest:function(q){if(!q.isHeader){if(q.cellModel.options.value){var p=q.cellView.reuseCellContent("variant_effecivity_col_value");if(p){p.innerText=q.cellModel.options.value}}else{q.cellView.reuseCellContent("variant_effecivity_col_colloader")}}},xnav_options:{layout:{width:300,minWidth:200,maxWidth:500,removable:true,hidden:true},exportable:{lock:false,value:true}}},EvolutionEffectivity:{dataIndex:"EvolutionEffectivity",text:i.CFG_EVOLUTION_HEADER,width:300,minWidth:200,maxWidth:500,isHidden:true,onCellRequest:function(q){if(!q.isHeader){if(q.cellModel.options.value){var p=q.cellView.reuseCellContent("evolution_effecivity_col_value");if(p){p.innerText=q.cellModel.options.value}}else{q.cellView.reuseCellContent("evolution_effecivity_col_colloader")}}},xnav_options:{layout:{width:300,minWidth:200,maxWidth:500,removable:true,hidden:true},exportable:{lock:false,value:true}}}}}}}};m.rolesAvailable(n)}var e=b.singleton({_columnDataIndex:["Effectivity"],_columnDef:{Effectivity:{dataIndex:"Effectivity",text:i.CFG_EFFECTIVITY_HEADER,width:100,minWidth:80,maxWidth:200,isHidden:true,onCellRequest:function(o){if(!o.isHeader){if(o.cellModel.options.value){var n=o.cellView.reuseCellContent("effecivity_col_value");if(n){n.innerText=o.cellModel.options.value}}else{o.cellView.reuseCellContent("effecivity_col_colloader")}}},xnav_options:{layout:{width:100,minWidth:80,maxWidth:200,removable:true,hidden:true},exportable:{lock:false,value:true}}}},init:function(n){this._parent(n);k.init(null,"","3DDashboard")},isAdditionalColumnsAvailable:function(n){if(j.is(n,"function")===false){throw new Error("A callback function should be defined")}h();setTimeout(function(){n(true)},500)},getName:function(){return"CfgEffectivityColumns"},getManagedColumnNames:function(){return this._columnDataIndex},toBeUpdated:function(n){var o=false;if(c==="E"){if(n.Effectivity===undefined||n.Effectivity===""){o=true}}else{if(c==="VE"){if(n.Effectivity===undefined||n.Effectivity===""||n.VariantEffectivity===undefined||n.VariantEffectivity===""||n.EvolutionEffectivity===undefined||n.EvolutionEffectivity===""){o=true}}else{if(c==="EE"){if(n.Effectivity===undefined||n.Effectivity===""||n.VariantEffectivity===undefined||n.VariantEffectivity===""||n.CurrentEvolutionEffectivity===undefined||n.CurrentEvolutionEffectivity===""||n.ProjectedEvolutionEffectivity===undefined||n.ProjectedEvolutionEffectivity===""){o=true}}}}return o},updateAttributes:function(o,n){if(j.is(o,"object")===false){throw new Error("The object ids to modify must be specify")}if(j.is(n,"function")===false){throw new Error("A callback function should be defined")}setTimeout(function(){var r={pids:{},relids:{}},p=0;var q=o.relids;if(q.length>0){if(widget.getValue("x3dPlatformId")){enoviaServerFilterWidget.tenant=widget.getValue("x3dPlatformId")}else{enoviaServerFilterWidget.tenant="OnPremise"}m.populate3DSpaceURLApplicability().then(function(s){m.populateSecurityContext().then(function(v){var x="";var y=100;var t=0;var w=t+y;while(q.length>=t){x=q.slice(t,w);t+=y;w+=y;var u={InstanceID:x,InstanceLength:q.length,Version:"1.0",TargetFormat:"TXT",View:"ALL",Domains:"ALL"};l.getEffectivityJSON(u).then(function(A){if(c==="E"){for(var C in A.expressions){if(A.expressions.hasOwnProperty(C)){if(A.expressions[C].hasEffectivity=="NO"){r.relids[C]={Effectivity:i.CFG_EFFECTIVITY_NO}}else{if(A.expressions[C].hasEffectivity=="YES"){r.relids[C]={Effectivity:i.CFG_EFFECTIVITY_YES}}else{if(A.expressions[C].status!="SUCCESS"){r.relids[C]={Effectivity:" "}}}}}}var z=localStorage.getItem("rootDetails").split(",");for(p=0;p<z.length;p++){r.pids[z[p]]={Effectivity:" "}}}else{if(c==="VE"){for(var C in A.expressions){if(A.expressions.hasOwnProperty(C)){if(A.expressions[C].hasEffectivity=="NO"){r.relids[C]={Effectivity:i.CFG_EFFECTIVITY_NO,VariantEffectivity:" ",EvolutionEffectivity:" "}}else{if(A.expressions[C].hasEffectivity=="YES"){var D=" ";var B=" ";if(A.expressions[C].content!==null&&A.expressions[C].content.Variant!==null&&A.expressions[C].content.Variant!==undefined){D=A.expressions[C].content.Variant;D=D.replace(/[\r\n]+/g," ")}if(A.expressions[C].content!==null&&A.expressions[C].content.Evolution!==null&&A.expressions[C].content.Evolution!==undefined){B=A.expressions[C].content.Evolution.Current;if(B!==undefined&&B!==null){B=B.replace(/[\r\n]+/g," ")}else{B=" "}}r.relids[C]={Effectivity:i.CFG_EFFECTIVITY_YES,VariantEffectivity:D,EvolutionEffectivity:B}}else{if(A.expressions[C].status!="SUCCESS"){r.relids[C]={Effectivity:" ",VariantEffectivity:" ",EvolutionEffectivity:" "}}}}}}var z=localStorage.getItem("rootDetails").split(",");for(p=0;p<z.length;p++){r.pids[z[p]]={Effectivity:" ",VariantEffectivity:" ",EvolutionEffectivity:" "}}}else{if(c==="EE"){for(var C in A.expressions){if(A.expressions.hasOwnProperty(C)){if(A.expressions[C].hasEffectivity=="NO"){r.relids[C]={Effectivity:i.CFG_EFFECTIVITY_NO,VariantEffectivity:" ",CurrentEvolutionEffectivity:" ",ProjectedEvolutionEffectivity:" "}}else{if(A.expressions[C].hasEffectivity=="YES"){var D=" ";var F=" ";var E=" ";if(A.expressions[C].content!==null&&A.expressions[C].content.Variant!==null&&A.expressions[C].content.Variant!==undefined){D=A.expressions[C].content.Variant;D=D.replace(/[\r\n]+/g," ")}if(A.expressions[C].content!==null&&A.expressions[C].content.Evolution!==null&&A.expressions[C].content.Evolution!==undefined){F=A.expressions[C].content.Evolution.Current;E=A.expressions[C].content.Evolution.Projected;if(F!==undefined&&F!==null){F=F.replace(/[\r\n]+/g," ")}else{F=" "}if(E!==undefined&&E!=null){E=E.replace(/[\r\n]+/g," ")}else{E=" "}}r.relids[C]={Effectivity:i.CFG_EFFECTIVITY_YES,VariantEffectivity:D,CurrentEvolutionEffectivity:F,ProjectedEvolutionEffectivity:E}}else{if(A.expressions[C].status!="SUCCESS"){r.relids[C]={Effectivity:" ",VariantEffectivity:" ",CurrentEvolutionEffectivity:" ",ProjectedEvolutionEffectivity:" "}}}}}}var z=localStorage.getItem("rootDetails").split(",");for(p=0;p<z.length;p++){r.pids[z[p]]={Effectivity:" ",VariantEffectivity:" ",CurrentEvolutionEffectivity:" ",ProjectedEvolutionEffectivity:" "}}}}}n(r)},function(z){return Promise.reject(z)})}},function(t){return Promise.reject(t)})},function(s){return Promise.reject(s)})}if(c==="E"){if(o.pids.length>0&&o.relids.length==0){for(p=0;p<o.pids.length;p++){r.pids[o.pids[p]]={Effectivity:" "}}localStorage.setItem("rootDetails",o.pids);n(r)}}else{if(c==="VE"){if(o.pids.length>0&&o.relids.length==0){for(p=0;p<o.pids.length;p++){r.pids[o.pids[p]]={Effectivity:" ",VariantEffectivity:" ",EvolutionEffectivity:" "}}localStorage.setItem("rootDetails",o.pids);n(r)}}else{if(c==="EE"){if(o.pids.length>0&&o.relids.length==0){for(p=0;p<o.pids.length;p++){r.pids[o.pids[p]]={Effectivity:" ",VariantEffectivity:" ",CurrentEvolutionEffectivity:" ",ProjectedEvolutionEffectivity:" "}}localStorage.setItem("rootDetails",o.pids);n(r)}}}}},2000)},getAdditionalColumnsUX:function(q){var p=[];for(var o=0;o<q.length;o++){p.push(q[o].dataIndex)}for(var s=0;s<this._columnDataIndex.length;s++){var t=this._columnDataIndex[s];var r=this._columnDef[t];var n=p.indexOf(t);if(n===-1){q.push(r)}else{q[n]=j.extend(q[n],r,true)}}},registerReusableCellContent:function(n){if(c==="E"){n.getManager().registerReusableCellContent({id:"effecivity_col_colloader",buildContent:function(){return new g().show()}});n.getManager().registerReusableCellContent({id:"effecivity_col_value",buildContent:function(){return a.createElement("span")}})}else{if(c==="VE"){n.getManager().registerReusableCellContent({id:"effecivity_col_colloader",buildContent:function(){return new g().show()}});n.getManager().registerReusableCellContent({id:"variant_effecivity_col_colloader",buildContent:function(){return new g().show()}});n.getManager().registerReusableCellContent({id:"evolution_effecivity_col_colloader",buildContent:function(){return new g().show()}});n.getManager().registerReusableCellContent({id:"effecivity_col_value",buildContent:function(){return a.createElement("span")}});n.getManager().registerReusableCellContent({id:"variant_effecivity_col_value",buildContent:function(){return a.createElement("span")}});n.getManager().registerReusableCellContent({id:"evolution_effecivity_col_value",buildContent:function(){return a.createElement("span")}})}else{if(c==="EE"){n.getManager().registerReusableCellContent({id:"effecivity_col_colloader",buildContent:function(){return new g().show()}});n.getManager().registerReusableCellContent({id:"variant_effecivity_col_colloader",buildContent:function(){return new g().show()}});n.getManager().registerReusableCellContent({id:"current_evolution_effecivity_col_colloader",buildContent:function(){return new g().show()}});n.getManager().registerReusableCellContent({id:"projected_evolution_effecivity_col_colloader",buildContent:function(){return new g().show()}});n.getManager().registerReusableCellContent({id:"effecivity_col_value",buildContent:function(){return a.createElement("span")}});n.getManager().registerReusableCellContent({id:"variant_effecivity_col_value",buildContent:function(){return a.createElement("span")}});n.getManager().registerReusableCellContent({id:"current_evolution_effecivity_col_value",buildContent:function(){return a.createElement("span")}});n.getManager().registerReusableCellContent({id:"projected_evolution_effecivity_col_value",buildContent:function(){return a.createElement("span")}})}}}},getOnCellClickCB:function(o){var n;switch(o){case"Effectivity":n=function(q){var p=this.getManager().getTreeNodeModelFromRowID(q.virtualRowID)};break;default:break}return n}});return e});