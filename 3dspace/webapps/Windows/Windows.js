define("DS/Windows/DockingElement",["UWA/Core","DS/Controls/Abstract","DS/Core/PointerEvents","DS/Utilities/Utils","DS/Utilities/Dom","UWA/Utils/Client","DS/WebRecordEnabler/Adapter","DS/WebRecordBase/Constants"],function(f,h,g,i,b,k,d,l){var n=h.inherit({name:"dockingElement",markForRecordFlag:true,publishedProperties:{identifier:{defaultValue:"",type:"string",readOnly:true,category:"Behavior"},dockingZoneSize:{defaultValue:100,type:"number",advancedSetter:true,recordFlag:true},minSize:{defaultValue:20,type:"number"},maxSize:{defaultValue:screen.width,type:"number"},side:{defaultValue:WUXDockAreaEnum.TopDockArea,type:"number"},interactiveDockAreaVisibleFlag:{defaultValue:false,type:"boolean"},collapsibleFlag:{defaultValue:true,type:"boolean"},collapseDockingZoneFlag:{defaultValue:false,type:"boolean",recordFlag:true},visibleDockingZoneFlag:{defaultValue:true,type:"boolean"},resizableFlag:{defaultValue:true,type:"boolean"},dockingZoneContent:{defaultValue:null,type:"object"},freeZoneContent:{defaultValue:null,type:"object"},useBordersFlag:{defaultValue:true,type:"boolean"},useBackgroundFlag:{defaultValue:false,type:"boolean"},alignment:{defaultValue:"near",type:"string",category:"Appearance"},autoExpandFlag:{defaultValue:true,type:"boolean"}},_hideClassName:"wux-docking-element-hide-docking-zone",buildView:function(){this.elements.container.addClassName("wux-windows-docking-element");d.setElementRecordMode(this.elements.container,l.RecordModes.DEFAULT_AND_CHILD);this.elements.dockingWithCollapserContainer=new f.Element("div",{"class":"wux-windows-docking-and-collapser"});this.elements.collapser=new f.Element("div",{"class":"wux-windows-docking-element-collapser"});var o=k.Engine;if(!o.ie){this.elements.collapser.addClassName("collapser-not-IE")}this.elements.dockingZoneMask=new f.Element("div",{"class":"wux-windows-docking-element-docking-zone-mask"});this.elements.fixedArea=new f.Element("div",{"class":"wux-windows-docking-element-fixed-area"}).inject(this.elements.dockingZoneMask);this.elements.dockingZone=new f.Element("div",{"class":"wux-windows-docking-element-docking-zone"}).inject(this.elements.dockingZoneMask);this.elements.resizeHandler=new f.Element("div",{"class":"wux-windows-docking-element-resize-handler"}).inject(this.elements.dockingZoneMask);this.elements.freeZone=new f.Element("div",{"class":"wux-windows-docking-element-free-zone"});this.elements.hackResize=new f.Element("div",{"class":"wux-windows-docking-element-hack-resize"}).inject(this.elements.container);this.elements.hackResize.addClassName(this._hideClassName);this.elements.interactiveDockArea=new f.Element("div",{"class":"wux-windows-docking-element-interactive-dock-area"});this._scrollBarSize=0;this._resizerSize=14;this._collapserSize=20;this._interactiveTimeout=undefined;this._dockingSensibilityZoneSize=30;this.collapseMemory=false;this.visibleMemory=false;this._collapserTimer=null;this._expanderTimer=null;this._collapseHoverFlag=false},_postBuildView:function(){var p=this._getDockingZoneSizeFromPreferences();if(p){this.dockingZoneSize=p.size}var o=this._getCollapseDockingZoneFlagFromPreferences();if(o){this.collapseDockingZoneFlag=o.collapseDockingZoneFlag}},_applySide:function(){var o=this._getClassName();this.elements.container.addClassName(o);this.elements.collapser.addClassName(o);this.elements.dockingWithCollapserContainer.addClassName(o);this.elements.dockingZoneMask.addClassName(o);this.elements.dockingZone.addClassName(o);this.elements.resizeHandler.addClassName(o);this.elements.freeZone.addClassName(o);this.elements.interactiveDockArea.addClassName(o);if(this.side&WUXDockAreaEnum.LeftDockArea||this.side&WUXDockAreaEnum.TopDockArea){this.elements.dockingWithCollapserContainer.inject(this.elements.container);this.elements.collapser.inject(this.elements.dockingWithCollapserContainer);this.elements.dockingZoneMask.inject(this.elements.dockingWithCollapserContainer);this.elements.freeZone.inject(this.elements.container)}else{this.elements.freeZone.inject(this.elements.container);this.elements.dockingWithCollapserContainer.inject(this.elements.container);this.elements.dockingZoneMask.inject(this.elements.dockingWithCollapserContainer);this.elements.collapser.inject(this.elements.dockingWithCollapserContainer)}this.elements.interactiveDockArea.inject(this.elements.dockingZoneMask)},_preEditDockingZoneSize:function(o,p){if(typeof this.maxSize!=="undefined"&&p>this.maxSize){this.dockingZoneSize=this.maxSize;return false}else{if(typeof this.minSize!=="undefined"&&p<this.minSize){this.dockingZoneSize=this.minSize;return false}}return true},_applyDockingZoneSize:function(o){this._updateDockingZoneSize();this._scrollToBottom();if((o!==undefined)&&(this.dockingZoneSize!==o)){var q=this.getContainedWindows();for(var p=0;p<q.length;p++){q[p]._fireAndBroadcast("resize",{bubbles:false})}}},_updateContainedWindows:function(){var q=this.getContainedVisibleWindows();for(var o=0;o<q.length;o++){var p=q[o]._getTitleBarHeight();q[o]._updateContentHeight();q[o]._setTitleBarCenteredFlag(this.alignment==="center");if(q[o].isAWindowGroup()){q[o]._updateMaxTabbarWidth();q[o]._updateMinWidth()}}},_updateFromContainedWindows:function(){this._updateFitToChildState();var q=this.side;var o=24;var t=this.getContainedVisibleWindows();if(t&&t.length>0){var r=t[0]._getTitleBarHeight();for(var p=0;p<t.length;p++){var s=t[p];if(s){if((q===WUXDockAreaEnum.LeftDockArea)||(q===WUXDockAreaEnum.RightDockArea)){o=(s.minWidth>o)?s.minWidth:o}else{if((q===WUXDockAreaEnum.TopDockArea)||(q===WUXDockAreaEnum.BottomDockArea)){o=(s.minHeight+r>o)?s.minHeight+r:o}}}}}this.minSize=o;this._updateCollapserSize()},_updateFitToChildState:function(){var o=false;if(this.alignment==="center"){var q=this.getContainedVisibleWindows();if(q.length===1){o=true;var p=q[0];if(p&&(p.horizontallyStretchableFlag&&(this.side==WUXDockAreaEnum.TopDockArea||this.side==WUXDockAreaEnum.BottomDockArea))||(p.verticallyStretchableFlag&&(this.side==WUXDockAreaEnum.LeftDockArea||this.side==WUXDockAreaEnum.RightDockArea))){o=false}}}if(o){this.elements.dockingZone.addClassName("wux-docking-element-fit-to-child")}else{this.elements.dockingZone.removeClassName("wux-docking-element-fit-to-child")}},_getClassName:function(){var o="";switch(this.side){case WUXDockAreaEnum.LeftDockArea:o="wux-docking-element-left";break;case WUXDockAreaEnum.RightDockArea:o="wux-docking-element-right";break;case WUXDockAreaEnum.TopDockArea:o="wux-docking-element-top";break;case WUXDockAreaEnum.BottomDockArea:o="wux-docking-element-bottom";break}return o},_saveDockingZoneSizeInPreferences:function(){if(this.identifier!==""){var o={size:this.dockingZoneSize};i.saveDataInLocalPreferences(this,this._getClassName(),"dockingZoneSize",o)}},_getDockingZoneSizeFromPreferences:function(){var o=undefined;if(this.identifier!==""){o=i.getDataFromLocalPreferences(this,this._getClassName(),"dockingZoneSize")}return o},_saveCollapseDockingZoneFlagInPreferences:function(){if(this.identifier!==""){var o={collapseDockingZoneFlag:this.collapseDockingZoneFlag};i.saveDataInLocalPreferences(this,this._getClassName(),"collapseDockingZoneFlag",o)}},_getCollapseDockingZoneFlagFromPreferences:function(){var o=undefined;if(this.identifier!==""){o=i.getDataFromLocalPreferences(this,this._getClassName(),"collapseDockingZoneFlag")}return o},_updateDockingZoneSize:function(){this._updateContainedWindows();var p=this.side;var r=this._hasScrollbar();if(r&&(this._scrollBarSize===0)){var t=this.getContainedVisibleWindows();if(t.length>0){var q=((p===WUXDockAreaEnum.TopDockArea)||(p===WUXDockAreaEnum.BottomDockArea))?this.elements.dockingZone.getDimensions().height:this.elements.dockingZone.getDimensions().width;var o=((p===WUXDockAreaEnum.TopDockArea)||(p===WUXDockAreaEnum.BottomDockArea))?t[0].getContent().getDimensions().height:t[0].getContent().getDimensions().width;this._scrollBarSize=parseInt(q)-o}}else{if(!r){this._scrollBarSize=0}}if((p===WUXDockAreaEnum.TopDockArea)||(p===WUXDockAreaEnum.BottomDockArea)){var s=this._getFixedAreaHeight();this.elements.dockingZone.setStyle("height",(this.dockingZoneSize+this._scrollBarSize-s)+"px");this.elements.dockingZone.setStyle("margin-top",s+"px");if(this.collapseDockingZoneFlag){this.elements.dockingZoneMask.setStyle("height","0px")}else{this.elements.dockingZoneMask.setStyle("height",this.dockingZoneSize+this._scrollBarSize+"px")}if(this.visibleDockingZoneFlag){if(this.collapseDockingZoneFlag){if(this._collapserSize!==0){this.elements.freeZone.setStyle("height","calc(100% - "+this._collapserSize+"px)")}else{this.elements.freeZone.setStyle("height","100%")}}else{this.elements.freeZone.setStyle("height","calc(100% - "+(this.dockingZoneSize+this._collapserSize+this._scrollBarSize)+"px)")}}else{this.elements.freeZone.setStyle("height","100%")}}else{if((p===WUXDockAreaEnum.LeftDockArea)||(p===WUXDockAreaEnum.RightDockArea)){this.elements.dockingZone.setStyle("width",(this.dockingZoneSize+this._scrollBarSize)+"px");if(this.collapseDockingZoneFlag){this.elements.dockingZoneMask.setStyle("width","0px");this.elements.dockingWithCollapserContainer.setStyle("width",this._collapserSize+"px")}else{this.elements.dockingZoneMask.setStyle("width",this.dockingZoneSize+this._scrollBarSize+"px");this.elements.dockingWithCollapserContainer.setStyle("width",this.dockingZoneSize+this._collapserSize+this._scrollBarSize+"px")}if(this.visibleDockingZoneFlag){if(this.collapseDockingZoneFlag){if(this._collapserSize!==0){this.elements.freeZone.setStyle("width","calc(100% - "+this._collapserSize+"px)")}else{this.elements.freeZone.setStyle("width","100%")}}else{this.elements.freeZone.setStyle("width","calc(100% - "+(this.dockingZoneSize+this._collapserSize+this._scrollBarSize)+"px)")}}else{this.elements.freeZone.setStyle("width","100%");this.elements.dockingWithCollapserContainer.setStyle("width","0px")}}}},getContainedWindows:function(){var q=this.elements.dockingZone.getChildren();var p=[];for(var o=0;o<q.length;o++){if(q[o].hasClassName("wux-windows-window")){p.push(q[o].dsModel)}}return p},getContainedVisibleWindows:function(){var q=this.elements.dockingZone.getChildren();var p=[];for(var o=0;o<q.length;o++){if(q[o].hasClassName("wux-windows-window")&&q[o].getStyle("display")!=="none"){p.push(q[o].dsModel)}}return p},_applyInteractiveDockAreaVisibleFlag:function(){if(this._interactiveTimeout){clearTimeout(this._interactiveTimeout)}if(this.interactiveDockAreaVisibleFlag){this.elements.interactiveDockArea.addClassName("wux-windows-docking-element-active-interactive")}else{this.elements.interactiveDockArea.removeClassName("wux-windows-docking-element-active-interactive")}},_applyCollapsibleFlag:function(o){this._updateCollapserSize();if(!this.collapsibleFlag){this.collapseDockingZoneFlag=false}this._updateDockingZoneSize()},_updateCollapserSize:function(){if(!this.collapsibleFlag||!this.visibleDockingZoneFlag){this._collapserSize=0;this.elements.collapser.addClassName(this._hideClassName)}else{this._collapserSize=20;this.elements.collapser.removeClassName(this._hideClassName)}},_applyCollapseDockingZoneFlag:function(o){var p=this;this.onTransitionEnd=function(){p.elements.dockingZone.removeClassName("wux-docking-anim-collapse");p.elements.dockingZoneMask.removeClassName("wux-docking-anim-collapse");p.elements.freeZone.removeClassName("wux-docking-anim-collapse");p.elements.dockingWithCollapserContainer.removeClassName("wux-docking-anim-collapse");p.elements.freeZone.removeEventListener("transitionend",p.onTransitionEnd)};if(!i.browserIsIE()){this.elements.dockingZone.addClassName("wux-docking-anim-collapse");this.elements.dockingZoneMask.addClassName("wux-docking-anim-collapse");this.elements.freeZone.addClassName("wux-docking-anim-collapse");this.elements.dockingWithCollapserContainer.addClassName("wux-docking-anim-collapse")}this.elements.freeZone.addEventListener("transitionend",p.onTransitionEnd);if(this.collapseDockingZoneFlag){this.getContent().setAttributeNode(document.createAttribute("collapsed"));this.elements.dockingWithCollapserContainer.setAttributeNode(document.createAttribute("collapsed"));if(this.resizableFlag){this.elements.resizeHandler.addClassName(this._hideClassName)}if(this.collapsibleFlag){this._updateDockingZoneSize();switch(this.side){case WUXDockAreaEnum.TopDockArea:if(this.elements.dockingZone.getStyle("top")===((-this.dockingZoneSize)+"px")&&this.elements.dockingZoneMask.getStyle("height")===(0+"px")){this.onTransitionEnd()}else{this.elements.dockingZone.setStyle("top",(-this.dockingZoneSize)+"px")}break;case WUXDockAreaEnum.BottomDockArea:if(this.elements.dockingZoneMask.getStyle("height")===(0+"px")){this.onTransitionEnd()}break;case WUXDockAreaEnum.LeftDockArea:if(this.elements.dockingZone.getStyle("left")===((-this.dockingZoneSize)+"px")&&this.elements.dockingZoneMask.getStyle("width")===(0+"px")){this.onTransitionEnd()}else{this.elements.dockingZone.setStyle("left",(-this.dockingZoneSize)+"px")}break;case WUXDockAreaEnum.RightDockArea:if(this.elements.dockingZoneMask.getStyle("width")===(0+"px")){this.onTransitionEnd()}break}}else{this.collapseDockingZoneFlag=false}this.fire("collapse")}else{this._updateDockingZoneSize();this.getContent().removeAttribute("collapsed");this.elements.dockingWithCollapserContainer.removeAttribute("collapsed");if(this.resizableFlag){this.elements.resizeHandler.removeClassName(this._hideClassName)}switch(this.side){case WUXDockAreaEnum.TopDockArea:if((this.elements.dockingZone.getStyle("top")===(0+"px")||this.elements.dockingZone.getStyle("top")==="")&&this.elements.dockingZoneMask.getStyle("height")!=="0px"){this.onTransitionEnd()}else{this.elements.dockingZone.setStyle("top",0+"px")}break;case WUXDockAreaEnum.BottomDockArea:if(this.elements.dockingZoneMask.getStyle("height")===this.dockingZoneSize+"px"){this.onTransitionEnd()}break;case WUXDockAreaEnum.LeftDockArea:if((this.elements.dockingZone.getStyle("left")===(0+"px")||this.elements.dockingZone.getStyle("left")==="")&&this.elements.dockingZoneMask.getStyle("width")!=="0px"){this.onTransitionEnd()}else{this.elements.dockingZone.setStyle("left",0+"px")}break;case WUXDockAreaEnum.RightDockArea:if(this.elements.dockingZoneMask.getStyle("width")===this.dockingZoneSize+"px"){this.onTransitionEnd()}break}this.fire("expand")}this._updateContentVisibleStateChange()},_updateContentVisibleStateChange:function(){var p=this.getContainedWindows();for(var o=0;o<p.length;o++){p[o]._updateContentVisibleStateChange()}},_applyVisibleDockingZoneFlag:function(){if(this.visibleDockingZoneFlag){if(this.resizableFlag===true){this.elements.resizeHandler.removeClassName(this._hideClassName)}this.elements.dockingZone.removeClassName(this._hideClassName);this.elements.dockingZoneMask.removeClassName(this._hideClassName)}else{this.elements.resizeHandler.addClassName(this._hideClassName);this.elements.dockingZone.addClassName(this._hideClassName);this.elements.dockingZoneMask.addClassName(this._hideClassName)}this._updateCollapserSize();this._updateDockingZoneSize();this._updateContentVisibleStateChange()},_applyResizableFlag:function(){var o=this;if(this.resizableFlag===false){this.elements.resizeHandler.addClassName(this._hideClassName)}else{this.elements.resizeHandler.removeClassName(this._hideClassName)}},_applyMinSize:function(){if(this.minSize!==undefined&&this.minSize!==null){if(this.minSize>this.dockingZoneSize){this.dockingZoneSize=this.minSize}if(this.maxSize!==undefined&&this.maxSize!==null&&this.minSize>this.maxSize){this.maxSize=this.minSize}}},_applyMaxSize:function(){if(this.maxSize!==undefined&&this.maxSize!==null){if(this.minSize!==undefined&&this.minSize!==null&&this.minSize>this.maxSize){this.maxSize=this.minSize;return}if(this.maxSize<this.dockingZoneSize){this.dockingZoneSize=this.maxSize}}},_applyDockingZoneContent:function(o){if(o){o.remove()}if(this.dockingZoneContent){if(f.is(this.dockingZoneContent,"element")){this.dockingZoneContent=new f.extendElement(this.dockingZoneContent)}this.dockingZoneContent.inject(this.elements.dockingZone)}},_applyFreeZoneContent:function(o){if(o){o.remove()}if(this.freeZoneContent){if(f.is(this.freeZoneContent,"element")){this.freeZoneContent=new f.extendElement(this.freeZoneContent)}this.freeZoneContent.inject(this.elements.freeZone)}},_applyUseBordersFlag:function(o){if(this.useBordersFlag){this.elements.dockingZone.addClassName("wux-docking-element-useBorders")}else{this.elements.dockingZone.removeClassName("wux-docking-element-useBorders")}},_applyUseBackgroundFlag:function(o){if(this.useBackgroundFlag){this.elements.dockingZone.addClassName("wux-docking-element-use-background")}else{this.elements.dockingZone.removeClassName("wux-docking-element-use-background")}},_applyAlignment:function(o){if(this.alignment==="center"){this.elements.dockingZoneMask.removeClassName("wux-docking-element-align-near");this.elements.dockingZoneMask.removeClassName("wux-docking-element-align-far");this.elements.dockingZoneMask.addClassName("wux-docking-element-align-center")}else{if(this.alignment==="far"){this.elements.dockingZoneMask.removeClassName("wux-docking-element-align-near");this.elements.dockingZoneMask.removeClassName("wux-docking-element-align-center");this.elements.dockingZoneMask.addClassName("wux-docking-element-align-far")}else{this.elements.dockingZoneMask.removeClassName("wux-docking-element-align-center");this.elements.dockingZoneMask.removeClassName("wux-docking-element-align-far");this.elements.dockingZoneMask.addClassName("wux-docking-element-align-near")}}this._updateContainedWindows();this._updateFitToChildState();this._updateDockingZoneSize()},_applyAutoExpandFlag:function(o){var p=this;if(!this._collapserMouseEnterFun){this._mouseMoveOnDocument=function(q){if(a(p.elements.dockingWithCollapserContainer,q.clientX,q.clientY)){if(p._collapseHoverFlag===true){clearTimeout(p._expanderTimer);p._expanderTimer=null}}else{if(!p._expanderTimer){p._expanderTimer=setTimeout(function(){b._pushUserInteractionContext();p.setPropertyFromUIInteraction("collapseDockingZoneFlag",true);p._collapseHoverFlag=false;p.collapseMemory=false;p.elements.dockingWithCollapserContainer.removeAttribute("expand-hover");b.removeEventOnElement(p,document,"mousemove",p._mouseMoveOnDocument);p._listenToMouseMove=null;b._popUserInteractionContext()},1000)}}};this._collapserMouseEnterFun=function(q){if(p.collapseDockingZoneFlag===true&&!p._collapserTimer){p._collapseHoverFlag=true;p._collapserTimer=setTimeout(function(){b._pushUserInteractionContext();p.setPropertyFromUIInteraction("collapseDockingZoneFlag",false);p.elements.dockingWithCollapserContainer.setAttributeNode(document.createAttribute("expand-hover"));p._collapserTimer=null;b._popUserInteractionContext()},300);if(!p._listenToMouseMove){b.addEventOnElement(p,document,"mousemove",p._mouseMoveOnDocument);p._listenToMouseMove=true}}}}if(!this._collapserMouseLeaveFun){this._collapserMouseLeaveFun=function(q){if(p._collapserTimer){clearTimeout(p._collapserTimer);p._collapserTimer=null}}}if(!this._dockingMouseEnterFun){this._dockingMouseEnterFun=function(){if(p._collapseHoverFlag===true){clearTimeout(p._expanderTimer)}}}if(this.autoExpandFlag&&!o){b.addEventOnElement(this,this.elements.collapser,"mouseenter",this._collapserMouseEnterFun);b.addEventOnElement(this,this.elements.collapser,"mouseleave",this._collapserMouseLeaveFun);b.addEventOnElement(this,this.elements.dockingWithCollapserContainer,"mouseenter",this._dockingMouseEnterFun)}else{b.removeEventOnElement(this,this.elements.collapser,"mouseenter",this._collapserMouseEnterFun);b.removeEventOnElement(this,this.elements.collapser,"mouseleave",this._collapserMouseLeaveFun);b.removeEventOnElement(this,this.elements.dockingWithCollapserContainer,"mouseenter",this._dockingMouseEnterFun)}},_applyProperties:function(o){this._parent(o);this._applySide();this._applyDockingZoneSize();this._applyInteractiveDockAreaVisibleFlag();this._applyResizableFlag();this._applyDockingZoneContent();this._applyFreeZoneContent();this._applyCollapsibleFlag();this._applyVisibleDockingZoneFlag();if(this.isDirty("useBordersFlag")){this._applyUseBordersFlag(o.useBordersFlag)}if(this.isDirty("useBackgroundFlag")){this._applyUseBackgroundFlag(o.useBackgroundFlag)}this._applyCollapseDockingZoneFlag();if(this.isDirty("alignment")){this._applyAlignment(o.alignment)}if(this.isDirty("autoExpandFlag")){this._applyAutoExpandFlag(o.autoExpandFlag)}},_getFixedArea:function(){return this.elements.fixedArea},_getFixedAreaHeight:function(){return this.elements.fixedArea?this.elements.fixedArea.offsetHeight:0},_getFixedAreaWidth:function(){return this.elements.fixedArea?this.elements.fixedArea.offsetWidth:0},handleEvents:function(){var x=this;var t=0;var r=0;var w=0;var u=0;var z={};var A=0;var o=0;var s=50;function p(D){D.preventDefault();u=D.pageY-r;var C=w;if(w+u>x.minSize){if((w+u)<j.call(x,x.maxSize,o)){C=w+u}else{C=j.call(x,x.maxSize,o)}}else{C=x.minSize}x.setPropertyFromUIInteraction("dockingZoneSize",C);if(x.immersiveFrame){x.immersiveFrame._updateAllDockingZoneSize()}x.fire("dockIsResizing")}function q(D){D.preventDefault();u=D.pageY-r;var C=w;if(w-u>x.minSize){if((w-u)<j.call(x,x.maxSize,o)){C=w-u}else{C=j.call(x,x.maxSize,o)}}else{C=x.minSize}x.setPropertyFromUIInteraction("dockingZoneSize",C);if(x.immersiveFrame){x.immersiveFrame._updateAllDockingZoneSize()}x.fire("dockIsResizing")}function y(D){D.preventDefault();u=D.pageX-t;var C=w;if(w+u>x.minSize){if((w+u)<j.call(x,x.maxSize,A)){C=w+u}else{C=j.call(x,x.maxSize,A)}}else{C=x.minSize}x.setPropertyFromUIInteraction("dockingZoneSize",C);if(x.immersiveFrame){x.immersiveFrame._updateAllDockingZoneSize()}x.fire("dockIsResizing")}function B(D){D.preventDefault();u=D.pageX-t;var C=w;if(w-u>x.minSize){if((w-u)<j.call(x,x.maxSize,A)){C=w-u}else{C=j.call(x,x.maxSize,A)}}else{C=x.minSize}x.setPropertyFromUIInteraction("dockingZoneSize",C);if(x.immersiveFrame){x.immersiveFrame._updateAllDockingZoneSize()}x.fire("dockIsResizing")}function v(E){document.body.removeAttribute("resizing");b.removeEventOnElement(x,document,g.POINTERMOVE,y);b.removeEventOnElement(x,document,g.POINTERMOVE,B);b.removeEventOnElement(x,document,g.POINTERMOVE,p);b.removeEventOnElement(x,document,g.POINTERMOVE,q);b.removeEventOnElement(x,document,g.POINTERUP,v);x.elements.hackResize.addClassName(x._hideClassName);x.elements.hackResize.setStyle("cursor","default");x.fire("dockResize");var D=x.getContainedWindows();for(var C=0;C<D.length;C++){D[C]._fireAndBroadcast("stopResize")}x._saveDockingZoneSizeInPreferences()}b.addEventOnElement(this,this.elements.resizeHandler,g.POINTERDOWN,function(G){if(x.collapseDockingZoneFlag===false&&x.resizableFlag===true){document.body.setAttributeNode(document.createAttribute("resizing"));t=G.pageX;r=G.pageY;var F="e-resize";w=x.dockingZoneSize;switch(x.side){case WUXDockAreaEnum.TopDockArea:case WUXDockAreaEnum.BottomDockArea:o=m.call(x).offsetHeight+w-s;F="s-resize";break;case WUXDockAreaEnum.LeftDockArea:case WUXDockAreaEnum.RightDockArea:A=m.call(x).offsetWidth+w-s;F="e-resize";break}x.elements.hackResize.setStyle("cursor",F);x.elements.hackResize.removeClassName(this._hideClassName);b.addEventOnElement(x,document,g.POINTERUP,v);var D="left";switch(x.side){case WUXDockAreaEnum.TopDockArea:b.addEventOnElement(x,document,g.POINTERMOVE,p);D="bottom";break;case WUXDockAreaEnum.BottomDockArea:b.addEventOnElement(x,document,g.POINTERMOVE,q);D="top";break;case WUXDockAreaEnum.LeftDockArea:b.addEventOnElement(x,document,g.POINTERMOVE,y);D="right";break;case WUXDockAreaEnum.RightDockArea:b.addEventOnElement(x,document,g.POINTERMOVE,B);D="left";break}var E=x.getContainedWindows();for(var C=0;C<E.length;C++){E[C]._fireAndBroadcast("startResize",{side:D,cursor:F});if(!x.immersiveFrame){x.immersiveFrame=E[C].immersiveFrame}}}});this._manageAutoCollapse=function(){b.removeEventOnElement(x,document,"mousemove",x._mouseMoveOnDocument);x._listenToMouseMove=null;if(x._collapseHoverFlag===false){x.setPropertyFromUIInteraction("collapseDockingZoneFlag",!x.collapseDockingZoneFlag)}x._saveCollapseDockingZoneFlagInPreferences();clearTimeout(x._collapserTimer);x._collapseHoverFlag=false;x.elements.dockingWithCollapserContainer.removeAttribute("expand-hover")};b.addEventOnElement(this,this.elements.collapser,"click",function(C){x._manageAutoCollapse()});this.elements.dockingZone.addEventListener("scroll",function(){x._resetInteractiveDockArea()});this.elements.dockingZone.addEventListener("DOMNodeRemoved",function(F){if(F.target&&F.target.hasOwnProperty("hasClassName")&&F.target.hasClassName("wux-windows-window")){var G=x.elements.dockingZone.getChildren();var E=F.target.dsModel;var C=0;for(var D=0;D<G.length;D++){if(G[D].hasClassName("wux-windows-window")&&(G[D].dsModel.getContent()!==E.getContent())&&G[D].dsModel.visibleFlag){C++}}if(C===0){x.visibleDockingZoneFlag=false}}});this.elements.dockingZone.addEventListener("DOMNodeInserted",function(D){if(D.target&&D.target.hasOwnProperty("hasClassName")&&D.target.hasClassName("wux-windows-window")){var C=D.target.dsModel;if(C&&C.visibleFlag){x.visibleDockingZoneFlag=true}}})},getSensibilityDockArea:function(){var o=this.getContent().getBoundingClientRect();switch(this.side){case WUXDockAreaEnum.TopDockArea:return{x:o.left,y:o.top-this._dockingSensibilityZoneSize,width:o.width,height:2*this._dockingSensibilityZoneSize};break;case WUXDockAreaEnum.BottomDockArea:return{x:o.left,y:o.bottom-this._dockingSensibilityZoneSize,width:o.width,height:2*this._dockingSensibilityZoneSize};break;case WUXDockAreaEnum.LeftDockArea:return{x:o.left-this._dockingSensibilityZoneSize,y:o.top,width:2*this._dockingSensibilityZoneSize,height:o.height};break;case WUXDockAreaEnum.RightDockArea:return{x:o.right-this._dockingSensibilityZoneSize,y:o.top,width:2*this._dockingSensibilityZoneSize,height:o.height};break}},_getStretchSize:function(){if(this.side===WUXDockAreaEnum.TopDockArea||this.side==WUXDockAreaEnum.BottomDockArea){return parseInt(window.getComputedStyle(this.elements.dockingZoneMask).width)}else{return parseInt(window.getComputedStyle(this.elements.dockingZoneMask).height)}},_resetInteractiveDockArea:function(){if(this.side==WUXDockAreaEnum.LeftDockArea||this.side==WUXDockAreaEnum.RightDockArea){this.elements.interactiveDockArea.setStyle("top",0);var o=this.elements.dockingZone.scrollTop;this.elements.interactiveDockArea.setStyle("top",o)}else{if(this.side==WUXDockAreaEnum.TopDockArea||this.side==WUXDockAreaEnum.BottomDockArea){this.elements.interactiveDockArea.setStyle("left",0);var p=this.elements.dockingZone.scrollLeft;this.elements.interactiveDockArea.setStyle("left",p)}}},_scrollToBottom:function(){if(this.side&WUXDockAreaEnum.LeftDockArea||this.side&WUXDockAreaEnum.RightDockArea){var s=this.elements.dockingZone.scrollTop;var q=0;var r=this.getContainedVisibleWindows();for(var p=0;p<r.length;p++){q=q+r[p].getContent().offsetHeight}if(this.elements.dockingZone.offsetHeight>0&&s+this.elements.dockingZone.offsetHeight>=q){var o=r[r.length-1];this.elements.dockingZone.scrollTop=q-this.elements.dockingZone.offsetHeight}}else{var u=this.elements.dockingZone.scrollLeft;var t=0;var r=this.getContainedVisibleWindows();for(var p=0;p<r.length;p++){t=t+r[p].getContent().offsetWidth}if(this.elements.dockingZone.offsetWidth>0&&u+this.elements.dockingZone.offsetWidth>=t){var o=r[r.length-1];this.elements.dockingZone.scrollLeft=t-this.elements.dockingZone.offsetWidth}}},_pointerEventsAllIfOveflowY:function(){this._pointerEventsAllIfOverflow()},_pointerEventsAllIfOverflow:function(){this.getContent().getComputedSize();if(this.elements&&this.elements.dockingZone){if(this._hasScrollbar()){this.elements.dockingZone.setStyle("pointer-events","all")}else{this.elements.dockingZone.setStyle("pointer-events","")}this._resetInteractiveDockArea()}},pointerEventsAllIfOverflow:function(){this._pointerEventsAllIfOverflow()},_hasScrollbar:function(){var s=(this.side==WUXDockAreaEnum.RightDockArea||this.side==WUXDockAreaEnum.LeftDockArea);if(!s&&typeof this.elements.dockingZone.scrollWidth==="number"){return this.elements.dockingZone.scrollWidth>this.elements.dockingZone.offsetWidth}if(s){var r=this.elements.dockingZone;var t;if(typeof r.currentStyle!=="undefined"){t=r.currentStyle.overflow}t=t||((window.getComputedStyle(r,""))?window.getComputedStyle(r,"").overflow:"");var q;if(typeof r.currentStyle!=="undefined"){q=r.currentStyle.overflowY}q=q||((window.getComputedStyle(r,""))?window.getComputedStyle(r,"").overflowY:"");var p=0;var x=this.getContainedVisibleWindows();for(var u=0;u<x.length;u++){p=p+x[u].getContent().offsetHeight}var w=(p>r.clientHeight&&r.clientHeight!==0);var o=/^(visible|auto)$/.test(t)||/^(visible|auto)$/.test(q);var v=t==="scroll"||q==="scroll";return(w&&o)||(v)}else{return false}}});var c=function(p){return(typeof HTMLElement==="object"?p instanceof HTMLElement:p&&typeof p==="object"&&p!==null&&p.nodeType===1&&typeof p.nodeName==="string")};var a=function(o,r,q){var p=o.getBoundingClientRect();if(r>=p.left&&r<=p.left+p.width&&q>=p.top&&q<=p.top+p.height){return true}return false};var m=function(){var q=this.elements.freeZone;var s=false;while(!s){var o=q.getChildren();s=true;for(var p=0;p<o.length;p++){if(o[p].hasClassName("wux-windows-docking-element")){var r=o[p].dsModel;if(r){q=r.elements.freeZone;s=false}}}}return q};var j=function(p,o){var q=(p<o)?p:o;return q};var e=function(p,o){var q=(p>o)?p:o;return q};d.register(n,"DS/ControlsRec/AbstractRec");return n});define("DS/Windows/WindowActivator",["UWA/Core","UWA/Class","DS/Core/BaseComponent","DS/Utilities/Utils"],function(e,b,a,d){var c=b.singleton({defaultOptions:{},FindFocusableInChildren:function(k,l){var f=null;if(k==undefined){return null}if(l==false){if(k.getAttribute("tabindex")||k.tabIndex>=0){return k}}var j=k.childNodes;for(var h=0;h<j.length;h++){var g=j[h];if(g.nodeType!=1){continue}if(g.getAttribute("tabindex")||g.tabIndex>=0){f=g;break}else{f=this.FindFocusableInChildren(g,false);if(f){break}}}return f},getFocusedWidget:function(k){var h=null;if(k==undefined||k==null){return null}var g=document.activeElement;if(k==g){return k}if(k){var f=k.childNodes;for(var j=0;j<f.length;j++){var l=f[j];if(l.nodeType!=1){continue}if(l==g){h=l;break}else{h=this.getFocusedWidget(l);if(h){break}}}}return h}});return c});define("DS/Windows/WindowManager",["UWA/Core","UWA/Class","DS/Core/BaseComponent","DS/Utilities/Utils"],function(e,b,a,d){var c=b.singleton({defaultOptions:{},init:function(f){this._parent(f)},setActiveWindow:function(f){if(this._activeWindow===f){return}var g=this._activeWindow;this._activeWindow=f;if(this._activeWindow){this._activeWindow.activeFlag=true}if(g){g.activeFlag=false}},getActiveWindow:function(){return this._activeWindow},bringToFront:function(h){if(h&&!h.getDockedFlag()&&!h.maximizedFlag){var m=h.getZIndex();var i=-1;var l=h.immersiveFrame;if(l){for(var k in l.windows){var g=l.windows[k];if(g&&(g!==h)){var j=g.getZIndex();if(i<j){i=j}}}}if(i>=m){var f=i+1;h.getContent().setStyle("z-index",f)}}}});return c});var WUXSnapAreaEnum={NoneArea:0,OutsideArea:1,TopArea:2,BottomArea:3,LeftArea:4,RightArea:5,InsideArea:6};Object.freeze(WUXSnapAreaEnum);var WUXWindowGroupTypeEnum={GroupAsGrid:0,GroupAsTab:1};Object.freeze(WUXWindowGroupTypeEnum);var WUXStandardButtonRoleEnum={InvalidRole:0,AcceptRole:1,RejectRole:2,DestructiveRole:3,HelpRole:4,YesRole:5,NoRole:6,ApplyRole:7,ResetRole:8};Object.freeze(WUXStandardButtonRoleEnum);var WUXStandardButtonEnum={Ok:{name:"Ok",value:1<<0,role:WUXStandardButtonRoleEnum.AcceptRole},Open:{name:"Open",value:1<<1,role:WUXStandardButtonRoleEnum.AcceptRole},Save:{name:"Save",value:1<<2,role:WUXStandardButtonRoleEnum.AcceptRole},Apply:{name:"Apply",value:1<<3,role:WUXStandardButtonRoleEnum.ApplyRole},Reset:{name:"Reset",value:1<<4,role:WUXStandardButtonRoleEnum.ResetRole},RestoreDefaults:{name:"RestoreDefaults",value:1<<5,role:WUXStandardButtonRoleEnum.ResetRole},Help:{name:"Help",value:1<<6,role:WUXStandardButtonRoleEnum.HelpRole},SaveAll:{name:"SaveAll",value:1<<7,role:WUXStandardButtonRoleEnum.AcceptRole},Yes:{name:"Yes",value:1<<8,role:WUXStandardButtonRoleEnum.YesRole},YesToAll:{name:"YesToAll",value:1<<9,role:WUXStandardButtonRoleEnum.YesRole},No:{name:"No",value:1<<10,role:WUXStandardButtonRoleEnum.NoRole},NoToAll:{name:"NoToAll",value:1<<11,role:WUXStandardButtonRoleEnum.NoRole},Abort:{name:"Abort",value:1<<12,role:WUXStandardButtonRoleEnum.RejectRole},Retry:{name:"Retry",value:1<<13,role:WUXStandardButtonRoleEnum.AcceptRole},Ignore:{name:"Ignore",value:1<<14,role:WUXStandardButtonRoleEnum.AcceptRole},Discard:{name:"Discard",value:1<<15,role:WUXStandardButtonRoleEnum.DestructiveRole},Cancel:{name:"Cancel",value:1<<16,role:WUXStandardButtonRoleEnum.RejectRole},Close:{name:"Close",value:1<<17,role:WUXStandardButtonRoleEnum.RejectRole}};Object.freeze(WUXStandardButtonEnum);var windowPrefKey="wux-windows-window";define("DS/Windows/Window",["UWA/Core","DS/Core/Core","DS/Controls/Abstract","DS/Core/PointerEvents","DS/Utilities/Utils","DS/Windows/WindowManager","DS/Utilities/Dom","DS/Windows/WindowActivator","DS/Controls/Button","i18n!DS/Windows/assets/nls/translation","DS/Utilities/KeyboardUtils","DS/WebRecordEnabler/Adapter","DS/WebRecordBase/Constants","DS/Controls/TooltipModel"],function(d,a,l,f,b,q,m,g,h,j,k,o,p,r){function i(){if(this.elements.icon){this.elements.icon.remove(this.elements.iconPlaceholder);delete this.elements.icon}var s=m.generateIcon(this.icon);if(s){this.elements.icon=s;this.elements.iconPlaceholder.show();this.elements.icon.style.margin="0px";this.elements.icon.inject(this.elements.iconPlaceholder)}else{this.elements.iconPlaceholder.hide()}}var e=l.inherit({name:"window",markForRecordFlag:true,contentVisibleState:false,publishedProperties:{identifier:{defaultValue:undefined,type:"string",readOnly:true,category:"Behavior"},title:{defaultValue:"",type:"string",category:"Appearance"},icon:{defaultValue:"",type:"object",category:"Appearance"},header:{defaultValue:null,type:"object",category:"Appearance"},content:{defaultValue:null,type:"object",category:"Behavior"},immersiveFrame:{defaultValue:null,type:"object",category:"Behavior"},position:{type:"object",category:"Appearance",recordFlag:["my","at"]},activeFlag:{defaultValue:true,type:"boolean",category:"Behavior"},movableFlag:{defaultValue:true,type:"boolean",category:"Behavior"},closeButtonFlag:{defaultValue:true,type:"boolean",category:"Behavior"},expandedFlag:{defaultValue:true,type:"boolean",category:"Behavior",recordFlag:true},allowedDockAreas:{defaultValue:WUXDockAreaEnum.NoneDockArea,type:"integer",category:"Behavior"},currentDockArea:{defaultValue:WUXDockAreaEnum.NoneDockArea,type:"integer",category:"Behavior",advancedSetter:true,recordFlag:true},windowGroup:{defaultValue:null,type:"object",category:"Behavior",recordFlag:["_computedIdentifier"]},activeSnapArea:{defaultValue:WUXSnapAreaEnum.NoneArea,type:"integer",category:"Behavior"},resizableFlag:{defaultValue:false,type:"boolean",category:"Behavior"},width:{defaultValue:-1,type:"integer",category:"Appearance",advancedSetter:true,recordFlag:true},height:{defaultValue:-1,type:"integer",category:"Appearance",advancedSetter:true,recordFlag:true},minWidth:{defaultValue:150,defaultTouchValue:200,type:"integer",category:"Appearance"},minHeight:{defaultValue:0,type:"integer",category:"Appearance"},maximizedFlag:{defaultValue:false,type:"boolean",category:"Behavior",recordFlag:true},allowMaximizeFlag:{defaultValue:true,type:"boolean",category:"Behavior"},maximizeButtonFlag:{defaultValue:false,type:"boolean",category:"Behavior"},horizontallyStretchableFlag:{defaultValue:false,type:"boolean",category:"Behavior"},verticallyStretchableFlag:{defaultValue:false,type:"boolean",category:"Behavior"},autoCloseFlag:{defaultValue:true,type:"boolean",category:"Behavior"},titleBarVisibleFlag:{defaultValue:true,type:"boolean",category:"Appearance"},usePaddingFlag:{defaultValue:true,type:"boolean",category:"Appearance"},ensureHeightDefinitionOnHierarchy:{defaultValue:false,type:"boolean",category:"Behavior"},activateButtonsIfActionPerformed:{defaultValue:true,type:"boolean",category:"Behavior"},buttons:{defaultValue:{},type:"object",category:"Behavior"},touchMode:{defaultValue:undefined,type:"boolean",category:"Accessibility",advancedSetter:true}},_titleBarCenteredFlag:false,_buttonsVisibleFlag:true,_savedPreferencesKeys:[],buildView:function(){o.setElementRecordMode(this.elements.container,p.RecordModes.DEFAULT_AND_CHILD);this.defaultButton=null;this.escapeButton=null;this.elements.container.addClassName("wux-windows-window wux-element-contentbox");this.elements.container.id=d.Utils.getUUID();this.elements._titleBarDiv=new d.Element("div",{"class":"wux-windows-window-titlebar wux-element-contentbox"});this.elements._titleBarDiv.inject(this.elements.container);this.elements._titleDiv=new d.Element("div",{"class":"wux-windows-window-header-title"}).inject(this.elements._titleBarDiv);this.elements.iconPlaceholder=new d.Element("div",{"class":"wux-window-icon-placeholder"}).inject(this.elements._titleDiv);this.elements._titleP=new d.Element("p",{text:this.title,});this.elements._titleP.inject(this.elements._titleDiv);this.elements._titlebarButtonsDiv=new d.Element("div",{"class":"wux-windows-window-header-buttons-div"});this.elements._titlebarButtonsDiv.inject(this.elements._titleBarDiv);this.elements._mainCollapsibleContainer=new d.Element("div",{"class":"wux-windows-window-mask-content"});this.elements._mainCollapsibleContainer.inject(this.elements.container);this.elements._mainContentDiv=new d.Element("div",{"class":"wux-windows-window-maincontent wux-element-contentbox"});this.elements._mainContentDiv.inject(this.elements._mainCollapsibleContainer);this.elements._headerDiv=new d.Element("div",{"class":"wux-windows-window-header wux-element-contentbox"});this.elements._headerDiv.inject(this.elements._mainContentDiv);this.elements._contentDiv=new d.Element("div",{"class":"wux-windows-window-content wux-element-contentbox"});this.elements._contentDiv.inject(this.elements._mainContentDiv);this.elements._ghostFloatableElement=new d.Element("div",{"class":"wux-windows-window-ghost-floatable-element"});this.elements._topResizeHandler=new d.Element("div",{"class":"wux-windows-window-resize-handler wux-windows-window-resize-handler-top wux-windows-window-resize-handler-side"});this.elements._topResizeHandler.inject(this.elements.container);this.elements._topRightResizeHandler=new d.Element("div",{"class":"wux-windows-window-resize-handler wux-windows-window-resize-handler-top-right wux-windows-window-resize-handler-corner"});this.elements._topRightResizeHandler.inject(this.elements.container);this.elements._rightResizeHandler=new d.Element("div",{"class":"wux-windows-window-resize-handler wux-windows-window-resize-handler-right wux-windows-window-resize-handler-side"});this.elements._rightResizeHandler.inject(this.elements.container);this.elements._bottomRightResizeHandler=new d.Element("div",{"class":"wux-windows-window-resize-handler wux-windows-window-resize-handler-bottom-right wux-windows-window-resize-handler-corner"});this.elements._bottomRightResizeHandler.inject(this.elements.container);this.elements._bottomResizeHandler=new d.Element("div",{"class":"wux-windows-window-resize-handler wux-windows-window-resize-handler-bottom wux-windows-window-resize-handler-side"});this.elements._bottomResizeHandler.inject(this.elements.container);this.elements._bottomLeftResizeHandler=new d.Element("div",{"class":"wux-windows-window-resize-handler wux-windows-window-resize-handler-bottom-left wux-windows-window-resize-handler-corner"});this.elements._bottomLeftResizeHandler.inject(this.elements.container);this.elements._leftResizeHandler=new d.Element("div",{"class":"wux-windows-window-resize-handler wux-windows-window-resize-handler-left wux-windows-window-resize-handler-side"});this.elements._leftResizeHandler.inject(this.elements.container);this.elements._topLeftResizeHandler=new d.Element("div",{"class":"wux-windows-window-resize-handler wux-windows-window-resize-handler-top-left wux-windows-window-resize-handler-corner"});this.elements._topLeftResizeHandler.inject(this.elements.container);this.elements._topSnapAreaDiv=new d.Element("div",{"class":"wux-windows-window-snap-area wux-windows-window-snap-area-top"});this.elements._topSnapAreaDiv.inject(this.elements.container);this.elements._bottomSnapAreaDiv=new d.Element("div",{"class":"wux-windows-window-snap-area wux-windows-window-snap-area-bottom"});this.elements._bottomSnapAreaDiv.inject(this.elements.container);this.elements._leftSnapAreaDiv=new d.Element("div",{"class":"wux-windows-window-snap-area wux-windows-window-snap-area-left"});this.elements._leftSnapAreaDiv.inject(this.elements.container);this.elements._rightSnapAreaDiv=new d.Element("div",{"class":"wux-windows-window-snap-area wux-windows-window-snap-area-right"});this.elements._rightSnapAreaDiv.inject(this.elements.container);this.elements._insideSnapAreaDiv=new d.Element("div",{"class":"wux-windows-window-snap-area wux-windows-window-snap-area-inside"});this.elements._insideSnapAreaDiv.inject(this.elements._titleBarDiv)},_postBuildView:function(){this._parent();this._updateContentVisibleStateChange();var s=this;m.onNodeRendered(this.getContent(),function(){if(s&&s.elements&&s.elements.container){if(s.activeFlag===true){s._setFocus()}s._applyHeight();s._updateTitleMaxWidth()}})},_applyTitle:function(s){this.elements._titleP.setText(this.title);if(!this.title){this.elements._titleP.setStyle("padding-left","0")}else{this.elements._titleP.setStyle("padding-left","")}if(this.windowGroup){this.windowGroup._updateTitle()}},_applyTouchMode:function(){this._parent();var s=this._getCurrentTouchMode();if(s===true){this.elements._titleBarDiv.setAttributeNode(document.createAttribute("touch-mode"))}else{this.elements._titleBarDiv.removeAttribute("touch-mode")}this._postEditTouchMode()},_postEditTouchMode:function(){this._parent();var s=this._getCurrentTouchMode();if(this.windowGroup){this.windowGroup.touchMode=s}if(s===true){if(this.minWidth===this.publishedProperties.minWidth.defaultValue){this.minWidth=this.publishedProperties.minWidth.defaultTouchValue}}else{if(this.minWidth===this.publishedProperties.minWidth.defaultTouchValue){this.minWidth=this.publishedProperties.minWidth.defaultValue}}this._applyWidth();this._applyHeight();this._applyPosition();this._updateTitleMaxWidth()},getDefaultButtonLabel:function(t){var s;switch(t){case WUXStandardButtonEnum.Ok.name:s=j.ok;break;case WUXStandardButtonEnum.Open.name:s=j.open;break;case WUXStandardButtonEnum.Save.name:s=j.save;break;case WUXStandardButtonEnum.Cancel.name:s=j.cancel;break;case WUXStandardButtonEnum.Close.name:s=j.close;break;case WUXStandardButtonEnum.Discard.name:s=j.discard;break;case WUXStandardButtonEnum.Apply.name:s=j.apply;break;case WUXStandardButtonEnum.Reset.name:s=j.reset;break;case WUXStandardButtonEnum.RestoreDefaults.name:s=j.restoreDefaults;break;case WUXStandardButtonEnum.Help.name:s=j.help;break;case WUXStandardButtonEnum.SaveAll.name:s=j.saveAll;break;case WUXStandardButtonEnum.Yes.name:s=j.yes;break;case WUXStandardButtonEnum.YesToAll.name:s=j.yesToAll;break;case WUXStandardButtonEnum.No.name:s=j.no;break;case WUXStandardButtonEnum.NoToAll.name:s=j.noToAll;break;case WUXStandardButtonEnum.Abort.name:s=j.abort;break;case WUXStandardButtonEnum.Retry.name:s=j.retry;break;case WUXStandardButtonEnum.Ignore.name:s=j.ignore;break}return s},_applyIcon:function(t){if(typeof(this.icon)==="object"){if(!this.icon.iconClasses){this.icon.iconClasses=""}if(!this.icon.iconName){this.icon.iconName=""}if(typeof this.icon.fontIconFamily==="undefined"){this.icon.fontIconFamily=WUXManagedFontIcons.Font3DS}if(!this.icon.fontIconSize){this.icon.fontIconSize="1x"}}else{if(typeof(this.icon)==="string"&&this.icon.indexOf(".")===-1&&this.icon!==""){var s={iconName:this.icon};this.icon=s}}i.call(this);if(this.icon){this.elements.iconPlaceholder.setStyle("padding-left","");this.elements.iconPlaceholder.setStyle("padding-right","")}else{this.elements.iconPlaceholder.setStyle("padding-left","0");this.elements.iconPlaceholder.setStyle("padding-right","0")}if(this.windowGroup){this.windowGroup._updateTitle()}},_applyHeader:function(s){this.elements._headerDiv.setContent(this.header);if(this.header){this.elements._headerDiv.show()}else{this.elements._headerDiv.hide()}this._applyPosition()},_applyContent:function(s){this.elements._contentDiv.setContent(this.content);this._applyPosition()},_applyPosition:function(t){if(!this.position){this.position={}}if(!this.position.my){this.position.my="top left"}if(!this.position.at){this.position.at="top left"}if(!this.position.of){if(this.immersiveFrame){this.position.of=this.immersiveFrame.getContent()}else{this.position.of=document.body}}if(!this.position.constraint&&this.immersiveFrame){this.position.constraint=this.immersiveFrame.getContent()}if(!this.position.offsetX){this.position.offsetX=0}if(!this.position.offsetY){this.position.offsetY=0}if(!this.position.collision){this.position.collision="fit"}if(!this.getEmbeddedState()&&!(this.maximizedFlag&&this.allowMaximizeFlag)){var s=b.setPosition(this,this.position);if(s){this.fire("move")}}},_applyActiveFlag:function(){if(this.windowGroup){if(this.activeFlag){this.windowGroup.activeFlag=this.activeFlag}}else{if(this.activeFlag){if(q.getActiveWindow()!=this){q.setActiveWindow(this);this.bringToFront()}}else{if(q.getActiveWindow()===this){q.setActiveWindow(null)}}}if(this.activeFlag){this.fire("activate");this._setFocus(this.elements._contentDiv)}else{this.fire("deactivate");this._unsetFocus()}},_setFocus:function(t){var u=null;if(t!=undefined){u=t}var s=this.elements._contentDiv;if(this.visibleFlag){if(u==null){u=g.getFocusedWidget(s);if(u!=null){return}}if(u==null){u=g.FindFocusableInChildren(s,true);if(u==null){if(this.defaultButton){u=this.defaultButton.getContent()}if(u==null&&this.escapeButton){u=this.escapeButton.getContent()}}}if(u){u.focus();u.style.outline="none"}}},_unsetFocus:function(){var s=this.lastFocusedWidget;if(s&&s==document.activeElement){s.blur();if(focusableWidget.dsModel!=undefined&&focusableWidget.dsModel!=null){focusableWidget.dsModel._resetFocus()}}},_applyCloseButtonFlag:function(){if(this.closeButtonFlag){var s=this;if(!this.elements._closeButton){this.elements._closeButton=new d.Element("button",{"class":"wux-windows-window-header-button wux-windows-window-header-close wux-ui-3ds wux-ui-3ds-wrong"});this.elements._closeButton.tooltipInfos=new r({owner:this.elements._closeButton,shortHelp:j.close});m.addEventOnElement(s,s.elements._closeButton,"click",function(t){t.stopPropagation();s._onCloseButtonClick()})}this.elements._closeButton.inject(this.elements._titlebarButtonsDiv,"bottom")}else{if(this.elements._closeButton){this.elements._closeButton.remove()}}if(this.windowGroup){this.windowGroup._updateCloseButtonFlag()}this._updateTitleMaxWidth()},_applyExpandedFlag:function(s){var u=this;if(this.expandedFlag){this.elements._mainContentDiv.addEventListener("transitionend",function t(x){if(x.target===u.elements._mainContentDiv){x.stopPropagation();u.elements._mainContentDiv.removeEventListener("transitionend",t);u.managePointerEvents()}});this.elements._mainContentDiv.removeClassName("wux-windows-window-maincontent-force-collapse");this.getContent().removeAttribute("collapsed");this.elements._mainContentDiv.setStyles({"margin-top":"0px"});if(this.expandedFlag&&!s){this.fire("expand")}}else{if(!this.expandedFlag){if(this.getCollapsibleState()){this.elements._mainContentDiv.addEventListener("transitionend",function w(x){if(x.target===u.elements._mainContentDiv){x.stopPropagation();u.elements._mainContentDiv.addClassName("wux-windows-window-maincontent-force-collapse");u.elements._mainContentDiv.removeEventListener("transitionend",w);u.managePointerEvents()}});var v=this.elements._mainContentDiv.getSize().height;this.elements._mainContentDiv.setStyles({"margin-top":"-"+v+"px"});this.getContent().setAttributeNode(document.createAttribute("collapsed"))}else{this.expandedFlag=true}if(!this.expandedFlag&&s){this.fire("collapse")}}}if(s!==undefined&&this.expandedFlag!==s){this._updateContentVisibleStateChange()}},_applyVisibleFlag:function(s){this._parent();if(this.activeFlag){this._setFocus()}this._updateContentVisibleStateChange();this.fire("visibleStateChange");if(this.immersiveFrame&&this.currentDockArea!==WUXDockAreaEnum.NoneDockArea){var t=this.immersiveFrame.getDockingElement(this.currentDockArea);if(t){t._updateFromContainedWindows();t._updateContainedWindows()}this.managePointerEvents()}if(this.visibleFlag){this._readWindowPreferences()}if(this.windowGroup){this.windowGroup._setWindowVisibility(this)}if(s===false&&this.visibleFlag){this._applyPosition()}},_applyMovableFlag:function(){if(this.windowGroup){this.windowGroup._updateMovableFlag()}},_applyEnsureHeightDefinitionOnHierarchy:function(){if(this.ensureHeightDefinitionOnHierarchy){this.getContent().setAttribute("ensureheightdefinitiononhierarchy","")}else{this.getContent().removeAttribute("ensureheightdefinitiononhierarchy","")}},_applyButtons:function(t){function x(A,z){if(!WUXStandardButtonEnum[A]||!WUXStandardButtonEnum[z]){return A-z}var C=WUXStandardButtonEnum[A].value;var B=WUXStandardButtonEnum[z].value;return C-B}if(this.elements._buttonsDiv!=undefined){while(this.elements._buttonsDiv.childNodes.length>0){var v=this.elements._buttonsDiv.childNodes[0];if(v&&v.dsModel instanceof h){v.remove()}else{break}}}this.defaultButton=null;this.escapeButton=null;if(this.elements._headerPopup){if(this.elements._panelButtonsDiv===undefined){this.elements._panelButtonsDiv=new d.Element("div",{"class":"wux-windows-expander-buttons"})}this.elements._panelButtonsDiv.inject(this.elements._buttonsDiv)}if(this.buttons){var w=Object.keys(this.buttons);w.sort(x);for(var u=0;u<w.length;u++){var s=w[u];if(s&&WUXStandardButtonEnum[s]){var v=this.buttons[s];if(v&&(v instanceof h)){var y=WUXStandardButtonEnum[s].role;if((y===WUXStandardButtonRoleEnum.AcceptRole)||(y===WUXStandardButtonRoleEnum.YesRole)){if(!this.defaultButton){this.defaultButton=v}}else{if((y===WUXStandardButtonRoleEnum.RejectRole)||(y===WUXStandardButtonRoleEnum.NoRole)){if(!this.escapeButton){this.escapeButton=v}}}v.value=s;v.dialog=this;if(this.elements._buttonsDiv!=undefined){if(this.elements._headerPopup&&this.elements._panelButtonsDiv){v.inject(this.elements._panelButtonsDiv)}else{v.inject(this.elements._buttonsDiv)}}}}else{console.log('Error in Window : "'+s+'" is not a valid standard button')}}}this._applyPosition()},getEmbeddedState:function(){return Boolean(this.getDockedFlag()||this.windowGroup)},getCollapsibleState:function(){return false},getFloatableState:function(){return true},getMovableState:function(){return(this.movableFlag)},getContentVisibleState:function(){var t=this.visibleFlag&&this.expandedFlag;if(this.windowGroup){t=t&&this.windowGroup.getContentVisibleState();var s=this.windowGroup.currentWindows;if(s!=undefined&&s.length!==0){if(s.indexOf(this)===-1){t=false}}}if(this.getDockedFlag()){if(this.immersiveFrame){var u=this.immersiveFrame.getDockingElement(this.currentDockArea);if(u){t=t&&(!u.collapseDockingZoneFlag)&&u.visibleDockingZoneFlag}}}return t},_updateContentVisibleStateChange:function(){var s=this.getContentVisibleState();if(this.contentVisibleState!==s){this.contentVisibleState=s;this.fire("contentVisibleStateChange",{contentVisibleState:this.contentVisibleState})}},getResizableFlag:function(){return this.resizableFlag},_updateFromEmbeddedState:function(){if(this.getEmbeddedState()){this.getContent().setAttributeNode(document.createAttribute("embedded"))}else{this.getContent().removeAttribute("embedded")}this._updateContentHeight()},_updateFromCollapsibleState:function(){if(this.getCollapsibleState()&&(this.allowMaximizeFlag||!this.maximizedFlag)){this.getContent().setAttributeNode(document.createAttribute("collapsible"))}else{this.getContent().removeAttribute("collapsible");this.expandedFlag=true}},_preEditCurrentDockArea:function(s,t){if((t!==WUXDockAreaEnum.NoneDockArea)&&(t!==WUXDockAreaEnum.TopDockArea)&&(t!==WUXDockAreaEnum.BottomDockArea)&&(t!==WUXDockAreaEnum.LeftDockArea)&&(t!==WUXDockAreaEnum.RightDockArea)){return false}else{if(!(this.allowedDockAreas&t)&&t!==WUXDockAreaEnum.NoneDockArea){return false}else{return true}}},_applyCurrentDockArea:function(v){if(this.immersiveFrame!==null&&this.immersiveFrame!==undefined){if(this.currentDockArea!==v){this.fire("prePlaceChange",{previousPlace:{currentDockArea:v}})}if(this.currentDockArea===WUXDockAreaEnum.NoneDockArea){if(!this.getFloatableState()){this.currentDockArea=v;return}if(!this.windowGroup||(this.windowGroup.currentDockArea!==this.currentDockArea)){this.windowGroup=null;if(v){this.immersiveFrame.undockWindow(this);if(this.activeFlag){this.bringToFront()}}}this.getContent().removeAttribute("docked")}else{if(this.windowGroup&&(this.windowGroup.currentDockArea!==this.currentDockArea)){this.windowGroup=null}this.immersiveFrame.dockWindow(this,this.currentDockArea);var t=document.createAttribute("docked");switch(this.currentDockArea){case WUXDockAreaEnum.TopDockArea:t.value="top";break;case WUXDockAreaEnum.BottomDockArea:t.value="bottom";break;case WUXDockAreaEnum.LeftDockArea:t.value="left";break;case WUXDockAreaEnum.RightDockArea:t.value="right";break}this.getContent().setAttributeNode(t)}this._applyResizableFlag();this._updateFromCollapsibleState();this._updateFromEmbeddedState();this._updateMinWidth();this._applyWidth();this._applyHeight();this._applyPosition();if((v!==undefined)&&(this.currentDockArea!==v)){this.fire("placeChange");this._fireAndBroadcast("resize",{bubbles:false})}var u=this.immersiveFrame.getDockingElement(v);if(u){if(this.immersiveFrame._ActionBar_V3&&(v===WUXDockAreaEnum.BottomDockArea||v===WUXDockAreaEnum.TopDockArea)){this._moveTitleBar(false,u)}u._updateFromContainedWindows();u._updateContainedWindows()}var s=this.immersiveFrame.getDockingElement(this.currentDockArea);if(s){s._updateFromContainedWindows();s._updateContainedWindows()}else{if(v===WUXDockAreaEnum.BottomDockArea){this._setTitleBarCenteredFlag(false)}}this.immersiveFrame._manageAllPointerEventsOnDockingElements()}},managePointerEvents:function(){if(this.immersiveFrame&&this.currentDockArea!==WUXDockAreaEnum.NoneDockArea){this.immersiveFrame.getDockingElement(this.currentDockArea)._pointerEventsAllIfOverflow()}},_applyImmersiveFrame:function(s){if(s!==undefined&&this.currentDockArea!==s){this.fire("prePlaceChange",{previousPlace:{immersiveFrame:s}})}if(s){s.removeWindow(this)}if(this.immersiveFrame){this.immersiveFrame.addWindow(this);this._readWindowPreferences();if(this.activeFlag){this.bringToFront()}this._properties.currentDockArea.dirty=false;this._applyCurrentDockArea();if(this.maximizedFlag){this._properties.maximizedFlag.dirty=false;this._applyMaximizedFlag()}this._updateMaxWidth();this._updateMaxHeight();this._applyHeight()}if((s!==undefined)&&(this.immersiveFrame!==s)){this.fire("placeChange")}},_applyWindowGroup:function(t){if(t!==undefined&&this.currentDockArea!==t){this.fire("prePlaceChange",{previousPlace:{windowGroup:t}})}if(t){t.detachWindow(this);t._updateAllowedDockAreas()}if(this.windowGroup){if(!this.windowGroup.containsWindow(this)){var v=null;var u=this.windowGroup.getEmbeddedWindows();if(u){v=u[u.length-1]}this.windowGroup.attachWindow(this,v,WUXSnapAreaEnum.InsideArea)}var s=document.createAttribute("attached-to-group");switch(this.windowGroup.groupType){case WUXWindowGroupTypeEnum.GroupAsGrid:s.value="grid";break;case WUXWindowGroupTypeEnum.GroupAsTab:s.value="tab";break}this.getContent().setAttributeNode(s);this.windowGroup._updateAllowedDockAreas()}else{this.getContent().removeAttribute("attached-to-group")}this._updateFromEmbeddedState();if((t!==undefined)&&(this.windowGroup!==t)){this._updateContentVisibleStateChange();this.fire("placeChange")}},_applyActiveSnapArea:function(t){if((this.activeSnapArea===WUXSnapAreaEnum.NoneArea)||(this.activeSnapArea===WUXSnapAreaEnum.OutsideArea)){this.getContent().removeAttribute("active-snap-area");this.elements._titleBarDiv.removeAttribute("active-snap-area")}else{var s=document.createAttribute("active-snap-area");switch(this.activeSnapArea){case WUXSnapAreaEnum.TopArea:s.value="top";break;case WUXSnapAreaEnum.BottomArea:s.value="bottom";break;case WUXSnapAreaEnum.LeftArea:s.value="left";break;case WUXSnapAreaEnum.RightArea:s.value="right";break;case WUXSnapAreaEnum.InsideArea:s.value="inside";var u=document.createAttribute("active-snap-area");u.value="inside";this.elements._titleBarDiv.setAttributeNode(u);break}this.getContent().setAttributeNode(s)}},_applyResizableFlag:function(s){if(this.resizableFlag===true||this.resizableFlag==="true"){this.getContent().addClassName("wux-windows-window-vertically-resizable");this.getContent().addClassName("wux-windows-window-horizontally-resizable")}else{if(this.resizableFlag==="vertical"){this.getContent().addClassName("wux-windows-window-vertically-resizable");this.getContent().removeClassName("wux-windows-window-horizontally-resizable")}else{if(this.resizableFlag==="horizontal"){this.getContent().addClassName("wux-windows-window-horizontally-resizable");this.getContent().removeClassName("wux-windows-window-vertically-resizable")}else{this.getContent().removeClassName("wux-windows-window-vertically-resizable");this.getContent().removeClassName("wux-windows-window-horizontally-resizable")}}}},_applyMinWidth:function(s){var u=this.minWidth;if(this.width&&this.width!==-1){if(this.width<u){this.width=u}}else{if(this.elements.container&&this.getContent().parentNode){var t=window.getComputedStyle(this.getContent());if(t&&(Math.round(t.width)<this.minWidth)){this.width=this.minWidth}}}if(this.windowGroup){this.windowGroup._updateMinWidth()}if(this.immersiveFrame&&(this.currentDockArea===WUXDockAreaEnum.LeftDockArea||this.currentDockArea===WUXDockAreaEnum.RightDockArea)){this.immersiveFrame.getDockingElement(this.currentDockArea)._updateFromContainedWindows()}},_updateMinWidth:function(){if(this.windowGroup){return}if(this.immersiveFrame&&this.immersiveFrame._ActionBar_V3&&(this.currentDockArea===WUXDockAreaEnum.TopDockArea||this.currentDockArea===WUXDockAreaEnum.BottomDockArea)&&!this.maximizedFlag){var x=this.elements._titleDiv;var v=window.getComputedStyle(x,null);var y=parseInt(v.borderLeft.slice(0,-2));var t=parseInt(v.borderRight.slice(0,-2));var u=parseInt(v.paddingLeft.slice(0,-2));var z=parseInt(v.paddingRight.slice(0,-2));var s=m.computeStringWidth(this.title,parseInt(v.fontSize),v.fontFamily)+u+z+y+t;var w=s+this._getDragZoneWidth()+3;if(w>this.minWidth){this._floatingMinWidth=this.minWidth;this.minWidth=w}}else{if(this._floatingMinWidth){this.minWidth=this._floatingMinWidth}}},_preEditWidth:function(s,u){var t=this.minWidth;if(u!==-1&&t!==undefined&&u<t){if(s>t){this.width=t}return false}return true},_applyWidth:function(s){this._updateMaxWidth();if(this.width===-1){this.getContent().setStyle("width","auto");this.elements._mainContentDiv.setStyle("width","auto");if(this.elements._footerDiv){this.elements._footerDiv.setStyle("width","100%")}}else{this.elements._mainContentDiv.setStyle("width",this.width+"px");if(this.currentDockArea===WUXDockAreaEnum.NoneDockArea||this.currentDockArea===WUXDockAreaEnum.TopDockArea||this.currentDockArea===WUXDockAreaEnum.BottomDockArea){if(this.elements._footerDiv){this.elements._footerDiv.setStyle("width",this.width+"px")}}else{if(this.elements._footerDiv){this.elements._footerDiv.setStyle("width","100%")}}}if(this.header!==null){this._updateContentHeight()}if((s!==undefined)&&(this.width!==s)){this._fireAndBroadcast("resize",{bubbles:false})}if(this.immersiveFrame){this.immersiveFrame._updateAllDockingZoneSize()}if(this.windowGroup&&this.windowGroup.width!==this.width){this.windowGroup._updateWidthAndHeight()}this._updateTitleBarWidth()},_updateTitleBarWidth:function(){if(this.currentDockArea===WUXDockAreaEnum.TopDockArea&&this.immersiveFrame&&this.immersiveFrame._ActionBar_V3&&this.immersiveFrame.getDockingElement(WUXDockAreaEnum.TopDockArea).getContainedVisibleWindows().length===1){var t=this.width!==-1?this.width:Math.round(parseFloat(window.getComputedStyle(this.elements._mainContentDiv).width));var s=Math.round(parseFloat(window.getComputedStyle(this.immersiveFrame.getDockingElement(WUXDockAreaEnum.TopDockArea).elements.dockingZone).width));if(t>s){t=s}t=Math.round(t);this.elements._titleBarDiv.setStyle("width",t+"px")}else{this.elements._titleBarDiv.setStyle("width","")}},_getDragZoneWidth:function(){if(!this._titleBarCenteredFlag){var s=this._getCurrentTouchMode()?36:22;return s+this.elements._titlebarButtonsDiv.clientWidth}return 0},_updateTitleMaxWidth:function(){var t=0;if(!this._titleBarCenteredFlag){var s=this._getCurrentTouchMode()?36:24;t=s+this.elements._titlebarButtonsDiv.clientWidth}this.elements._titleDiv.setStyle("max-width","calc(100% - "+t+"px)")},_preEditHeight:function(s,t){if(t!==null&&t!==undefined){if(t!==-1){if(t>=this.minHeight||!this.minHeight){var u=this._getFixedContentHeight();if(t<u){this.height=u;return false}}else{if(this.minHeight&&t<this.minHeight){this.height=this.minHeight;return false}}}}return true},_applyHeight:function(s){this._updateMaxHeight();if(this.height!==null&&this.height!==undefined){if(this.height===-1){this.elements._mainContentDiv.setStyle("height","")}else{this.elements._mainContentDiv.setStyle("height",this.height+"px")}this._updateContentHeight();if((s!==undefined)&&(this.height!==s)){this._fireAndBroadcast("resize",{bubbles:false})}}if(this.immersiveFrame){this.immersiveFrame._updateAllDockingZoneSize()}this._applyMinHeight();if(this.windowGroup){this.windowGroup._updateWidthAndHeight()}},getMaxWidth:function(){return this.immersiveFrame.getContent().clientWidth},getMaxHeight:function(){return this.immersiveFrame.getContent().clientHeight},_computeDropInsertionData:function(w){var v="after";var u=this.immersiveFrame._snapTargetWindow;if(!w){return{targetWindow:u,beforeOrAfter:v}}var s=this._getTitleWidth();var t=this.elements._titleDiv.getBoundingClientRect();if(w.x<t.x+s/2){v="before"}else{v="after"}return{targetWindow:u,beforeOrAfter:v}},_updateMaxWidth:function(){if(this.immersiveFrame&&this.immersiveFrame.elements&&this.immersiveFrame.elements.container&&this.immersiveFrame.getContent().clientWidth>0){if((this.currentDockArea===WUXDockAreaEnum.NoneDockArea)&&!this.windowGroup){var s=this.getMaxWidth();this.getContent().setStyle("maxWidth",s+"px");this.elements._titleBarDiv.setStyle("maxWidth",(s-2)+"px");this.elements._mainContentDiv.setStyle("maxWidth",(s-2)+"px");if(this.elements._footerDiv){this.elements._footerDiv.setStyle("maxWidth",(s-2)+"px")}}else{if(this._titleBarCenteredFlag&&this.isAWindowGroup()){this._updateMaxTabbarWidth()}this.getContent().setStyle("maxWidth","");this.elements._titleBarDiv.setStyle("maxWidth","");this.elements._mainContentDiv.setStyle("maxWidth","");if(this.elements._footerDiv){this.elements._footerDiv.setStyle("maxWidth","")}}}},_updateMaxHeight:function(){if(this.immersiveFrame&&this.immersiveFrame.elements&&this.immersiveFrame.elements.container&&this.immersiveFrame.getContent().clientHeight>0){if((this.currentDockArea===WUXDockAreaEnum.NoneDockArea)&&!this.windowGroup){var t=this.getMaxHeight();this.getContent().setStyle("maxHeight",t+"px");var s=this._getTitleBarHeight();var u=this._getFixedContentHeight();this.elements._contentDiv.setStyle("maxHeight",t-s-u+"px")}else{this.getContent().setStyle("maxHeight","");this.elements._contentDiv.setStyle("maxHeight","")}}},_getFixedContentHeight:function(){var t=this.elements._headerDiv?this.elements._headerDiv.offsetHeight:0;var u=this.elements._footerDiv?this.elements._footerDiv.offsetHeight:this.elements._buttonsDiv?this.elements._buttonsDiv.offsetHeight:0;var v=window.getComputedStyle(this.elements._contentDiv);var w=v?v.getPropertyValue("padding-top"):"";w=(w==="")?0:parseInt(w,10);var x=v?v.getPropertyValue("padding-bottom"):"";x=(x==="")?0:parseInt(x,10);var s=w+x;return t+u+s},_updateContentHeight:function(){var v=this._getFixedContentHeight();var u=this.currentDockArea;if((this.maximizedFlag&&!this.windowGroup&&this.allowMaximizeFlag)||(this.maximizedFlag&&this.windowGroup&&this.windowGroup.allowMaximizeFlag)||(u==WUXDockAreaEnum.TopDockArea||u==WUXDockAreaEnum.BottomDockArea)||(this.verticallyStretchableFlag&&(u==WUXDockAreaEnum.RightDockArea||u==WUXDockAreaEnum.LeftDockArea))){var t=0;var s=this.elements._titleBarDiv.getParent();if(s===this.elements.container){t=this._getTitleBarHeight()}if(t===0){this.elements._mainCollapsibleContainer.setStyle("height","100%")}else{this.elements._mainCollapsibleContainer.setStyle("height","calc(100% - "+t+"px)")}this.elements._contentDiv.setStyle("height","calc(100% - "+v+"px)")}else{this.elements._mainCollapsibleContainer.setStyle("height","");if(this.height==-1){this.elements._contentDiv.setStyle("height","auto")}else{this.elements._contentDiv.setStyle("height",(this.height-v)+"px")}}},_applyMinHeight:function(s){var t=this.minHeight;if(this.height&&this.height!==-1){if(this.height<t){this.height=t}}var u=this._getFixedContentHeight();if(t!==undefined){this.elements._contentDiv.setStyle("min-height",(t-u)+"px")}else{this.elements._contentDiv.setStyle("min-height","")}if(this.windowGroup){this.windowGroup._updateMinHeight()}if(this.immersiveFrame&&(this.currentDockArea===WUXDockAreaEnum.TopDockArea||this.currentDockArea===WUXDockAreaEnum.BottomDockArea)){this.immersiveFrame.getDockingElement(this.currentDockArea)._updateFromContainedWindows()}},_applyMaximizedFlag:function(t){if(this.immersiveFrame){this._updateFromCollapsibleState();if(t!==undefined&&this.maximizedFlag!==t){this.fire("prePlaceChange",{previousPlace:{maximizedFlag:t}})}if(this.maximizedFlag&&this.allowMaximizeFlag){if(this.windowGroup){this.windowGroup.maximizedFlag=true}else{this.immersiveFrame.moveWindowToMaximizeZone(this)}var s=document.createAttribute("maximized");this.getContent().setAttributeNode(s);if(this.elements._maximizeButton){this.elements._maximizeButton.removeClassName("wux-ui-3ds-resize-full");this.elements._maximizeButton.addClassName("wux-ui-3ds-resize-small")}}else{this.getContent().removeAttribute("maximized");if(this.windowGroup&&this.windowGroup.maximizedFlag!==this.maximizedFlag){this.windowGroup=null}if(!this.getDockedFlag()&&!this.windowGroup&&this.currentDockArea===WUXDockAreaEnum.NoneDockArea){this._moveToImmersiveFrame();this.bringToFront()}else{if(!this.windowGroup&&this.currentDockArea!==WUXDockAreaEnum.NoneDockArea){this._applyCurrentDockArea(this.currentDockArea)}}if(this.elements._maximizeButton){this.elements._maximizeButton.removeClassName("wux-ui-3ds-resize-small");this.elements._maximizeButton.addClassName("wux-ui-3ds-resize-full")}}if(this.currentWindows){for(var v=0;v<this.getEmbeddedWindows().length;v++){var u=this.getEmbeddedWindows()[v];u.maximizedFlag=this.maximizedFlag}}this._updateContentHeight();if(t!==undefined&&this.maximizedFlag!==t){this._updateContentVisibleStateChange();this.fire("placeChange");this._fireAndBroadcast("resize,",{bubbles:false})}}},_applyAllowMaximizeFlag:function(s){if(!this.allowMaximizeFlag){this.maximizedFlag=false}this._applyMaximizeButtonFlag();if(this.windowGroup){this.windowGroup._updateAllowedDockAreas()}this._updateTitleMaxWidth()},_applyMaximizeButtonFlag:function(s){if(this.maximizeButtonFlag&&this.allowMaximizeFlag){if(!this.elements._maximizeButton){var t=this;this.elements._maximizeButton=new d.Element("button",{"class":"wux-windows-window-header-button wux-windows-window-header-maximize wux-ui-3ds"});if(this.maximizedFlag){this.elements._maximizeButton.addClassName("wux-ui-3ds-resize-small")}else{this.elements._maximizeButton.addClassName("wux-ui-3ds-resize-full")}m.addEventOnElement(t,t.elements._maximizeButton,"click",function(u){u.stopPropagation();t._onMaximizeButtonClick();t._saveMaximizeInPreferences()})}this.elements._maximizeButton.inject(this.elements._titlebarButtonsDiv,"top")}else{if(this.elements._maximizeButton){this.elements._maximizeButton.remove()}}if(this.windowGroup){this.windowGroup._updateMaximizeButtonFlag()}this._updateTitleMaxWidth()},_applyHorizontallyStretchableFlag:function(s){if(this.horizontallyStretchableFlag){this.getContent().addClassName("wux-windows-window-horizontally-stretchable");if(this.immersiveFrame&&this.immersiveFrame._ActionBar_V3){this.elements._titleBarDiv.addClassName("wux-windows-window-horizontally-stretchable")}}else{this.getContent().removeClassName("wux-windows-window-horizontally-stretchable");if(this.immersiveFrame&&this.immersiveFrame._ActionBar_V3){this.elements._titleBarDiv.removeClassName("wux-windows-window-horizontally-stretchable")}}this._applyResizableFlag();this.managePointerEvents();if(this.windowGroup){this.windowGroup._updateHorizontallyStretchableFlag()}if(this.immersiveFrame){var t=this.currentDockArea;if((t===WUXDockAreaEnum.TopDockArea)||(t===WUXDockAreaEnum.BottomDockArea)){var u=this.immersiveFrame.getDockingElement(t);if(u){u._updateFitToChildState()}}}this._updateTitleBarWidth()},_applyVerticallyStretchableFlag:function(s){if(this.verticallyStretchableFlag){this.getContent().addClassName("wux-windows-window-vertically-stretchable")}else{this.getContent().removeClassName("wux-windows-window-vertically-stretchable")}this._applyResizableFlag();this._updateContentHeight();this.managePointerEvents();if(this.windowGroup){this.windowGroup._updateVerticallyStretchableFlag()}},_applyTitleBarVisibleFlag:function(s){if(this.elements._titleBarDiv){if(this.titleBarVisibleFlag){this.elements._titleBarDiv.removeClassName("wux-windows-unvisible")}else{this.elements._titleBarDiv.addClassName("wux-windows-unvisible")}}},_applyUsePaddingFlag:function(){if(this.usePaddingFlag){this.getContent().removeAttribute("no-padding")}else{this.getContent().setAttributeNode(document.createAttribute("no-padding"))}},_applyAllowedDockAreas:function(t){if(this.windowGroup){this.windowGroup._updateAllowedDockAreas()}if(this.getFloatableState()&&this.currentDockArea==WUXDockAreaEnum.NoneDockArea){return}if(!(this.currentDockArea&this.allowedDockAreas)){if(this.getFloatableState()){this.currentDockArea=WUXDockAreaEnum.NoneDockArea}for(var s in WUXDockAreaEnum){if(WUXDockAreaEnum[s]!==WUXDockAreaEnum.NoneDockArea&&(WUXDockAreaEnum[s]&this.allowedDockAreas)){this.currentDockArea=WUXDockAreaEnum[s];break}}}},_applyProperties:function(s){this._parent(s);if(this.isDirty("immersiveFrame")){this._applyImmersiveFrame(s.immersiveFrame)}if(this.isDirty("title")){this._applyTitle(s.title)}if(this.isDirty("icon")){this._applyIcon(s.icon)}if(this.isDirty("header")){this._applyHeader(s.header)}if(this.isDirty("content")){this._applyContent(s.content)}if(this.isDirty("position")){this._applyPosition(s.position)}if(this.isDirty("activeFlag")){this._applyActiveFlag()}if(this.isDirty("closeButtonFlag")){this._applyCloseButtonFlag()}if(this.isDirty("currentDockArea")){this._applyCurrentDockArea(s.currentDockArea)}if(this.isDirty("windowGroup")){this._applyWindowGroup(s.windowGroup)}if(this.isDirty("activeSnapArea")){this._applyActiveSnapArea(s.activeSnapArea)}if(this.isDirty("resizableFlag")){this._applyResizableFlag(s.resizableFlag)}if(this.isDirty("width")){this._applyWidth(s.width)}if(this.isDirty("height")){this._applyHeight(s.height)}if(this.isDirty("expandedFlag")){this._applyExpandedFlag(s.expandedFlag)}if(this.isDirty("maximizedFlag")){this._applyMaximizedFlag(s.maximizedFlag)}if(this.isDirty("horizontallyStretchableFlag")){this._applyHorizontallyStretchableFlag(s.horizontallyStretchableFlag)}if(this.isDirty("verticallyStretchableFlag")){this._applyVerticallyStretchableFlag(s.verticallyStretchableFlag)}if(this.isDirty("titleBarVisibleFlag")){this._applyTitleBarVisibleFlag(s.titleBarVisibleFlag)}if(this.isDirty("usePaddingFlag")){this._applyUsePaddingFlag(s.usePaddingFlag)}if(this.isDirty("buttons")){this._applyButtons(s.buttons)}if(this.isDirty("ensureHeightDefinitionOnHierarchy")){this._applyEnsureHeightDefinitionOnHierarchy()}if(this.isDirty("touchMode")){this._postEditTouchMode()}this._applyMaximizeButtonFlag()},_setTitleBarCenteredFlag:function(s){if(this._titleBarCenteredFlag!==s){this._titleBarCenteredFlag=s;if(this.elements._titleBarDiv){if(this._titleBarCenteredFlag){this.elements._titleBarDiv.addClassName("wux-windows-window-titlebar-align-center");this.elements.container.addClassName("wux-windows-window-align-center")}else{this.elements._titleBarDiv.removeClassName("wux-windows-window-titlebar-align-center");this.elements.container.removeClassName("wux-windows-window-align-center")}}this._updateTitleMaxWidth()}this._setButtonsVisibleFlag(!s)},_moveTitleBar:function(s,u){if(this.elements._titleBarDiv){var t=this.elements._titleBarDiv.getParent();if(s&&u){var v=u._getFixedArea();if(v&&(t!==v)){this.elements._titleBarDiv.inject(v)}}else{if(t!==this.elements.container){this.elements._titleBarDiv.inject(this.elements.container,"top")}}}},_setButtonsVisibleFlag:function(s){if(this._buttonsVisibleFlag!==s){this._buttonsVisibleFlag=s;if(this.elements._titlebarButtonsDiv){if(this._buttonsVisibleFlag){this.elements._titlebarButtonsDiv.removeClassName("wux-windows-unvisible")}else{this.elements._titlebarButtonsDiv.addClassName("wux-windows-unvisible")}}}},getAbsolutePosition:function(){if(this.windowGroup&&(this.windowGroup.groupType===WUXWindowGroupTypeEnum.GroupAsTab)){return this.windowGroup.getAbsolutePosition()}return this.getContent().getPosition(document.body)},setAbsolutePosition:function(s){if(s){var t=this.getOffsetParentPosition();var v=this.getOffsetParentMargins();var w={x:s.x-t.x-v.left,y:s.y-t.y-v.top};var u=this._getReferencePosRelativeToOffsetParent();this.position.offsetX=w.x-u.x;this.position.offsetY=w.y-u.y;this._applyPosition()}},clonePosition:function(){var s={my:this.position.my,at:this.position.at,of:this.position.of,constraint:this.position.constraint,offsetX:this.position.offsetX,offsetY:this.position.offsetY,collision:this.position.collision};return s},getOffsetParentPosition:function(){var t=this.getContent().getOffsetParent();var s={x:0,y:0};if(t){s=t.getPosition(document.body)}return s},getOffsetParentMargins:function(){var u=this.getContent().getOffsetParent();var t={left:0,right:0,top:0,bottom:0};if(u){var s=window.getComputedStyle(u);if(s.marginLeft===""){t.left=0}else{t.left=parseInt(s.marginLeft,10)}if(s.marginRight===""){t.right=0}else{t.right=parseInt(s.marginRight,10)}if(s.marginTop===""){t.top=0}else{t.top=parseInt(s.marginTop,10)}if(s.marginBottom===""){t.bottom=0}else{t.bottom=parseInt(s.marginBottom,10)}}return t},getPositionRelativeToOffsetParent:function(){var s=this.getContent().getOffsetParent();return this.getContent().getPosition(s)},close:function(){this._isBeingClosed=true;this.fire("close");if(this.autoCloseFlag){this.destroy()}this._isBeingClosed=false},destroy:function(){if(this.windowGroup){this.windowGroup=null}if(q.getActiveWindow()===this){q.setActiveWindow(null)}this.immersiveFrame=null;this._parent()},getDockedFlag:function(){return(this.currentDockArea!==WUXDockAreaEnum.NoneDockArea)},getZIndex:function(){var s=parseInt(this.getContent().getStyle("z-index"));if(isNaN(s)){s=-1}return s},bringToFront:function(){if(this.windowGroup){this.windowGroup.bringToFront()}else{q.bringToFront(this)}},ensureVisible:function(){this.visibleFlag=true;this.expandedFlag=true;if(this.windowGroup){this.windowGroup.ensureVisible();var t=this.windowGroup.currentWindows;if(t!=undefined&&t.length!==0){if(t.indexOf(this)===-1){this.windowGroup.currentWindows=[this]}}}if(this.getDockedFlag()){if(this.immersiveFrame){var u=this.immersiveFrame.getDockingElement(this.currentDockArea);if(u){u.collapseDockingZoneFlag=false}}}var s=this.getContent();if(s){s.parentNode.scrollTop=s.offsetTop;s.parentNode.scrollLeft=s.offsetLeft}},getTitleBar:function(){return this.elements._titleBarDiv},_getTitleBarHeight:function(){return this.elements._titleBarDiv.offsetHeight},_getTitleWidth:function(){return this.elements._titleDiv.offsetWidth},_ensureTitleBarUnderPointer:function(x){var t=this.getOffsetParentPosition();var w=this.getOffsetParentMargins();var s=this.getContent().getSize();var v=this._getTitleBarHeight();var y=this.getPositionRelativeToOffsetParent();if((y.x+t.x+s.width<x.x)||(y.x+t.x>=x.x)){y.x=x.x-(s.width/2)-t.x-w.left}if((y.y+t.y+v<x.y)||(y.y+t.y>=x.y)){y.y=x.y-(v/2)-t.y-w.top}var u=this._getReferencePosRelativeToOffsetParent();this.position.offsetX=y.x-u.x;this.position.offsetY=y.y-u.y;this._applyPosition();if(this._initialPointerPosition){this._initialPointerPosition.x=x.x;this._initialPointerPosition.y=x.y}if(this._initialWindowOffset){this._initialWindowOffset.x=this.position.offsetX;this._initialWindowOffset.y=this.position.offsetY}},_canBeSnapSource:function(t,s){return false},_canBeSnapTarget:function(t,s){return false},getBoundingClientRect:function(){var w=this.getContent().getBoundingClientRect();var v=this.currentDockArea;if((v===WUXDockAreaEnum.BottomDockArea)||(v===WUXDockAreaEnum.TopDockArea)){var s=this.elements._titleBarDiv.getParent();if(s!==this.elements.container){var u=this._getTitleBarHeight();var t={top:w.top,left:w.left,bottom:w.bottom,right:w.right,x:w.x,y:w.y,width:w.width,height:w.height};w=t;w.top-=u;w.height+=u}}return w},_getSnapAreaRect:function(s){var v=this.getBoundingClientRect();var t=10;switch(s){case WUXSnapAreaEnum.OutsideArea:return v;break;case WUXSnapAreaEnum.TopArea:return{left:v.left,top:v.top,width:v.width,height:t};break;case WUXSnapAreaEnum.BottomArea:return{left:v.left,top:v.top+v.height-t,width:v.width,height:t};break;case WUXSnapAreaEnum.LeftArea:return{left:v.left,top:v.top,width:t,height:v.height};break;case WUXSnapAreaEnum.RightArea:return{left:v.left+v.width-t,top:v.top,width:t,height:v.height};break;case WUXSnapAreaEnum.InsideArea:var u=this._getTitleBarHeight();return{left:v.left,top:v.top,width:v.width,height:u};break}},isAWindowGroup:function(){return Boolean(this.getContent().hasClassName("wux-windows-windowgroup"))},attachToWindow:function(t,s,u){return this._attachToWindow(t,s,u,false)},_locateAndAttachToWindow:function(t,s,x){if(this.immersiveFrame){var v=t;if(t.charAt(0)==="["){var w=t.split(";");v=w[w.length-1];v=v.substring(0,v.length-1)}var u=this.immersiveFrame._getWindowFromIdentifier(v);if(u){this._attachToWindow(u,s,x,true);return true}}return false},_attachToWindow:function(v,B,z,F){var A=-1;if(this.elements&&this.elements.container){var u=this.isAWindowGroup();if(v&&!F){var w=this._getDetachedFromPreferences();if(v.windowGroup||v.isAWindowGroup()){var D=v.isAWindowGroup()?v:v.windowGroup;var C=D.getEmbeddedWindows();for(var y=0;y<C.length;y++){var G=C[y];if(G&&w.indexOf(G.identifier)!==-1){return -1}}}else{if(w.indexOf(v.identifier)!==-1){return -1}}}if(v&&(B!==WUXSnapAreaEnum.NoneArea)&&(B!==WUXSnapAreaEnum.OutsideArea)&&this._canBeSnapSource(v,B)&&v._canBeSnapTarget(this,B)){var t=v;var E=(B===WUXSnapAreaEnum.InsideArea)?WUXWindowGroupTypeEnum.GroupAsTab:WUXWindowGroupTypeEnum.GroupAsGrid;var x=v.isAWindowGroup()?v:null;if(!x||(x.groupType!==E)){x=v.windowGroup;if(x&&(x.groupType!==E)){if(E===WUXWindowGroupTypeEnum.GroupAsGrid){var s=this.windowGroup;if(s&&(s===x)){s.detachWindow(this);A=this._attachToWindow(v,B,z,F);this._applyHeight();this._applyWidth();v._postEditTouchMode();x._postEditTouchMode();return A}A=this._attachToWindow(x,B,z,F);this._postEditTouchMode();v._postEditTouchMode();x._postEditTouchMode();return A}x=null}}if(!x){x=v._createWindowGroup(E);if(x){x.immersiveFrame=v.immersiveFrame;x._stackWindowNextTo(v,null,WUXSnapAreaEnum.NoneArea,z,F);v._postEditTouchMode();x._postEditTouchMode()}}if(x){A=x._stackWindowNextTo(this,v,B,z,F);x._postEditTouchMode()}if(A){if(F&&(!u||this.getEmbeddedWindows().length!==0)){this._saveWindowGroupInPreferences()}}}}return A},_moveToImmersiveFrame:function(){if(this.immersiveFrame){this.immersiveFrame.moveWindowToImmersiveFrame(this)}},_getReferencePosRelativeToOffsetParent:function(){var s={my:this.position.my,at:this.position.at,of:this.position.of,offsetX:0,offsetY:0};return b.getPositionRelativeToOffsetParent(this,s)},_fireAndBroadcast:function(t,s){this.fire(t,s)},_onDragPointerDown:function(x){if(this.disabled){return}document.body.setAttributeNode(document.createAttribute("dragging"));var w=this;function u(A){A.preventDefault();w._onDragPointerMove(A)}function s(A){w._onDragPointerUp(A);m.removeEventOnElement(w,document,f.POINTERMOVE,u);m.removeEventOnElement(w,document,f.POINTERUP,s);w._savePositionInPreferences();w._saveDimensionsInPreferences();w._saveMaximizeInPreferences();document.body.removeAttribute("dragging");if(w.immersiveFrame){w.immersiveFrame._resetStackedWindowData()}}w.addEventListener("close",function(A){m.removeEventOnElement(w,document,f.POINTERMOVE,u);m.removeEventOnElement(w,document,f.POINTERUP,s)});if(this.getMovableState()){if(!this.getFloatableState()){if(this.immersiveFrame){this.elements._ghostFloatableElement.inject(this.immersiveFrame.elements.container)}this.elements._ghostFloatableElement.setStyles({width:this.elements.container.getStyle("width"),height:this.elements.container.getStyle("height")});if(!this._initialGhostWindowOffset){this._initialGhostWindowOffset={x:0,y:0}}var y=this.getPositionRelativeToOffsetParent();var t=this._getReferencePosRelativeToOffsetParent();this._initialGhostWindowOffset.x=y.x-t.x;this._initialGhostWindowOffset.y=y.y-t.y}this._initialPointerPosition.x=x.clientX;this._initialPointerPosition.y=x.clientY;var z=this.getPositionRelativeToOffsetParent();var v=this._getReferencePosRelativeToOffsetParent();this._initialWindowOffset.x=z.x-v.x;this._initialWindowOffset.y=z.y-v.y;m.addEventOnElement(this,document,f.POINTERMOVE,u);m.addEventOnElement(this,document,f.POINTERUP,s);this.fire("startWindowDrag")}},_onDragPointerMove:function(x){if(!this.disabled&&(x.button===0)){x.preventDefault();var u=x.clientX-this._initialPointerPosition.x;var t=x.clientY-this._initialPointerPosition.y;if(u!==0||t!==0){var s=Object.assign({},this.position);this.modifyObjectFromUIInteraction("position",{offsetX:this._initialWindowOffset.x+u,offsetY:this._initialWindowOffset.y+t});if(!this.getFloatableState()){if(!this.ghostPosition){this.ghostPosition=this.position}this.ghostPosition.offsetX=this._initialGhostWindowOffset.x+u;this.ghostPosition.offsetY=this._initialGhostWindowOffset.y+t;b.setPosition(this.elements._ghostFloatableElement,this.ghostPosition);this.elements._ghostFloatableElement.show()}else{if(this.maximizedFlag&&(Math.abs(u)>15||Math.abs(t)>15)){this.setPropertyFromUIInteraction("maximizedFlag",false);this._saveMaximizeInPreferences();var w={};w.x=x.clientX;w.y=x.clientY;this._ensureTitleBarUnderPointer(w)}}var v=this.immersiveFrame?this.immersiveFrame._computeFiringWindowDragEvents(this):this;v.fire("windowDrag",{x:x.clientX,y:x.clientY,deltaX:u,deltaY:t})}}},_onDragPointerUp:function(s){this.elements._ghostFloatableElement.hide();this._setFocus(this.elements._contentDiv);this.fire("stopWindowDrag",{x:s.clientX,y:s.clientY})},_onCloseButtonClick:function(s){this.callMethodFromUIInteraction("close")},_onMaximizeButtonClick:function(s){if(this.allowMaximizeFlag){this.setPropertyFromUIInteraction("maximizedFlag",!this.maximizedFlag)}},handleEvents:function(){var D=this;m.addEventOnElement(this,document,"touchChange",function(){D._applyWidth();D._applyHeight();D._applyPosition()});m.addEventOnElement(this,this.getContent(),"dimensionsChanged",function(K){if(D.height===-1||D.maximizedFlag){D._updateContentHeight()}if(D.height===-1||D.width===-1){D._applyPosition();if(D.windowGroup){D.windowGroup._updateTitleBarWidth()}else{D._updateTitleBarWidth()}}if(D.currentDockArea!==WUXDockAreaEnum.NoneDockArea){var J=D.immersiveFrame.getDockingElement(D.currentDockArea);if(J){J._pointerEventsAllIfOverflow()}}K.stopPropagation()});m.addEventOnElement(this,this.elements.container,"keydown",function(K){var J=null;switch(K.keyCode){case k.ENTER:J=D.defaultButton;D._keydownPressed=k.ENTER;break;case k.ESCAPE:J=D.escapeButton;D._keydownPressed=k.ESCAPE;break}if(J){K.stopPropagation()}});m.addEventOnElement(this,this.elements.container,"keyup",function(L){var K=null;if(!L.altKey&&!L.shiftKey&&!L.ctrlKey){switch(L.keyCode){case k.ENTER:K=D.defaultButton;break;case k.ESCAPE:K=D.escapeButton;break}if(K&&typeof D._keydownPressed!=="undefined"&&(D.activateButtonsIfActionPerformed||!L.actionPerformed)){D._keydownPressed=undefined;var J=document.createEvent("MouseEvents");J.initEvent("click",true,true);K.elements.button.dispatchEvent(J);L.stopPropagation();L.preventDefault()}}});if(!this._initialPointerPosition){this._initialPointerPosition={x:0,y:0}}if(!this._initialWindowOffset){this._initialWindowOffset={x:0,y:0}}if(!this._initialWindowSize){this._initialWindowSize={height:0,width:0}}function E(J){if(D.disabled){return}D.setPropertyFromUIInteraction("activeFlag",true)}m.addEventOnElement(this,D.elements.container,f.POINTERDOWN,E);function s(J){if(D.disabled){return}D.setPropertyFromUIInteraction("activeFlag",true);if(((J.target===D.elements._titleBarDiv)||(J.target===D.elements.iconPlaceholder)||(J.target===D.elements._titleP))&&(J.button===0)){D._onDragPointerDown(J)}}m.addEventOnElement(this,D.elements._titleBarDiv,f.POINTERDOWN,s);m.addEventOnElement(this,D.elements._titleBarDiv,f.POINTERHIT,function(J){if(J.multipleHitCount!==2){return}J.preventDefault();if(D.getCollapsibleState()&&((J.target===D.elements._titleBarDiv)||(J.target===D.elements.iconPlaceholder)||(J.target===D.elements._titleP))){J.stopPropagation();D.setPropertyFromUIInteraction("expandedFlag",!D.expandedFlag)}});var C=function(J,L){D._deltaPositionY=J-D._initialPointerPosition.y;if(D.position.collision==="fit"&&(D._initialBoundingRect.top+D._deltaPositionY)<0){D._deltaPositionY=-(D._initialBoundingRect.top)}var K=D._initialWindowSize.height-D._deltaPositionY;if(K<L){D._deltaPositionY=D._initialWindowSize.height-L}};function v(J){J.preventDefault();var K=D._getFixedContentHeight();C(J.clientY,K);D.setPropertyFromUIInteraction("height",D._initialWindowSize.height-D._deltaPositionY);D._deltaPositionY=D._initialWindowSize.height-D.height;n.call(D,null,"top","topHandlerPointerMove")}var u=function(J,N){D._deltaPositionY=J-D._initialPointerPosition.y;var M=D.immersiveFrame?D.immersiveFrame.getContent().clientHeight-D.immersiveFrame.getContent().clientTop:(document.body.clientHeight||window.innerHeight);var L=M-D._initialBoundingRect.bottom-D._deltaPositionY;if(D.position.collision==="fit"&&L<0){D._deltaPositionY=M-D._initialBoundingRect.bottom}var K=D._initialWindowSize.height+D._deltaPositionY;if(K<N){D._deltaPositionY=N-D._initialWindowSize.height}};function x(J){J.preventDefault();var K=D._getFixedContentHeight();u(J.clientY,K);D.setPropertyFromUIInteraction("height",D._initialWindowSize.height+D._deltaPositionY);D._deltaPositionY=D.height-D._initialWindowSize.height;n.call(D,null,"bottom","bottomHandlerPointerMove")}var w=function(J){D._deltaPositionX=J-D._initialPointerPosition.x;var L=D.immersiveFrame?D.immersiveFrame.getContent().clientWidth-D.immersiveFrame.getContent().clientLeft:(document.body.clientWidth||window.innerWidth);if(D.position.collision==="fit"&&(D._deltaPositionX>L-D._initialBoundingRect.right)){D._deltaPositionX=L-D._initialBoundingRect.right}var K=D._initialWindowSize.width+D._deltaPositionX;if(K<0){D._deltaPositionX=-(D._initialWindowSize.width)}};function I(K){K.preventDefault();w(K.clientX);var J=D._deltaPositionX;if(D.currentDockArea===WUXDockAreaEnum.BottomDockArea&&D.immersiveFrame.getDockingElement(WUXDockAreaEnum.BottomDockArea).alignment==="center"){J=2*D._deltaPositionX}D.setPropertyFromUIInteraction("width",D._initialWindowSize.width+J);D._deltaPositionX=D.width-D._initialWindowSize.width;n.call(D,"right",null,"rightHandlerPointerMove")}var z=function(J){D._deltaPositionX=J-D._initialPointerPosition.x;if(D.position.collision==="fit"&&(D._initialBoundingRect.left+D._deltaPositionX)<0){D._deltaPositionX=-(D._initialBoundingRect.left)}var K=D._initialWindowSize.width-D._deltaPositionX;if(K<0){D._deltaPositionX=D._initialWindowSize.width}};function G(J){J.preventDefault();z(J.clientX);D.setPropertyFromUIInteraction("width",D._initialWindowSize.width-D._deltaPositionX);D._deltaPositionX=D._initialWindowSize.width-D.width;n.call(D,"left",null,"leftHandlerPointerMove")}function B(J){v.call(D,J);G.call(D,J)}function A(J){v.call(D,J);I.call(D,J)}function t(J){x.call(D,J);I.call(D,J)}function H(J){x.call(D,J);G.call(D,J)}function F(K){D._fireAndBroadcast("stopResize");m.removeEventOnElement(D,document,f.POINTERMOVE,v);m.removeEventOnElement(D,document,f.POINTERMOVE,I);m.removeEventOnElement(D,document,f.POINTERMOVE,x);m.removeEventOnElement(D,document,f.POINTERMOVE,G);m.removeEventOnElement(D,document,f.POINTERMOVE,B);m.removeEventOnElement(D,document,f.POINTERMOVE,A);m.removeEventOnElement(D,document,f.POINTERMOVE,t);m.removeEventOnElement(D,document,f.POINTERMOVE,H);m.removeEventOnElement(D,document,f.POINTERUP,F);document.body.removeAttribute("resizing");if(D.immersiveFrame){var J=D.immersiveFrame.getDockingElement(D.currentDockArea);if(J){D.managePointerEvents();J._scrollToBottom()}}D._saveDimensionsInPreferences();D._savePositionInPreferences()}function y(K){if(D.disabled){return}document.body.setAttributeNode(document.createAttribute("resizing"));D.setPropertyFromUIInteraction("activeFlag",true);D._initialPointerPosition.x=K.clientX;D._initialPointerPosition.y=K.clientY;D._initialBoundingRect=D.elements.container.getBoundingClientRect();if(D.immersiveFrame&&D.currentDockArea===WUXDockAreaEnum.NoneDockArea){D._initialBoundingRect=c.call(D)}D._initialWindowSize.width=D.elements._mainContentDiv.clientWidth;D._initialWindowSize.height=D.elements._mainContentDiv.clientHeight;var L=D.getPositionRelativeToOffsetParent();var J=D._getReferencePosRelativeToOffsetParent();D._initialWindowOffset.x=L.x-J.x;D._initialWindowOffset.y=L.y-J.y}if(this.elements._resizeZone){m.addEventOnElement(this,this.elements._resizeZone,f.POINTERDOWN,function(J){D._fireAndBroadcast("startResize",{side:"bottom right",cursor:"nw-resize"});y(J);m.addEventOnElement(D,document,f.POINTERMOVE,t);m.addEventOnElement(D,document,f.POINTERUP,F)})}m.addEventOnElement(this,this.elements._topResizeHandler,f.POINTERDOWN,function(J){D._fireAndBroadcast("startResize",{side:"top",cursor:"s-resize"});y(J);m.addEventOnElement(D,document,f.POINTERMOVE,v);m.addEventOnElement(D,document,f.POINTERUP,F)});m.addEventOnElement(this,this.elements._bottomResizeHandler,f.POINTERDOWN,function(J){D._fireAndBroadcast("startResize",{side:"bottom",cursor:"s-resize"});y(J);m.addEventOnElement(D,document,f.POINTERMOVE,x);m.addEventOnElement(D,document,f.POINTERUP,F)});m.addEventOnElement(this,this.elements._rightResizeHandler,f.POINTERDOWN,function(J){D._fireAndBroadcast("startResize",{side:"right",cursor:"w-resize"});y(J);m.addEventOnElement(D,document,f.POINTERMOVE,I);m.addEventOnElement(D,document,f.POINTERUP,F)});m.addEventOnElement(this,this.elements._leftResizeHandler,f.POINTERDOWN,function(J){D._fireAndBroadcast("startResize",{side:"left",cursor:"w-resize"});y(J);m.addEventOnElement(D,document,f.POINTERMOVE,G);m.addEventOnElement(D,document,f.POINTERUP,F)});m.addEventOnElement(this,this.elements._topLeftResizeHandler,f.POINTERDOWN,function(J){D._fireAndBroadcast("startResize",{side:"top left",cursor:"nw-resize"});y(J);m.addEventOnElement(D,document,f.POINTERMOVE,B);m.addEventOnElement(D,document,f.POINTERUP,F)});m.addEventOnElement(this,this.elements._topRightResizeHandler,f.POINTERDOWN,function(J){D._fireAndBroadcast("startResize",{side:"top right",cursor:"sw-resize"});y(J);m.addEventOnElement(D,document,f.POINTERMOVE,A);m.addEventOnElement(D,document,f.POINTERUP,F)});m.addEventOnElement(this,this.elements._bottomRightResizeHandler,f.POINTERDOWN,function(J){D._fireAndBroadcast("startResize",{side:"bottom right",cursor:"nw-resize"});y(J);m.addEventOnElement(D,document,f.POINTERMOVE,t);m.addEventOnElement(D,document,f.POINTERUP,F)});m.addEventOnElement(this,this.elements._bottomLeftResizeHandler,f.POINTERDOWN,function(J){D._fireAndBroadcast("startResize",{side:"bottom left",cursor:"sw-resize"});y(J);m.addEventOnElement(D,document,f.POINTERMOVE,H);m.addEventOnElement(D,document,f.POINTERUP,F)})},_hasValidIdentifier:function(){if(this.identifier!==""){var s=Math.floor(Number(this.identifier));return((s<0)||(String(s)!==this.identifier))}return false},_saveDataInPreferences:function(s,t){if(this._hasValidIdentifier()){b.saveDataInLocalPreferences(this,windowPrefKey,s,t)}},_getDataFromPreferences:function(s){var t=undefined;if(this._hasValidIdentifier()){t=b.getDataFromLocalPreferences(this,windowPrefKey,s)}return t},_savePositionInPreferences:function(){if(this.identifier){var t=this;if(this.windowGroup){t=this.windowGroup}var u={my:t.position.my,at:t.position.at,collision:t.position.collision,offsetX:t.position.offsetX,offsetY:t.position.offsetY};var s="position";this._saveDataInPreferences(s,u);if(this._savedPreferencesKeys.indexOf(s)===-1){this._savedPreferencesKeys.push(s)}}},_getPositionFromPreferences:function(){return this._getDataFromPreferences("position")},_saveDimensionsInPreferences:function(){if(this.identifier){var t={height:this.height,width:this.width};var s="dimension";this._saveDataInPreferences(s,t);if(this._savedPreferencesKeys.indexOf(s)===-1){this._savedPreferencesKeys.push(s)}}},_getDimensionsFromPreferences:function(){return this._getDataFromPreferences("dimension")},_saveDockAreaInPreferences:function(){if(this.identifier){var t=this.currentDockArea;var s="dockArea";this._saveDataInPreferences(s,t);if(this._savedPreferencesKeys.indexOf(s)===-1){this._savedPreferencesKeys.push(s)}}},_getDockAreaFromPreferences:function(){return this._getDataFromPreferences("dockArea")},_saveMaximizeInPreferences:function(){if(this.identifier){var s=this.maximizedFlag;var t="maximizedFlag";this._saveDataInPreferences(t,s);if(this._savedPreferencesKeys.indexOf(t)===-1){this._savedPreferencesKeys.push(t)}}},_getMaximizedFlagFromPreferences:function(){return this._getDataFromPreferences("maximizedFlag")},_getWindowGroupAsTabFromPreferences:function(){var s=this._getDataFromPreferences("windowGroupAsTab");if(!s){s=[]}return s},_saveWindowGroupAsTabInPreferences:function(s){this._saveDataInPreferences("windowGroupAsTab",s)},_getSnappingFromPreferences:function(){var s=this._getDataFromPreferences("windowGroupAsGrid");if(!s){s=[]}return s},_saveSnappingInPreferences:function(s){this._saveDataInPreferences("windowGroupAsGrid",s)},_getDetachedFromPreferences:function(){var s=this._getDataFromPreferences("detachedFrom");if(!s){s=[]}return s},_saveDetachedInPreferences:function(s){this._saveDataInPreferences("detachedFrom",s)},_saveWindowGroupInPreferences:function(t){if(this.isAWindowGroup()){var B=this.getEmbeddedWindows();for(var z=0;z<B.length;z++){var v=B[z];if(v&&typeof v.identifier!=="undefined"){if(t&&(!t.isAWindowGroup()||t.getEmbeddedWindows().length!==0)){v._saveWindowGroupInPreferences(t)}}}return}else{if(this.identifier){if(t){var C=this._getDetachedFromPreferences();if(t.isAWindowGroup()){var B=t.getEmbeddedWindows();for(var z=0;z<B.length;z++){var v=B[z];if(v&&typeof v.identifier!=="undefined"){if((C.length===0||C.indexOf(v.identifier)===-1)&&v.identifier!==this.identifier){C.push(v.identifier)}else{}var u=v._getDetachedFromPreferences();if(u.length===0||u.indexOf(this.identifier)===-1){u.push(this.identifier);v._saveDetachedInPreferences(u)}else{}}}}else{if(typeof t.identifier!=="undefined"&&(C.length===0||C.indexOf(t.identifier)===-1)){C.push(t.identifier)}else{}var x=t._getDetachedFromPreferences();if((x.length===0||x.indexOf(this.identifier)===-1)&&typeof t.identifier!=="undefined"){x.push(this.identifier);t._saveDetachedInPreferences(x)}else{}}this._saveDetachedInPreferences(C);if(t.isAWindowGroup()){var B=t.getEmbeddedWindows();var A=this._getWindowGroupAsTabFromPreferences();for(var z=0;z<B.length;z++){var v=B[z];if(v&&typeof v.identifier!=="undefined"){this._saveWindowGroupAsTabInPreferences(this._locateAndRemoveWindowFromWGAsTabPreferencesArray(this,v.identifier,this._getWindowGroupAsTabFromPreferences()));v._saveWindowGroupAsTabInPreferences(this._locateAndRemoveWindowFromWGAsTabPreferencesArray(v,this.identifier,v._getWindowGroupAsTabFromPreferences()))}}}else{if(typeof t.identifier!=="undefined"){this._saveWindowGroupAsTabInPreferences(this._locateAndRemoveWindowFromWGAsTabPreferencesArray(this,t.identifier,this._getWindowGroupAsTabFromPreferences()));t._saveWindowGroupAsTabInPreferences(this._locateAndRemoveWindowFromWGAsTabPreferencesArray(t,this.identifier,t._getWindowGroupAsTabFromPreferences()))}}if(this.windowGroup){this._saveWindowGroupInPreferences()}}else{if(this.windowGroup){var E=this.windowGroup;var s;if(E.groupType===WUXWindowGroupTypeEnum.GroupAsTab){var w=[];if(E.windowGroup&&E.windowGroup.groupType===WUXWindowGroupTypeEnum.GroupAsGrid){s=E.windowGroup}var B=E.getEmbeddedWindows();for(var z=0;z<B.length;z++){var v=B[z];if(v&&typeof v.identifier!=="undefined"){w.push(v.identifier)}}for(var z=0;z<B.length;z++){var v=B[z];if(v&&typeof v.identifier!=="undefined"){v._saveWindowGroupAsTabInPreferences(v._addWGAsTabPreferences(w))}}for(var z=0;z<B.length;z++){var v=B[z];if(v&&typeof v.identifier!=="undefined"){var C=v._getDetachedFromPreferences();if(v.identifier===this.identifier){for(var y=0;y<w.length;y++){var D=w[y];if(C.indexOf(D)!==-1){C.splice(C.indexOf(D),1)}}v._saveDetachedInPreferences(C)}else{if(C.indexOf(this.identifier)!==-1){C.splice(C.indexOf(this.identifier),1);v._saveDetachedInPreferences(C)}}}}}else{if(E.groupType===WUXWindowGroupTypeEnum.GroupAsGrid){s=E}}if(s){}}else{console.log("Saving the preferences of a Window that is being attached to nothing... failed")}}}}},_locateAndRemoveWindowFromWGAsTabPreferencesArray:function(v,s,w){for(var t=0;t<w.length;t++){var u=w[t];if(u.indexOf(s)!==-1){u.splice(u.indexOf(s),1);if(u.length===1){if(u[0]===v.identifier){w.splice(t,1)}else{console.log("There is a WindowGroup preferences that is composed of only one Window, but it is not the Window in question")}}break}}return w},_addWGAsTabPreferences:function(t){var v=this._getWindowGroupAsTabFromPreferences();if(v.indexOf(t)!==-1){console.log("preferences for this WindowGroup have already been saved : "+this.identifier);return}for(var s=0;s<t.length;s++){var u=t[s];if(u!==this.identifier){v=this._locateAndRemoveWindowFromWGAsTabPreferencesArray(this,u,v)}}v.push(t);return v},_readWindowPreferences:function(){if(this._hasValidIdentifier()&&this.visibleFlag&&this.immersiveFrame&&this.immersiveFrame.containsWindow(this)&&!this._arePreferencesApplied){if(this.visibleFlag){var A=this._getDimensionsFromPreferences();if(A){this.height=A.height;this.width=A.width}}var w=this._getDockAreaFromPreferences();if(w!==undefined){this.currentDockArea=w}var D=this._getMaximizedFlagFromPreferences();if(D!==undefined){this.maximizedFlag=D}var E=this._getWindowGroupAsTabFromPreferences();if(E&&E.length>0){for(var s=E.length-1;s>=0;s--){var u=E[s];var G,y;var C;for(var z=0;z<u.length;z++){var t=u[z];if(t===this.identifier){G=z}else{if(this.immersiveFrame.windows[t]){if(G!==undefined){if(C){if(G-y>z-G){C=t;y=z;break}else{break}}else{C=t;y=z;break}}else{C=t;y=z}}}}if(G!==undefined&&C&&y!==undefined){var B=G<y?"before":"after";var v=this.immersiveFrame.windows[C];if(v.currentDockArea===this.currentDockArea&&v.maximizedFlag===this.maximizedFlag){this.attachToWindow(v,WUXSnapAreaEnum.InsideArea,B);break}else{C=undefined;y=undefined;G=undefined}}}}var F=this._getPositionFromPreferences();if(F){var x={};x.at=F.at;x.collision=F.collision;x.my=F.my;x.offsetX=F.offsetX;x.offsetY=F.offsetY;if(this.windowGroup){this.windowGroup.position=x}else{this.position=x}}this._arePreferencesApplied=true}},deleteWindowPreferences:function(){for(var w=0;w<this._savedPreferencesKeys.length;w++){var B=this._savedPreferencesKeys[w];b.deleteDataFromLocalPreferences(this,windowPrefKey,B)}var C=this._getDetachedFromPreferences();for(var w=0;w<C.length;w++){var y=C[w];var A=b.getDataFromLocalPreferences(y,windowPrefKey,"detachedFrom");A.splice(A.indexOf(this.identifier),1);b.saveDataInLocalPreferences(y,windowPrefKey,"detachedFrom",A)}b.deleteDataFromLocalPreferences(this,windowPrefKey,"detachedFrom");var s=this._getWindowGroupAsTabFromPreferences();for(var w=0;w<s.length;w++){var D=s[w];for(var v=0;v<D.length;v++){var x=D[v];if(x===this.identifier){continue}var z=b.getDataFromLocalPreferences(x,windowPrefKey,"windowGroupAsTab");if(z){for(var u=0;u<z.length;u++){var t=z[u];if(t.indexOf(this.identifier)!==-1){t.splice(t.indexOf(this.identifier),1)}if(t.length<=1){z.splice(u,1)}}b.saveDataInLocalPreferences(x,windowPrefKey,"windowGroupAsTab",z)}}}b.deleteDataFromLocalPreferences(this,windowPrefKey,"windowGroupAsTab")},_locateAndModifyWindowGroup:function(t){var s=t}});var n=function(v,t){var u=false;var s=undefined,y=undefined;if(t&&this.height>=this.minHeight){var x=this._getFixedContentHeight();if(this.height>=x){if(this.position.my.indexOf(t)>-1){y=this._initialWindowOffset.y+this._deltaPositionY;u=true}if((this.position.my.indexOf("center")>-1)||this.position.my==="left"||this.position.my==="right"){y=this._initialWindowOffset.y+(this._deltaPositionY/2);u=true}}}if(v&&this.width>=this.minWidth){if(this.position.my.indexOf(v)>-1){s=this._initialWindowOffset.x+this._deltaPositionX;u=true}if((this.position.my.indexOf("center")>-1)||this.position.my==="top"||this.position.my==="bottom"){s=this._initialWindowOffset.x+(this._deltaPositionX/2);u=true}}var w={};if(s!==undefined){w.offsetX=s}if(y!==undefined){w.offsetY=y}this.modifyObjectFromUIInteraction("position",w);return u};var c=function(){if(this.immersiveFrame){var s={};s.top=this.getContent().offsetTop-this.immersiveFrame.getContent().offsetTop;s.height=this.getContent().clientHeight;s.bottom=s.top+s.height;s.left=this.getContent().offsetLeft-this.immersiveFrame.getContent().offsetLeft;s.width=this.getContent().clientWidth;s.right=s.left+s.width;return s}};o.register(e,"DS/ControlsRec/AbstractRec");return e});define("DS/Windows/Dialog",["UWA/Core","DS/Windows/Window","DS/Controls/Button","DS/Utilities/Dom"],function(f,c,d,b){var a=c.inherit({name:"dialog",_modalDiv:undefined,publishedProperties:{modalFlag:{defaultValue:false,type:"boolean",category:"Behavior"}},buildView:function(){var g=this;this._parent();this.elements.container.addClassName("wux-windows-dialog");this.elements._footerDiv=new f.Element("div",{"class":"wux-windows-dialog-footer"});this.elements._footerDiv.inject(this.elements._mainContentDiv);this.elements._buttonsDiv=new f.Element("div",{"class":"wux-windows-dialog-buttons"});this.elements._buttonsDiv.inject(this.elements._footerDiv);this.elements._resizeZone=new f.Element("div",{"class":"wux-windows-dialog-resize-zone"});this.elements._resizeZone.inject(this.elements._footerDiv);this._applyCurrentDockArea();b.onNodeRendered(this.getContent(),function(){g._applyMinWidth()})},_applyRecId:function(h){this._parent(h);if(this.buttons){var l=Object.keys(this.buttons);for(var k=0;k<l.length;k++){var g=l[k];var j=this.buttons[g];if(j&&(j instanceof d&&!j.recId)){j.recId=this.recId+"_"+g}}}},_applyImmersiveFrame:function(g){this._parent(g);this._applyModalFlag()},_applyResizableFlag:function(g){this._parent(g);if(this.resizableFlag){this.elements._resizeZone.show();this.elements._footerDiv.addClassName("resize-padding")}else{this.elements._resizeZone.hide();this.elements._footerDiv.removeClassName("resize-padding")}},_applyPosition:function(g){if(!this.position){this.position={}}if(!this.position.my){this.position.my="center"}if(!this.position.at){this.position.at="center"}this._parent(g)},_applyButtons:function(h){this._parent(h);if(this.buttons){var l=Object.keys(this.buttons);for(var k=0;k<l.length;k++){var g=l[k];if(g&&WUXStandardButtonEnum[g]){var j=this.buttons[g];if(j&&(j instanceof d)){if(!j.label){j.label=this.getDefaultButtonLabel(g)}if(this.recId&&!j.recId){j.recId=this.recId+"_"+g}var m=WUXStandardButtonEnum[g].role;if((m===WUXStandardButtonRoleEnum.AcceptRole)||(m===WUXStandardButtonRoleEnum.YesRole)){j.emphasize="primary"}else{j.emphasize="secondary"}}}}}if(this.elements._buttonsDiv.childNodes.length===0){this.elements._footerDiv.hide()}else{this.elements._footerDiv.show()}this._applyMinWidth()},_applyMinWidth:function(){this._parent();var g=e.call(this);if(g>this.minWidth){this.minWidth=g}},_updateTitleMaxWidth:function(){var g=this.elements._titlebarButtonsDiv.clientWidth;this.elements._titleDiv.setStyle("max-width","calc(100% - "+g+"px)")},_applyModalFlag:function(){if(this.elements.container===undefined){return}var h=this.isDirty("modalFlag");if(this.modalFlag===true){this.elements.container.setAttributeNode(document.createAttribute("modal"));var g=this.elements.container.parentNode;if(g&&!this._modalDiv){this._modalDiv=new f.Element("div",{"class":"wux-windows-modalDialog"});var i=this._modalDiv;g.removeChild(this.elements.container);i.appendChild(this.elements.container);if(g.dsModel&&g.dsModel.rootContainer!==undefined){g=g.dsModel.rootContainer}g.appendChild(i);i.show()}}else{this.elements.container.removeAttribute("modal");var i=this._modalDiv;if(i&&i.hasClassName("wux-windows-modalDialog")){if(this.immersiveFrame){this._moveToImmersiveFrame()}else{var g=i.getParent();if(g!==undefined){g.removeChild(i);i.removeChild(this.elements.container);g.appendChild(this.elements.container)}}i.destroy();this._modalDiv=null}}},_moveToImmersiveFrame:function(){if(this.immersiveFrame&&!this.modalFlag){this.immersiveFrame.moveWindowToImmersiveFrame(this)}else{if(this.modalFlag){this._modalDiv.appendChild(this.elements.container)}}},_applyVisibleFlag:function(g){if(this.modalFlag===true){var h=this._modalDiv;if(h!==undefined){if(this.visibleFlag===false){h.hide()}else{h.show()}}}this._parent(g)},_applyProperties:function(g){var h=this.isDirty("modalFlag");this._parent(g);if(h){this._applyModalFlag()}if(this.isDirty("resizableFlag")){this._applyResizableFlag()}},_applyCurrentDockArea:function(h){this._parent(h);var g=this.elements._titleBarDiv.clientHeight;if(this.elements._buttonsDiv.childNodes.length>0){g=g+this.elements._footerDiv.clientHeight}if(g!==0){this.elements._mainCollapsibleContainer.setStyle("height","calc(100% - "+g+"px)")}},_applyMaximizedFlag:function(h){if(this.immersiveFrame){this._updateFromCollapsibleState();if(h!==undefined&&this.maximizedFlag!==h){this.fire("prePlaceChange",{previousPlace:{maximizedFlag:h}})}if(this.maximizedFlag&&this.allowMaximizeFlag){var g=document.createAttribute("maximized");this.getContent().setAttributeNode(g);if(this.elements._maximizeButton){this.elements._maximizeButton.removeClassName("wux-ui-3ds-resize-full");this.elements._maximizeButton.addClassName("wux-ui-3ds-resize-small")}}else{this.getContent().removeAttribute("maximized");if(this.elements._maximizeButton){this.elements._maximizeButton.removeClassName("wux-ui-3ds-resize-small");this.elements._maximizeButton.addClassName("wux-ui-3ds-resize-full")}}this._updateContentHeight();if(h!==undefined&&this.maximizedFlag!==h){this._updateContentVisibleStateChange();this.fire("placeChange");this._fireAndBroadcast("resize,",{bubbles:false})}}},destroy:function(){if(this._modalDiv){var g=this._modalDiv;this._modalDiv=null;this._parent();g.destroy()}else{this._parent()}}});var e=function(){if(this.buttons){var m=0;for(var g in this.buttons){var h=(window.getComputedStyle(this.buttons[g].getContent()))?window.getComputedStyle(this.buttons[g].getContent()).getPropertyValue("min-width"):"";h=(h==="")?0:parseInt(h,10);var j=(window.getComputedStyle(this.buttons[g].getContent()))?window.getComputedStyle(this.buttons[g].getContent()).getPropertyValue("margin-left"):"";j=(j==="")?0:parseInt(j,10);var i=(window.getComputedStyle(this.buttons[g].getContent()))?window.getComputedStyle(this.buttons[g].getContent()).getPropertyValue("margin-right"):"";i=(i==="")?0:parseInt(i,10);m=m+h+j+i}var k,l=0;if(this.elements._footerDiv){k=(window.getComputedStyle(this.elements._footerDiv))?window.getComputedStyle(this.elements._footerDiv).getPropertyValue("padding-left"):"";l=(window.getComputedStyle(this.elements._footerDiv))?window.getComputedStyle(this.elements._footerDiv).getPropertyValue("padding-right"):"";k=(k==="")?0:parseInt(k,10);l=(l==="")?0:parseInt(l,10)}m=m+k+l;return m}return 0};return a});define("DS/Windows/DockingElementForImmersiveFrame",["UWA/Core","DS/Controls/Abstract","DS/Core/PointerEvents","DS/Utilities/Utils","DS/Windows/DockingElement"],function(f,e,a,b,d){var c=d.inherit({buildView:function(){this._parent();this.elements.dockingWithCollapserContainer.addClassName("wux-windows-docking-element-immersiveFrameStyle");this.elements.dockingZoneMask.addClassName("wux-windows-docking-element-immersiveFrameStyle");this.elements.expanderBar=new f.Element("div",{"class":"wux-windows-docking-element-expanderBar"}).inject(this.elements.dockingZone,"before");this.elements.collapseIconContainer=new f.Element("div",{"class":"wux-windows-docking-element-collapse-icon-container"}).inject(this.elements.expanderBar);this.elements.collapseIcon=new f.Element("span",{"class":"wux-ui-3ds wux-ui-3ds-1x wux-windows-docking-element-collapseIcon"}).inject(this.elements.collapseIconContainer);this.useBordersFlag=false;this.useBackgroundFlag=false},_applyCollapseDockingZoneFlag:function(h){this._updatePinIcon();this._updateCollapserSize();var j=h?0:this.dockingZoneSize;var i=this.collapseDockingZoneFlag?this._scrollBarSize:0;var k=j+this._collapserSize+i;if(this.side&WUXDockAreaEnum.TopDockArea||this.side&WUXDockAreaEnum.BottomDockArea){this.elements.freeZone.setStyle("height","calc(100% - "+k+"px)")}else{if(this.side&WUXDockAreaEnum.LeftDockArea||this.side&WUXDockAreaEnum.RightDockArea){this.elements.freeZone.setStyle("width","calc(100% - "+k+"px)")}}if(this.side&WUXDockAreaEnum.LeftDockArea||this.side&WUXDockAreaEnum.RightDockArea){if(h){this.elements.dockingWithCollapserContainer.setStyle("width",this._collapserSize+"px")}else{this.elements.dockingWithCollapserContainer.setStyle("width",this.dockingZoneSize+this._collapserSize+this._scrollBarSize+"px")}}var g=this.elements.freeZone.getStyle("height");this._parent()},handleEvents:function(){var g=this;this._parent();this.elements.expanderBar.addEventListener("click",function(h){g._manageAutoCollapse();g._updatePinIcon()});this.elements.collapser.addEventListener("click",function(h){g._updatePinIcon()})},_updateContainedWindows:function(){if(this.side===WUXDockAreaEnum.BottomDockArea||this.side===WUXDockAreaEnum.TopDockArea){var k=null;var j=this.getContainedVisibleWindows();if(j.length===1){k=j[0]}if(k){k._moveTitleBar(true,this);k._updateTitleBarWidth()}var l=this.getContainedWindows();for(var g=0;g<l.length;g++){var h=l[g];if(h&&(h!==k)){h._moveTitleBar(false,this);h._updateTitleBarWidth()}}}this._parent()},_updateFromContainedWindows:function(){var h="left";if(this.side===WUXDockAreaEnum.BottomDockArea){var g=this.getContainedVisibleWindows();if(g.length===1){h="center"}}this.alignment=h;this._parent()},_updateCollapserSize:function(){if(!this.collapsibleFlag||!this.visibleDockingZoneFlag||!this.collapseDockingZoneFlag||(this.getContainedVisibleWindows().length===0)){this._collapserSize=0;this.elements.collapser.addClassName(this._hideClassName)}else{this._collapserSize=20;this.elements.collapser.removeClassName(this._hideClassName)}},_updatePinIcon:function(){if(!this.collapseDockingZoneFlag&&!this._collapseHoverFlag){this.elements.collapseIcon.removeClassName("wux-ui-3ds-pin");if(this.side&WUXDockAreaEnum.RightDockArea){this.elements.collapseIcon.removeClassName("wux-ui-3ds-open-left");this.elements.collapseIcon.removeClassName("wux-ui-3ds-open-up");this.elements.collapseIcon.removeClassName("wux-ui-3ds-open-down");this.elements.collapseIcon.addClassName("wux-ui-3ds-open-right")}else{if(this.side&WUXDockAreaEnum.BottomDockArea){this.elements.collapseIcon.removeClassName("wux-ui-3ds-open-right");this.elements.collapseIcon.removeClassName("wux-ui-3ds-open-left");this.elements.collapseIcon.removeClassName("wux-ui-3ds-open-up");this.elements.collapseIcon.addClassName("wux-ui-3ds-open-down")}else{if(this.side&WUXDockAreaEnum.LeftDockArea){this.elements.collapseIcon.removeClassName("wux-ui-3ds-open-right");this.elements.collapseIcon.removeClassName("wux-ui-3ds-open-up");this.elements.collapseIcon.removeClassName("wux-ui-3ds-open-down");this.elements.collapseIcon.addClassName("wux-ui-3ds-open-left")}else{if(this.side&WUXDockAreaEnum.TopDockArea){this.elements.collapseIcon.removeClassName("wux-ui-3ds-open-right");this.elements.collapseIcon.removeClassName("wux-ui-3ds-open-left");this.elements.collapseIcon.removeClassName("wux-ui-3ds-open-down");this.elements.collapseIcon.addClassName("wux-ui-3ds-open-up")}}}}}else{this.elements.collapseIcon.removeClassName("wux-ui-3ds-open-left");this.elements.collapseIcon.removeClassName("wux-ui-3ds-open-up");this.elements.collapseIcon.removeClassName("wux-ui-3ds-open-down");this.elements.collapseIcon.removeClassName("wux-ui-3ds-open-right");this.elements.collapseIcon.addClassName("wux-ui-3ds-pin")}},_pointerEventsAllIfOverflow:function(){if(this.elements&&this.elements.dockingZone){if(this._hasScrollbar()){this.elements.dockingZone.setStyle("pointer-events","all");this.elements.dockingZoneMask.removeClassName("wux-windows-docking-element-has-background")}else{if(this.side&WUXDockAreaEnum.TopDockArea){this.elements.dockingZoneMask.addClassName("wux-windows-docking-element-has-background");this.elements.dockingZone.setStyle("pointer-events","")}else{this.elements.dockingZoneMask.removeClassName("wux-windows-docking-element-has-background");this.elements.dockingZone.setStyle("pointer-events","")}}this._resetInteractiveDockArea()}},_getStretchSize:function(){if(this.side===WUXDockAreaEnum.TopDockArea||this.side==WUXDockAreaEnum.BottomDockArea){return parseInt(window.getComputedStyle(this.elements.dockingZoneMask).width)-parseInt(window.getComputedStyle(this.elements.expanderBar).width)-1}else{return parseInt(window.getComputedStyle(this.elements.dockingZoneMask).height)-parseInt(window.getComputedStyle(this.elements.expanderBar).height)-1}},});return c});define("DS/Windows/WindowGroup",["UWA/Core","UWA/Array","DS/Windows/Window","DS/Controls/Tab","DS/Core/PointerEvents","DS/Utilities/Dom","DS/Utilities/Utils"],function(e,b,j,h,f,a,g){Object.defineProperty(Array.prototype,"inter",{enumerable:false,writable:true,value:function(m){var k=[];var n=this.concat(m);for(var l=0;l<n.length;l++){var o=n[l];if(!(m.indexOf(o)!=-1&&this.indexOf(o)!=-1)){k.push(o)}}return k}});var c;c=j.inherit({publishedProperties:{groupType:{defaultValue:WUXWindowGroupTypeEnum.GroupAsTab,readOnly:true},currentWindows:{defaultValue:[]},width:{defaultValue:-1,type:"integer",category:"Appearance"},height:{defaultValue:-1,type:"integer",category:"Appearance"},},_computedIdentifier:"",buildView:function(){this._parent();this.elements.container.addClassName("wux-windows-windowgroup");this.elements._contentDiv.addClassName("wux-windows-windowgroup-content");this.elements._tabBarContainer=new e.Element("div",{"class":"wux-windows-windowgroup-tab-bar-container"});this.elements._tabBarContainer.inject(this.elements._titleDiv,"before");this.elements._titleDiv.hide();this.elements._draggableZoneDiv=new e.Element("div",{"class":"wux-windows-windowgroup-draggable-zone"});this.elements._draggableZoneDiv.inject(this.elements._titleP,"before");this._tab=new h({tabBarDOMContainer:this.elements._tabBarContainer,tabPanelContainer:this.elements._contentDiv,multiSelFlag:true,displayStyle:["panel","wide"],showComboBoxFlag:true,autoCloseFlag:false,reorderFlag:false});this._tab.tabBar.pinFlag=true;this._tab.tabBar.centeredFlag=false;this._tab.tabBar.closeButtonFlag=this.closeButtonFlag;this.allowedDockAreas=WUXDockAreaEnum.TopDockArea|WUXDockAreaEnum.BottomDockArea|WUXDockAreaEnum.LeftDockArea|WUXDockAreaEnum.RightDockArea},_applyTouchMode:function(){this._parent();this._postEditTouchMode()},_postEditTouchMode:function(){this._parent();var k=this._getCurrentTouchMode();if(this._tab){this._tab.touchMode=k}this._updateMaxTabbarWidth()},_applyCurrentWindows:function(k){var l=[];var u=[];var q=this._tab.tabBar.pinnedList;if(q){u=this._tab.getIndexesFromValues(q)}if(this.currentWindows!=undefined&&this.currentWindows.length!==0){if(this.currentWindows.length>=1){for(var o=0;o<this.currentWindows.length;o++){var r=this._getIndexFromWindow(this.currentWindows[o]);var t=this._tab.getPageValueFromIndex(r);if(u.length>0){var m=true;for(var p=0;p<u.length;p++){if(r==u[p]){m=false}}if(m||this._tab.tabBar.value.indexOf(t)!=-1){l.push(t)}}else{l.push(t)}}}if(!e.equals(this._tab.value,l)){this._tab.value=l}}this._updateResizableFlag();this._updateWidthAndHeight();this._updateMinWidth();this._updateMinHeight();this._updateMovableFlag();this._tab.tabBar._slideToValue();if(k){for(var p=0;p<k.length;p++){var s=k[p];if(s&&this.currentWindows.indexOf(s)==-1&&s.windowGroup===this){s.activeFlag=false}}}this._updateCurrentWindowsActiveFlag();if(this.currentDockArea!=WUXDockAreaEnum.NoneDockArea){var n=this.immersiveFrame.getDockingElement(this.currentDockArea);if(n){n._pointerEventsAllIfOverflow();n._updateDockingZoneSize()}}},_updateCurrentWindowsActiveFlag:function(){var m=this.getEmbeddedWindows();if(m){for(var l=0;l<m.length;l++){var k=m[l];if(k&&this.currentWindows&&this.currentWindows.indexOf(k)!=-1){k.activeFlag=this.activeFlag}else{if(k){k.activeFlag=false}}}}},_applyActiveFlag:function(){this._parent();this._updateCurrentWindowsActiveFlag()},_applyImmersiveFrame:function(l){this._parent(l);var o=this.immersiveFrame;var n=this.getEmbeddedWindows();for(var m=0;m<n.length;m++){var k=n[m];if(k){k.immersiveFrame=o}}},_applyCurrentDockArea:function(m){var p=this.currentDockArea;if((p===WUXDockAreaEnum.BottomDockArea)||(p===WUXDockAreaEnum.TopDockArea)){this._setTabMultiSelLayout("horizontal")}else{this._setTabMultiSelLayout("vertical")}this._parent(m);var k=this;var o=this.getEmbeddedWindows();for(var n=0;n<o.length;n++){var l=o[n];if(l){l.currentDockArea=p}}this._updateWidthAndHeight();this._updateMinWidth();this._tab.tabBar.redrawTabBar()},_applyRecId:function(k){this._parent(k);if(typeof this.recId!=="undefined"&&this.recId!==null){this._tab.recId=this.recId+"_Tab"}},_applyMinWidth:function(k){this._parent(k);var l=this.minWidth;if(l!==undefined){this.elements._mainContentDiv.setStyle("min-width",l+"px")}else{this.elements._mainContentDiv.setStyle("min-width","")}},_applyWidth:function(k){if(this.width!==null){this._updateMaxWidth();if(this.width===-1){this.getContent().setStyle("width","auto");this.elements._mainContentDiv.setStyle("width","auto");if(this.currentDockArea===WUXDockAreaEnum.NoneDockArea||this.currentDockArea===WUXDockAreaEnum.TopDockArea||this.currentDockArea===WUXDockAreaEnum.BottomDockArea){if(this.elements._footerDiv){this.elements._footerDiv.setStyle("width","calc(100% - 10px)")}}else{if(this.elements._footerDiv){this.elements._footerDiv.setStyle("width","calc(100% - 10px)")}}}else{if(typeof this.minWidth!=="undefined"){if(this.width>=this.minWidth){d.call(this,this.width);this.elements._mainContentDiv.setStyle("width",this.width+"px")}else{if(this.minWidth){this.width=this.minWidth}}}}if(k&&(this.width!==k)){this._fireAndBroadcast("resize",{bubbles:false})}}this._tab.tabBar.redrawTabBar();this._updateTitleBarWidth()},_applyHeight:function(k){this._updateMaxHeight();if(this.height!==null){if(this.height===-1){this.elements._mainContentDiv.setStyle("height","");this._updateContentHeight()}else{if(this.height>=this.minHeight){i.call(this,this.height);this._updateContentHeight()}else{this.height=this.minHeight}if(k&&(this.height!==k)){this.fire("resize",{bubbles:false})}}}},_applyMaximizedFlag:function(){this._parent();this._updateTabCloseButtons()},_applyCloseButtonFlag:function(){this._parent();this._updateMaxTabbarWidth()},_applyMaximizeButtonFlag:function(){this._parent();this._updateMaxTabbarWidth()},_applyAllowMaximizeFlag:function(){this._parent();this._updateMaxTabbarWidth()},_updateWidthAndHeight:function(){if(this.currentWindows.length>0){this._updateResizableFlag();var s=this._getTabMultiSelLayout()!=="horizontal";if(s){var q=this.currentWindows[0].width;var m=this.currentWindows[0].height===-1;var r=m?parseInt(window.getComputedStyle(this.currentWindows[0].getContent()).height):this.currentWindows[0].height;for(var p=1;p<this.currentWindows.length;p++){var n=this.currentWindows[p];if(n.width!==-1){q=q>n.width?q:n.width}if(n.height===-1){r=r+parseInt(window.getComputedStyle(n.getContent()).height)+1}else{m=false;r=r+n.height+1}}if(this.width!==q){this.width=q}else{this._applyWidth()}if(m){this.height=-1}else{if(r&&this.height!==r){this.height=r}else{this._applyHeight()}}}else{var t=this.currentWindows[0].height;var l=this.currentWindows[0].width===-1;var o=l?parseInt(window.getComputedStyle(this.currentWindows[0].getContent()).width):this.currentWindows[0].width;for(var p=1;p<this.currentWindows.length;p++){var n=this.currentWindows[p];if(n.resizableFlag===false||n.resizableFlag==="horizontal"){t=t>n.height?t:this.currentWindows[p].height}if(n.width===-1){o=o+parseInt(window.getComputedStyle(n.getContent()).width)+1}else{l=false;o=o+n.width+1}}if(l){this.width=-1}else{if(o&&this.width!==o){this.width=o}else{this._applyWidth()}}if(t&&this.height!==t){this.height=t}else{this._applyHeight()}}}},_updateMaxTabbarWidth:function(){var m=0;if(this.closeButtonFlag){m++}if(this.maximizeButtonFlag&&this.allowMaximizeFlag){m++}var k=24;if(this.touchMode){k=36}if(this._tab.tabBar.centeredFlag){var l="100%";var n=this.immersiveFrame.getDockingElement(this.currentDockArea);if(n){l=n._getFixedAreaWidth()-k+"px"}this.elements._tabBarContainer.setStyle("max-width",l)}else{this.elements._tabBarContainer.setStyle("max-width","calc(100% - "+k*(m+1)+"px)")}},_applyProperties:function(k){this._parent(k);if(this.isDirty("currentWindows")){this._applyCurrentWindows(k.currentWindows)}this._postEditTouchMode()},_setTitleBarCenteredFlag:function(k){this._parent(k);if(this._tab&&this._tab.tabBar){this._tab.tabBar.centeredFlag=k}if(this.elements._draggableZoneDiv){if(k){this.elements._draggableZoneDiv.hide()}else{this.elements._draggableZoneDiv.show()}}},_computeDropInsertionData:function(o){var l=-1;var s="after";var m=-1;var t=this._tab.tabBar._getVisibleTabButtons();var u=this.elements._titleBarDiv.getBoundingClientRect().left;var q=u;if(this._tab.tabBar.showComboBoxFlag&&this._tab.tabBar.tabComboBox&&this._tab.tabBar.tabComboBox.visibleFlag){var r=this._tab.tabBar.tabComboBox.getContent().getBoundingClientRect().right;if(o.x>r){return{movedWindowNewIndex:l,targetWindow:this._getWindowFromIndex(this.getEmbeddedWindows().length-1),beforeOrAfter:s,stopWindowGroupTabBarSliding:true}}}for(var n=0;n<t.length;n++){var p=this._tab.tabBar.getButtonFromValue(this._tab.getPageValueFromIndex(n));var k=p.getContent().getBoundingClientRect().left;var w=p.getContent().getBoundingClientRect().right;var v=0;if(w<=u){continue}else{if(k<=u){v=Math.abs(w-u)}else{v=this._tab.tabBar.getWidthOfButton(p)}}if(o.x<q+(v/2)){l=n;m=n;s="before";break}else{if(o.x<q+v){if(n+1<t.length){l=n+1}else{l=n}m=n;s="after";break}}q+=v}return{movedWindowNewIndex:l,targetWindow:(m!=-1)?this._getWindowFromIndex(m):this._getWindowFromIndex(this.getEmbeddedWindows().length-1),beforeOrAfter:s}},getCollapsibleState:function(){for(var k=0;k<this.currentWindows.length;k++){if(!this.currentWindows[k].collapsibleFlag){return false}}return((this.groupType===WUXWindowGroupTypeEnum.GroupAsTab)&&(this.currentDockArea!==WUXDockAreaEnum.TopDockArea)&&(this.currentDockArea!==WUXDockAreaEnum.BottomDockArea))},getFloatableState:function(){var n=true;var m=this.getEmbeddedWindows();for(var l=0;l<m.length;l++){var k=m[l];if(k){n=k.getFloatableState();if(!n){break}}}return n},getEmbeddedWindows:function(){var m=[];var n=this._tab.getPageCount();for(var l=0;l<n;l++){var k=this._getWindowFromIndex(l);m.push(k)}return m},getVisibleEmbeddedWindows:function(){var m=[];var n=this._tab.getPageCount();for(var l=0;l<n;l++){var k=this._getWindowFromIndex(l);if(k.visibleFlag){m.push(k)}}return m},containsWindow:function(k){var o=false;if(k){var n=this.getEmbeddedWindows();var m=n.length;while(m--){var l=n[m];if(l===k){o=true;break}}}return o},attachWindow:function(l,n,k){var m=-1;if(l){if(this.groupType===WUXWindowGroupTypeEnum.GroupAsTab){m=this._stackWindowNextTo(l,n,k,undefined)}else{}}if(m>0){}return m},_stackWindowNextTo:function(y,t,r,u,C){var D=this;function m(H){y._onDragPointerDown(H);var G=H.dsModel;var F=D._getWindowFromIndex(D._tab.getPageIndexFromValue(G.value));y.addEventListener("stopWindowDrag",function(){if(G&&F&&!D.containsWindow(F)){G.destroy();var I=D.getEmbeddedWindows();if(I.length===0){D.destroy()}}})}var E=-1;if(y){if(this.groupType===WUXWindowGroupTypeEnum.GroupAsTab){if(this.containsWindow(y)){return E}if(y&&y.isAWindowGroup()&&(y.groupType===WUXWindowGroupTypeEnum.GroupAsTab)){var n=y.getEmbeddedWindows();E=1;for(var v in n){var k=n[v];E=k._attachToWindow(t,r,u,C)===-1?-1:E}return E}if(y&&y._canBeSnapSource(t,r)&&(y!==t)&&(!t||((r===WUXSnapAreaEnum.InsideArea)&&t._canBeSnapTarget(y,r)))){var z=y.activeFlag;if(t){if(t===this){E=1}else{E=(this.containsWindow(t))?1:-1}}else{if(this.getEmbeddedWindows().length===0){E=1}}if(E<0){return E}var x=y.windowGroup;if(x){if(x===this&&this.containsWindow(y)){return 1}var o=false;var s=x.getAbsolutePosition();if(!t&&(x.groupType===WUXWindowGroupTypeEnum.GroupAsGrid)){E=x._attachToWindow(this,y,WUXSnapAreaEnum.BottomArea,u,C);if(E<0){return E}o=true}var p=x.detachWindow(y);if(o){x.setAbsolutePosition(s)}}if(t&&y.getDockedFlag()){y.currentDockArea=WUXDockAreaEnum.NoneDockArea}y.expandedFlag=true;if(y.resizableFlag===true||y.resizableFlag==="true"||y.resizableFlag==="vertical"||y.resizableFlag==="horizontal"){if(r===WUXSnapAreaEnum.InsideArea){if(y.resizableFlag===true||y.resizableFlag==="true"||y.resizableFlag==="horizontal"){y.width=this._getMonoSelectionWidth()}if(y.resizableFlag===true||y.resizableFlag==="true"||y.resizableFlag==="vertical"){if(t.height===-1){y.height=t.elements._mainContentDiv.clientHeight}else{y.height=t.height}}}}y.setPropertyFromUIInteraction("maximizedFlag",this.maximizedFlag);if(!t&&y.getDockedFlag()){this.setPropertyFromUIInteraction("currentDockArea",y.currentDockArea);this.inject(y.getContent(),"before")}var l=y.getAbsolutePosition();y.remove();var A;if(u){var w=this.getEmbeddedWindows();if(w.indexOf(t)!==-1){var q=w.indexOf(t);if(u==="before"){A=q}else{if(u==="after"){A=q+1}}}}this._tab.addTab(y.title,y.getContent(),A,true,undefined,y.icon,y.closeButtonFlag,y.showTitleFlag||!y.icon);y.windowGroup=this;this._updateRecId();var B=this._tab.tabBar.getButtonFromValue(this._tab.value[0]);if(B){a.addEventOnElement(this,B,f.POINTERDOWN,m)}if(this.getDockedFlag()){y.currentDockArea=this.currentDockArea}else{if(!t){if(y.getDockedFlag()){this.currentDockArea=y.currentDockArea}}}if(!t){this.setAbsolutePosition(l)}this._updateVisibleState();this._updateTitle();this._updateCloseButtonFlag();this._updateAllowedDockAreas();this._updateResizableFlag();this._updateMaximizedState();this._postEditTouchMode();this._updateTabCloseButtons();this._updateMaximizeButtonFlag();this._updateAllowMaximizeFlag();if(!y.visibleFlag){this._setWindowVisibility(y,y.visibleFlag)}if(this.activeFlag||z){this.activeFlag=true;this._updateCurrentWindows()}}}}this._updateComputedIdentifier();return E},detachWindow:function(k){return this._detachWindow(k,false)},_detachWindow:function(p,k){var n=-1;if(p){if(!this.containsWindow(p)){return n}if(this.groupType===WUXWindowGroupTypeEnum.GroupAsTab){var s=this.currentWindows.length;var m=this.getAbsolutePosition();n=1;var o=this.activeFlag;this.activeFlag=false;p.getContent().hide();var l=this.getEmbeddedWindows().length===2?(this.getEmbeddedWindows()[0]===p?this.getEmbeddedWindows()[1]:this.getEmbeddedWindows()[0]):this;if(k&&this.getEmbeddedWindows().length!==1){this._tab.removeTab(p.getContent(),true)}else{this._tab.removeTab(p.getContent(),false)}if(p.windowGroup===this){p.windowGroup=null}if(k){p._saveWindowGroupInPreferences(l)}if(!p._isBeingClosed){if(this.immersiveFrame){if(p.getDockedFlag()){this.immersiveFrame.dockWindow(p,p.currentDockArea)}else{this.immersiveFrame.moveWindowToImmersiveFrame(p)}}if(p.visibleFlag){p.getContent().show()}p._updateFromEmbeddedState()}var q=this.getEmbeddedWindows();if(q.length===0){var m;var r=this.windowGroup;if(r&&!p._isBeingClosed){m=r.getAbsolutePosition();n=r.attachWindow(p,this,WUXSnapAreaEnum.BottomArea)}else{if(this.immersiveFrame){this.immersiveFrame.dockWindow(p,this.currentDockArea);p.inject(this.getContent(),"before")}}if(k){this.visibleFlag=false}else{this.destroy()}if(r){r.setAbsolutePosition(m);return n}}else{this._updateVisibleState();this._updateCloseButtonFlag();this._updateMaximizeButtonFlag();this._updateAllowMaximizeFlag();this._applyResizableFlag();if(q.length===1){var l=q[0];this._detachWindow(l,k);l.maximizedFlag=this.maximizedFlag}if(q.length>=1){p.maximizedFlag=false}}if(o){p.activeFlag=true}p.setAbsolutePosition(m);p._applyWidth();p._applyHeight();if(q.length>1){this._updateTitle();this._updateAllowedDockAreas();this._updateMovableFlag()}}}this._updateComputedIdentifier();this._updateRecId();return n},_createWindowGroup:function(k){return new c({groupType:k,immersiveFrame:this.immersiveFrame})},_canBeSnapSource:function(p,k){var o=true;var n=this.getEmbeddedWindows();for(var m=0;m<n.length;m++){var l=n[m];if(l){o=l._canBeSnapSource(p,k);if(!o){break}}}return o},_canBeSnapTarget:function(l,k){var p=true;var o=this.getEmbeddedWindows();for(var n=0;n<o.length;n++){var m=o[n];if(m){p=m._canBeSnapTarget(l,k);if(!p){break}}}return p},attachToWindow:function(q,k){var m=-1;if(q&&(k!==WUXSnapAreaEnum.NoneArea)&&(k!==WUXSnapAreaEnum.OutsideArea)&&this._canBeSnapSource(q,k)&&q._canBeSnapTarget(this,k)){if(this.groupType===WUXWindowGroupTypeEnum.GroupAsTab){m=1;if(k===WUXSnapAreaEnum.InsideArea){var p=this.currentWindows.slice();var o=this.getEmbeddedWindows();for(var n=0;n<o.length;n++){var l=o[n];if(l){var r=l.attachToWindow(q,k);if(r<0){m=r}}}if(q instanceof c){q.currentWindows=p}else{if(q.windowGroup){q.windowGroup.currentWindows=p}}}else{m=this._parent(q,k)}}else{}}return m},_pinOrUnpinWindow:function(k){if(k&&this.getEmbeddedWindows().indexOf(k)!==-1){var l=this._tab.getPageValueFromIndex(this._getIndexFromWindow(k));if(k.pinnedFlag){this._tab.tabBar.pinTab(l)}else{this._tab.tabBar.unPinTab(l)}}},_setTabMultiSelLayout:function(k){this._tab.multiSelLayout=k},_getTabMultiSelLayout:function(){return this._tab.multiSelLayout},_fireAndBroadcast:function(n,l){this._parent(n,l);var o=this.currentWindows;for(var m=0;m<o.length;m++){var k=o[m];if(k){k._fireAndBroadcast(n,l)}}},_updateTitle:function(){var o="";var m=this.getEmbeddedWindows();for(var l=0;l<m.length;l++){var k=m[l];if(k){if(l===0){o="["}else{o+=", "}o+=k.title;if(l===m.length-1){o+="]"}else{if(l===5){o+=", ...]";break}}var n=this._tab.getPageValueFromIndex(this._getIndexFromWindow(k));if(this._tab.getOptionFromButton("label",n)!==k.title){this._tab.setOptionFromButton("label",k.title,n)}if(this._tab.getOptionFromButton("icon",n)!==k.icon){this._tab.setOptionFromButton("icon",k.icon,n)}}}this.title=o},_updateVisibleState:function(){var k=false;var n=this.getEmbeddedWindows();for(var m=0;m<n.length;m++){var l=n[m];if(l&&l.visibleFlag){k=true}}this.visibleFlag=k},_updateContentVisibleStateChange:function(){this._parent();var m=this.currentWindows;for(var k=0;k<m.length;k++){var l=m[k];l._updateContentVisibleStateChange()}},_updateCloseButtonFlag:function(){var n=false;var m=this.getEmbeddedWindows();for(var l=0;l<m.length;l++){var k=m[l];if(k&&k.closeButtonFlag){n=true;break}}this.closeButtonFlag=n;if(this.maximizedFlag){this._updateTabCloseButtons()}},_updateTabCloseButtons:function(){var m=this.getEmbeddedWindows();for(var l=0;l<m.length;l++){var k=m[l];if(k&&this.maximizedFlag){this._tab.tabBar.setAllowClosableFlagOnValue(this._tab.getPageValueFromIndex(this._getIndexFromWindow(k)),k.closeButtonFlag)}else{this._tab.tabBar.setAllowClosableFlagOnValue(this._tab.getPageValueFromIndex(this._getIndexFromWindow(k)),false)}}},_updateMaximizeButtonFlag:function(){var k=true;if(!this.allowMaximizeFlag){k=false}else{var n=this._getCurrentAndPinnedWindows();for(var m=0;m<n.length;m++){var l=n[m];if(l&&(!l.maximizeButtonFlag||!l.allowMaximizeFlag)){k=false;break}}}this.maximizeButtonFlag=k},_updateAllowMaximizeFlag:function(){var m=this.getEmbeddedWindows();for(var l=0;l<m.length;l++){var k=m[l];if(k&&(!k.allowMaximizeFlag)){this.allowMaximizeFlag=false;return}}this.allowMaximizeFlag=true},_updateAllowedDockAreas:function(){var k=WUXDockAreaEnum.LeftDockArea+WUXDockAreaEnum.TopDockArea+WUXDockAreaEnum.RightDockArea+WUXDockAreaEnum.BottomDockArea;var o=this.getEmbeddedWindows();for(var n=0;n<o.length;n++){var m=o[n];if(m){for(var l in WUXDockAreaEnum){var p=WUXDockAreaEnum[l];if(!(m.allowedDockAreas&p)&&(k&p)){k=k-p;if(k===0){break}}}}}this.allowedDockAreas=k},_updateRecId:function(){var o="WindowGroup_";var k=o;var n=this.getEmbeddedWindows();for(var m=0;m<n.length;m++){var l=n[m];if(l&&l.recId){if(k!==o){k=k+";"}k=k+l.recId}}if(k!==o){this.recId=k}},_onCloseButtonClick:function(n){var l=this.getVisibleEmbeddedWindows();if(l){for(var k=l.length-1;k>=0;k--){var m=l[k];if(m&&m.closeButtonFlag){m.close()}}}},_updateComputedIdentifier:function(){var k="[";var m=this.getEmbeddedWindows();for(var l=0;l<m.length;l++){if(l!==0){k=k+";"}k=k+m[l].identifier}k=k+"]";this._computedIdentifier=k},_updateMaximizedState:function(){var k=false;var n=this.getEmbeddedWindows();for(var m=0;m<n.length;m++){var l=n[m];if(l&&l.maximizedFlag){k=true;break}}this.maximizedFlag=k},_updateResizableFlag:function(){var m=false;var o=this.currentWindows;if(o.length!==1){var n=this._getTabMultiSelLayout()!=="horizontal";for(var l=0;l<o.length;l++){var k=o[l];if(k){if(n&&(k.resizableFlag===true||k.resizableFlag==="true"||k.resizableFlag==="horizontal")){m="horizontal";break}else{if(!n&&(k.resizableFlag===true||k.resizableFlag==="true"||k.resizableFlag==="horizontal")){m="vertical";break}}}}this.resizableFlag=m}else{this.resizableFlag=this.currentWindows[0].resizableFlag}},_updateMinWidth:function(){if(this.currentWindows&&this.currentWindows.length>0){var k;var n=0;if(this.currentDockArea===WUXDockAreaEnum.BottomDockArea||this.currentDockArea===WUXDockAreaEnum.TopDockArea){if(this._tab&&this._tab.tabBar){var q;if(!this._tab.tabBar.centeredFlag){q=this._tab.tabBar.getWidthOfAllVisibleButtons();this._tab.tabBar._applyInheritWidthToButtons();var o=parseInt(window.getComputedStyle(this.elements._titleBarDiv).width);var m=parseInt(window.getComputedStyle(this.elements._tabBarContainer).width);if(!isNaN(o)&&!isNaN(m)){q=q+o-m}}else{q=parseInt(window.getComputedStyle(this.elements._tabBarContainer).width)+2}n=q;if(this.immersiveFrame){var p=this.immersiveFrame.getDockingElement(this.currentDockArea)._getStretchSize();if(n>p){n=p-1}}}}for(var l=0;l<this.currentWindows.length;l++){k=this.currentWindows[l];if(k&&k.width!=-1){if(n<k.minWidth){n=k.minWidth}}}n=parseInt(n);this.minWidth=n}},_updateMinHeight:function(){if(this.currentWindows&&this.currentWindows.length>0){var k;var m=this.currentWindows[0].minHeight;for(var l=0;l<this.currentWindows.length;l++){k=this.currentWindows[l];if(k){if(m<k.minHeight){m=k.minHeight}}}this.minHeight=m}},_updateMovableFlag:function(){var n=true;var m=this.getEmbeddedWindows();for(var l=0;l<m.length;l++){var k=m[l];if(k&&!k.movableFlag){n=false;break}}this.movableFlag=n},_getMonoSelectionWidth:function(){var m=this._getCurrentAndPinnedWindows();if(m.length===1){if(this.width===-1){return parseInt(window.getComputedStyle(m[0].getContent()).width)}else{return this.width}}else{if(m.length>1){for(var l=0;l<m.length;l++){var k=m[l];if(k.width!==-1){return k.width}}return parseInt(window.getComputedStyle(m[0].getContent()).width)}}},_getCurrentAndPinnedWindows:function(){var r=this._tab.value;var o=[];var n=this._tab.getIndexesFromValues(r);for(var l=0;l<n.length;l++){var p=n[l];if(p>=0){var k=this._getWindowFromIndex(p);if(k){o.push(k)}}}var q=this._tab.tabBar.pinnedList;if(q){var s=this._tab.getIndexesFromValues(q);for(var l=0;l<s.length;l++){var m=s[l];if(m>=0&&n.indexOf(m)==-1){var k=this._getWindowFromIndex(m);if(k){o.push(k)}}}}return o},_updateCurrentWindows:function(){var n=this._getCurrentAndPinnedWindows();this._updateHorizontallyStretchableFlag();this._updateVerticallyStretchableFlag();var k=this.currentWindows.inter(n);this.currentWindows=n;for(var l=0;l<k.length;l++){var m=k[l];m._updateContentVisibleStateChange()}this._applyPosition()},_updateHorizontallyStretchableFlag:function(){var m=this._getCurrentAndPinnedWindows();var k=false;for(var l=0;l<m.length;l++){if(m[l]&&m[l].horizontallyStretchableFlag===true){k=true;break}}this.horizontallyStretchableFlag=k},_updateVerticallyStretchableFlag:function(){var l=this._getCurrentAndPinnedWindows();var m=false;for(var k=0;k<l.length;k++){if(l[k]&&l[k].verticallyStretchableFlag===true){m=true;break}}this.verticallyStretchableFlag=m},_getWindowFromIndex:function(l){var m=this._tab.getPageContentFromIndex(l);var k=(m&&m.dsModel)?m.dsModel:m;return k},_getIndexFromWindow:function(k){return this._tab.getIndexOf(k.getContent())},_setWindowVisibility:function(l){var k=l.visibleFlag;this._tab._setTabVisibility(this._tab.getPageValueFromIndex(this._getIndexFromWindow(l)),k);if(!k){if(this.currentWindows.indexOf(l)!==-1){this.currentWindows.splice(this.currentWindows.indexOf(l),1)}if(this.currentWindows.length===0){var o=this.getEmbeddedWindows();for(var n=0;n<o.length;n++){var m=o[n];if(m.visibleFlag){this.currentWindows=[m];break}}}}else{if(k&&this.currentWindows.length===0){this.currentWindows=[l]}}this._updateVisibleState()},_manageReorder:function(o,p){var l=this._getIndexFromWindow(o);if(this._tab.tabBar.showComboBoxFlag&&this._tab.tabBar.tabComboBox&&this._tab.tabBar.tabComboBox.visibleFlag){if(!g.isMouseOverElement(this._tab.tabBar.buttonGroup.getContent(),p)){this.immersiveFrame._stopWindowGroupTabBarSliding();return}var k=this.elements._titleBarDiv.getBoundingClientRect().left;var q=this._tab.tabBar.buttonGroup.getContent().getBoundingClientRect().right;var n=7;if(Math.abs(p.x-k)<=n){this.immersiveFrame._startWindowGroupTabBarSliding(this._tab.tabBar,"left")}else{if(Math.abs(p.x-q)<=n){this.immersiveFrame._startWindowGroupTabBarSliding(this._tab.tabBar,"right")}else{this.immersiveFrame._stopWindowGroupTabBarSliding()}}}var m=this._computeDropInsertionData(p);if(m.stopWindowGroupTabBarSliding){this.immersiveFrame._stopWindowGroupTabBarSliding()}if(l!==m.movedWindowNewIndex){this._tab.tabBar._exchangeTabs(this._tab.getPageValueFromIndex(l),this._tab.getPageValueFromIndex(m.movedWindowNewIndex));this._tab.tabBar._slideToValue()}},close:function(){if(!this.autoCloseFlag){this.fire("close")}else{var k=this.activeFlag;var m=this.getEmbeddedWindows();if(m){for(var l=m.length-1;l>=0;l--){var n=m[l];if(n){n.close()}}}m=this.getEmbeddedWindows();if(m&&m.length>1&&k){this.activeFlag=true}}},_saveDockAreaInPreferences:function(){for(var l=0;l<this.getEmbeddedWindows().length;l++){var k=this.getEmbeddedWindows()[l];k._saveDockAreaInPreferences()}},_saveMaximizeInPreferences:function(){for(var l=0;l<this.getEmbeddedWindows().length;l++){var k=this.getEmbeddedWindows()[l];k._saveMaximizeInPreferences()}},_savePositionInPreferences:function(){for(var l=0;l<this.getEmbeddedWindows().length;l++){var k=this.getEmbeddedWindows()[l];k._savePositionInPreferences()}},_saveDimensionsInPreferences:function(){for(var l=0;l<this.getEmbeddedWindows().length;l++){var k=this.getEmbeddedWindows()[l];k._saveDimensionsInPreferences()}},handleEvents:function(){this._parent();var k=this;this._tab.tabBar.addEventListener("pinStateChange",function(m){var l=k._getWindowFromIndex(k._tab.getPageIndexFromValue(m.options.value));if(l&&m.options.pinnedFlag!==undefined){l._properties.pinnedFlag.value=m.options.pinnedFlag;if(typeof l.identifier!=="undefined"){l._savePinnedFlagInPreferences()}}else{console.log(m)}});this._tab.addEventListener("change",function(l){k._applyPosition();k._updateCurrentWindows()});this._tab.tabBar.onRemoveTabEvent(function(l){k._getWindowFromIndex(l.index).close()});this._tab.tabBar.onPinTab(function(l){k._updateCurrentWindows()});this._tab.tabBar.unPinTab(function(l){k._updateCurrentWindows()});this.elements._contentDiv.addEventListener("placeChange",function(l){});this.addEventListener("move",function(l){k._tab.tabBar.tabComboBox._hidePopup()})}});var d=function(m){if((this.resizableFlag===true||this.resizableFlag==="true"||this.resizableFlag==="horizontal")&&m>=this.minWidth){var l=this.getEmbeddedWindows();for(var k=0;k<l.length;k++){if(l[k].resizableFlag===true||l[k].resizableFlag==="true"||l[k].resizableFlag==="horizontal"){l[k].width=m}}}};var i=function(k){if((this.resizableFlag===true||this.resizableFlag==="true"||this.resizableFlag==="vertical")&&k>=this.minHeight){var m=this.getEmbeddedWindows();for(var l=0;l<m.length;l++){if(m[l].resizableFlag===true||m[l].resizableFlag==="true"||m[l].resizableFlag==="vertical"){m[l].height=k}}}};return c});define("DS/Windows/Panel",["UWA/Core","DS/Windows/Window","DS/Windows/WindowGroup","DS/Utilities/Utils","DS/Controls/Button","DS/Controls/Expander","DS/Controls/ButtonGroup","DS/Core/PointerEvents"],function(b,i,d,e,g,h,a,c){var f=i.inherit({name:"panel",publishedProperties:{collapsibleFlag:{defaultValue:true,type:"boolean",category:"Behavior"},snappableFlag:{defaultValue:true,type:"boolean",category:"Behavior"},floatableFlag:{defaultValue:true,type:"boolean",category:"Behavior"},headerPopupContent:{defaultValue:undefined,type:Object,category:"Behavior"},pinnedFlag:{defaultValue:false,type:"boolean",category:"Behavior"},showTitleFlag:{defaultValue:true,type:"boolean",category:"Behavior"}},buildView:function(){this._parent();this.elements.container.addClassName("wux-windows-panel");this.elements._titleBarDiv.addClassName("wux-windows-panel");this.elements._buttonsDiv=new b.Element("div",{"class":"wux-windows-panel-buttons"});this.elements._buttonsDiv.inject(this.elements._mainContentDiv,"top");this.elements._buttonsDiv.hide();this.allowedDockAreas=WUXDockAreaEnum.TopDockArea|WUXDockAreaEnum.BottomDockArea|WUXDockAreaEnum.LeftDockArea|WUXDockAreaEnum.RightDockArea},_applyHeaderPopupContent:function(m){function j(p){if(n.elements._headerPopup&&p.target.parentNode!==n.elements._headerPopup.elements.header&&p.target.parentNode!==n.elements._headerPopup.elements.headerContainer&&p.target.parentNode!==n.elements._headerPopup.elements.expanderContainer){var o=Object.keys(n.buttons).length;if(n.buttons!==undefined&&o>0&&p.target.parentNode!==n.buttons.Ok.getContent()&&p.target!==n.buttons.Ok.getContent()&&p.target.parentNode!==n.buttons.Cancel.getContent()&&p.target!==n.buttons.Cancel.getContent()){n.elements._headerPopup.close()}else{if(o===0){n.elements._headerPopup.close()}}}}function l(p){if(n.elements._headerPopup&&p.target.parentNode!==n.elements._headerPopup.elements.header&&p.target.parentNode!==n.elements._headerPopup.elements.headerContainer&&p.target.parentNode!==n.elements._headerPopup.elements.expanderContainer&&n.headerPopupContent.content.tagName!=="DIV"&&!n.headerPopupContent.content.getContent().contains(p.target.parentNode)){var o=Object.keys(n.buttons).length;if(n.buttons!==undefined&&o>0&&p.target.parentNode!==n.buttons.Ok.getContent()&&p.target!==n.buttons.Ok.getContent()&&p.target.parentNode!==n.buttons.Cancel.getContent()&&p.target!==n.buttons.Cancel.getContent()){n.elements._headerPopup.close();if(p.target!==n.elements._titleBarDiv){p.stopPropagation()}}else{if(o===0){n.elements._headerPopup.close();p.stopPropagation()}}}}function k(o){n.elements._headerPopup.close()}if(this.elements._headerPopup){if(this.headerPopupContent.title){this.elements._headerPopup.header=this.headerPopupContent.title;this.headerPopupContent.content=this.elements._headerPopup.body}}else{if(!this.elements._headerPopup){if(this.headerPopupContent.content){this.elements._headerPopup=new h({header:this.headerPopupContent.title,body:this.headerPopupContent.content,style:"mode-selector"});this.elements._buttonsDiv.removeClassName("wux-windows-panel-buttons");this.elements._buttonsDiv.addClassName("wux-windows-panel-expander");this.elements._mainContentDiv.style.background="";this.elements._contentDiv.style.animation="wux-unblur 0.3s forwards";this.elements._mainContentDiv.style.pointerEvents="all";document.removeEventListener(c.POINTERUP,j);document.removeEventListener(c.POINTERDOWN,l,true);if(m&&m.content){m.content.removeEventListener("buttonclick",k)}this.elements._buttonsDiv.show();var n=this;this.headerPopupContent.content.addEventListener("buttonclick",k);this.elements._headerPopup.addEventListener("transitionend",function(o){if(o.target===n.elements._headerPopup){o.stopPropagation()}});this.elements._headerPopup.addEventListener("expand",function(o){n.elements._mainContentDiv.style.background="rgba(255, 255, 255, 0.76)";n.elements._contentDiv.style.animation="wux-blur 0.3s forwards";n.elements._mainContentDiv.style.pointerEvents="none";document.addEventListener(c.POINTERUP,j);document.addEventListener(c.POINTERDOWN,l,true)});this.elements._headerPopup.addEventListener("collapse",function(o){n.elements._mainContentDiv.style.background="";n.elements._contentDiv.style.animation="wux-unblur 0.3s forwards";n.elements._mainContentDiv.style.pointerEvents="all";document.removeEventListener(c.POINTERUP,j);document.removeEventListener(c.POINTERDOWN,l,true)});this.elements._titleBarDiv.addEventListener(c.POINTERDOWN,function(o){n.elements._headerPopup.close()})}else{this.elements._headerPopup=new b.Element("div",{"class":"wux-windows-panel-simplesuperfeature",text:this.headerPopupContent.title});this.elements._buttonsDiv.addClassName("wux-windows-panel-buttons");this.elements._buttonsDiv.removeClassName("wux-windows-panel-expander")}this.elements._headerPopup.inject(this.elements._buttonsDiv);this._applyButtons()}}},_applyTouchMode:function(){this._parent();this._postEditTouchMode()},_postEditTouchMode:function(){this._parent()},_superFeatureCallback:function(j,m,l,k){if(l){this.headerPopupContent={title:j.label,content:k}}j.checkFlag=true;if(m){m()}return j.label},buildSuperFeature:function(n){var m=this;var l=!n.title;var o=undefined;if(this.elements._buttonsDiv.hasChildNodes()&&this.elements._headerPopup){for(var k=0;k<this.elements._buttonsDiv.childNodes.length;k++){var p=this.elements._buttonsDiv.childNodes[k];if((p.dsModel&&p.dsModel instanceof h)||p.hasClassName("wux-windows-panel-simplesuperfeature")){p.remove();this.elements._headerPopup=undefined}}}if(n.content){o=new b.Element("div",{"class":"wux-windows-panel-superfeature"});o.setStyles({display:"flex","justify-content":"space-around"});for(var k=0;k<n.content.length;k++){var j=new g({type:"radio",label:n.content[k].label,icon:n.content[k].icon,value:k,displayStyle:"lite-borders",clickMode:1,onClick:function(q){m._superFeatureCallback(q.dsModel,n.content[q.dsModel.value].onSelect,l,o)}});j.inject(o);j.getContent().setStyle("flex-grow","1");if(k===0){this._superFeatureCallback(j,n.content[0].onSelect,l,o)}}}if(!n.content&&!l){this.headerPopupContent={title:n.title}}else{this.headerPopupContent={title:n.title,content:o}}return this.headerPopupContent},buildStandardButtons:function(){var j=new g({icon:{iconName:"check",fontIconFamily:WUXManagedFontIcons.Font3DS},emphasize:"secondary"});j.elements.container.addClassName("wux-windows-panel-apply");var k=new g({icon:{iconName:"wrong",fontIconFamily:WUXManagedFontIcons.Font3DS}});k.elements.container.addClassName("wux-windows-panel-cancel");this.buttons={Ok:j,Cancel:k};j.addEventListener(c.POINTERUP,function(l){l.stopPropagation()});k.addEventListener(c.POINTERUP,function(l){l.stopPropagation()})},getCollapsibleState:function(){return(this.collapsibleFlag&&(this.currentDockArea!==WUXDockAreaEnum.TopDockArea)&&(this.currentDockArea!==WUXDockAreaEnum.BottomDockArea)&&!this.maximizedFlag&&!((this.currentDockArea===WUXDockAreaEnum.LeftDockArea)&&(this.verticallyStretchableFlag))&&!((this.currentDockArea===WUXDockAreaEnum.RightDockArea)&&(this.verticallyStretchableFlag)))},getFloatableState:function(){return this.floatableFlag},supportsGroupType:function(j){return(j===WUXWindowGroupTypeEnum.GroupAsTab)},_canBeSnapSource:function(l,j){var k=((l&&this.snappableFlag&&(l!==this))||(j===WUXSnapAreaEnum.OutsideArea)||(j===WUXSnapAreaEnum.NoneArea));if(k&&l){k=(l.immersiveFrame===this.immersiveFrame)}if(k&&(j!==WUXSnapAreaEnum.OutsideArea)&&(j!==WUXSnapAreaEnum.NoneArea)){var m=(j===WUXSnapAreaEnum.InsideArea)?WUXWindowGroupTypeEnum.GroupAsTab:WUXWindowGroupTypeEnum.GroupAsGrid;k=this.supportsGroupType(m)}if(k&&l&&(j!==WUXSnapAreaEnum.OutsideArea)){if(l.getDockedFlag()){k=(this.allowedDockAreas&l.currentDockArea)}}if(k&&l&&l.maximizedFlag&&!this.allowMaximizeFlag){k=false}return k},_canBeSnapTarget:function(k,j){var l=(k&&(k!==this)&&((j===WUXSnapAreaEnum.OutsideArea)||(this.snappableFlag)));if(l&&(j!==WUXSnapAreaEnum.OutsideArea)&&(j!==WUXSnapAreaEnum.NoneArea)){var m=(j===WUXSnapAreaEnum.InsideArea)?WUXWindowGroupTypeEnum.GroupAsTab:WUXWindowGroupTypeEnum.GroupAsGrid;l=this.supportsGroupType(m)}if(l&&k){l=(k.immersiveFrame===this.immersiveFrame)}if(l&&this.getDockedFlag()){switch(this.currentDockArea){case WUXDockAreaEnum.LeftDockArea:case WUXDockAreaEnum.RightDockArea:l=((j===WUXSnapAreaEnum.OutsideArea)||(j===WUXSnapAreaEnum.TopArea)||(j===WUXSnapAreaEnum.BottomArea)||(j===WUXSnapAreaEnum.InsideArea));break;case WUXDockAreaEnum.TopDockArea:case WUXDockAreaEnum.BottomDockArea:l=((j===WUXSnapAreaEnum.OutsideArea)||(j===WUXSnapAreaEnum.LeftArea)||(j===WUXSnapAreaEnum.RightArea)||(j===WUXSnapAreaEnum.InsideArea));break}}return l},_createWindowGroup:function(k){var n=this.width;var m=this.height;var l={my:"top left",at:"top left",of:this.position.of,collision:this.position.collision};var j=e.getPositionRelativeToOffsetParent(this,l);return new d({groupType:k,immersiveFrame:this.immersiveFrame,activeFlag:false,width:n,height:m,position:j,maximizedFlag:this.maximizedFlag})},_updateFromCollapsibleState:function(){this._parent()},_applyButtons:function(j){this._parent(j);if(this.elements._buttonsDiv.childNodes.length==0){this.elements._buttonsDiv.hide()}else{if(!this.elements._headerPopup){this.elements._buttonsDiv.addClassName("wux-windows-panel-buttons")}this.elements._buttonsDiv.show()}},_applyCollapsibleFlag:function(){this._updateFromCollapsibleState()},_applyFloatableFlag:function(){if(!this.floatableFlag){if(!this.currentDockArea){var k=WUXDockAreaEnum.LeftDockArea;if(!(k&this.allowedDockAreas)){for(var j in WUXDockAreaEnum){if(WUXDockAreaEnum[j]!=WUXDockAreaEnum.NoneDockArea&&(WUXDockAreaEnum[j]&this.allowedDockAreas)){k=WUXDockAreaEnum[j]}}}if(this.windowGroup){this.windowGroup.currentDockArea=k}else{this.currentDockArea=k}}}},_applyWindowGroup:function(j){this._parent(j);if(this.pinnedFlag){this._applyPinnedFlag()}},_applyPinnedFlag:function(){if(this.windowGroup){this.windowGroup._pinOrUnpinWindow(this)}},_applyShowTitleFlag:function(){if(this.showTitleFlag||!this.icon||this.icon.iconName===""){this.elements._titleP.setStyle("display","")}else{this.elements._titleP.setStyle("display","none")}this._updateTitleStyle()},_applyIcon:function(j){this._parent(j);this._applyShowTitleFlag();this._updateTitleStyle()},_applyTitle:function(j){this._parent(j);this._applyShowTitleFlag();this._updateTitleStyle()},_applyProperties:function(j){this._parent(j);if(this.isDirty("collapsibleFlag")){this._applyCollapsibleFlag()}if(this.isDirty("floatableFlag")){this._applyFloatableFlag()}this._applyShowTitleFlag()},_applyVerticallyStretchableFlag:function(j){this._parent(j);this._applyCollapsibleFlag()},handleEvents:function(){this._parent();var j=this},_updateTitleStyle:function(){if(this.elements._titleP.getStyle("display")==="none"||this.title===""){this.elements.iconPlaceholder.addClassName("wux-windows-icon-no-title")}else{this.elements.iconPlaceholder.removeClassName("wux-windows-icon-no-title")}},_savePinnedFlagInPreferences:function(){var k={pinnedFlag:this.pinnedFlag};var j="pinnedFlag";this._saveDataInPreferences(j,k);if(this._savedPreferencesKeys.indexOf(j)===-1){this._savedPreferencesKeys.push(j)}},_getPinnedFlagFromPreferences:function(){return this._getDataFromPreferences("pinnedFlag")},_readWindowPreferences:function(){this._parent();var j=this._getPinnedFlagFromPreferences();if(j){this.pinnedFlag=j.pinnedFlag}}});return f});define("DS/Windows/ImmersiveFrame",["UWA/Core","DS/Controls/Abstract","DS/Core/PointerEvents","DS/Utilities/Utils","DS/Utilities/Dom","DS/Windows/DockingElement","DS/Windows/DockingElementForImmersiveFrame","DS/Windows/Window","DS/WebRecordEnabler/Adapter","DS/WebRecordBase/Constants","DS/WebRecordBase/Utils","DS/Windows/Panel","i18n!DS/Windows/assets/nls/translation"],function(e,p,g,d,q,i,a,s,r,t,h,j,o){function f(G,D){var F=null;var E=WUXSnapAreaEnum.NoneArea;if(G){for(var w in this.windows){var A=this.windows[w];if(A){if(A.windowGroup&&(A.windowGroup.groupType===WUXWindowGroupTypeEnum.GroupAsTab)){A=A.windowGroup}if(A!==G){var z=A.getBoundingClientRect();if(d.rectContains(z,D)){if(G._canBeSnapSource(A,WUXSnapAreaEnum.LeftArea)&&A._canBeSnapTarget(G,WUXSnapAreaEnum.LeftArea)){var B=A._getSnapAreaRect(WUXSnapAreaEnum.LeftArea);if(d.rectContains(B,D)){F=A;E=WUXSnapAreaEnum.LeftArea}}if(!F&&G._canBeSnapSource(A,WUXSnapAreaEnum.RightArea)&&A._canBeSnapTarget(G,WUXSnapAreaEnum.RightArea)){var x=A._getSnapAreaRect(WUXSnapAreaEnum.RightArea);if(d.rectContains(x,D)){F=A;E=WUXSnapAreaEnum.RightArea}}if(!F&&G._canBeSnapSource(A,WUXSnapAreaEnum.TopArea)&&A._canBeSnapTarget(G,WUXSnapAreaEnum.TopArea)){var v=A._getSnapAreaRect(WUXSnapAreaEnum.TopArea);if(d.rectContains(v,D)){F=A;E=WUXSnapAreaEnum.TopArea}}if(!F&&G._canBeSnapSource(A,WUXSnapAreaEnum.BottomArea)&&A._canBeSnapTarget(G,WUXSnapAreaEnum.BottomArea)){var C=A._getSnapAreaRect(WUXSnapAreaEnum.BottomArea);if(d.rectContains(C,D)){F=A;E=WUXSnapAreaEnum.BottomArea}}if(!F&&G._canBeSnapSource(A,WUXSnapAreaEnum.InsideArea)&&A._canBeSnapTarget(G,WUXSnapAreaEnum.InsideArea)){var y=A._getSnapAreaRect(WUXSnapAreaEnum.InsideArea);if(d.rectContains(y,D)){F=A;E=WUXSnapAreaEnum.InsideArea}}if(F){break}}}}}}if(this._snapTargetWindow!==F){if(this._snapTargetWindow){this._snapTargetWindow.activeSnapArea=WUXSnapAreaEnum.NoneArea}this._snapTargetWindow=F;if(this._snapTargetWindow){this._snapPointer=D;this._snapTargetWindow.activeSnapArea=E;if(G){this._initStackingWindowsTimer(this._snapTargetWindow,G)}}}}function m(z,A){var w=null;if(z.immersiveFrame===this&&z.allowedDockAreas){for(var x=0;x<this.dockingElements.length;x++){var B=this.dockingElements[x];if(!(z.allowedDockAreas&B.side)||this._snapTargetWindow||w){B.interactiveDockAreaVisibleFlag=false;continue}var v=u.call(this,B.side);if((A.x<v.x||A.x>=v.x+v.width)||(A.y<v.y||A.y>=v.y+v.height)){n(B);continue}if(B.collapseDockingZoneFlag){B.collapseMemory=true;B.collapseDockingZoneFlag=false}if(!B.visibleDockingZoneFlag){if(B.getContainedVisibleWindows().length===0){var C=B.dockingZoneSize;var y=window.getComputedStyle(z.getContent());if((B.side===WUXDockAreaEnum.TopDockArea)||(B.side==WUXDockAreaEnum.BottomDockArea)){C=parseInt(y.height)}else{C=parseInt(y.width)}if(!isNaN(C)){B.dockingZoneSize=C}}B.visibleDockingZoneFlag=true}B.interactiveDockAreaVisibleFlag=true;w=B}}if(this._activeDockingElement!==w){if(this._activeDockingElement){n(this._activeDockingElement)}this._activeDockingElement=w}}function k(z,B,y){if(this._snapTargetWindow){if(!h.isReplaying()){var A=y?y:this._snapTargetWindow;var x=this._snapTargetWindow.activeSnapArea;var w=A.isAWindowGroup()?A._computedIdentifier:A.identifier;if(w){z.callMethodFromUIInteraction("_locateAndAttachToWindow",w,x,B)}z._attachToWindow(A,x,B,true)}var v=z.elements.container?z:A;v._saveWindowGroupInPreferences();v._saveDockAreaInPreferences();this._snapTargetWindow.activeSnapArea=WUXSnapAreaEnum.NoneArea;this._snapTargetWindow=null}else{if(this._activeDockingElement){if(!h.isReplaying()){z.setPropertyFromUIInteraction("currentDockArea",this._activeDockingElement.side)}if(z.currentDockArea===this._activeDockingElement.side){z._saveDockAreaInPreferences();if(this._activeDockingElement.getContainedVisibleWindows().length===1){this._activeDockingElement._saveDockingZoneSizeInPreferences()}}}}if(this._activeDockingElement){this._activeDockingElement.interactiveDockAreaVisibleFlag=false;this._activeDockingElement=null}if(z.elements.container){z.elements.container.removeClassName("wux-windows-window-furtive")}}function n(v){if(v){v.interactiveDockAreaVisibleFlag=false;if(v.collapseMemory){v.collapseDockingZoneFlag=true;v.collapseMemory=false}if(v.getContainedVisibleWindows().length===0){v.visibleDockingZoneFlag=false}}}function u(v){var x=this.getContent().getBoundingClientRect();var w=this.getDockingElement(v).getContent().getBoundingClientRect();switch(v){case WUXDockAreaEnum.TopDockArea:return{x:x.left,y:w.top-this._dockingSensibilityZoneSize,width:x.width,height:2*this._dockingSensibilityZoneSize};case WUXDockAreaEnum.BottomDockArea:return{x:x.left,y:w.bottom-this._dockingSensibilityZoneSize,width:x.width,height:2*this._dockingSensibilityZoneSize};case WUXDockAreaEnum.LeftDockArea:return{x:w.left-this._dockingSensibilityZoneSize,y:x.top,width:2*this._dockingSensibilityZoneSize,height:x.height};case WUXDockAreaEnum.RightDockArea:return{x:w.right-this._dockingSensibilityZoneSize,y:x.top,width:2*this._dockingSensibilityZoneSize,height:x.height}}}var c=400;var b=900;var l=p.inherit({markForRecordFlag:true,publishedProperties:{identifier:{defaultValue:"",type:"string",readOnly:true,category:"Behavior"},_ActionBar_V3:{defaultValue:false,type:"boolean",category:"Appearance",noNeedToApplyFlag:true},dockingElementsPriority:{defaultValue:[WUXDockAreaEnum.LeftDockArea,WUXDockAreaEnum.RightDockArea,WUXDockAreaEnum.TopDockArea,WUXDockAreaEnum.BottomDockArea],type:"Array",readOnly:true,category:"Behavior"}},windows:undefined,dockingElements:undefined,resizerSize:10,_postBuildView:function(){this.elements.container.addClassName("wux-windows-immersive-frame");r.setElementRecordMode(this.elements.container,t.RecordModes.DEFAULT_AND_CHILD);if(this._ActionBar_V3){this._properties.dockingElementsPriority.value=[WUXDockAreaEnum.TopDockArea,WUXDockAreaEnum.BottomDockArea,WUXDockAreaEnum.LeftDockArea,WUXDockAreaEnum.RightDockArea]}for(var v=0;v<this.dockingElementsPriority.length;v++){this._addDockingZone(this.dockingElementsPriority[v],200)}this._snapTargetWindow=null;this._activeDockingElement=null;this._dockingSensibilityZoneSize=22;this.elements.pointerEventsDiv=new e.Element("div",{"class":"wux-windows-immersive-frame-pointer-events"}).inject(this.elements.container);this.elements.pointerEventsDiv.hide();var w=this;q.onNodeRendered(this.getContent(),function(){if(w._onResizeFun){w._onResizeFun()}})},init:function(v){this.windows={};this.dockingElements=[];this._parent(v)},dockWindow:function(v,z){if(v&&v.allowedDockAreas&&v.allowedDockAreas&z){var x=this.getDockingElement(z);if(x){if(!v.windowGroup||(v.currentDockArea!=z)){x.interactiveDockAreaVisibleFlag=false;x.visibleDockingZoneFlag=true;x.onTransitionEnd();if((x.getContainedVisibleWindows().length===0)&&x._isCurrentlyCalledFromUIInteraction()){var y=x.dockingZoneSize;var w=window.getComputedStyle(v.getContent());if((x.side===WUXDockAreaEnum.TopDockArea)||(x.side==WUXDockAreaEnum.BottomDockArea)){y=parseInt(w.height)}else{y=parseInt(w.width)}if(!isNaN(y)){x.dockingZoneSize=y}}if(!v.getContent().isInjected(x.elements.dockingZone)){v.inject(x.elements.dockingZone)}v.getContent().setStyle("z-index",100)}v.immersiveFrame=this;v.currentDockArea=z;x._updateFromContainedWindows();x._updateContainedWindows()}}return(v.currentDockArea===z)?1:-1},undockWindow:function(v){if(v){var y=v.currentDockArea;var z=this.getDockingElement(y);if(!v._isBeingClosed){if(!v.windowGroup||(y!==WUXDockAreaEnum.NoneDockArea)){var x=v.getAbsolutePosition();this.moveWindowToImmersiveFrame(v);v.getContent().setStyle("z-index",1000);v.setAbsolutePosition(x)}v.currentDockArea=WUXDockAreaEnum.NoneDockArea}else{var w=v.getContent().getParent();if(w){w.removeChild(v.getContent())}}if(z){z._updateFromContainedWindows();z._updateContainedWindows();z._pointerEventsAllIfOverflow();z._resetInteractiveDockArea()}}},getFreeZone:function(){return this.dockingElements[this.dockingElements.length-1].elements.freeZone},setContentInBackgroundLayer:function(v){if(!v){if(this._backgroundLayerDiv){this._backgroundLayerDiv.empty();this._backgroundLayerDiv.remove();delete this._backgroundLayerDiv}return}if(!this._backgroundLayerDiv){this._backgroundLayerDiv=new e.Element("div",{styles:{top:0,bottom:0,right:0,left:0,position:"absolute",width:"100%",height:"100%",pointerEvents:"all"}});this._backgroundLayerDiv.inject(this.getContent(),"top")}if(v.inject){v.inject(this._backgroundLayerDiv)}else{this._backgroundLayerDiv.appendChild(v)}},moveWindowToMaximizeZone:function(v){if(v){v.inject(this.getFreeZone());if(this._ActionBar_V3&&(v.currentDockArea===WUXDockAreaEnum.TopDockArea||v.currentDockArea===WUXDockAreaEnum.BottomDockArea)){v._moveTitleBar(false,this.getDockingElement(v.currentDockArea))}}},moveWindowToImmersiveFrame:function(v){if(v){v.inject(this.elements.container);if(this._ActionBar_V3){if(v.currentDockArea===WUXDockAreaEnum.TopDockArea||v.currentDockArea===WUXDockAreaEnum.BottomDockArea){v._moveTitleBar(true,this.getDockingElement(v.currentDockArea))}else{v._moveTitleBar(false,this.getDockingElement(v.currentDockArea))}}}},_addDockingZone:function(w,v){var x=this;var A=this._ActionBar_V3?a:i;var z="";if(this.recId){switch(w){case WUXDockAreaEnum.LeftDockArea:z="LeftDockArea";break;case WUXDockAreaEnum.RightDockArea:z="RightDockArea";break;case WUXDockAreaEnum.TopDockArea:z="TopDockArea";break;case WUXDockAreaEnum.BottomDockArea:z="BottomDockArea";break}}var y=new A({identifier:this.identifier,side:w,dockingZoneSize:v,visibleDockingZoneFlag:false,collapseDockingZoneFlag:false,recId:z});y.elements.container.addClassName("wux-immersive-frame-component");if(!this._ActionBar_V3){y.useBackgroundFlag=true}if(this.dockingElements.length===0){y.inject(this.elements.container)}else{y.inject(this.dockingElements[this.dockingElements.length-1].elements.freeZone)}this.dockingElements.push(y)},_removeDockingZone:function(v){var w=this;if((this.dockingElements.length<=v)||(v<0)){return}if(v!==this.dockingElements.length-1){if(v===0){this.dockingElements[v+1].inject(this.elements.container)}else{this.dockingElements[v+1].inject(this.dockingElements[v-1].elements.freeZone)}}this.dockingElements[v].hide();this.dockingElements.splice(v,1)},_updateAllDockingZoneSize:function(){for(var v=0;v<this.dockingElements.length;v++){var w=this.dockingElements[v];if(w){w._updateDockingZoneSize()}}},_applyProperties:function(v){this._parent(v)},addWindow:function(v){var w=this;if(!this.containsWindow(v)){this.windows[w._computeUniqueIdentifier(v)]=v;v.getContent().setStyle("z-index",1000);if(v.currentDockArea===WUXDockAreaEnum.NoneDockArea&&!v.maximizedFlag){this.moveWindowToImmersiveFrame(v)}v.immersiveFrame=this;v.position.of=this.getContent();v.position.constraint=this.getContent();v._applyPosition();v.addEventListener("windowDrag",function(D){w.elements.pointerEventsDiv.show();var A=D.dsModel;if(A){if(A.visibleFlag===false){return}if(Math.abs(D.options.deltaX)>15||Math.abs(D.options.deltaY)>15){if(A.getDockedFlag()||A.windowGroup){var B=A.getContent().getSize();if(A.windowGroup){if(d.isMouseOverElement(A.windowGroup.elements._titleBarDiv,D.options)){A.windowGroup._manageReorder(A,D.options);return}var C=A.windowGroup;if(C.getEmbeddedWindows().length===2){for(var z=0;z<2;z++){var x=C.getEmbeddedWindows()[z];if(x!==A){C=x;break}}}A.windowGroup.activeSnapArea=WUXSnapAreaEnum.NoneArea;A.windowGroup._detachWindow(A,v._isCurrentlyCalledFromUIInteraction());w._clearStackingWindowsTimer();w._stopWindowGroupTabBarSliding();A=w._replaceFakedWindowByReallyMovedWindow(A);A._saveWindowGroupInPreferences(C)}if(A.getFloatableState()){A.currentDockArea=WUXDockAreaEnum.NoneDockArea;A._saveDockAreaInPreferences()}A.activeFlag=true;A.bringToFront();var y=A.getContent().getSize();if((y.width!==B.width)||(y.height!==B.height)){A._ensureTitleBarUnderPointer(D.options)}}}if(!A.windowGroup){f.call(w,A,D.options);m.call(w,A,D.options);if(w._snapTargetWindow||w._activeDockingElement){A.elements.container.addClassName("wux-windows-window-furtive")}else{A.elements.container.removeClassName("wux-windows-window-furtive")}}}});v.addEventListener("stopWindowDrag",function(y){w._stopWindowGroupTabBarSliding();var z,x;if(w._fakeStackedWindow){z="before";x=w._fakeStackedWindow;f.call(w,y.dsModel,y.options);w._snapSourceWindow.show()}k.call(w,y.dsModel,z,x);if(w._fakeStackedWindow&&w._fakeStackedWindow.windowGroup){w._fakeStackedWindow.windowGroup._detachWindow(w._fakeStackedWindow,true);w._fakeStackedWindow.hide()}w._resetStackedWindowData();w.elements.pointerEventsDiv.hide()});v.addEventListener("startResize",function(x){w.elements.pointerEventsDiv.show();w.elements.pointerEventsDiv.setStyle("cursor",x.options.cursor)});v.addEventListener("stopResize",function(x){w.elements.pointerEventsDiv.hide();w.elements.pointerEventsDiv.setStyle("cursor","default")});v.addEventListener("visibleStateChange",function(A){if(v.currentDockArea!==WUXDockAreaEnum.NoneDockArea){var z=w.getDockingElement(v.currentDockArea);if(z){if(v.visibleFlag){z.visibleDockingZoneFlag=true}else{var B=z.getContainedVisibleWindows();var x=0;for(var y=0;y<B.length;y++){if(B[y].getContent().hasClassName("wux-windows-window")&&B[y].getContent().getStyle("display")!=="none"){x++}}if(x===0){z.visibleDockingZoneFlag=false}}}}});this.fire("addWindow",{window:v})}},removeWindow:function(w){if(w){for(var x in this.windows){var v=this.windows[x];if(v&&(v===w)){if(w.currentDockArea!==WUXDockAreaEnum.NoneDockArea){this.undockWindow(w)}if(w.position.of===this.getContent()){w.position.of=null}if(w.position.constraint===this.getContent()){w.position.constraint=null}if(this.elements&&this.elements.container){w.remove()}delete this.windows[x];w.immersiveFrame=null;break}}this.fire("removeWindow",{window:w})}},getDockingElement:function(v){return this.dockingElements[this.dockingElementsPriority.indexOf(v)]},containsWindow:function(w){var x=false;if(w){for(var y in this.windows){var v=this.windows[y];if(v&&(v===w)){x=true;break}}}return x},_computeUniqueIdentifier:function(w){if(!w){return}var x=(typeof w.identifier!=="undefined"&&w.identifier!=="")?w.identifier:"1";var v=2;while(this.windows[x]!==undefined){x=v;v++}return x},_getWindowFromIdentifier:function(x){for(var w in this.windows){if(!this.windows.hasOwnProperty(w)){continue}var v=this.windows[w];if(v.identifier===x){return v}}return undefined},handleEvents:function(){var A=this;for(var y=0;y<A.dockingElements.length;y++){var C=A.dockingElements[y];if(C){C.addEventListener("dockResize",function(D){A._manageAllPointerEventsOnDockingElements()})}}function z(){if(A.elements.container){for(var I in A.windows){var E=A.windows[I];if(E){E._applyWidth();E._applyHeight();E._applyPosition()}}A._manageAllPointerEventsOnDockingElements();var F=window.getComputedStyle(A.getContent());var H=parseInt(F.width)>480&&parseInt(F.height)>640;for(var D in WUXDockAreaEnum){var G=A.getDockingElement(WUXDockAreaEnum[D]);if(G){G.autoExpandFlag=H}}}}A._onResizeFun=z;function w(D){A.fire("freeZoneResize")}A._resizeFreeZoneFun=w;q.addResizeListener(this.elements.container,A._onResizeFun);q.addResizeListener(this.getFreeZone(),A._resizeFreeZoneFun);q.removeEventOnElement(this,this.elements.pointerEventsDiv,"click",function(){A.elements.pointerEventsDiv.hide()});var x=function(){A._manageAllPointerEventsOnDockingElements();A.removeEventListener("transitionend",x)};var B=function(){A.addEventListener("transitionend",x)};for(var v in WUXDockAreaEnum){var C=this.getDockingElement(WUXDockAreaEnum[v]);if(C){C.addEventListener("collapse",B);C.addEventListener("expand",B)}}},destroy:function(){if(this.elements&&this.elements.container){q.removeResizeListener(this.elements.container,this._onResizeFun);q.removeResizeListener(this.getFreeZone(),this._resizeFreeZoneFun);if(this._fakeStackedWindowSaved){this._fakeStackedWindowSaved.destroy();this._fakeStackedWindowSaved=null}this._parent()}},_manageAllPointerEventsOnDockingElements:function(){this.getDockingElement(WUXDockAreaEnum.BottomDockArea)._pointerEventsAllIfOverflow();this.getDockingElement(WUXDockAreaEnum.BottomDockArea)._resetInteractiveDockArea();this.getDockingElement(WUXDockAreaEnum.TopDockArea)._pointerEventsAllIfOverflow();this.getDockingElement(WUXDockAreaEnum.TopDockArea)._resetInteractiveDockArea();this.getDockingElement(WUXDockAreaEnum.LeftDockArea)._pointerEventsAllIfOverflow();this.getDockingElement(WUXDockAreaEnum.LeftDockArea)._resetInteractiveDockArea();this.getDockingElement(WUXDockAreaEnum.RightDockArea)._pointerEventsAllIfOverflow();this.getDockingElement(WUXDockAreaEnum.RightDockArea)._resetInteractiveDockArea()},_initStackingWindowsTimer:function(x,v){this._clearStackingWindowsTimer();var w=this;this._stopDragOccured=false;this._stackingTimeOut=setTimeout(function(){if(!w._stopDragOccured&&x.activeSnapArea===WUXSnapAreaEnum.InsideArea){w._snapTargetWindowForFeedback=x;var z=x._computeDropInsertionData(w._snapPointer);var y=w._getOrCreateFakePanelForStacking(v);w._snapSourceWindow=v;k.call(w,y,z.beforeOrAfter,z.targetWindow);v.hide();if(w._fakeStackedWindow.windowGroup){w._fakeStackedWindow.windowGroup.activeSnapArea=WUXSnapAreaEnum.InsideArea}}else{if(x){x.activeSnapArea=WUXSnapAreaEnum.NoneArea}}},c)},_clearStackingWindowsTimer:function(){if(this._stackingTimeOut){clearTimeout(this._stackingTimeOut);this._stackingTimeOut=null}},_startWindowGroupTabBarSliding:function(x,w){if(!this._windowGroupTabBarSlidingInterval){var v=this;this._windowGroupTabBarSliding=x;this._windowGroupTabBarSlidingDirection=w;this._windowGroupTabBarSlidingInterval=window.setInterval(function(){if(v._windowGroupTabBarSliding){v._windowGroupTabBarSliding._slideTabBar(v._windowGroupTabBarSlidingDirection)}},b)}},_stopWindowGroupTabBarSliding:function(){if(this._windowGroupTabBarSlidingInterval){window.clearInterval(this._windowGroupTabBarSlidingInterval);delete this._windowGroupTabBarSlidingInterval;this._windowGroupTabBarSlidingInterval=null;this._windowGroupTabBarSliding=null;this._windowGroupTabBarSlidingDirection=null}},_getOrCreateFakePanelForStacking:function(y){var x,A,w,v;if(!this._fakeStackedWindow){this._fakeStackedWindow=this._fakeStackedWindowSaved;if(!this._fakeStackedWindow){v=new e.Element("div",{"class":"wux-window-stacking-place-holder-container"});var z=new e.Element("div",{"class":"wux-window-stacking-place-holder"}).inject(v);z.innerText=o.stackingPlaceHolder;this._fakeStackedWindow=new j({resizableFlag:true,immersiveFrame:this,identifier:this.identifier+"_fakeStackedWindow",content:v})}if(!this._fakeStackedWindowSaved){this._fakeStackedWindowSaved=this._fakeStackedWindow}}if(!y.isAWindowGroup()){x=y.title;A=y.showTitleFlag;w=y.icon}else{x="( "+y.getEmbeddedWindows().length+" )";w="folder";A=true}this._fakeStackedWindow.title=x;this._fakeStackedWindow.showTitleFlag=A;this._fakeStackedWindow.icon=w;d.setPosition(this._fakeStackedWindow,y.position);this._fakeStackedWindow.show();return this._fakeStackedWindow},_computeFiringWindowDragEvents:function(v){var w=v;if(this._fakeStackedWindow&&(v!==this._fakeStackedWindow)){if(this._fakeStackedWindow.visibleFlag){w=this._fakeStackedWindow}else{w=this._snapSourceWindow}}return w},_replaceFakedWindowByReallyMovedWindow:function(v){if(v===this._fakeStackedWindow){this._fakeStackedWindow.hide();d.setPosition(this._snapSourceWindow,v.position);this._snapSourceWindow.show();this._snapSourceWindow.activeFlag=true;return this._snapSourceWindow}return v},_resetStackedWindowData:function(v){this._fakeStackedWindow=null;this._snapSourceWindow=null;this._stopDragOccured=true}});r.register(l,"DS/ControlsRec/AbstractRec");return l});