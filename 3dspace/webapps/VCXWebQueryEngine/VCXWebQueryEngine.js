define("DS/VCXWebQueryEngine/VCXQueryEngineNonMatchingActions",["UWA/Class","DS/VCXWebKernelCommands/VCXCmdChangeVisibility","DS/VCXWebModifiablesServices/VCXModifiablesChangeServices","DS/VCXWebVisibility/VCXIVisibility",],function(c,d,b,a){var e=c.extend({ghost:false,hide:false,init:function(){this._arrNonMatchingObjects=[]},_Process:function(l,k,h){var f;if(h>0){f="DS/VCXWebQueryEngine/VCXQueryEngineNonMatchingActions:_Process";console.time(f)}this._arrNonMatchingObjects=k;var j=l.getManager("VCXCommandManager");var m=l.getManager("VCXScenarioManager");var g=[];if(this.hide||this.ghost){k.forEach(function(n){var o=n.GetObject();if(o.IsKindOf("VCXWebComponentOccurrence")&&!o.IsDressup){g.push(o)}});if(this.hide){var i=new d(m,l.ComponentsMap,j);i.ChangeVisibility(g,a.EVisState.Hidden);j.Push(i)}else{if(this.ghost){g.forEach(function(n){b.Ghost(l,n.QueryInterface("W3AISGNodeHolder").getPathElement(),true)})}}}if(h>0){console.time(f)}}});Object.defineProperty(e.prototype,"nonMatchingObjects",{enumerable:true,get:function(){return this._arrNonMatchingObjects}});return e});define("DS/VCXWebQueryEngine/VCXQueryEngineMatchingActions",["UWA/Class","DS/VCXWebKernel/VCXCmdChangeSelection","DS/VCXWebKernelCommands/VCXCmdChangeVisibility","DS/VCXWebVisibility/VCXIVisibility",],function(b,d,c,a){var e=b.extend({select:false,show:false,zoomToFit:false,init:function(){this._arrMatchingObjects=[]},_Process:function(p,h,t){var x;if(t>0){x="DS/VCXWebQueryEngine/VCXQueryEngineMatchingActions:_Process";console.time(x)}this._arrMatchingObjects=h;var r=p.getManager("VCXCommandManager");r.StartTransaction();var l=p.getManager("VCXScenarioManager");if(this.show||this.zoomToFit){if(this.show){var g=[];h.forEach(function(j){var i=j.GetObject();if(i.IsKindOf("VCXWebComponentOccurrence")&&!i.IsDressup){g.push(i)}});var o=new c(l,p.ComponentsMap,r);o.ChangeVisibility(g,a.EVisState.Visible);r.Push(o)}if(this.zoomToFit){var k=p.getManager("VCXContextManager").getMainViewer();var n=k.getViewpoints();for(var v=0;v<n.length;v++){n[v].reframe(null,0)}}}var s=p.getManager("VCXSelectionManager");if(this.select){var q;if(t>0){q="DS/VCXWebQueryEngine/VCXQueryEngineMatchingActions:_Process | Select Objects";console.time(q)}var m=new d(s,true);var w=[];for(var u=0;u<h.length;++u){w.push(h[u].GetObject())}m.SetComponentsSelection(w);if(t>1){for(var y=0;y<h.length;y++){var f=h[y];console.log("  -> id="+f.GetHashing()+", type="+f.GetObject().GetType())}}r.Push(m);if(t>0){console.timeEnd(q)}}r.EndTransaction("QueryEngineMatchingActions");s.RefreshXSO();if(t>0){console.time(x)}}});Object.defineProperty(e.prototype,"matchingObjects",{enumerable:true,get:function(){return this._arrMatchingObjects}});return e});define("DS/VCXWebQueryEngine/VCXQueryOperator",["UWA/Class",],function(a){var b=a.extend({init:function(c){this._strOperator=c;this.SetOperand(null)},SetOperator:function(c){this._strOperator=c},GetOperator:function(){return this._strOperator},SetOperand:function(c){this._operand=c},GetOperand:function(){return this._operand},Process:function(e){if(!this._operand){return false}var g=this.GetOperator();var f=e.GetValue();if(typeof f!=="number"){f=e.ToString();if(!g.contains("==")){f=f.toLowerCase()}}var d=this.GetOperand().GetValue();if(typeof d!=="number"){d=this.GetOperand().ToString();if(!g.contains("==")){d=d.toLowerCase()}}var c=false;switch(g){case"=":c=f===d;break;case"!=":c=f!==d;break;case"<":c=f<d;break;case"<=":c=f<=d;break;case">":c=f>d;break;case">=":c=f>=d;break;case"==":c=f===d;break;case"!==":c=f!==d;break;case"contains":c=f.indexOf(d)!=-1;break;case"wildcard":c=f===d;break;case"regexp":c=f.match(d)!==null;break;case"found":c=f!==null;break;case"exists":c=f===d;break;case"!exists":c=f!==d;break;default:c=false;console.log("WARNING: unknown operator : "+g);break}return c}});return b});define("DS/VCXWebQueryEngine/VCXQueryEngineInputData",["UWA/Class"],function(a){var b=a.extend({selectionName:"",inputObjects:[],init:function(){},_Process:function(f,e){if(this.inputObjects.length===0){var d;if(e>0){d="DS/VCXWebQueryEngine/VCXQueryEngineInputData:_Process";console.time(d)}if(this.selectionName===""){if(e>1){console.log("Getting all objects...")}var c=f.ComponentsMap.GetComponentTable();var g=this;Object.keys(c).forEach(function(i){var h=c[i];if(e>1){console.log("id="+i+", type="+h.GetType())}g.inputObjects.push(h)})}else{if(e>1){console.log("Getting objects from the specified selection set...")}}if(e>0){console.timeEnd(d)}}return this.inputObjects}});return b});define("DS/VCXWebQueryEngine/VCXQueryPropertyOperator",["DS/VCXWebProperties/VCXProperty","DS/VCXWebQueryEngine/VCXQueryOperator"],function(a,c){var b=function(e,d){a.call(this,e,d)};b.prototype=Object.create(a.prototype);b.prototype.SetOperator=function(d){this._operator=new c(d);this._operator.SetOperand(this.GetPropertyValue())};b.prototype.GetOperator=function(){return this._operator};b.prototype.Process=function(d){if(!this._operator){return false}return this._operator.Process(d)};b.prototype.Clone=function(){var d=new b(this.GetValue());d.SetPropertyName(this.GetPropertyName());d.SetOperator(this.GetOperator());return d};return b});define("DS/VCXWebQueryEngine/VCXQueryPropertyOperatorSet",["DS/VCXWebProperties/VCXPropertySet","DS/VCXWebProperties/VCXPropertyInfo","DS/VCXWebProperties/VCXPropertyValueInt","DS/VCXWebProperties/VCXPropertyValueBoolean","DS/VCXWebProperties/VCXPropertyValueString","DS/VCXWebQueryEngine/VCXQueryPropertyOperator"],function(g,b,f,d,a,e){var c=function(h){g.call(this);this.SetUnionMode(true)};c.prototype=Object.create(g.prototype);c.prototype.SetUnionMode=function(h){this._bUnionMode=typeof h==="undefined"?true:h};c.prototype.GetUnionMode=function(){return this._bUnionMode};c.prototype.AddPropertyOperator=function(j,m,l){var k=new b(j);var i=null;switch(typeof l){case"number":i=new f();break;case"boolean":i=new d();break;default:i=new a()}i.FromString(l);var h=new e(k,i);h.SetOperator(m);return this.AddOrModifyProperty(h)};c.prototype.Clone=function(){var h=new c(this.GetValue());h.UnionMode=this.UnionMode;return h};Object.defineProperty(c.prototype,"UnionMode",{enumerable:true,get:function(){return this.GetUnionMode()},set:function(h){this.SetUnionMode(h)}});return c});define("DS/VCXWebQueryEngine/VCXQueryEngine",["DS/WebApplicationBase/W3AAManager","DS/VCXWebQueryEngine/VCXQueryPropertyOperatorSet","DS/VCXWebQueryEngine/VCXQueryEngineInputData","DS/VCXWebQueryEngine/VCXQueryEngineMatchingActions","DS/VCXWebQueryEngine/VCXQueryEngineNonMatchingActions"],function(g,e,a,c,f){var b=g.extend({verboseMode:0,init:function(){},initialize:function(){},postInitialize:function(){},unInitialize:function(){},SelectFromAllObjects:function(j){var i=new a(this._experienceBase,this.verboseMode);var h=new c();h.select=true;return this.Run(i,j,h)},SelectFromSelection:function(j,k){var i=new a(this._experienceBase,this.verboseMode);i.inputObjects=j;var h=new c();h.select=true;return this.Run(i,k,h)},GetFromSelection:function(l,n,k,m){var j=new a(this._experienceBase,this.verboseMode);j.inputObjects=l;var i=new c();i.select=true;var o=new f();var h=this.Run(j,n,i,o);k=i.matchingObjects;m=o.nonMatchingObjects;return h},Run:function(n,m,o,k){if(!n||!m||!o){return false}if(!(n instanceof a)){return false}if(!(m instanceof e)){return false}if(!(o instanceof c)){return false}if(k&&!(k instanceof f)){return false}var j=n._Process(this._experienceBase,this.verboseMode);var i=[];var l=[];if(!d.call(this,j,m,i,l)){return false}var h;if(this.verboseMode>0){h="DS/VCXWebQueryEngine/VCXQueryEngine:Run | Actions";console.time(h)}o._Process(this._experienceBase,i,this.verboseMode);if(k){k._Process(this._experienceBase,l,this.verboseMode)}if(this.verboseMode>0){console.time(h)}return true}});function d(u,v,k,m){if(!u||!v||!k){return false}var s;if(this.verboseMode>0){s="DS/VCXWebQueryEngine/VCXQueryEngine:_Query";console.time(s);if(this.verboseMode>1){console.log(s+"...")}}for(var r=0;r<u.length;r++){var w=u[r];var t="";if(this.verboseMode>1){t="Checking component "+w.GetID()}var l=w.QueryInterface("VCXIModifiable");if(!l){if(this.verboseMode>1){console.log(t+" - Rejected")}continue}if(this.verboseMode>1){var x=l.GetProperty("Actor.Name");if(x){t=t+", modifiable "+l.GetHashing()+" '"+x.GetPropertyValue().GetValue()+"'"}console.log(t)}var p=v.FilterMode===0;var o=[];v.GetListPropertyNames(o);for(var q=0;q<o.length;q++){var n=v.GetProperty(o[q]);if(!n){console.error("Error: can't retrieve property '"+o[q]+"' from the query!");continue}var h=n.GetPropertyInfo()._strPropertyName;if(this.verboseMode>1){t="  "+h}var x=l.GetProperty(h);if(!x){if(this.verboseMode>1){t=t+" - inexisting property from filter"}if(v.FilterMode===0){p=false;if(this.verboseMode>1){console.log(t+"\n    Rejected. Loop broken for AND optimization")}break}else{if(this.verboseMode>1){console.log(t+"\n    Rejected. Loop continued for OR optimization")}continue}}if(this.verboseMode>1){console.log(t)}p=n.Process(x.GetPropertyValue());if(p===(v.FilterMode===1)){if(this.verboseMode>1){if(p){console.log("    Retained. Loop broken for OR optimization")}else{console.log("    Rejected. Loop broken for AND optimization")}}break}}if(p){if(this.verboseMode>1){console.log(" --> object matching")}k.push(l)}else{if(m){m.push(l)}}}if(this.verboseMode>0){console.timeEnd(s);console.log("QueryEngine: "+k.length+" object(s) found")}return true}Object.defineProperty(b.prototype,"componentType",{enumerable:true,get:function(){return"VCXQueryEngine"}});return b});