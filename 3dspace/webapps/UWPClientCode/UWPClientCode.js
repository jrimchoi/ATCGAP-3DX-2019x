define("DS/UWPClientCode/SEO",function(){var a={setTitle:function(b){document.title=b},setDescription:function(b){document.querySelector('meta[name="description"]').setAttribute("content",b)}};return a});define("DS/UWPClientCode/UWPClientCode",[],function(){});define("DS/UWPClientCode/UWA/Widget",["UWA/Core","UWA/Widget","DS/Logger/Logger","DS/UIKIT/Mask"],function(e,c,b,d){var a=c.extend({setStyle:function(i){var h=this,g,f,j=h.environment.wp.widgetId;i=Array.isArray(i)?i.join("\n"):String(i);i=i.replace(/\/\*[\s\S]*?\*\//g,"");i=i.replace(/\n/g," ").replace(/\}/g,"}\n").split("\n");i=i.join("\n").trim().replace(/\s{2,}/g," ");if(i){g=document.getElementById("css-"+j);if(!g){g=document.createElement("style");g.setAttribute("id","css-"+j);g.setAttribute("type","text/css");f=document.getElementsByTagName("head").item(0);f.appendChild(g);if(g.styleSheet){g.styleSheet.cssText=i}else{g.appendChild(document.createTextNode(i))}}return i}},mask:function(f){d.mask(this.elements.body,f||e.i18n("Loading..."))},unmask:function(){d.unmask(this.elements.body)},show:function(){this.dispatchEvent("showWidget")},hide:function(){this.dispatchEvent("hideWidget")},log:function(){b.log.apply(null,["Widget",this.environment.wp.title,"(#"+this.id+") --"].concat(Array.prototype.slice.call(arguments)))},info:function(){b.info.apply(null,["Widget",this.environment.wp.title,"(#"+this.id+") --"].concat(Array.prototype.slice.call(arguments)))},warn:function(){b.warn.apply(null,["Widget",this.environment.wp.title,"(#"+this.id+") --"].concat(Array.prototype.slice.call(arguments)))},error:function(){b.error.apply(null,["Widget",this.environment.wp.title,"(#"+this.id+") --"].concat(Array.prototype.slice.call(arguments)))},debug:function(){b.debug.apply(null,["Widget",this.environment.wp.title,"(#"+this.id+") --"].concat(Array.prototype.slice.call(arguments)))}});return a});(function(a){define("DS/UWPClientCode/DebugMe",function(){var c=!!(a.UWA&&a.UWA.debug),b;b={setEnabled:function(d){if(c!==d){c=d}return c},isEnabled:function(){return c}};return b})}(this));define("DS/UWPClientCode/UWA/Element",["UWA/Core","UWA/Element","DS/UIKIT/Mask"],function(c,a,b){return c.extend(a,{mask:function(d){b.mask(this,d)},unmask:function(){b.unmask(this)},isMasked:function(){b.isMasked(this)}})});define("DS/UWPClientCode/I18n",["UWA/Core","UWA/Utils","UWA/Utils/Client"],function(f,i,c){var j="swymlang",h="en",b=window.dsLang,g,a,d={en:{localizedName:f.i18n("English"),staticName:"English"},fr:{localizedName:f.i18n("French"),staticName:"Français"},de:{localizedName:f.i18n("German"),staticName:"Deutsch"},ja:{localizedName:f.i18n("Japanese"),staticName:"日本語"},ko:{localizedName:f.i18n("Korean"),staticName:"한국어"},ru:{localizedName:f.i18n("Russian"),staticName:"Pусский"},zh:{localizedName:f.i18n("Chinese"),staticName:"中文"}},l={devsymbol:{localizedName:"Symbol for Debug",staticName:"Symbol for Debug"},devkey:{localizedName:"NLS Key for Debug",staticName:"NLS Key for Debug"},devtrace:{localizedName:"NLS Trace for Debug",staticName:"NLS Trace for Debug"}},k=(function(){var s=/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/g,q=i.parseUrl(window.location).domain,m="",p="",r,n,o;if(!s.test(q)&&q!=="localhost"){r=q.split(".");m=r[r.length-2]+"."+r[r.length-1];if(r.length>2){r.shift()}p=r.join(".")}n=function(v,t,u){f.log("Setting lang cookie ("+j+") to "+v+" on domain "+t);document.cookie=j+"="+encodeURIComponent(v)+"; domain="+t+"; path=/; expires="+u.toGMTString()};o=function(){return document.cookie.indexOf(j)!==document.cookie.lastIndexOf(j)};return function(u){var t=new Date();t.setTime(t.getTime()+30*24*60*60*1000);n(u,p,t);if(o()){n("",m,new Date(0))}}}()),e=function(){if(f.debug){f.merge(d,l)}g.setCurrentLanguage(b||c.Locale.lang,true)};g={getCurrentLanguage:function(){return a},setCurrentLanguage:function(n,o){var m=n;if(!f.is(d[m])){m=h}if(a!==m&&!o){k(m);window.location.reload()}a=m},getSupportedLanguages:function(){return d},getDebugLanguages:function(){return l},replace:function(n,m){return n.replace(/\{([\w\-]+)\}/g,function(o,p){return m[p]!==undefined?m[p]:""})}};e();return g});define("DS/UWPClientCode/Fingerprint",function(){var a={};return{has:function(b){return !!(b&&a[b])},get:function(c){var b;if(!c){return null}b=a[c];return b?b:null},set:function(b,c){if(b){a[b]=c}},remove:function(b){if(b){delete a[b]}},setAll:function(c){if(c){for(var b in c){a[b]=c[b]}}}}});define("DS/UWPClientCode/PublicAPI",["UWA/Core","UWA/Promise","UWA/Utils","DS/PubSub/PubSub",["DS","WAFData","WAFData"].join("/"),"DS/UWPClientCode/Data","DS/UWPClientCode/Data/ApplicationConfiguration","DS/UWPClientCode/Data/User","DS/UWPClientCode/Data/Context","DS/UWPClientCode/Data/Widgets","DS/UWPClientCode/Data/Notification"],function(h,f,e,d,c,g,j,l,b,m,q){var k="7zhxiXCAwqKCBb8nn002";var r="USER",i="GROUP";var p=function(w,v,t,u){if(h.is(w,"function")){if(u){setTimeout(function(){w.apply(v,t)})}else{w.apply(v,t)}}};function o(t,v){var u=[t,v];return u.indexOf("OWNER")>=0?"OWNER":u.indexOf("CONTRIBUTOR")>=0?"CONTRIBUTOR":"READER"}var n=function(w,t){var u={};function v(x,z){var y;x=x||[];z=z||[];if(!x.length){return z}if(!z.length){return x}y=h.clone(x);z.forEach(function(B){var A;x.forEach(function(D,C){if(D.type===r||(D.type===i&&B.contextAccessId===D.contextAccessId)){A=C}});A?(y[A]=B):y.push(B)});return y}if(w){w.forEach(function(x,y){u[x.id]={index:y,active:x.active,role:x.role,shareAccesses:x.shareAccesses}})}t.forEach(function(x,z){var y=u[x.id];if(y){x.active=y.active;x.role=o(x.role,y.role);x.owner=x.role.toLowerCase()==="owner";x.shareAccesses=v(y.shareAccesses,x.shareAccesses);w[y.index]=x;t[z]=x}else{w.push(x)}})};var a=function(u,v){var t=u.success;u.success=function(){var w=s._getContext(u.id,u.type);w.membersCount=w.membersCount+(v==="set"?1:-1);t&&t.call(u.scope,w)};b[v+"Acl"](u)};var s={events:{contextChange:"ContextChange",contextAdd:"ContextAdd",isEditionPossible:"IsEditionPossible",editionModeChanged:"EditionModeChanged",userRefreshed:"UserRefreshed"},callbacks:{addWidget:function(v,u,t){u()},loadExternalWidget:function(t,u){u()},beforeWidgetLaunch:function(t){}},applicationConfigurations:[],widgetConfigurations:[],user:{properties:{}},contexts:null,_sandboxPlatformId:undefined,_initUserContexts:function(t){t=t||[];t.forEach(function(u){u.shareAccesses=[{type:r,role:u.role||"OWNER"}]});this.contexts=t},_setUser:function(t){var u={properties:{}};t=h.clone(t);this.user=h.extend(u,t)},_initSandbox:function(){var v="app.urls.myapps";if(!window.dsPlatformPrefixUrlEnabled){return}var u=(e.parseUrl(window.location.href).domain.split(".")[0]||"").split("-");if(u.length===4){var t,w=e.parseUrl(this.getApplicationConfiguration(v));this._sandboxPlatformId=(u[0]||"").toUpperCase();w.domain=u[0]+"-"+w.domain;t=e.composeUrl(w);this.applicationConfigurations.forEach(function(x){if(x.propertyKey===v){x.propertyValue=t}})}},getSandboxPlatformId:function(){return this._sandboxPlatformId},getApplicationConfiguration:function(v){for(var u=0,t=this.applicationConfigurations.length;u<t;u++){if(this.applicationConfigurations[u].propertyKey===v){return this.applicationConfigurations[u].propertyValue}}},getAllApplicationConfigurations:function(t){var u=this;if(t){j.getAll({async:false,scope:u,success:function(v){u.applicationConfigurations=v}})}return u.applicationConfigurations},getWidgetConfiguration:function(v){for(var u=0,t=this.widgetConfigurations.length;u<t;u++){if(this.widgetConfigurations[u].id===v){return this.widgetConfigurations[u]}}},getAllWidgetConfigurations:function(t){var u=this;if(t){m.getConfigurations({async:false,id:k,scope:this,success:function(v){u.widgetConfigurations=v}})}return this.widgetConfigurations},getUser:function(){return this.user},getCachedCurrentUser:function(){return this.user},getUserAsync:function(t){l.getUser({scope:this,success:function(u){h.extend(this.user,u);if(h.is(t.success,"function")){t.success(u)}d.dispatch(this.events.userRefreshed)},failure:function(u){if(t.retryNumber-->0){setTimeout(this.getUserAsync.bind(this,t),t.retryDelay||1000)}else{if(h.is(t.failure,"function")){t.failure(u)}}}})},getCurrentUser:function(u){var t=u||{},w=this;function x(y){return new f(function(A,z){return c.authenticatedRequest(y,{method:"GET",onComplete:A,onFailure:z,onTimeout:z,onCancel:z})})}var v=function(){return new f(function(z,y){j.get("app.urls.passport").then(function(A){z(A)},y)})};return new f(function(z,y){if(w.user.email&&!t.refresh){z(w.user)}else{l.getCurrentUser().then(function(A){h.extend(w.user,A)},y).then(v,y).then(function(A){return A.propertyValue+"/api/authenticated/user/me"},y).then(x,y).then(function(A){var C=JSON.parse(A),B={email:C.fields.email,firstName:C.fields.firstName,lastName:C.fields.lastName,telephone:C.fields.telephone,address:C.fields.address,city:C.fields.city};h.extend(w.user,B);return w.user},y).then(z,y)["catch"](function(A){y(A)})}})},getUserProperty:function(t){return this.user.properties[t]},setUserProperty:function(u,t){this.user.properties[u]=t;l.setProperty({key:u,value:t})},removeUserProperty:function(t){delete this.user.properties[t];l.removeProperty({key:t})},getContextRoles:function(t){b.getContextRoles(t)},setContextRoles:function(t){b.setContextRoles(t)},getRestrictedContexts:function(B){var y=B||{},x=y.type,A=y.scope,z=y.success,w=y.failure;function t(D,C){if(C){return D.filter(function(E){return E.type===C})}else{return D}}function v(C){n(this.contexts,C);p(z,A,[t(C,x)])}function u(){p(w,A,arguments)}b.getAll({scope:this,ownership:true,success:v,failure:u})},getContextsBy:function(C){var z=C||{},y=z.type,B=z.scope,A=z.success,x=z.failure;function t(E,D){if(D){return E.filter(function(F){return F.type===D})}else{return E}}function v(D){var E={};D.forEach(function(F){var G=E[F.id];if(!G){G=F;E[F.id]=F}else{G.role=o(G.role,F.role)}if(F.membersCount===0){return}G.shareAccesses=G.shareAccesses||[];G.shareAccesses.push({type:(F.accessType||"").toUpperCase(),role:F.role,contextAccessId:F.contextAccessId})});return Object.keys(E).map(function(F){return E[F]})}function w(D){D=z.unMerged?v(D):D;n(this.contexts,D);p(A,B,[t(D,y)])}function u(){p(x,B,arguments)}b.getBy({roles:z.roles,platforms:z.platforms,projection:z.projection,unMerged:z.unMerged,success:w.bind(this),failure:u})},getAllContexts:function(w){var u=w||{},y=u.type,x=u.scope,t=u.success,v=u.failure;function z(B,A){if(A){return B.filter(function(C){return C.type===A})}else{return B}}if(this.contexts){p(t,x,[z(this.contexts,y)],true)}else{p(v,x,[],true)}},_getAllContexts:function(t){var u=this.contexts;if(t){return u.filter(function(v){return v.type===t})}else{return u}},getContext:function(B){var y=B||{},z=y.success,w=y.failure,A=y.scope,t=y.id,x=y.type,u;function v(E){for(var D=0,C=E.length;D<C;D++){if(h.is(x)&&E[D].modelId===t&&E[D].type===x){return E[D]}else{if(E[D].id===t){return E[D]}}}}if(this.contexts){u=v(this.contexts)}if(u){p(z,A,[u],true)}else{p(w,A,["Context not found "+x+" "+t],true)}},_getContext:function(v,u){var t;if(!u){t=this.contexts.filter(function(w){return w.id===v})}else{t=this.contexts.filter(function(w){return w.modelId===v&&w.type===u})}return t[0]},setContext:function(u){var t=u||{},x=this,z=t.id,w=t.type,v=this._getContext(z,w);function y(A){if(!v){A.owner=true;A.membersCount=1;n(x.contexts,[A]);d.dispatch(x.events.contextAdd,h.clone(A),true);p(t.success,t.scope,[A])}else{h.extend(v,A);v.template=(!A.template||A.template<0)?null:A.template;p(t.success,t.scope,[v])}}b.set({id:z,type:w,name:t.name,template:t.template,accessType:t.accessType,scope:t.scope,success:y,failure:t.failure})},removeContext:function(u){var t=u||{},y=this,A=t.id,x=t.type,w=t.scope,v=y._getContext(A,x);function z(){y.contexts.splice(y.contexts.indexOf(v),1);p(t.success,w,arguments)}x=x||v.type;b.remove({id:A,type:x,success:z,failure:t.failure,scope:w})},getActiveContext:function(x){var u=x,t=u.success,w=u.failure,y=u.scope;function z(C){for(var B=0,A=C.length;B<A;B++){if(C[B].active&&(!u.type||C[B].type===u.type)){return C[B]}}}if(this.contexts){var v=z(this.contexts);if(v){p(t,y,[v],true)}else{p(w,y,[],true)}}else{p(w,y,[],true)}},_getActiveContext:function(u){var v=this.contexts,t;for(t=0;t<v.length;t++){if(v[t].active&&(!u||v[t].type===u)){return v[t]}}},getAllActiveContexts:function(w){var u=w||{},t=u.success,v=u.failure,x=u.scope;function y(z){if(z.active){return true}}if(this.contexts){p(t,x,[this.contexts.filter(y)],true)}else{p(v,x,[],true)}},_getAllActiveContexts:function(){var t=this.contexts;return t.filter(function(u){return !!u.active})},setActiveContext:function(t){var v=this,u=v._getContext(t.id,t.type);if(u&&!u.active){this.contexts.some(function(w){if(w.active){w.active=false;return true}});u.active=true;d.dispatch(v.events.contextChange,h.clone(u),true);p(t.success,t.scope,[u],true)}else{p(t.failure,t.scope,[],true)}},_setActiveContext:function(w,u){var v=this,t=v._getContext(w,u);if(t&&!t.active){this.contexts.some(function(x){if(x.active){x.active=false;return true}});t.active=true;d.dispatch(v.events.contextChange,h.clone(t),true)}},getAclAsync:b.getAcl,setAclAsync:function(t){a(t,"set")},removeAclAsync:function(t){a(t,"remove")},setAclV2:function(u){u=u||{};var t=u.success;function v(w){var x=s._getContext(u.modelId,u.type);x.membersCount=w.membersCount;t&&t.call(u.scope,w)}u.success=v;b.setAclV2(u)},setGroupAccesses:function(u){var t=u.success;function v(w){var x=s._getContext(u.modelId,u.type);x.membersCount+=u.groups.length;t&&t.call(u.scope,w)}u.success=v;b.setGroupAccesses(u)},updateGroupAccess:b.updateGroupAccess,removeGroupAccess:function(u){var t=u.success;function v(w){var x=s._getContext(u.modelId,u.type);x.membersCount-=1;t&&t.call(u.scope,w)}u.success=v;b.removeGroupAccess(u)},getWidgetById:m.getWidgetById,getWidgetByUrl:m.getWidgetByUrl,getWidgetInstance:m.getWidgetInstance,addWidgetInstance:function(u){var t=u||{},w;function x(y){d.dispatch("widget-"+t.parentId,["show",[y]],true);t.success&&t.success.call(t.scope,arguments)}function v(){t.failure&&t.failure.call(t.scope,arguments)}w={scope:this,success:x,failure:v};if(t.appId){h.merge(w,t);m.createWidgetInstanceFromApp(w)}else{w.widgetIdOrUrl=t.widgetIdOrUrl;h.merge(w,t);m.createWidgetInstance(w)}},getWidgetInstanceData:function(u){var t=u||{};function w(x){x&&h.merge(t.data,x);t.success&&t.success.call(t.scope,t.data)}function v(){t.failure&&t.failure.call(t.scope,arguments)}if(h.is(t.dataUrl,"string")&&t.dataUrl.length){g.request({url:t.dataUrl,method:"GET",success:w,failure:v})}else{w()}},setWidgetInstance:m.editWidgetInstance,removeWidgetInstance:m.removeWidgetInstance,getWidgetInstanceChildren:function(t){m.getWidgetInstanceChildren(t)},copyWidgetInstance:function(u){var t=u||{},w;function x(y){d.dispatch("widget-"+y.parentId,["show",[y]],true);t.success&&t.success.call(t.scope,arguments)}function v(){t.failure&&t.failure.call(t.scope,arguments)}w={scope:this,depth:1,success:x,failure:v};h.merge(w,t);m.copySubTree(w)},copyContextTree:m.copyContextTree,copySubTree:m.copySubTree,enableDragAndInstantiation:function(v){var u={},t=v||{},w=t.element;if(h.is(w,"element")){u["data-url"]=t.url;u["data-title"]=t.title;u["data-isolationLevel"]=t.trusted?1:2;["icon","dataUrl","data","appId","token","apps"].forEach(function(x){if(t[x]){u["data-"+x]=t[x]}});w.setStyle("-ms-touch-action","none");w.setAttributes(u)}},getPageWidget:function(v,x){var w=h.Widgets.instances;for(var u=0,t=w.length;u<t;u++){if(h.is(x)&&w[u][v]===x||w[u].id===v){if(w[u].environment){return w[u]}}}},getParentContextOwner:function(v){var u=v.environment,t=u&&u.wp&&u.wp.parent;while(t){if(t.wp&&t.wp.allowedChildrenContextType||!t.wp){return t.widget}else{t=t.wp.parent}}},getContextOwner:function(t){var x=h.Widgets&&h.Widgets.instances||[],w;for(var v=0,u=x.length;v<u;v++){w=x[v].environment;if(w&&w.wp&&w.wp.allowedChildrenContextType===t){return x[v]}}},getWidgetChildren:function(u){var t=u.environment;if(t&&t.wp&&t.wp.children){return t.wp.children}},requireAuthentication:function(){if(window.dsUserLogin){return false}document.location.replace(this.getApplicationConfiguration("app.urls.passport")+"/login?service="+escape(document.location.href));return true},getAllNotificationsAsync:q.getAll,getNotificationAsync:q.get,setPublicNotificationAsync:q.setPublic,setPrivateNotificationAsync:q.createPrivate,createNotification:q.create,publishNotification:q.publish,publishNotificationByMail:q.mail};return s});define("DS/UWPClientCode/Undo",["UWA/Core","UWA/Class","UWA/String","DS/UIKIT/Alert","i18n!DS/UWPClientCode/assets/nls/Undo/undo"],function(f,a,c,b,d){var e=a.extend({stack:null,duration:null,namespace:null,alert:null,init:function(){var h=this;h.stack={};h.duration=5000;h.namespace="action-undo";function j(l){if(!h.stack[l]){return}delete h.stack[l]}function i(m,l){if(!h.stack[m]){return}h.stack[m].undoAgree();j(m);h.alert.remove(l)}function g(l){var m=l.querySelector("."+h.namespace),n;if(f.is(m,"element")){n=m.dataset.id;h.stack[n].undoPending();m.addEventListener("click",i.bind(h,n,l))}}function k(l){var m=l.querySelector("."+h.namespace),n;if(f.is(m,"element")){n=m.dataset.id;m.removeEventListener("click",i.bind(h,n));if(h.stack[n]){h.stack[n].undoDecline()}j(n)}}h.alert=new b({closable:true,visible:true,autoHide:true,hideDelay:h.duration,closeOnClick:false,className:"undo-alert",events:{onShowMessage:g,onRemoveMessage:k}}).inject(document.body,"top");window.addEventListener("beforeunload",function(){for(var l in h.stack){h.stack[l].undoDecline()}})},addAction:function(i){var k=i.id,h=i.name||d.elementMessage,j=this,g;if(!k){f.log("addAction should have an id parameter");return}g=f.createElement("div",{html:"<b>"+c.escapeHTML(h)+"</b> "+d.deletionMessage+". "});f.createElement("span",{text:d.ClickToUndoMessage,styles:{fontWeight:"bold",fontSyle:"italic",cursor:"pointer","text-decoration":"underline"},"class":j.namespace,"data-id":k}).inject(g);j.stack[k]={undoAgree:i.undoAgree,undoDecline:i.undoDecline,undoPending:i.undoPending};j.alert.add({className:"success",message:g.getHTML()})},isPending:function(g){return !!this.stack[g]}});return new e()});define("DS/UWPClientCode/Data",["UWA/Core","UWA/Data","DS/UWPClientCode/I18n"],function(h,o,f){var e=window.location,q=e.pathname,c=e.protocol+"//"+e.host,m=q.indexOf("/api/widget/"),n=window.dsBaseUrl||c+q.substring(0,m!==-1?m+1:q.length);function k(r,l){return function(){r&&r.apply(l,arguments)}}function p(l){return l==="POST"||l==="PUT"||l==="PATCH"}function j(r,l){return p(r)&&(!l||l==="json")}function d(l){return l.indexOf("://")===-1&&l.charAt(0)!==0}function b(r,t){var s,l=r;for(s in t){if(t.hasOwnProperty(s)){l=i(l,s,t[s])}}return l}function g(l,r){return l.match(new RegExp("([?&])"+r+"=.*?(&|$)","i"))}function a(r,s,l){return r.replace(new RegExp("([?&])"+s+"=.*?(&|$)","i"),"$1"+s+"="+l+"$2")}function i(r,t,v){var s=r.indexOf("#"),x=(s===-1)?"":r.substr(s),u=(s===-1)?r:r.substr(0,s),w=r.indexOf("?")!==-1?"&":"?",l=encodeURIComponent(v);u=g(u,t)?a(u,t,l):u+w+t+"="+l;return u+x}return{prefix:window.dsPrefix||"",request:function(C){var r=C||{url:""},s=r.url||"",l=r.method||"POST",x=r.type,u=r.async!==false,A=r.contentType||"application/json",y=r.timeout||r.failure,v=!r.notEmbedParams,z=r.payload,B=r.queryParams,t,w;if(d(s)){s=n+s}if(B){s=b(s,B)}if(z&&p(l)){w=(!x||x==="json")?JSON.stringify(z):z}if(!w&&r.params){w=j(l,x)?JSON.stringify(v?{params:r.params}:r.params):r.params}t=h.merge(r.headers||{},{"Content-Type":A,"Accept-Language":f.getCurrentLanguage()});return o.request(s,{data:w,method:l,type:x,async:u,useJsonpRequest:false,headers:t,onTimeout:k(y,r.scope),onFailure:k(r.failure,r.scope),onComplete:function(D){if(typeof D==="string"){try{D=D?JSON.parse(D):{}}catch(E){D={}}}if(!D.result){D.result=h.clone(D)}if(h.is(r.success,"function")){r.success.call(r.scope,D.result,D.nb_result,D)}}})}}});define("DS/UWPClientCode/Data/Context",["DS/UWPClientCode/Data","DS/Logger/Logger"],function(d,c){var e=d.prefix+"api/contexts";var b=d.prefix+"api/v2/contexts";var a={getUrl:function(){return e},getAll:function(f){f=f||{};d.request({method:"GET",url:e,success:f.success,failure:f.failure,scope:f.scope,params:{displayOwnership:f.ownership,contextType:f.type}})},getBy:function(f){f=f||{};var g={};if(f.platforms){g.platforms=f.platforms.join(",")}if(f.roles){g.roles=f.roles.join(",")}if(f.projection){g.projection=f.projection}if(f.unMerged){g.filter="false"}d.request({method:"GET",url:e,success:f.success,failure:f.failure,scope:f.scope,params:g})},getContextRoles:function(g){var h=g||{},f=e+"/"+h.type+"/"+h.modelId+"/roles";if(!h.modelId){c.warn("get context roles: modelId is mandatory")}if(!h.type){c.warn("get context roles: type is mandatory")}d.request({method:"GET",url:f,success:h.success,failure:h.failure,scope:h.scope})},setContextRoles:function(g){var i=g||{},h=i.roles||[],f=e+"/"+i.type+"/"+i.modelId+"/roles";if(!i.modelId){c.warn("set context roles: modelId is mandatory")}if(!i.type){c.warn("set context roles: type is mandatory")}d.request({method:"POST",url:f,success:i.success,failure:i.failure,scope:i.scope,params:h,notEmbedParams:true})},set:function(f){var g={type:f.type,name:f.name,modelId:f.id,access:f.accessType};if(f.template){g.template=f.template}d.request({url:e,success:f.success,failure:f.failure,scope:f.scope,async:f.async,params:g})},remove:function(f){d.request({method:"DELETE",url:e+"/"+f.type+"/"+f.id,success:f.success,failure:f.failure,scope:f.scope})},setAcl:function(f){d.request({method:"POST",url:e+"/acl",success:f.success,failure:f.failure,scope:f.scope,payload:{type:f.type,modelId:f.id,login:f.login,owner:f.isOwner,email:!!f.email}})},setAclV2:function(f){d.request({method:"POST",url:b+"/acl",payload:{recipients:f.recipients,type:f.type,modelId:f.modelId,sendEmail:f.sendEmail||false},success:f.success,failure:f.failure,scope:f.scope})},setGroupAccesses:function(f){d.request({method:"POST",url:b+"/group-accesses",payload:{groups:f.groups,type:f.type,modelId:f.modelId,sendEmail:f.sendEmail||false},success:f.success,failure:f.failure,scope:f.scope})},updateGroupAccess:function(f){d.request({method:"PUT",url:b+"/"+f.type+"/"+f.modelId+"/group-accesses/"+f.groupId,payload:{role:f.role.toUpperCase(),sendEmail:f.sendEmail||false},success:f.success,failure:f.failure,scope:f.scope})},getAcl:function(f){d.request({method:"GET",url:b+"/"+f.type+"/"+f.id+"/accesses",params:{displayUserInfo:f.userInfo,offset:f.offset,limit:f.limit},success:f.success,failure:f.failure,scope:f.scope})},removeAcl:function(f){d.request({method:"DELETE",headers:{Accept:"application/json"},url:e+"/"+f.type+"/"+f.id+"/acl/"+f.login,success:f.success,failure:f.failure,scope:f.scope})},removeGroupAccess:function(f){d.request({method:"DELETE",url:b+"/"+f.type+"/"+f.modelId+"/group-accesses/"+f.groupId,success:f.success,failure:f.failure,scope:f.scope})}};return a});define("DS/UWPClientCode/Data/User",["UWA/Core","UWA/Promise","DS/UWPClientCode/Data"],function(d,c,b){var a={getUser:function(f){var e=f||{};b.request({method:"GET",async:e.async,url:b.prefix+"api/users/current",success:e.success,failure:e.failure,scope:e.scope})},getCurrentUser:function(){return new c(function(f,e){b.request({method:"GET",url:b.prefix+"api/users/current",success:f,failure:e})})},setProperty:function(f){var e=f||{};b.request({url:b.prefix+"api/users/properties/edit",success:e.success,failure:e.failure,scope:e.scope,params:{propertyKey:e.key,propertyValue:e.value}})},removeProperty:function(e){b.request({method:"DELETE",url:b.prefix+"api/users/properties/?key="+e.key,success:e.success,failure:e.failure,scope:e.scope})}};return a});define("DS/UWPClientCode/Data/ApplicationConfiguration",["UWA/Core","UWA/Promise","DS/UWPClientCode/Data"],function(d,c,b){var a={getAll:function(e){e=e||{};b.request({method:"GET",async:d.is(e.async)?e.async:true,url:b.prefix+"api/appProperties",success:e.success,failure:e.failure,scope:e.scope})},get:function(e){var f=e||"";return new c(function(h,g){b.request({method:"GET",url:b.prefix+"api/appProperties/"+f,success:h,failure:g})})}};return a});define("DS/UWPClientCode/Data/Widgets",["UWA/Core","DS/UWPClientCode/Data","DS/UWPClientCode/DebugMe","DS/UWPClientCode/I18n"],function(g,i,j,e){function h(p,r){if(!p){return}if(g.is(p,"object")){var n=[];Object.keys(p).forEach(function(s){n.push(p[s])});p=n}for(var o=0,m=p.length;o<m;o++){if(p[o].id===r||r==="0"){return p[o]}else{var q=h(p[o].children,r);if(!q&&p[o].contexts){q=h(p[o].contexts,r)}if(q){return q}}}}function k(q,s){var n=[],p=[];if(!q){return}if(g.is(q,"object")){Object.keys(q).forEach(function(t){n.push(q[t]);p.push(t)});q=n}for(var o=0,m=q.length;o<m;o++){var r=false;if(q[o].id===s){return p[o]?p[o]:true}else{if(q[o].contexts){r=k(q[o].contexts,s)}else{r=k(q[o].children,s)}if(r===true&&p[o]){return p[o]}else{if(r){return r}}}}}function d(m,n){m.forEach(function(o){o.contextType=n;if(o.children){d(o.children,n)}})}function c(n,p,s){function q(t,u){t.forEach(function(v){if(!v.isContainer){return}v.isEditable=u;if(v.children){q(v.children,u)}})}try{var m=require("DS/UWPClientCode/PublicAPI"),o=m._getContext(s,p);q(n,o&&o.owner)}catch(r){}}function b(n,m){return i.prefix+(window.ds.anonymous&&m?"public/api":"api")+n}function l(m){var n;if(!m){return m}n=new DOMParser().parseFromString(m,"text/html");return n.documentElement.textContent}var a,f={getWidget:function(m){var n={method:"GET",url:b("/widgets/json",true),params:{id:m.id,uwaUrl:m.url,cs:m.cs,lang:e.getCurrentLanguage()}};if(j.isEnabled()){n.params.debug_me=true}g.merge(n,m);i.request(n)},getWidgetById:function(m){f.getWidget(m)},getWidgetByUrl:function(m){f.getWidget(m)},getWidgetInstance:function(n){var o=h([a],n.id),m=n.success,q={method:"GET",url:b("/widget-instances/"+n.id,true),success:function p(r){g.merge(o||{},r);m&&m.call(n.scope,g.clone(r))}};if(!n.refresh&&o&&n.success){setTimeout(n.success.call(n.scope,g.clone(o)),0)}else{g.merge(q,n);i.request(q)}},getWidgetInstanceChildren:function(m){var o=h([a],m.id),r=m.success,s=m.contextId,n=m.contextType,q;if(s&&!n||n&&!s){return}function p(){o=h([a],m.id);if(s&&n&&o.contexts&&o.contexts[s]){o=g.clone(o);o={parent:o.contexts[s],children:o.contexts[s].children}}if(o&&r){r.call(m.scope,g.clone(o))}}if(o&&r&&!n){setTimeout(r.call(m.scope,g.clone(o)),0)}else{if(o&&r&&n&&o.contexts&&o.contexts[s]){o={parent:o.contexts[s],children:o.contexts[s].children};setTimeout(r.call(m.scope,g.clone(o)),0)}else{if(n&&s){q={depth:5,success:p};g.merge(q,m);this.getWidgetInstanceContextTree(q)}else{q={success:p};g.merge(q,m);this.getWidgetInstancePublicTree(q)}}}},editWidgetInstance:function(n){var q=n.success,m=n.failure,p;function o(s,u,t){var w=h([a],n.id),v=w.parentId&&h([a],w.parentId),r=w&&w.parentId,y=w&&w.contextParentId,x;if(w){Object.keys(n).forEach(function(z){if(z==="parentId"){x=h([a],n.parentId);if(x){w.parentId=n.parentId;x.children=x.children||[];if(y){x.children.push(v.contexts.splice(v.contexts.indexOf(w),1)[0])}else{if(r){x.children.push(v.children.splice(v.children.indexOf(w),1)[0])}}}}else{if(z==="data"){n.data=n.data||{};w.data=JSON.stringify(n.data)}else{if(["widgetId","data","title","name","coordinates"].indexOf(z)!==-1){w[z]=n[z]}}}});q&&q.call(n.scope,s,u,t)}else{m&&m.call(n.scope,s,u,t)}}p={method:"POST",url:b("/widget-instances/edit"),success:o,failure:function(t,r){var s;try{s=JSON.parse(r)}catch(u){s=r}m&&m.call(n.scope,s)},params:{id:n.id,widgetId:n.widgetId,parentId:n.parentId,data:n.data,title:n.title,name:n.name,coordinates:n.coordinates||n.rank},notEmbedParams:true};g.merge(p,n);i.request(p)},reorderWidgetInstances:function(m){var p=m.success,o;function n(q,s,r){var t=h([a],m.parentId);t.children=t.children||[];m.children.forEach(function(u){t.children.some(function(v){if(v.id===u.id){v.coordinates=u.coordinates;return true}})});p&&p.call(m.scope,q,s,r)}o={method:"POST",url:b("/widget-instances/reorder"),success:n,params:{parentId:m.parentId,children:m.children},notEmbedParams:true};g.merge(o,m);i.request(o)},createWidgetInstance:function(n){var r=n.success,m=n.failure,q;function p(s,v,u){var w=h([a],n.parentId),t;if(w){if(n.context&&n.context.modelId&&n.context.type&&s.contextParentId){w.contexts=w.contexts||{};d([s],n.context.type);w.contexts[n.context.id]=g.clone(s);r&&r.call(n.scope,s,v,u)}else{w.children=w.children||[];d([s],w.contextType);t=k([a],n.parentId);if(t){c([s],w.contextType,t)}w.children.push(g.clone(s));r&&r.call(n.scope,s,v,u)}}else{m&&m.call(n.scope)}}function o(s){if(!s){return}s.forEach(function(t){if(!t.data){t.data={}}if(t.children){o(t.children)}})}o(n.children);q={method:"POST",url:b("/widget-instances/add"),success:p,params:{widgetId:n.widgetIdOrUrl,name:n.name,data:n.data||{},parentId:n.parentId,coordinates:n.coordinates||n.rank,title:n.title,children:n.children,context:n.context||undefined},notEmbedParams:true};g.merge(q,n);i.request(q)},createWidgetInstanceFromApp:function(o){var s=o.success,n=o.failure,q,m=l(o.name),r=l(o.title);function p(t,v,u){var w=h([a],o.parentId);if(w||o.preview){if(!o.preview){w.children=w.children||[];d([t],w.contextType);w.children.push(g.clone(t))}s&&s.call(o.scope,t,v,u)}else{n&&n.call(o.scope)}}q={method:"POST",url:b("/widget-instances/addApp"),success:p,params:{appId:o.appId,parentId:o.parentId,dataUrl:o.dataUrl,data:o.data||{},name:m,title:r,coordinates:o.coordinates||o.rank,preview:o.preview},notEmbedParams:true};g.merge(q,o);i.request(q)},copyContextTree:function(m){var p=m.success;function o(q,s,r){var t=h([a],q.contextParentId);if(t){t.contexts=t.contexts||{};d([q],m.targetContext.type);c([q],m.targetContext.type,m.targetContext.modelId);t.contexts[m.targetContext.modelId]=g.clone(q);p&&p.call(m.scope,q,s,r)}}var n={method:"POST",url:b("/widget-instances/copy-tree"),success:o,notEmbedParams:true,params:{sourceContext:m.sourceContext,targetContext:m.targetContext,name:m.name,coordinates:m.coordinates||m.rank,depth:m.depth,replacement:m.replacement}};g.merge(n,m);i.request(n)},copySubTree:function(m){var p=m.success;function o(q,t,s){var u,r;u=h([a],q.parentId);if(u){u.children=u.children||[];d([q],u.contextType);r=k([a],m.sourceId);if(r){c([q],u.contextType,r)}q.sourceId=m.sourceId;u.children.push(g.clone(q));p&&p.call(m.scope,q,t,s)}}var n={method:"POST",url:b("/widget-instances/copy-subtree"),success:o,notEmbedParams:true,params:{sourceId:m.sourceId,targetContainerId:m.targetContainerId,name:m.name,coordinates:m.coordinates||m.rank,depth:m.depth,replacement:m.replacement}};g.merge(n,m);i.request(n)},removeWidgetInstance:function(m){var p=m.success,o;function n(r,t,s){var w=h([a],m.id),v=w&&w.contextParentId,q=w&&w.parentId,x=w&&(v||w.parentId);if(x){var u=h([a],x);if(u){if(v){u.contexts.splice(u.contexts.indexOf(w),1)}else{if(q){u.children.splice(u.children.indexOf(w),1)}}}}p&&p.call(m.scope,r,t,s)}o={method:"DELETE",url:b("/widget-instances/"+m.id),success:n};g.merge(o,m);i.request(o)},getCategories:function(m){m=m||{};var n={method:"GET",url:b("/categories/list")};g.merge(n,m);i.request(n)},getConfigurations:function(n){var p=100,o,q=g.is(n.start)?n.start:0,m=g.is(n.limit)?n.limit:p;o={method:"GET",url:b("/widgetConfigurations/list/"+n.id+"?start="+q+"&limit="+m)};g.merge(o,n);i.request(o)},getWidgetInstancePublicTree:function(m){var p=m.success,o;function n(q,s,r){a=q;p&&p.call(m.scope,q,s,r)}o={method:"GET",url:b("/widget-instances/publicTree",true),success:n,params:{fp:m.cacheId,lang:e.getCurrentLanguage()}};g.merge(o,m);i.request(o)},getWidgetInstanceContextTree:function(n){var m=n.failure,r=n.success,s=n.contextId,o=n.contextType,q;if(s&&!o||o&&!s){return}function p(t,v,u){var w=h([a],n.id);if(w&&!t.defaultContext&&o&&s&&t.contextParentId){w.contexts=w.contexts||{};d([t],o);c([t],o,s);w.contexts[s]=g.clone(t);r&&r.call(n.scope,t,v,u)}else{if(w&&!t.defaultContext&&!t.contextParentId){d([t],w.contextType);w.children=g.clone(t.children);r&&r.call(n.scope,t,v,u)}else{r&&r.call(n.scope,t,v,u)}}}q={method:"GET",url:b("/widget-instances/contextTree"),success:p,params:{contextParent:n.id,type:o,modelId:s,fp:n.cacheId,depth:n.depth,lang:e.getCurrentLanguage()}};g.merge(q,n);i.request(q)}};return f});define("DS/UWPClientCode/WidgetFactory",["UWA/Core","DS/UWPClientCode/Data/Widgets","DS/UWPClientCode/UWA/Environment","DS/UWPClientCode/PublicAPI","DS/UIKIT/Alert"],function(g,e,d,b,c){var f=new c({closable:true,visible:true,autoHide:false,className:"wp-alert"}).inject(document.body,"top");var a={load:(function(){function k(n,r,l,q){var m={},o;m.plugins=[];m.preferences=[];m.metas={};m.style="";m.isolationLevel=0;m.appId=null;m.token=null;m.isContainer=false;try{o=JSON.parse(n.data)||{}}catch(p){o={}}n.parsedData=o;if(n.appId){b.callbacks.loadExternalWidget(n,(function(v,y,t,w,s,x){return function u(B){var A;g.extend(v,B);if(v.userNotAllowed){v.isolationLevel=0;A={id:v.widgetId,body:"<p>"+(v.userNotAllowedMessage||g.i18n("userNotAllowed"))+"</p>"};g.merge(A,t);j(A,v,y,t,w)}else{if(v.isolationLevel>0){var z=document.createElement("textarea");if(v.name){z.innerHTML=v.name;v.name=z.value}if(v.title){z.innerHTML=v.title;v.title=z.value}z=null;i(v,y,t,w,s,x)}else{h(v,y,t,w,s,x)}}}}(n,r,m,o,l)))}else{if(n.isolationLevel>0){i(n,r,m,o,l,q)}else{h(n,r,m,o,l,q)}}}function h(n,q,m,o,l,p){e.getWidget({url:n.widgetId,cs:n.checksum,success:function(r){j(r,n,q,m,o,l,p)},failure:function(){f.add({className:"error",message:g.String.format(g.i18n('The widget "{0}" cannot be loaded'),n.name)});p&&p(n)}.bind(this)})}function i(n,q,m,o,l,p){j({},n,q,m,o,l,p)}function j(p,s,t,m,q,o,l){if(!p){return}var r={};r.name=s.name||p.name||"";r.title=s.title||p.title||r.name;r.isolationLevel=g.is(s.isolationLevel)?s.isolationLevel:(g.is(p.isolationLevel)?p.isolationLevel:m.isolationLevel);r.appId=p.appId||s.appId||m.appId;r.widgetId=s.widgetId||p.id;r.body=p.body;r.metas=p.metas||m.metas;r.plugins=p.plugins||m.plugins;r.preferences=p.preferences||m.preferences;r.script=p.script;r.style=p.style||"";r.isContainer=p.isContainer||m.isContainer;r.token=p.token||s.token||m.token;r.checksum=s.checksum;r.preview=s.preview;r.id=r.preview?"preview-"+g.Utils.getUUID().substr(0,6):s.id;r.children=s.children;r.coordinates=s.coordinates;r.el=s.el;r.parentId=s.parentId;r.parent=s.parent;r.data=q;r.allowedChildrenContextType=s.allowedChildrenContextType;r.warnings=s.warnings;r.initialView=s.initialView;(o?new o(r):new d(r)).loadWidget(r.id,{fetcher:p,onComplete:function n(u){b.callbacks.beforeWidgetLaunch(u);u.environment.launchWidget(q);s.widget=u;t&&t(s)}})}return function(m,o,l,n){if(g.is(m.id)&&!m.parent){e.getWidgetInstance({id:m.id,success:function(p){m.id=p.id;g.merge(m,p);k(m,o,l,n)}})}else{k(m,o,l,n)}}}())};return a});define("DS/UWPClientCode/WidgetCatalog",["UWA/Core","UWA/Event","UWA/Utils","DS/UWPClientCode/PublicAPI","DS/PubSub/PubSub","DS/UWPClientCode/WidgetFactory","DS/UWPClientControls/Modal","DS/UIKIT/Mask"],function(k,C,g,p,f,w,e,D){var o="100%",b="wp-drag",v="hide-catalog",h="added",q="added-check",A="collapsed",m="preview",r="direct-add-disable";var x,l=null,y=null,c=false,n=null,u=null,t=o,s=false,i=false;function z(){var F,H,E=k.createElement;y=E("div",{"class":"widget-catalog"});H=E("ul",{"class":"widget-list"});F=E("div",{"class":"catalog-close",events:{click:function(I){C.stop(I);x.close()}}});var G=p.getAllWidgetConfigurations();if(!G||G.length===0){G=p.getAllWidgetConfigurations(true)}G.forEach(function(I){var J,K=I.name;J=E("li",{"class":"widget "+b,title:K,html:[{tag:"img","class":"icon",src:I.icon},{tag:"div","class":"text-cell",html:{tag:"div","class":K.length>26?"ellipsis":"",html:{tag:"div","class":"text",text:K}}},{tag:"div","class":"direct-add",events:{click:function(M){C.stop(M);if(!i){var L=J.getData("conf");L.configId=L.id;d(L,J)}}}}],events:{click:function(M){C.stop(M);var L=J.getData("conf");L.configId=L.id;a(L,J)}}});I.configId=I.id;J.setAttribute("data-id",I.id);J.setData("conf",I);H.grab(J)});y.grab(H);y.grab(F);y.inject(l||document.body);l=null}function d(G,E){function F(H){f.dispatch("widgetAddFromCatalog-"+H,[G,"101"]);if(E){E.addClassName(q);E.removeClassName(h);setTimeout(function(){y.removeClassName(r);E.removeClassName(q);E.addClassName(h);i=false},1000)}}if(!G){return}i=true;y.addClassName(r);n(F)}function a(Q,N){var F,L,J,O,I,H=k.createElement,G=false,P={},E=g.getUUID();if(u){u.hide()}function K(){N.removeClassName(m)}function M(){var R;k.Widgets.instances.forEach(function(S){var T=S.id||null;if(T&&T===E){R=S.data||{};return}});if(R){Q.defaultData=R}d(Q,N);u.hide()}N.addClassName(m);P.data=Q.defaultData;P.title=L=Q.name;P.parent=false;P.widgetId=Q.widgetId;P.id=E;J=H("div",{"class":"preview-ctn",html:{tag:"div",html:[{tag:"div","class":"widget-icon",html:{tag:"img","class":"icon",src:Q.icon||""}},{tag:"div","class":"widget-desc",html:Q.description||""}]}});O=H("div",{"class":"error-widget",text:k.i18n("This widget cannot be loaded, please try again later.")});F=P.el=H("div",{"class":"module"}).inject(J);I=setTimeout(function(){D.unmask(F);O.inject(F)},10000);u=new e({className:"wp-widget-preview-modal",title:k.i18n("Widget preview:")+" "+L,display:true,overlay:true,draggable:false,destroy:true,content:J,buttons:[{value:k.i18n("Cancel"),className:"primary",key:"esc",handler:function(){u.hide()}}],events:{onShow:function(){if(!G){D.mask(F,k.i18n("Loading..."))}else{D.unmask(F)}},onHide:function(){var R,S;K();S=P.widget||null;R=S?S.environment:null;if(R){R.destroy()}u=null}}});w.load(P,function(){var U=P.widget,S=U?U.environment:null,T=S?S.wp.menu:null,R=S?S.html.header:null;if(!U){return}clearTimeout(I);O.hide();G=true;D.unmask(F);if(U.elements.actionMaximize){U.elements.actionMaximize.destroy()}u.removeButton(0);u.addButtons([{value:k.i18n("Add"),className:"primary",handler:M},{value:k.i18n("Cancel"),key:"esc",handler:function(){u.hide()}}]);if(T){T.removeItem({name:"share"});T.removeItem({name:"duplicate"});T.removeItem({name:"maximize"});T.removeItem({name:"delete"})}if(R){R.removeEvent("dblclick");R.removeClassName(b)}})}function B(){var E=y.getElements(".widget");if(!E){return}E.forEach(function(F){F.removeClassName(h);F.removeClassName(q)})}function j(){if(u){u.destroy();u=null}}x={init:function(E,F){x.setFetchWhereToAddWidget(F);if(x.isBuild()){return}l=E;f.add("WidgetCatalog-hide",x.hide);f.add("WidgetCatalog-show",x.show);f.add("WidgetCatalog-close",x.close);f.add("WidgetCatalog-open",x.open)},setFetchWhereToAddWidget:function(E){if(k.typeOf(E)==="function"){n=E}},isBuild:function(){return !!y},open:function(){if(!x.isBuild()){z()}x.setWidth(t);if(x.isCollapsed()){x.collapse()}x.show(true);y.show();c=true},close:function(){if(!x.isBuild()){return}y.hide();c=false;B();j()},isOpen:function(){return c},hide:function(E){if(!x.isBuild()||(!x.isOpen()&&!E)){return}y.addClassName(v)},show:function(E){if(!x.isBuild()||(!x.isOpen()&&!E)){return}y.removeClassName(v)},toggle:function(){if(x.isOpen()){x.close()}else{x.open()}},collapse:function(){s=true;if(!x.isBuild()){return}y.addClassName(A)},expand:function(){s=false;if(!x.isBuild()){return}y.removeClassName(A)},isCollapsed:function(){return s},setWidth:function(E){t=E;if(!x.isBuild()){return}y.setStyle("width",E)},resetWidth:function(){t=o;if(!x.isBuild()||!x.isOpen()){return}y.setStyle("width",o)}};return x});define("DS/UWPClientCode/Standalone/Bootstrap",["UWA/Core","DS/UWPClientCode/WidgetFactory","DS/UWPClientCode/PublicAPI",["DS","i3DXCompass","i3DXCompass"].join("/")],function(d,b,a,c){return{start:function(){var e={};if(!standaloneAppId){return}e.el=d.extendElement(document.body);e.parent=false;e.isolationLevel=1;e.preview=true;e.appId=standaloneAppId;standaloneAppData&&(e.data=standaloneAppData);d.createElement("div",{id:"compass-container",styles:{display:"none"}}).inject(document.body);d.createElement("div",{id:"my-apps-container",styles:{display:"none"}}).inject(document.body);c.initialize({compassTarget:"compass-container",appsTarget:"my-apps-container",launchOnSameDomain:true,myAppsBaseUrl:a.getApplicationConfiguration("app.urls.myapps")||"",userId:dsUserLogin});c.getAppInfo({appId:standaloneAppId,onComplete:function(f){if(f){e=d.extend(e,{widgetId:d.is(f.launchInfos)?f.launchInfos:f.platforms[0].launchInfos,isolationLevel:d.is(f.isolationLevel)?f.isolationLevel:f.platforms[0].isolationLevel,token:d.is(f.checksum)?f.checksum:f.platforms[0].checksum});b.load(e,function(){document.body.getElement("iframe").height=window.innerHeight})}else{e.el.setText(d.i18n("Unable to load this widget, please try again. If the problem persists please try another widget."));e.el.addClassName("launching-error")}}})}}});define("DS/UWPClientCode/Navigation",["require","UWA/Core","UWA/Promise","DS/PubSub/PubSub","DS/UWPClientCode/PublicAPI"],function(c,e,h,j,a){var d="/",g=":",f;function i(k){var l;if(typeof(Event)==="function"){l=new Event(k)}else{l=document.createEvent("Event");l.initEvent(k,true,true)}return l}function b(l){var k=[];l=(typeof l==="string"&&l!==null)?l:"";l=(l[0]==="#")?l.substr(1):l;l.split(d).forEach(function(m){if(m){m=m.split(g);k.push({name:m[0],param:m[1]})}});return k}f={pagesHierarchy:{},fullPagesHierarchy:{},currentAddress:[],previousAddress:[],navigationMode:"",preNavigationHandler:h.resolve.bind(h),postNavigationHandler:h.resolve.bind(h),setMode:function(k){this.navigationMode=k;if(this.navigationMode==="PATH"){this.baseUrl=dsBaseUrl;this.pushPath=function(l){(l.charAt(0)===d)&&(l=l.substr(1));history.pushState(null,"",e.Utils.parseUrl(this.baseUrl+l).source);window.dispatchEvent(i("popstate"))};f.routeTo=function(l){this.pushPath(l)};this.getCardUrl=function(l,m){return d+m.join(d)};f.getUrlParameter=function(m){var l=this,n=null;this.currentAddress.every(function(p,o){if(p.name===m&&l.currentAddress[o+1]){n=l.currentAddress[o+1].name;return false}return true});return n}}else{f.routeTo=function(l){this.goToUrl(l)};this.getCardUrl=function(m,o){var p=m[0]&&m[0].param?o[0]+":"+m[0].param:o[0];if(o.length>1){for(var q=1,n=o.length;q<n;q++){p+=d+o[q];if(q!==n-1&&m[q].param){p+=":"+m[q].param}}}return p};f.getUrlParameter=function(l){var m=null;this.currentAddress.every(function(n){if(n.name===l){m=n.param;return false}return true});return m}}},setHierarchy:function(k){var l={};function m(o,n){if(o.urlPart){n[o.urlPart]={};e.extend(n[o.urlPart],o);n=n[o.urlPart];delete n.children}if(o.children){o.children.forEach(function(p){m(p,n)})}}m(k,l);this.pagesHierarchy=l;this.fullPagesHierarchy=k},getCurrentAdress:function(){return this.currentAddress},getPreviousAdress:function(){return this.previousAddress},historyChanged:function(m){var o=this,p=b(m),k=h.deferred(),l=[],n;this.previousAddress=this.currentAddress;this.currentAddress=p;this.preNavigationHandler(this.currentAddress).then(function(){n=o.pagesHierarchy;p.forEach(function(q){var r=n[q.name];if(r){if(r.urlHandler){l.push(r.urlHandler)}n=n[q.name]}});c(l,function(){var r=arguments,v=h.deferred(),t=v.promise,s,q=0;n=o.pagesHierarchy;p.forEach(function(y,x,w){if(!n[y.name]){return}n=n[y.name];if(n.urlHandler){try{s=r[q++];if(s&&e.is(s.isAccessible,"function")){t=t.then((function(C,B,D,A){return function(){return C(B,D,A)}})(s.isAccessible,y.name,y.param,w)).then((function(A){return function B(C){if(C&&C.shouldChangeCard){j.dispatch(j.events.cardNavigation,[A.parentId,A.name],true)}else{if(C!==true){throw"Handler returned wrong value !"}}}})(n))}}catch(z){}}else{t=t.then((function(A){return function(){j.dispatch(j.events.cardNavigation,[A.parentId,A.name,true])}})(n))}});t.then(function u(){o.postNavigationHandler(o.currentAddress).then(k.resolve);var w=a.getApplicationConfiguration("app.usage.disableautopagetracking");!w&&c(["DS/Usage/TrackerAPI"],function(y){try{y.trackPageView(location.pathname+location.search+location.hash,document.title)}catch(x){}})});v.resolve()})});return k.promise},setNavigateSuccessHandler:function(k){if(e.is(k,"function")){this.postNavigationHandler=k}},setPreNavigateHandler:function(k){if(e.is(k,"function")){this.preNavigationHandler=k}},goToUrl:function(k){window.location.hash=k},handleCardChange:function(q){var k=this.currentAddress,p=false,n=true,l=[],m;function o(r,v){var t,u,s=["urlHandler","parentId","name"];for(t in r){if(!r.hasOwnProperty(t)||s.indexOf(t)>=0){break}if(t==="id"&&r.id===v){return r}else{if(t!=="id"){u=o(r[t],v);if(u){l.unshift(t);return u}}}}}o(this.pagesHierarchy,q);p=l.some(function(s,r){if(!e.is(k[r])||s!==k[r].name){return true}});if(p){m=this.getCardUrl(k,l);this.routeTo(m);n=false}return n}};return f});define("DS/UWPClientCode/Data/Notification",["module","DS/UWPClientCode/Data","DS/Logger/Logger"],function(d,c,a){var b=a.getLogger(d);function e(g,f){return function(){g&&g.apply(f,arguments)}}return{get:function(f){c.request({method:"GET",url:c.prefix+"api/notification/"+f.id,success:f.success,failure:f.failure||b.error,async:f.async})},getAll:function(g){var f=(g.limit&&typeof g.limit==="number")?g.limit:7;c.request({method:"GET",url:c.prefix+"api/notification/unread",params:{limit:f},success:g.success,failure:g.failure||b.error,async:g.async})},setPublic:function(f){f=f||{};c.request({method:"POST",async:f.async,url:c.prefix+"api/share/public/"+f.id,params:{handler:f.handler,contentData:f.data},success:f.success,failure:f.failure,scope:f.scope})},createPrivate:function(f){f=f||{};c.request({method:"POST",async:f.async,url:c.prefix+"api/share/"+f.id,params:{handler:f.handler,contentData:f.data,to:f.to,message:f.message},success:f.success,failure:f.failure,scope:f.scope})},create:function(g){var h=g||{},f=h.accessType||3,i={widgetInstanceId:h.widgetInstanceId,handler:h.handler,accessType:f};if(!g){a.warn("create share notification: options object is mandatory")}if(!h.widgetInstanceId){a.warn("create share notification: widgetInstanceId is mandatory")}if(!h.handler){a.warn("create share notification: handler is mandatory")}if(h.recipientsByLogin){i.recipientsByLogin=h.recipientsByLogin}if(h.recipientsByEmail){i.recipientsByEmail=h.recipientsByEmail}if(h.message){i.message=h.message}if(h.data){i.contentData=h.data}c.request({method:"POST",async:true,url:c.prefix+"api/share",payload:i,success:h.success,failure:h.failure,scope:h.scope})},publish:function(g){var h=g||{},f;f={type:"NOTIF_UI",message:{nls:{msg:h.messageId},actions:[{type:"link",options:{event:{type:"url",options:{service:h.service,uri:h.uri,type:"GET"}}}}],icon:{type:"login",data:h.user}},service:{appID:h.appId,notificationID:h.notificationId}};if(h.data){f.message.nls.data=h.data}if(h.groupRecipients&&h.groupRecipients.length&&h.platformId){f.users_groups=h.groupRecipients;f.platformID=h.platformId}else{if(h.userRecipients&&h.userRecipients.length){f.users_target=h.userRecipients}else{a.warn("Send 3DNotification: options.userRecipients or options.groupRecipients is mandatory.");e(h.failure,h.scope);return}}c.request({method:"POST",async:true,url:c.prefix+"api/notification/external",queryParams:{"service-url":h.publisherUrl},payload:{items:[f]},success:h.success,failure:h.failure,scope:h.scope})},mail:function(f){var g=f||{};if(!f){a.warn("send notification by mail: options object is mandatory")}if(!g.notificationId){a.warn("send notification by mail: notificationId is mandatory")}c.request({method:"POST",async:g.async,url:c.prefix+"api/notification/mail",payload:{notificationId:g.notificationId},success:g.success,failure:g.failure,scope:g.scope})}}});define("DS/UWPClientCode/Data/NotificationModel",["UWA/Core","DS/UWPClientCode/Data/Notification"],function(g,c){var b,f=false,e=[],a;var d=function(h){this.notificationStore=h;this.getById=function(j){var i=this.notificationStore.detect(function(k){return j===""+k.id});return(i)?g.clone(i):null};this.getPublic=function(i){c.get({id:i.id,success:i.success})};this.getUnRead=function(){if(this.notificationStore){return g.clone(this.notificationStore)}}};b={fetch:function(h){h=h?h:{};if(!f||h.force){e.push(h);if(e.length===1){f=false;c.getAll({success:function(j){var m=0,k=e.length,n;a=new d(j);for(;m<k;m++){n=e[m];if(n.success&&typeof n.success==="function"){n.success.call(n.scope,a)}}f=true;e=[]},failure:function(){var k=0,j=e.length,m;for(;k<j;k++){m=e[k];if(m.failure&&typeof m.failure==="function"){m.failure.call(m.scope)}}e=[]},async:h.async})}}else{if(h.success&&typeof h.success==="function"){if(typeof h.async!=="undefined"&&!h.async){h.success.call(h.scope,a)}else{setTimeout(function(){h.success.call(h.scope,a)},0)}}}},isFetched:function(){return f}};return b});define("DS/UWPClientCode/Bootstrap",["UWA/Core","UWA/Event","UWA/Utils","UWA/Element","UWA/Promise","DS/UWPClientCode/Data/Widgets","DS/UWPClientCode/Navigation","DS/PubSub/PubSub","DS/UWPClientCode/PublicAPI","DS/WebappsUtils/Performance","DS/UWPClientControls/Utils","ds/Csrf","ds/TranslateUWA","ds/Ajax","DS/UWPClientCode/UWA/Element","DS/MessageBus/MessageBus"],function(h,u,c,q,e,g,m,b,n,d,p){var t,j,a,f=function(){},k="wp_login_location";function i(){var v=e.deferred();u.onDomReady(function(){d.mark("wp_bootstrap_ondomready");document.documentElement.className+=" "+(p.hasTouch()?"touch":"no-touch");v.resolve()});return v.promise}function r(){require(["DS/Logger/Logger","DS/Logger/Appenders/Quake"],function(w,v){w.addAppender("Quake",v)},f)}function l(){var w,v=(a==="PATH")?function(){var x=location.protocol+"//"+location.host+location.pathname;x=x.substring(dsBaseUrl.length);return m.historyChanged(x)}:function(z){var y,x;y=window.location.hash;x=c.parseUrl(z.newURL);if(x&&x.anchor){y=x.anchor}return m.historyChanged(y)};if(j){if(h.is(j.onNavigateSuccess,"function")){m.setNavigateSuccessHandler(j.onNavigateSuccess)}if(h.is(j.preNavigate,"function")){m.setPreNavigateHandler(j.preNavigate)}if(h.is(j.beforeNavigationStarts,"function")){j.beforeNavigationStarts()}}m.setMode(a);if(a==="PATH"){if(window.location.hash){w=window.location.pathname;window.location.replace(window.location.origin+(w.endsWith("/")?w:w+"/")+window.location.hash.replace(/#/g,"").replace(/:/g,"/")+window.location.search)}q.addEvent.call(window,"popstate",v)}else{q.addEvent.call(window,"hashchange",v)}return v({newURL:window.location.href})}function s(w){var v={};function x(A,y){var B=function(D){var C={};y.children.push(C);x(D,C)};for(var z in A){if(["id","name","parentId","urlHandler","urlPart"].indexOf(z)>-1){y[z]=A[z]}else{if(z==="children"){y.children=[];A.children.forEach(B)}}}}x(w,v);return v}function o(z){var w=sessionStorage.getItem(k),x,v=window.location,y=v.hash.indexOf("#app")===0&&v.search.indexOf("addinmode")>=0;sessionStorage.removeItem(k);if(z==="HASH"&&w&&!y){if(w!==v.toString()){x=document.createElement("a");x.href=w;if(x.hash){window.location.hash=x.hash}}}}t={start:function(x,B){o(B);var A=h.is(x.start,"function")?x.start:f;a=B;if(n.getApplicationConfiguration("app.usage.enable")==="true"){var z=n.getApplicationConfiguration("app.usage.pathapi")||"/upload",v=n.getApplicationConfiguration("app.usage.service")||n.getApplicationConfiguration("app.build.name"),w=n.getUser();v&&require(["DS/Usage/UsageManager","DS/Usage/TrackerAPI"],function(C,D){C.init({uploadPath:z,service:v,user:w});D.init()})}j=x;h.extend(h.paths,{css:"/lib/UWA/assets/css/",img:"/lib/UWA/assets/img/"});b.add(b.events.cardNavigation,function(D,C){if(h.is(D)&&h.is(C)){b.dispatch(b.events.cardNavigation+D,C,true)}},null,true);d.mark("wp_bootstrap_gethierarchy");var y=wap.widgetInstancesCacheId;g.getWidgetInstancePublicTree({success:function(C){var D;d.mark("wp_bootstrap_gothierarchy");D=s(C);m.setHierarchy(D);e.resolve().then(i).then(r).then(l).then(A)},cacheId:y})},getStartPageMode:function(){var y=[],w,x=window.location.href,A=c.getQueryString(x,"aloneWIId"),z=c.getQueryString(x,"aloneWId"),v=c.getQueryString(x,"rootId");if(A){y.push("instance",A)}else{if(z){w={id:z,data:c.getQueryString(x,"aloneWData"),name:c.getQueryString(x,"aloneWName")};y.push("widget",w)}else{if(v){y.push("root",v)}else{y.push("default","0")}}}return y}};return t});define("DS/UWPClientCode/Boot/Bootstrap",["UWA/Core","UWA/Promise","DS/UWPClientCode/WidgetFactory","DS/UWPClientCode/Bootstrap"],function(e,d,a,c){var b={start:function(){var g=d.deferred(),h=c.getStartPageMode(),f={};f.id=h[1];f.el=e.createElement("div",{"class":"module"}).inject(document.body);a.load(f);g.resolve();return g.promise}};return b});define("DS/UWPClientCode/UWA/Embedded",["UWA/Core","UWA/Embedded","UWA/Utils","DS/UWPClientCode/Navigation"],function(f,c,e,d){function b(g){return typeof g==="boolean"?(g===false?"0":"1"):e.encodeUrl(g)}var a={getIframeUrl:function(){var i,h,k=this,j=[],g=k.options,l=k.data,n=d.navigationMode.toLowerCase()==="path",m={id:k.id,uwaUrl:k.url,appId:g.appId,token:g.token,header:g.displayHeader,footer:g.displayFooter,displayEdit:g.displayEdit,autoLaunch:g.autoLaunch,widgetDomain:!n?window.location.toString().replace(/#.*$/,""):d.baseUrl,lang:g.lang,cache:g.cache,debug_me:g.debugMe};for(i in l){if(l.hasOwnProperty(i)&&!m.hasOwnProperty(i)){m[i]=l[i]}}for(i in m){if(m.hasOwnProperty(i)&&m[i]!==null){j.push(i+"="+b(m[i]))}}h=k.getIframeDomain()+"?"+j.join("&");if(n&&!e.isAbsoluteUrl(h)){h=d.baseUrl+h}if(h.length>2048){throw new Error("UWA.Embedded iframe url is more than 2048 characters please implement UWA.Embedded using offlineMode=true.")}return h},destroy:function(g){this.socket&&this.socket.disconnect();if(f.Embedded.Instances[g]){Object.keys(f.Embedded.Instances[g].elements).forEach(function(h){f.Embedded.Instances[g].elements[h].destroy&&f.Embedded.Instances[g].elements[h].destroy();f.Embedded.Instances[g].elements[h]=null;delete f.Embedded.Instances[g].elements[h]},this);f.Embedded.Instances[g]=null;delete f.Embedded.Instances[g]}}};c.prototype.getIframeUrl=a.getIframeUrl;c.prototype.destroy=a.destroy;c.prototype.onViewRequest=function(){};return a});define("DS/UWPClientCode/Boot/Environment",["UWA/Core","UWA/Environment","UWA/Storage","DS/UWPClientCode/Data/Widgets","DS/UWPClientControls/Utils","DS/UWPClientCode/I18n","DS/UWPClientCode/UWA/Embedded"],function(g,c,d,b,f,e){var a=c.extend({name:"boot",init:function(h){this.wp=g.merge({isVisible:true},h);this.html={};this.Features={};this.view={};this.options={defaultView:{type:"windowed"}};this.html.module=h.el;this.buildSkeleton();this.dispatchInit()},loadWidget:function(j,i){var h={onFailure:function(k){throw k},onTimeout:function(k){throw k},onComplete:function(){}};i=g.extend(h,i);if(this.wp.isolationLevel){this.loadEmbeddedWidget(this.wp.widgetId||j,i);this.dispatchEvent("onRegisterWidget")}else{this.loadInlinedWidget(this.wp.widgetId||j,i)}return this},loadInlinedWidget:function(i,h){var k=this.getWidget(),j=h.fetcher;k.id=this.wp.id;j.title=this.wp.title;k.setStyle(j.style);delete h.fetcher.style;return this._parent(i,h)},loadEmbeddedWidget:function(j,i){var k=this.getWidget(),h;k.id=this.wp.id;i.cache=this.wp.checksum;h={id:this.wp.id,appId:this.wp.appId,token:this.wp.token,lang:e.getCurrentLanguage(),displayEdit:false,height:"100%",exposition:this.wp.isolationLevel===2?g.hosts.untrustedExposition:g.hosts.exposition,debugMe:g.debug?1:null};i.embedded=g.extend(i.embedded||{},h);this._parent(j,i);return this},buildSkeleton:function(){var i=this.wp,j=g.createElement,h=this.html;if(!h.module.hasClassName("module")){h.module=j("div",{"class":"module"}).inject(h.module)}h.module.addClassName("wi-"+this.wp.id);h.wrapper=j("div",{"class":"moduleWrapper"}).inject(h.module);if(!i.isContainer){h.body=j("div",{"class":"moduleContent w-"+i.widgetId}).inject(h.wrapper)}else{h.body=h.wrapper;h.module.addClassName("moduleLayout")}},setVisible:function(k,j){var h=this.wp,i=this.getWidget();if(h.isVisible!==k||j){h.isVisible=!!k;i.dispatchEvent(k?"onShow":"onHide")}},onRegisterWidget:function(){if(this.registered){return}this.data=new d({adapter:"Object",database:"preference-"+this.wp.id})},onUpdateValue:function(){var h=this.widget;if(h.launched&&!h.isEdit){this.save()}},save:function(){var h=this;if(!this._save){this._save=f.debounce(function(){if(h.destroyed){return}b.editWidgetInstance({id:h.wp.id,data:h.getAllData()})},300)}this._save()}});return a});