define("DS/GEOHideShowFilterCmd/GEOHideShowFilterCmd",["DS/ApplicationFrame/Command","DS/WebInfraUI/ContextualBarManager","UWA/Core"],function(d,b,c){var a=d.extend({_frmWindow:null,_exp:null,_viewer:null,_geomBtn:null,_surfaceState:true,_lineState:true,_pointState:true,init:function(e){var f=this;f._parent(e,{isAsynchronous:true,mode:"exclusive"});f._frmWindow=f.getFrameWindow();f._viewer=f._frmWindow.getViewer();f._exp=f._frmWindow.experience;f._surfaceState=true;f._lineState=true;f._pointState=true;f._state=true;f._glType=-1;f._exp.subscribe("ASSET/LOADINGFINISHED",f._onModelLoaded.bind(f))},_onModelLoaded:function(){var e=this;e._surfaceState=true;e._lineState=true;e._pointState=true;e._frmWindow=e.getFrameWindow();e._viewer=e._frmWindow.getViewer();e._exp=e._frmWindow.experience},_hideShow:function(){var n=this;var e=n._frmWindow.experience.getRootBag();if(e!==null){var g=e.getChildren();if(g.length===1){var s=g[0];if(n._glType!==0){for(var m=0;m<s.getChildren().length;m++){var f=s.children[m];if(!c.is(f.mesh3js)){for(var l=0;l<f.getChildren().length;l++){var o=f.children[l];if(c.is(o.mesh3js)){for(var h=0;h<o.getChildren().length;h++){var q=o.children[h];if(q.mesh3js.sceneGraph.children[0].primitives[0].group.glType===n._glType){if(n._state){q.setVisibility(true)}else{q.setVisibility(false)}n._viewer.render()}}}}}else{if(f.mesh3js.sceneGraph.children[0].primitives[0].group.glType===n._glType){if(n._state){f.setVisibility(true)}else{f.setVisibility(false)}n._viewer.render()}}}}else{if(n._glType===0){var p=s.children;for(var m=0;m<p.length;m++){var r=p[m];for(var l=0;l<r.getChildren().length;l++){var f=r.children[l];if(f.mesh3js.sceneGraph.children[0].primitives[0].group.glType===n._glType){if(n._state){f.setVisibility(true)}else{f.setVisibility(false)}n._viewer.render()}}}}}}}},beginExecute:function(){var f=this;f.contextualMenu=new b({frameWindow:f._frmWindow});var e={type:f.contextualMenu.Button.Check,id:"HideShowSurface",rsc:"GEOHideShowFilterCmd/GEOHideShowFilterWkb",nls:"GEOHideShowFilterCmd/GEOHideShowFilterWkb",selected:f._surfaceState,onclickCB:function(){f._surfaceState=!f._surfaceState;f._state=f._surfaceState;f._glType=4;f._hideShow()}};var h={type:f.contextualMenu.Button.Check,id:"HideShowLine",rsc:"GEOHideShowFilterCmd/GEOHideShowFilterWkb",nls:"GEOHideShowFilterCmd/GEOHideShowFilterWkb",selected:f._lineState,onclickCB:function(){f._lineState=!f._lineState;f._state=f._lineState;f._glType=1;f._hideShow()}};var g={type:f.contextualMenu.Button.Check,id:"HideShowPoint",rsc:"GEOHideShowFilterCmd/GEOHideShowFilterWkb",nls:"GEOHideShowFilterCmd/GEOHideShowFilterWkb",selected:f._pointState,onclickCB:function(){f._pointState=!f._pointState;f._state=f._pointState;f._glType=0;f._hideShow()}};f.surfaceBtnToken=f.contextualMenu.addButtons([e],{barType:f.contextualMenu.Toolbar.New,});f.lineBtnToken=f.contextualMenu.addButtons([h],{barType:f.contextualMenu.Toolbar.Append,});f.pointBtnToken=f.contextualMenu.addButtons([g],{barType:f.contextualMenu.Toolbar.Append,});f._viewer.render()},endExecute:function(){var e=this;e.contextualMenu.removeButtons(e.surfaceBtnToken);e.contextualMenu.removeButtons(e.lineBtnToken);e.contextualMenu.removeButtons(e.pointBtnToken);e.contextualMenu.dispose();e.contextualMenu=undefined},});return a});