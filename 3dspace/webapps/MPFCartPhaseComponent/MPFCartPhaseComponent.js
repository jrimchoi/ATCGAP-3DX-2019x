define("DS/MPFCartPhaseComponent/CartPhaseTotalFooter",["UWA/Core","UWA/Class/View","DS/MPFView/EmptyView","DS/MPFCartModel/CartModelHelper","DS/MPFCartPhaseModel/CartPhaseModel","i18n!DS/MPFCartPhaseComponent/assets/nls/CartPhaseComponent"],function(g,f,b,a,d,c){var e;e=f.extend({className:"mpf-cart-phase-total-footer",setup:function(h){this.cart=h.cart;this.cartPhases=h.cartPhases;this.label=this._createLabel();this.message=this._createMessage();this.total=this._createTotal();this.setTotalPrice(this.cart.getNetAmountTotal());this.listenTo(this.cartPhases,"onChange:"+d.Fields.PRICE,this.onPriceUpdate.bind(this))},render:function(){this.container.setContent([this.label,this.message,this.total]);return this},onPriceUpdate:function(){var h;h=this.cartPhases.reduce(function(k,i){var j;j=parseFloat(i.getPrice());return isNaN(j)?k:k+j},0);this.setTotalPrice(h)},destroy:function(){this.stopListening(this.cartPhases);this._parent()},setTotalPrice:function(i){var h;if(g.is(i,"number")){h=a.formatPrice(this.cart,i);this.total.setText(h)}},_createLabel:function(){return g.createElement("div",{"class":"mpf-label",text:c.get("total")})},_createMessage:function(){return g.createElement("div",{"class":"mpf-message",text:c.get("paymentAreDueAtBeginningOfPhase")})},_createTotal:function(){return g.createElement("div",{"class":"mpf-total",text:"-"})}});return e});define("DS/MPFCartPhaseComponent/CartPhaseItemSummary",["UWA/Core","UWA/Class/View","DS/MPFCartModel/CartModelHelper","i18n!DS/MPFCartPhaseComponent/assets/nls/CartPhaseComponent","css!DS/MPFCartPhaseComponent/MPFCartPhaseComponent"],function(e,d,a,b){var c;c=d.extend({className:"mpf-cart-phase-item-summary",setup:function(f){this.cart=f.cart;this.cartPhase=f.cartPhase;this.line1=this._createLine1();this.line2=this._createLine2()},render:function(){this.container.setContent([this.line1,this.line2]);return this},destroy:function(){this._parent()},_createLine1:function(){return e.createElement("div",{"class":"mpf-line-1",html:[this._createPhaseLabel(),this._createDescription(),this._createPrice()]})},_createPhaseLabel:function(){return e.createElement("div",{"class":"mpf-label",text:b.get("phaseNumber",{number:this.cartPhase.getNumber()})})},_createDescription:function(){return e.createElement("div",{"class":"mpf-description",text:this.cartPhase.getDescription()})},_createPrice:function(){var f;f=a.formatPrice(this.cart,this.cartPhase.getPrice());return e.createElement("div",{"class":"mpf-price",text:f})},_createLine2:function(){return e.createElement("div",{"class":"mpf-line-2 mpf-arrows",html:[this._createTimelineLabel(),this._createStartDate(),this._createDeliveryDate()]})},_createTimelineLabel:function(){return e.createElement("div",{"class":"mpf-label",text:b.get("timeline")})},_createStartDate:function(){return e.createElement("div",{"class":"mpf-arrow mpf-arrow-start",text:b.get("startDate",{date:this.cartPhase.getStartDate()})})},_createDeliveryDate:function(){return e.createElement("div",{"class":"mpf-arrow mpf-arrow-delivery",text:b.get("deliveryDate",{date:this.cartPhase.getEndDate()})})}});return c});define("DS/MPFCartPhaseComponent/CartPhaseItemCreator",["UWA/Core","UWA/Class/View","DS/MPFView/FieldTextInputV2","DS/MPFView/FieldDateInput","DS/MPFCartPhaseModel/CartPhaseModel","DS/MPFCartModel/CartModelHelper","i18n!DS/MPFCartPhaseComponent/assets/nls/CartPhaseComponent"],function(h,g,f,c,e,b,d){var a;a=g.extend({className:"mpf-cart-phase-item",setup:function(i){this.cart=i.cart;this.cartPhase=i.cartPhase;this.line1=this._createLine1();this.line2=this._createLine2()},render:function(){this.container.setContent([this.line1,this.line2]);return this},destroy:function(){this._parent()},_createLine1:function(){return h.createElement("div",{"class":"mpf-line-1",html:[this._createLabel(),this._createDescription(),this._createPrice(),this._createCurrency()]})},_createLabel:function(){return h.createElement("div",{"class":"mpf-label",text:d.get("phaseNumber",{number:this.cartPhase.getNumber()})})},_createDescription:function(){return new f({className:"mpf-description mpf-entry-v2",model:this.cartPhase,fieldName:e.Fields.DESCRIPTION,fieldLabel:d.get("description"),dynamicValidation:true}).render()},_createPrice:function(){return new f({className:"mpf-price mpf-entry-v2",model:this.cartPhase,fieldName:e.Fields.PRICE,fieldLabel:d.get("price"),dynamicValidation:true,silent:false}).render()},_createCurrency:function(){return h.createElement("div",{"class":"mpf-currency",text:b.getCurrencySymbol(this.cart)})},_createLine2:function(){return h.createElement("div",{"class":"mpf-line-2",html:[this._createArrows(),this._createTimeline()]})},_createArrows:function(){var j;var i;j=h.createElement("div",{"class":"mpf-arrow mpf-arrow-start",text:d.get("start")});i=h.createElement("div",{"class":"mpf-arrow mpf-arrow-delivery",text:d.get("delivery")});return h.createElement("div",{"class":"mpf-arrows",html:[j,i]})},_createTimeline:function(){var i;var k;var j;i=h.createElement("div",{"class":"mpf-label",text:d.get("timeline")});k=new c({model:this.cartPhase,fieldName:e.Fields.START_DATE});j=new c({model:this.cartPhase,fieldName:e.Fields.END_DATE});return h.createElement("div",{"class":"mpf-timeline",html:[i,k.render(),j.render()]})}});return a});define("DS/MPFCartPhaseComponent/CartPhaseItemSummaryList",["UWA/Class/View","DS/MPFCartPhaseComponent/CartPhaseItemSummary"],function(c,b){var a;a=c.extend({className:"mpf-phase-item-summary-list",setup:function(d){this.cart=d.cart;this.cartPhases=d.cartPhases},render:function(){var d;d=this.cartPhases.map(function(e){return(new b({cart:this.cart,cartPhase:e})).render()},this);this.container.setContent(d);return this},destroy:function(){this._parent()}});return a});define("DS/MPFCartPhaseComponent/CartPhaseSummary",["UWA/Core","UWA/Class/View","DS/MPFCartPhaseComponent/CartPhaseItemSummaryList","DS/MPFCartPhaseComponent/CartPhaseTotalFooter","i18n!DS/MPFCartPhaseComponent/assets/nls/CartPhaseComponent","css!DS/MPFCartPhaseComponent/MPFCartPhaseComponent"],function(f,e,c,d,b){var a;a=e.extend({className:"mpf-cart-phase-summary",setup:function(g){this.cart=g.cart;this.cartPhases=g.cartPhases;this.editCommand=this._createEditCommand();this.header=this._createHeader();this.summaryList=this._createSummaryList();this.footer=this._createFooter()},render:function(){this.container.setContent([this.header,this.summaryList.render(),this.footer.render()]);return this},onEdit:function(){},destroy:function(){this._parent()},_createEditCommand:function(){return f.createElement("a",{"class":"mpf-link-button",text:b.get("edit"),events:{click:this.onEdit.bind(this)}})},_createHeader:function(){var g;g=f.createElement("h3",{"class":"mpf-title",text:b.get("scheduleAndPrices")});return f.createElement("header",{"class":"mpf-header",html:[g,this.editCommand]})},_createSummaryList:function(){return new c({cart:this.cart,cartPhases:this.cartPhases})},_createFooter:function(){return new d({cart:this.cart,cartPhases:this.cartPhases})}});return a});define("DS/MPFCartPhaseComponent/CartPhaseItemCreatorList",["UWA/Class/View","DS/MPFCartModel/CartModel","DS/MPFCartPhaseModel/CartPhaseCollection","DS/MPFModelFactory/CartPhaseFactory","DS/MPFCartPhaseComponent/CartPhaseItemCreator","DS/MPFServices/ObjectService","i18n!DS/MPFCartPhaseComponent/assets/nls/CartPhaseComponent"],function(h,e,f,c,a,b,d){var g;g=h.extend({className:"mpf-cart-phase-list",setup:function(i){i||(i={});b.requiredOfPrototype(i.cart,e,"option.cart must be a CartModel");b.requiredOfPrototype(i.cartPhases,f,"options.cartPhases must be a CartPhaseCollection");b.requiredOfPrototype(i.cartPhaseFactory,c,"option.cartPhaseFactory must be a CartPhaseFactory");this.cart=i.cart;this.cartPhases=i.cartPhases;this.cartPhaseFactory=i.cartPhaseFactory},render:function(){var i;i=this.cartPhases.map(function(j){return new a({cart:this.cart,cartPhase:j}).render()},this);this.container.setContent(i);return this},addPhase:function(){var i;i=this.cartPhaseFactory.createModel(c.Types.CART_CART_PHASE);i.setParentResourceId(this.cart.id);i.setNumber(this.cartPhases.size()+1);this.cartPhases.add(i);this.render()},destroy:function(){this.cart=null;this._parent()}});return g});define("DS/MPFCartPhaseComponent/CartPhaseCreator",["UWA/Core","UWA/Promise","UWA/Class/View","DS/MPFCartModel/CartModel","DS/MPFCartPhaseModel/CartPhaseCollection","DS/MPFModelFactory/CartPhaseFactory","DS/MPFServices/ObjectService","DS/MPFCartPhaseComponent/CartPhaseItemCreatorList","DS/MPFCartPhaseComponent/CartPhaseTotalFooter","i18n!DS/MPFCartPhaseComponent/assets/nls/CartPhaseComponent","css!DS/MPFCartPhaseComponent/MPFCartPhaseComponent"],function(e,f,a,c,k,h,g,i,j,b){var d;d=a.extend({className:"mpf-cart-phase-creator",setup:function(l){l||(l={});g.requiredOfPrototype(l.cart,c,"option.cart must be a CartModel");g.requiredOfPrototype(l.cartPhases,k,"options.cartPhases must be a CartPhaseCollection");g.requiredOfPrototype(l.cartPhaseFactory,h,"option.cartPhaseFactory must be a CartPhaseFactory");this.cart=l.cart;this.cartPhases=l.cartPhases;this.cartPhaseFactory=l.cartPhaseFactory;this.addPhaseCommand=this._createAddPhaseCommand();this.header=this._createHeader();this.cartPhaseItemList=this._createCartPhaseItemList();this.totalFooter=this._createTotalFooter()},render:function(){this.container.setContent([this.header,this.cartPhaseItemList.render(),this.totalFooter.render()]);return this},onAddPhase:function(){this.cartPhaseItemList.addPhase()},save:function(){var l;l=this.cartPhases.map(function(m){return m.savePromise(m.getPendingChanges(),{patch:true})});return f.all(l)},destroy:function(){this.cart=null;this._parent()},_createAddPhaseCommand:function(){return e.createElement("a",{"class":"mpf-link-button",text:"+ "+b.get("addPhase"),events:{click:this.onAddPhase.bind(this)}})},_createHeader:function(){var l;l=e.createElement("h3",{"class":"mpf-title",text:b.get("scheduleAndPrices")});return e.createElement("header",{"class":"mpf-header",html:[l,this.addPhaseCommand]})},_createCartPhaseItemList:function(){return new i({cart:this.cart,cartPhases:this.cartPhases,cartPhaseFactory:this.cartPhaseFactory})},_createTotalFooter:function(){return new j({cart:this.cart,cartPhases:this.cartPhases})}});return d});