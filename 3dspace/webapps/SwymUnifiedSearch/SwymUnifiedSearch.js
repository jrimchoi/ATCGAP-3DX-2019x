define("DS/SwymUnifiedSearch/script/customization/actions/abstract-action",["UWA/Core","UWA/Class/Events"],function(c,a){var b=a.extend({name:"",availableForTypes:function(){},getActionForObject:function(d){},executeAction:function(d){}});return b});define("DS/SwymUnifiedSearch/script/customization/facets/edit-properties-facets/swym-community-members-facet",["UWA/Core","DS/EditPropWidget/facets/Common/FacetsBase","DS/SwymUICore/script/feature/core/user/collection/user-collection","DS/SwymUIComponents/script/feature/community/members/view/small-members-list-view","DS/UIKIT/Spinner","i18n!DS/SwymUnifiedSearch/assets/nls/properties-facet-factory","css!DS/SwymUnifiedSearch/SwymUnifiedSearch"],function(g,d,c,a,b,e){var f=d.extend({_innerView:null,init:function(){this._parent.apply(this,arguments);var i=arguments[0],j=this;if(!this.elements.container){this.elements.container=g.createElement("div",{"class":"member-list-wrapper",styles:{height:"100%","padding-top":"5px"},html:[g.createElement("div",{styles:{margin:"auto","text-align":"center",height:"40px"},html:new b({className:"msg-animation",visible:true,animate:true,spin:true})})]});var h=new c([],{mode:"listmembers",order_by_last_member:true,limit:5,displayTotalCount:false,communityId:i.communityId});h.resetCollection(1,{serviceName:"filter",data:{with_synthesis:false}});h.addEvent("onSync",function(){j.membersView.render({target:j.elements.container,emptyTarget:true})});h.addEvent("onError",function(){j.elements.container.setText(e.NotAvailable)});this.membersView=new a({collection:h})}},updateFacet:function(){},isActionAvailable:function(h){return false},onAction:function(h){},destroyComponent:function(){if(this._innerView){this._innerView.destroy();this._innerView=null}if(g.is(this.destroy,"function")){this.destroy()}}});return f});define("DS/SwymUnifiedSearch/script/bootstrap",function(){var b=null,a={start:function(){if(typeof(window.ds)==="undefined"){window.ds={}}},reformatEnvironmentList:function(f){var e,c={};for(var d in f){if(f.hasOwnProperty(d)&&Array.isArray(f[d])){e=f[d];e.forEach(function(g){c[g.id]=c[g.id]||{sources:{}};c[g.id].sources[d]={displayName:g.displayName,url:g.url}})}}return c},getUserStartupParams:function(d,c){if(b){if(d){d.call(this,b)}}else{require(["DS/SwymUICore/script/feature/core/config/bootstrap-model"],function(e){e.getInstance().getStartupTenantsInfo(function(f){if(f){b=a.reformatEnvironmentList(f)}if(d){d.call(this,b)}},function(){if(c){c.apply(this,arguments)}})})}},getTenantUrlFromTenantId:function(c,e,d){a.getUserStartupParams(function(g){if(e){var f=g&&g[c];e.call(a,(f&&f.sources.swym&&f.sources.swym.url)||"")}},d)}};return a});define("DS/SwymUnifiedSearch/script/customization/views/community-secondary-view",["DS/SwymUICore/script/lib/view/generic/swym-model-view","i18n!DS/SwymUnifiedSearch/assets/nls/community-secondary-view"],function(c,b){var a=c.extend({name:"community-secondary-view",_createContent:function(){var e=this.model,d=[{"class":"community-data",html:b.get("creationDate")+" "+e.get("ds6w:created").split(" ")[0]},{"class":"community-data",html:b.get("visibility")+" "+e.getVisibility()},{"class":"community-data",html:b.get("role")+": "+e.getTranslatedRole()}];return d}});return a});define("DS/SwymUnifiedSearch/script/customization",["UWA/Core","UWA/Class"],function(b,a){return a.singleton({getActions:function(d){var c;if(b.is(d)&&b.is(d.models,"array")){c={actions:[],status:""};if(d.models.length===1){require(["DS/SwymUnifiedSearch/script/utils","i18n!DS/SwymUIComponents/assets/nls/feature/community/generic/skeleton-utils/content-idcard-options"],function(h,e){var g,f,i=d.data.applicativeInfo.clientAppInfo.identifier;c.status="success";if((i==="3DDashboard")||(i==="3DSpace")){f=d.models[0];g=f.get("ds6w:type_value");if(h.ALL_SWYM_TYPES.indexOf(g)>=0){c.actions.push({id:f.get("id"),actions:[{title:(h.isUserType(f.get("ds6w:what/ds6w:type_value"))?e.OpenUserProfile:e.OpenInA3DSwymApp),icon:"level-down",id:"DS/SwymUnifiedSearch/script/customization/actions/open-in-3dswym-context-action",multisel:false,sourcejs:"DS/SwymUnifiedSearch/script/customization"}]})}}d.onComplete.call(undefined,c)})}else{c.status="failure";d.onComplete.call(undefined,c)}}},getFacets:function(d){var c=this;require(["DS/SwymUnifiedSearch/script/utils","i18n!DS/SwymUnifiedSearch/assets/nls/properties-facet-factory"],function(e,g){if(e.isBetaEnabled()){var f=[{text:g.Properties,name:d.constants.FACET_PROPERTIES,icon:"doc-log",expandedFlag:true}];d.setFacets.call(undefined,[d.constants.FACET_PROPERTIES],f);e.fetchSearchResultData(d.model,{onComplete:function(h){c._addCtyMembersFacet(h,d)},onFailure:function(h){h.set("access",0);c._addCtyMembersFacet(h,d)}})}else{d.setFacets.call(undefined,[d.constants.FACET_PROPERTIES,d.constants.FACET_SWYM_CONTENT,d.constants.FACET_SWYM_SURVEY_PROPERTIES||"swym_survey_properties",d.constants.FACET_SWYM_USER_PROPERTIES,d.constants.FACET_SWYM_COMMUNITY_PROPERTIES,d.constants.FACET_SWYMCOMMENTS])}})},_addCtyMembersFacet:function(c,d){require(["DS/SwymUICore/script/feature/community/community/model/community-model","i18n!DS/SwymUnifiedSearch/assets/nls/properties-facet-factory"],function(g,f){if(c instanceof g){var h={name:d.constants.FACET_SWYM_COMMUNITY_MEMBERS,text:f.Members,icon:"users",expandedFlag:true};var e={require:"DS/SwymUnifiedSearch/script/customization/facets/edit-properties-facets/swym-community-members-facet",options:{communityId:c.get("mid")},facet:h,alwaysVisible:true,visible:true,alwaysCalled:false};d.addFacets([e])}})},executeAction:function(c){require(["DS/SwymUnifiedSearch/script/customization/actions/open-in-3dswym-context-action"],function(d){var e=new d();e.executeAction(c.actionsHelper.getModel({id:c.object_ids[0]}),c)})},getRenderPreview:function(c){console.log("getRenderPreview:",c);require(["DS/SwymUnifiedSearch/script/swym-preview"],function(d){c.onComplete.call(undefined,new d())})},getDoubleClickAction:function(c){console.log("getDoubleClickAction");if(c.onComplete){c.onComplete.call(undefined,{id:"uselessId",sourceJS:"DS/SwymUnifiedSearch/script/customization"})}}})});define("DS/SwymUnifiedSearch/script/customization/views/conversation-primary-view",["DS/SwymUICore/script/lib/view/generic/swym-model-view"],function(b){var a=b.extend({name:"conversation-primary-view",_createContent:function(){var c=[{"class":"conversation-icon fonticon fonticon-chat"}];return c}});return a});define("DS/SwymUnifiedSearch/script/utils",["UWA/Core","UWA/Class/Model","DS/SwymUnifiedSearch/script/bootstrap","DS/SwymUICore/script/utils/utils","DS/SNInfraUX/SearchUtils","DS/SwymUICore/script/feature/core/config/bootstrap-model"],function(j,p,h,k,g,i){var o="pno:Person",m="swym:Community",d="swym:Survey",a=["swym:Post","swym:Question","swym:WikitreePage","swym:Idea","swym:Picture","swym:AnimatedPicture","swym:Document","swym:Sound","swym:Video","swym:3dModel","swym:Drawing"],f=["swym:Picture","swym:AnimatedPicture","swym:Document","swym:Sound","swym:Video","swym:3dModel","swym:Drawing"],b=a.concat([d]),l=[o,m].concat(b),n=null,c=false;var e={SWYM_USER_TYPE:o,SWYM_COMMUNITY_TYPE:m,SWYM_SURVEY_TYPE:d,SWYM_CONTENT_TYPES_EXCEPT_SURVEY:a,ALL_SWYM_TYPES:l,getTenantUrlFromTenantId:h.getTenantUrlFromTenantId,isCommunityContentTypeButNotSurvey:function(q){return(a.indexOf(q)>=0)},isCommunityType:function(q){return(m===q)},isSurveyType:function(q){return(d===q)},isUserType:function(q){return(o===q)},isMediaType:function(q){return(f.indexOf(q)>=0)},getSwymModelFromSearchData:function(w,r){var t=this,v=r.onComplete,s=r.onFailure,q=j.clone(w,false),u=k.extractDataFromSubject6wURI(q.resourceid||q.objectId||q.subject6wuri);if(w["ds6w:type_value"]==="swym:DirectMessage"){u.modelName="dm";u.exaleadType="Conversation"}q._tenantId=u.tenantId;require(["DS/SwymUICore/script/lib/model/generic/swym-model","DS/SwymUICore/script/utils/utils"],function(x,y){require([x.getModuleNameFromModelName(u.modelName,u.modelAMDModuleRoot)],function(A){var z;j.extend(q,u.extraAttrs);if(window.ds&&window.ds.env==="3DSwym"){v.call(t,new A(q));return this}else{if(w.preview_url){z=w.preview_url.split("/api/")[0];if(z){v.call(t,new A(q,{autoPopulate:false,urlRoot:z}));return this}}}s.call(t)})})},getSwymModelFromSearchModel:function(r,q){return this.getSwymModelFromSearchData(r.toJSON(),q)},fetchSwymModel:function(q,r){require(["DS/SwymUICore/script/utils/utils","DS/SwymUICore/script/feature/core/config/bootstrap-model"],function(t,u){var s=u.getInstance();if(!s.getCSRFToken(q.get("_tenantId"))){s.addEventOnce("onSync",function(){q.fetch(r)},this);s.initialize()}else{q.fetch(r)}})},fetchSearchResultData:function(q,s){var r=null;if(window.ds===undefined||(window.ds&&window.ds.env===undefined)){if(!c){r=q.get("preview_url").split("/api/")[0];k.initBaseUrl(r);c=true}}e[q instanceof p?"getSwymModelFromSearchModel":"getSwymModelFromSearchData"](q,{onComplete:function(t){e.fetchSwymModel(t,s)}})},isBetaEnabled:function(){if(n===null){n=g.isInTheSimpleSearch({tenant:i.getInstance().get("config").tenant.online_instance_id})!==false}console.log("_isBetaEnabled:",n);return n},setBetaMode:function(q){n=q}};return e});define("DS/SwymUnifiedSearch/script/properties-facet-factory",["UWA/Class","DS/SwymUICore/script/feature/community/community/model/community-model","DS/SwymUICore/script/feature/core/direct-message/model/direct-message-model","i18n!DS/SwymUnifiedSearch/assets/nls/properties-facet-factory","DS/SwymUnifiedSearch/script/utils","DS/SwymUICore/script/utils/utils","DS/SwymUICore/script/feature/core/user/model/user-model","DS/SwymUICore/script/lib/model/generic/swym-model"],function(l,e,m,d,f,h,b,o){var j=null,a=null;var n=function(q){var p=q.hasOwnProperty("getAssociated")?q.getAssociated("owner"):null,u=p&&p.get("nickname")?p.get("nickname"):q.get("ds6w:responsible"),t=q.get("crdate"),r=t?t.split(" ")[0]:q.get("ds6w:created_value").split("T")[0],v=q.get("title")?q.get("title"):q.get("ds6w:label"),s=[{id:"1",title:d.Type,value:d.Community},{id:"2",title:d.Title,value:v},{id:"3",title:d.CreationDate,value:r},{id:"4",title:d.MainOwner,value:u},{id:"5",title:d.Visibility,value:q.getVisibility()},{id:"6",title:d.MyRole,value:q.getTranslatedRole()}];return s};var c=function(p){var q=null;switch(p){case"pno:Person":q=d.User;break;case"swym:Post":q=d.Post;break;case"swym:Survey":q=d.Survey;break;case"swym:Question":q=d.Question;break;case"swym:WikitreePage":q=d.Wiki;break;case"swym:Idea":q=d.Idea;break;case"swym:Picture":q=d.Picture;break;case"swym:AnimatedPicture":q=d.AnimatedPicture;break;case"swym:Document":q=d.Document;break;case"swym:Sound":q=d.Sound;break;case"swym:Video":q=d.Video;break;case"swym:3dModel":q=d.ThreeDModel;break;case"swym:Drawing":q=d.Drawing;break;default:q=d.SwymContent;break}return q};var k=function(p){p.id=a++;j.push(p)};var i=function(q){var p=q.getAssociated("author"),r=p.get("nickname")?p.get("nickname"):p.get("first_name")+" "+p.get("last_name");j=[];a=1;k({title:d.Type,value:c(q.get("ds6w:type_value"))});k({title:d.Title,value:q.get("title")});k({title:d.CreationDate,value:q.get("crdate").split(" ")[0]});if(f.isMediaType(q.get("ds6w:type_value"))){k({title:d.ModificationDate,value:q.get("update").split(" ")[0]})}if(f.isSurveyType(q.get("ds6w:type_value"))){k({title:d.StartDate,value:q.get("update").split(" ")[0]});k({title:d.EndDate,value:q.get("update").split(" ")[0]})}k({title:d.Owner,value:r});if(f.isMediaType(q.get("ds6w:type_value"))){k({title:d.Size,value:h.prettySize(q.get("size"))})}return j};var g=function(p){var q=[{id:"1",title:d.Type,value:d.Conversation},{id:"2",title:d.CreationDate,value:p.get("creation_date").split(" ")[0]}];return q};return l.singleton({generateProperties:function(p){if(p instanceof m){return g(p)}else{if(p instanceof e||!(p instanceof o)){return n(p)}else{if(p instanceof b){return null}else{return i(p)}}}}})});define("DS/SwymUnifiedSearch/script/customization/views/community-primary-view",["DS/SwymUICore/script/lib/view/generic/swym-model-view","DS/SwymUIComponents/script/feature/community/content/view/media-thumbnail-view","DS/SwymUnifiedSearch/script/utils","i18n!DS/SwymUnifiedSearch/assets/nls/properties-facet-factory"],function(d,e,b,c){var a=d.extend({name:"community-primary-view",setup:function(){this._parent();if(!b.isBetaEnabled()){this.membersView=this.addChildView("membersView",{Class:"DS/SwymSCI/script/layout/right/members-accessor-view",contextPath:"members",displayTotalCount:false,viewConfig:{collectionPath:"DS/SwymUICore/script/feature/core/user/collection/user-collection",collectionMode:"listmembers",collectionViewPath:"DS/SwymUIComponents/script/feature/community/members/view/small-members-list-view",collectionOptions:{order_by_last_member:true,limit:5}}})}},_addPropertiesSection:function(){var g=this.model,f=g.get("owner"),h=f.nickname?f.nickname:f.first_name+" "+f.last_name;if(b.isBetaEnabled()){return null}else{return{"class":"search-section-title",html:c.Properties+" : "},{"class":"properties-wrapper",html:[{"class":"properties-line",html:[{"class":"properties-item",html:c.Type},{"class":"properties-item",html:c.Community}]},{"class":"properties-line",html:[{"class":"properties-item",html:c.Title},{"class":"properties-item",html:g.get("title")}]},{"class":"properties-line",html:[{"class":"properties-item",html:c.CreationDate},{"class":"properties-item",html:g.get("crdate").split(" ")[0]}]},{"class":"properties-line",html:[{"class":"properties-item",html:c.MainOwner},{"class":"properties-item",html:h}]},{"class":"properties-line",html:[{"class":"properties-item",html:c.Visibility},{"class":"properties-item",html:g.getVisibility()}]},g.get("hasUserAccess")?{"class":"properties-line",html:[{"class":"properties-item",html:c.MyRole},{"class":"properties-item",html:g.getTranslatedRole()}]}:{}]}}},_addMembersSection:function(){if(b.isBetaEnabled()){return null}else{return{"class":"search-section-title",html:c.Members+" : "},this.membersView}},_createContent:function(){var g=this.model,f=[{"class":"description",html:g.get("description",{escapeHTML:false})},{"class":"logo no-community-rich-tooltip","data-content-type":"community","data-content-id":g.get("mid"),html:new e({model:this.model,imageRenderingOptions:{size:"l"}})},this._addPropertiesSection(),this._addMembersSection()];return f}});return a});define("DS/SwymUnifiedSearch/script/swym-preview",["DS/SNInfraUX/SearchPreviewContainer","DS/SwymUICore/script/feature/core/user/model/user-model","DS/SwymUnifiedSearch/script/utils","UWA/Promise","DS/SwymUICore/script/feature/core/user/model/currentuser-model"],function(a,d,f,e,c){var b=a.extend({_swymModel:null,init:function(g){this._parent(g)},_addCurrentUserPromise:function(){var g=null;if(!c.getInstance().hasBeenFetched()){g=e.deferred();c.getInstanceFetched(function(){g.resolve()});return g.promise}},_initialize:function(g){var h=[],j=this._addCurrentUserPromise(),i=this._addGetSwymModelPromise(g);if(j){h.push(j)}if(i){h.push(i)}return e.all(h)},_addGetSwymModelPromise:function(h){var g=null;if(!h){throw new Exception("in _getSwymModel, the searchModel must be set.")}var i=this;if(!this._swymModel){g=e.deferred();f.fetchSearchResultData(h,{onComplete:function(j){i._swymModel=j;if(!j){throw new Exception("No swym model could be created from the search model:",h)}g.resolve(i._swymModel)},onFailure:function(j){if(j.get("ds6w:type_value")==="swym:Community"){i._swymModel=j;i._swymModel.set("access",0);g.resolve(i._swymModel)}}});return g.promise}},getPrimaryContent:function(g){var h=this;require(["DS/SwymUnifiedSearch/script/customization/views/swym-content-view"],function(i){h._initialize(g.searchmodel).then(function(){h._swymContentView=new i({model:h._swymModel});g.onComplete.call(undefined,h._swymContentView);if(h._swymModel instanceof d){g.onCusto.call(undefined,{informationUser:"hide"})}})})},getSecondaryContent:function(g){var h=this;this._initialize(g.searchmodel).then(function(){require(["DS/SwymUnifiedSearch/script/properties-facet-factory"],function(j){var i=j.generateProperties(h._swymModel);if(i){g.onFailure.call(undefined,i)}})})},dispose:function(){if(this._swymContentView){this._swymContentView.destroy()}if(this._swymSecondaryView){this._swymSecondaryView.destroy()}}});return b});define("DS/SwymUnifiedSearch/script/customization/views/media-primary-view",["DS/SwymUICore/script/lib/view/generic/swym-model-view","DS/SwymUnifiedSearch/script/utils","DS/SwymUIComponents/script/utils/media-utils"],function(c,a,d){var b=c.extend({name:"media-primary-view",_detailsView:null,_mediaUrl:null,_bodySize:null,setup:function(f){var e=this.model;this._bodySize=f.widget.getSize(),this._parent();if(a.isBetaEnabled()){this._detailsView=this.addChildView("mediaDetailsView",{model:e,Class:"DS/SwymUIComponents/script/feature/community/media/view/media-details-view",showDownloadButton:true})}},_createContent:function(){var f=d.generateBestThumbnailForContentView(this._bodySize.width,null,this.model);this._mediaUrl=f.url;var e=[this._detailsView,{tag:"img",styles:{width:"100%"},src:this._mediaUrl}];return e}});return b});define("DS/SwymUnifiedSearch/script/customization/editprop-ajax-requests/swym-ajax-requests",["UWA/Core","DS/SwymUnifiedSearch/script/utils"],function(c,b){var a={getListOfAttributes:function(d){},checkFacetsVisibility:function(d){require(["DS/SwymUnifiedSearch/script/utils"],function(i){if(!i.isBetaEnabled()){if(d&&d.model&&d.onComplete){var g,e={},h,f=d&&d.model;if(f&&f.has("objectId")){e.id=f.get("objectId");e.facets=h={};require(["DS/EditPropWidget/constants/EditPropConstants"],function(j){if(c.is(d.facets,"array")){g=f.get("ds6w:what/ds6w:type_value");d.facets.forEach(function(k){switch(k.name){case j.FACET_SWYM_CONTENT:if(!i.isCommunityContentTypeButNotSurvey(g)){return false}break;case j.FACET_SWYM_SURVEY_PROPERTIES:if(!i.isSurveyType(g)){return false}break;case j.FACET_SWYM_COMMUNITY_PROPERTIES:if(!i.isCommunityType(g)){return false}break;case j.FACET_SWYM_USER_PROPERTIES:if(!i.isUserType(g)){return false}break;default:return false}h[k.name]=true})}d.onComplete.call(this,e,d)})}else{throw Error("Object id cannot be found")}}else{throw Error("Missing arguments when calling checkFacetsVisibility()")}}})}};return a});define("DS/SwymUnifiedSearch/script/customization/views/swym-content-view",["UWA/Core","DS/SwymUICore/script/lib/view/generic/swym-view","DS/SwymUnifiedSearch/script/utils","DS/SwymUICore/script/feature/core/user/model/user-model"],function(f,a,e,c){var d=function(){require(["DS/UWPClientControls/PlatformNotify","i18n!DS/SwymUnifiedSearch/assets/nls/messages"],function(g,h){g.error(h.ErrorFetchingDataFrom3Dswym)})},b=a.extend({_swymModel:null,_isIframeLoaded:false,name:"swym-content-view",_observer:null,_innerViewDefaultOptions:{addScroller:false,showTitle:false,showComments:false,showStatus:false,showLinks:false,showToolbar:false,prevent3DPlayInstantiation:true},defaultOptions:{contentHtmlRootFolder:"/webapps",frameContentInitModule:""},_sendDataToIframe:function(){var g=this.getElement("iframe");if(this._isIframeLoaded===true&&this._swymModel&&this._swymModel.urlRoot){g.contentWindow.postMessage({parentWindowOrigin:window.location.origin,modelAttributes:this._swymModel.toJSON(),viewOptions:this._innerViewDefaultOptions,lang:window.dsLang,initModule:this.getOption("frameContentInitModule"),isBetaEnabled:e.isBetaEnabled()},this._swymModel.urlRoot)}},_onIframeLoad:function(){this._isIframeLoaded=true;this._sendDataToIframe();this.dispatchEvent("onIframeLoad",[this])},_resizeFrame:function(g){var h=this.elements.iframe;h.setStyle("height",g+"px")},onInit:function(){this._onIframeLoad=this._onIframeLoad.bind(this);this._messageListener=this._messageListener.bind(this);if(window.addEventListener){window.addEventListener("message",this._messageListener,false)}else{window.attachEvent("onmessage",this._messageListener)}},onRender:function(){var g=this;e.getSwymModelFromSearchModel(this.model,{onComplete:function(h){g._swymModel=h;g.elements.iframe=f.createElement("iframe",{"class":"swym-content-iframe",styles:{border:"none",width:"100%","pointer-events":"none"},src:g._swymModel.urlRoot+g.getOption("contentHtmlRootFolder")+"/SwymUnifiedSearch/assets/html/content.html",events:{load:g._onIframeLoad}}).inject(g.container);if(h instanceof c){g.container.setStyle("height","100%");g.elements.iframe.setStyle("height","100%")}},onFailure:d});this.container.setStyles({overflow:"auto"})},_messageListener:function(g){var i=g.data,h=g.origin;if(i.swymContentHeight){this._resizeFrame(i.swymContentHeight)}},destroy:function(){this._swymModel=null;if(window.removeEventListener){window.removeEventListener("message",this._messageListener,false)}else{window.detachEvent("onmessage",this._messageListener)}return this._parent.apply(this,arguments)}});return b});define("DS/SwymUnifiedSearch/script/customization/actions/open-in-3dswym-context-action",["DS/SwymUnifiedSearch/script/utils","DS/SwymUnifiedSearch/script/customization/actions/abstract-action","DS/CefCommunication/CefCommunication","i18n!DS/SwymUIComponents/assets/nls/feature/community/generic/skeleton-utils/content-idcard-options"],function(e,d,c,a){var b=d.extend({name:"DS/SwymUnifiedSearch/script/customization/actions/open-in-3dswym-context-action",availableForTypes:function(){return e.ALL_SWYM_TYPES},getActionForObject:function(){if((window.ds&&window.ds.env==="3DSwym")||c.isAvailable()){return[]}else{return[{title:a.OpenInA3DSwymApp,icon:"level-down",id:"DS/SwymUnifiedSearch/script/customization/actions/open-in-3dswym-context-action",multisel:false,callback:function(f){this.executeAction(f.model)}.bind(this)}]}},executeAction:function(){require(["DS/i3DXCompassServices/i3DXCompassPubSub"],function(f){f.publish("launchApp",{appId:"X3DMCTY_AP"})})}});return b});define("DS/SwymUnifiedSearch/script/customization/actions/item-click-handler",["UWA/Class/Events","DS/SwymUnifiedSearch/script/customization/actions/open-in-3dswym-context-action"],function(a,b){var c=b.singleton({executeAction:function(e){var d;if(e&&window.ds&&window.ds.env==="3DSwym"){d=e.model||(e.itemView&&e.itemView.model);if(d){this._parent.call(this,d,e)}}}});return c});define("DS/SwymUnifiedSearch/script/customization/facets/edit-properties-facets/swym-survey-properties-facet",["UWA/Core","DS/EditPropWidget/facets/Properties/Properties","DS/EditPropWidget/facets/Properties/EditPropController","DS/EditPropWidget/constants/EditPropConstants","DS/CefCommunication/CefCommunication","DS/SwymUnifiedSearch/script/customization/actions/open-in-3dswym-context-action"],function(g,a,d,c,e,b){var f=new b();var h=d.extend({isActionAvailable:function(i){if(i===c.ACTION_SWYM_VIEW_SURVEY_IN_3DSWYM&&!e.isAvailable()){return true}else{return false}},onAction:function(j){var i=this.getModel();if((j===c.ACTION_SWYM_VIEW_SURVEY_IN_3DSWYM)&&i){f.executeAction(i)}},destroyComponent:function(){if(g.is(this.destroy,"function")){this.destroy()}}});return h});define("DS/SwymUnifiedSearch/script/customization/facets/edit-properties-facets/swym-content-facet",["UWA/Core","DS/EditPropWidget/facets/Common/FacetsBase","DS/EditPropWidget/constants/EditPropConstants","DS/CefCommunication/CefCommunication","DS/SwymUnifiedSearch/script/customization/actions/open-in-3dswym-context-action"],function(f,e,c,d,b){var a=new b();var g=e.extend({_innerView:null,init:function(){this._parent.apply(this,arguments);if(!this.elements.container){this.elements.container=f.createElement("div",{styles:{height:"100%"}})}},updateFacet:function(){var h=this;require(["DS/SwymUnifiedSearch/script/customization/views/swym-content-view"],function(j){if(h.elements&&h.elements.container){var k=h._innerView,i=h.getModel();if(!i){return false}h._innerView=new j({model:i}).render({target:h.elements.container,emptyTarget:true});if(k){setTimeout(function(){k.destroy()},0)}}})},isActionAvailable:function(h){if(h===c.ACTION_SWYM_VIEW_CONTENT_IN_3DSWYM&&!d.isAvailable()){return true}else{return false}},onAction:function(i){var h=this.getModel();if((i===c.ACTION_SWYM_VIEW_CONTENT_IN_3DSWYM)&&h){a.executeAction(h)}},destroyComponent:function(){if(this._innerView){this._innerView.destroy();this._innerView=null}if(f.is(this.destroy,"function")){this.destroy()}}});return g});define("DS/SwymUnifiedSearch/script/customization/facets/edit-properties-facets/swym-community-properties-facet",["UWA/Core","DS/EditPropWidget/facets/Properties/Properties","DS/EditPropWidget/facets/Properties/EditPropController","DS/EditPropWidget/constants/EditPropConstants","DS/CefCommunication/CefCommunication","DS/SwymUnifiedSearch/script/customization/actions/open-in-3dswym-context-action"],function(h,a,d,c,e,b){var g=new b();var f=d.extend({isActionAvailable:function(i){if(i===c.ACTION_SWYM_VIEW_COMMUNITY_IN_3DSWYM&&!e.isAvailable()){return true}else{return false}},onAction:function(j){var i=this.getModel();if((j===c.ACTION_SWYM_VIEW_COMMUNITY_IN_3DSWYM)&&i){g.executeAction(i)}},destroyComponent:function(){if(h.is(this.destroy,"function")){this.destroy()}}});return f});define("DS/SwymUnifiedSearch/script/customization/facets/edit-properties-facets/swym-user-properties-facet",["UWA/Core","DS/EditPropWidget/facets/Properties/Properties","DS/EditPropWidget/facets/Properties/EditPropController","DS/EditPropWidget/constants/EditPropConstants","DS/CefCommunication/CefCommunication","DS/SwymUnifiedSearch/script/customization/actions/open-in-3dswym-context-action"],function(h,a,f,d,g,c){var b=new c();var e=f.extend({isActionAvailable:function(i){if(i===d.ACTION_SWYM_VIEW_USER_PROFILE&&!g.isAvailable()){return true}else{return false}},onAction:function(j){var i=this.getModel();if((j===d.ACTION_SWYM_VIEW_USER_PROFILE)&&i){b.executeAction(i)}},destroyComponent:function(){if(h.is(this.destroy,"function")){this.destroy()}}});return e});define("DS/SwymUnifiedSearch/script/customization/facets/abstract-facet",["UWA/Core","UWA/Class","DS/SwymUnifiedSearch/script/utils"],function(d,a,b){var c=d.merge({facet_name:null,is_facet_avalailable:function(e){},facet_idcard:function(e){}},b);return c});define("DS/SwymUnifiedSearch/script/customization/items/abstract-item",["UWA/Class","DS/SwymUnifiedSearch/script/bootstrap","DS/SwymUnifiedSearch/script/utils"],function(a,b,c){b.start();return a.extend(c,{name:null,modelName:null,image:function(){var e=this.model||this,d=e.get("preview_url");return d},icon:function(){var d=this.model||this,e=d.get("type_icon_url");return e}})});define("DS/SwymUnifiedSearch/script/customization/facets/content-viewer-facet",["UWA/Core","DS/W3DXComponents/Skeleton","DS/SwymUnifiedSearch/script/utils","DS/SwymUnifiedSearch/script/customization/facets/abstract-facet"],function(e,d,c,b){var a=e.merge({facet_name:"swym-content-viewer",is_facet_avalailable:function(f){var g=f&&f.get("ds6w:what/ds6w:type_value");if(c.isCommunityContentTypeButNotSurvey(g)){return true}else{return false}},facet_idcard:function(){return{handler:d.getRendererHandler("DS/SwymUnifiedSearch/script/customization/views/swym-content-view")}}},b);return a});define("DS/SwymUnifiedSearch/script/customization/items/content-item",["UWA/Core","DS/SwymUnifiedSearch/script/utils","DS/SwymUnifiedSearch/script/customization/items/abstract-item","DS/SwymUnifiedSearch/script/customization/facets/content-viewer-facet","DS/SwymUnifiedSearch/script/customization/actions/open-in-3dswym-context-action","DS/CefCommunication/CefCommunication","i18n!DS/SwymUIComponents/assets/nls/feature/community/generic/skeleton-utils/content-idcard-options"],function(g,f,h,d,c,e,a){var b=h.extend({names:f.SWYM_CONTENT_TYPES_EXCEPT_SURVEY,getIdCardOpts:function(i){return{thumbnail:null,banner:null,attributesMapping:{title:function(){return(this.get("ds6w:label")||this.get("title")||"").escapeHTML()},date:function(){return this.get("ds6w:modified")},ownerName:function(){return this.get("ds6w:who/ds6w:responsible")}},actions:function(){var j=this.model||this;return((window.ds&&ds.env==="3DSwym")||e.isAvailable())?[]:[{text:(f.isUserType(j.get("ds6w:what/ds6w:type_value"))?a.OpenUserProfile:a.OpenInA3DSwymApp),icon:"level-down",handler:function(k){(new c()).executeAction(k.model)}}]},facetsLikeTabs:false,facets:function(){return[g.merge({name:"description"},d.facet_idcard()),{name:"endorsements",text:a.Endorsements,icon:"thumbs-up",attribute:"ds6w:what/ds6w:social/ds6w:endorsements"},{name:"comments",text:a.Comments,icon:"comment",attribute:"ds6w:what/ds6w:social/ds6w:comments"}]}}},getEditPropertiesComponentFacets:function(i){var j=i&&i.get("ds6w:what/ds6w:type_value");if(j){if(this.SWYM_CONTENT_TYPES_EXCEPT_SURVEY(j)){return["FACET_SWYM_CONTENT"]}else{switch(j){case f.SWYM_USER_TYPE:return["FACET_SWYM_USER_PROPERTIES"];case f.SWYM_COMMUNITY_TYPE:return["FACET_SWYM_COMMUNITY_PROPERTIES"];case f.SWYM_SURVEY_TYPE:return["FACET_SWYM_SURVEY_PROPERTIES"];default:break}}}return false}});return b});