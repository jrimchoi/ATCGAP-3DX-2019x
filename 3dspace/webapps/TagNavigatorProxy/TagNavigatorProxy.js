define("DS/TagNavigatorProxy/Logger",[],function(){function a(f){var e,b,g,i,d,h;if(typeof f!=="boolean"){f=false}b=f;if(window){g=window}else{if(global){g=global}else{g={}}}this.disable=function(){b=false;return this};function c(j){return function(){if(!b){return}if(g.console){if(typeof g.console[j]==="function"){return g.console[j].apply(g.console,Array.prototype.slice.call(arguments))}if(typeof g.console[j]!=="function"){if(typeof g.console[j]==="object"&&j!=="debug"){return g.console[j](Array.prototype.slice.call(arguments))}}}else{if(g.opera&&typeof g.opera.postError==="function"){return g.opera.postError.apply(null,Array.prototype.slice.call(arguments))}}}}h=["log","info","warn","error","debug","group","groupEnd"];for(i=0,d=h.length;i<d;i++){e=h[i];this[e]=c(e)}}return new a(true)});define("DS/TagNavigatorProxy/ProxyNLS",["UWA/Class"],function(a){var b={},c;b.en={clearFilters:"Clear Filters",focus:"Focus content",unfocus:"Unfocus content"};b.jp={clearFilters:"Clear Filters",focus:"Focus content",unfocus:"Unfocus content"};b.zh={clearFilters:"Clear Filters",focus:"Focus content",unfocus:"Unfocus content"};b.de={clearFilters:"Clear Filters",focus:"Focus content",unfocus:"Unfocus content"};b.fr={clearFilters:"Effacer les filtres",focus:"Zoom sur le contenu",unfocus:"DÃ©zoomer le contenu"};c=a.singleton({init:function(){this._currentLanguage="en";this.getNLS=function(d){return b[this._currentLanguage][d]};this.setCurrentLanguage=function(d){if(this._currentLanguage===null){this._currentLanguage=d}}}});return c.init()});define("DS/TagNavigatorProxy/ProxyView",["UWA/Core","UWA/Class/View","DS/TagNavigatorProxy/ProxyNLS","css!DS/TagNavigatorProxy/TagNavigatorProxy"],function(c,b,d){var a=b.extend({domEvents:{click:"_toggleProxyFocus"},container:function(){if(!this.$focusButton){this.$focusButton=c.createElement("div",{"class":"proxyView"})}return this.$focusButton},setup:function(){this.listenTo(this.model,{"onChange:isFocused":this._onFocusChanged,"onChange:isAlive":this._haraKiri,"onChange:hasFilter":this._onFilter,"onChange:lang":this._updateNls})},destroy:function(){this.stopListening();this._parent()},_onFocusChanged:function(){if(this.$focusButton){this.$focusButton.toggleClassName("active")}},_haraKiri:function(){this.container.destroy()},_onFilter:function(e,f){this.$focusButton.getElement("span").toggleClassName("fonticon-tag",!f);this.$focusButton.getElement("span").toggleClassName("fonticon-tag-filter",f)},_updateNls:function(e,f){d.setCurrentLanguage(f);if(this.$clearFilterButton){this.$clearFilterButton.setDropdown({items:[{text:d.getNLS("clearFilters")}]})}this.$focusButton.setOptions({attributes:{title:d.getNLS(this.model.get("isFocused")?"unfocus":"focus")}})},render:function(){this.$focusButton.addContent({tag:"span","class":"fonticon fonticon-tag"});return this},_toggleProxyFocus:function(){this.model.toggleProxyFocus()}});return a});define("DS/TagNavigatorProxy/AbstractTagger6WProxy",["UWA/Core","UWA/Class/Model","UWA/Utils","UWA/Utils/InterCom","UWA/Class/Timed","DS/TagNavigatorProxy/Logger"],function(i,f,j,k,h,e){var l,c,b=false;var a=["tenant"];var d=function(m){if(!UWA.is(c)){c={}}return c[m]||{}};var g=function(m,n){if(!UWA.is(c)){c={}}c[m]=n};l=f.extend(h,{defaults:{isFocused:false,hasFilter:false,isAlive:true,lang:"en"},setup:function(m){if(typeof m!=="object"){return i.log("Error in TagNavigatorProxy init...")}if(typeof m.widgetId!=="string"){if(typeof m.contextId!=="string"){throw new Error("If in 3DD context: give a widgetId. Else give a contextId.")}m.widgetId="IsNotInWidget"}m.id=j.getUUID();this.options=m;if(window.proxyLogs){e.group("Create proxy");e.info("Options : ",m);e.groupEnd("Create proxy")}var p=this,o=window;if(!m.rightParentWindow){try{while(o&&o!==o.top){if(o.create6WTaggerView){break}o=o.parent}}catch(q){o=o.top}}else{o=m.rightParentWindow}d(this.options.id);this.taggerServer="com.ds.tagger6w";i.log("TNP - init socket");this._mySocket=new k.Socket(m.id,{dispatchRetryInterval:40});this._mySocket.subscribeServer(this.taggerServer,o,"*");if(m.events){if(m.events.addTagCreationListener&&typeof m.events.addTagCreationListener==="function"){this._mySocket.addListener("addTagCreationListener",m.events.addTagCreationListener)}if(m.events.addTagDeletionListener&&typeof m.events.addTagDeletionListener==="function"){this._mySocket.addListener("addTagDeletionListener",m.events.addTagDeletionListener)}if(m.events.addUnfocusSubjectsListener&&typeof m.events.addUnfocusSubjectsListener==="function"){this._mySocket.addListener("addUnfocusSubjectsListener",m.events.addUnfocusSubjectsListener)}}this._mySocket.addListener("addLocalFilterStatusListener",function n(t){var s=t.isFocused,r=t.hasFilter;if(this.get("isFocused")!==s){this.set({isFocused:s})}if(this.get("hasFilter")!==r){this.set({hasFilter:r})}}.bind(this));this._throwError=function(r){i.log(r)};this._mySocket.addListener("throwError",function(r){i.log(r)});this._mySocket.addListener("colorize",function(r){p.dispatchEvent("colorize",r)});this._mySocket.addListener("unColorize",function(r){p.dispatchEvent("unColorize",r)});this.isProxyReady=false;this._mySocket.addListener("proxyIsReady",function(r){i.log("TNP - isReady!");g(p.options.id,i.extend(d(p.options.id),r.filters));p.set({lang:r.lang});p.isProxyReady=true});this._mySocket.addListener("isDead",function(){p.set({isAlive:false});p._mySocket.removeListener();p._mySocket.disconnect()});this._mySocket.addListener("updateDisplayStatus",function(r){b=i.is(r,"boolean")?r:false;if(i.is(p.cbForVisibilityChange,"function")){p.cbForVisibilityChange(r)}});this._mySocket.dispatchEvent("getProxy",m,undefined,[p.taggerServer])},internalGetFilters:function(m){if(m.taggerServer==="com.ds.tagger6w"){return c}},getCurrentFilter:function(){var m=d(this.options.id);if(window.proxyLogs){e.group("Get current filters");e.info(this);e.info("Filters : ",m);e.groupEnd("Get current filters")}return i.clone(m)},getDisplayStatus:function(){if(window.proxyLogs){e.group("Get display status");e.info(this);e.info("Tagger is ",b?"displayed.":"not displayed.");e.groupEnd("Get display status")}return i.clone(b)},die:function(){if(window.proxyLogs){e.group("Destroy proxy");e.info(this);e.groupEnd("Destroy proxy")}var m=this;this._mySocket.dispatchEvent("die",null,undefined,[m.taggerServer]);if(this.cbForOpenTagger){this.cbForOpenTagger=null}if(this.cbForCloseTagger){this.cbForCloseTagger=null}if(this.cbForFilterChange){this.cbForFilterChange=null}if(this.cbForCriteriaChange){this.cbForCriteriaChange=null}if(this.cbForRequestSuggests){this.cbForRequestSuggests=null}if(this.cbForPLMUpdate){this.cbForPLMUpdate=null}if(this.cbForInternalFilterChange){this.cbForInternalFilterChange=null}if(this.cbForVisibilityChange){this.cbForVisibilityChange=null}if(this.cbForSortChange){this.cbForSortChange=null}},focusOnSubjects:function(m,n,o){if(window.proxyLogs){e.group("Focus on subjects");e.info(n?"Persisting tags":"Not persisting tags"," on ",this.cid);e.info("Focused URIs : ",m);e.info("Where to put tags : ",o);e.groupEnd("Focus on subjects")}this._dispatchIfReady("focusOnSubjects",{subjectsURI:m,persistTags:n,dataSources:o})},unfocus:function(){if(window.proxyLogs){e.group("Unfocus subjects");e.info("Proxy identification : ",this);e.groupEnd("Unfocus subjects")}this._dispatchIfReady("unfocus")},unsetTags:function(){if(window.proxyLogs){e.group("Unset tags");e.info("Proxy identification : ",this);e.groupEnd("Unset tags")}this._dispatchIfReady("unsetTags")},addTagCreationListener:function(m,n){if(typeof m==="function"){this._mySocket.addListener("addTagCreationListener",m.bind(n))}else{this._throwError("Invalid Arg")}},addTagDeletionListener:function(m,n){if(typeof m==="function"){this._mySocket.addListener("addTagDeletionListener",m.bind(n))}else{this._throwError("Invalid Arg")}},activate:function(){if(window.proxyLogs){e.group("Activate proxy");e.info("Proxy identification : ",this);e.groupEnd("Activate proxy")}this._dispatchIfReady("activate")},deactivate:function(){if(window.proxyLogs){e.group("Deactivate proxy");e.info("Proxy identification : ",this);e.groupEnd("Deactivate proxy")}this._dispatchIfReady("deactivate")},toggleProxyFocus:function(n){var m;if(typeof n==="boolean"){m=n}else{m=!this.get("isFocused")}if(window.proxyLogs){e.group("Toggle proxy focus");e.info("Proxy identification : ",this);e.info(m?"Focusing":"Unfocusing");e.groupEnd("Toggle proxy focus")}this._dispatchIfReady("toggleProxyFocus",{focusStatus:m})},clearLocalFilter:function(m){var n=d(this.options.id);if(window.proxyLogs){e.group("Clear local filters");e.info("Filters before : ",n);e.groupEnd("Clear local filters")}delete n.allfilters;delete n.localfilters;delete n.PLMParameters;this._dispatchIfReady("clearLocalFilter",{refine:m===true})},setLocalFilter:function(m,n){if(window.proxyLogs){e.group("Set local filters");e.info("Filters before : ",this.localFilter);e.info("Filters after : ",m);e.groupEnd("Set local filters")}if(n!==false){n=true}this._dispatchIfReady("setLocalFilter",{localFilter:m,warn:n})},setColorMap:function(m){if(window.proxyLogs){e.group("Set color map");e.info("Colors : ",m);e.groupEnd("Set color map")}this._dispatchIfReady("setColorMap",m)},setRelevantPredicates:function(m){if(window.proxyLogs){e.group("Set relevant predicates");e.info("Predicates : ",m);e.groupEnd("Set relevant predicates")}this._dispatchIfReady("setRelevantPredicates",{predicates:m})},setPredicates:function(m){if(window.proxyLogs){e.group("Set predicates");e.info("Predicates : ",m);e.groupEnd("Set predicates")}this._dispatchIfReady("setPredicates",m)},toggleDisplayAll:function(m){if(window.proxyLogs){e.group("Toggle display all");e.info(i.is(m)?"Forcing "+(m?"show all":"light view"):"Switching view");e.groupEnd("Toggle display all")}this._dispatchIfReady("toggleDisplayAll",m)},toggleDisplayAllCriteria:function(m){if(window.proxyLogs){e.group("Toggle display all criteria");e.info(i.is(m)?"Forcing "+(m?"More Criteria":"Less Criteria"):"Switching view");e.groupEnd("Toggle display all criteria")}this._dispatchIfReady("toggleDisplayAllCriteria",m)},updateProxyOptions:function(m){if(UWA.is(m,"object")){var n={};for(var p=0;p<a.length;p++){if(UWA.is(m[a[p]])){n[a[p]]=m[a[p]]}}if(Object.keys(n).length>0){if(window.proxyLogs){e.group("Update proxy options");e.info("options to update:",n);e.groupEnd("Update proxy options")}this._dispatchIfReady("updateProxyOptions",n)}}},_dispatchIfReady:function(m,o){var n=this;n._mySocket.dispatchEvent(m,o,undefined,[n.taggerServer])}});return l});define("DS/TagNavigatorProxy/Tagger6WProxyWithFilteringServices",["UWA/Core","DS/TagNavigatorProxy/AbstractTagger6WProxy","DS/TagNavigatorProxy/Logger"],function(g,c,a){var e,b;var f=function(h){return b[h]||{}};var d=function(h,i){b[h]=i};e=c.extend({init:function(h){var i=this,j;this._parent(h);b=this.internalGetFilters(this);if(window.proxyLogs){a.group("Create proxy WFS");a.info("Options : ",h);a.groupEnd("Create proxy WFS")}j=h.events?h.events.addFilterSubjectsListener:undefined;this.addFilterSubjectsListener(j);this.getExplicitTagsByTagger=h.getExplicitTagsByTagger;this._mySocket.addListener("onFilterSubjectsChange",function(k){d(i.options.id,g.extend(f(i.options.id),k));if(typeof i.cbForFilterChange==="function"){i.cbForFilterChange(k)}if(window.proxyLogs){a.group("Filtered subjects change event");a.info("Filtered subject list : ",k);a.groupEnd("Filtered subjects change event")}i.dispatchEvent("onFilterSubjectsChange",k)})},setSubjectsTags:function(h){if(window.proxyLogs){a.group("Set subject tags");a.info("Subject tags : ",h);a.groupEnd("Set subject tags")}this._dispatchIfReady("setSubjectsTags",h)},addSubjectsTags:function(h){if(window.proxyLogs){a.group("Add subject tags");a.info("Subject tags : ",h);a.groupEnd("Add subject tags")}this._dispatchIfReady("addSubjectsTags",h)},addFilterSubjectsListener:function(h,i){if(typeof h==="function"){this.cbForFilterChange=h.bind(i)}}});return e});define("DS/TagNavigatorProxy/Tagger6WProxy",["UWA/Core","DS/TagNavigatorProxy/AbstractTagger6WProxy","DS/TagNavigatorProxy/Logger"],function(f,c,a){var g,b;var e=function(h){return b[h]||{}};var d=function(h,i){b[h]=i};g=c.extend({setup:function(h){var i=this,j;this._parent(h);b=this.internalGetFilters(this);if(window.proxyLogs){a.group("Setup proxy FOS");a.info("Options : ",h);a.info("Identifier : ",this.cid);a.groupEnd("Setup proxy FOS")}j=h.events?h.events.addFilterChangeListener:undefined;this.addFilterChangeListener(j);j=h.events?h.events.addCriteriaChangeListener:undefined;this.addCriteriaChangeListener(j);j=h.events?h.events.addPLMUpdateListener:undefined;this.addPLMUpdateListener(j);j=h.events?h.events.addRequestSuggestsListener:undefined;this.addRequestSuggestsListener(j);j=h.events?h.events.addOpenTaggerListener:undefined;this.addOpenTaggerListener(j);j=h.events?h.events.addCloseTaggerListener:undefined;this.addCloseTaggerListener(j);j=h.events?h.events._internalFilterChangeListener:undefined;this.addInternalFilterChangeListener(j);j=h.events?h.events._addVisibilityChangeListener:undefined;this.addVisibilityChangeListener(j);j=h.events?h.events.addSortChangeListener:undefined;this.addSortChangeListener(j);this._mySocket.addListener("onFilterChange",function(k){var l=!UWA.is(k,"object")||!UWA.is(k.triggerProxyCB)||true===k.triggerProxyCB;if(window.proxyLogs){a.group("Filter change event");a.info("Filters : ",k);a.info("triggerProxyCB : ",l);a.groupEnd("Filter change event ")}delete k.triggerProxyCB;d(i.options.id,f.extend(e(i.options.id),k));if(l){if(typeof i.cbForFilterChange==="function"){i.cbForFilterChange(k)}i.dispatchEvent("onFilterChange",k)}});this._mySocket.addListener("onCriteriaChange",function(k){if(window.proxyLogs){a.group("Criteria change event");a.info("Criteria : ",k);a.groupEnd("Criteria change event")}if(typeof i.cbForCriteriaChange==="function"){i.cbForCriteriaChange(k)}i.dispatchEvent("onCriteriaChange",k)});this._mySocket.addListener("plmUpdate",function(k){if(window.proxyLogs){a.group("Update PLM event");a.info("PLM : ",k);a.groupEnd("Update PLM event")}if(typeof i.cbForPLMUpdate==="function"){i.cbForPLMUpdate(k)}});this._mySocket.addListener("requestSuggestions",function(k){if(window.proxyLogs){a.group("Request Suggestions event");a.info("query : ",k);a.groupEnd("Request Suggestions event")}if(typeof i.cbForRequestSuggests==="function"){i.cbForRequestSuggests(k)}});this._mySocket.addListener("proxyIsReady",function(l){var k=e(i.options.id);d(i.options.id,f.extend(k,l.filters));if(l.forceFilterChangeEvent||(k.allfilters&&Object.keys(k.allfilters).length!==0)){if(typeof i.cbForFilterChange==="function"){i.cbForFilterChange(k)}i.dispatchEvent("onFilterChange",k)}});this._mySocket.addListener("onOpenTagger",function(){if(typeof i.cbForOpenTagger==="function"){i.cbForOpenTagger()}});this._mySocket.addListener("onCloseTagger",function(){if(typeof i.cbForCloseTagger==="function"){i.cbForCloseTagger()}});this._mySocket.addListener("onSortChange",function(k){if(typeof i.cbForSortChange==="function"){i.cbForSortChange(k)}});this._mySocket.addListener("_internalFilterChangeListener",function(k){if(typeof i.cbForInternalFilterChange==="function"){i.cbForInternalFilterChange(k)}})},setTags:function(i,h,j){if(window.proxyLogs){a.group("Set tags");a.info("Tags data : ",i);a.info("Summary data : ",h);a.info("Identifier : ",this.cid);a.groupEnd("Set tags")}this._dispatchIfReady("setTags",{tagsdata:i,summaryData:h})},addSubjects:function(h){if(window.proxyLogs){a.group("Add subjects");a.info("Tags data : ",h);a.groupEnd("Add subjects")}this._dispatchIfReady("addSubjects",{tagsdata:h})},setCriteria:function(h){if(window.proxyLogs){a.group("Set criteria");a.info("Criteria : ",h);a.groupEnd("Set criteria")}this._dispatchIfReady("setCriteria",{criteria:h})},removeCriteria:function(h){if(window.proxyLogs){a.group("Remove criteria");a.info("Criteria : ",h);a.groupEnd("Remove criteria")}this._dispatchIfReady("removeCriteria",{criteria:h})},updateCriteria:function(h){if(window.proxyLogs){a.group("Update criteria");a.info("Criteria : ",h);a.groupEnd("Update criteria")}this._dispatchIfReady("updateCriteria",{criteria:h})},updateCriterion:function(h){if(window.proxyLogs){a.group("Update criterion");a.warn("NOTHING IMPLEMENTED !!!!!");a.groupEnd("Update criterion")}},displayCriteria:function(h){if(window.proxyLogs){a.group("Display criteria");a.info("Criteria : ",h);a.groupEnd("Display criteria")}this._dispatchIfReady("displayCriteria",h)},addFilterChangeListener:function(h,i){if(typeof h==="function"){this.cbForFilterChange=h.bind(i)}},addCriteriaChangeListener:function(h,i){if(typeof h==="function"){this.cbForCriteriaChange=h.bind(i)}},addPLMUpdateListener:function(h,i){if(typeof h==="function"){this.cbForPLMUpdate=h.bind(i)}},addRequestSuggestsListener:function(h,i){if(typeof h==="function"){this.cbForRequestSuggests=h.bind(i)}},addOpenTaggerListener:function(h,i){if(typeof h==="function"){this.cbForOpenTagger=h.bind(i)}},addCloseTaggerListener:function(h,i){if(typeof h==="function"){this.cbForCloseTagger=h.bind(i)}},addInternalFilterChangeListener:function(h,i){if(typeof h==="function"){this.cbForInternalFilterChange=h.bind(i)}},addVisibilityChangeListener:function(h,i){if(typeof h==="function"){this.cbForVisibilityChange=h.bind(i)}},addSortChangeListener:function(h,i){if(typeof h==="function"){this.cbForSortChange=h.bind(i)}},updatePLMSuggestions:function(h){if(window.proxyLogs){a.group("Update PLM suggestions");a.info("Data : ",h);a.groupEnd("Update PLM suggestions")}this._dispatchIfReady("updatePLMSuggestions",h)},updateSuggestions:function(h){if(window.proxyLogs){a.group("Update Suggestions");a.info("Data : ",h);a.groupEnd("Update Suggestions")}this._dispatchIfReady("updateSuggestions",h)}});return g});define("DS/TagNavigatorProxy/TagNavigatorProxy",["UWA/Core","DS/TagNavigatorProxy/Tagger6WProxy","DS/TagNavigatorProxy/Tagger6WProxyWithFilteringServices","DS/TagNavigatorProxy/Logger"],function(d,c,b,a){var e={};e.createProxy=function(f){if(location.search.indexOf("debug")!==-1||location.search.indexOf("proxyLogs")!==-1){window.proxyLogs=true}if(window.proxyLogs){a.group("Create proxy method");a.info("Optons : ",f);a.groupEnd("Create proxy method")}if(f.filteringMode==="WithFilteringServices"){return new b(f)}if(f.filteringMode==="FilteringOnServer"){return new c(f)}d.log("Invalid input Args")};e.filteringMode={FilteringOnServer:"FilteringOnServer",WithFilteringServices:"WithFilteringServices"};return e});define("TagNavigatorProxy",["TagNavigatorProxy/TagNavigatorProxy"],function(a){return a});define("TagNavigatorProxy/TagNavigatorProxy",["DS/TagNavigatorProxy/TagNavigatorProxy"],function(a){return a});