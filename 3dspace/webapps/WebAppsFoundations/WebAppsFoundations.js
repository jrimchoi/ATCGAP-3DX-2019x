define("DS/WebAppsFoundations/Router",["UWA/Core","UWA/Class","UWA/Class/Events","UWA/Class/Listener","UWA/Class/Options"],function(g,a,k,j,h){var b,l=["routes","History"],f=/\((.*?)\)/g,c=/(\(\?)?:\w+/g,i=/\*\w+/g,d=/[\-{}\[\]+?.,\\\^$|#\s]/g;function e(m,o){var n;if(m){n=m[o];if(g.is(n,"function")){n=n.call(m)}}return n}b=a.extend(h,k,j,{init:function(n){var p=this,m,o;n=g.clone(n||{},false);for(o=l.length-1;o>=0;o--){m=l[o];if(n.hasOwnProperty(m)){p[m]=n[m];delete n[m]}}p._bindRoutes();p.setup.apply(p,arguments)},setup:function(){},_routeToRegExp:function(m){m=m.replace(d,"\\$&").replace(f,"(?:$1)?").replace(c,function(o,n){return n?o:"([^/?]+)"}).replace(i,"([^?]*?)");return new RegExp("^"+m+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(m,n){var o=m.exec(n).slice(1);return o.map(function(q,p){if(p===o.length-1){return q||null}return q?decodeURIComponent(q):null})},_bindRoutes:function(){var o=this,n,m;if(!o.routes){return}o.routes=e(o,"routes");m=Object.keys(o.routes);while((n=m.pop())!=null){o.route(n,o.routes[n])}},execute:function(n,m){if(n){n.apply(this,m)}},navigate:function(n,m){this.History.navigate(n,m);return this},route:function(n,o,p){var m=this;if(!g.is(n,"regexp")){n=this._routeToRegExp(n)}if(g.is(o,"function")){p=o;o=""}if(!p){p=m[o]}m.History.route(n,function(r){var q=m._extractParameters(n,r);m.execute(p,q);m.dispatchEvent.apply(m,["onRoute:"+o].concat(q));m.dispatchEvent("onRoute",o,q);m.History.dispatchEvent("onRoute",m,o,q)});return m}});return b});define("DS/WebAppsFoundations/Views/CollectionView",["DS/WebAppsFoundations/Views/Plugins/Set","UWA/Class/View","UWA/Core"],function(b,d,c){var a;a=d.extend({_sort:true,_initVisibleItems:function(){this.visibleItems=[]},_initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment();this._bufferedChildren=[]},_initChildViewsStorage:function(){var g,e,f;g=this;e={};f={onAdd:this._onChildViewsAdd,onRemove:this._onChildViewsRemove,onReset:this._onChildViewsReset};if(this._sort){f.onSort=this._onChildViewsSort;e.comparator=function(h){return h===g._emptyView?-1:g.collection.indexOf(h.model)}}this.children=new b(undefined,e);this.listenTo(this.children,f);return this},_initialEvents:function(){var e;e={onAdd:this._onCollectionAdd,onRemove:this._onCollectionRemove,onReset:this._onCollectionReset};if(this.collection){this.listenTo(this.collection,e)}},_toggleElement:function(e,f){return f?e.show():e.hide()},_updateEmptyViewVisibility:function(){var f,e;f=this.visibleItems.length===0;e=this._emptyView;if(e&&f!==this._isShowingEmptyView){this._isShowingEmptyView=f;this.dispatchEvent("onBeforeToggleEmpty",[e,f]);this._toggleElement(e.container,f);this.dispatchEvent("onToggleEmpty",[e,f])}return e},_filterCallback:function(e,f){this._toggleElement(e.container,f)},_filterItemView:function(f){var e,g;e=f.model;g=true;if(this._filterer!==undefined){if(typeof this._filterer==="function"){g=this._filterer(e)}this._filterCallback(f,g)}this._updateVisibleItems(e,g);return g},_updateVisibleItems:function(g,e){var i,f,h;h=this.visibleItems.indexOf(g);i=(h!==-1);if(e===i){f=false}else{if(i){this.visibleItems.splice(h,1)}else{this.visibleItems.push(g)}f=true}return f},_insertAfter:function(e){this.container.appendChild(e.container)},_insertBefore:function(h,g){var f,e;e=this._sort&&(g<this.children.size()-1);if(e){f=this.children.at(g+1)}if(f){this.container.insertBefore(h.container,f.container);return true}return false},_attachBuffer:function(e){this.container.appendChild(e)},_attachHtml:function(f,e){if(this.isBuffering){this.elBuffer.appendChild(f.container);this._bufferedChildren.push(f)}else{if(!this._insertBefore(f,e)){this._insertAfter(f)}}},_buildItemView:function(f){var g,e;g=this.getItemView(f);e=this.buildItemView(f,g);return e},_removeChildView:function(e){this._updateVisibleItems(e.model,false);e.destroy();if(this.isBuffering&&e.container.parentNode===this.elBuffer){this.elBuffer.removeChild(e.container)}this.stopListening(e)},_onCollectionAdd:function(f){var e;e=this._buildItemView(f);this._filterItemView(e);this._updateEmptyViewVisibility();this.children.add(e)},_onCollectionRemove:function(f){var e;e=this.findChildViewByModel(f);this.children.remove(e)},_onCollectionReset:function(){this.children.reset(this._emptyView?[this._emptyView]:[]);this.render()},_onChildViewsAdd:function(e){e.render();this._attachHtml(e,this.children.indexOf(e))},_onChildViewsRemove:function(e){this._removeChildView(e);this._updateEmptyViewVisibility()},_onChildViewsReset:function(f,e){var g;g=e.previousItems;this.container.empty();if(!f.isEmpty()){this.startBuffering();f.forEach(function(h,i){if(g.indexOf(h)===-1){h.render()}this._attachHtml(h,i)},this);this.endBuffering()}e.previousItems.forEach(function(h){if(!f.contains(h)){this._removeChildView(h)}},this);this._updateEmptyViewVisibility()},_onChildViewsSort:function(f,e){if(!e.add){this.render()}},init:function(e){e=c.clone(e||{},false);["filterer","sort","ItemView","emptyView"].forEach(function(f){if(e.hasOwnProperty(f)){this["_"+f]=e[f]}},this);this._initVisibleItems();this._initChildViewsStorage();this._initRenderBuffer();return this._parent.apply(this,arguments)},setup:function(){this.addEventOnce("onRender",this._initialEvents)},startBuffering:function(){this._initRenderBuffer();this.isBuffering=true},endBuffering:function(){this.isBuffering=false;this._attachBuffer(this.elBuffer);this._initRenderBuffer()},findChildViewByModel:function(e){return this.children.findWhere({model:e})},getItemView:function(){var e;e=this._ItemView;if(!e){throw new Error('A "ItemView" must be specified')}return e},buildItemView:function(e,f){return new f({model:e})},render:function(){var e,f;e=[];this.dispatchEvent("onBeforeRender");if(this._emptyView){e.push(this._emptyView)}if(c.is(this.collection)){this.collection.forEach(function(g){f=this.findChildViewByModel(g);if(!f){f=this._buildItemView(g);this._filterItemView(f)}e.push(f)},this)}this._updateEmptyViewVisibility();this.children.reset(e);this.dispatchEvent("onRender");return this},filter:function(e,g){var f;if(typeof e==="function"||e===null){this._filterer=e}if(typeof g==="function"){this._filterCallback=g}if(this.children.isEmpty()){return}this.collection.forEach(function(h){f=this.findChildViewByModel(h);if(c.is(f)){this._filterItemView(f)}},this);this._updateEmptyViewVisibility();if(this._filterer===null){delete this._filterer}},destroy:function(){this.children.reset();this.stopListening();return this._parent.apply(this,arguments)}});return a});define("DS/WebAppsFoundations/Views/Plugins/Set",["UWA/Core","UWA/Array","UWA/Class","UWA/Controls/Abstract","UWA/Class/Listener","UWA/Class/Events"],function(d,b,a,c,h,i){var e={add:true,remove:true},f={add:true,remove:false};var g=a.extend(i,h,{init:function(j,k){var l=d.merge({},k);if(l.comparator!==undefined){this.comparator=l.comparator}this._reset();this._itemListener=function(o,n,p,m){return this._onItemEvent(o,n,p,m)};this.setup(j,l);if(j){this.reset(j,d.extend({silent:true},l))}},clone:function(){return new this.constructor(this._items)},setup:function(){return},_items:null,_requiredIndexAttr:"cid",_optionalIndexAttr:"id",_index:null,_customKeys:null,comparator:null,length:null,_lookupIterator:function(j){return d.is(j,"function")?j:function(k){return k[j]}},_stackItem:function(l,k,j){if(!l[k]){throw new Error('Item has no "'+k+'" property.')}j.push({key:l[k],item:l});return j},add:function(j,k){return this.set(j,d.extend(d.merge({},k),f))},addMap:function(j,k){return this.add(j,d.merge({hashMap:true},k))},push:function(j,k){return this.add(j,d.merge({at:this.length},k))},unshift:function(j,k){return this.add(j,d.merge({at:0},k))},remove:function(x,A){var v,k=this._index,p=this._customKeys,q,m,z,u,w,s,r,t,y,l,o,n;m=d.merge({},A);t=!Array.isArray(x);y=t?[x]:d.clone(x,false);o=this._requiredIndexAttr;n=this._optionalIndexAttr;for(u=0,w=y.length;u<w;u++){z=y[u]=this.get(y[u]);if(z){if(n&&z[n]){delete k[z[n]]}l=z[o];if(l){delete k[l];q=p[l];if(q){for(s=0,r=q.length;s<r;s++){delete k[q[s]]}delete p[l]}}v=this.indexOf(z);this._items.splice(v,1);this.length--;if(!m.silent){m.index=v;z.dispatchEvent("onRemove",[z,this,m])}this._removeReference(z)}}return t?y[0]:y},pop:function(j){var k;k=this.at(this.length-1);this.remove(k,j);return k},shift:function(j){var k;k=this.at(0);this.remove(k,j);return k},sort:function(j){if(!d.is(j)){j={}}if(!this.comparator){throw new Error("Cannot sort a set without a comparator")}if(d.is(this.comparator,"string")||this.comparator.length===1){this._items=this.sortBy(this.comparator,this)}else{this._items.sort(this.comparator.bind(this))}if(!j.silent){this.dispatchEvent("onSort",[this,j])}return this},set:function(C,q){var A,n,Q,G,M,B,m,R,J,L,H,S,O=null,F=null,D,N=null,t,y,w,z,s=this,E=null,u=[],P=C,r={},K=s._customKeys,v,I=s._index,k=s._items,j,x=this._requiredIndexAttr,p=this._optionalIndexAttr;m=d.merge(d.merge({},q),e);z=d.typeOf(C);if(z==="object"&&m.hashMap!==true){C=[C];z="array"}if(z==="array"){for(L=0,H=C.length;L<H;L++){O=C[L];this._stackItem(O,x,u)}}else{if(z==="object"&&m.hashMap===true){for(E in C){if(C.hasOwnProperty(E)){O=C[E];this._stackItem(O,x,u);r[O[x]]=E}}}}A=m.at;n=s.comparator&&(!d.is(A))&&m.sort!==false;Q=[];G=[];M={};B=m.add;R=m.remove;J=!n&&B&&R?[]:false;for(L=0,H=u.length;L<H;L++){S=u[L].key;O=u[L].item;D=s.get(S);if(D){if(R){M[D[x]]=true}}else{if(B){if(O){Q.push(O);O.addEvent("onAnyEvent",s._itemListener,s);I[S]=O;j=O[x];v=r[j];if(v){I[v]=O;if(!K[j]){K[j]=[v]}else{K[j].push(v)}}if(p&&d.is(O[p])){I[O[p]]=O}}}}if(J&&(D||O)){J.push(D||O)}}if(R){for(L=0,H=s.length;L<H;++L){O=k[L];if(!M[O[x]]){G.push(O)}}if(G.length){s.remove(G,m)}}if(Q.length||(J&&J.length)){if(n){N=true}s.length+=Q.length;if(d.is(A)){for(y=0,w=Q.length;y<w;y++){k.splice(A+y,0,Q[y])}}else{if(J){k.length=0}t=J||Q;for(y=0,w=t.length;y<w;y++){k.push(t[y])}}}if(N){s.sort({silent:true})}if(!m.silent){for(L=0,H=Q.length;L<H;L++){O=Q[L];O.dispatchEvent("onAdd",[O,s,m])}if(N||(J&&J.length)){s.dispatchEvent("onSort",[s,m])}}C=P;return C},reset:function(k,l){var o,n,j,p,m;m=d.merge({},l);p=this._items;for(n=0,j=p.length;n<j;n++){o=p[n];this._removeReference(o)}m.previousItems=this._items;this._reset();k=this.add(k,d.extend({silent:true},m));if(!m.silent){this.dispatchEvent("onReset",[this,m])}return k},get:function(j){if(d.is(j)){return this._index[j[this._optionalIndexAttr]]||this._index[j[this._requiredIndexAttr]]||this._index[j]}return undefined},at:function(j){return this._items[j]},first:function(j){if(d.is(j)){return this._items.slice(0,j)}return this._items[0]},last:function(j){if(d.is(j)){return this._items.slice(Math.max(this._items.length-j,0))}return this._items[this._items.length-1]},toArray:function(){return this.slice()},slice:function(k,j){return this._items.slice(k,j)},rest:function(j){return this._items.slice(((!d.is(j))?1:j))},initial:function(j){return this._items.slice(0,this._items.length-((!d.is(j))?1:j))},without:function(){var j;j=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments));return this._items.filter(function(k){return(j.indexOf(k))===-1})},indexOf:function(j,k){return this._items.indexOf(j,k)},lastIndexOf:function(j,k){return this._items.lastIndexOf(j,k)},contains:function(j){return this.indexOf(j)!==-1},size:function(){return this._items.length},isEmpty:function(){return this._items.length===0},pluck:function(j){return this._items.map(function(k){return k[j]})},shuffle:function(){var k,j;j=[];this.forEach(function(m,l){k=Math.floor(Math.random()*(l+1));j[l]=j[k];j[k]=m});return j},where:function(j,k){if(!d.is(j)){return(k?undefined:[])}return this[k?"find":"filter"](function(m){var l=null;for(l in j){if(j[l]!==m[l]){return false}}return true})},findWhere:function(j){return this.where(j,true)},invoke:function(){return b.invoke.apply(null,[this._items].concat([].slice.apply(arguments)))},forEach:function(k,j){return this._items.forEach(k,j)},map:function(k,j){return this._items.map(k,j)},every:function(k,j){return this._items.every(k,j)},some:function(k,j){return this._items.some(k,j)},sortBy:function(l,j){var m,k;m=this._lookupIterator(l);k=this._items.map(function(o,n,p){return{item:o,index:n,criteria:m.call(j,o,n,p)}});k.sort(function(q,p){var o,n;o=q.criteria;n=p.criteria;if(o!==n){if(o>n||o===undefined){return 1}if(o<n||n===undefined){return -1}}if(q.index<p.index){return -1}return 1});return k.map(function(n){return n.item})},groupBy:function(n,l){var m,j,k=this._items;m=this._lookupIterator(n);j={};this.forEach(function(q,o){var p=m.call(l,q,o,k);if(!d.owns(j,p)){j[p]=[]}j[p].push(q)});return j},countBy:function(n,l){var m,j,k=this._items;m=this._lookupIterator(n);j={};this.forEach(function(q,o){var p=m.call(l,q,o,k);if(!d.owns(j,p)){j[p]=0}j[p]++});return j},find:function(l,k){var j=null;this.some(function(o,n,m){if(l.call(k,o,n,m)){j=o;return true}});return j},filter:function(k,j){return this._items.filter(k,j)},reject:function(k,j){return this.filter(function(n,l,m){return !k(n,l,m)},j)},reduce:function(m,j,l){var k=m;if(l){k=k.bind(l)}if(arguments.length>1){return this._items.reduce(k,j)}return this._items.reduce(k)},reduceRight:function(m,j,l){var k=m;if(l){k=k.bind(l)}if(arguments.length>1){return this._items.reduceRight(k,j)}return this._items.reduceRight(k)},max:function(l,k){var j,m;if(!l||this.isEmpty()){return undefined}m=this._lookupIterator(l);j={computed:-Infinity,item:undefined};this.forEach(function(q,o,n){var p;p=m.call(k,q,o,n);if(p>=j.computed){j={item:q,computed:p};return j}});return j.item},min:function(l,k){var j,m;if(!l||this.isEmpty()){return undefined}m=this._lookupIterator(l);j={computed:Infinity,item:undefined};this.forEach(function(q,o,n){var p;p=m.call(k,q,o,n);if(p<j.computed){j={item:q,computed:p};return j}});return j.item},_reset:function(){this.length=0;this._items=[];this._index={};this._customKeys={};return this._index},_removeReference:function(j){if(this===j.set){delete j.set}return j.removeEvent("onAnyEvent",this._itemListener,this)},_onItemEvent:function(l,k,m,j){if((l==="onAdd"||l==="onRemove")&&m!==this){return}if(l==="onDestroy"){this.remove(k,j)}return this.dispatchEvent(l,[k,m,j])}});return g});define("DS/WebAppsFoundations/Collections/PageableCollection",["UWA/Class/Collection","UWA/Class/Options","UWA/Core"],function(l,e,j){var k=/[\s'"]/g;var i=/[<>\s'"]/g;var d=function(p,o){if(!(j.typeOf(p)==="number")||isNaN(p)||!isFinite(p)||~~p!==p){throw new TypeError("`"+o+"` must be a finite integer")}return p};var m=function(q){if(!j.is(q,"object")){return[]}var p=[];for(var o in q){if(q.hasOwnProperty(o)){p.push(o)}}return p};var f=function(q){var r={},o=Array.prototype;var p=o.concat.apply(o,o.slice.call(arguments,1));p.forEach(function(s){if(s in q){r[s]=q[s]}});return r};var b=function(r){var s=m(r);var p=s.length;var q=new Array(p);for(var o=0;o<p;o++){q[o]=[s[o],r[s[o]]]}return q};var c=function(r){var s={},o=Array.prototype;var q=o.concat.apply(o,o.slice.call(arguments,1));for(var p in r){if(q.indexOf(p)===-1){s[p]=r[p]}}return s};var n=function(o,q){if(o==null){return void 0}var p=o[q];return j.is(p,"function")?p.call(o):p};var h=function(x){var s,t,z,w,r={},p,o=decodeURIComponent,y=x.split("&");for(var u=0,q=y.length;u<q;u++){p=y[u];s=p.split("=");t=s[0];t=o(t);z=s[1]||true;z=o(z);w=r[t];if(Array.isArray(w)){w.push(z)}else{if(w){r[t]=[w,z]}else{r[t]=z}}}return r};var g=l.extend(e,{defaultOptions:{stateParseMode:"response",state:{firstPage:1,lastPage:null,currentPage:1,pageSize:25,totalPages:null,totalRecords:null,sortKey:null,order:-1},queryParams:{currentPage:"page",pageSize:"per_page",totalPages:"total_pages",totalRecords:"total_entries",sortKey:"sort_by",order:"order",directions:{"-1":"asc","1":"desc"}}},init:function(p,q){this.setOptions(q);var s=this,t=s.state=j.clone(s.options.state),r=s.queryParams=j.clone(s.options.queryParams),o=s.links={};t.currentPage=t.currentPage==null?t.firstPage:t.currentPage;s._checkState(s.state);s.initState=j.clone(s.state);s._parent(p,q)},_computeTotalPages:function(p,o){return Math.ceil(p/o)},_checkState:function(r){var t=r.totalRecords,o=r.pageSize,p=r.currentPage,s=r.firstPage,q=r.totalPages;if(t!=null&&o!=null&&p!=null&&s!=null){t=d(t,"totalRecords");o=d(o,"pageSize");p=d(p,"currentPage");s=d(s,"firstPage");if(o<1){throw new RangeError("`pageSize` must be >= 1")}q=r.totalPages=this._computeTotalPages(t,o);if(s<0||s>1){throw new RangeError("`firstPage must be 0 or 1`")}r.lastPage=s===0?Math.max(0,q-1):q||s;if(p<s||(q>0&&(s?p>q:p>=q))){throw new RangeError("`currentPage` must be firstPage <= currentPage "+(s?"<=":"<")+" totalPages if "+s+"-based. Got "+p+".")}}return r},hasPreviousPage:function(){var p=this,q=p.state,o=q.currentPage;return o>q.firstPage},hasNextPage:function(){var p=this,q=p.state,o=q.currentPage;return o<q.lastPage},getFirstPage:function(o){return this.getPage("first",o)},getPreviousPage:function(o){return this.getPage("prev",o)},getNextPage:function(o){return this.getPage("next",o)},getLastPage:function(o){return this.getPage("last",o)},getPage:function(p,o){var r=this,u=r.state,q=u.currentPage,v=u.firstPage,t=u.lastPage,s=p;o=o||{};switch(p){case"first":s=v;break;case"prev":s=q-1;break;case"next":s=q+1;break;case"last":s=t;break;default:s=d(p,"index")}r.state=r._checkState(j.extend(u,{currentPage:s}));o.from=q;o.to=s;return r.fetch(o)},getPageByOffset:function(r,o){var p=this,q;if(r<0){throw new RangeError("`offset must be > 0`")}r=d(r);q=Math.floor(r/p.state.pageSize);if(p.state.firstPage!==0){q++}if(q>p.state.lastPage){q=p.state.lastPage}return p.getPage(q,o)},parse:function(r,o){var p=this,q=null;q=p.parseState(r,j.clone(p.options.queryParams),j.clone(p.state),o);if(q){p.state=p._checkState(j.extend(p.state,q))}return p.parseRecords(r,o)},parseState:function(u,q,s,p){var r=this,t=null,o=p&&(p.stateParseMode||r.options.stateParseMode);switch(o){case"headers":t=r.parseHeadersForStateUpdate(u,q,s,p);break;case"response":t=r.parseResponseForStateUpdate(u,q,s,p);break;default:throw new Error("parseState function must the response for state updates, either in the headers or in the response.")}return t},parseResponseForStateUpdate:function(u,r,s,p){if(u&&u.length===2&&j.is(u[0],"object")&&j.is(u[1],"array")){var t=j.clone(s);var o=u[0];b(c(r,"directions")).forEach(function(y){var x=y[0],w=y[1];var z=o[w];if(UWA.is(z)){t[x]=o[w]}});if(o.order){for(var q in r.directions){if(r.directions[q]===o.order){t.order=q;break}}}return t}else{throw new Error("Server data structure does not match the expected one. Please override the function.")}},parseHeadersForStateUpdate:function(r,x,o,z){var v=this,y=v.links,q,u,w,s={};if(z.request){var p=this.parseLinks(r,z);if(p.first){y[v.state.firstPage]=p.first}if(p.prev){y[currentPage-1]=p.prev}if(p.next){y[currentPage+1]=p.next}if(p.last){y[v.state.totalPages]=p.last}if(j.is(z.request.getAllResponseHeaders,"function")){q=z.request.getAllResponseHeaders().split("\n");q.pop()}else{if(z.responseHeaders){q=z.responseHeaders}else{q={}}}q=c(q,p);for(var t in q){if(q.hasOwnProperty(t)){u=t.split(":");if(u.length===2){w=u[0];if(o.indexOf(w)!==-1){o[w]=u[1]}}}}return s}},parseRecords:function(o){if(o&&o.length===2&&j.is(o[0],"object")&&Array.isArray(o[1])){return o[1]}else{return o}},parseLinks:function(s,r){var q={},o=null,p;if(j.is(r.request.getResponseHeader,"function")){o=r.request.getResponseHeader("Link")}else{if(r.responseHeaders){o=r.responseHeaders.Link}}if(o){p=["first","prev","next","last"];o.split(",").forEach(function(u){var v=u.split(";"),t=v[0].replace(i,""),w=v.slice(1);w.forEach(function(z){var A=z.split("="),x=A[0].replace(k,""),y=A[1].replace(k,"");if(x==="rel"&&_contains(p,y)){q[y]=t}})})}return q},fetch:function(C){var x=this,p=x._checkState(x.state),u,q,D,B={};C=C||{};if(!C.url){C.url=x.links[p.currentPage]}u=C.data||{};if(!UWA.is(u,"object")&&UWA.is(u,"string")&&!j.Json.isJson(u)){throw new Error("options.data must be an object or a valid Json string")}if(j.Json.isJson(u)){u=j.Json.decode(u)}q=n(C,"url")||n(this,"url")||"";D=q.indexOf("?");if(D!==-1){j.extend(u,h(q.slice(D+1)));q=q.slice(0,D)}C.url=q;C.data=u;B=c(f(this.queryParams,m(a.defaultOptions.queryParams)),"directions");var w,t,s,A,z=b(B);for(w=0;w<z.length;w++){t=z[w],s=t[0],A=t[1];A=j.is(A,"function")?A.call(this):A;if(p[s]!=null&&A!=null){u[A]=p[s]}}if(p.sortKey&&p.order){var r=j.is(B.order,"function")?B.order.call(this):B.order;u[r]=this.queryParams.directions[p.order+""]}else{if(!p.sortKey){delete u[B.order]}}var y=b(c(this.queryParams,m(a.defaultOptions.queryParams)));for(w=0;w<y.length;w++){t=y[w];A=t[1];A=j.is(A,"function")?A.call(this):A;if(A!=null){u[t[0]]=A}}if(C.method&&C.method==="POST"){C.data=j.Json.encode(u)}x._parent(C)},setPageSize:function(o,p){o=d(o,"pageSize");p=p||{first:false};var s=this.state;var r=this._computeTotalPages(s.totalRecords,o);var q=r?Math.max(s.firstPage,Math.floor(r*s.currentPage/s.totalPages)):s.firstPage;s=this.state=this._checkState(j.extend(s,{pageSize:o,currentPage:p.first?s.firstPage:q,totalPages:r}));return this.getPage(s.currentPage,c(p,["first"]))}});var a=g.prototype;return g});define("DS/WebAppsFoundations/AbstractHistory",["UWA/Core","UWA/Class","UWA/Class/Events","UWA/Class/Listener","UWA/String"],function(f,c,a,e){var d,b;b=/^\/+|\/+$/g;d=c.extend(a,e,{started:false,init:function(){this.handlers=[];return this},_loadUrl:function(g){g=this.fragment=this.getFragment(g);return this.handlers.some(function(h){if(h.route.test(g)){h.callback(g);return true}})},getFragment:function(g){if(g===undefined){g=""}return g.replace(b,"")},route:function(g,h){this.handlers.unshift({route:g,callback:h})},navigate:function(h,g){if(!this.started){return false}if(!g||g===true){g={trigger:!!g}}h=this.getFragment(h||"");if(this.fragment===h){return}this.fragment=h;if(g.trigger){return this._loadUrl(h)}},start:function(g){var h=this;g=g||{};if(h.started){throw new Error("History has already been started")}h.root=g.root||"/";h.root=("/"+h.root+"/").replace(b,"/");h.started=true;if(!g.silent){h._loadUrl()}},stop:function(){this.started=false}});return d});