define("DS/WildcardSearchComponent/dsWebWorker",[],function(){var WorkerClass=function(workerScriptObj){if(typeof(Worker)!=="undefined"){var blob=new Blob([workerScriptObj.textContent],{type:"text/javascript"});if(window.URL){this.worker=new Worker(window.URL.createObjectURL(blob));this.worker.listenerCallbackList=[]}this.status=true}else{eval(workerScriptObj.textContent);this.listenerCallbackList=[];this.status=false;this.postMessage=function(data){for(var i=0;i<this.listenerCallbackList.length;i++){var callbackToFire=this.listenerCallbackList[i];callbackToFire(data)}}}return this};WorkerClass.prototype={dispatchMessage:function(message){if(this.status===true){this.worker.postMessage(JSON.stringify(message))}else{if(this.onmessage){var eventDup={};eventDup.data=message;this.onmessage(eventDup)}}},registerListener:function(callback){if(this.status===true){this.worker.listenerCallbackList.push(callback);if(this.worker.listenerCallbackList.length===1){this.worker.onmessage=function(event){for(var i=0;i<this.listenerCallbackList.length;i++){var callbackToFire=this.listenerCallbackList[i];callbackToFire(event.data)}}}}else{this.listenerCallbackList.push(callback)}},destroyWorker:function(){if(this.status===true){this.worker.terminate()}}};return WorkerClass});define("DS/WildcardSearchComponent/dsWebWorkerJob",[],function(){var a={};var b=function(d,h){if(d.jobName&&!a[d.jobName]){var e="this.onmessage ="+d.onmessage.toString();var g=document.createElement("script");var c=document.createTextNode(e);g.appendChild(c);g.setAttribute("id","workerID");g.setAttribute("type","javascript/ds-script");var f=h?h:document.body;f.appendChild(g);a[d.jobName]=g;return g}else{return a[d.jobName]}};return b});define("DS/WildcardSearchComponent/WildcardSearchComponent",["DS/WildcardSearchComponent/dsWebWorker","DS/WildcardSearchComponent/dsWebWorkerJob"],function(e,d){function c(k,l){if(!l||!l.normal||!l.lower){if(!l){l={}}if(!l.normal){l.normal=""}if(!l.lower){l.lower=""}}var j=k;var f="";if((j.indexOf('"')!==-1)&&((j.indexOf('"')==0)||((j.indexOf('"')!==0)&&(j.indexOf('"')-j.indexOf('\\"')!==1)))){if(j.indexOf('"')>0){f=j.substr(0,j.indexOf('"'));f=a(f,false);l.normal=l.normal+f;l.lower=l.lower+f.toLowerCase();j=j.substr(j.indexOf('"'))}var g=0;for(var h=1;h<j.length;h++){if(j[h+1]=='"'&&j[h]!=="\\"){g=h;h=j.length}}if(g!==0){f=j.substr(1,g);f=a(f,true);l.normal=l.normal+f;l.lower=l.lower+f;j=j.substr(g+2)}else{f=j;f=a(f,false);l.normal=l.normal+f;l.lower=l.lower+f.toLowerCase();j=""}}else{if((j.indexOf('"')!==-1)&&(j.indexOf('"')!==0)&&(j.indexOf('"')-j.indexOf('\\"')==1)){f=j.substr(0,j.indexOf('"')+1);f=a(f,false);l.normal=l.normal+f;l.lower=l.lower+f.toLowerCase();j=j.substr(j.indexOf('"')+1)}else{f=j;f=a(f,false);l.normal=l.normal+f;l.lower=l.lower+f.toLowerCase();j=""}}if(j.length>0&&j!=='"'){return c(j,l)}else{return l}}function a(j,k){var f="";var h=/[\;\:\.\,\/\|\@\!\?\%\#\+\=\-\^\~\$\&\'\(\)\[\]\{\}\*]/;j=j.replace(/\\{2}/g," ");j=j.replace(/\s{2,}/g," ");if(k){for(var g=0;g<j.length;g++){if(h.test(j[g])){f=f+"\\"+j[g]}else{if(j[g]=="\\"){if(j[g+1]=='"'){f=f+j[g]}else{f=f+"\\"+j[g]}}else{if(j[g]==" "){f=f+"\\s"}else{f=f+j[g]}}}}}else{for(var g=0;g<j.length;g++){if(h.test(j[g])||(j[g]==" ")){if(j[g-1]!=="\\"){if(j[g]=="*"){f=f+".*?"}else{f=f+"|"}}else{f=f+j[g]}}else{if(j[g]=="\\"){if(h.test(j[g+1])||j[g+1]=='"'){f=f+j[g]}else{f=f+"|"}}else{f=f+j[g]}}}}f=f.replace(/\|{2,}/g," ");return f}var b=function(){};b.prototype.search=function(j,k,l,m){if(this.searchWorker&&this.searchWorker!==null){this.searchWorker.destroyWorker()}this.searchWorker=null;var h="ENOXSearch";var i=function(u){var z=JSON.parse(u.data);var w=z.dataArray;var x=[];var t=z.keysToExclude?z.keysToExclude:[];var s="";var v=new RegExp(z.query.normal);var p=new RegExp(z.query.lower);for(var r=0;r<w.length;r++){var y=Object.keys(w[r]);for(var q=0;q<y.length;q++){if(t.indexOf(y[q])!=-1){continue}if(typeof(w[r][y[q]])==="string"){if(w[r][y[q]]){s=w[r][y[q]]}if((s.search(v)!==-1)||(s.toLowerCase().search(p)!==-1)){x.push(w[r]);break}}}}this.postMessage(x)};var o={onmessage:i,jobName:h};var f=d(o);if(this.searchWorker!==null){this.searchWorker.destroyWorker()}this.searchWorker=new e(f);this.searchWorker.registerListener(l);var n=[];n=j?c(j.trim()):"";var g={dataArray:k,query:n,keysToExclude:m};this.searchWorker.dispatchMessage(g)};return b});