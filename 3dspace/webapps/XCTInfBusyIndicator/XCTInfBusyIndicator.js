define("DS/XCTInfBusyIndicator/XCTInfBusyIndicator",["UWA/Core","UWA/Class","UWA/Controls/Abstract","DS/CoreEvents/Events","DS/UIKIT/Spinner"],function(f,c,e,b,a){var d="busy-indicator-hidden";return c.singleton({init:function(g){this._parent(g.parent);this._buildSpinner(g.parent);this.actions=[];b.subscribe({event:g.addActionEvent},function(h){this.addAction(h)}.bind(this));b.subscribe({event:g.updateActionEvent},this.updateAction.bind(this));b.subscribe({event:g.removeActionEvent},this.removeAction.bind(this))},_buildSpinner:function(g){this.indicator=new f.Element("div",{Class:"busy-indicator-overlay "+d}).inject(g);this.container=new f.Element("div",{Class:"busy-indicator-container "}).inject(this.indicator);this.spinner=new a({visible:true,animate:true,spin:true}).inject(this.container);this.messageDiv=new f.Element("div",{Class:"busy-indicator-message"}).inject(this.container)},addAction:function(g){this.actions.push(g);this._updateMessages()},removeAction:function(h){var g=this.actions.findIndex(function(i){return i.id===h});this.actions.splice(g,1);this._updateMessages()},updateAction:function(h){var g=this.actions.findIndex(function(i){return i.id===h.id});this.actions[g]=h;this._updateMessages()},_updateMessages:function(){this.messageDiv.empty();this.actions.forEach(function(g){new f.Element("div",{html:g.message}).inject(this.messageDiv)},this);if(this.actions.length){this._showIndicator()}else{this._hideIndicator()}},_showIndicator:function(){this.indicator.classList.remove(d)},_hideIndicator:function(){this.indicator.classList.add(d)}})});