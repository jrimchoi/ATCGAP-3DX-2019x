define("DS/XCTInfManagers/XCTInfManagers",[],function(){});define("DS/XCTInfManagers/XCTInfLoaderManager",["UWA/Core","UWA/Class/Model","DS/WebApplicationBase/W3AAManager","DS/XCTInfUtilsWeb/XCTLogger"],function(e,b,d,a){var c=d.extend({init:function(){},postInitialize:function(){this.factory=this._experienceBase.Factory},readString:function(k,j,f){var g=this;var h;try{h=JSON.parse(k)}catch(i){a.error("Invalid JSON");if(e.is(f)){f("Invalid JSON");return}}g.readJSON(h,j,f)},readJSON:function(g,h,f){if(e.is(h)){h(g)}else{a.error("Invalid JSON");if(e.is(f)){f("Invalid JSON")}}},readJSONFile:function(i,j,g){var h=this;if(i.name.endsWith(".json")){var f=new FileReader();f.onloadend=function(k){h.readString(k.target.result,j,g)};f.readAsText(i)}else{e.error("File must be a JSON")}},read3DXContentCSI:function(g,h,f){f("Loading experience currently not supported")},read3DXContent:function(g,h,f){a.log(g,h,f);f("The dependencies to CAT3DExpModelerJavaScript and StudioModelCSIJavaScript had to be removed.")},GetType:function(){return"LoaderManager"}});return c});define("DS/XCTInfManagers/XCTInfCommandManager",["UWA/Core","UWA/Class/Promise","DS/CoreEvents/Events","DS/WebApplicationBase/W3AAManager","DS/ApplicationFrame/CommandsManager","DS/XCTInfUtilsWeb/XCTLogger"],function(g,e,c,f,b,a){var d=f.extend({initialize:function(){a.log("Init "+this.GetType());this._parent()},postInitialize:function(){a.log("Postinit "+this.GetType());this._parent()},getCommand:function(j,i){var h=b.getCommands(j);return h[i]},executeCommand:function(j,i,h){a.warn("Deprecated. Use XCTInfCommandManager.beginCommand instead.");var k=this.beginAndEndCommand(j,i,h);return k},disableCommand:function(i,h){var j=this.getCommand(i,h);j.disable()},enableCommand:function(i,h){var j=this.getCommand(i,h);j.enable()},enableAllCommands:function(i){var h=b.getCommands(i);Object.values(h).forEach(function(j){j.enable()})},beginCommand:function(j,i,h){h=g.extend({},h,true);var k=this.getCommand(j,i);a.log("XCTInfCommandManager.beginCommand",{context:j,commandName:i,command:k,options:h});if(k.onEnd){this[i+"Token"]=k.onEnd(function(){c.unsubscribe(this[i+"Token"]);delete this[i+"Token"];if(h&&h.onEnd){h.onEnd(k)}}.bind(this))}k._experienceBase=this._experienceBase;k.appOptions=h;k.begin();return k},beginAndEndCommand:function(j,i,h){var k=this.beginCommand(j,i,h);k.end();return k},GetType:function(){return"CommandManager"}});return d});define("DS/XCTInfManagers/XCTInfDragAndDropManager",["UWA/Core","DS/WebApplicationBase/W3AAManager","DS/DataDragAndDrop/DataDragAndDrop","DS/XCTInfUtilsWeb/XCTLogger"],function(e,d,c,b){var a=d.extend({initialize:function(){this.dropZones=[]},postInitialize:function(){this.specializationDragRunning=false;this.specializationDragDropZone=null},register:function(i,h,g){var f=this;i._callbacks={enter:h.enter,leave:h.leave,over:h.over,drop:h.drop,fail:h.fail};i._allowedTypes=h.allowedTypes;i._forbiddenTypes=h.forbiddenTypes;i._owner=g;f.dropZones.push(i);var j={enter:function(l,m){var k=f.dropZones.indexOf(l);if((k!==-1)&&(e.is(f.dropZones[k]._callbacks.enter))){m.origin=f.dragSource;f.dropZones[k]._callbacks.enter.call(f.dropZones[k]._owner,m)}},leave:function(l,m){var k=f.dropZones.indexOf(l);if((k!==-1)&&(e.is(f.dropZones[k]._callbacks.leave))){m.origin=f.dragSource;f.dropZones[k]._callbacks.leave.call(f.dropZones[k]._owner,m)}},over:function(l,m){var k=f.dropZones.indexOf(l);if((k!==-1)&&(e.is(f.dropZones[k]._callbacks.over))){m.origin=f.dragSource;f.dropZones[k]._callbacks.over.call(f.dropZones[k]._owner,m)}},drop:function(n,l,m){var k=f.dropZones.indexOf(l);if((k!==-1)&&(e.is(f.dropZones[k]._callbacks.drop))){m.origin=f.dragSource;f.getFromDataTransfer(m.dataTransfer,function(o){if(e.is(f.dropZones[k]._callbacks.drop)){if(f.canDrop(o,f.dropZones[k])){f.dropZones[k]._callbacks.drop.call(f.dropZones[k]._owner,m,o)}else{b.error("cannot drop");if(e.is(f.dropZones[k]._callbacks.fail)){f.dropZones[k]._callbacks.fail.call(f.dropZones[k]._owner,"cannot drop this kind of object")}}}},function(o){if(e.is(f.dropZones[k]._callbacks.fail)){f.dropZones[k]._callbacks.fail.call(f.dropZones[k]._owner,o)}})}if(f.specializationDragRunning&&f.specializationDragDropZone!==l){f.cancelDrag(f.specializationDragDropZone)}}};c.droppable(i,j)},unRegister:function(g){if(e.is(this[g])){c.clean(g);var f=this.dropZones.indexOf(g);this.dropZones.splice(f,1);g._owner=null;g._callbacks=null}},makeDraggable:function(f,g){c.draggable(f,{data:g,start:function(h){this.dragSource=h;h.addClassName("dragged")}.bind(this),stop:function(h){h.removeClassName("dragged");this.dragSource=undefined}.bind(this)})},canDrop:function(f,h){var g=true;if(e.is(h._allowedTypes)){g=false;for(var j=0;j<h._allowedTypes.length;j++){if(f.isKindOf&&f.isKindOf(h._allowedTypes[j])){g=true}}}if(g&&(e.is(h._forbiddenTypes))){for(var i=0;i<h._forbiddenTypes.length;i++){if(f.IsKindOf&&f.IsKindOf(h._forbiddenTypes[i])){g=false}}}return g},cancelDrag:function(f){this.cleanDropZone(f);this.specializationDragRunning=false;this.specializationDragDropZone=null},getFromFile:function(h,i,f){var g=this;if(h.name.endsWith(".json")){g._experienceBase.getManager("LoaderManager").readJSONFile(h,i,f)}else{b.error("unsuported format "+h.type);if(e.is(f)){f("unsuported format "+h.type)}}},getFromFiles:function(k,i,f){var g=this;for(var j=0;j<k.length;j++){var h=k[j];g.getFromFile(h,i,f)}},getFromPlainText:function(k,j,f){var g=this;var h;try{h=JSON.parse(k)}catch(i){b.error("Invalid JSON");if(e.is(f)){f();return}}if(h.protocol==="3DXContent"){g.getFrom3DXContent(h.version,h.source,h.data,j,f)}else{if(h.protocol==="STUContent"){g.getFromSTUContent(h.version,h.source,h.data,j,f)}else{b.error("unknown protocol "+h.protocol);if(e.is(f)){f()}}}},getFromDataTransfer:function(j,i,f){var g=this;g.getFromFiles(j.files,i,f);var h=j.getData("text/plain");if(h){g.getFromPlainText(h,i,f)}},getFrom3DXContent:function(i,h,k,f,l){var n=this;for(var g=0;g<k.items.length;g++){var m=k.items[g];if(m.objectType==="Stu3DExperience"){n._experienceBase.getManager("LoaderManager").read3DXContentCSI(m.objectId,f)}else{if(m.objectType==="VPMReference"){var j=n._experienceBase.Factory.BuildComponent("Model_VPMReference_Spec");j.QueryInterface("CATI3DExperienceObject").SetValueByName("_varName",m.displayName);j.QueryInterface("CATI3DExperienceObject").SetValueByName("_physID",m.objectId);j.QueryInterface("CATI3DExperienceObject").SetValueByName("_service",m.serviceId);j.QueryInterface("CATI3DExperienceObject").SetValueByName("_objectType",m.objectType);f(j)}else{if(e.is(l)){l()}}}}},getFromSTUContent:function(k,h,l,f){for(var g=0;g<l.items.length;g++){var n=l.items[g];var j;var m=n.sessionID;j=this._experienceBase.ComponentsMap.GetComponentFromID(m);if(e.is(j)&&e.is(f)){f(j)}else{var i=n.inlineContent;var o=this._experienceBase.getManager("LoaderManager");o.readJSON(i,f)}}},cleanDropZone:function(f){c.clean(f,"drop");f._evts={}},GetType:function(){return"DragAndDropManager"}});return a});define("DS/XCTInfManagers/XCTInfCEFManager",["UWA/Core","DS/WebApplicationBase/W3AAManager","DS/XCTInfUtilsWeb/XCTLogger"],function(d,c,a){var b=c.extend({initialize:function(){a.log("Init "+this.GetType());this._parent()},postInitialize:function(){a.log("Postinit "+this.GetType());this._parent();this.setupInterface()},setupInterface:function(){window.logInConsole=function(e){a.log(e)}},send:function(){if(window.dscef){window.dscef.sendString.apply(this,arguments)}},GetType:function(){return"CEFManager"}});return b});