define("DS/3DPlay2DExperience/Commands/CmdRealSize",["DS/ApplicationFrame/Command"],function(b){var a=b.extend({init:function(c){this._parent(c,{isAsynchronous:false})},execute:function(){}});return a});define("DS/3DPlay2DExperience/Commands/CmdScrollSheet",["DS/ApplicationFrame/Command"],function(a){var b=a.extend({init:function(c){this._parent(c,{isAsynchronous:false})},execute:function(){}});return b});define("DS/3DPlay2DExperience/Commands/CmdToggleView",["DS/ApplicationFrame/Command"],function(b){var a=b.extend({init:function(c){this._parent(c,{isAsynchronous:false})},execute:function(){this.frmWindow=this.getFrameWindow();this.viewer=this.frmWindow.getViewer();var c=this.frmWindow.experience.isMobile();if(c){if(this.viewer.currentView===1){this.viewer.showOnlyViewer()}else{this.viewer.showOnlyNavigationPanel()}}else{if(this.viewer.currentView===2){this.viewer.showOnlyViewer()}else{this.viewer.showBothViewerAndNavigationPanel()}}}});return a});define("DS/3DPlay2DExperience/DocumentLoader/DocumentLoader",["UWA/Class"],function(b){var a=b.extend({init:function(c){this.onLoadingStart=c.events.onLoadingStartCB;this.onLoadingProgress=c.events.onLoadingProgressCB;this.onLoadingEnd=c.events.onLoadingEndCB;this.onLoadingFail=c.events.onLoadingFailCB;this.isMobile=c.isMobile},load:function(c){},dispose:function(){},isMobile:function(){return this.isMobile}});return a});define("DS/3DPlay2DExperience/Commands/CmdFitWidth",["DS/ApplicationFrame/Command"],function(b){var a=b.extend({init:function(c){this._parent(c,{isAsynchronous:false})},execute:function(){}});return a});define("DS/3DPlay2DExperience/Commands/CmdDownloadPDF",["DS/ApplicationFrame/Command"],function(b){var a=b.extend({init:function(c){this._parent(c,{isAsynchronous:true})},execute:function(){var c=this.getFrameWindow();if(c){var d=c.experience;if(d&&d.args&&d.args.input&&d.args.input.asset&&d.args.input.asset.provider==="FILE"&&d.args.input.asset.type==="pdf"){window.open(d.args.input.asset.filename,"_blank")}}}});return a});define("DS/3DPlay2DExperience/DocumentViewer/LoadingQueue",[],function(){var a=function(){var e=20;var c=[];var b=false;var d=false;this.push=function(f){if(c.length<e){c.push(f)}};this.start=function(){var f=function(){if(d||c.length===0){b=false}else{if(c.length>0){var g=c.shift();g.load(f)}}};if(!b){b=true;f()}};this.isRunning=function(){return b};this.stop=function(){d=true};this.isFull=function(){return(c.length===e)};this.setMaxCapacity=function(f){if(f>0){e=f}}};return a});define("DS/3DPlay2DExperience/DocumentViewer/ViewSplitter",["UWA/Class","css!DS/UIKIT/UIKIT.css"],function(a,d){var e,b,c,g;var f=a.extend({init:function(h){e=new UWA.Element("div",{id:"_3dp-2d-view_splitter",styles:{width:"100%",height:"100%",display:"flex","flex-direction":"row","background-color":"#f9f9f9"}}).inject(h.container);b=new UWA.Element("div",{id:"_3dp-2d-view_splitter-left-col",styles:{flex:1}}).inject(e);g=new UWA.Element("div").inject(e);var i=new UWA.Element("span",{"class":"fonticon fonticon-drag-grip",styles:{top:"50%",position:"relative",cursor:"col-resize"}}).inject(g);c=new UWA.Element("div",{id:"_3dp-2d-view_splitter-right-col",styles:{flex:1}}).inject(e)},showLeftColumnOnly:function(){c.setStyle("display","none");g.setStyle("display","none");b.setStyles({display:"flex",width:"100%",height:"100%"});if(this.onSplitChange){this.onSplitChange()}},showRightColumnOnly:function(){b.setStyle("display","none");g.setStyle("display","none");c.setStyles({display:"flex",width:"100%",height:"100%"});if(this.onSplitChange){this.onSplitChange()}},showBothColumns:function(){c.setStyle("display","flex");g.setStyle("display","flex");b.setStyle("display","flex");if(this.onSplitChange){this.onSplitChange()}},addContentToLeftColumn:function(h){if(h){h.inject(b)}},addContentToRightColumn:function(h){if(h){h.inject(c)}},onSplitAction:function(h){if(h){this.onSplitChange=h}},dispose:function(){e.remove();e=undefined;b=undefined;c=undefined;g=undefined}});return f});define("DS/3DPlay2DExperience/Commands/CmdReframe",["DS/ApplicationFrame/Command"],function(b){var a=b.extend({init:function(c){this._parent(c,{isAsynchronous:false})},execute:function(){}});return a});define("DS/3DPlay2DExperience/Commands/CmdZoom",["DS/ApplicationFrame/Command"],function(b){var a=b.extend({init:function(c){this._parent(c,{isAsynchronous:false})},execute:function(){}});return a});define("DS/3DPlay2DExperience/DocumentLoader/PDFLoader",["DS/3DPlay2DExperience/DocumentLoader/DocumentLoader","DS/WebSystem/Settings","UWA/Core"],function(m,b,e){var a;var h=120;var j=150;var i=16777216;var d="#d1d4d4";var c="2";var l=b.get("3DPlay.2DExperience.AllowDifferentSizePages");var g=function(x){var u=x.index;var v=x.isMobile;var q=false;var p=false;var t=x.originalWidth;var s=x.originalHeight;var n=t/s;var r;var w;var o=function(z,A,y){if(z&&A&&y){z.strokeStyle=d;z.lineWidth=c;z.moveTo(0,0);z.lineTo(0,y);z.moveTo(0,y);z.lineTo(A,y);z.moveTo(A,y);z.lineTo(A,0);z.moveTo(A,0);z.lineTo(0,0);z.moveTo(0,0);z.stroke()}};this._getPDFPage=function(y){if(y){if(r){y(r)}else{a.loadPage(u,function(z){r=z;y(r)})}}};this.cleanUp=function(){if(r){r.cleanup();r=undefined}};this.dispose=function(){this.cleanUp()};this.getThumbnail=function(y){var z=function(D){var E=D.getViewport(1);t=E.width;s=E.height;var C=(t>s)?(h/t):(j/s);var B=D.getViewport(C);var A=document.createElement("canvas");A.width=B.width;A.height=B.height;D.render({canvasContext:A.getContext("2d"),viewport:B}).then(function(){w=A.toDataURL("image/png");y(w);A.remove()})};if(!y){console.log("Thumbnail generation is an async operation. Please provide a callback.");return}else{if(w){y(w)}else{this._getPDFPage(function(A){z(A)})}}};this.getIndex=function(){return u};this.getAspectRatio=function(){return n};this.getOriginalHeight=function(){return s};this.getOriginalWidth=function(){return t};this.isRendered=function(){return q};this.isRendering=function(){return p};this.isLoaded=function(){if(r){return true}else{return false}};this.render=function(z){if(!z.canvas){return}var y=z.canvas;p=true;q=false;var A=function(H){var F=z.containerWidth/t;var B=H.getViewport(F);var E=B.width;var N=B.height;var G=y.getContext("2d",{alpha:false});var M=window.devicePixelRatio||1;var I=(G.webkitBackingStorePixelRatio||G.mozBackingStorePixelRatio||G.msBackingStorePixelRatio||G.oBackingStorePixelRatio||G.backingStorePixelRatio||1);var J=true;var D=M/I;var L=E*D;var C=N*D;if((M!=I)&&(!v||(L*C)<i)){y.width=L;y.height=C;G.scale(D,D)}else{if(!v||((E*N)<i)){y.width=E;y.height=N;G.scale(1,1)}else{J=false}}if(J){var K=setTimeout(function(){if(p){p=false}},2000);H.render({canvasContext:G,viewport:B}).then(function(){o(G,E,N);q=true;p=false;clearTimeout(K);K=undefined;if(z.renderCB){z.renderCB()}})}};this._getPDFPage(function(B){A(B)})}};var f=function(o){var q=o.pagesCount;var r=o.src;var p=[];var n=o.isMobile;this.DOC_WIDTH=0;this.DOC_HEIGHT=0;this.loadPage=function(s,t){if(r&&s<=q){r.getPage(s).then(function(u){t(u)})}};this.getPage=function(s){if(s>=0&&s<q){return p[s]}else{return null}};this.load=function(w,t){var u=0;if(l){var s=function(z){var x=z.getViewport(1);this.DOC_WIDTH=Math.max(this.DOC_WIDTH,x.width);this.DOC_HEIGHT+=x.height;var y=new g({index:z.pageIndex+1,originalWidth:x.width,originalHeight:x.height,isMobile:n});p.push(y);u++;if(u<q){w(u);this.loadPage(u+1,s)}else{t()}}.bind(this);this.loadPage(1,s)}else{var v=function(A){var y=A.getViewport(1);for(var x=0;x<q;x++){this.DOC_WIDTH=Math.max(this.DOC_WIDTH,y.width);this.DOC_HEIGHT+=y.height;var z=new g({index:x+1,originalWidth:y.width,originalHeight:y.height,isMobile:n});p.push(z);w(x)}t()}.bind(this);this.loadPage(1,v)}};this.getPages=function(){return p};this.cleanup=function(){if(r){r.cleanup()}r=undefined};this.dispose=function(){for(var s=0;s<p.length;++s){var t=p[s];if(t&&t.dispose){t.dispose()}}this.cleanup()}};var k=m.extend({init:function(n){this._parent(n)},load:function(n){var p=n.asset;var o="DS/PDFjs/PDFjs";var q=this;require([o],function(r){r.disableWebGL=true;var s=Date.now();q.onLoadingStart();r.getDocument(p).then(function(t){a=new f({pagesCount:t.numPages,src:t,isMobile:q.isMobile});a.load(q.onLoadingProgress,function(){q.onLoadingEnd(a)})})["catch"](function(t){q.onLoadingFail(t)})})},dispose:function(){a.dispose();a=undefined}});return k});define("DS/3DPlay2DExperience/DocumentViewer/DocumentNavigationPanel",["UWA/Core","UWA/Class","DS/Windows/Panel","DS/WebSystem/Settings","DS/WebSystem/Nls","DS/WebappsUtils/WebappsUtils","DS/3DPlay2DExperience/DocumentViewer/LoadingQueue","css!DS/UIKIT/UIKIT.css"],function(f,b,c,a,g,e,l,i){var h=[];var d;var j=function(o,q,s){var t=q;var p=function(){if(s){s()}};var m=new f.Element("div",{id:"Page-"+o+"-Thumbnail-Container","class":"_3dp-doc-thumbnail-container",events:{click:p,touchstart:p},styles:{border:"2px solid #d1d4d4","margin-left":"10px","margin-top":"10px",position:"relative",cursor:"pointer",width:"120px",height:"150px","background-repeat":"no-repeat","background-size":"100% 100%","background-image":"url("+e.getWebappsBaseUrl()+"3DPlay2DExperience/assets/images/sheet_loading.gif)"}});var n=new f.Element("div",{"class":"_3dp-thumbnail-title-bar",styles:{"background-color":"#3d3d3d",width:"100%",position:"absolute",bottom:0,opacity:0.8,display:"flex","flex-direction":"row","justify-content":"space-between"}}).inject(m);var r=new f.Element("span",{"class":"_3dp-thumnail-title",html:"Page "+o,styles:{"font-family":"3ds","font-size":"14px",color:"#ffffff",margin:"5px"}}).inject(n);this.inject=function(u){m.inject(u)};this.setThumbnail=function(u){},this.load=function(u){t.getThumbnail(function(v){m.style.backgroundImage="url("+v+")";if(u){u()}})};this.updateThumbnail=function(v){if(v.annotations){var u=new f.Element("span",{"class":"fonticon fonticon-pencil",styles:{color:"#ffffff",margin:"5px"}}).inject(n)}}};var k=b.extend({init:function(m){this._parent(m);this._frameWindow=m.frameWindow;this._buildPanel(m)},_buildPanel:function(u){if(u.overlay){var q=this._frameWindow.getImmersiveFrame();var r=WUXDockAreaEnum.LeftDockArea;this._dockingElement=q.getDockingElement(r);this.panel=new c({titleBarVisibleFlag:false,icon:e.getWebappsAssetUrl("3DPlaySpecTree","icons/32/")+"I_3DPlaySpecTree.png",title:"",content:d,immersiveFrame:q,resizableFlag:true,movableFlag:false,currentDockArea:r,width:400,verticallyStretchableFlag:true,usePaddingFlag:false,closeButtonFlag:false,floatableFlag:false,expandedFlag:true,ensureHeightDefinitionOnHierarchy:true})}var s=u.Document;d=new f.Element("div",{id:"main-thumbnails-container",styles:{"background-color":"white",display:"flex","flex-direction":"row","flex-wrap":"wrap","justify-content":"flex-start","align-items":"flex-start","align-content":"flex-start",width:"100%",height:"100%","overflow-y":"scroll"}});var o=u.doc;var n=s.getPages();var t=new l();for(var p=0;p<n.length;p++){var m=new j(p+1,n[p]);m.inject(d);h.push(m);if(!t.isFull()){t.push(m)}}t.start()},hide:function(){if(this._dockingElement){this._dockingElement.visibleDockingZoneFlag=false;this._dockingElement.collapseDockingZoneFlag=true;return true}else{return false}},show:function(){if(this._dockingElement){this._dockingElement.visibleDockingZoneFlag=true;this._dockingElement.collapseDockingZoneFlag=false;return true}else{return false}},dispose:function(){this.panel.destroy();this.panel=undefined},inject:function(m){d.inject(m)}});return k});define("DS/3DPlay2DExperience/DocumentViewer/DocumentViewer",["UWA/Class","UWA/Core","DS/Core/PointerEvents","DS/VisuEvents/EventsManager","DS/WebSystem/Settings","DS/3DPlay2DExperience/DocumentViewer/DocumentNavigationPanel","DS/WebappsUtils/WebappsUtils","DS/CoreEvents/Events","DS/3DPlay2DExperience/DocumentViewer/ViewSplitter","DS/3DPlay2DExperience/DocumentViewer/LoadingQueue","DS/WebSystem/DetectBrowser","css!DS/UIKIT/UIKIT.css"],function(b,g,q,r,A,o,ae,ao,Y,ab,ap,ag){var k=A.get("3DPlay.2DExperience.ShowScrollBar");var L;var am;var I;var ak;var T;var ac;var y;var e=false;var c=false;var s=false;var f;var Q;var W;var H;var R;var N;var E=0;var ai=0;var K="fit-width";var i;var n;var d=10;var G=5;var v=0.5;var J=1;var M=100;var w=5;var C;var af;var a;var ad;var D;var B;var j;var S=200;var m=100;var P=200;var h=[];var aa=function(aq){c=true;R=aq};var u=function(at){if(c&&!s){var ar=at.x-R.x;var aq=at.y-R.y;var av=ak.offsetLeft+ar;var au=ak.offsetTop+aq;if(av<=0&&av>=(I.clientWidth-ak.clientWidth)){ak.setStyles({left:av+"px"})}if(au<=0&&au>=(I.clientHeight-ak.clientHeight)){ak.setStyles({top:au+"px"})}R=at}};var Z=function(){c=false;if(!s){i.render()}};var p=function(av){var au=0;var at=(y.clientHeight-ak.clientHeight);if(s){J+=J}s=true;var ar;if(i.isMobile){ar=(av<0)?-1:1;E=ar*J*I.clientHeight}else{var aq=ap().browser.name;console.log("browser = "+aq);if(aq==="chrome"){ar=av.deltaY}else{if(aq==="firefox"){ar=av.detail}else{if(aq==="ie"){ar=-av.wheelDelta}else{if(aq==="safari"){ar=-av.deltaY}else{ar=av.deltaY}}}}E=(ar>0)?-M:M}if((ak.offsetTop===au&&E>au)||(ak.offsetTop===at&&E<at)){s=false;E=0;J=1;return}ah()};var ah=function(){if(s){var at=0;var ar=(I.clientHeight-ak.clientHeight);var aq=ak.offsetTop+E;if(aq>at){aq=at}if(aq<ar){aq=ar}if(i.isMobile){ak.setStyles({"transition-property":"top","transition-duration":"1s","transition-timing-function":"ease-out",top:aq+"px"})}else{ak.setStyles({top:aq+"px"});O()}if(k){ac.setStyles({top:Math.abs(C*ak.offsetTop)+"px"})}}};var O=function(){ak.setStyles({transition:"none"});s=false;J=1;i.render()};var l=function(aq,ar){e=true;f=aq;W=ar};var aj=function(av){var aB=ak.clientWidth;var aF=ak.clientHeight;var ay=ak.offsetLeft;var aD=ak.offsetTop;if(e){var ax=aB*av;var ar=aF*av;var au=f.x-ay;var at=f.y-aD;var aq=au*av;var aG=at*av;var aE=aq-au;var aC=aG-at;var aw=ay-aE;var aA=aD-aC;var az=(ax/a);if(az<=(i.reframeScale*G)&&az>=(i.reframeScale*v)){ak.setStyles({width:ax+"px",height:ar+"px",top:aA+"px",left:aw+"px"});Q=az}}};var V=function(){for(var ar=0;ar<i.pageViews.length;ar++){i.pageViews[ar].markForRender()}if(k){C=(T.clientHeight-ac.clientHeight)/(ak.clientHeight-T.clientHeight);ac.setStyles({height:((I.clientHeight*T.clientHeight)/ak.clientHeight)+"px"})}var at,aq;if(ak.clientWidth<=y.clientWidth){at=(y.clientWidth-ak.clientWidth)*0.5}else{if(ak.offsetLeft>0){at=0}else{if(ak.offsetLeft<(y.clientWidth-ak.clientWidth)){at=y.clientWidth-ak.clientWidth}else{at=ak.offsetLeft}}}if(ak.offsetTop>0){aq=0}else{if(ak.offsetTop<(y.clientHeight-ak.clientHeight)){aq=(y.clientHeight-ak.clientHeight)}else{aq=ak.offsetTop}}ak.setStyles({left:at+"px",top:aq+"px"});K="zoomed";f=undefined;e=false};var x="url("+ae.getWebappsBaseUrl()+"3DPlay2DExperience/assets/images/sheet_loading.gif)";var an=function(az,aq){var at;var ar=true;var ax=az.getOriginalWidth();var av=az.getOriginalHeight();var ay=((ax/a)*100);var aw=((av/af)*100);var au=new g.Element("div",{id:"Page-"+az.getIndex()+"-Container","class":"_3dp-doc-page-container",styles:{width:ay+"%",height:aw+"%","background-image":x,"background-size":"100% 100%",border:d+"px solid #f4f5f6"}}).inject(aq);this.load=function(aA){az.getThumbnail(function(aB){au.style.backgroundImage="url("+aB+")";if(aA){aA()}})};this.index=az.getIndex();this.getOriginalWidth=function(){return ax};this.getOriginalHeight=function(){return av};this.getCurrentHeight=function(){return au.clientHeight+(d*2)};this.getCurrentWidth=function(){return au.clientWidth+(d*2)};this.render=function(){var aA=az.isRendering();if(!aA&&ar){var aC=new g.Element("canvas",{styles:{width:"100%",height:"100%"}});var aB={canvas:aC,containerWidth:au.clientWidth,containerHeight:au.clientHeight,renderCB:function(){if(at){at.remove()}at=aC;at.inject(au);ar=false}};az.render(aB)}};this.isLoaded=function(){return az.isLoaded()};this.markForRender=function(){ar=true};this.unrender=function(){if(at){at.remove();at=undefined}ar=true}};var U=new ab();var al={onLeftMouseDown:function(aq){O();aa({x:aq.from[0].event.clientX,y:aq.from[0].event.clientY})},onMouseMove:function(aq){u({x:aq.from[0].event.clientX,y:aq.from[0].event.clientY})},onLeftMouseUp:function(aq){Z();O()},onMiddleMouseDown:function(aq){},onMiddleMouseUp:function(aq){},onRightMouseDown:function(aq){},onRightMouseUp:function(aq){},onMouseWheel:function(at){var aq=at.from[0].event;aq.preventDefault();if(aq.shiftKey===true){if(e){var ar;if(aq.deltaY<0){ar=1.1;aj(ar)}else{ar=0.9;aj(ar)}}else{l({x:aq.pageX,y:aq.pageY})}}else{p(aq)}},onLeftDoubleClick:function(aq){i.toggleViewerState(aq.gesture.events[0].currentPosition)},onKeyDown:function(aq){},onKeyUp:function(ar){var aq=ar.from[0].event;if(aq.key==="Shift"&&e){V()}},onPinchPanRotate:function(av){var az=av.gesture;var at=az.getEvents();var aw=at[0];var au=at[1];var ar=aw.getCurrentPosition(I);var aq=au.getCurrentPosition(I);var ay=0.5*(ar.x+aq.x);var ax=0.5*(ar.y+aq.y);if(az.firstChange){l({x:ay,y:ax},az.distance)}else{if(az.lastChange){V()}else{aj(az.distance/az.lastDistance)}}},onTouch:function(aq){aa({x:aq.gesture.events[0].currentPosition.x,y:aq.gesture.events[0].currentPosition.y});D=aq.gesture.events[0].currentPosition.x;B=aq.gesture.events[0].currentPosition.y;j=new Date().getTime()},onDrag:function(aq){u({x:aq.gesture.events[0].currentPosition.x,y:aq.gesture.events[0].currentPosition.y})},onRelease:function(ax){Z({x:ax.gesture.events[0].currentPosition.x,y:ax.gesture.events[0].currentPosition.y});var aw=ax.gesture.events[0].currentPosition.x;var av=ax.gesture.events[0].currentPosition.y;var au=new Date().getTime();var at=au-j;var ar=aw-D;var aq=av-B;if(at<S&&(Math.abs(ar)<m)&&(Math.abs(aq)>P)){if(aq>0){p(1)}else{p(-1)}}},onTap:function(aq){},onDoubleTap:function(aq){i.toggleViewerState(aq.gesture.events[0].currentPosition)}};var z=function(aq){if(s){var ar=aq-N;console.log("delta Pos: "+ar);var av=(H+ar);if(av>=0&&av<=(T.clientHeight-ac.clientHeight)){ac.setStyles({top:av+"px"});H=av;N=aq;var at=ar/C;var au=ak.offsetTop-at;ak.setStyles({top:au+"px"})}}};var t={onLeftClick:function(aq){},onMouseMove:function(aq){if(s){var ar=aq.from[0].currentPosition.y;z(ar)}},onTap:function(aq){console.log("touch detected")},onPan:function(aq){}};var F={onLeftMouseDown:function(aq){s=true;H=ac.offsetTop;N=aq.from[0].currentPosition.y},onLeftMouseUp:function(aq){s=false},onTouch:function(aq){s=true;H=ac.offsetTop},onDrag:function(ar){if(s){var aq=ar.gesture.events[0];z(aq.currentPosition.y)}},onRelease:function(aq){s=false}};var X=b.extend({init:function(ar){i=this;this.frmWindow=ar.frmWindow;this.isMobile=this.frmWindow.experience.isMobile();n=ar.doc;a=n.DOC_WIDTH;af=n.DOC_HEIGHT;ad=a/af;this.viewSplitter=new Y({container:this.frmWindow.getViewerFrame()});am=new g.Element("div",{id:"_3dp-doc-navigation-panel-container",styles:{border:"ridge"}});this.docNavigationPanel=new o({Document:n,overlay:false}).inject(am);this.viewSplitter.onSplitAction(function(){setTimeout(function(){av()},100)});this.viewSplitter.addContentToLeftColumn(am);I=new g.Element("div",{id:"_3dp-doc-viewer-container",tabindex:0,styles:{width:"100%",height:"100%",overflow:"hidden","background-color":"#f4f5f6",border:"ridge",display:"flex","flex-direction":"row"}});y=new g.Element("div",{id:"_3dp-doc-container",styles:{position:"relative",flex:1}}).inject(I);this.viewSplitter.addContentToRightColumn(I);window.onresize=function(ax){av()};ak=new g.Element("div",{id:"_3dp-doc-pages-container",styles:{width:a+"px",height:af+"px",position:"absolute",top:"0px","pointer-events":"none",display:"flex","flex-direction":"column","align-items":"center"}}).inject(y);var av=function(){var aA=this.getVisiblePages();var aB=aA[0].getOriginalWidth();var az=aA[0].getOriginalHeight();var ax=y.clientWidth/y.clientHeight;var ay=aB/az;if(ax>ay){this.reframeScale=y.clientHeight/az}else{this.reframeScale=y.clientWidth/aB}if(K==="fit-width"){this.fitWidth()}else{if(K==="reframe"){this.reframe()}else{if(K==="zoomed"){if((y.clientWidth>ak.clientWidth)){ak.setStyles({left:((y.clientWidth-ak.clientWidth)*0.5)+"px"})}}}}}.bind(this);var aq=n.getPages();this.pageViews=[];for(var at=0;at<aq.length;at++){var aw=aq[at];var au=new an(aw,ak);this.pageViews.push(au);if(!U.isFull()){U.push(au)}}if(k){T=new g.Element("div",{id:"_3dp-doc-scrollBar",styles:{width:"10px",position:"relative","background-color":"#d5e8f2"}}).inject(I);ac=new g.Element("div",{id:"_3dp-doc-scrollHandle",styles:{width:"100%","background-color":"#368ec4",position:"absolute","min-height":"20px"}}).inject(T)}this.enableEvents();U.start();this.showOnlyViewer();av()},enableEvents:function(){var au=Object.keys(al);for(var at=0;at<au.length;at++){var av=au[at];r.addEvent(I,av,al[av])}ak.addEventListener("transitionend",O,true);if(k){var ar=Object.keys(t);for(var at=0;at<ar.length;at++){var av=ar[at];r.addEvent(T,av,t[av])}var aq=Object.keys(F);for(var at=0;at<aq.length;at++){var av=aq[at];r.addEvent(ac,av,F[av])}}},disableEvents:function(){var au=Object.keys(al);for(var at=0;at<au.length;at++){var av=au[at];r.removeEvent(I,av,al[av])}ak.removeEventListener("transitionend",O,true);if(k){var ar=Object.keys(t);for(var at=0;at<ar.length;at++){var av=ar[at];r.removeEvent(T,av,t[av])}var aq=Object.keys(F);for(var at=0;at<aq.length;at++){var av=aq[at];r.removeEvent(ac,av,F[av])}}},setCurrentSheet:function(aq){},getCurrentSheet:function(){},scrollToPreviousSheet:function(){},scrollToNextSheet:function(){},getVisiblePages:function(){var aw=[];var aq=n.getPages();var au=0;var av=ak.offsetTop;for(var ar=0;ar<this.pageViews.length;ar++){var at=this.pageViews[ar].getCurrentHeight();var ax=au+at;if(ax<=Math.abs(av)){au+=at}else{if(ax>Math.abs(av)&&ax<Math.abs(av)+y.clientHeight){aw.push(this.pageViews[ar]);au+=at}else{if((ax-(Math.abs(av)+y.clientHeight))<at){aw.push(this.pageViews[ar]);break}else{break}}}}return aw},render:function(av){var au=this.getVisiblePages();while(h.length>0){var aw=h.shift();var aq=false;for(var ar=0;ar<au.length;ar++){if(aw.index===au[ar].index){aq=true;break}}if(!aq){aw.unrender()}}for(var at=0;at<au.length;at++){if(!au[at].isLoaded()&&!U.isFull()){U.push(au[at])}au[at].render();h.push(au[at])}U.start();if(av){av()}},showOnlyViewer:function(){this.currentView=0;this.viewSplitter.showRightColumnOnly()},showOnlyNavigationPanel:function(){this.currentView=1;this.viewSplitter.showLeftColumnOnly()},showBothViewerAndNavigationPanel:function(){this.currentView=2;this.viewSplitter.showBothColumns()},getCurrentView:function(){return this.currentView},fitWidth:function(at){var av=y.clientWidth;var aq=av/ad;var au=0;var ar=(at)?(ak.offsetTop-at.y):ak.offsetTop;ar=ar*av/ak.clientWidth;if(at){ar=ar+at.y}if(ar>0){ar=0}else{if(ar<(y.clientHeight-aq)){ar=y.clientHeight-aq}}ak.setStyles({width:av+"px",height:aq+"px",left:au+"px",top:ar+"px"});K="fit-width";this.render()},reframe:function(ax){var ar;var aw=(ax)?(-ax.y+ak.offsetTop):ak.offsetTop;var aA=0;for(var av=0;av<this.pageViews.length;av++){var at=this.pageViews[av].getCurrentHeight();var aB=aA-at;if(aB>=aw){aA-=at}else{ar=this.pageViews[av];break}}var au=a*this.reframeScale;var aq=af*this.reframeScale;var az=(y.clientWidth-au)*0.5;var ay=-(aq/(this.pageViews.length)*(ar.index-1));ak.setStyles({width:au+"px",height:aq+"px",left:az+"px",top:ay+"px"});if(ay>0){ay=0}else{if(ay<(y.clientHeight-ak.clientHeight)){ay=y.clientHeight-ak.clientHeight}}K="reframe";this.render()},toggleViewerState:function(aq){if(K==="fit-width"){this.reframe(aq)}else{this.fitWidth(aq)}},dispose:function(){this.viewSplitter.dispose();this.viewSplitter=undefined}});return X});define("DS/3DPlay2DExperience/3DPlay2DExperience",["DS/3DPlayExperienceModule/3DPlayExperience","DS/3DPlay2DExperience/DocumentViewer/DocumentViewer","DS/ApplicationFrame/FrameWindow","DS/WebSystem/Nls","DS/3DPlay/3DPlay"],function(e,h,d,j,g){var b=navigator.userAgent.match(/(Android|iPhone|iPad)/i)?true:false;var i,f;var a={pdf:"DS/3DPlay2DExperience/DocumentLoader/PDFLoader"};var c=e.extend({init:function(k){this._parent(k);k.FrameWindow=d;k.workbenchs=[];k.workbenchs.unshift({name:"3DPlay2DExperience",module:"3DPlay2DExperience"})},onPreCreate:function(){console.log("Pre-create");this.onModelLoadingStarted=function(){this.phaseProgress.showProgressBar();console.log("Document loading started")}.bind(this);this.onModelLoadingProgression=function(k){console.log("Page(s) loaded: "+k)}.bind(this);this.onModelLoadingCompleted=function(k){console.log("Document loading finished");this.phaseProgress.hideProgressBar();f=new h({doc:k,frmWindow:this.frmWindow});this.frmWindow.getViewer=function(){return f};this.playerSplashScreen.hide()}.bind(this);this.onModelLoadingError=function(l){var k=this.ctx;j.nls("3DPlay/Core","DocumentLoadingFailed",function(m){g.displayFatalError({ctx:k,msg:m,error:"DocumentLoadingFailed"},l)});this.phaseProgress.hideProgressBar();console.log("Model loading failed")}.bind(this);if(b){this.mabModel={monoCmd:{id:"DownloadPDF",rsc:"3DPlay2DExperience/3DPlay2DExperience"}}}},onPostCreate:function(){console.log("Post-create")},loadAsset:function(m){var k=a[m.asset.type];var l={onLoadingStartCB:this.onModelLoadingStarted,onLoadingProgressCB:this.onModelLoadingProgression,onLoadingEndCB:this.onModelLoadingCompleted,onLoadingFailCB:this.onModelLoadingError};if(i){i.dispose();i=undefined}if(f){f.dispose();f=undefined}require([k],function(n){i=new n({events:l,isMobile:b});i.load({asset:m.asset.filename})})},isMobile:function(){return b},dispose:function(){}});return c});