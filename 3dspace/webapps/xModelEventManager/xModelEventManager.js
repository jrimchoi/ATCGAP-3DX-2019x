define("DS/xModelEventManager/xModelEventManager",["UWA/Class"],function(a){var b=a.extend({init:function(){if(this._id===undefined){this._id="evtmgr_"+Math.random().toString().split(".")[1];this._subscriptions={};this._channelMap=[];for(var c=0,d=arguments.length;c<d;c++){var e="chnl_"+Math.random().toString().split(".")[1];this._subscriptions[e]=[];arguments[c][this._id]=e;this._channelMap.push(arguments[c])}}},subscribe:function(e,c,d){var g=e[this._id];g=(g&&this._subscriptions[g])?g:undefined;if(g&&c!=undefined&&typeof(d)=="function"){var f=typeof(c)=="string"?{event:c}:c;this._subscriptions[g].push(e.subscribe(f,d))}},cleanup:function(){try{if(this._channelMap&&this._channelMap.length>0){for(var g=0,d=this._channelMap.length;g<d;g++){var h=this._channelMap[g][this._id];if(h&&this._subscriptions[h]&&this._subscriptions[h].length>0){var c=this._subscriptions[h];var l=(arguments&&arguments.length>0)?"For: "+arguments[0]:"";console.log("[xModelEventManager: cleanup] "+l+" ChannelId: "+h+" subcriptions token count: "+c.length);for(var f=0,e=c.length;f<e;f++){this._channelMap[g].unsubscribe(c[f])}delete this._channelMap[g][this._id];delete this._subscriptions[h]}else{if(h&&this._subscriptions[h]&&this._subscriptions[h].length<=0){delete this._channelMap[g][this._id];delete this._subscriptions[h]}}}this._channelMap=[]}}catch(k){console.log("[xModelEventManager: cleanup] Exception occured!!!")}}});return b});