define("DS/MPFCompanyModel/MeCompanyDataProxy",["DS/MPFDataProxy/DataProxy"],function(b){var a=b.extend({init:function(c){this._parent(c,"/me/companies")},url:function(){var c;c=this.connector.url(this.resourcePath);return c},request:function(d,c){var e;e=c.method;if((e==="GET")||(e==="POST")){return this._parent(d,c)}else{if(typeof c.onFailure==="function"){c.onFailure(e+" is not supported for "+this.path)}}}});return a});define("DS/MPFCompanyModel/CompanyHelper",[],function(){var a;a={getCompanyFromPerson:function(d,e){var f;var c;var b;f=d.getCompany();if(f){c=this.getIdFromUrl(f);if(c){b=e.createModel("company",{id:c})}}return b},getIdFromUrl:function(c){var b;b=c.match(/[0-9A-Z]{32}$/)||[""];return b[0]}};return a});define("DS/MPFCompanyModel/CompanyMemberDataProxy",["DS/MPFDataProxy/DataProxy","UWA/Core"],function(b,a){var c=b.extend({init:function(d){this._parent(d,"/mdpeoplecompany/companies/{0}/members")},request:function(e,d){if(d.method==="POST"||d.method==="PUT"){d.method="PATCH"}this._parent(e,d)},url:function(e,f,d){return this.connector.url(a.String.format(this.resourcePath,e.parentResourceId))},urlPatch:function(d){return this.connector.url(this.delegate.resourcePath+"/"+d.get("id"))}});return c});define("DS/MPFCompanyModel/CompanyModel",["UWA/Core","UWA/Utils","DS/MPFModel/MPFModel","DS/MPFModel/ModelValidator","DS/MPFDataProxy/NoDataProxy","i18n!DS/MPFCompanyModel/assets/nls/Company"],function(h,g,b,c,e,f){var a;var i={};var d={};i.NAME="name";i.CEO_FIRST_NAME="ceoFirstName";i.CEO_LAST_NAME="ceoLastName";i.CEO_DATE_OF_BIRTH="ceoDateOfBirth";i.CEO_PERSONAL_ID_NUMBER="ceoPersonalId";i.TAX_REGISTRATION_ID="taxRegistrationId";i.REGISTRATION_ID="registrationId";i.IS_SELLER_DUE_TO_ONLINE_TAX="isSellerDueToOnlineTax";i.COUNTRY="country";i.EMP_NAME="PrivateMPName";i.EMP_FILTER="PrivateMPFilter";i.EMP_PROJECT_NAME="PrivateMPProjectName";i.EMP_ALLOW_PUBLIC_SELLERS="PrivateMPAllowPublicSellers";i.EMP_URL="PrivateMPURL";i.UBO_PERSONS="uboPersons";i.NO_SHAREHOLDER="isSingleStakeHolder";i.DRUPAL_ID="drupalId";d[i.NAME]=null;d[i.CEO_FIRST_NAME]=null;d[i.CEO_LAST_NAME]=null;d[i.TAX_REGISTRATION_ID]=null;d[i.REGISTRATION_ID]=null;d[i.IS_SELLER_DUE_TO_ONLINE_TAX]=null;a=b.extend({defaults:d,setup:function(k,l){this._parent(k,l);this.addressFactory=l.addressFactory;this._type="CompanyModel";this.owner=null;this.addresses=null;this.constraints=l.constraints;this.validator=this._createValidator()},parse:function(l){var k;var o;l.taxRegistrationId=l.taxId;delete l.taxId;k=l.owner;if(typeof k==="object"){this.owner=k}else{if(typeof k==="string"){}}delete l.owner;o=l.addresses;if(this.addressFactory&&h.typeOf(o)==="array"){if(o.length>0&&typeof o[0]==="string"){this.addresses=this.addressFactory.createCollection("address");for(var n=0;n<o.length;n++){var m=this.addressFactory.createModel("address");m.set("id",o[n].split("/")[o[n].split("/").length-1]);m.fetch();this.addresses.add(m)}}else{this.addresses=this.addressFactory.createCollection("company",o,{parse:true})}}if(l.hasOwnProperty("PrivateMPFilter")){l.PrivateMPFilter=l.PrivateMPFilter===""?[]:l.PrivateMPFilter.split(",")}delete l.addresses;return l},toJSON:function(){var k;var l;k=this._parent();k.taxId=k.taxRegistrationId;delete k.taxRegistrationId;for(l in k){if((k.hasOwnProperty(l))&&(k[l]===null)){delete k[l]}}if(k.hasOwnProperty("PrivateMPFilter")){k.PrivateMPFilter=k.PrivateMPFilter.join()}return k},validate:function(k){return this.validator.validate(k)},validTaxRegID:j,_isCeoPersonalIdNumberValid:function(k){var l=true;var m;m=this.getCountryFromAddress();if(k&&m){switch(m){case"USA":l=k.test(/^(\d{4}|\d{9})$/);break;case"CAN":l=k.test(/^\d{9}$/);break}}return l},getID:function(){return this.getId()},setID:function(k){return this.setId(k)},getId:function(){return this.get("id")},setId:function(k){return this.set("id",k)},getOwner:function(){return this.owner},setOwner:function(k){this.owner=k},getAddresses:function(){return this.addresses},setAddresses:function(k){this.addresses=k},getName:function(){return this.get(i.NAME)},setName:function(k){return this.set(i.NAME,k)},getCeoFirstName:function(){return this.get(i.CEO_FIRST_NAME)},setCeoFirstName:function(k){return this.set(i.CEO_FIRST_NAME,k)},getCeoLastName:function(){return this.get(i.CEO_LAST_NAME)},setCeoLastName:function(k){return this.set(i.CEO_LAST_NAME,k)},getCeoFullName:function(){return this.getCeoFirstName()+" "+this.getCeoLastName()},getCeoDateOfBirth:function(){return this.get(i.CEO_DATE_OF_BIRTH)},getCeoPersonalIdNumber:function(){return this.get(i.CEO_PERSONAL_ID_NUMBER)},getRegistrationId:function(){return this.get(i.REGISTRATION_ID)},setRegistrationId:function(k){return this.set(i.REGISTRATION_ID,k)},getTaxRegistrationId:function(){return this.get(i.TAX_REGISTRATION_ID)},setTaxRegistrationId:function(k){return this.set(i.TAX_REGISTRATION_ID,k)},getIsSellerDueToOnlineTax:function(){return this.get(i.IS_SELLER_DUE_TO_ONLINE_TAX)},setIsSellerDueToOnlineTax:function(k){this.set(i.IS_SELLER_DUE_TO_ONLINE_TAX,(k===true))},getCountry:function(){return this.get(i.COUNTRY)},setCountry:function(k){return this.set(i.COUNTRY,k)},getCountryFromAddress:function(){var m;var k;var l;m=this.getAddresses();k=m&&m.first();l=k&&k.getCountry();return l},getEmpProjectName:function(){return this.get(i.EMP_PROJECT_NAME)},getEmpName:function(){return this.get(i.EMP_NAME)},getEmpUrl:function(){return this.get(i.EMP_URL)},getUboPersons:function(){return this.get(i.UBO_PERSONS)},getNoShareHolder:function(){var k;k=this.get(i.NO_SHAREHOLDER);return k===true||k==="TRUE"||k==="true"},getEMPAllowPublicSellers:function(){var k;k=this.get(i.EMP_ALLOW_PUBLIC_SELLERS);return k==="TRUE"},getDrupalId:function(){return this.get(i.DRUPAL_ID)},_createValidator:function(){return new c({model:this,validations:[{attribute:i.NAME,required:true,requiredError:f.get("errorName")},{attribute:i.EMP_NAME,pattern:/^[A-Za-z0-9 ]*$/,required:false,invalidError:f.get("noSpecialCharacterMessage")},{attribute:i.REGISTRATION_ID,pattern:/^.{0,30}$/,required:false,invalidError:f.get("errorRegistrationIdFormat")},{attribute:i.REGISTRATION_ID,pattern:/^(?!http:\/\/|https:\/\/|www\.).*(?!\.\w+)$/,required:false,invalidError:f.get("errorRegistrationIdUrlFormat")}]})}});function j(l,p){var m=true;var k;var q;var o;var n;switch(p){case"FRA":k=(/^(FR)(\d{11})$/);q=(/^(FR)([A-HJ-NP-Z]\d{10})$/);o=(/^(FR)(\d[A-HJ-NP-Z]\d{9})$/);n=(/^(FR)([A-HJ-NP-Z]{2}\d{9})$/);m=k.test(l)||q.test(l)||o.test(l)||n.test(l);break;case"GBR":k=(/^(GB)?(\d{9})$/);q=(/^(GB)?(\d{12})$/);o=(/^(GB)?(GD\d{3})$/);n=(/^(GB)?(HA\d{3})$/);m=k.test(l)||q.test(l)||o.test(l)||n.test(l);break;case"BEL":k=(/^(BE)(0?\d{9})$/);m=k.test(l);break;case"ITA":k=(/^(IT)(\d{11})$/);m=k.test(l);break;case"DEU":k=(/^(DE)([1-9]\d{8})$/);m=k.test(l);break;default:m=true;break}return m}a.Fields=Object.freeze(i);a.validateTaxRegistrationId=j;return a});define("DS/MPFCompanyModel/CompanyDataProxy",["UWA/Core","DS/MPFDataProxy/DataProxy"],function(a,b){var c=b.extend({init:function(d,e){this._parent(d,"/mdpeoplecompany/companies",e)},urlGet:function(e,d){d||(d={});if(!(d.expand)){d.expand=["addresses","registrations"]}return this._parent(e,d)}});return c});