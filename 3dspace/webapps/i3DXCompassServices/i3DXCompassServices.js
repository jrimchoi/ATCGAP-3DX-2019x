define("DS/i3DXCompassServices/i3DXCompassServices",[],function(){var a="DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices",c=(function(){var d={};function e(){var f;try{top.document;f=true}catch(g){f=false}return f}return function(g,f){if(!d[g]){if(e()){try{top.require([g],function(i){d[g]=i;f(i)})}catch(h){try{require([g],function(i){d[g]=i;f(i)})}catch(h){f(null)}}}else{try{require([g],function(i){d[g]=i;f(i)})}catch(h){f(null)}}}else{if(d[g]){f(d[g])}}}}()),b={getPlatformServices:function(d){c(a,function(e){e.getPlatformServices({"public":true,platformId:d.platformId,onComplete:function(f){if(!f){d.onComplete()}else{if(d.platformId){d.onComplete(f)}else{d.onComplete(f)}}},onFailure:d.onFailure})})},getServiceUrl:function(d){c(a,function(e){e.getServiceUrl({"public":true,platformId:d.platformId,serviceName:d.serviceName,onComplete:function(f){if(!f){d.onComplete()}else{if(d.platformId){d.onComplete(f)}else{d.onComplete(f)}}},onFailure:d.onFailure})})}};return b});define("DS/i3DXCompassServices/i3DXCompassPubSub",["UWA/Utils"],function(d){var b="com.ds.compass",f=function(){return typeof compassRichWithCef!=="undefined"&&compassRichWithCef},a=function(){return typeof dscef!=="undefined"},e=(function(){var g={};function h(){var i;try{top.document;i=true}catch(j){i=false}return i}return function(j,i){if(!g[j]&&h()){try{top.require([j],function(l){g[j]=l;i(l)})}catch(k){}}else{if(g[j]){i(g[j])}}}}()),c={subscribe:function(g,h){e("DS/MessageBus/MessageBus",function(i){if(i){i.subscribe({channel:b,topic:g,callback:h})}})},publish:function(g,i,j){var h=this;e("DS/MessageBus/MessageBus",function(l){var k=d.getUUID();if(f()&&a()){dscef.sendString(g,JSON.stringify(i))}else{if(l){if(!i){i={}}if(j){h.subscribe(g+"Callback",function(m){if(m._PUB_SUB_ID===k){delete m._PUB_SUB_ID;h.unsubscribe(g+"Callback");j.apply(h,arguments)}});if(g.indexOf("Callback")===-1){i._PUB_SUB_ID=k}}l.publish({channel:b,topic:g,data:i})}}})},unsubscribe:function(g){e("DS/MessageBus/MessageBus",function(h){if(h){h.unsubscribe({channel:b,topic:g})}})},_subscribe:function(){throw new Error("use the subscribe method instead of _subscribe")},_publish:function(){throw new Error("use the publish method instead of _publish")}};return c});