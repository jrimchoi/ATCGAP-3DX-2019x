define("DS/LifecycleWebInWinWidget/LifecycleWebInWinWidget",["css!DS/LifecycleWidget/LifecycleWidget","css!DS/LifecycleWebInWinWidget/LifecycleWebInWinWidget","UWA/Controls/Abstract","DS/ENO6WPlugins/jQuery","DS/WAFData/WAFData","DS/WebInWinHelper/WebInWinHelper","DS/HistoryMultiPanel/HistoryMultiPanel","DS/LifecycleServices/LifecycleAlert","DS/LifecycleServices/LifecycleServicesSettings","i18n!DS/LifecycleWidget/assets/nls/LifecycleWidgetNls"],function(d,i,e,j,g,k,h,b,a,c){var f=e.extend({defaultOptions:{wintop:false,},webToWinCom_Socket:null,ContextualMenus:null,context:null,displayNotification:function(l){b.displayNotification(l)},addTestFunctions:function(l){l.addMissingExternalRecIds=function(){document.body.setAttribute("data-rec-id","TopLevelDocumentBody");var m=l.widget.body.querySelectorAll("div.egraph_views_RootLayer");var n;for(n=0;n<m.length;n++){var o=m.item(n);o.setAttribute("data-rec-id","egraph_views_RootLayer_"+n)}m=l.widget.body.querySelectorAll("[class^='wux-layouts-slidingviews']");for(n=0;n<m.length;n++){var o=m.item(n);o.setAttribute("data-rec-id","wux-layouts-slidingview_"+n)}m=document.body.querySelectorAll("[class^='tooltip']");for(var n=0;n<m.length;n++){var o=m.item(n);o.setAttribute("data-rec-id","tooltip_"+n)}m=document.body.querySelectorAll("[class^='module']");for(var n=0;n<m.length;n++){var o=m.item(n);o.setAttribute("data-rec-id","module_"+n)}}},addTestStubs:function(l){},init:function(o,l,m){var n=this;this.widget=o;this.context=this;this.options=m;this.isWebInWinODTMode=m.isWebInWinODTMode;this.securityContext=null;k.getServices(n);a.app_initialization(function(){k.initTenant(n);a.setTenant(n.tenant)});this.contextMenuObject=null;if(this.options.wintop==true){this.webToWinCom_Socket=k.createWebInWinSocket("webinwinhistory_socket_")}this.options.webToWinComSocket=this.webToWinCom_Socket;this.parentWidget=l;this._parent(m);var q=UWA.createElement("div");this.elements.container=q;q.className="webinwin_history_frame";q.setAttribute("data-rec-id",q.className);this.titleDiv=UWA.createElement("div");this.titleDiv.className="webinwin_history_title";this.titleDiv.setAttribute("data-rec-id",this.titleDiv.className);this.titleDiv.inject(this.elements.container);this.titleWidget=UWA.createElement("h4",{"class":"ebinwin_history_title_widget","data-rec-id":"ebinwin_history_title_widget",text:UWA.i18n("")});this.titleWidget.inject(this.titleDiv);var p={setObjects:function(s,r,t){n.updateObjects(s,r,t)},setTitleFromObject:function(r){n.setTitleFromObject(r)},postUpdateHandler:function(r){}};this.historyMultiPanel=new h(this,o,l,m,p);window.addEventListener("resize",function(r){n.historyMultiPanel.revisionFamily.onResize(r)});this.addTestFunctions(this.historyMultiPanel);if(this.isWebInWinODTMode==true){this.addTestStubs(this.historyMultiPanel)}this.historyMultiPanel.inject(this.elements.container);if(this.options.wintop==true){j(document).ready(function(){j(window).resize(function(){n.historyMultiPanel.revisionFamily.onResize()})})}document.addEventListener("keydown",function(y){var w=79;var s=69;var x=13;if(y.ctrlKey==true){if(y.keyCode==w){var u=true;if(y.preventDefault){y.preventDefault();if(n.historyMultiPanel.selectedData!=null){var v={id:n.historyMultiPanel.selectedData.physicalid,displayName:n.historyMultiPanel.selectedData.displayName};k.fireWintopCommand(n.webToWinCom_Socket,v,"OpenSearch")}}}else{if(y.keyCode==s){var t=true;if(y.preventDefault){y.preventDefault();if(n.historyMultiPanel.selectedData!=null){var v={id:n.historyMultiPanel.selectedData.physicalid,displayName:n.historyMultiPanel.selectedData.displayName};k.fireWintopCommand(n.webToWinCom_Socket,v,"CATImmSendToNewVPMCmdRoot")}}}}}else{if(y.altKey==true){if(y.keyCode==x){var r=true;if(y.preventDefault){y.preventDefault();if(n.historyMultiPanel.selectedData!=null){var v={id:n.historyMultiPanel.selectedData.physicalid,displayName:n.historyMultiPanel.selectedData.displayName};k.fireWintopCommand(n.webToWinCom_Socket,v,"ImmSearchProperty")}}}}}return false})},setTitle:function(l){this.titleWidget.innerHTML=l},setTitleFromObject:function(l){if(l&&l.displayName){this.setTitle(l.displayName+" "+l.revision)}},sendSelection:function(l){k.setCSOSelection(this.options.webToWinComSocket,l)},reframeHistoryTree:function(){},updateObjects:function(o,m,p){var n=this;if(p==false){this.historyMultiPanel.revisionFamily.setObjects(o)}setTimeout(function(){n.reframeHistoryTree()},1);var l=JSON.stringify(o);this.widget.setValue("Custo_roots_pids",l)},initDatafromWin:function(l){var m=this;var n=[];l.forEach(function(r){var o=r.physicalId;var q=r.name;var p={physicalid:o,name:q,tenant:m.tenant};n.push(p)});this.historyMultiPanel.setObjects(n,false,false);m.historyMultiPanel.addMissingExternalRecIds()},onResize:function(){},onRefresh:function(){},initEnvfromWin:function(m){var l=this},onSetCtxMenuForItem:function(l){var m=0;this.historyMultiPanel.revisionFamily.onSetCtxMenuForItem(l);if(this.historyMultiPanel.revisionFamily.contextMenuObject!==null){m=this.historyMultiPanel.revisionFamily.contextMenuObject.physicalid}},});return f});