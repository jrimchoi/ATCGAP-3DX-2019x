define("DS/MPFConnector/Connector",["UWA/Core","UWA/Class"],function(c,b){var a=b.extend({url:function(d){},request:function(e,d){}});return a});define("DS/MPFConnector/MarketplaceConnector",["UWA/Core","UWA/Utils","UWA/Class","UWA/Promise","DS/MPFConnector/Connector","DS/MPFUtils/MPFUtils","DS/WAFData/WAFData","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/PlatformAPI/PlatformAPI","DS/MPFUrl/UrlUtils","DS/MPFServices/MarketplaceServices"],function(j,g,b,h,f,m,i,c,l,d,k){var e;var a={};e=f.extend({init:function(n,q,o){var p;if(typeof n!=="string"){throw new Error("Marketplace base URL must be a string")}o||(o={});if(n.length>0){p=n.slice(-1);if(p==="/"){this.rootUrl=n.slice(0,-1)}else{this.rootUrl=n}}else{this.rootUrl=n}this.platformId=q;this.tenant=this.platformId;this.service=o.service||k.MAKE},url:function(r,o){var n;var q;var t;var s;var p;o||(o={});n=r.split("#");q=n[0].split("?");if(q.length>1){t=q[1].split("&")}else{t=[]}if(this.service){t.push("service="+this.service)}if(this.platformId){t.push("tenant="+this.platformId)}p=o.esid||g.getQueryString(window.location.href,"esid");if(p&&o.addESID!==false){t.push("project="+p)}s=t.join("&");if(s){q[1]=s}n[0]=q.join("?");r=n.join("#");return this.rootUrl+r},request:function(p,o){var n;var r;var q;r=o.method||"GET";n={method:r,type:"json",timeout:180000,onComplete:o.onComplete,onFailure:o.onFailure,data:o.data,async:o.async};if(r==="POST"||r==="PATCH"||r==="PUT"){q=o.data&&FormData.prototype.isPrototypeOf(o.data);if(!(q)){n.headers||(n.headers={});n.headers["Content-Type"]="application/json"}}if(j.is(g.Client)&&g.Client.Engine.ie&&r==="GET"){p=(new d(p)).addParameter("iecache",Date.now()).getUrl()}return i.authenticatedRequest(p,n)}});e.fetchPromise=function(p){var q;var o;var n;p=(p||{});p=e._sanitizeOptions(p);n=m.objectHashCode(p);o=h.deferred();if(a[n]){o.resolve(a[n])}else{q=p.platformId||l.getApplicationConfiguration("app.mp.tenant");c.getServiceUrl({platformId:q,serviceName:"marketplace",onComplete:function(t){var s;var r;if(t){s=e._extractServiceDetails(t);s.platformId||(s.platformId=q);s.url+="/resources";r=new e(s.url,s.platformId,p);a[n]=r;o.resolve(r)}else{o.reject(new Error("Unable to find marketplace service url for platformId "+q))}},onFailure:function(){o.reject("Unable to get platform services from i3DXCompassPlatformServices")}})}return o.promise};e._sanitizeOptions=function(o){var n={};o=(o||{});if(o.service){n.service=o.service}if(o.platformId){n.platformId=o.platformId}return n};e._extractServiceDetails=function(n){var p={};var o;var q;o=typeof n==="string";q=Array.isArray(n);if(o){p.url=n}else{if(q){p=e._extractFirstServiceWithAnUrlFromArray(n)}else{p.url=""}}return p};e._extractFirstServiceWithAnUrlFromArray=function(o){var p={};var n;n=m.findInArray(o,function(q){return q.url});p.platformId=n.platformId;p.url=n.url;return p};e.get3DPassportUrl=function(){var n;n=h.deferred();c.getPlatformServices({onComplete:function(q){var o;var p;o=q.filter(function(r){return !!(r["3DPassport"])}).pop();if(o){p=o["3DPassport"];n.resolve(p)}else{n.reject("Unable to find a 3DPassport in platform services from i3DXCompassPlatformServices")}},onFailure:function(){n.reject("Unable to get platform services from i3DXCompassPlatformServices")}});return n.promise};return e});define("DS/MPFConnector/AppsConnector",["DS/MPFConnector/Connector","DS/MPFUrl/UrlUtils","DS/WAFData/WAFData","UWA/Promise","UWA/Core","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices"],function(b,e,a,f,d,g){var c=b.extend({init:function(i,h){h||(h={});this.rootUrl=i;if(d.is(h.platformId)){this.platformId=h.platformId}},url:function(i){var h=new e(this.rootUrl+i);return h.getUrl()},request:function(j,i){var h;var k;k=i.method||"GET";h={method:k,type:"json",timeout:180000,onComplete:i.onComplete,onFailure:i.onFailure,data:i.data};return a.authenticatedRequest(j,h)}});c.fetchPromise=function(){var h;h=f.deferred();g.getPlatformServices({onComplete:function(l){var i;var k;var j;i=l.filter(function(m){return !!(m["3DCompass"])}).shift();if(i){k=i["3DCompass"]+"/resources/AppsMngt";j=new c(k);h.resolve(j)}else{h.reject("Unable to find a compass in platform services from i3DXCompassPlatformServices")}},onFailure:function(){h.reject("Unable to get platform services from i3DXCompassPlatformServices")}});return h.promise};c.fetchPromiseSynchro=function(){var h;h=f.deferred();g.getPlatformServices({onComplete:function(l){var i;var k;var j;i=l.filter(function(m){return !!(m["3DCompass"])}).shift();if(i){k=i["3DCompass"]+"/resources/AppsMngtSynchro/api/v1";j=new c(k,{platformId:i.platformId});h.resolve(j)}else{h.reject("Unable to find a compass in platform services from i3DXCompassPlatformServices")}},onFailure:function(){h.reject("Unable to get platform services from i3DXCompassPlatformServices")}});return h.promise};return c});define("DS/MPFConnector/NoConnector",["DS/MPFConnector/Connector","DS/MPFUtils/MPFUtils"],function(c,d){var b;var a;b=c.extend({url:d.doNothing,request:d.doNothing});b.getInstance=function(){a||(a=new b());return a};Object.freeze(b);return b});define("DS/MPFConnector/EchoConnector",["DS/MPFConnector/Connector","DS/MPFUtils/MPFUtils"],function(b,d){var c;var a;c=b.extend({url:function(e){return e},request:d.doNothing});c.getInstance=function(){a||(a=new c());return a};Object.freeze(c);return c});